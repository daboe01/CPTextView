@STATIC;1.0;p;21;_CPAutocompleteMenu.jt;12923;@STATIC;1.0;I;21;Foundation/CPObject.ji;13;CPTextField.ji;13;CPTableView.ji;15;_CPMenuWindow.jt;12821;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPTableView.j", YES);objj_executeFile("_CPMenuWindow.j", YES);var _CPAutocompleteMenuMaximumHeight = 307;
{var the_class = objj_allocateClassPair(CPObject, "_CPAutocompleteMenu"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("textField"), new objj_ivar("contentArray"), new objj_ivar("widestItemWidth"), new objj_ivar("_menuWindow"), new objj_ivar("scrollView"), new objj_ivar("tableView"), new objj_ivar("_showCompletionsTimer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("textField"), function $_CPAutocompleteMenu__textField(self, _cmd)
{
    return self.textField;
}
,["CPTextField"]), new objj_method(sel_getUid("setTextField:"), function $_CPAutocompleteMenu__setTextField_(self, _cmd, newValue)
{
    self.textField = newValue;
}
,["void","CPTextField"]), new objj_method(sel_getUid("contentArray"), function $_CPAutocompleteMenu__contentArray(self, _cmd)
{
    return self.contentArray;
}
,["CPArray"]), new objj_method(sel_getUid("setContentArray:"), function $_CPAutocompleteMenu__setContentArray_(self, _cmd, newValue)
{
    self.contentArray = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("initWithTextField:"), function $_CPAutocompleteMenu__initWithTextField_(self, _cmd, aTextField)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPAutocompleteMenu").super_class }, "init"))
    {
        self.textField = aTextField;
        self._menuWindow = objj_msgSend(objj_msgSend(_CPAutocompleteWindow, "alloc"), "initWithContentRect:styleMask:", CGRectMake(0, 0, 100, 100), CPBorderlessWindowMask);
        objj_msgSend(self._menuWindow, "setLevel:", CPPopUpMenuWindowLevel);
        objj_msgSend(self._menuWindow, "setHasShadow:", YES);
        objj_msgSend(self._menuWindow, "setShadowStyle:", CPMenuWindowShadowStyle);
        objj_msgSend(self._menuWindow, "setAcceptsMouseMovedEvents:", YES);
        objj_msgSend(self._menuWindow, "setBackgroundColor:", objj_msgSend(_CPMenuWindow, "backgroundColorForBackgroundStyle:", _CPMenuWindowPopUpBackgroundStyle));
        var contentView = objj_msgSend(self._menuWindow, "contentView");
        self.scrollView = objj_msgSend(objj_msgSend(CPScrollView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self.scrollView, "setAutohidesScrollers:", YES);
        objj_msgSend(self.scrollView, "setHasHorizontalScroller:", NO);
        objj_msgSend(contentView, "addSubview:", self.scrollView);
        self.tableView = objj_msgSend(objj_msgSend(_CPNonFirstResponderTableView, "alloc"), "initWithFrame:", CGRectMakeZero());
        var tableColumn = objj_msgSend(CPTableColumn, "new");
        objj_msgSend(tableColumn, "setResizingMask:", CPTableColumnAutoresizingMask);
        objj_msgSend(self.tableView, "addTableColumn:", tableColumn);
        objj_msgSend(self.tableView, "setDataSource:", self);
        objj_msgSend(self.tableView, "setDelegate:", self);
        objj_msgSend(self.tableView, "setTarget:", self);
        objj_msgSend(self.tableView, "setAction:", sel_getUid("complete:"));
        objj_msgSend(self.tableView, "setAllowsMultipleSelection:", NO);
        objj_msgSend(self.tableView, "setHeaderView:", nil);
        objj_msgSend(self.tableView, "setCornerView:", nil);
        objj_msgSend(self.tableView, "setRowHeight:", 24.0);
        objj_msgSend(self.tableView, "setGridStyleMask:", CPTableViewGridNone);
        objj_msgSend(self.tableView, "setBackgroundColor:", objj_msgSend(CPColor, "clearColor"));
        objj_msgSend(self.scrollView, "setDocumentView:", self.tableView);
    }
    return self;
}
,["id","CPTextField"]), new objj_method(sel_getUid("setContentArray:"), function $_CPAutocompleteMenu__setContentArray_(self, _cmd, anArray)
{
    if (self.contentArray === anArray || objj_msgSend(self.contentArray, "isEqualToArray:", anArray))
        return;
    self.contentArray = objj_msgSend(anArray, "copy");
    if (!objj_msgSend(self.contentArray, "count"))
        objj_msgSend(self, "_hideCompletions");
    self.widestItemWidth = CPNotFound;
    objj_msgSend(self.tableView, "reloadData");
    objj_msgSend(self, "layoutSubviews");
}
,["void","CPArray"]), new objj_method(sel_getUid("setIndexOfSelectedItem:"), function $_CPAutocompleteMenu__setIndexOfSelectedItem_(self, _cmd, anIndex)
{
    if (anIndex == CPNotFound)
        objj_msgSend(self.tableView, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSet"), NO);
    else
    {
        objj_msgSend(self.tableView, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", anIndex), NO);
        objj_msgSend(self.tableView, "scrollRowToVisible:", anIndex);
    }
}
,["void","int"]), new objj_method(sel_getUid("indexOfSelectedItem"), function $_CPAutocompleteMenu__indexOfSelectedItem(self, _cmd)
{
    return objj_msgSend(self.tableView, "selectedRow");
}
,["int"]), new objj_method(sel_getUid("selectedItem"), function $_CPAutocompleteMenu__selectedItem(self, _cmd)
{
    return self.contentArray ? self.contentArray[objj_msgSend(self.tableView, "selectedRow")] : nil;
}
,["CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPAutocompleteMenu__layoutSubviews(self, _cmd)
{
    if (!objj_msgSend(self.textField, "window"))
    {
        objj_msgSend(self._menuWindow, "orderOut:", self);
        return;
    }
    var frame = objj_msgSend(self.textField, "frame"),
        origin = frame.origin,
        tableColumn = objj_msgSend(objj_msgSend(self.tableView, "tableColumns"), "firstObject");
    if (objj_msgSend(self.textField, "respondsToSelector:", sel_getUid("_completionOrigin:")))
        origin = objj_msgSend(self.textField, "_completionOrigin:", self);
    if (self.widestItemWidth === CPNotFound)
    {
        var dataView = objj_msgSend(tableColumn, "dataView"),
            fontNormal = objj_msgSend(dataView, "valueForThemeAttribute:inState:", "font", CPThemeStateTableDataView),
            fontSelected = objj_msgSend(dataView, "valueForThemeAttribute:inState:", "font", CPThemeStateTableDataView | CPThemeStateSelectedDataView),
            contentInsetNormal = objj_msgSend(dataView, "valueForThemeAttribute:inState:", "content-inset", CPThemeStateTableDataView),
            contentInsetSelected = objj_msgSend(dataView, "valueForThemeAttribute:inState:", "content-inset", CPThemeStateTableDataView | CPThemeStateSelectedDataView);
        var mergedString = self.contentArray.join("\n");
        self.widestItemWidth = MAX(objj_msgSend(mergedString, "sizeWithFont:", fontNormal).width + contentInsetNormal.left + contentInsetNormal.right, objj_msgSend(mergedString, "sizeWithFont:", fontSelected).width + contentInsetSelected.left + contentInsetSelected.right) + objj_msgSend(self.tableView, "intercellSpacing").width + 2.0 + 5.0;
    }
    var frameOrigin = objj_msgSend(objj_msgSend(self.textField, "window"), "convertBaseToGlobal:", objj_msgSend(self.textField, "convertPointToBase:", origin)),
        screenSize = objj_msgSend(objj_msgSend(CPPlatform, "isBrowser") ? objj_msgSend(self._menuWindow, "platformWindow") : objj_msgSend(self._menuWindow, "screen"), "visibleFrame").size,
        availableWidth = screenSize.width - frameOrigin.x,
        availableHeight = screenSize.height - frameOrigin.y,
        width = MIN(self.widestItemWidth, availableWidth),
        spacingHeight = objj_msgSend(self.tableView, "intercellSpacing").height,
        height = MIN(MIN(spacingHeight + objj_msgSend(self.contentArray, "count") * (objj_msgSend(self.tableView, "rowHeight") + spacingHeight), _CPAutocompleteMenuMaximumHeight), availableHeight),
        newFrame = CGRectMake(frameOrigin.x, frameOrigin.y, width, height);
    newFrame = objj_msgSend(self._menuWindow, "frameRectForContentRect:", newFrame);
    objj_msgSend(self._menuWindow, "setFrame:", newFrame);
    var scrollFrame = CGRectInset(objj_msgSend(objj_msgSend(self._menuWindow, "contentView"), "bounds"), 1.0, 1.0);
    objj_msgSend(self.scrollView, "setFrame:", scrollFrame);
    objj_msgSend(tableColumn, "setWidth:", objj_msgSend(objj_msgSend(self.scrollView, "contentView"), "frame").size.width);
}
,["void"]), new objj_method(sel_getUid("_showCompletions:"), function $_CPAutocompleteMenu___showCompletions_(self, _cmd, timer)
{
    var indexOfSelectedItem = objj_msgSend(self, "indexOfSelectedItem");
    objj_msgSend(self, "setContentArray:", objj_msgSend(self.textField, "_completionsForSubstring:indexOfToken:indexOfSelectedItem:", objj_msgSend(self.textField, "_inputElement").value, 0, indexOfSelectedItem));
    if (!objj_msgSend(self.contentArray, "count"))
        return;
    objj_msgSend(self, "setIndexOfSelectedItem:", indexOfSelectedItem);
    objj_msgSend(self.textField, "setThemeState:", CPThemeStateAutocompleting);
    objj_msgSend(self._menuWindow, "setPlatformWindow:", objj_msgSend(objj_msgSend(self.textField, "window"), "platformWindow"));
    objj_msgSend(objj_msgSend(self.textField, "window"), "addChildWindow:ordered:", self._menuWindow, CPWindowAbove);
    objj_msgSend(self, "layoutSubviews");
}
,["void","CPTimer"]), new objj_method(sel_getUid("_delayedShowCompletions"), function $_CPAutocompleteMenu___delayedShowCompletions(self, _cmd)
{
    var completionDelay = 0.5;
    if (objj_msgSend(self.textField, "respondsToSelector:", sel_getUid("completionDelay")))
        completionDelay = objj_msgSend(self.textField, "completionDelay");
    self._showCompletionsTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", completionDelay, self, sel_getUid("_showCompletions:"), nil, NO);
}
,["void"]), new objj_method(sel_getUid("_hideCompletions"), function $_CPAutocompleteMenu___hideCompletions(self, _cmd)
{
    objj_msgSend(self._showCompletionsTimer, "invalidate");
    self._showCompletionsTimer = nil;
    objj_msgSend(self.textField, "unsetThemeState:", CPThemeStateAutocompleting);
    objj_msgSend(self._menuWindow, "orderOut:", self);
    objj_msgSend(self, "layoutSubviews");
}
,["void"]), new objj_method(sel_getUid("selectNext"), function $_CPAutocompleteMenu__selectNext(self, _cmd)
{
    var index = objj_msgSend(self, "indexOfSelectedItem") + 1;
    if (index >= objj_msgSend(self.contentArray, "count"))
        return;
    objj_msgSend(self, "setIndexOfSelectedItem:", index);
}
,["void"]), new objj_method(sel_getUid("selectPrevious"), function $_CPAutocompleteMenu__selectPrevious(self, _cmd)
{
    var index = objj_msgSend(self, "indexOfSelectedItem") - 1;
    if (index < 0)
        return;
    objj_msgSend(self, "setIndexOfSelectedItem:", index);
}
,["void"]), new objj_method(sel_getUid("numberOfRowsInTableView:"), function $_CPAutocompleteMenu__numberOfRowsInTableView_(self, _cmd, tableView)
{
    return objj_msgSend(self.contentArray, "count");
}
,["int","CPTableView"]), new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"), function $_CPAutocompleteMenu__tableView_objectValueForTableColumn_row_(self, _cmd, tableView, tableColumn, row)
{
    return objj_msgSend(self.contentArray, "objectAtIndex:", row);
}
,["void","CPTableView","CPTableColumn","int"]), new objj_method(sel_getUid("complete:"), function $_CPAutocompleteMenu__complete_(self, _cmd, sender)
{
    objj_msgSend(self.textField, "_complete:", self);
}
,["id","id"])]);
}{var the_class = objj_allocateClassPair(CPPanel, "_CPAutocompleteWindow"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithContentRect:styleMask:"), function $_CPAutocompleteWindow__initWithContentRect_styleMask_(self, _cmd, aContentRect, aStyleMask)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPAutocompleteWindow").super_class }, "initWithContentRect:styleMask:", aContentRect, aStyleMask))
        self._constrainsToUsableScreen = NO;
    return self;
}
,["id","CGRect","unsigned int"]), new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"), function $_CPAutocompleteWindow__becomesKeyOnlyIfNeeded(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("worksWhenModal"), function $_CPAutocompleteWindow__worksWhenModal(self, _cmd)
{
    return YES;
}
,["BOOL"])]);
}{var the_class = objj_allocateClassPair(CPTableView, "_CPNonFirstResponderTableView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("needsPanelToBecomeKey"), function $_CPNonFirstResponderTableView__needsPanelToBecomeKey(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPNonFirstResponderTableView__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"])]);
}p;15;_CPCornerView.jt;2529;@STATIC;1.0;i;8;CPView.jt;2498;objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPCornerView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("drawRect:"), function $_CPCornerView__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        color = objj_msgSend(self, "currentValueForThemeAttribute:", "divider-color");
    CGContextSetLineWidth(context, 1);
    CGContextSetStrokeColor(context, objj_msgSend(self, "currentValueForThemeAttribute:", "divider-color"));
    CGContextMoveToPoint(context, CGRectGetMinX(aRect) + 0.5, ROUND(CGRectGetMinY(aRect)));
    CGContextAddLineToPoint(context, CGRectGetMinX(aRect) + 0.5, ROUND(CGRectGetMaxY(aRect)) - 1.0);
    CGContextClosePath(context);
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPCornerView__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "background-color"));
}
,["void"]), new objj_method(sel_getUid("_init"), function $_CPCornerView___init(self, _cmd)
{
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "background-color"));
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPCornerView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCornerView").super_class }, "initWithFrame:", aFrame);
    if (self)
        objj_msgSend(self, "_init");
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPCornerView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCornerView").super_class }, "initWithCoder:", aCoder);
    if (self)
        objj_msgSend(self, "_init");
    return self;
}
,["id","CPCoder"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPCornerView__defaultThemeClass(self, _cmd)
{
    return "cornerview";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPCornerView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "background-color", objj_msgSend(CPNull, "null"), "divider-color");
}
,["id"])]);
}p;18;_CPDisplayServer.jt;2178;@STATIC;1.0;I;22;Foundation/CPRunLoop.jt;2132;objj_executeFile("Foundation/CPRunLoop.j", NO);var displayObjects = [],
    displayObjectsByUID = {},
    layoutObjects = [],
    layoutObjectsByUID = {},
    runLoop = objj_msgSend(CPRunLoop, "mainRunLoop");
_CPDisplayServerAddDisplayObject = function(anObject)
{
    var UID = objj_msgSend(anObject, "UID");
    if (typeof displayObjectsByUID[UID] !== "undefined")
        return;
    var index = displayObjects.length;
    displayObjectsByUID[UID] = index;
    displayObjects[index] = anObject;
}
_CPDisplayServerAddLayoutObject = function(anObject)
{
    var UID = objj_msgSend(anObject, "UID");
    if (typeof layoutObjectsByUID[UID] !== "undefined")
        return;
    var index = layoutObjects.length;
    layoutObjectsByUID[UID] = index;
    layoutObjects[index] = anObject;
}
{var the_class = objj_allocateClassPair(CPObject, "_CPDisplayServer"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("run"), function $_CPDisplayServer__run(self, _cmd)
{
    while (layoutObjects.length || displayObjects.length)
    {
        var index = 0;
        for (; index < layoutObjects.length; ++index)
        {
            var object = layoutObjects[index];
            delete layoutObjectsByUID[objj_msgSend(object, "UID")];
            objj_msgSend(object, "layoutIfNeeded");
        }
        layoutObjects = [];
        layoutObjectsByUID = {};
        index = 0;
        for (; index < displayObjects.length; ++index)
        {
            if (layoutObjects.length)
                break;
            var object = displayObjects[index];
            delete displayObjectsByUID[objj_msgSend(object, "UID")];
            objj_msgSend(object, "displayIfNeeded");
        }
        if (index === displayObjects.length)
        {
            displayObjects = [];
            displayObjectsByUID = {};
        }
        else
            displayObjects.splice(0, index);
    }
    objj_msgSend(runLoop, "performSelector:target:argument:order:modes:", sel_getUid("run"), self, nil, 0, [CPDefaultRunLoopMode]);
}
,["void"])]);
}objj_msgSend(_CPDisplayServer, "run");
p;21;_CPImageAndTextView.jt;26843;@STATIC;1.0;I;21;Foundation/CPString.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;8;CPView.ji;11;CPControl.ji;12;CPPlatform.jt;26714;objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPColor.j", YES);objj_executeFile("CPFont.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPControl.j", YES);objj_executeFile("CPPlatform.j", YES);var _CPimageAndTextViewFrameSizeChangedFlag = 1 << 0,
    _CPImageAndTextViewImageChangedFlag = 1 << 1,
    _CPImageAndTextViewTextChangedFlag = 1 << 2,
    _CPImageAndTextViewAlignmentChangedFlag = 1 << 3,
    _CPImageAndTextViewVerticalAlignmentChangedFlag = 1 << 4,
    _CPImageAndTextViewLineBreakModeChangedFlag = 1 << 5,
    _CPImageAndTextViewTextColorChangedFlag = 1 << 6,
    _CPImageAndTextViewFontChangedFlag = 1 << 7,
    _CPImageAndTextViewTextShadowColorChangedFlag = 1 << 8,
    _CPImageAndTextViewImagePositionChangedFlag = 1 << 9,
    _CPImageAndTextViewImageScalingChangedFlag = 1 << 10;
{var the_class = objj_allocateClassPair(CPView, "_CPImageAndTextView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_alignment"), new objj_ivar("_verticalAlignment"), new objj_ivar("_lineBreakMode"), new objj_ivar("_textColor"), new objj_ivar("_font"), new objj_ivar("_textShadowColor"), new objj_ivar("_textShadowOffset"), new objj_ivar("_imagePosition"), new objj_ivar("_imageScaling"), new objj_ivar("_imageOffset"), new objj_ivar("_shouldDimImage"), new objj_ivar("_image"), new objj_ivar("_text"), new objj_ivar("_textSize"), new objj_ivar("_flags"), new objj_ivar("_DOMImageElement"), new objj_ivar("_DOMTextElement"), new objj_ivar("_DOMTextShadowElement")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:control:"), function $_CPImageAndTextView__initWithFrame_control_(self, _cmd, aFrame, aControl)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPImageAndTextView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._textShadowOffset = CGSizeMakeZero();
        objj_msgSend(self, "setVerticalAlignment:", CPTopVerticalTextAlignment);
        if (aControl)
        {
            objj_msgSend(self, "setLineBreakMode:", objj_msgSend(aControl, "lineBreakMode"));
            objj_msgSend(self, "setTextColor:", objj_msgSend(aControl, "textColor"));
            objj_msgSend(self, "setAlignment:", objj_msgSend(aControl, "alignment"));
            objj_msgSend(self, "setVerticalAlignment:", objj_msgSend(aControl, "verticalAlignment"));
            objj_msgSend(self, "setFont:", objj_msgSend(aControl, "font"));
            objj_msgSend(self, "setImagePosition:", objj_msgSend(aControl, "imagePosition"));
            objj_msgSend(self, "setImageScaling:", objj_msgSend(aControl, "imageScaling"));
            objj_msgSend(self, "setImageOffset:", objj_msgSend(aControl, "imageOffset"));
        }
        else
        {
            objj_msgSend(self, "setLineBreakMode:", CPLineBreakByClipping);
            objj_msgSend(self, "setAlignment:", CPCenterTextAlignment);
            objj_msgSend(self, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize));
            objj_msgSend(self, "setImagePosition:", CPNoImage);
            objj_msgSend(self, "setImageScaling:", CPImageScaleNone);
        }
        self._textSize = nil;
        objj_msgSend(self, "setHitTests:", NO);
    }
    return self;
}
,["id","CGRect","CPControl"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPImageAndTextView__initWithFrame_(self, _cmd, aFrame)
{
    return objj_msgSend(self, "initWithFrame:control:", aFrame, nil);
}
,["id","CGRect"]), new objj_method(sel_getUid("setAlignment:"), function $_CPImageAndTextView__setAlignment_(self, _cmd, anAlignment)
{
    if (self._alignment === anAlignment)
        return;
    self._alignment = anAlignment;
    switch(self._alignment) {
    case CPLeftTextAlignment:
        self._DOMElement.style.textAlign = "left";
        break;
    case CPRightTextAlignment:
        self._DOMElement.style.textAlign = "right";
        break;
    case CPCenterTextAlignment:
        self._DOMElement.style.textAlign = "center";
        break;
    case CPJustifiedTextAlignment:
        self._DOMElement.style.textAlign = "justify";
        break;
    case CPNaturalTextAlignment:
        self._DOMElement.style.textAlign = "";
        break;
    }
}
,["void","CPTextAlignment"]), new objj_method(sel_getUid("alignment"), function $_CPImageAndTextView__alignment(self, _cmd)
{
    return self._alignment;
}
,["CPTextAlignment"]), new objj_method(sel_getUid("setVerticalAlignment:"), function $_CPImageAndTextView__setVerticalAlignment_(self, _cmd, anAlignment)
{
    if (self._verticalAlignment === anAlignment)
        return;
    self._verticalAlignment = anAlignment;
    self._flags |= _CPImageAndTextViewVerticalAlignmentChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPVerticalTextAlignment"]), new objj_method(sel_getUid("verticalAlignment"), function $_CPImageAndTextView__verticalAlignment(self, _cmd)
{
    return self._verticalAlignment;
}
,["unsigned"]), new objj_method(sel_getUid("setLineBreakMode:"), function $_CPImageAndTextView__setLineBreakMode_(self, _cmd, aLineBreakMode)
{
    if (self._lineBreakMode === aLineBreakMode)
        return;
    self._lineBreakMode = aLineBreakMode;
    self._flags |= _CPImageAndTextViewLineBreakModeChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPLineBreakMode"]), new objj_method(sel_getUid("lineBreakMode"), function $_CPImageAndTextView__lineBreakMode(self, _cmd)
{
    return self._lineBreakMode;
}
,["CPLineBreakMode"]), new objj_method(sel_getUid("setImagePosition:"), function $_CPImageAndTextView__setImagePosition_(self, _cmd, anImagePosition)
{
    if (self._imagePosition == anImagePosition)
        return;
    if (self._imagePosition == CPNoImage)
        self._flags |= _CPImageAndTextViewImageChangedFlag;
    self._imagePosition = anImagePosition;
    self._flags |= _CPImageAndTextViewImagePositionChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPCellImagePosition"]), new objj_method(sel_getUid("imagePosition"), function $_CPImageAndTextView__imagePosition(self, _cmd)
{
    return self._imagePosition;
}
,["CPCellImagePosition"]), new objj_method(sel_getUid("setImageScaling:"), function $_CPImageAndTextView__setImageScaling_(self, _cmd, anImageScaling)
{
    if (self._imageScaling == anImageScaling)
        return;
    self._imageScaling = anImageScaling;
    self._flags |= _CPImageAndTextViewImageScalingChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPImageScaling"]), new objj_method(sel_getUid("imageScaling"), function $_CPImageAndTextView__imageScaling(self, _cmd)
{
    return self._imageScaling;
}
,["void"]), new objj_method(sel_getUid("setDimsImage:"), function $_CPImageAndTextView__setDimsImage_(self, _cmd, shouldDimImage)
{
    shouldDimImage = !!shouldDimImage;
    if (self._shouldDimImage !== shouldDimImage)
    {
        self._shouldDimImage = shouldDimImage;
        objj_msgSend(self, "setNeedsLayout");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("setTextColor:"), function $_CPImageAndTextView__setTextColor_(self, _cmd, aTextColor)
{
    if (self._textColor === aTextColor)
        return;
    self._textColor = aTextColor;
    self._DOMElement.style.color = objj_msgSend(self._textColor, "cssString");
}
,["void","CPColor"]), new objj_method(sel_getUid("textColor"), function $_CPImageAndTextView__textColor(self, _cmd)
{
    return self._textColor;
}
,["CPColor"]), new objj_method(sel_getUid("setFont:"), function $_CPImageAndTextView__setFont_(self, _cmd, aFont)
{
    if (objj_msgSend(self._font, "isEqual:", aFont))
        return;
    self._font = aFont;
    self._flags |= _CPImageAndTextViewFontChangedFlag;
    self._textSize = nil;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $_CPImageAndTextView__font(self, _cmd)
{
    return self._font;
}
,["CPFont"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPImageAndTextView__setTextShadowColor_(self, _cmd, aColor)
{
    if (self._textShadowColor === aColor)
        return;
    self._textShadowColor = aColor;
    self._flags |= _CPImageAndTextViewTextShadowColorChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPImageAndTextView__textShadowColor(self, _cmd)
{
    return self._textShadowColor;
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowOffset:"), function $_CPImageAndTextView__setTextShadowOffset_(self, _cmd, anOffset)
{
    if (CGSizeEqualToSize(self._textShadowOffset, anOffset))
        return;
    self._textShadowOffset = CGSizeMakeCopy(anOffset);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CGSize"]), new objj_method(sel_getUid("textShadowOffset"), function $_CPImageAndTextView__textShadowOffset(self, _cmd)
{
    return self._textShadowOffset;
}
,["CGSize"]), new objj_method(sel_getUid("textFrame"), function $_CPImageAndTextView__textFrame(self, _cmd)
{
    objj_msgSend(self, "layoutIfNeeded");
    var textFrame = CGRectMakeZero();
    if (self._DOMTextElement)
    {
        var textStyle = self._DOMTextElement.style;
        (textFrame.origin.y = parseInt(textStyle.top.substr(0, textStyle.top.length - 2), 10), textFrame.origin.x = parseInt(textStyle.left.substr(0, textStyle.left.length - 2), 10), textFrame.size.width = parseInt(textStyle.width.substr(0, textStyle.width.length - 2), 10), textFrame.size.height = parseInt(textStyle.height.substr(0, textStyle.height.length - 2), 10));
        textFrame.size.width += self._textShadowOffset.width;
        textFrame.size.height += self._textShadowOffset.height;
    }
    return textFrame;
}
,["CGRect"]), new objj_method(sel_getUid("setImage:"), function $_CPImageAndTextView__setImage_(self, _cmd, anImage)
{
    if (self._image == anImage)
        return;
    self._image = anImage;
    self._flags |= _CPImageAndTextViewImageChangedFlag;
    if (objj_msgSend(self._image, "loadStatus") !== CPImageLoadStatusCompleted)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("imageDidLoad:"), CPImageDidLoadNotification, self._image);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPImage"]), new objj_method(sel_getUid("setImageOffset:"), function $_CPImageAndTextView__setImageOffset_(self, _cmd, theImageOffset)
{
    if (self._imageOffset === theImageOffset)
        return;
    self._imageOffset = theImageOffset;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","float"]), new objj_method(sel_getUid("imageOffset"), function $_CPImageAndTextView__imageOffset(self, _cmd)
{
    return self._imageOffset;
}
,["float"]), new objj_method(sel_getUid("imageDidLoad:"), function $_CPImageAndTextView__imageDidLoad_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPImageDidLoadNotification, self._image);
    self._flags |= _CPImageAndTextViewImageChangedFlag;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPNotification"]), new objj_method(sel_getUid("image"), function $_CPImageAndTextView__image(self, _cmd)
{
    return self._image;
}
,["CPImage"]), new objj_method(sel_getUid("setText:"), function $_CPImageAndTextView__setText_(self, _cmd, text)
{
    if (self._text === text)
        return;
    self._text = text;
    self._flags |= _CPImageAndTextViewTextChangedFlag;
    self._textSize = nil;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPString"]), new objj_method(sel_getUid("text"), function $_CPImageAndTextView__text(self, _cmd)
{
    return self._text;
}
,["CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPImageAndTextView__layoutSubviews(self, _cmd)
{
    var needsDOMTextElement = self._imagePosition !== CPImageOnly && objj_msgSend(self._text, "length") > 0,
        hasDOMTextElement = !!self._DOMTextElement;
    if (needsDOMTextElement !== hasDOMTextElement)
    {
        if (hasDOMTextElement)
        {
            self._DOMElement.removeChild(self._DOMTextElement);
            self._DOMTextElement = nil;
            hasDOMTextElement = NO;
        }
        else
        {
            self._DOMTextElement = document.createElement("div");
            var textStyle = self._DOMTextElement.style;
            textStyle.position = "absolute";
            textStyle.whiteSpace = "pre";
            textStyle.zIndex = 200;
            textStyle.overflow = "hidden";
            self._DOMElement.appendChild(self._DOMTextElement);
            hasDOMTextElement = YES;
            self._flags |= _CPImageAndTextViewTextChangedFlag | _CPImageAndTextViewFontChangedFlag | _CPImageAndTextViewLineBreakModeChangedFlag;
        }
    }
    var textStyle = hasDOMTextElement ? self._DOMTextElement.style : nil;
    var needsDOMTextShadowElement = hasDOMTextElement && objj_msgSend(self._textShadowColor, "alphaComponent") > 0.0,
        hasDOMTextShadowElement = !!self._DOMTextShadowElement;
    if (needsDOMTextShadowElement !== hasDOMTextShadowElement)
    {
        if (hasDOMTextShadowElement)
        {
            self._DOMElement.removeChild(self._DOMTextShadowElement);
            self._DOMTextShadowElement = nil;
            hasDOMTextShadowElement = NO;
        }
        else
        {
            self._DOMTextShadowElement = document.createElement("div");
            var shadowStyle = self._DOMTextShadowElement.style,
                font = self._font || objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize);
            shadowStyle.font = objj_msgSend(font, "cssString");
            shadowStyle.position = "absolute";
            shadowStyle.whiteSpace = textStyle.whiteSpace;
            shadowStyle.wordWrap = textStyle.wordWrap;
            shadowStyle.color = objj_msgSend(self._textShadowColor, "cssString");
            shadowStyle.lineHeight = objj_msgSend(font, "defaultLineHeightForFont") + "px";
            shadowStyle.zIndex = 150;
            shadowStyle.textOverflow = textStyle.textOverflow;
            if (document.attachEvent)
            {
                shadowStyle.overflow = textStyle.overflow;
            }
            else
            {
                shadowStyle.overflowX = textStyle.overflowX;
                shadowStyle.overflowY = textStyle.overflowY;
            }
            self._DOMElement.appendChild(self._DOMTextShadowElement);
            hasDOMTextShadowElement = YES;
            self._flags |= _CPImageAndTextViewTextChangedFlag;
        }
    }
    var shadowStyle = hasDOMTextShadowElement ? self._DOMTextShadowElement.style : nil;
    if (hasDOMTextElement)
    {
        if (self._flags & _CPImageAndTextViewTextChangedFlag)
            if (CPFeatureIsCompatible(CPJavaScriptInnerTextFeature))
            {
                self._DOMTextElement.innerText = self._text;
                if (self._DOMTextShadowElement)
                    self._DOMTextShadowElement.innerText = self._text;
            }
            else if (CPFeatureIsCompatible(CPJavaScriptTextContentFeature))
            {
                self._DOMTextElement.textContent = self._text;
                if (self._DOMTextShadowElement)
                    self._DOMTextShadowElement.textContent = self._text;
            }
        if (self._flags & _CPImageAndTextViewFontChangedFlag)
        {
            var font = self._font || objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize),
                fontStyle = objj_msgSend(font, "cssString");
            textStyle.font = fontStyle;
            textStyle.lineHeight = objj_msgSend(font, "defaultLineHeightForFont") + "px";
            if (shadowStyle)
            {
                shadowStyle.font = fontStyle;
                shadowStyle.lineHeight = objj_msgSend(font, "defaultLineHeightForFont") + "px";
            }
        }
        if (self._flags & _CPImageAndTextViewLineBreakModeChangedFlag)
        {
            switch(self._lineBreakMode) {
            case CPLineBreakByClipping:
                textStyle.overflow = "hidden";
                textStyle.textOverflow = "clip";
                textStyle.whiteSpace = "pre";
                textStyle.wordWrap = "normal";
                break;
            case CPLineBreakByTruncatingHead:
            case CPLineBreakByTruncatingMiddle:
            case CPLineBreakByTruncatingTail:
                textStyle.textOverflow = "ellipsis";
                textStyle.whiteSpace = "pre";
                textStyle.overflow = "hidden";
                textStyle.wordWrap = "normal";
                break;
            case CPLineBreakByCharWrapping:
            case CPLineBreakByWordWrapping:
                textStyle.wordWrap = "break-word";
                try                {
                    textStyle.whiteSpace = "pre";
                    textStyle.whiteSpace = "-o-pre-wrap";
                    textStyle.whiteSpace = "-pre-wrap";
                    textStyle.whiteSpace = "-moz-pre-wrap";
                    textStyle.whiteSpace = "pre-wrap";
                }
                catch(e)                 {
                    textStyle.whiteSpace = "pre";
                }                textStyle.overflow = "hidden";
                textStyle.textOverflow = "clip";
                break;
            }
            if (shadowStyle)
            {
                if (document.attachEvent)
                {
                    shadowStyle.overflow = textStyle.overflow;
                }
                else
                {
                    shadowStyle.overflowX = textStyle.overflowX;
                    shadowStyle.overflowY = textStyle.overflowY;
                }
                shadowStyle.wordWrap = textStyle.wordWrap;
                shadowStyle.whiteSpace = textStyle.whiteSpace;
                shadowStyle.textOverflow = textStyle.textOverflow;
            }
        }
    }
    var needsDOMImageElement = self._image !== nil && self._imagePosition !== CPNoImage,
        hasDOMImageElement = !!self._DOMImageElement;
    if (needsDOMImageElement !== hasDOMImageElement)
    {
        if (hasDOMImageElement)
        {
            self._DOMElement.removeChild(self._DOMImageElement);
            self._DOMImageElement = nil;
            hasDOMImageElement = NO;
        }
        else
        {
            self._DOMImageElement = document.createElement("img");
            if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
            {
                self._DOMImageElement.setAttribute("draggable", "true");
                self._DOMImageElement.style["-khtml-user-drag"] = "element";
            }
            var imageStyle = self._DOMImageElement.style;
            imageStyle.top = "0px";
            imageStyle.left = "0px";
            imageStyle.position = "absolute";
            imageStyle.zIndex = 100;
            self._DOMElement.appendChild(self._DOMImageElement);
            hasDOMImageElement = YES;
        }
    }
    var size = objj_msgSend(self, "bounds").size,
        textRect = CGRectMake(0.0, 0.0, size.width, size.height);
    if (hasDOMImageElement)
    {
        if (!imageStyle)
            var imageStyle = self._DOMImageElement.style;
        if (self._flags & _CPImageAndTextViewImageChangedFlag)
            self._DOMImageElement.src = objj_msgSend(self._image, "filename");
        var centerX = size.width / 2.0,
            centerY = size.height / 2.0,
            imageSize = objj_msgSend(self._image, "size"),
            imageWidth = imageSize.width,
            imageHeight = imageSize.height;
        if (self._imageScaling === CPImageScaleAxesIndependently)
        {
            imageWidth = size.width;
            imageHeight = size.height;
        }
        else if (self._imageScaling === CPImageScaleProportionallyDown)
        {
            var scale = MIN(MIN(size.width, imageWidth) / imageWidth, MIN(size.height, imageHeight) / imageHeight);
            imageWidth *= scale;
            imageHeight *= scale;
        }
        if (CPFeatureIsCompatible(CPOpacityRequiresFilterFeature))
            imageStyle.filter = "alpha(opacity=" + self._shouldDimImage ? 50 : 100 + ")";
        else
            imageStyle.opacity = self._shouldDimImage ? 0.5 : 1.0;
        self._DOMImageElement.width = imageWidth;
        self._DOMImageElement.height = imageHeight;
        imageStyle.width = MAX(imageWidth, 0) + "px";
        imageStyle.height = MAX(imageHeight, 0) + "px";
        if (self._imagePosition === CPImageBelow)
        {
            imageStyle.left = FLOOR(centerX - imageWidth / 2.0) + "px";
            imageStyle.top = FLOOR(size.height - imageHeight) + "px";
            textRect.size.height = size.height - imageHeight - self._imageOffset;
        }
        else if (self._imagePosition === CPImageAbove)
        {
            imageStyle.left = FLOOR(centerX - imageWidth / 2.0) + "px";
            imageStyle.top = 0 + "px";
            textRect.origin.y += imageHeight + self._imageOffset;
            textRect.size.height = size.height - imageHeight - self._imageOffset;
        }
        else if (self._imagePosition === CPImageLeft)
        {
            imageStyle.top = FLOOR(centerY - imageHeight / 2.0) + "px";
            imageStyle.left = "0px";
            textRect.origin.x = imageWidth + self._imageOffset;
            textRect.size.width -= imageWidth + self._imageOffset;
        }
        else if (self._imagePosition === CPImageRight)
        {
            imageStyle.top = FLOOR(centerY - imageHeight / 2.0) + "px";
            imageStyle.left = FLOOR(size.width - imageWidth) + "px";
            textRect.size.width -= imageWidth + self._imageOffset;
        }
        else if (self._imagePosition === CPImageOnly || self._imagePosition == CPImageOverlaps)
        {
            imageStyle.top = FLOOR(centerY - imageHeight / 2.0) + "px";
            imageStyle.left = FLOOR(centerX - imageWidth / 2.0) + "px";
        }
    }
    if (hasDOMTextElement)
    {
        var textRectX = CGRectGetMinX(textRect),
            textRectY = CGRectGetMinY(textRect),
            textRectWidth = CGRectGetWidth(textRect),
            textRectHeight = CGRectGetHeight(textRect);
        if (textRectWidth <= 0 || textRectHeight <= 0)
        {
            textRectWidth = 0;
            textRectHeight = 0;
        }
        else
        {
            if (self._verticalAlignment !== CPTopVerticalTextAlignment)
            {
                if (!self._textSize)
                {
                    if (self._lineBreakMode === CPLineBreakByCharWrapping || self._lineBreakMode === CPLineBreakByWordWrapping)
                    {
                        self._textSize = objj_msgSend(self._text, "sizeWithFont:inWidth:", self._font, textRectWidth);
                    }
                    else
                    {
                        self._textSize = objj_msgSend(self._text, "sizeWithFont:", self._font);
                        self._textSize.width += 1;
                    }
                    self._textSize.height += 1;
                }
                if (self._verticalAlignment === CPCenterVerticalTextAlignment)
                {
                    textRectY = textRectY + (textRectHeight - self._textSize.height + 1.0) / 2.0;
                    textRectHeight = self._textSize.height;
                }
                else
                {
                    textRectY = textRectY + textRectHeight - self._textSize.height;
                    textRectHeight = self._textSize.height;
                }
            }
        }
        textStyle.top = ROUND(textRectY) + "px";
        textStyle.left = ROUND(textRectX) + "px";
        textStyle.width = MAX(CEIL(textRectWidth), 0) + "px";
        textStyle.height = MAX(CEIL(textRectHeight), 0) + "px";
        textStyle.verticalAlign = "top";
        if (shadowStyle)
        {
            if (self._flags & _CPImageAndTextViewTextShadowColorChangedFlag)
                shadowStyle.color = objj_msgSend(self._textShadowColor, "cssString");
            shadowStyle.top = ROUND(textRectY + self._textShadowOffset.height) + "px";
            shadowStyle.left = ROUND(textRectX + self._textShadowOffset.width) + "px";
            shadowStyle.width = MAX(CEIL(textRectWidth), 0) + "px";
            shadowStyle.height = MAX(CEIL(textRectHeight), 0) + "px";
        }
    }
    self._flags = 0;
}
,["void"]), new objj_method(sel_getUid("sizeToFit"), function $_CPImageAndTextView__sizeToFit(self, _cmd)
{
    var size = CGSizeMakeZero();
    if (self._imagePosition !== CPNoImage && self._image)
    {
        var imageSize = objj_msgSend(self._image, "size");
        size.width += imageSize.width;
        size.height += imageSize.height;
    }
    if (self._imagePosition !== CPImageOnly && objj_msgSend(self._text, "length") > 0)
    {
        if (!self._textSize)
        {
            self._textSize = objj_msgSend(self._text, "sizeWithFont:", self._font || objj_msgSend(CPFont, "systemFontOfSize:", 0));
            self._textSize.width += 1;
            self._textSize.height += 1;
        }
        if (!self._image || self._imagePosition === CPImageOverlaps)
        {
            size.width = MAX(size.width, self._textSize.width);
            size.height = MAX(size.height, self._textSize.height);
        }
        else if (self._imagePosition === CPImageLeft || self._imagePosition === CPImageRight)
        {
            size.width += self._textSize.width + self._imageOffset;
            size.height = MAX(size.height, self._textSize.height);
        }
        else if (self._imagePosition === CPImageAbove || self._imagePosition === CPImageBelow)
        {
            size.width = MAX(size.width, self._textSize.width);
            size.height += self._textSize.height + self._imageOffset;
        }
    }
    objj_msgSend(self, "setFrameSize:", size);
}
,["void"]), new objj_method(sel_getUid("setFrameSize:"), function $_CPImageAndTextView__setFrameSize_(self, _cmd, aSize)
{
    if ((self._lineBreakMode === CPLineBreakByCharWrapping || self._lineBreakMode === CPLineBreakByWordWrapping) && aSize.width !== objj_msgSend(self, "frameSize").width)
        self._textSize = nil;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPImageAndTextView").super_class }, "setFrameSize:", aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("setSelectedRange:"), function $_CPImageAndTextView__setSelectedRange_(self, _cmd, aRange)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "setSelectedRange:inElement:", aRange, self._DOMTextElement);
}
,["void","CPRange"])]);
}p;18;_CPPopoverWindow.jt;18703;@STATIC;1.0;I;21;Foundation/CPObject.ji;10;CPButton.ji;8;CPMenu.ji;9;CPPanel.jt;18617;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPButton.j", YES);objj_executeFile("CPMenu.j", YES);objj_executeFile("CPPanel.j", YES);CPClosableOnBlurWindowMask = 1 << 4;
CPPopoverAppearanceMinimal = 0;
CPPopoverAppearanceHUD = 1;
var _CPPopoverWindow_shouldClose_ = 1 << 0,
    _CPPopoverWindow_didClose_ = 1 << 1,
    _CPPopoverWindow_didShow_ = 1 << 2;
{var the_class = objj_allocateClassPair(CPPanel, "_CPPopoverWindow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_animates"), new objj_ivar("_targetView"), new objj_ivar("_appearance"), new objj_ivar("_isClosing"), new objj_ivar("_closeOnBlur"), new objj_ivar("_browserAnimates"), new objj_ivar("_shouldPerformAnimation"), new objj_ivar("_implementedDelegateMethods"), new objj_ivar("_orderOutTransitionFunction")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("animates"), function $_CPPopoverWindow__animates(self, _cmd)
{
    return self._animates;
}
,["BOOL"]), new objj_method(sel_getUid("setAnimates:"), function $_CPPopoverWindow__setAnimates_(self, _cmd, newValue)
{
    self._animates = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("targetView"), function $_CPPopoverWindow__targetView(self, _cmd)
{
    return self._targetView;
}
,["id"]), new objj_method(sel_getUid("setTargetView:"), function $_CPPopoverWindow__setTargetView_(self, _cmd, newValue)
{
    self._targetView = newValue;
}
,["void","id"]), new objj_method(sel_getUid("appearance"), function $_CPPopoverWindow__appearance(self, _cmd)
{
    return self._appearance;
}
,["int"]), new objj_method(sel_getUid("_setAppearance:"), function $_CPPopoverWindow___setAppearance_(self, _cmd, newValue)
{
    self._appearance = newValue;
}
,["void","int"]), new objj_method(sel_getUid("isClosing"), function $_CPPopoverWindow__isClosing(self, _cmd)
{
    return self._isClosing;
}
,["BOOL"]), new objj_method(sel_getUid("setIsClosing:"), function $_CPPopoverWindow__setIsClosing_(self, _cmd, newValue)
{
    self._isClosing = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithContentRect:"), function $_CPPopoverWindow__initWithContentRect_(self, _cmd, aFrame)
{
    return objj_msgSend(self, "initWithContentRect:styleMask:", aFrame, 0);
}
,["id","CGRect"]), new objj_method(sel_getUid("initWithContentRect:styleMask:"), function $_CPPopoverWindow__initWithContentRect_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindow").super_class }, "initWithContentRect:styleMask:", aFrame, aStyleMask))
    {
        self._animates = YES;
        self._isClosing = NO;
        self._browserAnimates = objj_msgSend(self, "browserSupportsAnimation");
        self._shouldPerformAnimation = YES;
        self._orderOutTransitionFunction = function()
        {
            objj_msgSend(self, "_orderOutRecursively:", YES);
        };
        objj_msgSend(self, "setStyleMask:", aStyleMask);
        objj_msgSend(self, "setBecomesKeyOnlyIfNeeded:", YES);
        objj_msgSend(self, "setMovableByWindowBackground:", YES);
        objj_msgSend(self, "setHasShadow:", NO);
        objj_msgSend(self, "setCSS3Property:value:", "TransitionProperty", CPBrowserCSSProperty('transform') + ", opacity");
        objj_msgSend(self._windowView, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("setAppearance:"), function $_CPPopoverWindow__setAppearance_(self, _cmd, anAppearance)
{
    if (self._appearance === anAppearance)
        return;
    objj_msgSend(self._windowView, "setAppearance:", anAppearance);
}
,["void","int"]), new objj_method(sel_getUid("setStyleMask:"), function $_CPPopoverWindow__setStyleMask_(self, _cmd, aStyleMask)
{
    self._closeOnBlur = aStyleMask & CPClosableOnBlurWindowMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("setDelegate:"), function $_CPPopoverWindow__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate === aDelegate)
        return;
    self._delegate = aDelegate;
    self._implementedDelegateMethods = 0;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverWindowShouldClose:")))
        self._implementedDelegateMethods |= _CPPopoverWindow_shouldClose_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverWindowDidClose:")))
        self._implementedDelegateMethods |= _CPPopoverWindow_didClose_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverWindowDidShow:")))
        self._implementedDelegateMethods |= _CPPopoverWindow_didShow_;
}
,["void","id"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPPopoverWindow__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aPath, anObject, theChange, aContext)
{
    if (aPath === "frame")
    {
        if (!objj_msgSend(self._targetView, "window"))
            return;
        var point = objj_msgSend(self, "computeOriginFromRect:ofView:preferredEdge:", objj_msgSend(self._targetView, "bounds"), self._targetView, objj_msgSend(self._windowView, "preferredEdge"));
        objj_msgSend(self, "setFrameOrigin:", point);
    }
}
,["void","CPString","id","CPDictionary","void"]), new objj_method(sel_getUid("computeOriginFromRect:ofView:preferredEdge:"), function $_CPPopoverWindow__computeOriginFromRect_ofView_preferredEdge_(self, _cmd, aRect, positioningView, anEdge)
{
    var mainWindow = objj_msgSend(positioningView, "window"),
        platformWindow = objj_msgSend(mainWindow, "platformWindow"),
        nativeRect = objj_msgSend(platformWindow, "usableContentFrame"),
        baseOrigin = objj_msgSend(positioningView, "convertPointToBase:", aRect.origin),
        platformOrigin = objj_msgSend(mainWindow, "convertBaseToPlatformWindow:", baseOrigin),
        platformRect = CGRectMake(platformOrigin.x, platformOrigin.y, aRect.size.width, aRect.size.height),
        originLeft = CGPointCreateCopy(platformOrigin),
        originRight = CGPointCreateCopy(platformOrigin),
        originTop = CGPointCreateCopy(platformOrigin),
        originBottom = CGPointCreateCopy(platformOrigin),
        frameSize = objj_msgSend(self, "frame").size;
    originRight.x += platformRect.size.width;
    originRight.y += platformRect.size.height / 2.0 - frameSize.height / 2.0;
    originLeft.x -= frameSize.width;
    originLeft.y += platformRect.size.height / 2.0 - frameSize.height / 2.0;
    originBottom.x += platformRect.size.width / 2.0 - frameSize.width / 2.0;
    originBottom.y += platformRect.size.height;
    originTop.x += platformRect.size.width / 2.0 - frameSize.width / 2.0;
    originTop.y -= frameSize.height;
    var requestedEdge = anEdge !== nil ? anEdge : CPMaxXEdge,
        requestedOrigin;
    switch(requestedEdge) {
    case CPMaxXEdge:
        requestedOrigin = originRight;
        break;
    case CPMinXEdge:
        requestedOrigin = originLeft;
        break;
    case CPMinYEdge:
        requestedOrigin = originTop;
        break;
    case CPMaxYEdge:
        requestedOrigin = originBottom;
        break;
    }
    var origins = [requestedOrigin, originRight, originLeft, originTop, originBottom],
        edges = [requestedEdge, CPMaxXEdge, CPMinXEdge, CPMinYEdge, CPMaxYEdge];
    for (var i = 0; i < origins.length; i++)
    {
        var origin = origins[i],
            edge = edges[i];
        objj_msgSend(self._windowView, "setArrowOffsetX:", 0);
        objj_msgSend(self._windowView, "setArrowOffsetY:", 0);
        objj_msgSend(self._windowView, "setPreferredEdge:", edge);
        if (origin.x < CGRectGetMinX(nativeRect))
        {
            objj_msgSend(self._windowView, "setArrowOffsetX:", origin.x);
            origin.x = CGRectGetMinX(nativeRect);
        }
        if (origin.x + frameSize.width > CGRectGetMaxX(nativeRect))
        {
            objj_msgSend(self._windowView, "setArrowOffsetX:", origin.x + frameSize.width - CGRectGetMaxX(nativeRect));
            origin.x = CGRectGetMaxX(nativeRect) - frameSize.width;
        }
        if (origin.y < CGRectGetMinY(nativeRect))
        {
            objj_msgSend(self._windowView, "setArrowOffsetY:", origin.y - CGRectGetMinY(nativeRect));
            origin.y = CGRectGetMinY(nativeRect);
        }
        if (origin.y + frameSize.height > CGRectGetMaxY(nativeRect))
        {
            objj_msgSend(self._windowView, "setArrowOffsetY:", frameSize.height + origin.y - CGRectGetMaxY(nativeRect));
            origin.y = CGRectGetMaxY(nativeRect) - frameSize.height;
        }
        switch(edge) {
        case CPMaxXEdge:
            if (origin.x >= CGRectGetMaxX(platformRect))
                return origin;
            break;
        case CPMinXEdge:
            if (origin.x + frameSize.width <= platformRect.origin.x)
                return origin;
            break;
        case CPMaxYEdge:
            if (origin.y >= CGRectGetMaxY(platformRect))
                return origin;
            break;
        case CPMinYEdge:
            if (origin.y + frameSize.height <= platformRect.origin.y)
                return origin;
            break;
        }
    }
    objj_msgSend(self._windowView, "setPreferredEdge:", nil);
    return requestedOrigin;
}
,["CGPoint","CGRect","CPView","int"]), new objj_method(sel_getUid("positionRelativeToView:"), function $_CPPopoverWindow__positionRelativeToView_(self, _cmd, aView)
{
    objj_msgSend(self, "positionRelativeToRect:ofView:preferredEdge:", nil, aView, nil);
}
,["void","CPView"]), new objj_method(sel_getUid("positionRelativeToRect:ofView:preferredEdge:"), function $_CPPopoverWindow__positionRelativeToRect_ofView_preferredEdge_(self, _cmd, aRect, positioningView, anEdge)
{
    var wasVisible = objj_msgSend(self, "isVisible");
    if (!aRect || CGRectIsEmpty(aRect))
        aRect = objj_msgSend(positioningView, "bounds");
    var point = objj_msgSend(self, "computeOriginFromRect:ofView:preferredEdge:", aRect, positioningView, anEdge);
    objj_msgSend(self, "setFrameOrigin:", point);
    objj_msgSend(self._windowView, "showCursor");
    objj_msgSend(self._windowView, "setNeedsDisplay:", YES);
    objj_msgSend(self, "makeKeyAndOrderFront:", nil);
    if (positioningView !== self._targetView)
    {
        objj_msgSend(objj_msgSend(self._targetView, "window"), "removeChildWindow:", self);
        objj_msgSend(self._targetView, "removeObserver:forKeyPath:", self, "frame");
        self._targetView = positioningView;
    }
    var targetWindow = objj_msgSend(self._targetView, "window");
    if (!objj_msgSend(targetWindow, "isFullPlatformWindow"))
        objj_msgSend(objj_msgSend(self._targetView, "window"), "addChildWindow:ordered:", self, CPWindowAbove);
    if (!wasVisible)
        objj_msgSend(self, "_trapNextMouseDown");
}
,["void","CGRect","CPView","int"]), new objj_method(sel_getUid("setCSS3Property:value:"), function $_CPPopoverWindow__setCSS3Property_value_(self, _cmd, aProperty, value)
{
    var browserProperty = CPBrowserStyleProperty(aProperty);
    if (browserProperty)
        self._DOMElement.style[browserProperty] = value;
}
,["void","CPString","CPString"]), new objj_method(sel_getUid("browserSupportsAnimation"), function $_CPPopoverWindow__browserSupportsAnimation(self, _cmd)
{
    return CPBrowserStyleProperty('transition') && CPBrowserStyleProperty('transitionend');
}
,["BOOL"]), new objj_method(sel_getUid("close:"), function $_CPPopoverWindow__close_(self, _cmd, aSender)
{
    objj_msgSend(self, "close");
}
,["id","id"]), new objj_method(sel_getUid("close"), function $_CPPopoverWindow__close(self, _cmd)
{
    objj_msgSend(self, "orderOut:", self);
    objj_msgSend(self, "_detachFromChildrenClosing:", YES);
}
,["void"]), new objj_method(sel_getUid("orderFront:"), function $_CPPopoverWindow__orderFront_(self, _cmd, aSender)
{
    if (!objj_msgSend(self, "isKeyWindow"))
    {
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindow").super_class }, "orderFront:", aSender);
        if (self._animates && self._browserAnimates && self._shouldPerformAnimation)
        {
            var transformOrigin = "50% 100%",
                frame = objj_msgSend(self, "frame"),
                preferredEdge = objj_msgSend(self._windowView, "preferredEdge"),
                posX,
                posY;
            switch(preferredEdge) {
            case CPMaxYEdge:
            case CPMinYEdge:
                posX = 50 + objj_msgSend(self._windowView, "arrowOffsetX") * 100 / frame.size.width;
                transformOrigin = posX + "% " + (preferredEdge === CPMaxYEdge ? "0%" : "100%");
                break;
            case CPMinXEdge:
            case CPMaxXEdge:
                posY = 50 + objj_msgSend(self._windowView, "arrowOffsetY") * 100 / frame.size.height;
                transformOrigin = (preferredEdge === CPMaxXEdge ? "0% " : "100% ") + posY + "%";
                break;
            }
            objj_msgSend(self, "setCSS3Property:value:", "Transform", "scale(0)");
            objj_msgSend(self, "setCSS3Property:value:", "TransformOrigin", transformOrigin);
            objj_msgSend(self, "setCSS3Property:value:", "Transition", "opacity 0 linear");
            window.setTimeout(function()
            {
                self._DOMElement.style.opacity = 1;
                self._DOMElement.style.height = frame.size.height + "px";
                self._DOMElement.style.width = frame.size.width + "px";
                objj_msgSend(self, "setCSS3Property:value:", "Transform", "scale(1.1)");
                objj_msgSend(self, "setCSS3Property:value:", "Transition", CPBrowserCSSProperty('transform') + " 200ms ease-in");
                var orderFrontTransitionFunction = function()
                {
                    self._DOMElement.removeEventListener(CPBrowserStyleProperty('transitionend'), orderFrontTransitionFunction, YES);
                    objj_msgSend(self, "setCSS3Property:value:", "Transform", "scale(1)");
                    objj_msgSend(self, "setCSS3Property:value:", "Transition", CPBrowserCSSProperty('transform') + " 50ms linear");
                    var transitionCompleteFunction = function()
                    {
                        self._DOMElement.removeEventListener(CPBrowserStyleProperty('transitionend'), transitionCompleteFunction, YES);
                        objj_msgSend(self, "setCSS3Property:value:", "Transform", nil);
                        objj_msgSend(self, "setCSS3Property:value:", "TransformOrigin", nil);
                        objj_msgSend(self, "setCSS3Property:value:", "Transition", nil);
                        if (self._implementedDelegateMethods & _CPPopoverWindow_didShow_)
                            objj_msgSend(self._delegate, "popoverWindowDidShow:", self);
                    };
                    self._DOMElement.addEventListener(CPBrowserStyleProperty('transitionend'), transitionCompleteFunction, YES);
                };
                self._DOMElement.addEventListener(CPBrowserStyleProperty('transitionend'), orderFrontTransitionFunction, YES);
            }, 0);
        }
        else
        {
            objj_msgSend(self, "setCSS3Property:value:", "Transition", "");
            self._DOMElement.style.opacity = 1;
        }
    }
    self._shouldPerformAnimation = NO;
    self._isClosing = NO;
}
,["id","is"]), new objj_method(sel_getUid("_orderFront"), function $_CPPopoverWindow___orderFront(self, _cmd)
{
    if (!objj_msgSend(self, "isVisible"))
        objj_msgSend(self._targetView, "addObserver:forKeyPath:options:context:", self, "frame", 0, nil);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindow").super_class }, "_orderFront");
}
,["void"]), new objj_method(sel_getUid("_parentDidOrderInChild"), function $_CPPopoverWindow___parentDidOrderInChild(self, _cmd)
{
    objj_msgSend(self._targetView, "addObserver:forKeyPath:options:context:", self, "frame", 0, nil);
}
,["void"]), new objj_method(sel_getUid("orderOut:"), function $_CPPopoverWindow__orderOut_(self, _cmd, aSender)
{
    if (!objj_msgSend(self, "isVisible"))
        return;
    self._isClosing = YES;
    if (self._animates && self._browserAnimates)
    {
        objj_msgSend(self, "setCSS3Property:value:", "Transition", "opacity 250ms linear");
        self._DOMElement.style.opacity = 0;
        self._DOMElement.addEventListener(CPBrowserStyleProperty("transitionend"), self._orderOutTransitionFunction, YES);
    }
    else
    {
        objj_msgSend(self, "_orderOutRecursively:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("_orderOutRecursively:"), function $_CPPopoverWindow___orderOutRecursively_(self, _cmd, recursive)
{
    self._DOMElement.removeEventListener(CPBrowserStyleProperty("transitionend"), self._orderOutTransitionFunction, YES);
    objj_msgSend(self._targetView, "removeObserver:forKeyPath:", self, "frame");
    objj_msgSend(self._parentWindow, "removeChildWindow:", self);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindow").super_class }, "_orderOutRecursively:", recursive);
    self._shouldPerformAnimation = YES;
    self._isClosing = NO;
    if (self._implementedDelegateMethods & _CPPopoverWindow_didClose_)
        objj_msgSend(self._delegate, "popoverWindowDidClose:", self);
}
,["void","BOOL"]), new objj_method(sel_getUid("_mouseWasClicked:"), function $_CPPopoverWindow___mouseWasClicked_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isVisible"))
        return;
    var mouseWindow = objj_msgSend(anEvent, "window");
    if (mouseWindow === self || objj_msgSend(mouseWindow, "_hasAncestorWindow:", self))
        objj_msgSend(self, "_trapNextMouseDown");
    else
    {
        if (self._closeOnBlur)
            objj_msgSend(self._delegate, "_close");
        var parent = objj_msgSend(self, "parentWindow");
        if (objj_msgSend(parent, "isKindOfClass:", objj_msgSend(self, "class")))
            objj_msgSend(parent, "_mouseWasClicked:", anEvent);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("_trapNextMouseDown"), function $_CPPopoverWindow___trapNextMouseDown(self, _cmd)
{
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("_mouseWasClicked:"), CPLeftMouseDownMask, nil, CPDefaultRunLoopMode, NO);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_windowViewClassForStyleMask:"), function $_CPPopoverWindow___windowViewClassForStyleMask_(self, _cmd, aStyleMask)
{
    return _CPPopoverWindowView;
}
,["Class","unsigned"])]);
}p;14;_CPPopUpList.jt;26935;@STATIC;1.0;i;9;CPPanel.ji;13;CPTableView.ji;8;CPText.ji;24;_CPPopUpListDataSource.jt;26843;objj_executeFile("CPPanel.j", YES);objj_executeFile("CPTableView.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("_CPPopUpListDataSource.j", YES);_CPPopUpListWillPopUpNotification = "_CPPopUpListWillPopUpNotification";
_CPPopUpListWillDismissNotification = "_CPPopUpListWillDismissNotification";
_CPPopUpListDidDismissNotification = "_CPPopUpListDidDismissNotification";
_CPPopUpListItemWasClickedNotification = "_CPPopUpListItemWasClickedNotification";
var ListMinimumItems = 3;
var ListColumnIdentifier = "1";
{var the_class = objj_allocateClassPair(CPObject, "_CPPopUpList"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dataSource"), new objj_ivar("_itemWasClicked"), new objj_ivar("_listWasClicked"), new objj_ivar("_listWidth"), new objj_ivar("_panel"), new objj_ivar("_scrollView"), new objj_ivar("_tableView"), new objj_ivar("_tableColumn")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithDataSource:"), function $_CPPopUpList__initWithDataSource_(self, _cmd, aDataSource)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpList").super_class }, "init");
    if (self)
    {
        objj_msgSend(self, "setDataSource:", aDataSource);
        self._itemWasClicked = NO;
        self._listWasClicked = NO;
        self._listWidth = 0;
        self._tableView = objj_msgSend(self, "makeTableView");
        var frame = CGRectMake(0, 0, 200, 200);
        self._tableColumn = objj_msgSend(objj_msgSend(CPTableColumn, "alloc"), "initWithIdentifier:", ListColumnIdentifier);
        objj_msgSend(self._tableColumn, "setWidth:", CGRectGetWidth(frame) - objj_msgSend(CPScroller, "scrollerWidth"));
        objj_msgSend(self._tableColumn, "setResizingMask:", CPTableColumnAutoresizingMask);
        objj_msgSend(self._tableView, "addTableColumn:", self._tableColumn);
        self._scrollView = objj_msgSend(self, "makeScrollViewWithFrame:", CGRectMake(0, 0, CGRectGetWidth(frame), CGRectGetHeight(frame)));
        objj_msgSend(self._scrollView, "setDocumentView:", self._tableView);
        objj_msgSend(self._tableView, "setHeaderView:", nil);
        self._panel = objj_msgSend(self, "makeListPanelWithFrame:", frame);
        objj_msgSend(objj_msgSend(self._panel, "contentView"), "addSubview:", self._scrollView);
        objj_msgSend(self._panel, "setInitialFirstResponder:", self._tableView);
        if (objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0)
            objj_msgSend(self._tableView, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", 0), NO);
        else
            objj_msgSend(self._tableView, "setEnabled:", NO);
        objj_msgSend(self._scrollView, "scrollToBeginningOfDocument:", nil);
    }
    return self;
}
,["id","_CPPopUpListDataSource"]), new objj_method(sel_getUid("makeListPanelWithFrame:"), function $_CPPopUpList__makeListPanelWithFrame_(self, _cmd, aFrame)
{
    var panel = objj_msgSend(objj_msgSend(_CPPopUpPanel, "alloc"), "initWithContentRect:styleMask:", aFrame, CPBorderlessWindowMask);
    objj_msgSend(panel, "setTitle:", "");
    objj_msgSend(panel, "setFloatingPanel:", YES);
    objj_msgSend(panel, "setBecomesKeyOnlyIfNeeded:", YES);
    objj_msgSend(panel, "setLevel:", CPPopUpMenuWindowLevel);
    objj_msgSend(panel, "setHasShadow:", YES);
    objj_msgSend(panel, "setShadowStyle:", CPMenuWindowShadowStyle);
    objj_msgSend(panel, "setDelegate:", self);
    return panel;
}
,["CPPanel","CGRect"]), new objj_method(sel_getUid("makeTableView"), function $_CPPopUpList__makeTableView(self, _cmd)
{
    objj_msgSend(self, "removeTableViewObservers");
    var table = objj_msgSend(objj_msgSend(_CPPopUpTableView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(table, "setDelegate:", self);
    objj_msgSend(table, "setDataSource:", self);
    objj_msgSend(table, "setColumnAutoresizingStyle:", CPTableViewLastColumnOnlyAutoresizingStyle);
    objj_msgSend(table, "setUsesAlternatingRowBackgroundColors:", NO);
    objj_msgSend(table, "setAllowsMultipleSelection:", NO);
    objj_msgSend(table, "setIntercellSpacing:", CGSizeMake(3, 2));
    objj_msgSend(table, "setTarget:", self);
    objj_msgSend(table, "setDoubleAction:", sel_getUid("tableViewClickAction:"));
    objj_msgSend(table, "setAction:", sel_getUid("tableViewClickAction:"));
    objj_msgSend(table, "setRowHeight:", objj_msgSend(self, "rowHeightForTableView:", table));
    return table;
}
,["_CPPopUpTableView"]), new objj_method(sel_getUid("removeTableViewObservers"), function $_CPPopUpList__removeTableViewObservers(self, _cmd)
{
    if (self._tableView)
    {
        var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPTableViewSelectionIsChangingNotification, self._tableView);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPTableViewSelectionDidChangeNotification, self._tableView);
    }
}
,["void"]), new objj_method(sel_getUid("makeScrollViewWithFrame:"), function $_CPPopUpList__makeScrollViewWithFrame_(self, _cmd, aFrame)
{
    var scroll = objj_msgSend(objj_msgSend(CPScrollView, "alloc"), "initWithFrame:", aFrame);
    objj_msgSend(scroll, "setBorderType:", CPLineBorder);
    objj_msgSend(scroll, "setAutohidesScrollers:", NO);
    objj_msgSend(scroll, "setHasVerticalScroller:", YES);
    objj_msgSend(scroll, "setHasHorizontalScroller:", NO);
    objj_msgSend(scroll, "setLineScroll:", objj_msgSend(self._tableView, "rowHeight"));
    objj_msgSend(scroll, "setVerticalPageScroll:", 0.0);
    return scroll;
}
,["CPScrollView","CGRect"]), new objj_method(sel_getUid("popUpRelativeToRect:view:offset:"), function $_CPPopUpList__popUpRelativeToRect_view_offset_(self, _cmd, aRect, aView, offset)
{
    if (objj_msgSend(self._panel, "isVisible"))
        return;
    var rowRect = objj_msgSend(self._tableView, "rectOfRow:", objj_msgSend(self, "numberOfRowsInTableView:", self._tableView) - 1),
        frame = CGRectMake(0, 0, MAX(self._listWidth, CGRectGetWidth(aRect)), CGRectGetMaxY(rowRect));
    frame = objj_msgSend(self, "constrain:relativeToRect:view:offset:", frame, aRect, aView, offset);
    objj_msgSend(self._panel, "setFrame:", frame);
    objj_msgSend(self._scrollView, "setFrameSize:", CGSizeMakeCopy(frame.size));
    objj_msgSend(self._tableView, "setEnabled:", objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0);
    objj_msgSend(self, "scrollItemAtIndexToTop:", objj_msgSend(self._tableView, "selectedRow"));
    objj_msgSend(self, "listWillPopUp");
    objj_msgSend(self._panel, "orderFront:", nil);
}
,["void","CGRect","CPView","int"]), new objj_method(sel_getUid("listWidth"), function $_CPPopUpList__listWidth(self, _cmd)
{
    return self._listWidth;
}
,["int"]), new objj_method(sel_getUid("setListWidth:"), function $_CPPopUpList__setListWidth_(self, _cmd, width)
{
    self._listWidth = width;
}
,["void","int"]), new objj_method(sel_getUid("setFont:"), function $_CPPopUpList__setFont_(self, _cmd, aFont)
{
    var oldDataView = objj_msgSend(self._tableColumn, "dataView"),
        newDataView = objj_msgSend(CPTextField, "new");
    objj_msgSend(newDataView, "setFont:", aFont);
    objj_msgSend(newDataView, "setAlignment:", objj_msgSend(oldDataView, "alignment"));
    objj_msgSend(self._tableColumn, "setDataView:", newDataView);
    objj_msgSend(self._tableView, "reloadData");
}
,["void","CPFont"]), new objj_method(sel_getUid("setAlignment:"), function $_CPPopUpList__setAlignment_(self, _cmd, alignment)
{
    var oldDataView = objj_msgSend(self._tableColumn, "dataView"),
        newDataView = objj_msgSend(CPTextField, "new");
    objj_msgSend(newDataView, "setAlignment:", alignment);
    objj_msgSend(newDataView, "setFont:", objj_msgSend(oldDataView, "font"));
    objj_msgSend(self._tableColumn, "setDataView:", newDataView);
    objj_msgSend(self._tableView, "reloadData");
}
,["void","CPTextAlignment"]), new objj_method(sel_getUid("isVisible"), function $_CPPopUpList__isVisible(self, _cmd)
{
    return objj_msgSend(self._panel, "isVisible");
}
,["BOOL"]), new objj_method(sel_getUid("rowHeightForTableView:"), function $_CPPopUpList__rowHeightForTableView_(self, _cmd, aTableView)
{
    return objj_msgSend(aTableView, "rowHeight");
}
,["int","CPTableView"]), new objj_method(sel_getUid("tableView"), function $_CPPopUpList__tableView(self, _cmd)
{
    return self._tableView;
}
,["CPTableView"]), new objj_method(sel_getUid("tableColumn"), function $_CPPopUpList__tableColumn(self, _cmd)
{
    return self._tableColumn;
}
,["CPTableColumn"]), new objj_method(sel_getUid("scrollView"), function $_CPPopUpList__scrollView(self, _cmd)
{
    return self._scrollView;
}
,["CPScrollView"]), new objj_method(sel_getUid("panel"), function $_CPPopUpList__panel(self, _cmd)
{
    return self._panel;
}
,["CPPanel"]), new objj_method(sel_getUid("setDataSource:"), function $_CPPopUpList__setDataSource_(self, _cmd, aDataSource)
{
    if (self._dataSource === aDataSource)
        return;
    if (!objj_msgSend(_CPPopUpListDataSource, "protocolIsImplementedByObject:", aDataSource))
    {
        CPLog.warn("Illegal %s data source (%s). Must implement the methods in _CPPopUpListDataSource.", objj_msgSend(self, "className"), objj_msgSend(aDataSource, "description"));
    }
    else
        self._dataSource = aDataSource;
}
,["void","_CPPopUpListDataSource"]), new objj_method(sel_getUid("dataSource"), function $_CPPopUpList__dataSource(self, _cmd)
{
    return self._dataSource;
}
,["_CPPopUpListDataSource"]), new objj_method(sel_getUid("selectNextItem"), function $_CPPopUpList__selectNextItem(self, _cmd)
{
    if (!objj_msgSend(self._tableView, "isEnabled"))
        return NO;
    var row = objj_msgSend(self._tableView, "selectedRow");
    if (row < objj_msgSend(self._dataSource, "numberOfItemsInList:", self) - 1)
        return objj_msgSend(self, "selectRow:", ++row);
    else
        return NO;
}
,["BOOL"]), new objj_method(sel_getUid("selectPreviousItem"), function $_CPPopUpList__selectPreviousItem(self, _cmd)
{
    if (!objj_msgSend(self._tableView, "isEnabled"))
        return NO;
    var row = objj_msgSend(self._tableView, "selectedRow");
    if (row > 0)
        return objj_msgSend(self, "selectRow:", --row);
    else
        return NO;
}
,["BOOL"]), new objj_method(sel_getUid("selectedObjectValue"), function $_CPPopUpList__selectedObjectValue(self, _cmd)
{
    var row = objj_msgSend(self._tableView, "selectedRow");
    return row >= 0 ? objj_msgSend(self._dataSource, "list:objectValueForItemAtIndex:", self, row) : nil;
}
,["id"]), new objj_method(sel_getUid("selectedStringValue"), function $_CPPopUpList__selectedStringValue(self, _cmd)
{
    var value = objj_msgSend(self, "selectedObjectValue");
    return value !== nil ? objj_msgSend(self._dataSource, "list:stringValueForObjectValue:", self, value) : nil;
}
,["CPString"]), new objj_method(sel_getUid("selectedRow"), function $_CPPopUpList__selectedRow(self, _cmd)
{
    return objj_msgSend(self._tableView, "selectedRow");
}
,["int"]), new objj_method(sel_getUid("selectRow:"), function $_CPPopUpList__selectRow_(self, _cmd, row)
{
    if (row === objj_msgSend(self._tableView, "selectedRow"))
        return NO;
    var validRow = row >= 0 && row < objj_msgSend(self, "numberOfRowsInTableView:", self._tableView),
        indexes = validRow ? objj_msgSend(CPIndexSet, "indexSetWithIndex:", row) : objj_msgSend(CPIndexSet, "indexSet");
    objj_msgSend(self._tableView, "selectRowIndexes:byExtendingSelection:", indexes, NO);
    if (validRow)
    {
        objj_msgSend(self._tableView, "scrollRowToVisible:", row);
        return YES;
    }
    else
        return NO;
}
,["BOOL","int"]), new objj_method(sel_getUid("scrollPageDown"), function $_CPPopUpList__scrollPageDown(self, _cmd)
{
    objj_msgSend(self._scrollView, "scrollPageDown:", nil);
}
,["void"]), new objj_method(sel_getUid("scrollPageUp"), function $_CPPopUpList__scrollPageUp(self, _cmd)
{
    objj_msgSend(self._scrollView, "scrollPageUp:", nil);
}
,["void"]), new objj_method(sel_getUid("scrollToTop"), function $_CPPopUpList__scrollToTop(self, _cmd)
{
    objj_msgSend(self._scrollView, "scrollToBeginningOfDocument:", nil);
}
,["void"]), new objj_method(sel_getUid("scrollToBottom"), function $_CPPopUpList__scrollToBottom(self, _cmd)
{
    objj_msgSend(self._scrollView, "scrollToEndOfDocument:", nil);
}
,["void"]), new objj_method(sel_getUid("scrollItemAtIndexToTop:"), function $_CPPopUpList__scrollItemAtIndexToTop_(self, _cmd, row)
{
    var rect = objj_msgSend(self._tableView, "rectOfRow:", row);
    objj_msgSend(objj_msgSend(self._tableView, "superview"), "scrollToPoint:", rect.origin);
}
,["void","int"]), new objj_method(sel_getUid("close"), function $_CPPopUpList__close(self, _cmd)
{
    if (!objj_msgSend(self._panel, "isVisible"))
        return;
    if (objj_msgSend(self, "listWasClicked"))
    {
        objj_msgSend(self, "setListWasClicked:", NO);
        if (objj_msgSend(self, "itemWasClicked"))
        {
            objj_msgSend(self, "setItemWasClicked:", NO);
            objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.1, self, sel_getUid("closeListAfterItemClick"), nil, NO);
            return;
        }
    }
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPPopUpListWillDismissNotification, self);
    objj_msgSend(self._panel, "close");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPPopUpListDidDismissNotification, self);
}
,["void"]), new objj_method(sel_getUid("closeListAfterItemClick"), function $_CPPopUpList__closeListAfterItemClick(self, _cmd)
{
    objj_msgSend(self, "close");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPPopUpListItemWasClickedNotification, self);
}
,["void"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $_CPPopUpList__performKeyEquivalent_(self, _cmd, anEvent)
{
    var key = objj_msgSend(anEvent, "charactersIgnoringModifiers");
    switch(key) {
    case CPDownArrowFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "selectNextItem");
            return YES;
        }
        break;
    case CPUpArrowFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "selectPreviousItem");
            return YES;
        }
        break;
    case CPEscapeFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "close");
            return YES;
        }
        break;
    case CPPageUpFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "scrollPageUp");
            return YES;
        }
        break;
    case CPPageDownFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "scrollPageDown");
            return YES;
        }
        break;
    case CPHomeFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "scrollToTop");
            return YES;
        }
        break;
    case CPEndFunctionKey:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "scrollToBottom");
            return YES;
        }
        break;
    case CPCarriageReturnCharacter:
        if (objj_msgSend(self, "isVisible"))
        {
            objj_msgSend(self, "closeListAfterItemClick");
            return YES;
        }
        break;
    }
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("itemWasClicked"), function $_CPPopUpList__itemWasClicked(self, _cmd)
{
    return self._itemWasClicked && objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0;
}
,["BOOL"]), new objj_method(sel_getUid("setItemWasClicked:"), function $_CPPopUpList__setItemWasClicked_(self, _cmd, flag)
{
    self._itemWasClicked = objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0 && flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("listWasClicked"), function $_CPPopUpList__listWasClicked(self, _cmd)
{
    return self._listWasClicked && objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0;
}
,["BOOL"]), new objj_method(sel_getUid("setListWasClicked:"), function $_CPPopUpList__setListWasClicked_(self, _cmd, flag)
{
    self._listWasClicked = objj_msgSend(self._dataSource, "numberOfItemsInList:", self) > 0 && flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("controllingViewShouldResign"), function $_CPPopUpList__controllingViewShouldResign(self, _cmd)
{
    if (objj_msgSend(self, "listWasClicked"))
    {
        if (objj_msgSend(self, "listWasClicked") && !objj_msgSend(self, "itemWasClicked"))
            objj_msgSend(self, "setListWasClicked:", NO);
        return NO;
    }
    else
        return YES;
}
,["BOOL"]), new objj_method(sel_getUid("listWillPopUp"), function $_CPPopUpList__listWillPopUp(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPPopUpListWillPopUpNotification, self);
}
,["void"]), new objj_method(sel_getUid("constrain:relativeToRect:view:offset:"), function $_CPPopUpList__constrain_relativeToRect_view_offset_(self, _cmd, aFrame, aRect, aView, offset)
{
    var baseOrigin = objj_msgSend(aView, "convertPointToBase:", aRect.origin),
        windowOrigin = objj_msgSend(objj_msgSend(aView, "window"), "convertBaseToPlatformWindow:", baseOrigin),
        rowHeight = objj_msgSend(self, "rowHeightForTableView:", self._tableView) + objj_msgSend(self._tableView, "intercellSpacing").height,
        numberOfRows = MIN(objj_msgSend(self, "numberOfRowsInTableView:", self._tableView), objj_msgSend(self._dataSource, "numberOfVisibleItemsInList:", self)),
        frame = CGRectMake(windowOrigin.x, windowOrigin.y + CGRectGetHeight(aRect) + offset, MAX(self._listWidth, CGRectGetWidth(aFrame)), rowHeight * numberOfRows + 2),
        bottomFrame = CGRectMakeCopy(frame),
        bottom = CGRectGetMaxY(bottomFrame),
        viewRect = objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "visibleFrame"),
        visibleBottom = CGRectGetMaxY(viewRect),
        bottomVisibleRows = numberOfRows;
    while (bottom > visibleBottom && bottomVisibleRows >= ListMinimumItems)
    {
        bottom -= rowHeight;
        bottomFrame.size.height -= rowHeight;
        --bottomVisibleRows;
    }
    if (bottom >= visibleBottom || bottomVisibleRows < ListMinimumItems)
    {
        var topFrame = CGRectMakeCopy(frame);
        topFrame.origin.y = windowOrigin.y - offset - CGRectGetHeight(topFrame);
        var visibleTop = CGRectGetMinY(viewRect),
            topVisibleRows = numberOfRows;
        while (topFrame.origin.y <= visibleTop && topVisibleRows >= ListMinimumItems)
        {
            topFrame.origin.y += rowHeight;
            topFrame.size.height -= rowHeight;
            --topVisibleRows;
        }
        if (topFrame.origin.y > visibleTop && topVisibleRows >= ListMinimumItems || topVisibleRows > bottomVisibleRows)
            frame = topFrame;
        else
            frame = bottomFrame;
    }
    else
        frame = bottomFrame;
    return frame;
}
,["CGRect","CGRect","CGRect","CPView","int"]), new objj_method(sel_getUid("tableViewClickAction:"), function $_CPPopUpList__tableViewClickAction_(self, _cmd, sender)
{
    objj_msgSend(self, "close");
}
,["void","id"])]);
}var _CPPopUpListDataSourceKey = "_CPPopUpListDataSourceKey",
    _CPPopUpListListWidthKey = "_CPPopUpListListWidthKey",
    _CPPopUpListListPanelKey = "_CPPopUpListListPanelKey",
    _CPPopUpListScrollViewKey = "_CPPopUpListScrollViewKey",
    _CPPopUpListTableViewKey = "_CPPopUpListTableViewKey";
{
var the_class = objj_getClass("_CPPopUpList")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPPopUpList\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPPopUpList__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpList").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._listWasClicked = NO;
        self._itemWasClicked = NO;
        self._dataSource = objj_msgSend(aCoder, "decodeObjectForKey:", _CPPopUpListDataSourceKey);
        self._listWidth = objj_msgSend(aCoder, "decodeIntForKey:", _CPPopUpListListWidthKey);
        self._panel = objj_msgSend(aCoder, "decodeObjectForKey:", _CPPopUpListListPanelKey);
        self._scrollView = objj_msgSend(aCoder, "decodeObjectForKey:", _CPPopUpListScrollViewKey);
        self._tableView = objj_msgSend(aCoder, "decodeObjectForKey:", _CPPopUpListTableViewKey);
        self._tableColumn = objj_msgSend(self._tableView, "tableColumnWithIdentifier:", ListColumnIdentifier);
        objj_msgSend(self._scrollView, "setDocumentView:", self._tableView);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPPopUpList__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpList").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._dataSource, _CPPopUpListDataSourceKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._listWidth, _CPPopUpListListWidthKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._panel, _CPPopUpListListPanelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._scrollView, _CPPopUpListScrollViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._tableView, _CPPopUpListTableViewKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("_CPPopUpList")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPPopUpList\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("numberOfRowsInTableView:"), function $_CPPopUpList__numberOfRowsInTableView_(self, _cmd, aTableView)
{
    return MAX(objj_msgSend(self._dataSource, "numberOfItemsInList:", self), 1);
}
,["int","id"]), new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"), function $_CPPopUpList__tableView_objectValueForTableColumn_row_(self, _cmd, aTableView, aColumn, aRow)
{
    return objj_msgSend(self._dataSource, "list:displayValueForObjectValue:", self, objj_msgSend(self._dataSource, "list:objectValueForItemAtIndex:", self, aRow));
}
,["id","id","CPTableColumn","int"])]);
}{var the_class = objj_allocateClassPair(CPTableView, "_CPPopUpTableView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_acceptFirstResponder")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPPopUpTableView__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpTableView").super_class }, "initWithFrame:", aFrame))
    {
        self._acceptFirstResponder = NO;
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("trackMouse:"), function $_CPPopUpTableView__trackMouse_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(objj_msgSend(self, "delegate"), "setItemWasClicked:", YES);
    self._acceptFirstResponder = YES;
    objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpTableView").super_class }, "trackMouse:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $_CPPopUpTableView__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    self._acceptFirstResponder = NO;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpTableView").super_class }, "stopTracking:at:mouseIsUp:", lastPoint, aPoint, mouseIsUp);
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPPopUpTableView__acceptsFirstResponder(self, _cmd)
{
    return self._acceptFirstResponder;
}
,["BOOL"]), new objj_method(sel_getUid("listColumn"), function $_CPPopUpTableView__listColumn(self, _cmd)
{
    return self._tableColumns[0];
}
,["CPTableColumn"])]);
}{var the_class = objj_allocateClassPair(CPPanel, "_CPPopUpPanel"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithContentRect:styleMask:"), function $_CPPopUpPanel__initWithContentRect_styleMask_(self, _cmd, aContentRect, aStyleMask)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpPanel").super_class }, "initWithContentRect:styleMask:", aContentRect, aStyleMask))
        self._constrainsToUsableScreen = NO;
    objj_msgSend(self, "_trapNextMouseDown");
    return self;
}
,["id","CGRect","unsigned int"]), new objj_method(sel_getUid("sendEvent:"), function $_CPPopUpPanel__sendEvent_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type === CPLeftMouseDown || type === CPRightMouseDown)
        objj_msgSend(objj_msgSend(self, "delegate"), "setListWasClicked:", YES);
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpPanel").super_class }, "sendEvent:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("orderFront:"), function $_CPPopUpPanel__orderFront_(self, _cmd, sender)
{
    objj_msgSend(self, "_trapNextMouseDown");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpPanel").super_class }, "orderFront:", sender);
}
,["void","id"]), new objj_method(sel_getUid("_mouseWasClicked:"), function $_CPPopUpPanel___mouseWasClicked_(self, _cmd, anEvent)
{
    var mouseWindow = objj_msgSend(anEvent, "window"),
        rect = objj_msgSend(objj_msgSend(objj_msgSend(self, "delegate"), "dataSource"), "bounds"),
        point = objj_msgSend(objj_msgSend(objj_msgSend(self, "delegate"), "dataSource"), "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    if (mouseWindow != self && !CGRectContainsPoint(rect, point))
        objj_msgSend(objj_msgSend(self, "delegate"), "close");
    else
        objj_msgSend(self, "_trapNextMouseDown");
}
,["void","CPEvent"]), new objj_method(sel_getUid("_trapNextMouseDown"), function $_CPPopUpPanel___trapNextMouseDown(self, _cmd)
{
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("_mouseWasClicked:"), CPLeftMouseDownMask, nil, CPDefaultRunLoopMode, NO);
}
,["void"])]);
}p;24;_CPPopUpListDataSource.jt;2138;@STATIC;1.0;I;21;Foundation/CPObject.jI;24;Foundation/CPException.jt;2064;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPException.j", NO);{var the_class = objj_allocateClassPair(CPObject, "_CPPopUpListDataSource"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("numberOfItemsInList:"), function $_CPPopUpListDataSource__numberOfItemsInList_(self, _cmd, aList)
{
    _CPRaiseInvalidAbstractInvocation(self, _cmd);
}
,["int","_CPPopUpList"]), new objj_method(sel_getUid("numberOfVisibleItemsInList:"), function $_CPPopUpListDataSource__numberOfVisibleItemsInList_(self, _cmd, aList)
{
    _CPRaiseInvalidAbstractInvocation(self, _cmd);
}
,["int","_CPPopUpList"]), new objj_method(sel_getUid("list:objectValueForItemAtIndex:"), function $_CPPopUpListDataSource__list_objectValueForItemAtIndex_(self, _cmd, aList, index)
{
    _CPRaiseInvalidAbstractInvocation(self, _cmd);
}
,["id","_CPPopUpList","int"]), new objj_method(sel_getUid("list:displayValueForObjectValue:"), function $_CPPopUpListDataSource__list_displayValueForObjectValue_(self, _cmd, aList, aValue)
{
    return aValue || "";
}
,["id","_CPPopUpList","id"]), new objj_method(sel_getUid("list:stringValueForObjectValue:"), function $_CPPopUpListDataSource__list_stringValueForObjectValue_(self, _cmd, aList, aValue)
{
    return String(aValue);
}
,["CPString","_CPPopUpList","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("protocolIsImplementedByObject:"), function $_CPPopUpListDataSource__protocolIsImplementedByObject_(self, _cmd, anObject)
{
    return anObject && objj_msgSend(anObject, "respondsToSelector:", sel_getUid("numberOfItemsInList:")) && objj_msgSend(anObject, "respondsToSelector:", sel_getUid("numberOfVisibleItemsInList:")) && objj_msgSend(anObject, "respondsToSelector:", sel_getUid("list:objectValueForItemAtIndex:")) && objj_msgSend(anObject, "respondsToSelector:", sel_getUid("list:displayValueForObjectValue:")) && objj_msgSend(anObject, "respondsToSelector:", sel_getUid("list:stringValueForObjectValue:"));
}
,["BOOL","id"])]);
}p;29;_CPToolbarFlexibleSpaceItem.jt;1136;@STATIC;1.0;i;16;_CPToolbarItem.jt;1096;objj_executeFile("_CPToolbarItem.j", YES);{var the_class = objj_allocateClassPair(CPToolbarItem, "_CPToolbarFlexibleSpaceItem"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithItemIdentifier:"), function $_CPToolbarFlexibleSpaceItem__initWithItemIdentifier_(self, _cmd, anIgnoredIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarFlexibleSpaceItem").super_class }, "initWithItemIdentifier:", CPToolbarFlexibleSpaceItemIdentifier);
    if (self)
    {
        objj_msgSend(self, "setMinSize:", CGSizeMake(32.0, 32.0));
        objj_msgSend(self, "setMaxSize:", CGSizeMake(10000.0, 32.0));
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPToolbarFlexibleSpaceItem__initWithCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(self, "init");
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPToolbarFlexibleSpaceItem__encodeWithCoder_(self, _cmd, aCoder)
{
}
,["void","CPCoder"])]);
}p;16;_CPToolbarItem.jt;19056;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPView.jt;18959;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPImage.j", YES);objj_executeFile("CPView.j", YES);CPToolbarItemVisibilityPriorityStandard = 0;
CPToolbarItemVisibilityPriorityLow = -1000;
CPToolbarItemVisibilityPriorityHigh = 1000;
CPToolbarItemVisibilityPriorityUser = 2000;
CPToolbarSeparatorItemIdentifier = "CPToolbarSeparatorItem";
CPToolbarSpaceItemIdentifier = "CPToolbarSpaceItem";
CPToolbarFlexibleSpaceItemIdentifier = "CPToolbarFlexibleSpaceItem";
CPToolbarShowColorsItemIdentifier = "CPToolbarShowColorsItem";
CPToolbarShowFontsItemIdentifier = "CPToolbarShowFontsItem";
CPToolbarCustomizeToolbarItemIdentifier = "CPToolbarCustomizeToolbarItem";
CPToolbarPrintItemIdentifier = "CPToolbarPrintItem";
{var the_class = objj_allocateClassPair(CPObject, "CPToolbarItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_itemIdentifier"), new objj_ivar("_toolbar"), new objj_ivar("_label"), new objj_ivar("_paletteLabel"), new objj_ivar("_toolTip"), new objj_ivar("_tag"), new objj_ivar("_target"), new objj_ivar("_action"), new objj_ivar("_isEnabled"), new objj_ivar("_image"), new objj_ivar("_alternateImage"), new objj_ivar("_view"), new objj_ivar("_minSize"), new objj_ivar("_maxSize"), new objj_ivar("_visibilityPriority"), new objj_ivar("_autovalidates")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPToolbarItem__init(self, _cmd)
{
    return objj_msgSend(self, "initWithItemIdentifier:", "");
}
,["id"]), new objj_method(sel_getUid("initWithItemIdentifier:"), function $CPToolbarItem__initWithItemIdentifier_(self, _cmd, anItemIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPToolbarItem").super_class }, "init");
    if (self)
    {
        self._itemIdentifier = anItemIdentifier;
        self._tag = 0;
        self._isEnabled = YES;
        self._minSize = CGSizeMakeZero();
        self._maxSize = CGSizeMakeZero();
        self._visibilityPriority = CPToolbarItemVisibilityPriorityStandard;
        self._autovalidates = YES;
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("itemIdentifier"), function $CPToolbarItem__itemIdentifier(self, _cmd)
{
    return self._itemIdentifier;
}
,["CPString"]), new objj_method(sel_getUid("toolbar"), function $CPToolbarItem__toolbar(self, _cmd)
{
    return self._toolbar;
}
,["CPToolbar"]), new objj_method(sel_getUid("_setToolbar:"), function $CPToolbarItem___setToolbar_(self, _cmd, aToolbar)
{
    self._toolbar = aToolbar;
}
,["void","CPToolbar"]), new objj_method(sel_getUid("label"), function $CPToolbarItem__label(self, _cmd)
{
    return self._label;
}
,["CPString"]), new objj_method(sel_getUid("setLabel:"), function $CPToolbarItem__setLabel_(self, _cmd, aLabel)
{
    self._label = aLabel;
}
,["void","CPString"]), new objj_method(sel_getUid("paletteLabel"), function $CPToolbarItem__paletteLabel(self, _cmd)
{
    return self._paletteLabel;
}
,["CPString"]), new objj_method(sel_getUid("setPaletteLabel:"), function $CPToolbarItem__setPaletteLabel_(self, _cmd, aPaletteLabel)
{
    self._paletteLabel = aPaletteLabel;
}
,["void","CPString"]), new objj_method(sel_getUid("toolTip"), function $CPToolbarItem__toolTip(self, _cmd)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("toolTip")))
        return objj_msgSend(self._view, "toolTip");
    return self._toolTip;
}
,["CPString"]), new objj_method(sel_getUid("setToolTip:"), function $CPToolbarItem__setToolTip_(self, _cmd, aToolTip)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setToolTip:")))
        objj_msgSend(self._view, "setToolTip:", aToolTip);
    self._toolTip = aToolTip;
}
,["void","CPString"]), new objj_method(sel_getUid("tag"), function $CPToolbarItem__tag(self, _cmd)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("tag")))
        return objj_msgSend(self._view, "tag");
    return self._tag;
}
,["int"]), new objj_method(sel_getUid("setTag:"), function $CPToolbarItem__setTag_(self, _cmd, aTag)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setTag:")))
        objj_msgSend(self._view, "setTag:", aTag);
    self._tag = aTag;
}
,["void","int"]), new objj_method(sel_getUid("target"), function $CPToolbarItem__target(self, _cmd)
{
    if (self._view)
        return objj_msgSend(self._view, "respondsToSelector:", sel_getUid("target")) ? objj_msgSend(self._view, "target") : nil;
    return self._target;
}
,["id"]), new objj_method(sel_getUid("setTarget:"), function $CPToolbarItem__setTarget_(self, _cmd, aTarget)
{
    if (!self._view)
        self._target = aTarget;
    else if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setTarget:")))
        objj_msgSend(self._view, "setTarget:", aTarget);
}
,["void","id"]), new objj_method(sel_getUid("action"), function $CPToolbarItem__action(self, _cmd)
{
    if (self._view)
        return objj_msgSend(self._view, "respondsToSelector:", sel_getUid("action")) ? objj_msgSend(self._view, "action") : nil;
    return self._action;
}
,["SEL"]), new objj_method(sel_getUid("setAction:"), function $CPToolbarItem__setAction_(self, _cmd, anAction)
{
    if (!self._view)
        self._action = anAction;
    else if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setAction:")))
        objj_msgSend(self._view, "setAction:", anAction);
}
,["void","SEL"]), new objj_method(sel_getUid("isEnabled"), function $CPToolbarItem__isEnabled(self, _cmd)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("isEnabled")))
        return objj_msgSend(self._view, "isEnabled");
    return self._isEnabled;
}
,["BOOL"]), new objj_method(sel_getUid("setEnabled:"), function $CPToolbarItem__setEnabled_(self, _cmd, shouldBeEnabled)
{
    if (self._isEnabled === shouldBeEnabled)
        return;
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setEnabled:")))
        objj_msgSend(self._view, "setEnabled:", shouldBeEnabled);
    self._isEnabled = shouldBeEnabled;
}
,["void","BOOL"]), new objj_method(sel_getUid("image"), function $CPToolbarItem__image(self, _cmd)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("image")))
        return objj_msgSend(self._view, "image");
    return self._image;
}
,["CPImage"]), new objj_method(sel_getUid("setImage:"), function $CPToolbarItem__setImage_(self, _cmd, anImage)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setImage:")))
        objj_msgSend(self._view, "setImage:", anImage);
    self._image = anImage;
    if (!self._image)
        return;
    if (self._minSize.width === 0 && self._minSize.height === 0 && self._maxSize.width === 0 && self._maxSize.height === 0)
    {
        var imageSize = objj_msgSend(self._image, "size");
        if (imageSize.width > 0 || imageSize.height > 0)
        {
            objj_msgSend(self, "setMinSize:", imageSize);
            objj_msgSend(self, "setMaxSize:", imageSize);
        }
    }
}
,["void","CPImage"]), new objj_method(sel_getUid("setAlternateImage:"), function $CPToolbarItem__setAlternateImage_(self, _cmd, anImage)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setAlternateImage:")))
        objj_msgSend(self._view, "setAlternateImage:", anImage);
    self._alternateImage = anImage;
}
,["void","CPImage"]), new objj_method(sel_getUid("alternateImage"), function $CPToolbarItem__alternateImage(self, _cmd)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("alternateIamge")))
        return objj_msgSend(self._view, "alternateImage");
    return self._alternateImage;
}
,["CPImage"]), new objj_method(sel_getUid("view"), function $CPToolbarItem__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("setView:"), function $CPToolbarItem__setView_(self, _cmd, aView)
{
    if (self._view == aView)
        return;
    self._view = aView;
    if (self._view)
    {
        if (self._tag !== 0 && objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setTag:")))
            objj_msgSend(self._view, "setTag:", self._tag);
        self._target = nil;
        self._action = nil;
    }
}
,["void","CPView"]), new objj_method(sel_getUid("minSize"), function $CPToolbarItem__minSize(self, _cmd)
{
    return self._minSize;
}
,["CGSize"]), new objj_method(sel_getUid("setMinSize:"), function $CPToolbarItem__setMinSize_(self, _cmd, aMinSize)
{
    if (!aMinSize.height || !aMinSize.width)
        return;
    self._minSize = CGSizeMakeCopy(aMinSize);
    self._maxSize = CGSizeMake(MAX(self._minSize.width, self._maxSize.width), MAX(self._minSize.height, self._maxSize.height));
}
,["void","CGSize"]), new objj_method(sel_getUid("maxSize"), function $CPToolbarItem__maxSize(self, _cmd)
{
    return self._maxSize;
}
,["CGSize"]), new objj_method(sel_getUid("setMaxSize:"), function $CPToolbarItem__setMaxSize_(self, _cmd, aMaxSize)
{
    if (!aMaxSize.height || !aMaxSize.width)
        return;
    self._maxSize = CGSizeMakeCopy(aMaxSize);
    self._minSize = CGSizeMake(MIN(self._minSize.width, self._maxSize.width), MIN(self._minSize.height, self._maxSize.height));
}
,["void","CGSize"]), new objj_method(sel_getUid("visibilityPriority"), function $CPToolbarItem__visibilityPriority(self, _cmd)
{
    return self._visibilityPriority;
}
,["int"]), new objj_method(sel_getUid("setVisibilityPriority:"), function $CPToolbarItem__setVisibilityPriority_(self, _cmd, aVisibilityPriority)
{
    self._visibilityPriority = aVisibilityPriority;
}
,["void","int"]), new objj_method(sel_getUid("validate"), function $CPToolbarItem__validate(self, _cmd)
{
    var action = objj_msgSend(self, "action"),
        target = objj_msgSend(self, "target");
    if (self._view)
    {
        if (objj_msgSend(target, "respondsToSelector:", sel_getUid("validateToolbarItem:")))
        {
            var shouldBeEnabled = objj_msgSend(target, "validateToolbarItem:", self);
            if (self._isEnabled !== shouldBeEnabled)
                objj_msgSend(self, "setEnabled:", shouldBeEnabled);
        }
        return;
    }
    if (!action)
    {
        if (self._isEnabled)
            return objj_msgSend(self, "setEnabled:", NO);
        return;
    }
    if (target && !objj_msgSend(target, "respondsToSelector:", action))
    {
        if (self._isEnabled)
            return objj_msgSend(self, "setEnabled:", NO);
        return;
    }
    target = objj_msgSend(CPApp, "targetForAction:to:from:", action, target, self);
    if (!target)
    {
        if (self._isEnabled)
            return objj_msgSend(self, "setEnabled:", NO);
        return;
    }
    if (objj_msgSend(target, "respondsToSelector:", sel_getUid("validateToolbarItem:")))
    {
        var shouldBeEnabled = objj_msgSend(target, "validateToolbarItem:", self);
        if (self._isEnabled !== shouldBeEnabled)
            objj_msgSend(self, "setEnabled:", shouldBeEnabled);
    }
    else
    {
        if (!self._isEnabled)
            objj_msgSend(self, "setEnabled:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("autovalidates"), function $CPToolbarItem__autovalidates(self, _cmd)
{
    return self._autovalidates;
}
,["BOOL"]), new objj_method(sel_getUid("setAutovalidates:"), function $CPToolbarItem__setAutovalidates_(self, _cmd, shouldAutovalidate)
{
    self._autovalidates = !!shouldAutovalidate;
}
,["void","BOOL"])]);
}var CPToolbarItemItemIdentifierKey = "CPToolbarItemItemIdentifierKey",
    CPToolbarItemLabelKey = "CPToolbarItemLabelKey",
    CPToolbarItemPaletteLabelKey = "CPToolbarItemPaletteLabelKey",
    CPToolbarItemToolTipKey = "CPToolbarItemToolTipKey",
    CPToolbarItemTagKey = "CPToolbarItemTagKey",
    CPToolbarItemTargetKey = "CPToolbarItemTargetKey",
    CPToolbarItemActionKey = "CPToolbarItemActionKey",
    CPToolbarItemEnabledKey = "CPToolbarItemEnabledKey",
    CPToolbarItemImageKey = "CPToolbarItemImageKey",
    CPToolbarItemAlternateImageKey = "CPToolbarItemAlternateImageKey",
    CPToolbarItemViewKey = "CPToolbarItemViewKey",
    CPToolbarItemMinSizeKey = "CPToolbarItemMinSizeKey",
    CPToolbarItemMaxSizeKey = "CPToolbarItemMaxSizeKey",
    CPToolbarItemVisibilityPriorityKey = "CPToolbarItemVisibilityPriorityKey",
    CPToolbarItemAutovalidatesKey = "CPToolbarItemAutovalidatesKey";
{
var the_class = objj_getClass("CPToolbarItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPToolbarItem__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPToolbarItem").super_class }, "init");
    if (self)
    {
        self._itemIdentifier = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemItemIdentifierKey);
        self._minSize = objj_msgSend(aCoder, "decodeSizeForKey:", CPToolbarItemMinSizeKey);
        self._maxSize = objj_msgSend(aCoder, "decodeSizeForKey:", CPToolbarItemMaxSizeKey);
        objj_msgSend(self, "setLabel:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemLabelKey));
        objj_msgSend(self, "setPaletteLabel:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemPaletteLabelKey));
        objj_msgSend(self, "setToolTip:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemToolTipKey));
        objj_msgSend(self, "setTag:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemTagKey));
        objj_msgSend(self, "setTarget:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemTargetKey));
        objj_msgSend(self, "setAction:", CPSelectorFromString(objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemActionKey)));
        objj_msgSend(self, "setEnabled:", objj_msgSend(aCoder, "decodeBoolForKey:", CPToolbarItemEnabledKey));
        objj_msgSend(self, "setImage:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemImageKey));
        objj_msgSend(self, "setAlternateImage:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemAlternateImageKey));
        objj_msgSend(self, "setView:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarItemViewKey));
        objj_msgSend(self, "setVisibilityPriority:", objj_msgSend(aCoder, "decodeIntForKey:", CPToolbarItemVisibilityPriorityKey));
        objj_msgSend(self, "setAutovalidates:", objj_msgSend(aCoder, "decodeBoolForKey:", CPToolbarItemAutovalidatesKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPToolbarItem__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._itemIdentifier, CPToolbarItemItemIdentifierKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "label"), CPToolbarItemLabelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "paletteLabel"), CPToolbarItemPaletteLabelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "toolTip"), CPToolbarItemToolTipKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "tag"), CPToolbarItemTagKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "target"), CPToolbarItemTargetKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "action"), CPToolbarItemActionKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "isEnabled"), CPToolbarItemEnabledKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "image"), CPToolbarItemImageKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "alternateImage"), CPToolbarItemAlternateImageKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "view"), CPToolbarItemViewKey);
    objj_msgSend(aCoder, "encodeSize:forKey:", objj_msgSend(self, "minSize"), CPToolbarItemMinSizeKey);
    objj_msgSend(aCoder, "encodeSize:forKey:", objj_msgSend(self, "maxSize"), CPToolbarItemMaxSizeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "visibilityPriority"), CPToolbarItemVisibilityPriorityKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "autovalidates"), CPToolbarItemAutovalidatesKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPToolbarItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("copy"), function $CPToolbarItem__copy(self, _cmd)
{
    var copy = objj_msgSend(objj_msgSend(objj_msgSend(self, "class"), "alloc"), "initWithItemIdentifier:", self._itemIdentifier);
    if (self._view)
        objj_msgSend(copy, "setView:", objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self._view)));
    objj_msgSend(copy, "_setToolbar:", self._toolbar);
    objj_msgSend(copy, "setLabel:", self._label);
    objj_msgSend(copy, "setPaletteLabel:", self._paletteLabel);
    objj_msgSend(copy, "setToolTip:", objj_msgSend(self, "toolTip"));
    objj_msgSend(copy, "setTag:", objj_msgSend(self, "tag"));
    objj_msgSend(copy, "setTarget:", objj_msgSend(self, "target"));
    objj_msgSend(copy, "setAction:", objj_msgSend(self, "action"));
    objj_msgSend(copy, "setEnabled:", objj_msgSend(self, "isEnabled"));
    objj_msgSend(copy, "setImage:", objj_msgSend(self, "image"));
    objj_msgSend(copy, "setAlternateImage:", objj_msgSend(self, "alternateImage"));
    objj_msgSend(copy, "setMinSize:", self._minSize);
    objj_msgSend(copy, "setMaxSize:", self._maxSize);
    objj_msgSend(copy, "setVisibilityPriority:", objj_msgSend(self, "visibilityPriority"));
    objj_msgSend(copy, "setAutovalidates:", objj_msgSend(self, "autovalidates"));
    return copy;
}
,["id"])]);
}{
var the_class = objj_getClass("CPToolbarItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPToolbarItem\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("_standardItemWithItemIdentifier:"), function $CPToolbarItem___standardItemWithItemIdentifier_(self, _cmd, anItemIdentifier)
{
    switch(anItemIdentifier) {
    case CPToolbarSeparatorItemIdentifier:
        return objj_msgSend(_CPToolbarSeparatorItem, "new");
    case CPToolbarSpaceItemIdentifier:
        return objj_msgSend(_CPToolbarSpaceItem, "new");
    case CPToolbarFlexibleSpaceItemIdentifier:
        return objj_msgSend(_CPToolbarFlexibleSpaceItem, "new");
    case CPToolbarShowColorsItemIdentifier:
        return objj_msgSend(_CPToolbarShowColorsItem, "new");
    case CPToolbarShowFontsItemIdentifier:
        return nil;
    case CPToolbarCustomizeToolbarItemIdentifier:
        return nil;
    case CPToolbarPrintItemIdentifier:
        return nil;
    }
    return nil;
}
,["CPToolbarItem","CPString"])]);
}p;25;_CPToolbarSeparatorItem.jt;1110;@STATIC;1.0;i;16;_CPToolbarItem.jt;1070;objj_executeFile("_CPToolbarItem.j", YES);{var the_class = objj_allocateClassPair(CPToolbarItem, "_CPToolbarSeparatorItem"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithItemIdentifier:"), function $_CPToolbarSeparatorItem__initWithItemIdentifier_(self, _cmd, anIgnoredIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarSeparatorItem").super_class }, "initWithItemIdentifier:", CPToolbarSeparatorItemIdentifier);
    if (self)
    {
        objj_msgSend(self, "setMinSize:", CGSizeMake(2.0, 0.0));
        objj_msgSend(self, "setMaxSize:", CGSizeMake(2.0, 100000.0));
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPToolbarSeparatorItem__initWithCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(self, "init");
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPToolbarSeparatorItem__encodeWithCoder_(self, _cmd, aCoder)
{
}
,["void","CPCoder"])]);
}p;26;_CPToolbarShowColorsItem.jt;1650;@STATIC;1.0;i;16;_CPToolbarItem.jt;1610;objj_executeFile("_CPToolbarItem.j", YES);{var the_class = objj_allocateClassPair(CPToolbarItem, "_CPToolbarShowColorsItem"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithItemIdentifier:"), function $_CPToolbarShowColorsItem__initWithItemIdentifier_(self, _cmd, anIgnoredIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarShowColorsItem").super_class }, "initWithItemIdentifier:", CPToolbarShowColorsItemIdentifier);
    if (self)
    {
        objj_msgSend(self, "setMinSize:", CGSizeMake(32.0, 32.0));
        objj_msgSend(self, "setMaxSize:", CGSizeMake(32.0, 32.0));
        objj_msgSend(self, "setLabel:", "Colors");
        objj_msgSend(self, "setPaletteLabel:", "Show Colors");
        objj_msgSend(self, "setTarget:", CPApp);
        objj_msgSend(self, "setAction:", sel_getUid("orderFrontColorPanel:"));
        objj_msgSend(self, "setImage:", objj_msgSend(CPImage, "imageNamed:", CPImageNameColorPanel));
        objj_msgSend(self, "setAlternateImage:", objj_msgSend(CPImage, "imageNamed:", CPImageNameColorPanelHighlighted));
        objj_msgSend(self, "setToolTip:", "Show the Colors panel.");
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPToolbarShowColorsItem__initWithCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(self, "init");
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPToolbarShowColorsItem__encodeWithCoder_(self, _cmd, aCoder)
{
}
,["void","CPCoder"])]);
}p;21;_CPToolbarSpaceItem.jt;1085;@STATIC;1.0;i;16;_CPToolbarItem.jt;1045;objj_executeFile("_CPToolbarItem.j", YES);{var the_class = objj_allocateClassPair(CPToolbarItem, "_CPToolbarSpaceItem"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithItemIdentifier:"), function $_CPToolbarSpaceItem__initWithItemIdentifier_(self, _cmd, anIgnoredIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarSpaceItem").super_class }, "initWithItemIdentifier:", CPToolbarSpaceItemIdentifier);
    if (self)
    {
        objj_msgSend(self, "setMinSize:", CGSizeMake(32.0, 32.0));
        objj_msgSend(self, "setMaxSize:", CGSizeMake(32.0, 32.0));
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPToolbarSpaceItem__initWithCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(self, "init");
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPToolbarSpaceItem__encodeWithCoder_(self, _cmd, aCoder)
{
}
,["void","CPCoder"])]);
}p;12;_CPToolTip.jt;6558;@STATIC;1.0;i;13;CPTextField.ji;8;CPView.ji;10;CPWindow.jt;6494;objj_executeFile("CPTextField.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow.j", YES);_CPToolTipWindowMask = 1 << 27;
var _CPToolTipHeight = 24.0,
    _CPToolTipFontSize = 11.0,
    _CPToolTipDelay = 1.0,
    _CPToolTipCurrentToolTip,
    _CPToolTipCurrentToolTipTimer;
{var the_class = objj_allocateClassPair(CPWindow, "_CPToolTip"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_content")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithString:styleMask:"), function $_CPToolTip__initWithString_styleMask_(self, _cmd, aString, aStyleMask)
{
    var toolTipFrame = CGRectMake(0.0, 0.0, 250.0, _CPToolTipHeight),
        layout = objj_msgSend(_CPToolTip, "computeCorrectSize:text:", toolTipFrame.size, aString),
        textFrameSize = layout[1];
    toolTipFrame.size = layout[0];
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolTip").super_class }, "initWithContentRect:styleMask:", toolTipFrame, aStyleMask))
    {
        self._constrainsToUsableScreen = NO;
        textFrameSize.height += 4;
        self._content = objj_msgSend(CPTextField, "labelWithTitle:", aString);
        objj_msgSend(self._content, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", _CPToolTipFontSize));
        objj_msgSend(self._content, "setLineBreakMode:", CPLineBreakByCharWrapping);
        objj_msgSend(self._content, "setAlignment:", CPJustifiedTextAlignment);
        objj_msgSend(self._content, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self._content, "setFrameOrigin:", CGPointMake(0.0, 0.0));
        objj_msgSend(self._content, "setFrameSize:", textFrameSize);
        objj_msgSend(self._content, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
        objj_msgSend(self._content, "setTextColor:", objj_msgSend(objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "attributeWithName:forClass:", "color", _CPToolTipWindowView), "value"));
        objj_msgSend(objj_msgSend(self, "contentView"), "addSubview:", self._content);
        objj_msgSend(self, "setLevel:", CPStatusWindowLevel);
        objj_msgSend(self, "setAlphaValue:", 0.9);
        objj_msgSend(self._windowView, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPString","unsigned"]), new objj_method(sel_getUid("showToolTip"), function $_CPToolTip__showToolTip(self, _cmd)
{
    var mousePosition = objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "globalLocation"),
        nativeRect = objj_msgSend(objj_msgSend(self, "platformWindow"), "nativeContentRect");
    mousePosition.y += 20;
    if (mousePosition.x < 0)
        mousePosition.x = 5;
    if (mousePosition.x + CGRectGetWidth(objj_msgSend(self, "frame")) > nativeRect.size.width)
        mousePosition.x = nativeRect.size.width - CGRectGetWidth(objj_msgSend(self, "frame")) - 5;
    if (mousePosition.y < 0)
        mousePosition.y = 5;
    if (mousePosition.y + CGRectGetHeight(objj_msgSend(self, "frame")) > nativeRect.size.height)
        mousePosition.y = mousePosition.y - CGRectGetHeight(objj_msgSend(self, "frame")) - 40;
    objj_msgSend(self, "setFrameOrigin:", mousePosition);
    objj_msgSend(self, "orderFront:", nil);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("invalidateCurrentToolTipIfNeeded"), function $_CPToolTip__invalidateCurrentToolTipIfNeeded(self, _cmd)
{
    if (_CPToolTipCurrentToolTipTimer)
    {
        objj_msgSend(_CPToolTipCurrentToolTipTimer, "invalidate");
        _CPToolTipCurrentToolTipTimer = nil;
    }
    if (_CPToolTipCurrentToolTip)
    {
        objj_msgSend(_CPToolTipCurrentToolTip, "close");
        _CPToolTipCurrentToolTip = nil;
    }
}
,["void"]), new objj_method(sel_getUid("scheduleToolTipForView:"), function $_CPToolTip__scheduleToolTipForView_(self, _cmd, aView)
{
    if (!objj_msgSend(aView, "toolTip") || !objj_msgSend(objj_msgSend(aView, "toolTip"), "length"))
        return;
    objj_msgSend(_CPToolTip, "invalidateCurrentToolTipIfNeeded");
    var callbackFunction = function()
    {
        objj_msgSend(_CPToolTip, "invalidateCurrentToolTipIfNeeded");
        _CPToolTipCurrentToolTip = objj_msgSend(_CPToolTip, "toolTipWithString:", objj_msgSend(aView, "toolTip"));
        objj_msgSend(_CPToolTipCurrentToolTip, "setPlatformWindow:", objj_msgSend(objj_msgSend(aView, "window"), "platformWindow"));
    };
    _CPToolTipCurrentToolTipTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", _CPToolTipDelay, callbackFunction, NO);
}
,["void","CPView"]), new objj_method(sel_getUid("toolTipWithString:"), function $_CPToolTip__toolTipWithString_(self, _cmd, aString)
{
    var tooltip = objj_msgSend(objj_msgSend(_CPToolTip, "alloc"), "initWithString:styleMask:", aString, _CPToolTipWindowMask);
    objj_msgSend(tooltip, "showToolTip");
    return tooltip;
}
,["_CPToolTip","CPString"]), new objj_method(sel_getUid("computeCorrectSize:text:"), function $_CPToolTip__computeCorrectSize_text_(self, _cmd, aToolTipSize, aText)
{
    var font = objj_msgSend(CPFont, "systemFontOfSize:", _CPToolTipFontSize),
        textFrameSizeSingleLine = objj_msgSend(aText, "sizeWithFont:", font),
        textFrameSize = objj_msgSend(aText, "sizeWithFont:inWidth:", font, aToolTipSize.width);
    if (textFrameSizeSingleLine.width < aToolTipSize.width)
    {
        var textField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero()),
            inset = objj_msgSend(textField, "currentValueForThemeAttribute:", "content-inset") || CGInsetMakeZero();
        textFrameSize = textFrameSizeSingleLine;
        textFrameSize.width += inset.left + inset.right;
        aToolTipSize.width = textFrameSize.width;
    }
    if (textFrameSize.height < 100)
    {
        aToolTipSize.height = textFrameSize.height + 4;
        return [aToolTipSize, textFrameSize];
    }
    var newWidth = aToolTipSize.width + parseInt(textFrameSize.height - 100) / _CPToolTipHeight * _CPToolTipHeight;
    textFrameSize = objj_msgSend(aText, "sizeWithFont:inWidth:", font, newWidth - 4);
    aToolTipSize.width = newWidth + 2;
    aToolTipSize.height = textFrameSize.height + 4;
    return [aToolTipSize, textFrameSize];
}
,["CGSize","CGSize","CPString"]), new objj_method(sel_getUid("_windowViewClassForStyleMask:"), function $_CPToolTip___windowViewClassForStyleMask_(self, _cmd, aStyleMask)
{
    return _CPToolTipWindowView;
}
,["Class","unsigned"])]);
}p;8;AppKit.jt;5321;@STATIC;1.0;i;12;_CPToolTip.ji;9;CALayer.ji;12;CGGeometry.ji;17;CPAccordionView.ji;9;CPAlert.ji;13;CPAnimation.ji;15;CPApplication.ji;19;CPArrayController.ji;14;CPBezierPath.ji;7;CPBox.ji;11;CPBrowser.ji;10;CPButton.ji;13;CPButtonBar.ji;12;CPCheckBox.ji;7;CPCib.ji;23;CPCibBindingConnector.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;20;CPCibHelpConnector.ji;14;CPCibLoading.ji;22;CPCibOutletConnector.ji;33;CPCibRuntimeAttributesConnector.ji;12;CPClipView.ji;18;CPCollectionView.ji;22;CPCollectionViewItem.ji;9;CPColor.ji;14;CPColorPanel.ji;14;CPColorSpace.ji;13;CPColorWell.ji;12;CPComboBox.ji;17;CPCompatibility.ji;11;CPControl.ji;14;CPController.ji;10;CPCookie.ji;10;CPCursor.ji;14;CPDatePicker.ji;12;CPDocument.ji;22;CPDocumentController.ji;9;CPEvent.ji;14;CPFlashMovie.ji;13;CPFlashView.ji;8;CPFont.ji;15;CPFontManager.ji;12;CPGradient.ji;12;CPGraphics.ji;9;CPImage.ji;13;CPImageView.ji;14;CPKeyBinding.ji;18;CPLevelIndicator.ji;8;CPMenu.ji;12;CPMenuItem.ji;13;CPOpenPanel.ji;15;CPOutlineView.ji;9;CPPanel.ji;14;CPPasteboard.ji;11;CPPopover.ji;15;CPPopUpButton.ji;19;CPPredicateEditor.ji;30;CPPredicateEditorRowTemplate.ji;21;CPProgressIndicator.ji;9;CPRadio.ji;13;CPResponder.ji;14;CPRuleEditor.ji;12;CPScroller.ji;14;CPScrollView.ji;15;CPSearchField.ji;19;CPSecureTextField.ji;20;CPSegmentedControl.ji;10;CPShadow.ji;10;CPSlider.ji;9;CPSound.ji;13;CPSplitView.ji;11;CPStepper.ji;15;CPTableColumn.ji;13;CPTableView.ji;11;CPTabView.ji;8;CPText.ji;13;CPTextField.ji;14;CPTokenField.ji;11;CPToolbar.ji;15;CPToolbarItem.ji;12;CPTreeNode.ji;26;CPUserDefaultsController.ji;8;CPView.ji;17;CPViewAnimation.ji;18;CPViewController.ji;11;CPWebView.ji;10;CPWindow.ji;20;CPWindowController.ji;13;CPWorkspace.jt;3603;objj_executeFile("_CPToolTip.j", YES);objj_executeFile("CALayer.j", YES);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPAccordionView.j", YES);objj_executeFile("CPAlert.j", YES);objj_executeFile("CPAnimation.j", YES);objj_executeFile("CPApplication.j", YES);objj_executeFile("CPArrayController.j", YES);objj_executeFile("CPBezierPath.j", YES);objj_executeFile("CPBox.j", YES);objj_executeFile("CPBrowser.j", YES);objj_executeFile("CPButton.j", YES);objj_executeFile("CPButtonBar.j", YES);objj_executeFile("CPCheckBox.j", YES);objj_executeFile("CPCib.j", YES);objj_executeFile("CPCibBindingConnector.j", YES);objj_executeFile("CPCibConnector.j", YES);objj_executeFile("CPCibControlConnector.j", YES);objj_executeFile("CPCibHelpConnector.j", YES);objj_executeFile("CPCibLoading.j", YES);objj_executeFile("CPCibOutletConnector.j", YES);objj_executeFile("CPCibRuntimeAttributesConnector.j", YES);objj_executeFile("CPClipView.j", YES);objj_executeFile("CPCollectionView.j", YES);objj_executeFile("CPCollectionViewItem.j", YES);objj_executeFile("CPColor.j", YES);objj_executeFile("CPColorPanel.j", YES);objj_executeFile("CPColorSpace.j", YES);objj_executeFile("CPColorWell.j", YES);objj_executeFile("CPComboBox.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPControl.j", YES);objj_executeFile("CPController.j", YES);objj_executeFile("CPCookie.j", YES);objj_executeFile("CPCursor.j", YES);objj_executeFile("CPDatePicker.j", YES);objj_executeFile("CPDocument.j", YES);objj_executeFile("CPDocumentController.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPFlashMovie.j", YES);objj_executeFile("CPFlashView.j", YES);objj_executeFile("CPFont.j", YES);objj_executeFile("CPFontManager.j", YES);objj_executeFile("CPGradient.j", YES);objj_executeFile("CPGraphics.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPKeyBinding.j", YES);objj_executeFile("CPLevelIndicator.j", YES);objj_executeFile("CPMenu.j", YES);objj_executeFile("CPMenuItem.j", YES);objj_executeFile("CPOpenPanel.j", YES);objj_executeFile("CPOutlineView.j", YES);objj_executeFile("CPPanel.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPPopover.j", YES);objj_executeFile("CPPopUpButton.j", YES);objj_executeFile("CPPredicateEditor.j", YES);objj_executeFile("CPPredicateEditorRowTemplate.j", YES);objj_executeFile("CPProgressIndicator.j", YES);objj_executeFile("CPRadio.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPRuleEditor.j", YES);objj_executeFile("CPScroller.j", YES);objj_executeFile("CPScrollView.j", YES);objj_executeFile("CPSearchField.j", YES);objj_executeFile("CPSecureTextField.j", YES);objj_executeFile("CPSegmentedControl.j", YES);objj_executeFile("CPShadow.j", YES);objj_executeFile("CPSlider.j", YES);objj_executeFile("CPSound.j", YES);objj_executeFile("CPSplitView.j", YES);objj_executeFile("CPStepper.j", YES);objj_executeFile("CPTableColumn.j", YES);objj_executeFile("CPTableView.j", YES);objj_executeFile("CPTabView.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPTokenField.j", YES);objj_executeFile("CPToolbar.j", YES);objj_executeFile("CPToolbarItem.j", YES);objj_executeFile("CPTreeNode.j", YES);objj_executeFile("CPUserDefaultsController.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPViewAnimation.j", YES);objj_executeFile("CPViewController.j", YES);objj_executeFile("CPWebView.j", YES);objj_executeFile("CPWindow.j", YES);objj_executeFile("CPWindowController.j", YES);objj_executeFile("CPWorkspace.j", YES);p;17;CPAccordionView.jt;15077;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;32;Foundation/CPKeyValueObserving.jI;23;Foundation/CPIndexSet.jI;21;Foundation/CPString.ji;8;CPView.ji;10;CPButton.jt;14888;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPKeyValueObserving.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPView.j", YES);objj_executeFile("CPButton.j", YES);{var the_class = objj_allocateClassPair(CPObject, "CPAccordionViewItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_identifier"), new objj_ivar("_view"), new objj_ivar("_label")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("identifier"), function $CPAccordionViewItem__identifier(self, _cmd)
{
    return self._identifier;
}
,["CPString"]), new objj_method(sel_getUid("setIdentifier:"), function $CPAccordionViewItem__setIdentifier_(self, _cmd, newValue)
{
    self._identifier = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("view"), function $CPAccordionViewItem__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("setView:"), function $CPAccordionViewItem__setView_(self, _cmd, newValue)
{
    self._view = newValue;
}
,["void","CPView"]), new objj_method(sel_getUid("label"), function $CPAccordionViewItem__label(self, _cmd)
{
    return self._label;
}
,["CPString"]), new objj_method(sel_getUid("setLabel:"), function $CPAccordionViewItem__setLabel_(self, _cmd, newValue)
{
    self._label = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("init"), function $CPAccordionViewItem__init(self, _cmd)
{
    return objj_msgSend(self, "initWithIdentifier:", "");
}
,["id"]), new objj_method(sel_getUid("initWithIdentifier:"), function $CPAccordionViewItem__initWithIdentifier_(self, _cmd, anIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPAccordionViewItem").super_class }, "init");
    if (self)
        objj_msgSend(self, "setIdentifier:", anIdentifier);
    return self;
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(CPView, "CPAccordionView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dirtyItemIndex"), new objj_ivar("_itemHeaderPrototype"), new objj_ivar("_items"), new objj_ivar("_itemViews"), new objj_ivar("_expandedItemIndexes")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPAccordionView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPAccordionView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._items = [];
        self._itemViews = [];
        self._expandedItemIndexes = objj_msgSend(CPIndexSet, "indexSet");
        objj_msgSend(self, "setItemHeaderPrototype:", objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 100.0, 24.0)));
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setItemHeaderPrototype:"), function $CPAccordionView__setItemHeaderPrototype_(self, _cmd, aView)
{
    self._itemHeaderPrototype = aView;
}
,["void","CPView"]), new objj_method(sel_getUid("itemHeaderPrototype"), function $CPAccordionView__itemHeaderPrototype(self, _cmd)
{
    return self._itemHeaderPrototype;
}
,["CPView"]), new objj_method(sel_getUid("items"), function $CPAccordionView__items(self, _cmd)
{
    return self._items;
}
,["CPArray"]), new objj_method(sel_getUid("addItem:"), function $CPAccordionView__addItem_(self, _cmd, anItem)
{
    objj_msgSend(self, "insertItem:atIndex:", anItem, self._items.length);
}
,["void","CPAccordionViewItem"]), new objj_method(sel_getUid("insertItem:atIndex:"), function $CPAccordionView__insertItem_atIndex_(self, _cmd, anItem, anIndex)
{
    objj_msgSend(self._expandedItemIndexes, "addIndex:", anIndex);
    var itemView = objj_msgSend(objj_msgSend(_CPAccordionItemView, "alloc"), "initWithAccordionView:", self);
    objj_msgSend(itemView, "setIndex:", anIndex);
    objj_msgSend(itemView, "setLabel:", objj_msgSend(anItem, "label"));
    objj_msgSend(itemView, "setContentView:", objj_msgSend(anItem, "view"));
    objj_msgSend(self, "addSubview:", itemView);
    objj_msgSend(self._items, "insertObject:atIndex:", anItem, anIndex);
    objj_msgSend(self._itemViews, "insertObject:atIndex:", itemView, anIndex);
    objj_msgSend(self, "_invalidateItemsStartingAtIndex:", anIndex);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPAccordionViewItem","CPInteger"]), new objj_method(sel_getUid("removeItem:"), function $CPAccordionView__removeItem_(self, _cmd, anItem)
{
    objj_msgSend(self, "removeItemAtIndex:", objj_msgSend(self._items, "indexOfObjectIdenticalTo:", anItem));
}
,["void","CPAccordionViewItem"]), new objj_method(sel_getUid("removeItemAtIndex:"), function $CPAccordionView__removeItemAtIndex_(self, _cmd, anIndex)
{
    objj_msgSend(self._expandedItemIndexes, "removeIndex:", anIndex);
    objj_msgSend(self._itemViews[anIndex], "removeFromSuperview");
    objj_msgSend(self._items, "removeObjectAtIndex:", anIndex);
    objj_msgSend(self._itemViews, "removeObjectAtIndex:", anIndex);
    objj_msgSend(self, "_invalidateItemsStartingAtIndex:", anIndex);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPInteger"]), new objj_method(sel_getUid("removeAllItems"), function $CPAccordionView__removeAllItems(self, _cmd)
{
    var count = self._items.length;
    while (count--)
        objj_msgSend(self, "removeItemAtIndex:", count);
}
,["void"]), new objj_method(sel_getUid("expandItemAtIndex:"), function $CPAccordionView__expandItemAtIndex_(self, _cmd, anIndex)
{
    if (!objj_msgSend(self._itemViews[anIndex], "isCollapsed"))
        return;
    objj_msgSend(self._expandedItemIndexes, "addIndex:", anIndex);
    objj_msgSend(self._itemViews[anIndex], "setCollapsed:", NO);
    objj_msgSend(self, "_invalidateItemsStartingAtIndex:", anIndex);
}
,["void","CPInteger"]), new objj_method(sel_getUid("collapseItemAtIndex:"), function $CPAccordionView__collapseItemAtIndex_(self, _cmd, anIndex)
{
    if (objj_msgSend(self._itemViews[anIndex], "isCollapsed"))
        return;
    objj_msgSend(self._expandedItemIndexes, "removeIndex:", anIndex);
    objj_msgSend(self._itemViews[anIndex], "setCollapsed:", YES);
    objj_msgSend(self, "_invalidateItemsStartingAtIndex:", anIndex);
}
,["void","CPInteger"]), new objj_method(sel_getUid("toggleItemAtIndex:"), function $CPAccordionView__toggleItemAtIndex_(self, _cmd, anIndex)
{
    var itemView = self._itemViews[anIndex];
    if (objj_msgSend(itemView, "isCollapsed"))
        objj_msgSend(self, "expandItemAtIndex:", anIndex);
    else
        objj_msgSend(self, "collapseItemAtIndex:", anIndex);
}
,["void","CPInteger"]), new objj_method(sel_getUid("expandedItemIndexes"), function $CPAccordionView__expandedItemIndexes(self, _cmd)
{
    return self._expandedItemIndexes;
}
,["CPIndexSet"]), new objj_method(sel_getUid("collapsedItemIndexes"), function $CPAccordionView__collapsedItemIndexes(self, _cmd)
{
    var indexSet = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, self._items.length));
    objj_msgSend(indexSet, "removeIndexes:", self._expandedItemIndexes);
    return indexSet;
}
,["CPIndexSet"]), new objj_method(sel_getUid("setEnabled:forItemAtIndex:"), function $CPAccordionView__setEnabled_forItemAtIndex_(self, _cmd, isEnabled, anIndex)
{
    var itemView = self._itemViews[anIndex];
    if (!itemView)
        return;
    if (!isEnabled)
        objj_msgSend(self, "collapseItemAtIndex:", anIndex);
    else
        objj_msgSend(self, "expandItemAtIndex:", anIndex);
    objj_msgSend(itemView, "setEnabled:", isEnabled);
}
,["void","BOOL","CPInteger"]), new objj_method(sel_getUid("_invalidateItemsStartingAtIndex:"), function $CPAccordionView___invalidateItemsStartingAtIndex_(self, _cmd, anIndex)
{
    if (self._dirtyItemIndex === CPNotFound)
        self._dirtyItemIndex = anIndex;
    self._dirtyItemIndex = MIN(self._dirtyItemIndex, anIndex);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPInteger"]), new objj_method(sel_getUid("setFrameSize:"), function $CPAccordionView__setFrameSize_(self, _cmd, aSize)
{
    var width = CGRectGetWidth(objj_msgSend(self, "frame"));
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPAccordionView").super_class }, "setFrameSize:", aSize);
    if (width !== CGRectGetWidth(objj_msgSend(self, "frame")))
        objj_msgSend(self, "_invalidateItemsStartingAtIndex:", 0);
}
,["void","CGSize"]), new objj_method(sel_getUid("layoutSubviews"), function $CPAccordionView__layoutSubviews(self, _cmd)
{
    if (self._items.length <= 0)
        return objj_msgSend(self, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), 0.0));
    if (self._dirtyItemIndex === CPNotFound)
        return;
    self._dirtyItemIndex = MIN(self._dirtyItemIndex, self._items.length - 1);
    var index = self._dirtyItemIndex,
        count = self._itemViews.length,
        width = CGRectGetWidth(objj_msgSend(self, "bounds")),
        y = index > 0 ? CGRectGetMaxY(objj_msgSend(self._itemViews[index - 1], "frame")) : 0.0;
    self._dirtyItemIndex = CPNotFound;
    for (; index < count; ++index)
    {
        var itemView = self._itemViews[index];
        objj_msgSend(itemView, "setFrameY:width:", y, width);
        y = CGRectGetMaxY(objj_msgSend(itemView, "frame"));
    }
    objj_msgSend(self, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), y));
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPAccordionItemView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_accordionView"), new objj_ivar("_isCollapsed"), new objj_ivar("_index"), new objj_ivar("_headerView"), new objj_ivar("_contentView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isCollapsed"), function $_CPAccordionItemView__isCollapsed(self, _cmd)
{
    return self._isCollapsed;
}
,["BOOL"]), new objj_method(sel_getUid("setCollapsed:"), function $_CPAccordionItemView__setCollapsed_(self, _cmd, newValue)
{
    self._isCollapsed = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("index"), function $_CPAccordionItemView__index(self, _cmd)
{
    return self._index;
}
,["CPInteger"]), new objj_method(sel_getUid("setIndex:"), function $_CPAccordionItemView__setIndex_(self, _cmd, newValue)
{
    self._index = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("initWithAccordionView:"), function $_CPAccordionItemView__initWithAccordionView_(self, _cmd, anAccordionView)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPAccordionItemView").super_class }, "initWithFrame:", CGRectMakeZero());
    if (self)
    {
        self._accordionView = anAccordionView;
        self._isCollapsed = NO;
        var bounds = objj_msgSend(self, "bounds");
        self._headerView = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", objj_msgSend(self._accordionView, "itemHeaderPrototype")));
        if (objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setTarget:")) && objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setAction:")))
        {
            objj_msgSend(self._headerView, "setTarget:", self);
            objj_msgSend(self._headerView, "setAction:", sel_getUid("toggle:"));
        }
        objj_msgSend(self, "addSubview:", self._headerView);
    }
    return self;
}
,["id","CPAccordionView"]), new objj_method(sel_getUid("toggle:"), function $_CPAccordionItemView__toggle_(self, _cmd, aSender)
{
    objj_msgSend(self._accordionView, "toggleItemAtIndex:", objj_msgSend(self, "index"));
}
,["void","id"]), new objj_method(sel_getUid("setLabel:"), function $_CPAccordionItemView__setLabel_(self, _cmd, aLabel)
{
    if (objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setTitle:")))
        objj_msgSend(self._headerView, "setTitle:", aLabel);
    else if (objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setLabel:")))
        objj_msgSend(self._headerView, "setLabel:", aLabel);
    else if (objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setStringValue:")))
        objj_msgSend(self._headerView, "setStringValue:", aLabel);
}
,["void","CPString"]), new objj_method(sel_getUid("setEnabled:"), function $_CPAccordionItemView__setEnabled_(self, _cmd, isEnabled)
{
    if (objj_msgSend(self._headerView, "respondsToSelector:", sel_getUid("setEnabled:")))
        objj_msgSend(self._headerView, "setEnabled:", isEnabled);
}
,["void","BOOL"]), new objj_method(sel_getUid("setContentView:"), function $_CPAccordionItemView__setContentView_(self, _cmd, aView)
{
    if (self._contentView === aView)
        return;
    objj_msgSend(self._contentView, "removeObserver:forKeyPath:", self, "frame");
    objj_msgSend(self._contentView, "removeFromSuperview");
    self._contentView = aView;
    objj_msgSend(self._contentView, "addObserver:forKeyPath:options:context:", self, "frame", CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, NULL);
    objj_msgSend(self, "addSubview:", self._contentView);
    objj_msgSend(self._accordionView, "_invalidateItemsStartingAtIndex:", objj_msgSend(self, "index"));
}
,["void","CPView"]), new objj_method(sel_getUid("setFrameY:width:"), function $_CPAccordionItemView__setFrameY_width_(self, _cmd, aY, aWidth)
{
    var headerHeight = CGRectGetHeight(objj_msgSend(self._headerView, "frame"));
    objj_msgSend(self._headerView, "setFrameSize:", CGSizeMake(aWidth, headerHeight));
    objj_msgSend(self._contentView, "setFrameOrigin:", CGPointMake(0.0, headerHeight));
    if (objj_msgSend(self, "isCollapsed"))
        objj_msgSend(self, "setFrame:", CGRectMake(0.0, aY, aWidth, headerHeight));
    else
    {
        var contentHeight = CGRectGetHeight(objj_msgSend(self._contentView, "frame"));
        objj_msgSend(self._contentView, "setFrameSize:", CGSizeMake(aWidth, contentHeight));
        objj_msgSend(self, "setFrame:", CGRectMake(0.0, aY, aWidth, contentHeight + headerHeight));
    }
}
,["void","float","float"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $_CPAccordionItemView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
}
,["void","CGSize"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPAccordionItemView__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, aChange, aContext)
{
    if (aKeyPath === "frame" && !CGRectEqualToRect(objj_msgSend(aChange, "objectForKey:", CPKeyValueChangeOldKey), objj_msgSend(aChange, "objectForKey:", CPKeyValueChangeNewKey)))
        objj_msgSend(self._accordionView, "_invalidateItemsStartingAtIndex:", objj_msgSend(self, "index"));
}
,["void","CPString","id","CPDictionary","id"])]);
}p;9;CPAlert.jt;30340;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;10;CPButton.ji;9;CPColor.ji;8;CPFont.ji;9;CPImage.ji;13;CPImageView.ji;9;CPPanel.ji;8;CPText.ji;13;CPTextField.jt;30154;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPButton.j", YES);objj_executeFile("CPColor.j", YES);objj_executeFile("CPFont.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPPanel.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPTextField.j", YES);CPWarningAlertStyle = 0;
CPInformationalAlertStyle = 1;
CPCriticalAlertStyle = 2;
var bottomHeight = 71;
{var the_class = objj_allocateClassPair(CPObject, "CPAlert"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_showHelp"), new objj_ivar("_showSuppressionButton"), new objj_ivar("_alertStyle"), new objj_ivar("_title"), new objj_ivar("_accessoryView"), new objj_ivar("_icon"), new objj_ivar("_buttons"), new objj_ivar("_suppressionButton"), new objj_ivar("_delegate"), new objj_ivar("_modalDelegate"), new objj_ivar("_didEndSelector"), new objj_ivar("_didEndBlock"), new objj_ivar("_themeView"), new objj_ivar("_window"), new objj_ivar("_defaultWindowStyle"), new objj_ivar("_alertImageView"), new objj_ivar("_informativeLabel"), new objj_ivar("_messageLabel"), new objj_ivar("_alertHelpButton"), new objj_ivar("_needsLayout")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("showsHelp"), function $CPAlert__showsHelp(self, _cmd)
{
    return self._showHelp;
}
,["BOOL"]), new objj_method(sel_getUid("setShowsHelp:"), function $CPAlert__setShowsHelp_(self, _cmd, newValue)
{
    self._showHelp = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("showsSuppressionButton"), function $CPAlert__showsSuppressionButton(self, _cmd)
{
    return self._showSuppressionButton;
}
,["BOOL"]), new objj_method(sel_getUid("setShowsSuppressionButton:"), function $CPAlert__setShowsSuppressionButton_(self, _cmd, newValue)
{
    self._showSuppressionButton = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("alertStyle"), function $CPAlert__alertStyle(self, _cmd)
{
    return self._alertStyle;
}
,["CPAlertStyle"]), new objj_method(sel_getUid("setAlertStyle:"), function $CPAlert__setAlertStyle_(self, _cmd, newValue)
{
    self._alertStyle = newValue;
}
,["void","CPAlertStyle"]), new objj_method(sel_getUid("title"), function $CPAlert__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setTitle:"), function $CPAlert__setTitle_(self, _cmd, newValue)
{
    self._title = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("accessoryView"), function $CPAlert__accessoryView(self, _cmd)
{
    return self._accessoryView;
}
,["CPView"]), new objj_method(sel_getUid("setAccessoryView:"), function $CPAlert__setAccessoryView_(self, _cmd, newValue)
{
    self._accessoryView = newValue;
}
,["void","CPView"]), new objj_method(sel_getUid("icon"), function $CPAlert__icon(self, _cmd)
{
    return self._icon;
}
,["CPImage"]), new objj_method(sel_getUid("setIcon:"), function $CPAlert__setIcon_(self, _cmd, newValue)
{
    self._icon = newValue;
}
,["void","CPImage"]), new objj_method(sel_getUid("buttons"), function $CPAlert__buttons(self, _cmd)
{
    return self._buttons;
}
,["CPArray"]), new objj_method(sel_getUid("suppressionButton"), function $CPAlert__suppressionButton(self, _cmd)
{
    return self._suppressionButton;
}
,["CPCheckBox"]), new objj_method(sel_getUid("delegate"), function $CPAlert__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPAlert__setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("didEndSelector"), function $CPAlert__didEndSelector(self, _cmd)
{
    return self._didEndSelector;
}
,["SEL"]), new objj_method(sel_getUid("setDidEndSelector:"), function $CPAlert__setDidEndSelector_(self, _cmd, newValue)
{
    self._didEndSelector = newValue;
}
,["void","SEL"]), new objj_method(sel_getUid("themeView"), function $CPAlert__themeView(self, _cmd)
{
    return self._themeView;
}
,["_CPAlertThemeView"]), new objj_method(sel_getUid("window"), function $CPAlert__window(self, _cmd)
{
    return self._window;
}
,["CPWindow"]), new objj_method(sel_getUid("init"), function $CPAlert__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPAlert").super_class }, "init");
    if (self)
    {
        self._buttons = [];
        self._alertStyle = CPWarningAlertStyle;
        self._showHelp = NO;
        self._needsLayout = YES;
        self._defaultWindowStyle = _CPModalWindowMask;
        self._themeView = objj_msgSend(_CPAlertThemeView, "new");
        self._messageLabel = objj_msgSend(CPTextField, "labelWithTitle:", "Alert");
        self._alertImageView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "init");
        self._informativeLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "init");
        self._suppressionButton = objj_msgSend(CPCheckBox, "checkBoxWithTitle:", "Do not show this message again");
        self._alertHelpButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 16.0, 16.0));
        objj_msgSend(self._alertHelpButton, "setTarget:", self);
        objj_msgSend(self._alertHelpButton, "setAction:", sel_getUid("_showHelp:"));
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("theme"), function $CPAlert__theme(self, _cmd)
{
    return objj_msgSend(self._themeView, "theme");
}
,["CPTheme"]), new objj_method(sel_getUid("setTheme:"), function $CPAlert__setTheme_(self, _cmd, aTheme)
{
    if (aTheme === objj_msgSend(self, "theme"))
        return;
    if (aTheme === objj_msgSend(CPTheme, "defaultHudTheme"))
        self._defaultWindowStyle = CPTitledWindowMask | CPHUDBackgroundWindowMask;
    else
        self._defaultWindowStyle = CPTitledWindowMask;
    self._window = nil;
    self._needsLayout = YES;
    objj_msgSend(self._themeView, "setTheme:", aTheme);
}
,["void","CPTheme"]), new objj_method(sel_getUid("setValue:forThemeAttribute:"), function $CPAlert__setValue_forThemeAttribute_(self, _cmd, aValue, aName)
{
    objj_msgSend(self._themeView, "setValue:forThemeAttribute:", aValue, aName);
}
,["void","id","CPString"]), new objj_method(sel_getUid("setValue:forThemeAttribute:inState:"), function $CPAlert__setValue_forThemeAttribute_inState_(self, _cmd, aValue, aName, aState)
{
    objj_msgSend(self._themeView, "setValue:forThemeAttribute:inState:", aValue, aName, aState);
}
,["void","id","CPString","CPThemeState"]), new objj_method(sel_getUid("setWindowStyle:"), function $CPAlert__setWindowStyle_(self, _cmd, style)
{
    CPLog.warn("DEPRECATED: setWindowStyle: is deprecated. use setTheme: instead");
    objj_msgSend(self, "setTheme:", style === CPHUDBackgroundWindowMask ? objj_msgSend(CPTheme, "defaultHudTheme") : objj_msgSend(CPTheme, "defaultTheme"));
}
,["void","int"]), new objj_method(sel_getUid("windowStyle"), function $CPAlert__windowStyle(self, _cmd)
{
    CPLog.warn("DEPRECATED: windowStyle: is deprecated. use theme instead");
    return self._defaultWindowStyle;
}
,["int"]), new objj_method(sel_getUid("setMessageText:"), function $CPAlert__setMessageText_(self, _cmd, text)
{
    objj_msgSend(self._messageLabel, "setStringValue:", text);
    self._needsLayout = YES;
}
,["void","CPString"]), new objj_method(sel_getUid("messageText"), function $CPAlert__messageText(self, _cmd)
{
    return objj_msgSend(self._messageLabel, "stringValue");
}
,["CPString"]), new objj_method(sel_getUid("setInformativeText:"), function $CPAlert__setInformativeText_(self, _cmd, text)
{
    objj_msgSend(self._informativeLabel, "setStringValue:", text);
    self._needsLayout = YES;
}
,["void","CPString"]), new objj_method(sel_getUid("informativeText"), function $CPAlert__informativeText(self, _cmd)
{
    return objj_msgSend(self._informativeLabel, "stringValue");
}
,["CPString"]), new objj_method(sel_getUid("setTitle:"), function $CPAlert__setTitle_(self, _cmd, aTitle)
{
    self._title = aTitle;
    objj_msgSend(self._window, "setTitle:", aTitle);
}
,["void","CPString"]), new objj_method(sel_getUid("setAccessoryView:"), function $CPAlert__setAccessoryView_(self, _cmd, aView)
{
    self._accessoryView = aView;
    self._needsLayout = YES;
}
,["void","CPView"]), new objj_method(sel_getUid("setShowsSuppressionButton:"), function $CPAlert__setShowsSuppressionButton_(self, _cmd, shouldShowSuppressionButton)
{
    self._showSuppressionButton = shouldShowSuppressionButton;
    self._needsLayout = YES;
}
,["void","BOOL"]), new objj_method(sel_getUid("addButtonWithTitle:"), function $CPAlert__addButtonWithTitle_(self, _cmd, aTitle)
{
    var bounds = objj_msgSend(objj_msgSend(self._window, "contentView"), "bounds"),
        count = objj_msgSend(self._buttons, "count"),
        button = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(button, "setTitle:", aTitle);
    objj_msgSend(button, "setTag:", count);
    objj_msgSend(button, "setTarget:", self);
    objj_msgSend(button, "setAction:", sel_getUid("_takeReturnCodeFrom:"));
    objj_msgSend(objj_msgSend(self._window, "contentView"), "addSubview:", button);
    if (count == 0)
        objj_msgSend(button, "setKeyEquivalent:", CPCarriageReturnCharacter);
    else if (objj_msgSend(aTitle, "lowercaseString") === "cancel")
        objj_msgSend(button, "setKeyEquivalent:", CPEscapeFunctionKey);
    objj_msgSend(self._buttons, "insertObject:atIndex:", button, 0);
}
,["void","CPString"]), new objj_method(sel_getUid("_layoutMessageView"), function $CPAlert___layoutMessageView(self, _cmd)
{
    var inset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "content-inset"),
        sizeWithFontCorrection = 6.0,
        messageLabelWidth,
        messageLabelTextSize;
    objj_msgSend(self._messageLabel, "setTextColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "message-text-color"));
    objj_msgSend(self._messageLabel, "setFont:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "message-text-font"));
    objj_msgSend(self._messageLabel, "setTextShadowColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "message-text-shadow-color"));
    objj_msgSend(self._messageLabel, "setTextShadowOffset:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "message-text-shadow-offset"));
    objj_msgSend(self._messageLabel, "setAlignment:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "message-text-alignment"));
    objj_msgSend(self._messageLabel, "setLineBreakMode:", CPLineBreakByWordWrapping);
    messageLabelWidth = CGRectGetWidth(objj_msgSend(objj_msgSend(self._window, "contentView"), "frame")) - inset.left - inset.right;
    messageLabelTextSize = objj_msgSend(objj_msgSend(self._messageLabel, "stringValue"), "sizeWithFont:inWidth:", objj_msgSend(self._messageLabel, "font"), messageLabelWidth);
    objj_msgSend(self._messageLabel, "setFrame:", CGRectMake(inset.left, inset.top, messageLabelTextSize.width, messageLabelTextSize.height + sizeWithFontCorrection));
}
,["void"]), new objj_method(sel_getUid("_layoutInformativeView"), function $CPAlert___layoutInformativeView(self, _cmd)
{
    var inset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "content-inset"),
        defaultElementsMargin = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "default-elements-margin"),
        sizeWithFontCorrection = 6.0,
        informativeLabelWidth,
        informativeLabelOriginY,
        informativeLabelTextSize;
    objj_msgSend(self._informativeLabel, "setTextColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "informative-text-color"));
    objj_msgSend(self._informativeLabel, "setFont:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "informative-text-font"));
    objj_msgSend(self._informativeLabel, "setTextShadowColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "informative-text-shadow-color"));
    objj_msgSend(self._informativeLabel, "setTextShadowOffset:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "informative-text-shadow-offset"));
    objj_msgSend(self._informativeLabel, "setAlignment:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "informative-text-alignment"));
    objj_msgSend(self._informativeLabel, "setLineBreakMode:", CPLineBreakByWordWrapping);
    informativeLabelWidth = CGRectGetWidth(objj_msgSend(objj_msgSend(self._window, "contentView"), "frame")) - inset.left - inset.right;
    informativeLabelOriginY = objj_msgSend(self._messageLabel, "frameOrigin").y + objj_msgSend(self._messageLabel, "frameSize").height + defaultElementsMargin;
    informativeLabelTextSize = objj_msgSend(objj_msgSend(self._informativeLabel, "stringValue"), "sizeWithFont:inWidth:", objj_msgSend(self._informativeLabel, "font"), informativeLabelWidth);
    objj_msgSend(self._informativeLabel, "setFrame:", CGRectMake(inset.left, informativeLabelOriginY, informativeLabelTextSize.width, informativeLabelTextSize.height + sizeWithFontCorrection));
}
,["void"]), new objj_method(sel_getUid("_layoutAccessoryView"), function $CPAlert___layoutAccessoryView(self, _cmd)
{
    if (!self._accessoryView)
        return;
    var inset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "content-inset"),
        defaultElementsMargin = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "default-elements-margin"),
        accessoryViewWidth = CGRectGetWidth(objj_msgSend(objj_msgSend(self._window, "contentView"), "frame")) - inset.left - inset.right,
        accessoryViewOriginY = CGRectGetMaxY(objj_msgSend(self._informativeLabel, "frame")) + defaultElementsMargin;
    objj_msgSend(self._accessoryView, "setFrameOrigin:", CGPointMake(inset.left, accessoryViewOriginY));
    objj_msgSend(objj_msgSend(self._window, "contentView"), "addSubview:", self._accessoryView);
}
,["void"]), new objj_method(sel_getUid("_layoutSuppressionButton"), function $CPAlert___layoutSuppressionButton(self, _cmd)
{
    if (!self._showSuppressionButton)
        return;
    var inset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "content-inset"),
        suppressionViewXOffset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-x-offset"),
        suppressionViewYOffset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-y-offset"),
        defaultElementsMargin = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "default-elements-margin"),
        suppressionButtonViewOriginY = CGRectGetMaxY(objj_msgSend(self._accessoryView || self._informativeLabel, "frame")) + defaultElementsMargin + suppressionViewYOffset;
    objj_msgSend(self._suppressionButton, "setTextColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-text-color"));
    objj_msgSend(self._suppressionButton, "setFont:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-text-font"));
    objj_msgSend(self._suppressionButton, "setTextShadowColor:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-text-shadow-color"));
    objj_msgSend(self._suppressionButton, "setTextShadowOffset:", objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "suppression-button-text-shadow-offset"));
    objj_msgSend(self._suppressionButton, "sizeToFit");
    objj_msgSend(self._suppressionButton, "setFrameOrigin:", CGPointMake(inset.left + suppressionViewXOffset, suppressionButtonViewOriginY));
    objj_msgSend(objj_msgSend(self._window, "contentView"), "addSubview:", self._suppressionButton);
}
,["void"]), new objj_method(sel_getUid("_layoutButtonsFromView:"), function $CPAlert___layoutButtonsFromView_(self, _cmd, lastView)
{
    var inset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "content-inset"),
        minimumSize = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "size"),
        buttonOffset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "button-offset"),
        helpLeftOffset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "help-image-left-offset"),
        aRepresentativeButton = objj_msgSend(self._buttons, "objectAtIndex:", 0),
        defaultElementsMargin = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "default-elements-margin"),
        panelSize = objj_msgSend(objj_msgSend(self._window, "contentView"), "frame").size,
        buttonsOriginY,
        buttonMarginY,
        buttonMarginX,
        theme = objj_msgSend(self, "theme"),
        offsetX;
    objj_msgSend(aRepresentativeButton, "setTheme:", objj_msgSend(self, "theme"));
    objj_msgSend(aRepresentativeButton, "sizeToFit");
    panelSize.height = CGRectGetMaxY(objj_msgSend(lastView, "frame")) + defaultElementsMargin + objj_msgSend(aRepresentativeButton, "frameSize").height;
    if (panelSize.height < minimumSize.height)
        panelSize.height = minimumSize.height;
    buttonsOriginY = panelSize.height - objj_msgSend(aRepresentativeButton, "frameSize").height + buttonOffset;
    offsetX = panelSize.width - inset.right;
    switch(objj_msgSend(self._window, "styleMask")) {
    case _CPModalWindowMask:
        buttonMarginY = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "modal-window-button-margin-y");
        buttonMarginX = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "modal-window-button-margin-x");
        break;
default:
        buttonMarginY = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "standard-window-button-margin-y");
        buttonMarginX = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "standard-window-button-margin-x");
        break;
    }
    for (var i = objj_msgSend(self._buttons, "count") - 1; i >= 0; i--)
    {
        var button = self._buttons[i];
        objj_msgSend(button, "setTheme:", objj_msgSend(self, "theme"));
        objj_msgSend(button, "sizeToFit");
        var buttonFrame = objj_msgSend(button, "frame"),
            width = MAX(80.0, CGRectGetWidth(buttonFrame)),
            height = CGRectGetHeight(buttonFrame);
        offsetX -= width;
        objj_msgSend(button, "setFrame:", CGRectMake(offsetX + buttonMarginX, buttonsOriginY + buttonMarginY, width, height));
        offsetX -= 10;
    }
    if (self._showHelp)
    {
        var helpImage = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "help-image"),
            helpImagePressed = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "help-image-pressed"),
            helpImageSize = helpImage ? objj_msgSend(helpImage, "size") : CGSizeMakeZero(),
            helpFrame = CGRectMake(helpLeftOffset, buttonsOriginY, helpImageSize.width, helpImageSize.height);
        objj_msgSend(self._alertHelpButton, "setImage:", helpImage);
        objj_msgSend(self._alertHelpButton, "setAlternateImage:", helpImagePressed);
        objj_msgSend(self._alertHelpButton, "setBordered:", NO);
        objj_msgSend(self._alertHelpButton, "setFrame:", helpFrame);
    }
    panelSize.height += objj_msgSend(aRepresentativeButton, "frameSize").height + inset.bottom + buttonOffset;
    return panelSize;
}
,["CGSize","CPView"]), new objj_method(sel_getUid("layout"), function $CPAlert__layout(self, _cmd)
{
    if (!self._needsLayout)
        return;
    if (!self._window)
        objj_msgSend(self, "_createWindowWithStyle:", nil);
    var iconOffset = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "image-offset"),
        theImage = self._icon,
        finalSize;
    if (!theImage)
        switch(self._alertStyle) {
        case CPWarningAlertStyle:
            theImage = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "warning-image");
            break;
        case CPInformationalAlertStyle:
            theImage = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "information-image");
            break;
        case CPCriticalAlertStyle:
            theImage = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "error-image");
            break;
        }
    objj_msgSend(self._alertImageView, "setImage:", theImage);
    var imageSize = theImage ? objj_msgSend(theImage, "size") : CGSizeMakeZero();
    objj_msgSend(self._alertImageView, "setFrame:", CGRectMake(iconOffset.x, iconOffset.y, imageSize.width, imageSize.height));
    objj_msgSend(self, "_layoutMessageView");
    objj_msgSend(self, "_layoutInformativeView");
    objj_msgSend(self, "_layoutAccessoryView");
    objj_msgSend(self, "_layoutSuppressionButton");
    var lastView = self._informativeLabel;
    if (self._showSuppressionButton)
        lastView = self._suppressionButton;
    else if (self._accessoryView)
        lastView = self._accessoryView;
    finalSize = objj_msgSend(self, "_layoutButtonsFromView:", lastView);
    if (objj_msgSend(self._window, "styleMask") & CPDocModalWindowMask)
        finalSize.height -= 26;
    objj_msgSend(self._window, "setFrameSize:", finalSize);
    objj_msgSend(self._window, "center");
    if (objj_msgSend(self._window, "styleMask") & _CPModalWindowMask || objj_msgSend(self._window, "styleMask") & CPHUDBackgroundWindowMask)
    {
        objj_msgSend(self._window, "setMovable:", YES);
        objj_msgSend(self._window, "setMovableByWindowBackground:", YES);
    }
    self._needsLayout = NO;
}
,["void"]), new objj_method(sel_getUid("runModal"), function $CPAlert__runModal(self, _cmd)
{
    if (!(objj_msgSend(self._window, "styleMask") & self._defaultWindowStyle))
    {
        self._needsLayout = YES;
        objj_msgSend(self, "_createWindowWithStyle:", self._defaultWindowStyle);
    }
    objj_msgSend(self, "layout");
    objj_msgSend(CPApp, "runModalForWindow:", self._window);
}
,["void"]), new objj_method(sel_getUid("runModalWithDidEndBlock:"), function $CPAlert__runModalWithDidEndBlock_(self, _cmd, block)
{
    self._didEndBlock = block;
    objj_msgSend(self, "runModal");
}
,["void","Function"]), new objj_method(sel_getUid("beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:"), function $CPAlert__beginSheetModalForWindow_modalDelegate_didEndSelector_contextInfo_(self, _cmd, aWindow, modalDelegate, alertDidEndSelector, contextInfo)
{
    if (!(objj_msgSend(self._window, "styleMask") & CPDocModalWindowMask))
    {
        self._needsLayout = YES;
        objj_msgSend(self, "_createWindowWithStyle:", CPDocModalWindowMask);
    }
    objj_msgSend(self, "layout");
    self._modalDelegate = modalDelegate;
    self._didEndSelector = alertDidEndSelector;
    objj_msgSend(CPApp, "beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:", self._window, aWindow, self, sel_getUid("_alertDidEnd:returnCode:contextInfo:"), contextInfo);
}
,["void","CPWindow","id","SEL","id"]), new objj_method(sel_getUid("beginSheetModalForWindow:"), function $CPAlert__beginSheetModalForWindow_(self, _cmd, aWindow)
{
    objj_msgSend(self, "beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:", aWindow, nil, nil, nil);
}
,["void","CPWindow"]), new objj_method(sel_getUid("beginSheetModalForWindow:didEndBlock:"), function $CPAlert__beginSheetModalForWindow_didEndBlock_(self, _cmd, aWindow, block)
{
    self._didEndBlock = block;
    objj_msgSend(self, "beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo:", aWindow, nil, nil, nil);
}
,["void","CPWindow","Function"]), new objj_method(sel_getUid("_createWindowWithStyle:"), function $CPAlert___createWindowWithStyle_(self, _cmd, forceStyle)
{
    var frame = CGRectMakeZero();
    frame.size = objj_msgSend(self._themeView, "currentValueForThemeAttribute:", "size");
    self._window = objj_msgSend(objj_msgSend(CPPanel, "alloc"), "initWithContentRect:styleMask:", frame, forceStyle || self._defaultWindowStyle);
    objj_msgSend(self._window, "setLevel:", CPStatusWindowLevel);
    objj_msgSend(self._window, "setPlatformWindow:", objj_msgSend(objj_msgSend(CPApp, "keyWindow"), "platformWindow"));
    if (self._title)
        objj_msgSend(self._window, "setTitle:", self._title);
    var contentView = objj_msgSend(self._window, "contentView"),
        count = objj_msgSend(self._buttons, "count");
    if (count)
        while (count--)
            objj_msgSend(contentView, "addSubview:", self._buttons[count]);
    else
        objj_msgSend(self, "addButtonWithTitle:", "OK");
    objj_msgSend(contentView, "addSubview:", self._messageLabel);
    objj_msgSend(contentView, "addSubview:", self._alertImageView);
    objj_msgSend(contentView, "addSubview:", self._informativeLabel);
    if (self._showHelp)
        objj_msgSend(contentView, "addSubview:", self._alertHelpButton);
}
,["void","int"]), new objj_method(sel_getUid("_showHelp:"), function $CPAlert___showHelp_(self, _cmd, aSender)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("alertShowHelp:")))
        objj_msgSend(self._delegate, "alertShowHelp:", self);
}
,["id","id"]), new objj_method(sel_getUid("_takeReturnCodeFrom:"), function $CPAlert___takeReturnCodeFrom_(self, _cmd, aSender)
{
    if (objj_msgSend(self._window, "isSheet"))
    {
        objj_msgSend(self._window, "orderOut:", nil);
        objj_msgSend(CPApp, "endSheet:returnCode:", self._window, objj_msgSend(aSender, "tag"));
    }
    else
    {
        objj_msgSend(CPApp, "abortModal");
        objj_msgSend(self._window, "close");
        objj_msgSend(self, "_alertDidEnd:returnCode:contextInfo:", self._window, objj_msgSend(aSender, "tag"), nil);
    }
}
,["id","id"]), new objj_method(sel_getUid("_alertDidEnd:returnCode:contextInfo:"), function $CPAlert___alertDidEnd_returnCode_contextInfo_(self, _cmd, aWindow, returnCode, contextInfo)
{
    if (self._didEndBlock)
    {
        if (typeof self._didEndBlock === "function")
            self._didEndBlock(self, returnCode);
        else
            CPLog.warn("%s: didEnd block is not a function", objj_msgSend(self, "description"));
        self._didEndBlock = nil;
    }
    else if (self._modalDelegate)
    {
        if (self._didEndSelector)
            objj_msgSend(self._modalDelegate, self._didEndSelector, self, returnCode, contextInfo);
    }
    else if (self._delegate)
    {
        if (self._didEndSelector)
            objj_msgSend(self._delegate, self._didEndSelector, self, returnCode);
        else if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("alertDidEnd:returnCode:")))
            objj_msgSend(self._delegate, "alertDidEnd:returnCode:", self, returnCode);
    }
}
,["void","CPWindow","int","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("alertWithMessageText:defaultButton:alternateButton:otherButton:informativeTextWithFormat:"), function $CPAlert__alertWithMessageText_defaultButton_alternateButton_otherButton_informativeTextWithFormat_(self, _cmd, aMessage, defaultButtonTitle, alternateButtonTitle, otherButtonTitle, informativeText)
{
    var newAlert = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    objj_msgSend(newAlert, "setMessageText:", aMessage);
    objj_msgSend(newAlert, "addButtonWithTitle:", defaultButtonTitle);
    if (alternateButtonTitle)
        objj_msgSend(newAlert, "addButtonWithTitle:", alternateButtonTitle);
    if (otherButtonTitle)
        objj_msgSend(newAlert, "addButtonWithTitle:", otherButtonTitle);
    if (informativeText)
        objj_msgSend(newAlert, "setInformativeText:", informativeText);
    return newAlert;
}
,["CPAlert","CPString","CPString","CPString","CPString","CPString"]), new objj_method(sel_getUid("alertWithError:"), function $CPAlert__alertWithError_(self, _cmd, anErrorMessage)
{
    var newAlert = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    objj_msgSend(newAlert, "setMessageText:", anErrorMessage);
    objj_msgSend(newAlert, "setAlertStyle:", CPCriticalAlertStyle);
    return newAlert;
}
,["CPAlert","CPString"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPAlertThemeView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPAlertThemeView__defaultThemeClass(self, _cmd)
{
    return "alert";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPAlertThemeView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGSizeMake(400.0, 110.0), "size", CGInsetMake(15, 15, 15, 50), "content-inset", 6, "informative-offset", 10, "button-offset", CPJustifiedTextAlignment, "message-text-alignment", objj_msgSend(CPColor, "blackColor"), "message-text-color", objj_msgSend(CPFont, "boldSystemFontOfSize:", 13.0), "message-text-font", objj_msgSend(CPNull, "null"), "message-text-shadow-color", CGSizeMakeZero(), "message-text-shadow-offset", CPJustifiedTextAlignment, "informative-text-alignment", objj_msgSend(CPColor, "blackColor"), "informative-text-color", objj_msgSend(CPFont, "systemFontOfSize:", 12.0), "informative-text-font", objj_msgSend(CPNull, "null"), "informative-text-shadow-color", CGSizeMakeZero(), "informative-text-shadow-offset", CGPointMake(15, 12), "image-offset", objj_msgSend(CPNull, "null"), "information-image", objj_msgSend(CPNull, "null"), "warning-image", objj_msgSend(CPNull, "null"), "error-image", objj_msgSend(CPNull, "null"), "help-image", 15, "help-image-left-offset", objj_msgSend(CPNull, "null"), "help-image-pressed", 0.0, "suppression-button-y-offset", 0.0, "suppression-button-x-offset", 3.0, "default-elements-margin", objj_msgSend(CPColor, "blackColor"), "suppression-button-text-color", objj_msgSend(CPFont, "systemFontOfSize:", 12.0), "suppression-button-text-font", objj_msgSend(CPNull, "null"), "suppression-button-text-shadow-color", 0.0, "suppression-button-text-shadow-offset", 0.0, "modal-window-button-margin-y", 0.0, "modal-window-button-margin-x", 0.0, "standard-window-button-margin-y", 0.0, "standard-window-button-margin-x");
}
,["id"])]);
}p;13;CPAnimation.jt;8064;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPTimer.ji;23;CAMediaTimingFunction.jt;7966;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPTimer.j", NO);objj_executeFile("CAMediaTimingFunction.j", YES);CPAnimationEaseInOut = 0;
CPAnimationEaseIn = 1;
CPAnimationEaseOut = 2;
CPAnimationLinear = 3;
ACTUAL_FRAME_RATE = 0;
{var the_class = objj_allocateClassPair(CPObject, "CPAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_lastTime"), new objj_ivar("_duration"), new objj_ivar("_animationCurve"), new objj_ivar("_timingFunction"), new objj_ivar("_frameRate"), new objj_ivar("_progress"), new objj_ivar("_delegate"), new objj_ivar("_timer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithDuration:animationCurve:"), function $CPAnimation__initWithDuration_animationCurve_(self, _cmd, aDuration, anAnimationCurve)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPAnimation").super_class }, "init");
    if (self)
    {
        self._progress = 0.0;
        self._duration = MAX(0.0, aDuration);
        self._frameRate = 60.0;
        objj_msgSend(self, "setAnimationCurve:", anAnimationCurve);
    }
    return self;
}
,["id","float","CPAnimationCurve"]), new objj_method(sel_getUid("setAnimationCurve:"), function $CPAnimation__setAnimationCurve_(self, _cmd, anAnimationCurve)
{
    var timingFunctionName;
    switch(anAnimationCurve) {
    case CPAnimationEaseInOut:
        timingFunctionName = kCAMediaTimingFunctionEaseInEaseOut;
        break;
    case CPAnimationEaseIn:
        timingFunctionName = kCAMediaTimingFunctionEaseIn;
        break;
    case CPAnimationEaseOut:
        timingFunctionName = kCAMediaTimingFunctionEaseOut;
        break;
    case CPAnimationLinear:
        timingFunctionName = kCAMediaTimingFunctionLinear;
        break;
default:
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Invalid value provided for animation curve");
        break;
    }
    self._animationCurve = anAnimationCurve;
    self._timingFunction = objj_msgSend(CAMediaTimingFunction, "functionWithName:", timingFunctionName);
}
,["void","CPAnimationCurve"]), new objj_method(sel_getUid("animationCurve"), function $CPAnimation__animationCurve(self, _cmd)
{
    return self._animationCurve;
}
,["CPAnimationCurve"]), new objj_method(sel_getUid("setDuration:"), function $CPAnimation__setDuration_(self, _cmd, aDuration)
{
    if (aDuration < 0)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "aDuration can't be negative");
    self._duration = aDuration;
}
,["void","CPTimeInterval"]), new objj_method(sel_getUid("duration"), function $CPAnimation__duration(self, _cmd)
{
    return self._duration;
}
,["CPTimeInterval"]), new objj_method(sel_getUid("setFrameRate:"), function $CPAnimation__setFrameRate_(self, _cmd, frameRate)
{
    if (frameRate < 0)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "frameRate can't be negative");
    self._frameRate = frameRate;
}
,["void","float"]), new objj_method(sel_getUid("frameRate"), function $CPAnimation__frameRate(self, _cmd)
{
    return self._frameRate;
}
,["float"]), new objj_method(sel_getUid("delegate"), function $CPAnimation__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPAnimation__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("startAnimation"), function $CPAnimation__startAnimation(self, _cmd)
{
    if (self._timer || self._delegate && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("animationShouldStart:")) && !objj_msgSend(self._delegate, "animationShouldStart:", self))
        return;
    if (self._progress === 1.0)
        self._progress = 0.0;
    ACTUAL_FRAME_RATE = 0;
    self._lastTime = new Date();
    self._timer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("animationTimerDidFire:"), nil, YES);
}
,["void"]), new objj_method(sel_getUid("animationTimerDidFire:"), function $CPAnimation__animationTimerDidFire_(self, _cmd, aTimer)
{
    var currentTime = new Date(),
        progress = MIN(1.0, objj_msgSend(self, "currentProgress") + (currentTime - self._lastTime) / (self._duration * 1000.0));
    self._lastTime = currentTime;
    ++ACTUAL_FRAME_RATE;
    objj_msgSend(self, "setCurrentProgress:", progress);
    if (progress === 1.0)
    {
        objj_msgSend(self._timer, "invalidate");
        self._timer = nil;
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("animationDidEnd:")))
            objj_msgSend(self._delegate, "animationDidEnd:", self);
    }
}
,["void","CPTimer"]), new objj_method(sel_getUid("stopAnimation"), function $CPAnimation__stopAnimation(self, _cmd)
{
    if (!self._timer)
        return;
    objj_msgSend(self._timer, "invalidate");
    self._timer = nil;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("animationDidStop:")))
        objj_msgSend(self._delegate, "animationDidStop:", self);
}
,["void"]), new objj_method(sel_getUid("isAnimating"), function $CPAnimation__isAnimating(self, _cmd)
{
    return self._timer;
}
,["BOOL"]), new objj_method(sel_getUid("setCurrentProgress:"), function $CPAnimation__setCurrentProgress_(self, _cmd, aProgress)
{
    self._progress = aProgress;
}
,["void","float"]), new objj_method(sel_getUid("currentProgress"), function $CPAnimation__currentProgress(self, _cmd)
{
    return self._progress;
}
,["float"]), new objj_method(sel_getUid("currentValue"), function $CPAnimation__currentValue(self, _cmd)
{
    var t = objj_msgSend(self, "currentProgress");
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("animation:valueForProgress:")))
        return objj_msgSend(self._delegate, "animation:valueForProgress:", self, t);
    if (self._animationCurve == CPAnimationLinear)
        return t;
    var c1 = [],
        c2 = [];
    objj_msgSend(self._timingFunction, "getControlPointAtIndex:values:", 1, c1);
    objj_msgSend(self._timingFunction, "getControlPointAtIndex:values:", 2, c2);
    return CubicBezierAtTime(t, c1[0], c1[1], c2[0], c2[1], self._duration);
}
,["float"])]);
}var CubicBezierAtTime = function(t, p1x, p1y, p2x, p2y, duration)
{
    var ax = 0,
        bx = 0,
        cx = 0,
        ay = 0,
        by = 0,
        cy = 0;
sampleCurveX = function(t)
    {
        return ((ax * t + bx) * t + cx) * t;
    }
sampleCurveY = function(t)
    {
        return ((ay * t + by) * t + cy) * t;
    }
sampleCurveDerivativeX = function(t)
    {
        return (3.0 * ax * t + 2.0 * bx) * t + cx;
    }
solveEpsilon = function(duration)
    {
        return 1.0 / (200.0 * duration);
    }
solve = function(x, epsilon)
    {
        return sampleCurveY(solveCurveX(x, epsilon));
    }
solveCurveX = function(x, epsilon)
    {
        var t0,
            t1,
            t2 = x,
            x2,
            d2,
            i = 0;
        for (; i < 8; i++)
        {
            x2 = sampleCurveX(t2) - x;
            if (ABS(x2) < epsilon)
                return t2;
            d2 = sampleCurveDerivativeX(t2);
            if (ABS(d2) < 1e-6)
                break;
            t2 = t2 - x2 / d2;
        }
        t0 = 0.0;
        t1 = 1.0;
        t2 = x;
        if (t2 < t0)
            return t0;
        if (t2 > t1)
            return t1;
        while (t0 < t1)
        {
            x2 = sampleCurveX(t2);
            if (ABS(x2 - x) < epsilon)
                return t2;
            if (x > x2)
                t0 = t2;
            else
                t1 = t2;
            t2 = (t1 - t0) * 0.5 + t0;
        }
        return t2;
    }
    cx = 3.0 * p1x;
    bx = 3.0 * (p2x - p1x) - cx;
    ax = 1.0 - cx - bx;
    cy = 3.0 * p1y;
    by = 3.0 * (p2y - p1y) - cy;
    ay = 1.0 - cy - by;
    return solve(t, solveEpsilon(duration));
};
p;15;CPApplication.jt;42295;@STATIC;1.0;I;21;Foundation/CPBundle.ji;25;CPApplication_Constants.ji;17;CPCompatibility.ji;14;CPColorPanel.ji;10;CPCursor.ji;22;CPDocumentController.ji;9;CPEvent.ji;8;CPMenu.ji;13;CPResponder.ji;14;CPThemeBlend.ji;14;CPCibLoading.ji;9;CPPanel.ji;12;CPPlatform.ji;20;CPWindowController.ji;18;_CPPopoverWindow.jt;41977;objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("CPApplication_Constants.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPColorPanel.j", YES);objj_executeFile("CPCursor.j", YES);objj_executeFile("CPDocumentController.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPMenu.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPThemeBlend.j", YES);objj_executeFile("CPCibLoading.j", YES);objj_executeFile("CPPanel.j", YES);objj_executeFile("CPPlatform.j", YES);objj_executeFile("CPWindowController.j", YES);objj_executeFile("_CPPopoverWindow.j", YES);var CPMainCibFile = "CPMainCibFile",
    CPMainCibFileHumanFriendly = "Main cib file base name",
    CPEventModifierFlags = 0;
{var the_class = objj_allocateClassPair(CPResponder, "CPApplication"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_eventListeners"), new objj_ivar("_eventListenerInsertionIndex"), new objj_ivar("_currentEvent"), new objj_ivar("_lastMouseMoveWindow"), new objj_ivar("_windows"), new objj_ivar("_keyWindow"), new objj_ivar("_mainWindow"), new objj_ivar("_previousKeyWindow"), new objj_ivar("_previousMainWindow"), new objj_ivar("_documentController"), new objj_ivar("_currentSession"), new objj_ivar("_delegate"), new objj_ivar("_finishedLaunching"), new objj_ivar("_isActive"), new objj_ivar("_namedArgs"), new objj_ivar("_args"), new objj_ivar("_fullArgsString"), new objj_ivar("_applicationIconImage"), new objj_ivar("_aboutPanel"), new objj_ivar("_themeBlend")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("themeBlend"), function $CPApplication__themeBlend(self, _cmd)
{
    return self._themeBlend;
}
,["CPThemeBlend"]), new objj_method(sel_getUid("setThemeBlend:"), function $CPApplication__setThemeBlend_(self, _cmd, newValue)
{
    self._themeBlend = newValue;
}
,["void","CPThemeBlend"]), new objj_method(sel_getUid("init"), function $CPApplication__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPApplication").super_class }, "init");
    CPApp = self;
    if (self)
    {
        self._eventListeners = [];
        self._eventListenerInsertionIndex = 0;
        self._windows = [objj_msgSend(CPNull, "null")];
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPApplication__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate == aDelegate)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter"),
        delegateNotifications = [CPApplicationWillFinishLaunchingNotification, sel_getUid("applicationWillFinishLaunching:"), CPApplicationDidFinishLaunchingNotification, sel_getUid("applicationDidFinishLaunching:"), CPApplicationWillBecomeActiveNotification, sel_getUid("applicationWillBecomeActive:"), CPApplicationDidBecomeActiveNotification, sel_getUid("applicationDidBecomeActive:"), CPApplicationWillResignActiveNotification, sel_getUid("applicationWillResignActive:"), CPApplicationDidResignActiveNotification, sel_getUid("applicationDidResignActive:"), CPApplicationWillTerminateNotification, sel_getUid("applicationWillTerminate:"), CPApplicationDidChangeScreenParametersNotification, sel_getUid("applicationDidChangeScreenParameters:")],
        count = objj_msgSend(delegateNotifications, "count");
    if (self._delegate)
    {
        var index = 0;
        for (; index < count; index += 2)
        {
            var notificationName = delegateNotifications[index],
                selector = delegateNotifications[index + 1];
            if (objj_msgSend(self._delegate, "respondsToSelector:", selector))
                objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, notificationName, self);
        }
    }
    self._delegate = aDelegate;
    var index = 0;
    for (; index < count; index += 2)
    {
        var notificationName = delegateNotifications[index],
            selector = delegateNotifications[index + 1];
        if (objj_msgSend(self._delegate, "respondsToSelector:", selector))
            objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, selector, notificationName, self);
    }
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPApplication__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("finishLaunching"), function $CPApplication__finishLaunching(self, _cmd)
{
    window.status = " ";
    objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
    var bundle = objj_msgSend(CPBundle, "mainBundle"),
        delegateClassName = objj_msgSend(bundle, "objectForInfoDictionaryKey:", "CPApplicationDelegateClass");
    if (delegateClassName)
    {
        var delegateClass = objj_getClass(delegateClassName);
        if (delegateClass)
            objj_msgSend(self, "setDelegate:", objj_msgSend(objj_msgSend(delegateClass, "alloc"), "init"));
    }
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    objj_msgSend(defaultCenter, "postNotificationName:object:", CPApplicationWillFinishLaunchingNotification, self);
    var types = objj_msgSend(bundle, "objectForInfoDictionaryKey:", "CPBundleDocumentTypes");
    if (objj_msgSend(types, "count") > 0)
        self._documentController = objj_msgSend(CPDocumentController, "sharedDocumentController");
    var needsUntitled = !!self._documentController,
        URLStrings = nil;
    URLStrings = window.cpOpeningURLStrings && window.cpOpeningURLStrings();
    var index = 0,
        count = objj_msgSend(URLStrings, "count");
    for (; index < count; ++index)
        needsUntitled = !objj_msgSend(self, "_openURL:", objj_msgSend(CPURL, "URLWithString:", URLStrings[index])) && needsUntitled;
    if (needsUntitled && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("applicationShouldOpenUntitledFile:")))
        needsUntitled = objj_msgSend(self._delegate, "applicationShouldOpenUntitledFile:", self);
    if (needsUntitled)
        objj_msgSend(self._documentController, "newDocument:", self);
    objj_msgSend(self._documentController, "_updateRecentDocumentsMenu");
    objj_msgSend(defaultCenter, "postNotificationName:object:", CPApplicationDidFinishLaunchingNotification, self);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    self._finishedLaunching = YES;
}
,["void"]), new objj_method(sel_getUid("terminate:"), function $CPApplication__terminate_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPApplicationWillTerminateNotification, self);
    if (!objj_msgSend(CPPlatform, "isBrowser"))
    {
        objj_msgSend(objj_msgSend(CPDocumentController, "sharedDocumentController"), "closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:", self, sel_getUid("_documentController:didCloseAll:context:"), nil);
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "keyWindow"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("setApplicationIconImage:"), function $CPApplication__setApplicationIconImage_(self, _cmd, anImage)
{
    self._applicationIconImage = anImage;
}
,["void","CPImage"]), new objj_method(sel_getUid("applicationIconImage"), function $CPApplication__applicationIconImage(self, _cmd)
{
    if (self._applicationIconImage)
        return self._applicationIconImage;
    var imagePath = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPApplicationIcon");
    if (imagePath)
        self._applicationIconImage = objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:", imagePath);
    return self._applicationIconImage;
}
,["CPImage"]), new objj_method(sel_getUid("orderFrontStandardAboutPanel:"), function $CPApplication__orderFrontStandardAboutPanel_(self, _cmd, sender)
{
    objj_msgSend(self, "orderFrontStandardAboutPanelWithOptions:", nil);
}
,["void","id"]), new objj_method(sel_getUid("orderFrontStandardAboutPanelWithOptions:"), function $CPApplication__orderFrontStandardAboutPanelWithOptions_(self, _cmd, options)
{
    if (!self._aboutPanel)
    {
        var mainInfo = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "infoDictionary"),
            applicationTitle = objj_msgSend(options, "objectForKey:", "ApplicationName") || objj_msgSend(mainInfo, "objectForKey:", "CPBundleName"),
            applicationIcon = objj_msgSend(options, "objectForKey:", "ApplicationIcon") || objj_msgSend(self, "applicationIconImage"),
            version = objj_msgSend(options, "objectForKey:", "Version") || objj_msgSend(mainInfo, "objectForKey:", "CPBundleVersion"),
            applicationVersion = objj_msgSend(options, "objectForKey:", "ApplicationVersion") || objj_msgSend(mainInfo, "objectForKey:", "CPBundleShortVersionString"),
            copyright = objj_msgSend(options, "objectForKey:", "Copyright") || objj_msgSend(mainInfo, "objectForKey:", "CPHumanReadableCopyright");
        var windowWidth = 275,
            windowHeight = 223,
            imgWidth = 100,
            imgHeight = 100,
            interField = 8,
            aboutPanel = objj_msgSend(objj_msgSend(CPWindow, "alloc"), "initWithContentRect:styleMask:", CGRectMake(0, 0, windowWidth, windowHeight), CPClosableWindowMask),
            imageView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMake(windowWidth / 2 - imgWidth / 2, interField, imgWidth, imgHeight)),
            applicationLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(17, imgHeight + 16, windowWidth - 34, 24)),
            versionLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(17, imgHeight + 48, windowWidth - 34, 16)),
            copyrightLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(17, imgHeight + 72, windowWidth - 34, 32)),
            contentView = objj_msgSend(aboutPanel, "contentView");
        objj_msgSend(applicationLabel, "setFont:", objj_msgSend(CPFont, "boldSystemFontOfSize:", objj_msgSend(CPFont, "systemFontSize") + 2));
        objj_msgSend(applicationLabel, "setAlignment:", CPCenterTextAlignment);
        objj_msgSend(versionLabel, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", objj_msgSend(CPFont, "systemFontSize") - 1));
        objj_msgSend(versionLabel, "setAlignment:", CPCenterTextAlignment);
        objj_msgSend(copyrightLabel, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", objj_msgSend(CPFont, "systemFontSize") - 1));
        objj_msgSend(copyrightLabel, "setAlignment:", CPCenterTextAlignment);
        objj_msgSend(copyrightLabel, "setLineBreakMode:", CPLineBreakByWordWrapping);
        objj_msgSend(contentView, "addSubview:", imageView);
        objj_msgSend(contentView, "addSubview:", applicationLabel);
        objj_msgSend(contentView, "addSubview:", versionLabel);
        objj_msgSend(contentView, "addSubview:", copyrightLabel);
        var standardPath = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(self, "class")), "pathForResource:", "standardApplicationIcon.png");
        objj_msgSend(imageView, "setImage:", applicationIcon || objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", standardPath, CGSizeMake(256, 256)));
        objj_msgSend(applicationLabel, "setStringValue:", applicationTitle || "");
        if (applicationVersion && version)
            objj_msgSend(versionLabel, "setStringValue:", "Version " + applicationVersion + " (" + version + ")");
        else if (applicationVersion || version)
            objj_msgSend(versionLabel, "setStringValue:", "Version " + (applicationVersion || version));
        else
            objj_msgSend(versionLabel, "setStringValue:", "");
        objj_msgSend(copyrightLabel, "setStringValue:", copyright || "");
        objj_msgSend(aboutPanel, "center");
        self._aboutPanel = aboutPanel;
    }
    objj_msgSend(self._aboutPanel, "orderFront:", self);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("_documentController:didCloseAll:context:"), function $CPApplication___documentController_didCloseAll_context_(self, _cmd, docController, didCloseAll, info)
{
    if (didCloseAll)
    {
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("applicationShouldTerminate:")))
            objj_msgSend(self, "replyToApplicationShouldTerminate:", objj_msgSend(self._delegate, "applicationShouldTerminate:", self));
        else
            objj_msgSend(self, "replyToApplicationShouldTerminate:", YES);
    }
}
,["void","CPDocumentController","BOOL","Object"]), new objj_method(sel_getUid("replyToApplicationShouldTerminate:"), function $CPApplication__replyToApplicationShouldTerminate_(self, _cmd, terminate)
{
    if (terminate == CPTerminateNow)
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPApplicationWillTerminateNotification, self);
        objj_msgSend(CPPlatform, "terminateApplication");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("activateIgnoringOtherApps:"), function $CPApplication__activateIgnoringOtherApps_(self, _cmd, shouldIgnoreOtherApps)
{
    objj_msgSend(self, "_willBecomeActive");
    objj_msgSend(CPPlatform, "activateIgnoringOtherApps:", shouldIgnoreOtherApps);
    self._isActive = YES;
    objj_msgSend(self, "_willResignActive");
}
,["void","BOOL"]), new objj_method(sel_getUid("deactivate"), function $CPApplication__deactivate(self, _cmd)
{
    objj_msgSend(self, "_willResignActive");
    objj_msgSend(CPPlatform, "deactivate");
    self._isActive = NO;
    objj_msgSend(self, "_didResignActive");
}
,["void"]), new objj_method(sel_getUid("isActive"), function $CPApplication__isActive(self, _cmd)
{
    return self._isActive;
}
,["void"]), new objj_method(sel_getUid("hideOtherApplications:"), function $CPApplication__hideOtherApplications_(self, _cmd, aSender)
{
    objj_msgSend(CPPlatform, "hideOtherApplications:", self);
}
,["void","id"]), new objj_method(sel_getUid("run"), function $CPApplication__run(self, _cmd)
{
    objj_msgSend(self, "finishLaunching");
}
,["void"]), new objj_method(sel_getUid("runModalForWindow:"), function $CPApplication__runModalForWindow_(self, _cmd, aWindow)
{
    objj_msgSend(self, "runModalSession:", objj_msgSend(self, "beginModalSessionForWindow:", aWindow));
}
,["void","CPWindow"]), new objj_method(sel_getUid("stopModalWithCode:"), function $CPApplication__stopModalWithCode_(self, _cmd, aCode)
{
    if (!self._currentSession)
    {
        return;
    }
    self._currentSession._state = aCode;
    self._currentSession = self._currentSession._previous;
    objj_msgSend(self, "_removeRunModalLoop");
}
,["void","int"]), new objj_method(sel_getUid("_removeRunModalLoop"), function $CPApplication___removeRunModalLoop(self, _cmd)
{
    var count = self._eventListeners.length;
    while (count--)
        if (self._eventListeners[count]._callback === _CPRunModalLoop)
        {
            self._eventListeners.splice(count, 1);
            if (count <= self._eventListenerInsertionIndex)
                self._eventListenerInsertionIndex--;
            return;
        }
}
,["void"]), new objj_method(sel_getUid("stopModal"), function $CPApplication__stopModal(self, _cmd)
{
    objj_msgSend(self, "stopModalWithCode:", CPRunStoppedResponse);
}
,["void"]), new objj_method(sel_getUid("abortModal"), function $CPApplication__abortModal(self, _cmd)
{
    objj_msgSend(self, "stopModalWithCode:", CPRunAbortedResponse);
}
,["void"]), new objj_method(sel_getUid("beginModalSessionForWindow:"), function $CPApplication__beginModalSessionForWindow_(self, _cmd, aWindow)
{
    return _CPModalSessionMake(aWindow, 0);
}
,["CPModalSession","CPWindow"]), new objj_method(sel_getUid("runModalSession:"), function $CPApplication__runModalSession_(self, _cmd, aModalSession)
{
    aModalSession._previous = self._currentSession;
    self._currentSession = aModalSession;
    var theWindow = aModalSession._window;
    objj_msgSend(theWindow, "center");
    objj_msgSend(theWindow, "makeKeyWindow");
    objj_msgSend(theWindow, "orderFront:", self);
    objj_msgSend(CPApp, "setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:", _CPRunModalLoop, CPAnyEventMask, nil, 0, YES);
}
,["void","CPModalSession"]), new objj_method(sel_getUid("modalWindow"), function $CPApplication__modalWindow(self, _cmd)
{
    if (!self._currentSession)
        return nil;
    return self._currentSession._window;
}
,["CPWindow"]), new objj_method(sel_getUid("_handleKeyEquivalent:"), function $CPApplication___handleKeyEquivalent_(self, _cmd, anEvent)
{
    return objj_msgSend(objj_msgSend(self, "keyWindow"), "performKeyEquivalent:", anEvent) || objj_msgSend(objj_msgSend(self, "mainMenu"), "performKeyEquivalent:", anEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("sendEvent:"), function $CPApplication__sendEvent_(self, _cmd, anEvent)
{
    self._currentEvent = anEvent;
    CPEventModifierFlags = objj_msgSend(anEvent, "modifierFlags");
    var theWindow = objj_msgSend(anEvent, "window");
    if (objj_msgSend(anEvent, "_couldBeKeyEquivalent") && objj_msgSend(self, "_handleKeyEquivalent:", anEvent))
        return;
    if (objj_msgSend(anEvent, "type") == CPMouseMoved)
    {
        if (theWindow !== self._lastMouseMoveWindow)
            objj_msgSend(self._lastMouseMoveWindow, "_mouseExitedResizeRect");
        self._lastMouseMoveWindow = theWindow;
    }
    for (var i = self._eventListeners.length - 1; i >= 0; i--)
    {
        var listener = self._eventListeners[i];
        if (listener._mask & 1 << objj_msgSend(anEvent, "type"))
        {
            self._eventListeners.splice(i, 1);
            self._eventListenerInsertionIndex = i;
            listener._callback(anEvent);
            if (listener._dequeue)
            {
                self._eventListenerInsertionIndex = self._eventListeners.length;
                return;
            }
        }
    }
    self._eventListenerInsertionIndex = self._eventListeners.length;
    if (theWindow)
        objj_msgSend(theWindow, "sendEvent:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("doCommandBySelector:"), function $CPApplication__doCommandBySelector_(self, _cmd, aSelector)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", aSelector))
        objj_msgSend(self._delegate, "performSelector:", aSelector);
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPApplication").super_class }, "doCommandBySelector:", aSelector);
}
,["void","SEL"]), new objj_method(sel_getUid("keyWindow"), function $CPApplication__keyWindow(self, _cmd)
{
    return self._keyWindow;
}
,["CPWindow"]), new objj_method(sel_getUid("mainWindow"), function $CPApplication__mainWindow(self, _cmd)
{
    return self._mainWindow;
}
,["CPWindow"]), new objj_method(sel_getUid("windowWithWindowNumber:"), function $CPApplication__windowWithWindowNumber_(self, _cmd, aWindowNumber)
{
    if (!aWindowNumber)
        return nil;
    return self._windows[aWindowNumber];
}
,["CPWindow","int"]), new objj_method(sel_getUid("windows"), function $CPApplication__windows(self, _cmd)
{
    return objj_msgSend(self._windows, "subarrayWithRange:", CPMakeRange(1, objj_msgSend(self._windows, "count") - 1));
}
,["CPArray"]), new objj_method(sel_getUid("orderedWindows"), function $CPApplication__orderedWindows(self, _cmd)
{
    return CPWindowObjectList();
}
,["CPArray"]), new objj_method(sel_getUid("hide:"), function $CPApplication__hide_(self, _cmd, aSender)
{
    objj_msgSend(CPPlatform, "hide:", self);
}
,["void","id"]), new objj_method(sel_getUid("mainMenu"), function $CPApplication__mainMenu(self, _cmd)
{
    return objj_msgSend(self, "menu");
}
,["CPMenu"]), new objj_method(sel_getUid("setMainMenu:"), function $CPApplication__setMainMenu_(self, _cmd, aMenu)
{
    objj_msgSend(self, "setMenu:", aMenu);
}
,["void","CPMenu"]), new objj_method(sel_getUid("setMenu:"), function $CPApplication__setMenu_(self, _cmd, aMenu)
{
    if (objj_msgSend(aMenu, "_menuName") === "CPMainMenu")
    {
        if (objj_msgSend(self, "menu") === aMenu)
            return;
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPApplication").super_class }, "setMenu:", aMenu);
        if (objj_msgSend(CPPlatform, "supportsNativeMainMenu"))
            window.cpSetMainMenu(objj_msgSend(self, "menu"));
    }
    else
        objj_msgSend(aMenu, "_setMenuName:", "CPMainMenu");
}
,["void","CPMenu"]), new objj_method(sel_getUid("orderFrontColorPanel:"), function $CPApplication__orderFrontColorPanel_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(CPColorPanel, "sharedColorPanel"), "orderFront:", self);
}
,["void","id"]), new objj_method(sel_getUid("tryToPerform:with:"), function $CPApplication__tryToPerform_with_(self, _cmd, anAction, anObject)
{
    if (!anAction)
        return NO;
    if (objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPApplication").super_class }, "tryToPerform:with:", anAction, anObject))
        return YES;
    if (objj_msgSend(self._delegate, "respondsToSelector:", anAction))
    {
        objj_msgSend(self._delegate, "performSelector:withObject:", anAction, anObject);
        return YES;
    }
    return NO;
}
,["BOOL","SEL","id"]), new objj_method(sel_getUid("sendAction:to:from:"), function $CPApplication__sendAction_to_from_(self, _cmd, anAction, aTarget, aSender)
{
    var target = objj_msgSend(self, "targetForAction:to:from:", anAction, aTarget, aSender);
    if (!target)
        return NO;
    objj_msgSend(target, "performSelector:withObject:", anAction, aSender);
    return YES;
}
,["BOOL","SEL","id","id"]), new objj_method(sel_getUid("targetForAction:to:from:"), function $CPApplication__targetForAction_to_from_(self, _cmd, anAction, aTarget, aSender)
{
    if (!anAction)
        return nil;
    if (aTarget)
        return aTarget;
    return objj_msgSend(self, "targetForAction:", anAction);
}
,["id","SEL","id","id"]), new objj_method(sel_getUid("_targetForWindow:action:"), function $CPApplication___targetForWindow_action_(self, _cmd, aWindow, anAction)
{
    var responder = objj_msgSend(aWindow, "firstResponder"),
        checkWindow = YES;
    while (responder)
    {
        if (objj_msgSend(responder, "respondsToSelector:", anAction))
            return responder;
        if (responder == aWindow)
            checkWindow = NO;
        responder = objj_msgSend(responder, "nextResponder");
    }
    if (checkWindow && objj_msgSend(aWindow, "respondsToSelector:", anAction))
        return aWindow;
    var delegate = objj_msgSend(aWindow, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", anAction))
        return delegate;
    var windowController = objj_msgSend(aWindow, "windowController");
    if (objj_msgSend(windowController, "respondsToSelector:", anAction))
        return windowController;
    var theDocument = objj_msgSend(windowController, "document");
    if (theDocument !== delegate && objj_msgSend(theDocument, "respondsToSelector:", anAction))
        return theDocument;
    return nil;
}
,["id","CPWindow","SEL"]), new objj_method(sel_getUid("targetForAction:"), function $CPApplication__targetForAction_(self, _cmd, anAction)
{
    if (!anAction)
        return nil;
    var target = objj_msgSend(self, "_targetForWindow:action:", objj_msgSend(self, "keyWindow"), anAction);
    if (target)
        return target;
    target = objj_msgSend(self, "_targetForWindow:action:", objj_msgSend(self, "mainWindow"), anAction);
    if (target)
        return target;
    if (objj_msgSend(self, "respondsToSelector:", anAction))
        return self;
    if (objj_msgSend(self._delegate, "respondsToSelector:", anAction))
        return self._delegate;
    if (objj_msgSend(self._documentController, "respondsToSelector:", anAction))
        return self._documentController;
    return nil;
}
,["id","SEL"]), new objj_method(sel_getUid("setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:"), function $CPApplication__setCallback_forNextEventMatchingMask_untilDate_inMode_dequeue_(self, _cmd, aCallback, aMask, anExpiration, aMode, shouldDequeue)
{
    self._eventListeners.splice(self._eventListenerInsertionIndex++, 0, _CPEventListenerMake(aMask, aCallback, shouldDequeue));
}
,["void","Function","unsigned int","CPDate","CPString","BOOL"]), new objj_method(sel_getUid("setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:"), function $CPApplication__setTarget_selector_forNextEventMatchingMask_untilDate_inMode_dequeue_(self, _cmd, aTarget, aSelector, aMask, anExpiration, aMode, shouldDequeue)
{
    self._eventListeners.splice(self._eventListenerInsertionIndex++, 0, _CPEventListenerMake(aMask, function(anEvent)
    {
        objj_msgSend(aTarget, aSelector, anEvent);
    }, shouldDequeue));
}
,["void","id","SEL","unsigned int","CPDate","CPString","BOOL"]), new objj_method(sel_getUid("currentEvent"), function $CPApplication__currentEvent(self, _cmd)
{
    return self._currentEvent;
}
,["CPEvent"]), new objj_method(sel_getUid("beginSheet:modalForWindow:modalDelegate:didEndSelector:contextInfo:"), function $CPApplication__beginSheet_modalForWindow_modalDelegate_didEndSelector_contextInfo_(self, _cmd, aSheet, aWindow, aModalDelegate, didEndSelector, contextInfo)
{
    if (objj_msgSend(aWindow, "isSheet"))
    {
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "The target window of beginSheet: cannot be a sheet");
        return;
    }
    objj_msgSend(aSheet._windowView, "_enableSheet:inWindow:", YES, aWindow);
    objj_msgSend(aWindow, "_attachSheet:modalDelegate:didEndSelector:contextInfo:", aSheet, aModalDelegate, didEndSelector, contextInfo);
}
,["void","CPWindow","CPWindow","id","SEL","id"]), new objj_method(sel_getUid("endSheet:returnCode:"), function $CPApplication__endSheet_returnCode_(self, _cmd, sheet, returnCode)
{
    var count = objj_msgSend(self._windows, "count");
    while (--count >= 0)
    {
        var aWindow = objj_msgSend(self._windows, "objectAtIndex:", count),
            context = aWindow._sheetContext;
        if (context && context["sheet"] === sheet)
        {
            context["returnCode"] = returnCode;
            objj_msgSend(aWindow, "_endSheet");
            return;
        }
    }
}
,["void","CPWindow","int"]), new objj_method(sel_getUid("endSheet:"), function $CPApplication__endSheet_(self, _cmd, sheet)
{
    objj_msgSend(self, "endSheet:returnCode:", sheet, 0);
}
,["void","CPWindow"]), new objj_method(sel_getUid("arguments"), function $CPApplication__arguments(self, _cmd)
{
    if (window && window.location && self._fullArgsString !== window.location.hash)
        objj_msgSend(self, "_reloadArguments");
    return self._args;
}
,["CPArray"]), new objj_method(sel_getUid("setArguments:"), function $CPApplication__setArguments_(self, _cmd, args)
{
    if (!args || args.length == 0)
    {
        self._args = [];
        if (window && window.location)
            window.location.hash = "#";
        return;
    }
    if (!objj_msgSend(args, "isKindOfClass:", CPArray))
        args = objj_msgSend(CPArray, "arrayWithObject:", args);
    self._args = args;
    var toEncode = objj_msgSend(self._args, "copy");
    for (var i = 0, count = toEncode.length; i < count; i++)
        toEncode[i] = encodeURIComponent(toEncode[i]);
    var hash = objj_msgSend(toEncode, "componentsJoinedByString:", "/");
    if (window && window.location)
        window.location.hash = "#" + hash;
}
,["void","CPArray"]), new objj_method(sel_getUid("_reloadArguments"), function $CPApplication___reloadArguments(self, _cmd)
{
    self._fullArgsString = window && window.location ? window.location.hash : "";
    if (self._fullArgsString.length)
    {
        var args = (self._fullArgsString.substring(1)).split("/");
        for (var i = 0, count = args.length; i < count; i++)
            args[i] = decodeURIComponent(args[i]);
        self._args = args;
    }
    else
        self._args = [];
}
,["void"]), new objj_method(sel_getUid("namedArguments"), function $CPApplication__namedArguments(self, _cmd)
{
    return self._namedArgs;
}
,["CPDictionary"]), new objj_method(sel_getUid("_openURL:"), function $CPApplication___openURL_(self, _cmd, aURL)
{
    if (self._delegate && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("application:openFile:")))
    {
        CPLog.warn("application:openFile: is deprecated, use application:openURL: instead.");
        return objj_msgSend(self._delegate, "application:openFile:", self, objj_msgSend(aURL, "absoluteString"));
    }
    if (self._delegate && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("application:openURL:")))
        return objj_msgSend(self._delegate, "application:openURL:", self, aURL);
    return !!objj_msgSend(self._documentController, "openDocumentWithContentsOfURL:display:error:", aURL, YES, NULL);
}
,["BOOL","CPURL"]), new objj_method(sel_getUid("_willBecomeActive"), function $CPApplication___willBecomeActive(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPApplicationWillBecomeActiveNotification, self, nil);
}
,["void"]), new objj_method(sel_getUid("_didBecomeActive"), function $CPApplication___didBecomeActive(self, _cmd)
{
    if (!objj_msgSend(self, "keyWindow") && self._previousKeyWindow && objj_msgSend(objj_msgSend(self, "windows"), "indexOfObjectIdenticalTo:", self._previousKeyWindow) !== CPNotFound)
        objj_msgSend(self._previousKeyWindow, "makeKeyWindow");
    if (!objj_msgSend(self, "mainWindow") && self._previousMainWindow && objj_msgSend(objj_msgSend(self, "windows"), "indexOfObjectIdenticalTo:", self._previousMainWindow) !== CPNotFound)
        objj_msgSend(self._previousMainWindow, "makeMainWindow");
    if (objj_msgSend(self, "keyWindow"))
        objj_msgSend(objj_msgSend(self, "keyWindow"), "orderFront:", self);
    else if (objj_msgSend(self, "mainWindow"))
        objj_msgSend(objj_msgSend(self, "mainWindow"), "makeKeyAndOrderFront:", self);
    else
        objj_msgSend(objj_msgSend(self, "mainMenu")._menuWindow, "makeKeyWindow");
    self._previousKeyWindow = nil;
    self._previousMainWindow = nil;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPApplicationDidBecomeActiveNotification, self, nil);
}
,["void"]), new objj_method(sel_getUid("_willResignActive"), function $CPApplication___willResignActive(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPApplicationWillResignActiveNotification, self, nil);
}
,["void"]), new objj_method(sel_getUid("_didResignActive"), function $CPApplication___didResignActive(self, _cmd)
{
    if (self._activeMenu)
        objj_msgSend(self._activeMenu, "cancelTracking");
    if (objj_msgSend(self, "keyWindow"))
    {
        self._previousKeyWindow = objj_msgSend(self, "keyWindow");
        objj_msgSend(self._previousKeyWindow, "resignKeyWindow");
    }
    if (objj_msgSend(self, "mainWindow"))
    {
        self._previousMainWindow = objj_msgSend(self, "mainWindow");
        objj_msgSend(self._previousMainWindow, "resignMainWindow");
    }
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPApplicationDidResignActiveNotification, self, nil);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedApplication"), function $CPApplication__sharedApplication(self, _cmd)
{
    if (!CPApp)
        CPApp = objj_msgSend(objj_msgSend(CPApplication, "alloc"), "init");
    return CPApp;
}
,["CPApplication"]), new objj_method(sel_getUid("defaultThemeName"), function $CPApplication__defaultThemeName(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPDefaultTheme") || "Aristo2";
}
,["CPString"])]);
}var _CPModalSessionMake = function(aWindow, aStopCode)
{
    return {_window: aWindow, _state: CPRunContinuesResponse, _previous: nil};
};
var _CPEventListenerMake = function(anEventMask, aCallback, shouldDequeue)
{
    return {_mask: anEventMask, _callback: aCallback, _dequeue: shouldDequeue};
};
_CPRunModalLoop = function(anEvent)
{
    objj_msgSend(CPApp, "setCallback:forNextEventMatchingMask:untilDate:inMode:dequeue:", _CPRunModalLoop, CPAnyEventMask, nil, 0, YES);
    var theWindow = objj_msgSend(anEvent, "window"),
        modalSession = CPApp._currentSession;
    if (theWindow == modalSession._window || objj_msgSend(theWindow, "worksWhenModal") || objj_msgSend(theWindow, "attachedSheet") == modalSession._window || objj_msgSend(theWindow, "isKindOfClass:", _CPPopoverWindow) && objj_msgSend(objj_msgSend(theWindow, "targetView"), "window") === modalSession._window)
    {
        objj_msgSend(theWindow, "sendEvent:", anEvent);
    }
};
CPApplicationMain = function(args, namedArgs)
{
    if (window.parent !== window && typeof window.parent._childAppIsStarting === "function")
    {
        try        {
            window.parent._childAppIsStarting(window);
        }
        catch(err)         {
            CPLog.warn("Failed to call parent frame's _childAppIsStarting().");
        }    }
    var mainBundle = objj_msgSend(CPBundle, "mainBundle"),
        principalClass = objj_msgSend(mainBundle, "principalClass");
    if (!principalClass)
        principalClass = objj_msgSend(CPApplication, "class");
    objj_msgSend(principalClass, "sharedApplication");
    if (objj_msgSend(args, "containsObject:", "debug"))
        CPLogRegister(CPLogPopup);
    CPApp._args = args;
    CPApp._namedArgs = namedArgs;
    objj_msgSend(_CPAppBootstrapper, "performActions");
}
var _CPAppBootstrapperActions = nil;
{var the_class = objj_allocateClassPair(CPObject, "_CPAppBootstrapper"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("actions"), function $_CPAppBootstrapper__actions(self, _cmd)
{
    return [sel_getUid("bootstrapPlatform"), sel_getUid("loadDefaultTheme"), sel_getUid("loadMainCibFile")];
}
,["CPArray"]), new objj_method(sel_getUid("performActions"), function $_CPAppBootstrapper__performActions(self, _cmd)
{
    if (!_CPAppBootstrapperActions)
        _CPAppBootstrapperActions = objj_msgSend(self, "actions");
    while (_CPAppBootstrapperActions.length)
    {
        var action = _CPAppBootstrapperActions.shift();
        if (objj_msgSend(self, action))
            return;
    }
    objj_msgSend(CPApp, "run");
}
,["void"]), new objj_method(sel_getUid("bootstrapPlatform"), function $_CPAppBootstrapper__bootstrapPlatform(self, _cmd)
{
    return objj_msgSend(CPPlatform, "bootstrap");
}
,["BOOL"]), new objj_method(sel_getUid("loadDefaultTheme"), function $_CPAppBootstrapper__loadDefaultTheme(self, _cmd)
{
    var defaultThemeName = objj_msgSend(CPApplication, "defaultThemeName"),
        themeURL = nil;
    if (defaultThemeName === "Aristo" || defaultThemeName === "Aristo2")
        themeURL = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPApplication, "class")), "pathForResource:", defaultThemeName + ".blend");
    else
        themeURL = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "pathForResource:", defaultThemeName + ".blend");
    var blend = objj_msgSend(objj_msgSend(CPThemeBlend, "alloc"), "initWithContentsOfURL:", themeURL);
    objj_msgSend(blend, "loadWithDelegate:", self);
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("blendDidFinishLoading:"), function $_CPAppBootstrapper__blendDidFinishLoading_(self, _cmd, aThemeBlend)
{
    objj_msgSend(objj_msgSend(CPApplication, "sharedApplication"), "setThemeBlend:", aThemeBlend);
    objj_msgSend(CPTheme, "setDefaultTheme:", objj_msgSend(CPTheme, "themeNamed:", objj_msgSend(CPApplication, "defaultThemeName")));
    objj_msgSend(self, "performActions");
}
,["void","CPThemeBlend"]), new objj_method(sel_getUid("loadMainCibFile"), function $_CPAppBootstrapper__loadMainCibFile(self, _cmd)
{
    var mainBundle = objj_msgSend(CPBundle, "mainBundle"),
        mainCibFile = objj_msgSend(mainBundle, "objectForInfoDictionaryKey:", CPMainCibFile) || objj_msgSend(mainBundle, "objectForInfoDictionaryKey:", CPMainCibFileHumanFriendly);
    if (mainCibFile)
    {
        objj_msgSend(mainBundle, "loadCibFile:externalNameTable:loadDelegate:", mainCibFile, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CPApp, CPCibOwner), self);
        return YES;
    }
    else
        objj_msgSend(self, "loadCiblessBrowserMainMenu");
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("loadCiblessBrowserMainMenu"), function $_CPAppBootstrapper__loadCiblessBrowserMainMenu(self, _cmd)
{
    var mainMenu = objj_msgSend(objj_msgSend(CPMenu, "alloc"), "initWithTitle:", "MainMenu");
    objj_msgSend(mainMenu, "setAutoenablesItems:", NO);
    var newMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "New", sel_getUid("newDocument:"), "n");
    objj_msgSend(newMenuItem, "setImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-general-icon-new", _CPMenuView));
    objj_msgSend(newMenuItem, "setAlternateImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:inState:forClass:", "menu-general-icon-new", CPThemeStateHighlighted, _CPMenuView));
    objj_msgSend(mainMenu, "addItem:", newMenuItem);
    var openMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Open", sel_getUid("openDocument:"), "o");
    objj_msgSend(openMenuItem, "setImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-general-icon-open", _CPMenuView));
    objj_msgSend(openMenuItem, "setAlternateImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:inState:forClass:", "menu-general-icon-open", CPThemeStateHighlighted, _CPMenuView));
    objj_msgSend(mainMenu, "addItem:", openMenuItem);
    var saveMenu = objj_msgSend(objj_msgSend(CPMenu, "alloc"), "initWithTitle:", "Save"),
        saveMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Save", sel_getUid("saveDocument:"), nil);
    objj_msgSend(saveMenuItem, "setImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-general-icon-save", _CPMenuView));
    objj_msgSend(saveMenuItem, "setAlternateImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:inState:forClass:", "menu-general-icon-save", CPThemeStateHighlighted, _CPMenuView));
    objj_msgSend(saveMenu, "addItem:", objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Save", sel_getUid("saveDocument:"), "s"));
    objj_msgSend(saveMenu, "addItem:", objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Save As", sel_getUid("saveDocumentAs:"), nil));
    objj_msgSend(saveMenuItem, "setSubmenu:", saveMenu);
    objj_msgSend(mainMenu, "addItem:", saveMenuItem);
    var editMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Edit", nil, nil),
        editMenu = objj_msgSend(objj_msgSend(CPMenu, "alloc"), "initWithTitle:", "Edit"),
        undoMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Undo", sel_getUid("undo:"), CPUndoKeyEquivalent),
        redoMenuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Redo", sel_getUid("redo:"), CPRedoKeyEquivalent);
    objj_msgSend(undoMenuItem, "setKeyEquivalentModifierMask:", CPUndoKeyEquivalentModifierMask);
    objj_msgSend(redoMenuItem, "setKeyEquivalentModifierMask:", CPRedoKeyEquivalentModifierMask);
    objj_msgSend(editMenu, "addItem:", undoMenuItem);
    objj_msgSend(editMenu, "addItem:", redoMenuItem);
    objj_msgSend(editMenu, "addItem:", objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Cut", sel_getUid("cut:"), "x"));
    objj_msgSend(editMenu, "addItem:", objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Copy", sel_getUid("copy:"), "c"));
    objj_msgSend(editMenu, "addItem:", objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Paste", sel_getUid("paste:"), "v"));
    objj_msgSend(editMenuItem, "setSubmenu:", editMenu);
    objj_msgSend(editMenuItem, "setHidden:", YES);
    objj_msgSend(mainMenu, "addItem:", editMenuItem);
    objj_msgSend(mainMenu, "addItem:", objj_msgSend(CPMenuItem, "separatorItem"));
    objj_msgSend(CPApp, "setMainMenu:", mainMenu);
}
,["void"]), new objj_method(sel_getUid("cibDidFinishLoading:"), function $_CPAppBootstrapper__cibDidFinishLoading_(self, _cmd, aCib)
{
    objj_msgSend(self, "performActions");
}
,["void","CPCib"]), new objj_method(sel_getUid("cibDidFailToLoad:"), function $_CPAppBootstrapper__cibDidFailToLoad_(self, _cmd, aCib)
{
    throw new Error("Could not load main cib file. Did you forget to nib2cib it?");
}
,["void","CPCib"]), new objj_method(sel_getUid("reset"), function $_CPAppBootstrapper__reset(self, _cmd)
{
    _CPAppBootstrapperActions = nil;
}
,["void"])]);
}{
var the_class = objj_getClass("CPEvent")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPEvent\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("modifierFlags"), function $CPEvent__modifierFlags(self, _cmd)
{
    return CPEventModifierFlags;
}
,["unsigned"])]);
}p;25;CPApplication_Constants.jt;922;@STATIC;1.0;t;904;CPApp = nil;
CPApplicationWillFinishLaunchingNotification = "CPApplicationWillFinishLaunchingNotification";
CPApplicationDidFinishLaunchingNotification = "CPApplicationDidFinishLaunchingNotification";
CPApplicationWillTerminateNotification = "CPApplicationWillTerminateNotification";
CPApplicationWillBecomeActiveNotification = "CPApplicationWillBecomeActiveNotification";
CPApplicationDidBecomeActiveNotification = "CPApplicationDidBecomeActiveNotification";
CPApplicationWillResignActiveNotification = "CPApplicationWillResignActiveNotification";
CPApplicationDidResignActiveNotification = "CPApplicationDidResignActiveNotification";
CPApplicationDidChangeScreenParametersNotification = "CPApplicationDidChangeScreenParametersNotification";
CPTerminateNow = YES;
CPTerminateCancel = NO;
CPTerminateLater = -1;
CPRunStoppedResponse = -1000;
CPRunAbortedResponse = -1001;
CPRunContinuesResponse = -1002;
p;19;CPArrayController.jt;35757;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;20;CPObjectController.ji;19;CPKeyValueBinding.jt;35660;objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("CPObjectController.j", YES);objj_executeFile("CPKeyValueBinding.j", YES);{var the_class = objj_allocateClassPair(CPObjectController, "CPArrayController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_avoidsEmptySelection"), new objj_ivar("_clearsFilterPredicateOnInsertion"), new objj_ivar("_filterRestrictsInsertion"), new objj_ivar("_preservesSelection"), new objj_ivar("_selectsInsertedObjects"), new objj_ivar("_alwaysUsesMultipleValuesMarker"), new objj_ivar("_automaticallyRearrangesObjects"), new objj_ivar("_selectionIndexes"), new objj_ivar("_sortDescriptors"), new objj_ivar("_filterPredicate"), new objj_ivar("_arrangedObjects"), new objj_ivar("_disableSetContent")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPArrayController__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPArrayController").super_class }, "init");
    if (self)
    {
        self._preservesSelection = YES;
        self._selectsInsertedObjects = YES;
        self._avoidsEmptySelection = YES;
        self._clearsFilterPredicateOnInsertion = YES;
        self._alwaysUsesMultipleValuesMarker = NO;
        self._automaticallyRearrangesObjects = NO;
        self._filterRestrictsInsertion = YES;
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("_init"), function $CPArrayController___init(self, _cmd)
{
    self._sortDescriptors = objj_msgSend(CPArray, "array");
    self._filterPredicate = nil;
    self._selectionIndexes = objj_msgSend(CPIndexSet, "indexSet");
    objj_msgSend(self, "__setArrangedObjects:", objj_msgSend(CPArray, "array"));
}
,["void"]), new objj_method(sel_getUid("prepareContent"), function $CPArrayController__prepareContent(self, _cmd)
{
    objj_msgSend(self, "_setContentArray:", [objj_msgSend(self, "newObject")]);
}
,["void"]), new objj_method(sel_getUid("preservesSelection"), function $CPArrayController__preservesSelection(self, _cmd)
{
    return self._preservesSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setPreservesSelection:"), function $CPArrayController__setPreservesSelection_(self, _cmd, value)
{
    self._preservesSelection = value;
}
,["void","BOOL"]), new objj_method(sel_getUid("selectsInsertedObjects"), function $CPArrayController__selectsInsertedObjects(self, _cmd)
{
    return self._selectsInsertedObjects;
}
,["BOOL"]), new objj_method(sel_getUid("setSelectsInsertedObjects:"), function $CPArrayController__setSelectsInsertedObjects_(self, _cmd, value)
{
    self._selectsInsertedObjects = value;
}
,["void","BOOL"]), new objj_method(sel_getUid("avoidsEmptySelection"), function $CPArrayController__avoidsEmptySelection(self, _cmd)
{
    return self._avoidsEmptySelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAvoidsEmptySelection:"), function $CPArrayController__setAvoidsEmptySelection_(self, _cmd, value)
{
    self._avoidsEmptySelection = value;
}
,["void","BOOL"]), new objj_method(sel_getUid("clearsFilterPredicateOnInsertion"), function $CPArrayController__clearsFilterPredicateOnInsertion(self, _cmd)
{
    return self._clearsFilterPredicateOnInsertion;
}
,["BOOL"]), new objj_method(sel_getUid("setClearsFilterPredicateOnInsertion:"), function $CPArrayController__setClearsFilterPredicateOnInsertion_(self, _cmd, aFlag)
{
    self._clearsFilterPredicateOnInsertion = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"), function $CPArrayController__alwaysUsesMultipleValuesMarker(self, _cmd)
{
    return self._alwaysUsesMultipleValuesMarker;
}
,["BOOL"]), new objj_method(sel_getUid("setAlwaysUsesMultipleValuesMarker:"), function $CPArrayController__setAlwaysUsesMultipleValuesMarker_(self, _cmd, aFlag)
{
    self._alwaysUsesMultipleValuesMarker = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("automaticallyRearrangesObjects"), function $CPArrayController__automaticallyRearrangesObjects(self, _cmd)
{
    return self._automaticallyRearrangesObjects;
}
,["BOOL"]), new objj_method(sel_getUid("setAutomaticallyRearrangesObjects:"), function $CPArrayController__setAutomaticallyRearrangesObjects_(self, _cmd, aFlag)
{
    self._automaticallyRearrangesObjects = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("setContent:"), function $CPArrayController__setContent_(self, _cmd, value)
{
    if (self._disableSetContent)
        return;
    if (value === nil)
        value = [];
    if (!objj_msgSend(value, "isKindOfClass:", objj_msgSend(CPArray, "class")))
        value = [value];
    var oldSelectedObjects = nil,
        oldSelectionIndexes = nil;
    if (objj_msgSend(self, "preservesSelection"))
        oldSelectedObjects = objj_msgSend(self, "selectedObjects");
    else
        oldSelectionIndexes = objj_msgSend(self, "selectionIndexes");
    if (self._clearsFilterPredicateOnInsertion)
        objj_msgSend(self, "willChangeValueForKey:", "filterPredicate");
    self._contentObject = value;
    if (self._clearsFilterPredicateOnInsertion && self._filterPredicate != nil)
        objj_msgSend(self, "__setFilterPredicate:", nil);
    else
        objj_msgSend(self, "_rearrangeObjects");
    if (objj_msgSend(self, "preservesSelection"))
        objj_msgSend(self, "__setSelectedObjects:", oldSelectedObjects);
    else
        objj_msgSend(self, "__setSelectionIndexes:", oldSelectionIndexes);
    if (self._clearsFilterPredicateOnInsertion)
        objj_msgSend(self, "didChangeValueForKey:", "filterPredicate");
}
,["void","id"]), new objj_method(sel_getUid("_setContentArray:"), function $CPArrayController___setContentArray_(self, _cmd, anArray)
{
    objj_msgSend(self, "setContent:", anArray);
}
,["void","id"]), new objj_method(sel_getUid("_setContentSet:"), function $CPArrayController___setContentSet_(self, _cmd, aSet)
{
    objj_msgSend(self, "setContent:", objj_msgSend(aSet, "allObjects"));
}
,["void","id"]), new objj_method(sel_getUid("contentArray"), function $CPArrayController__contentArray(self, _cmd)
{
    return objj_msgSend(self, "content");
}
,["id"]), new objj_method(sel_getUid("contentSet"), function $CPArrayController__contentSet(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithArray:", objj_msgSend(self, "content"));
}
,["id"]), new objj_method(sel_getUid("arrangeObjects:"), function $CPArrayController__arrangeObjects_(self, _cmd, objects)
{
    var filterPredicate = objj_msgSend(self, "filterPredicate"),
        sortDescriptors = objj_msgSend(self, "sortDescriptors");
    if (filterPredicate && objj_msgSend(sortDescriptors, "count") > 0)
    {
        var sortedObjects = objj_msgSend(objects, "filteredArrayUsingPredicate:", filterPredicate);
        objj_msgSend(sortedObjects, "sortUsingDescriptors:", sortDescriptors);
        return sortedObjects;
    }
    else if (filterPredicate)
        return objj_msgSend(objects, "filteredArrayUsingPredicate:", filterPredicate);
    else if (objj_msgSend(sortDescriptors, "count") > 0)
        return objj_msgSend(objects, "sortedArrayUsingDescriptors:", sortDescriptors);
    return objj_msgSend(objects, "copy");
}
,["CPArray","CPArray"]), new objj_method(sel_getUid("rearrangeObjects"), function $CPArrayController__rearrangeObjects(self, _cmd)
{
    objj_msgSend(self, "willChangeValueForKey:", "arrangedObjects");
    objj_msgSend(self, "_rearrangeObjects");
    objj_msgSend(self, "didChangeValueForKey:", "arrangedObjects");
}
,["void"]), new objj_method(sel_getUid("_rearrangeObjects"), function $CPArrayController___rearrangeObjects(self, _cmd)
{
    var oldSelectedObjects = nil,
        oldSelectionIndexes = nil;
    if (objj_msgSend(self, "preservesSelection"))
        oldSelectedObjects = objj_msgSend(self, "selectedObjects");
    else
        oldSelectionIndexes = objj_msgSend(self, "selectionIndexes");
    objj_msgSend(self, "__setArrangedObjects:", objj_msgSend(self, "arrangeObjects:", objj_msgSend(self, "contentArray")));
    if (objj_msgSend(self, "preservesSelection"))
        objj_msgSend(self, "__setSelectedObjects:", oldSelectedObjects);
    else
        objj_msgSend(self, "__setSelectionIndexes:", oldSelectionIndexes);
}
,["void"]), new objj_method(sel_getUid("__setArrangedObjects:"), function $CPArrayController____setArrangedObjects_(self, _cmd, value)
{
    if (self._arrangedObjects === value)
        return;
    self._arrangedObjects = objj_msgSend(objj_msgSend(_CPObservableArray, "alloc"), "initWithArray:", value);
}
,["void","id"]), new objj_method(sel_getUid("arrangedObjects"), function $CPArrayController__arrangedObjects(self, _cmd)
{
    return self._arrangedObjects;
}
,["id"]), new objj_method(sel_getUid("sortDescriptors"), function $CPArrayController__sortDescriptors(self, _cmd)
{
    return self._sortDescriptors;
}
,["CPArray"]), new objj_method(sel_getUid("setSortDescriptors:"), function $CPArrayController__setSortDescriptors_(self, _cmd, value)
{
    if (self._sortDescriptors === value)
        return;
    self._sortDescriptors = objj_msgSend(value, "copy");
    objj_msgSend(self, "_rearrangeObjects");
}
,["void","CPArray"]), new objj_method(sel_getUid("filterPredicate"), function $CPArrayController__filterPredicate(self, _cmd)
{
    return self._filterPredicate;
}
,["CPPredicate"]), new objj_method(sel_getUid("setFilterPredicate:"), function $CPArrayController__setFilterPredicate_(self, _cmd, value)
{
    if (self._filterPredicate === value)
        return;
    objj_msgSend(self, "willChangeValueForKey:", "arrangedObjects");
    objj_msgSend(self, "__setFilterPredicate:", value);
    objj_msgSend(self, "didChangeValueForKey:", "arrangedObjects");
}
,["void","CPPredicate"]), new objj_method(sel_getUid("__setFilterPredicate:"), function $CPArrayController____setFilterPredicate_(self, _cmd, value)
{
    if (self._filterPredicate === value)
        return;
    self._filterPredicate = value;
    objj_msgSend(self, "_rearrangeObjects");
}
,["void","CPPredicate"]), new objj_method(sel_getUid("alwaysUsesMultipleValuesMarker"), function $CPArrayController__alwaysUsesMultipleValuesMarker(self, _cmd)
{
    return self._alwaysUsesMultipleValuesMarker;
}
,["BOOL"]), new objj_method(sel_getUid("selectionIndex"), function $CPArrayController__selectionIndex(self, _cmd)
{
    return objj_msgSend(self._selectionIndexes, "firstIndex");
}
,["unsigned"]), new objj_method(sel_getUid("setSelectionIndex:"), function $CPArrayController__setSelectionIndex_(self, _cmd, index)
{
    return objj_msgSend(self, "setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", index));
}
,["BOOL","unsigned"]), new objj_method(sel_getUid("selectionIndexes"), function $CPArrayController__selectionIndexes(self, _cmd)
{
    return self._selectionIndexes;
}
,["CPIndexSet"]), new objj_method(sel_getUid("setSelectionIndexes:"), function $CPArrayController__setSelectionIndexes_(self, _cmd, indexes)
{
    objj_msgSend(self, "_selectionWillChange");
    var r = objj_msgSend(self, "__setSelectionIndexes:avoidEmpty:", indexes, NO);
    objj_msgSend(self, "_selectionDidChange");
    return r;
}
,["BOOL","CPIndexSet"]), new objj_method(sel_getUid("__setSelectionIndex:"), function $CPArrayController____setSelectionIndex_(self, _cmd, theIndex)
{
    return objj_msgSend(self, "__setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", theIndex));
}
,["BOOL","int"]), new objj_method(sel_getUid("__setSelectionIndexes:"), function $CPArrayController____setSelectionIndexes_(self, _cmd, indexes)
{
    return objj_msgSend(self, "__setSelectionIndexes:avoidEmpty:", indexes, self._avoidsEmptySelection);
}
,["BOOL","CPIndexSet"]), new objj_method(sel_getUid("__setSelectionIndexes:avoidEmpty:"), function $CPArrayController____setSelectionIndexes_avoidEmpty_(self, _cmd, indexes, avoidEmpty)
{
    var newIndexes = indexes;
    if (!newIndexes)
        newIndexes = objj_msgSend(CPIndexSet, "indexSet");
    if (!objj_msgSend(newIndexes, "count"))
    {
        if (avoidEmpty && objj_msgSend(objj_msgSend(self, "arrangedObjects"), "count"))
            newIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", 0);
    }
    else
    {
        var objectsCount = objj_msgSend(objj_msgSend(self, "arrangedObjects"), "count");
        newIndexes = objj_msgSend(newIndexes, "copy");
        objj_msgSend(newIndexes, "removeIndexesInRange:", CPMakeRange(objectsCount, objj_msgSend(newIndexes, "lastIndex") + 1));
        if (!objj_msgSend(newIndexes, "count") && avoidEmpty && objectsCount)
            newIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", objectsCount - 1);
    }
    if (objj_msgSend(self._selectionIndexes, "isEqualToIndexSet:", newIndexes))
        return NO;
    self._selectionIndexes = indexes === newIndexes ? objj_msgSend(indexes, "copy") : newIndexes;
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "selectionIndexes");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "selectionIndexes", self), "reverseSetValueFor:", "selectionIndexes");
    return YES;
}
,["BOOL","CPIndexSet","BOOL"]), new objj_method(sel_getUid("selectedObjects"), function $CPArrayController__selectedObjects(self, _cmd)
{
    var objects = objj_msgSend(objj_msgSend(self, "arrangedObjects"), "objectsAtIndexes:", objj_msgSend(self, "selectionIndexes"));
    return objj_msgSend(_CPObservableArray, "arrayWithArray:", objects || []);
}
,["CPArray"]), new objj_method(sel_getUid("setSelectedObjects:"), function $CPArrayController__setSelectedObjects_(self, _cmd, objects)
{
    objj_msgSend(self, "willChangeValueForKey:", "selectionIndexes");
    objj_msgSend(self, "_selectionWillChange");
    var r = objj_msgSend(self, "__setSelectedObjects:avoidEmpty:", objects, NO);
    objj_msgSend(self, "didChangeValueForKey:", "selectionIndexes");
    objj_msgSend(self, "_selectionDidChange");
    return r;
}
,["BOOL","CPArray"]), new objj_method(sel_getUid("__setSelectedObjects:"), function $CPArrayController____setSelectedObjects_(self, _cmd, objects)
{
    objj_msgSend(self, "__setSelectedObjects:avoidEmpty:", objects, self._avoidsEmptySelection);
}
,["BOOL","CPArray"]), new objj_method(sel_getUid("__setSelectedObjects:avoidEmpty:"), function $CPArrayController____setSelectedObjects_avoidEmpty_(self, _cmd, objects, avoidEmpty)
{
    var set = objj_msgSend(CPIndexSet, "indexSet"),
        count = objj_msgSend(objects, "count"),
        arrangedObjects = objj_msgSend(self, "arrangedObjects");
    for (var i = 0; i < count; i++)
    {
        var index = objj_msgSend(arrangedObjects, "indexOfObject:", objj_msgSend(objects, "objectAtIndex:", i));
        if (index !== CPNotFound)
            objj_msgSend(set, "addIndex:", index);
    }
    objj_msgSend(self, "__setSelectionIndexes:avoidEmpty:", set, avoidEmpty);
    return YES;
}
,["BOOL","CPArray","BOOL"]), new objj_method(sel_getUid("canSelectPrevious"), function $CPArrayController__canSelectPrevious(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex") > 0;
}
,["BOOL"]), new objj_method(sel_getUid("selectPrevious:"), function $CPArrayController__selectPrevious_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex") - 1;
    if (index >= 0)
        objj_msgSend(self, "setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", index));
}
,["void","id"]), new objj_method(sel_getUid("canSelectNext"), function $CPArrayController__canSelectNext(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex") < objj_msgSend(objj_msgSend(self, "arrangedObjects"), "count") - 1;
}
,["BOOL"]), new objj_method(sel_getUid("selectNext:"), function $CPArrayController__selectNext_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex") + 1;
    if (index < objj_msgSend(objj_msgSend(self, "arrangedObjects"), "count"))
        objj_msgSend(self, "setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", index));
}
,["void","id"]), new objj_method(sel_getUid("addObject:"), function $CPArrayController__addObject_(self, _cmd, object)
{
    if (!objj_msgSend(self, "canAdd"))
        return;
    var willClearPredicate = NO;
    if (self._clearsFilterPredicateOnInsertion && self._filterPredicate)
    {
        objj_msgSend(self, "willChangeValueForKey:", "filterPredicate");
        willClearPredicate = YES;
    }
    objj_msgSend(self, "willChangeValueForKey:", "content");
    self._disableSetContent = YES;
    objj_msgSend(self._contentObject, "addObject:", object);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
    self._disableSetContent = NO;
    if (willClearPredicate)
    {
        self._filterPredicate = nil;
        objj_msgSend(self, "_rearrangeObjects");
    }
    else if (self._filterPredicate === nil || objj_msgSend(self._filterPredicate, "evaluateWithObject:", object))
    {
        var pos = objj_msgSend(self._arrangedObjects, "insertObject:inArraySortedByDescriptors:", object, self._sortDescriptors);
        if (self._selectsInsertedObjects)
            objj_msgSend(self, "__setSelectionIndex:", pos);
        else
            objj_msgSend(self._selectionIndexes, "shiftIndexesStartingAtIndex:by:", pos, 1);
    }
    var proxy = objj_msgSend(_CPKVOProxy, "proxyForObject:", self);
    objj_msgSend(proxy, "setAdding:", YES);
    objj_msgSend(self, "didChangeValueForKey:", "content");
    if (willClearPredicate)
        objj_msgSend(self, "didChangeValueForKey:", "filterPredicate");
    objj_msgSend(proxy, "setAdding:", NO);
}
,["void","id"]), new objj_method(sel_getUid("insertObject:atArrangedObjectIndex:"), function $CPArrayController__insertObject_atArrangedObjectIndex_(self, _cmd, anObject, anIndex)
{
    if (!objj_msgSend(self, "canAdd"))
        return;
    var willClearPredicate = NO;
    if (self._clearsFilterPredicateOnInsertion && self._filterPredicate)
    {
        objj_msgSend(self, "willChangeValueForKey:", "filterPredicate");
        willClearPredicate = YES;
    }
    objj_msgSend(self, "willChangeValueForKey:", "content");
    self._disableSetContent = YES;
    objj_msgSend(self._contentObject, "addObject:", anObject);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
    self._disableSetContent = NO;
    if (willClearPredicate)
        objj_msgSend(self, "__setFilterPredicate:", nil);
    objj_msgSend(objj_msgSend(self, "arrangedObjects"), "insertObject:atIndex:", anObject, anIndex);
    if (objj_msgSend(self, "selectsInsertedObjects"))
        objj_msgSend(self, "__setSelectionIndex:", anIndex);
    else
        objj_msgSend(objj_msgSend(self, "selectionIndexes"), "shiftIndexesStartingAtIndex:by:", anIndex, 1);
    if (objj_msgSend(self, "avoidsEmptySelection") && objj_msgSend(objj_msgSend(self, "selectionIndexes"), "count") <= 0 && objj_msgSend(self._contentObject, "count") > 0)
        objj_msgSend(self, "__setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", 0));
    var proxy = objj_msgSend(_CPKVOProxy, "proxyForObject:", self);
    objj_msgSend(proxy, "setAdding:", YES);
    objj_msgSend(self, "didChangeValueForKey:", "content");
    if (willClearPredicate)
        objj_msgSend(self, "didChangeValueForKey:", "filterPredicate");
    objj_msgSend(proxy, "setAdding:", NO);
}
,["void","id","int"]), new objj_method(sel_getUid("removeObject:"), function $CPArrayController__removeObject_(self, _cmd, object)
{
    objj_msgSend(self, "willChangeValueForKey:", "content");
    self._disableSetContent = YES;
    objj_msgSend(self._contentObject, "removeObject:", object);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
    self._disableSetContent = NO;
    if (self._filterPredicate === nil || objj_msgSend(self._filterPredicate, "evaluateWithObject:", object))
    {
        var pos = objj_msgSend(self._arrangedObjects, "indexOfObject:", object);
        objj_msgSend(self._arrangedObjects, "removeObjectAtIndex:", pos);
        objj_msgSend(self._selectionIndexes, "shiftIndexesStartingAtIndex:by:", pos, -1);
        objj_msgSend(self, "__setSelectionIndexes:", self._selectionIndexes);
    }
    objj_msgSend(self, "didChangeValueForKey:", "content");
}
,["void","id"]), new objj_method(sel_getUid("add:"), function $CPArrayController__add_(self, _cmd, sender)
{
    if (!objj_msgSend(self, "canAdd"))
        return;
    var newObject = objj_msgSend(self, "automaticallyPreparesContent") ? objj_msgSend(self, "newObject") : objj_msgSend(self, "_defaultNewObject");
    objj_msgSend(self, "addObject:", newObject);
}
,["void","id"]), new objj_method(sel_getUid("insert:"), function $CPArrayController__insert_(self, _cmd, sender)
{
    if (!objj_msgSend(self, "canInsert"))
        return;
    var newObject = objj_msgSend(self, "automaticallyPreparesContent") ? objj_msgSend(self, "newObject") : objj_msgSend(self, "_defaultNewObject"),
        lastSelectedIndex = objj_msgSend(self._selectionIndexes, "lastIndex");
    if (lastSelectedIndex !== CPNotFound)
        objj_msgSend(self, "insertObject:atArrangedObjectIndex:", newObject, lastSelectedIndex);
    else
        objj_msgSend(self, "addObject:", newObject);
}
,["void","id"]), new objj_method(sel_getUid("remove:"), function $CPArrayController__remove_(self, _cmd, sender)
{
    objj_msgSend(self, "removeObjectsAtArrangedObjectIndexes:", self._selectionIndexes);
}
,["void","id"]), new objj_method(sel_getUid("removeObjectAtArrangedObjectIndex:"), function $CPArrayController__removeObjectAtArrangedObjectIndex_(self, _cmd, index)
{
    objj_msgSend(self, "removeObjectsAtArrangedObjectIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", index));
}
,["void","int"]), new objj_method(sel_getUid("removeObjectsAtArrangedObjectIndexes:"), function $CPArrayController__removeObjectsAtArrangedObjectIndexes_(self, _cmd, anIndexSet)
{
    objj_msgSend(self, "willChangeValueForKey:", "content");
    self._disableSetContent = YES;
    var arrangedObjects = objj_msgSend(self, "arrangedObjects"),
        position = CPNotFound,
        newSelectionIndexes = objj_msgSend(self._selectionIndexes, "copy");
    objj_msgSend(anIndexSet, "enumerateIndexesWithOptions:usingBlock:", CPEnumerationReverse, function(anIndex)
    {
        var object = objj_msgSend(arrangedObjects, "objectAtIndex:", anIndex);
        if (objj_msgSend(self._contentObject, "objectAtIndex:", anIndex) === object)
            objj_msgSend(self._contentObject, "removeObjectAtIndex:", anIndex);
        else
        {
            var contentIndex = objj_msgSend(self._contentObject, "indexOfObjectIdenticalTo:", object);
            objj_msgSend(self._contentObject, "removeObjectAtIndex:", contentIndex);
        }
        objj_msgSend(arrangedObjects, "removeObjectAtIndex:", anIndex);
        if (!self._avoidsEmptySelection || objj_msgSend(newSelectionIndexes, "count") > 1)
        {
            objj_msgSend(newSelectionIndexes, "removeIndex:", anIndex);
            objj_msgSend(newSelectionIndexes, "shiftIndexesStartingAtIndex:by:", anIndex, -1);
        }
        else if (objj_msgSend(newSelectionIndexes, "lastIndex") !== anIndex)
            objj_msgSend(newSelectionIndexes, "shiftIndexesStartingAtIndex:by:", anIndex, -1);
    });
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
    self._disableSetContent = NO;
    objj_msgSend(self, "__setSelectionIndexes:", newSelectionIndexes);
    objj_msgSend(self, "didChangeValueForKey:", "content");
}
,["void","CPIndexSet"]), new objj_method(sel_getUid("addObjects:"), function $CPArrayController__addObjects_(self, _cmd, objects)
{
    if (!objj_msgSend(self, "canAdd"))
        return;
    var contentArray = objj_msgSend(self, "contentArray"),
        count = objj_msgSend(objects, "count");
    for (var i = 0; i < count; i++)
        objj_msgSend(contentArray, "addObject:", objj_msgSend(objects, "objectAtIndex:", i));
    objj_msgSend(self, "setContent:", contentArray);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
}
,["void","CPArray"]), new objj_method(sel_getUid("removeObjects:"), function $CPArrayController__removeObjects_(self, _cmd, objects)
{
    objj_msgSend(self, "_removeObjects:", objects);
}
,["void","CPArray"]), new objj_method(sel_getUid("_removeObjects:"), function $CPArrayController___removeObjects_(self, _cmd, objects)
{
    objj_msgSend(self, "willChangeValueForKey:", "content");
    self._disableSetContent = YES;
    objj_msgSend(self._contentObject, "removeObjectsInArray:", objects);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self), "_contentArrayDidChange");
    self._disableSetContent = NO;
    var arrangedObjects = objj_msgSend(self, "arrangedObjects"),
        position = objj_msgSend(arrangedObjects, "indexOfObject:", objj_msgSend(objects, "objectAtIndex:", 0));
    objj_msgSend(arrangedObjects, "removeObjectsInArray:", objects);
    var objectsCount = objj_msgSend(arrangedObjects, "count"),
        selectionIndexes = objj_msgSend(CPIndexSet, "indexSet");
    if (objj_msgSend(self, "preservesSelection") || objj_msgSend(self, "avoidsEmptySelection"))
    {
        selectionIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", position);
        if (objectsCount <= 0)
            selectionIndexes = objj_msgSend(CPIndexSet, "indexSet");
        else if (position >= objectsCount)
            selectionIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", objectsCount - 1);
    }
    self._selectionIndexes = selectionIndexes;
    objj_msgSend(self, "didChangeValueForKey:", "content");
}
,["void","CPArray"]), new objj_method(sel_getUid("canInsert"), function $CPArrayController__canInsert(self, _cmd)
{
    return objj_msgSend(self, "isEditable");
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPArrayController__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPArrayController, "class"))
        return;
    objj_msgSend(self, "exposeBinding:", "contentArray");
    objj_msgSend(self, "exposeBinding:", "contentSet");
}
,["void"]), new objj_method(sel_getUid("keyPathsForValuesAffectingContentArray"), function $CPArrayController__keyPathsForValuesAffectingContentArray(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "content");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingArrangedObjects"), function $CPArrayController__keyPathsForValuesAffectingArrangedObjects(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "content", "sortDescriptors");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelection"), function $CPArrayController__keyPathsForValuesAffectingSelection(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndex"), function $CPArrayController__keyPathsForValuesAffectingSelectionIndex(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectionIndexes"), function $CPArrayController__keyPathsForValuesAffectingSelectionIndexes(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "arrangedObjects");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedObjects"), function $CPArrayController__keyPathsForValuesAffectingSelectedObjects(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"), function $CPArrayController__keyPathsForValuesAffectingCanRemove(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectNext"), function $CPArrayController__keyPathsForValuesAffectingCanSelectNext(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanSelectPrevious"), function $CPArrayController__keyPathsForValuesAffectingCanSelectPrevious(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "selectionIndexes");
}
,["CPSet"])]);
}{
var the_class = objj_getClass("CPArrayController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPArrayController___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == "contentArray")
        return objj_msgSend(_CPArrayControllerContentBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPArrayController").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPArrayControllerContentBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPArrayControllerContentBinder__setValueFor_(self, _cmd, aBinding)
{
    var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey),
        options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        isCompound = objj_msgSend(self, "handlesContentAsCompoundValue"),
        dotIndex = keyPath.lastIndexOf("."),
        firstPart = dotIndex !== CPNotFound ? keyPath.substring(0, dotIndex) : nil,
        isSelectionProxy = firstPart && objj_msgSend(objj_msgSend(destination, "valueForKeyPath:", firstPart), "isKindOfClass:", CPControllerSelectionProxy),
        newValue;
    if (!isCompound && !isSelectionProxy)
    {
        newValue = objj_msgSend(destination, "mutableArrayValueForKeyPath:", keyPath);
    }
    else
    {
        newValue = objj_msgSend(destination, "valueForKeyPath:", keyPath);
    }
    var isPlaceholder = CPIsControllerMarker(newValue);
    if (isPlaceholder)
    {
        if (newValue === CPNotApplicableMarker && objj_msgSend(options, "objectForKey:", CPRaisesForNotApplicableKeysBindingOption))
        {
            objj_msgSend(CPException, "raise:reason:", CPGenericException, "can't transform non applicable key on: " + self._source + " value: " + newValue);
        }
        newValue = objj_msgSend(self, "_placeholderForMarker:", newValue);
        if (!newValue)
            newValue = objj_msgSend(CPMutableArray, "array");
    }
    else
        newValue = objj_msgSend(self, "transformValue:withOptions:", newValue, options);
    if (isCompound)
    {
        newValue = objj_msgSend(newValue, "mutableCopy");
    }
    objj_msgSend(self._source, "setValue:forKey:", newValue, aBinding);
}
,["void","CPString"]), new objj_method(sel_getUid("_contentArrayDidChange"), function $_CPArrayControllerContentBinder___contentArrayDidChange(self, _cmd)
{
    if (objj_msgSend(self, "handlesContentAsCompoundValue"))
    {
        var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey);
        objj_msgSend(self, "suppressSpecificNotificationFromObject:keyPath:", destination, keyPath);
        objj_msgSend(self, "reverseSetValueFor:", "contentArray");
        objj_msgSend(self, "unsuppressSpecificNotificationFromObject:keyPath:", destination, keyPath);
    }
}
,["void"])]);
}var CPArrayControllerAvoidsEmptySelection = "CPArrayControllerAvoidsEmptySelection",
    CPArrayControllerClearsFilterPredicateOnInsertion = "CPArrayControllerClearsFilterPredicateOnInsertion",
    CPArrayControllerFilterRestrictsInsertion = "CPArrayControllerFilterRestrictsInsertion",
    CPArrayControllerPreservesSelection = "CPArrayControllerPreservesSelection",
    CPArrayControllerSelectsInsertedObjects = "CPArrayControllerSelectsInsertedObjects",
    CPArrayControllerAlwaysUsesMultipleValuesMarker = "CPArrayControllerAlwaysUsesMultipleValuesMarker",
    CPArrayControllerAutomaticallyRearrangesObjects = "CPArrayControllerAutomaticallyRearrangesObjects";
{
var the_class = objj_getClass("CPArrayController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPArrayController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPArrayController__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPArrayController").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._avoidsEmptySelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerAvoidsEmptySelection);
        self._clearsFilterPredicateOnInsertion = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerClearsFilterPredicateOnInsertion);
        self._filterRestrictsInsertion = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerFilterRestrictsInsertion);
        self._preservesSelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerPreservesSelection);
        self._selectsInsertedObjects = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerSelectsInsertedObjects);
        self._alwaysUsesMultipleValuesMarker = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerAlwaysUsesMultipleValuesMarker);
        self._automaticallyRearrangesObjects = objj_msgSend(aCoder, "decodeBoolForKey:", CPArrayControllerAutomaticallyRearrangesObjects);
        self._sortDescriptors = objj_msgSend(CPArray, "array");
        if (!objj_msgSend(self, "content") && objj_msgSend(self, "automaticallyPreparesContent"))
            objj_msgSend(self, "prepareContent");
        else if (!objj_msgSend(self, "content"))
            objj_msgSend(self, "_setContentArray:", []);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPArrayController__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPArrayController").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._avoidsEmptySelection, CPArrayControllerAvoidsEmptySelection);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._clearsFilterPredicateOnInsertion, CPArrayControllerClearsFilterPredicateOnInsertion);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._filterRestrictsInsertion, CPArrayControllerFilterRestrictsInsertion);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._preservesSelection, CPArrayControllerPreservesSelection);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._selectsInsertedObjects, CPArrayControllerSelectsInsertedObjects);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._alwaysUsesMultipleValuesMarker, CPArrayControllerAlwaysUsesMultipleValuesMarker);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._automaticallyRearrangesObjects, CPArrayControllerAutomaticallyRearrangesObjects);
}
,["void","CPCoder"]), new objj_method(sel_getUid("awakeFromCib"), function $CPArrayController__awakeFromCib(self, _cmd)
{
    objj_msgSend(self, "_selectionWillChange");
    objj_msgSend(self, "_selectionDidChange");
}
,["void"])]);
}p;14;CPBezierPath.jt;9273;@STATIC;1.0;I;21;Foundation/CPObject.ji;19;CPGraphicsContext.jt;9204;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPGraphicsContext.j", YES);var DefaultLineWidth = 1.0;
{var the_class = objj_allocateClassPair(CPObject, "CPBezierPath"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_path"), new objj_ivar("_lineWidth"), new objj_ivar("_lineDashes"), new objj_ivar("_lineDashesPhase")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPBezierPath__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBezierPath").super_class }, "init"))
    {
        self._path = CGPathCreateMutable();
        self._lineWidth = objj_msgSend(objj_msgSend(self, "class"), "defaultLineWidth");
        self._lineDashesPhase = 0;
        self._lineDashes = [];
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("moveToPoint:"), function $CPBezierPath__moveToPoint_(self, _cmd, point)
{
    CGPathMoveToPoint(self._path, nil, point.x, point.y);
}
,["void","CGPoint"]), new objj_method(sel_getUid("lineToPoint:"), function $CPBezierPath__lineToPoint_(self, _cmd, point)
{
    CGPathAddLineToPoint(self._path, nil, point.x, point.y);
}
,["void","CGPoint"]), new objj_method(sel_getUid("curveToPoint:controlPoint1:controlPoint2:"), function $CPBezierPath__curveToPoint_controlPoint1_controlPoint2_(self, _cmd, endPoint, controlPoint1, controlPoint2)
{
    CGPathAddCurveToPoint(self._path, nil, controlPoint1.x, controlPoint1.y, controlPoint2.x, controlPoint2.y, endPoint.x, endPoint.y);
}
,["void","CGPoint","CGPoint","CGPoint"]), new objj_method(sel_getUid("bounds"), function $CPBezierPath__bounds(self, _cmd)
{
    return objj_msgSend(self, "controlPointBounds");
}
,["CGRect"]), new objj_method(sel_getUid("controlPointBounds"), function $CPBezierPath__controlPointBounds(self, _cmd)
{
    return CGPathGetBoundingBox(self._path);
}
,["CGRect"]), new objj_method(sel_getUid("closePath"), function $CPBezierPath__closePath(self, _cmd)
{
    CGPathCloseSubpath(self._path);
}
,["void"]), new objj_method(sel_getUid("stroke"), function $CPBezierPath__stroke(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, self._path);
    CGContextSetLineWidth(ctx, objj_msgSend(self, "lineWidth"));
    CGContextSetLineDash(ctx, self._lineDashesPhase, self._lineDashes);
    CGContextStrokePath(ctx);
}
,["void"]), new objj_method(sel_getUid("fill"), function $CPBezierPath__fill(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, self._path);
    CGContextSetLineWidth(ctx, objj_msgSend(self, "lineWidth"));
    CGContextSetLineDash(ctx, self._lineDashesPhase, self._lineDashes);
    CGContextClosePath(ctx);
    CGContextFillPath(ctx);
}
,["void"]), new objj_method(sel_getUid("getLineDash:count:phase:"), function $CPBezierPath__getLineDash_count_phase_(self, _cmd, patternRef, count, phaseRef)
{
    return objj_msgSend(self, "getLineDash:phase:", patternRef, phaseRef);
}
,["void","CPArrayRef","NSInteger","CGFloatRef"]), new objj_method(sel_getUid("getLineDash:phase:"), function $CPBezierPath__getLineDash_phase_(self, _cmd, patternRef, phaseRef)
{
    if (patternRef)
        (patternRef)(objj_msgSend(self._lineDashes, "copy"));
    if (phaseRef)
        (phaseRef)(self._lineDashesPhase);
}
,["void","CPArrayRef","CGFloatRef"]), new objj_method(sel_getUid("setLineDash:count:phase:"), function $CPBezierPath__setLineDash_count_phase_(self, _cmd, aPattern, count, aPhase)
{
    objj_msgSend(self, "setLineDash:phase:", aPattern, aPhase);
}
,["void","CPArray","NSInteger","CGFloat"]), new objj_method(sel_getUid("setLineDash:phase:"), function $CPBezierPath__setLineDash_phase_(self, _cmd, aPattern, aPhase)
{
    self._lineDashes = aPattern;
    self._lineDashesPhase = aPhase;
}
,["void","CPArray","CGFloat"]), new objj_method(sel_getUid("lineWidth"), function $CPBezierPath__lineWidth(self, _cmd)
{
    return self._lineWidth;
}
,["float"]), new objj_method(sel_getUid("setLineWidth:"), function $CPBezierPath__setLineWidth_(self, _cmd, lineWidth)
{
    self._lineWidth = lineWidth;
}
,["void","float"]), new objj_method(sel_getUid("elementCount"), function $CPBezierPath__elementCount(self, _cmd)
{
    return self._path.count;
}
,["unsigned"]), new objj_method(sel_getUid("isEmpty"), function $CPBezierPath__isEmpty(self, _cmd)
{
    return CGPathIsEmpty(self._path);
}
,["BOOL"]), new objj_method(sel_getUid("currentPoint"), function $CPBezierPath__currentPoint(self, _cmd)
{
    return CGPathGetCurrentPoint(self._path);
}
,["CGPoint"]), new objj_method(sel_getUid("appendBezierPathWithPoints:count:"), function $CPBezierPath__appendBezierPathWithPoints_count_(self, _cmd, points, count)
{
    CGPathAddLines(self._path, nil, points, count);
}
,["void","CPArray","unsigned"]), new objj_method(sel_getUid("appendBezierPathWithRect:"), function $CPBezierPath__appendBezierPathWithRect_(self, _cmd, rect)
{
    CGPathAddRect(self._path, nil, rect);
}
,["void","CGRect"]), new objj_method(sel_getUid("appendBezierPathWithOvalInRect:"), function $CPBezierPath__appendBezierPathWithOvalInRect_(self, _cmd, rect)
{
    CGPathAddPath(self._path, nil, CGPathWithEllipseInRect(rect));
}
,["void","CGRect"]), new objj_method(sel_getUid("appendBezierPathWithRoundedRect:xRadius:yRadius:"), function $CPBezierPath__appendBezierPathWithRoundedRect_xRadius_yRadius_(self, _cmd, rect, xRadius, yRadius)
{
    CGPathAddPath(self._path, nil, CGPathWithRoundedRectangleInRect(rect, xRadius, yRadius, YES, YES, YES, YES));
}
,["void","CGRect","float","float"]), new objj_method(sel_getUid("appendBezierPathWithArcFromPoint:toPoint:radius:"), function $CPBezierPath__appendBezierPathWithArcFromPoint_toPoint_radius_(self, _cmd, fromPoint, toPoint, radius)
{
    CGPathAddArcToPoint(self._path, null, fromPoint.x, fromPoint.y, toPoint.x, toPoint.y, radius);
}
,["void","CGPoint","CGPoint","float"]), new objj_method(sel_getUid("appendBezierPath:"), function $CPBezierPath__appendBezierPath_(self, _cmd, other)
{
    CGPathAddPath(self._path, nil, other._path);
}
,["void","CPBezierPath"]), new objj_method(sel_getUid("removeAllPoints"), function $CPBezierPath__removeAllPoints(self, _cmd)
{
    self._path = CGPathCreateMutable();
}
,["void"]), new objj_method(sel_getUid("addClip"), function $CPBezierPath__addClip(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextAddPath(ctx, self._path);
    CGContextClip(ctx);
}
,["void"]), new objj_method(sel_getUid("setClip"), function $CPBezierPath__setClip(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, self._path);
    CGContextClip(ctx);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("bezierPath"), function $CPBezierPath__bezierPath(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "init");
}
,["CPBezierPath"]), new objj_method(sel_getUid("bezierPathWithOvalInRect:"), function $CPBezierPath__bezierPathWithOvalInRect_(self, _cmd, aRect)
{
    var path = objj_msgSend(self, "bezierPath");
    objj_msgSend(path, "appendBezierPathWithOvalInRect:", aRect);
    return path;
}
,["CPBezierPath","CGRect"]), new objj_method(sel_getUid("bezierPathWithRect:"), function $CPBezierPath__bezierPathWithRect_(self, _cmd, aRect)
{
    var path = objj_msgSend(self, "bezierPath");
    objj_msgSend(path, "appendBezierPathWithRect:", aRect);
    return path;
}
,["CPBezierPath","CGRect"]), new objj_method(sel_getUid("bezierPathWithRoundedRect:xRadius:yRadius:"), function $CPBezierPath__bezierPathWithRoundedRect_xRadius_yRadius_(self, _cmd, aRect, xRadius, yRadius)
{
    var path = objj_msgSend(self, "bezierPath");
    objj_msgSend(path, "appendBezierPathWithRoundedRect:xRadius:yRadius:", aRect, xRadius, yRadius);
    return path;
}
,["CPBezierPath","CGRect","float","float"]), new objj_method(sel_getUid("defaultLineWidth"), function $CPBezierPath__defaultLineWidth(self, _cmd)
{
    return DefaultLineWidth;
}
,["float"]), new objj_method(sel_getUid("setDefaultLineWidth:"), function $CPBezierPath__setDefaultLineWidth_(self, _cmd, width)
{
    DefaultLineWidth = width;
}
,["void","float"]), new objj_method(sel_getUid("fillRect:"), function $CPBezierPath__fillRect_(self, _cmd, aRect)
{
    objj_msgSend(objj_msgSend(self, "bezierPathWithRect:", aRect), "fill");
}
,["void","CGRect"]), new objj_method(sel_getUid("strokeRect:"), function $CPBezierPath__strokeRect_(self, _cmd, aRect)
{
    objj_msgSend(objj_msgSend(self, "bezierPathWithRect:", aRect), "stroke");
}
,["void","CGRect"]), new objj_method(sel_getUid("strokeLineFromPoint:toPoint:"), function $CPBezierPath__strokeLineFromPoint_toPoint_(self, _cmd, point1, point2)
{
    var path = objj_msgSend(self, "bezierPath");
    objj_msgSend(path, "moveToPoint:", point1);
    objj_msgSend(path, "lineToPoint:", point2);
    objj_msgSend(path, "stroke");
}
,["void","CGPoint","CGPoint"])]);
}p;7;CPBox.jt;20506;@STATIC;1.0;i;13;CPTextField.ji;8;CPView.jt;20456;objj_executeFile("CPTextField.j", YES);objj_executeFile("CPView.j", YES);CPBoxPrimary = 0;
CPBoxSecondary = 1;
CPBoxSeparator = 2;
CPBoxOldStyle = 3;
CPBoxCustom = 4;
CPNoBorder = 0;
CPLineBorder = 1;
CPBezelBorder = 2;
CPGrooveBorder = 3;
CPNoTitle = 0;
CPAboveTop = 1;
CPAtTop = 2;
CPBelowTop = 3;
CPAboveBottom = 4;
CPAtBottom = 5;
CPBelowBottom = 6;
{var the_class = objj_allocateClassPair(CPView, "CPBox"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_boxType"), new objj_ivar("_borderType"), new objj_ivar("_contentView"), new objj_ivar("_title"), new objj_ivar("_titlePosition"), new objj_ivar("_titleView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("title"), function $CPBox__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("_setTitle:"), function $CPBox___setTitle_(self, _cmd, newValue)
{
    self._title = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("titlePosition"), function $CPBox__titlePosition(self, _cmd)
{
    return self._titlePosition;
}
,["int"]), new objj_method(sel_getUid("_setTitlePosition:"), function $CPBox___setTitlePosition_(self, _cmd, newValue)
{
    self._titlePosition = newValue;
}
,["void","int"]), new objj_method(sel_getUid("initWithFrame:"), function $CPBox__initWithFrame_(self, _cmd, frameRect)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBox").super_class }, "initWithFrame:", frameRect);
    if (self)
    {
        self._borderType = CPBezelBorder;
        self._titlePosition = CPNoTitle;
        self._titleView = objj_msgSend(CPTextField, "labelWithTitle:", "");
        self._contentView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
        objj_msgSend(self._contentView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self, "setAutoresizesSubviews:", YES);
        objj_msgSend(self, "addSubview:", self._contentView);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("borderRect"), function $CPBox__borderRect(self, _cmd)
{
    return objj_msgSend(self, "bounds");
}
,["CGRect"]), new objj_method(sel_getUid("borderType"), function $CPBox__borderType(self, _cmd)
{
    return self._borderType;
}
,["CPBorderType"]), new objj_method(sel_getUid("setBorderType:"), function $CPBox__setBorderType_(self, _cmd, aBorderType)
{
    if (self._borderType === aBorderType)
        return;
    self._borderType = aBorderType;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPBorderType"]), new objj_method(sel_getUid("boxType"), function $CPBox__boxType(self, _cmd)
{
    return self._boxType;
}
,["CPBoxType"]), new objj_method(sel_getUid("setBoxType:"), function $CPBox__setBoxType_(self, _cmd, aBoxType)
{
    if (self._boxType === aBoxType)
        return;
    self._boxType = aBoxType;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPBoxType"]), new objj_method(sel_getUid("borderColor"), function $CPBox__borderColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "border-color");
}
,["CPColor"]), new objj_method(sel_getUid("setBorderColor:"), function $CPBox__setBorderColor_(self, _cmd, color)
{
    if (objj_msgSend(color, "isEqual:", objj_msgSend(self, "borderColor")))
        return;
    objj_msgSend(self, "setValue:forThemeAttribute:", color, "border-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("borderWidth"), function $CPBox__borderWidth(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "border-width");
}
,["float"]), new objj_method(sel_getUid("setBorderWidth:"), function $CPBox__setBorderWidth_(self, _cmd, width)
{
    if (width === objj_msgSend(self, "borderWidth"))
        return;
    objj_msgSend(self, "setValue:forThemeAttribute:", width, "border-width");
}
,["void","float"]), new objj_method(sel_getUid("cornerRadius"), function $CPBox__cornerRadius(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "corner-radius");
}
,["float"]), new objj_method(sel_getUid("setCornerRadius:"), function $CPBox__setCornerRadius_(self, _cmd, radius)
{
    if (radius === objj_msgSend(self, "cornerRadius"))
        return;
    objj_msgSend(self, "setValue:forThemeAttribute:", radius, "corner-radius");
}
,["void","float"]), new objj_method(sel_getUid("fillColor"), function $CPBox__fillColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "background-color");
}
,["CPColor"]), new objj_method(sel_getUid("setFillColor:"), function $CPBox__setFillColor_(self, _cmd, color)
{
    if (objj_msgSend(color, "isEqual:", objj_msgSend(self, "fillColor")))
        return;
    objj_msgSend(self, "setValue:forThemeAttribute:", color, "background-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("contentView"), function $CPBox__contentView(self, _cmd)
{
    return self._contentView;
}
,["CPView"]), new objj_method(sel_getUid("setContentView:"), function $CPBox__setContentView_(self, _cmd, aView)
{
    if (aView === self._contentView)
        return;
    var borderWidth = objj_msgSend(self, "borderWidth"),
        contentMargin = objj_msgSend(self, "valueForThemeAttribute:", "content-margin");
    objj_msgSend(aView, "setFrame:", CGRectInset(objj_msgSend(self, "bounds"), contentMargin.width + borderWidth, contentMargin.height + borderWidth));
    objj_msgSend(aView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    if (!aView)
        objj_msgSend(self._contentView, "removeFromSuperview");
    else if (self._contentView)
        objj_msgSend(self, "replaceSubview:with:", self._contentView, aView);
    else
        objj_msgSend(self, "addSubview:", aView);
    self._contentView = aView;
}
,["void","CPView"]), new objj_method(sel_getUid("contentViewMargins"), function $CPBox__contentViewMargins(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "content-margin");
}
,["CGSize"]), new objj_method(sel_getUid("setContentViewMargins:"), function $CPBox__setContentViewMargins_(self, _cmd, size)
{
    if (size.width < 0 || size.height < 0)
        objj_msgSend(CPException, "raise:reason:", CPGenericException, "Margins must be positive");
    objj_msgSend(self, "setValue:forThemeAttribute:", CGSizeMakeCopy(size), "content-margin");
}
,["void","CGSize"]), new objj_method(sel_getUid("setFrameFromContentFrame:"), function $CPBox__setFrameFromContentFrame_(self, _cmd, aRect)
{
    var offset = objj_msgSend(self, "_titleHeightOffset"),
        borderWidth = objj_msgSend(self, "borderWidth"),
        contentMargin = objj_msgSend(self, "valueForThemeAttribute:", "content-margin");
    objj_msgSend(self, "setFrame:", CGRectInset(aRect, -(contentMargin.width + borderWidth), -(contentMargin.height + offset[0] + borderWidth)));
}
,["void","CGRect"]), new objj_method(sel_getUid("setTitle:"), function $CPBox__setTitle_(self, _cmd, aTitle)
{
    if (aTitle == self._title)
        return;
    self._title = aTitle;
    objj_msgSend(self, "_manageTitlePositioning");
}
,["void","CPString"]), new objj_method(sel_getUid("setTitlePosition:"), function $CPBox__setTitlePosition_(self, _cmd, aTitlePotisition)
{
    if (aTitlePotisition == self._titlePosition)
        return;
    self._titlePosition = aTitlePotisition;
    objj_msgSend(self, "_manageTitlePositioning");
}
,["void","int"]), new objj_method(sel_getUid("titleFont"), function $CPBox__titleFont(self, _cmd)
{
    return objj_msgSend(self._titleView, "font");
}
,["CPFont"]), new objj_method(sel_getUid("setTitleFont:"), function $CPBox__setTitleFont_(self, _cmd, aFont)
{
    objj_msgSend(self._titleView, "setFont:", aFont);
}
,["void","CPFont"]), new objj_method(sel_getUid("titleView"), function $CPBox__titleView(self, _cmd)
{
    return self._titleView;
}
,["CPTextField"]), new objj_method(sel_getUid("_manageTitlePositioning"), function $CPBox___manageTitlePositioning(self, _cmd)
{
    if (self._titlePosition == CPNoTitle)
    {
        objj_msgSend(self._titleView, "removeFromSuperview");
        objj_msgSend(self, "setNeedsDisplay:", YES);
        return;
    }
    objj_msgSend(self._titleView, "setStringValue:", self._title);
    objj_msgSend(self._titleView, "sizeToFit");
    objj_msgSend(self, "addSubview:", self._titleView);
    switch(self._titlePosition) {
    case CPAtTop:
    case CPAboveTop:
    case CPBelowTop:
        objj_msgSend(self._titleView, "setFrameOrigin:", CGPointMake(5.0, 0.0));
        objj_msgSend(self._titleView, "setAutoresizingMask:", CPViewNotSizable);
        break;
    case CPAboveBottom:
    case CPAtBottom:
    case CPBelowBottom:
        var h = objj_msgSend(self._titleView, "frameSize").height;
        objj_msgSend(self._titleView, "setFrameOrigin:", CGPointMake(5.0, objj_msgSend(self, "frameSize").height - h));
        objj_msgSend(self._titleView, "setAutoresizingMask:", CPViewMinYMargin);
        break;
    }
    objj_msgSend(self, "sizeToFit");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("sizeToFit"), function $CPBox__sizeToFit(self, _cmd)
{
    var contentFrame = objj_msgSend(self._contentView, "frame"),
        offset = objj_msgSend(self, "_titleHeightOffset"),
        contentMargin = objj_msgSend(self, "valueForThemeAttribute:", "content-margin");
    if (!contentFrame)
        return;
    objj_msgSend(self._contentView, "setFrameOrigin:", CGPointMake(contentMargin.width, contentMargin.height + offset[1]));
}
,["void"]), new objj_method(sel_getUid("_titleHeightOffset"), function $CPBox___titleHeightOffset(self, _cmd)
{
    if (self._titlePosition == CPNoTitle)
        return [0.0, 0.0];
    switch(self._titlePosition) {
    case CPAtTop:
        return [objj_msgSend(self._titleView, "frameSize").height, objj_msgSend(self._titleView, "frameSize").height];
    case CPAtBottom:
        return [objj_msgSend(self._titleView, "frameSize").height, 0.0];
default:
        return [0.0, 0.0];
    }
}
,["float"]), new objj_method(sel_getUid("setValue:forKey:"), function $CPBox__setValue_forKey_(self, _cmd, aValue, aKey)
{
    if (aKey === CPDisplayPatternTitleBinding)
        objj_msgSend(self, "setTitle:", aValue || "");
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBox").super_class }, "setValue:forKey:", aValue, aKey);
}
,["void","id","CPString"]), new objj_method(sel_getUid("drawRect:"), function $CPBox__drawRect_(self, _cmd, rect)
{
    var bounds = objj_msgSend(self, "bounds");
    switch(self._boxType) {
    case CPBoxSeparator:
        if (CGRectGetWidth(bounds) === 5.0)
            return objj_msgSend(self, "_drawVerticalSeparatorInRect:", bounds);
        else if (CGRectGetHeight(bounds) === 5.0)
            return objj_msgSend(self, "_drawHorizontalSeparatorInRect:", bounds);
        break;
    }
    if (self._titlePosition == CPAtTop)
    {
        bounds.origin.y += objj_msgSend(self._titleView, "frameSize").height;
        bounds.size.height -= objj_msgSend(self._titleView, "frameSize").height;
    }
    if (self._titlePosition == CPAtBottom)
    {
        bounds.size.height -= objj_msgSend(self._titleView, "frameSize").height;
    }
    if ((self._boxType === CPBoxPrimary || self._boxType === CPBoxSecondary) && self._borderType !== CPNoBorder)
    {
        objj_msgSend(self, "_drawPrimaryBorderInRect:", bounds);
        return;
    }
    switch(self._borderType) {
    case CPBezelBorder:
        objj_msgSend(self, "_drawBezelBorderInRect:", bounds);
        break;
    case CPGrooveBorder:
    case CPLineBorder:
        objj_msgSend(self, "_drawLineBorderInRect:", bounds);
        break;
    case CPNoBorder:
        objj_msgSend(self, "_drawNoBorderInRect:", bounds);
        break;
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawHorizontalSeparatorInRect:"), function $CPBox___drawHorizontalSeparatorInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetStrokeColor(context, objj_msgSend(self, "borderColor"));
    CGContextSetLineWidth(context, 1.0);
    CGContextMoveToPoint(context, CGRectGetMinX(aRect), CGRectGetMidY(aRect));
    CGContextAddLineToPoint(context, CGRectGetWidth(aRect), CGRectGetMidY(aRect));
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawVerticalSeparatorInRect:"), function $CPBox___drawVerticalSeparatorInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetStrokeColor(context, objj_msgSend(self, "borderColor"));
    CGContextSetLineWidth(context, 1.0);
    CGContextMoveToPoint(context, CGRectGetMidX(aRect), CGRectGetMinY(aRect));
    CGContextAddLineToPoint(context, CGRectGetMidX(aRect), CGRectGetHeight(aRect));
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawLineBorderInRect:"), function $CPBox___drawLineBorderInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        cornerRadius = objj_msgSend(self, "cornerRadius"),
        borderWidth = objj_msgSend(self, "borderWidth");
    aRect = CGRectInset(aRect, borderWidth / 2.0, borderWidth / 2.0);
    CGContextSetFillColor(context, objj_msgSend(self, "fillColor"));
    CGContextSetStrokeColor(context, objj_msgSend(self, "borderColor"));
    CGContextSetLineWidth(context, borderWidth);
    CGContextFillRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
    CGContextStrokeRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawBezelBorderInRect:"), function $CPBox___drawBezelBorderInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        cornerRadius = objj_msgSend(self, "cornerRadius"),
        borderWidth = objj_msgSend(self, "borderWidth"),
        shadowOffset = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-offset"),
        shadowSize = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-size"),
        shadowColor = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-color");
    var baseRect = aRect;
    aRect = CGRectInset(aRect, borderWidth / 2.0, borderWidth / 2.0);
    CGContextSaveGState(context);
    CGContextSetStrokeColor(context, objj_msgSend(self, "borderColor"));
    CGContextSetLineWidth(context, borderWidth);
    CGContextSetFillColor(context, objj_msgSend(self, "fillColor"));
    CGContextFillRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
    CGContextStrokeRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
    CGContextRestoreGState(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawPrimaryBorderInRect:"), function $CPBox___drawPrimaryBorderInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        cornerRadius = objj_msgSend(self, "cornerRadius"),
        borderWidth = objj_msgSend(self, "borderWidth"),
        shadowOffset = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-offset"),
        shadowSize = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-size"),
        shadowColor = objj_msgSend(self, "valueForThemeAttribute:", "inner-shadow-color"),
        baseRect = aRect;
    aRect = CGRectInset(aRect, borderWidth / 2.0, borderWidth / 2.0);
    CGContextSaveGState(context);
    CGContextSetStrokeColor(context, objj_msgSend(self, "borderColor"));
    CGContextSetLineWidth(context, borderWidth);
    CGContextSetFillColor(context, objj_msgSend(self, "fillColor"));
    CGContextFillRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
    CGContextBeginPath(context);
    CGContextAddPath(context, CGPathWithRoundedRectangleInRect(baseRect, cornerRadius, cornerRadius, YES, YES, YES, YES));
    CGContextClip(context);
    CGContextSetShadowWithColor(context, shadowOffset, shadowSize, shadowColor);
    CGContextStrokeRoundedRectangleInRect(context, aRect, cornerRadius, YES, YES, YES, YES);
    CGContextRestoreGState(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawNoBorderInRect:"), function $CPBox___drawNoBorderInRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetFillColor(context, objj_msgSend(self, "fillColor"));
    CGContextFillRect(context, aRect);
}
,["void","CGRect"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPBox___binderClassForBinding_(self, _cmd, aBinding)
{
    if (objj_msgSend(aBinding, "hasPrefix:", CPDisplayPatternTitleBinding))
        return objj_msgSend(CPTitleWithPatternBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPBox").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPBox__defaultThemeClass(self, _cmd)
{
    return "box";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPBox__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "background-color", objj_msgSend(CPNull, "null"), "border-color", 1.0, "border-width", 3.0, "corner-radius", CGSizeMakeZero(), "inner-shadow-offset", 6.0, "inner-shadow-size", objj_msgSend(CPNull, "null"), "inner-shadow-color", CGSizeMakeZero(), "content-margin");
}
,["id"]), new objj_method(sel_getUid("boxEnclosingView:"), function $CPBox__boxEnclosingView_(self, _cmd, aView)
{
    var box = objj_msgSend(objj_msgSend(self, "alloc"), "initWithFrame:", CGRectMakeZero()),
        enclosingView = objj_msgSend(aView, "superview");
    objj_msgSend(box, "setAutoresizingMask:", objj_msgSend(aView, "autoresizingMask"));
    objj_msgSend(box, "setFrameFromContentFrame:", objj_msgSend(aView, "frame"));
    objj_msgSend(enclosingView, "replaceSubview:with:", aView, box);
    objj_msgSend(box, "setContentView:", aView);
    return box;
}
,["id","CPView"])]);
}var CPBoxTypeKey = "CPBoxTypeKey",
    CPBoxBorderTypeKey = "CPBoxBorderTypeKey",
    CPBoxTitle = "CPBoxTitle",
    CPBoxTitlePosition = "CPBoxTitlePosition",
    CPBoxTitleView = "CPBoxTitleView";
{
var the_class = objj_getClass("CPBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPBox__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBox").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._boxType = objj_msgSend(aCoder, "decodeIntForKey:", CPBoxTypeKey);
        self._borderType = objj_msgSend(aCoder, "decodeIntForKey:", CPBoxBorderTypeKey);
        self._title = objj_msgSend(aCoder, "decodeObjectForKey:", CPBoxTitle);
        self._titlePosition = objj_msgSend(aCoder, "decodeIntForKey:", CPBoxTitlePosition);
        self._titleView = objj_msgSend(aCoder, "decodeObjectForKey:", CPBoxTitleView) || objj_msgSend(CPTextField, "labelWithTitle:", self._title);
        self._contentView = objj_msgSend(self, "subviews")[0];
        objj_msgSend(self, "setAutoresizesSubviews:", YES);
        objj_msgSend(self._contentView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self, "_manageTitlePositioning");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPBox__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBox").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._boxType, CPBoxTypeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._borderType, CPBoxBorderTypeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._title, CPBoxTitle);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._titlePosition, CPBoxTitlePosition);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._titleView, CPBoxTitleView);
}
,["void","CPCoder"])]);
}p;11;CPBrowser.jt;48980;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;11;CPControl.ji;9;CPImage.ji;14;CPScrollView.ji;13;CPTableView.ji;13;CPTextField.jI;21;Foundation/CPObject.jt;48822;objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("CPControl.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPScrollView.j", YES);objj_executeFile("CPTableView.j", YES);objj_executeFile("CPTextField.j", YES);{var the_class = objj_allocateClassPair(CPControl, "CPBrowser"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_delegate"), new objj_ivar("_pathSeparator"), new objj_ivar("_contentView"), new objj_ivar("_horizontalScrollView"), new objj_ivar("_prototypeView"), new objj_ivar("_tableViews"), new objj_ivar("_tableDelegates"), new objj_ivar("_rootItem"), new objj_ivar("_delegateSupportsImages"), new objj_ivar("_doubleAction"), new objj_ivar("_allowsMultipleSelection"), new objj_ivar("_allowsEmptySelection"), new objj_ivar("_tableViewClass"), new objj_ivar("_rowHeight"), new objj_ivar("_imageWidth"), new objj_ivar("_leafWidth"), new objj_ivar("_minColumnWidth"), new objj_ivar("_defaultColumnWidth"), new objj_ivar("_columnWidths")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("doubleAction"), function $CPBrowser__doubleAction(self, _cmd)
{
    return self._doubleAction;
}
,["SEL"]), new objj_method(sel_getUid("setDoubleAction:"), function $CPBrowser__setDoubleAction_(self, _cmd, newValue)
{
    self._doubleAction = newValue;
}
,["void","SEL"]), new objj_method(sel_getUid("tableViewClass"), function $CPBrowser__tableViewClass(self, _cmd)
{
    return self._tableViewClass;
}
,["Class"]), new objj_method(sel_getUid("setTableViewClass:"), function $CPBrowser__setTableViewClass_(self, _cmd, newValue)
{
    self._tableViewClass = newValue;
}
,["void","Class"]), new objj_method(sel_getUid("defaultColumnWidth"), function $CPBrowser__defaultColumnWidth(self, _cmd)
{
    return self._defaultColumnWidth;
}
,["float"]), new objj_method(sel_getUid("setDefaultColumnWidth:"), function $CPBrowser__setDefaultColumnWidth_(self, _cmd, newValue)
{
    self._defaultColumnWidth = newValue;
}
,["void","float"]), new objj_method(sel_getUid("initWithFrame:"), function $CPBrowser__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBrowser").super_class }, "initWithFrame:", aFrame))
    {
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPBrowser___init(self, _cmd)
{
    self._rowHeight = 23.0;
    self._defaultColumnWidth = 140.0;
    self._minColumnWidth = 80.0;
    self._imageWidth = 23.0;
    self._leafWidth = 13.0;
    self._columnWidths = [];
    self._pathSeparator = "/";
    self._tableViews = [];
    self._tableDelegates = [];
    self._allowsMultipleSelection = YES;
    self._allowsEmptySelection = YES;
    self._tableViewClass = objj_msgSend(_CPBrowserTableView, "class");
    self._prototypeView = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._prototypeView, "setVerticalAlignment:", CPCenterVerticalTextAlignment);
    objj_msgSend(self._prototypeView, "setValue:forThemeAttribute:inState:", objj_msgSend(CPColor, "whiteColor"), "text-color", CPThemeStateSelectedDataView);
    objj_msgSend(self._prototypeView, "setLineBreakMode:", CPLineBreakByTruncatingTail);
    self._horizontalScrollView = objj_msgSend(objj_msgSend(CPScrollView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
    objj_msgSend(self._horizontalScrollView, "setHasVerticalScroller:", NO);
    objj_msgSend(self._horizontalScrollView, "setAutohidesScrollers:", YES);
    objj_msgSend(self._horizontalScrollView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    self._contentView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0, 0, 0, CGRectGetHeight(objj_msgSend(self, "bounds"))));
    objj_msgSend(self._contentView, "setAutoresizingMask:", CPViewHeightSizable);
    objj_msgSend(self._horizontalScrollView, "setDocumentView:", self._contentView);
    objj_msgSend(self, "addSubview:", self._horizontalScrollView);
}
,["void"]), new objj_method(sel_getUid("setPrototypeView:"), function $CPBrowser__setPrototypeView_(self, _cmd, aPrototypeView)
{
    self._prototypeView = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", aPrototypeView));
}
,["void","CPView"]), new objj_method(sel_getUid("prototypeView"), function $CPBrowser__prototypeView(self, _cmd)
{
    return objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self._prototypeView));
}
,["CPView"]), new objj_method(sel_getUid("setDelegate:"), function $CPBrowser__setDelegate_(self, _cmd, anObject)
{
    self._delegate = anObject;
    self._delegateSupportsImages = objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:imageValueForItem:"));
    objj_msgSend(self, "loadColumnZero");
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPBrowser__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("tableViewInColumn:"), function $CPBrowser__tableViewInColumn_(self, _cmd, index)
{
    return self._tableViews[index];
}
,["CPTableView","unsigned"]), new objj_method(sel_getUid("columnOfTableView:"), function $CPBrowser__columnOfTableView_(self, _cmd, aTableView)
{
    return objj_msgSend(self._tableViews, "indexOfObject:", aTableView);
}
,["unsigned","CPTableView"]), new objj_method(sel_getUid("loadColumnZero"), function $CPBrowser__loadColumnZero(self, _cmd)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("rootItemForBrowser:")))
        self._rootItem = objj_msgSend(self._delegate, "rootItemForBrowser:", self);
    else
        self._rootItem = nil;
    objj_msgSend(self, "setLastColumn:", -1);
    objj_msgSend(self, "addColumn");
}
,["void"]), new objj_method(sel_getUid("setLastColumn:"), function $CPBrowser__setLastColumn_(self, _cmd, columnIndex)
{
    if (columnIndex >= self._tableViews.length)
        return;
    var oldValue = self._tableViews.length - 1,
        indexPlusOne = columnIndex + 1;
    if (columnIndex > 0)
        objj_msgSend(self._tableViews[columnIndex - 1], "setNeedsDisplay:", YES);
    objj_msgSend(self._tableViews[columnIndex], "setNeedsDisplay:", YES);
    objj_msgSend(objj_msgSend(self._tableViews.slice(indexPlusOne), "valueForKey:", "enclosingScrollView"), "makeObjectsPerformSelector:", sel_getUid("removeFromSuperview"));
    self._tableViews = self._tableViews.slice(0, indexPlusOne);
    self._tableDelegates = self._tableDelegates.slice(0, indexPlusOne);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:didChangeLastColumn:toColumn:")))
        objj_msgSend(self._delegate, "browser:didChangeLastColumn:toColumn:", self, oldValue, columnIndex);
    objj_msgSend(self, "tile");
}
,["void","int"]), new objj_method(sel_getUid("lastColumn"), function $CPBrowser__lastColumn(self, _cmd)
{
    return self._tableViews.length - 1;
}
,["int"]), new objj_method(sel_getUid("addColumn"), function $CPBrowser__addColumn(self, _cmd)
{
    var lastIndex = objj_msgSend(self, "lastColumn"),
        lastColumn = self._tableViews[lastIndex],
        selectionIndexes = objj_msgSend(lastColumn, "selectedRowIndexes");
    if (lastIndex >= 0 && objj_msgSend(selectionIndexes, "count") > 1)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Can't add column, column " + lastIndex + " has invalid selection.");
    var index = lastIndex + 1,
        item = index === 0 ? self._rootItem : objj_msgSend(self._tableDelegates[lastIndex], "childAtIndex:", objj_msgSend(selectionIndexes, "firstIndex"));
    if (index > 0 && item && objj_msgSend(self, "isLeafItem:", item))
        return;
    var table = objj_msgSend(objj_msgSend(self._tableViewClass, "alloc"), "initWithFrame:browser:", CGRectMakeZero(), self);
    objj_msgSend(table, "setHeaderView:", nil);
    objj_msgSend(table, "setCornerView:", nil);
    objj_msgSend(table, "setAllowsMultipleSelection:", self._allowsMultipleSelection);
    objj_msgSend(table, "setAllowsEmptySelection:", self._allowsEmptySelection);
    objj_msgSend(table, "registerForDraggedTypes:", objj_msgSend(self, "registeredDraggedTypes"));
    objj_msgSend(self, "_addTableColumnsToTableView:forColumnIndex:", table, index);
    var delegate = objj_msgSend(objj_msgSend(_CPBrowserTableDelegate, "alloc"), "init");
    objj_msgSend(delegate, "_setDelegate:", self._delegate);
    objj_msgSend(delegate, "_setBrowser:", self);
    objj_msgSend(delegate, "_setIndex:", index);
    objj_msgSend(delegate, "_setItem:", item);
    self._tableViews[index] = table;
    self._tableDelegates[index] = delegate;
    objj_msgSend(table, "setDelegate:", delegate);
    objj_msgSend(table, "setDataSource:", delegate);
    objj_msgSend(table, "setTarget:", delegate);
    objj_msgSend(table, "setAction:", sel_getUid("_tableViewClicked:"));
    objj_msgSend(table, "setDoubleAction:", sel_getUid("_tableViewDoubleClicked:"));
    objj_msgSend(table, "setDraggingDestinationFeedbackStyle:", CPTableViewDraggingDestinationFeedbackStyleRegular);
    var scrollView = objj_msgSend(objj_msgSend(_CPBrowserScrollView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(scrollView, "_setBrowser:", self);
    objj_msgSend(scrollView, "setDocumentView:", table);
    objj_msgSend(scrollView, "setHasHorizontalScroller:", NO);
    objj_msgSend(scrollView, "setAutoresizingMask:", CPViewHeightSizable);
    objj_msgSend(self._contentView, "addSubview:", scrollView);
    objj_msgSend(self, "tile");
    objj_msgSend(self, "scrollColumnToVisible:", index);
}
,["void"]), new objj_method(sel_getUid("_addTableColumnsToTableView:forColumnIndex:"), function $CPBrowser___addTableColumnsToTableView_forColumnIndex_(self, _cmd, aTableView, index)
{
    if (self._delegateSupportsImages)
    {
        var column = objj_msgSend(objj_msgSend(CPTableColumn, "alloc"), "initWithIdentifier:", "Image"),
            view = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(view, "setImageScaling:", CPImageScaleProportionallyDown);
        objj_msgSend(column, "setDataView:", view);
        objj_msgSend(column, "setResizingMask:", CPTableColumnNoResizing);
        objj_msgSend(aTableView, "addTableColumn:", column);
    }
    var column = objj_msgSend(objj_msgSend(CPTableColumn, "alloc"), "initWithIdentifier:", "Content");
    objj_msgSend(column, "setDataView:", self._prototypeView);
    objj_msgSend(column, "setResizingMask:", CPTableColumnNoResizing);
    objj_msgSend(aTableView, "addTableColumn:", column);
    var column = objj_msgSend(objj_msgSend(CPTableColumn, "alloc"), "initWithIdentifier:", "Leaf"),
        view = objj_msgSend(objj_msgSend(_CPBrowserLeafView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(view, "setBranchImage:", objj_msgSend(self, "valueForThemeAttribute:", "image-control-leaf"));
    objj_msgSend(view, "setHighlightedBranchImage:", objj_msgSend(self, "valueForThemeAttribute:", "image-control-leaf-pressed"));
    objj_msgSend(column, "setDataView:", view);
    objj_msgSend(column, "setResizingMask:", CPTableColumnNoResizing);
    objj_msgSend(aTableView, "addTableColumn:", column);
}
,["void","CPTableView","unsigned"]), new objj_method(sel_getUid("reloadColumn:"), function $CPBrowser__reloadColumn_(self, _cmd, column)
{
    objj_msgSend(objj_msgSend(self, "tableViewInColumn:", column), "reloadData");
}
,["void","int"]), new objj_method(sel_getUid("tile"), function $CPBrowser__tile(self, _cmd)
{
    var xOrigin = 0,
        scrollerWidth = objj_msgSend(CPScroller, "scrollerWidth"),
        height = CGRectGetHeight(objj_msgSend(self._contentView, "bounds"));
    for (var i = 0, count = self._tableViews.length; i < count; i++)
    {
        var tableView = self._tableViews[i],
            scrollView = objj_msgSend(tableView, "enclosingScrollView"),
            width = objj_msgSend(self, "widthOfColumn:", i),
            tableHeight = CGRectGetHeight(objj_msgSend(tableView, "bounds"));
        objj_msgSend(objj_msgSend(tableView, "tableColumnWithIdentifier:", "Image"), "setWidth:", self._imageWidth);
        objj_msgSend(objj_msgSend(tableView, "tableColumnWithIdentifier:", "Content"), "setWidth:", objj_msgSend(self, "columnContentWidthForColumnWidth:", width));
        objj_msgSend(objj_msgSend(tableView, "tableColumnWithIdentifier:", "Leaf"), "setWidth:", self._leafWidth);
        objj_msgSend(tableView, "setRowHeight:", self._rowHeight);
        objj_msgSend(tableView, "setFrameSize:", CGSizeMake(width - scrollerWidth, tableHeight));
        objj_msgSend(scrollView, "setFrameOrigin:", CGPointMake(xOrigin, 0));
        objj_msgSend(scrollView, "setFrameSize:", CGSizeMake(width, height));
        xOrigin += width;
    }
    objj_msgSend(self._contentView, "setFrameSize:", CGSizeMake(xOrigin, height));
}
,["void"]), new objj_method(sel_getUid("rowAtPoint:"), function $CPBrowser__rowAtPoint_(self, _cmd, aPoint)
{
    var column = objj_msgSend(self, "columnAtPoint:", aPoint);
    if (column === -1)
        return -1;
    var tableView = self._tableViews[column];
    return objj_msgSend(tableView, "rowAtPoint:", objj_msgSend(tableView, "convertPoint:fromView:", aPoint, self));
}
,["unsigned","CGPoint"]), new objj_method(sel_getUid("columnAtPoint:"), function $CPBrowser__columnAtPoint_(self, _cmd, aPoint)
{
    var adjustedPoint = objj_msgSend(self._contentView, "convertPoint:fromView:", aPoint, self);
    for (var i = 0, count = self._tableViews.length; i < count; i++)
    {
        var frame = objj_msgSend(objj_msgSend(self._tableViews[i], "enclosingScrollView"), "frame");
        if (CGRectContainsPoint(frame, adjustedPoint))
            return i;
    }
    return -1;
}
,["unsigned","CGPoint"]), new objj_method(sel_getUid("rectOfRow:inColumn:"), function $CPBrowser__rectOfRow_inColumn_(self, _cmd, aRow, aColumn)
{
    var tableView = self._tableViews[aColumn],
        rect = objj_msgSend(tableView, "rectOfRow:", aRow);
    rect.origin = objj_msgSend(self, "convertPoint:fromView:", rect.origin, tableView);
    return rect;
}
,["CGRect","unsigned","unsigned"]), new objj_method(sel_getUid("itemAtRow:inColumn:"), function $CPBrowser__itemAtRow_inColumn_(self, _cmd, row, column)
{
    return objj_msgSend(self._tableDelegates[column], "childAtIndex:", row);
}
,["id","int","int"]), new objj_method(sel_getUid("isLeafItem:"), function $CPBrowser__isLeafItem_(self, _cmd, item)
{
    return objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:isLeafItem:")) && objj_msgSend(self._delegate, "browser:isLeafItem:", self, item);
}
,["BOOL","id"]), new objj_method(sel_getUid("parentForItemsInColumn:"), function $CPBrowser__parentForItemsInColumn_(self, _cmd, column)
{
    return objj_msgSend(self._tableDelegates[column], "_item");
}
,["id","int"]), new objj_method(sel_getUid("selectedItems"), function $CPBrowser__selectedItems(self, _cmd)
{
    var selectedColumn = objj_msgSend(self, "selectedColumn"),
        selectedIndexes = objj_msgSend(self, "selectedRowIndexesInColumn:", selectedColumn),
        set = objj_msgSend(CPSet, "set"),
        index = objj_msgSend(selectedIndexes, "firstIndex");
    while (index !== CPNotFound)
    {
        objj_msgSend(set, "addObject:", objj_msgSend(self, "itemAtRow:inColumn:", index, selectedColumn));
        index = objj_msgSend(selectedIndexes, "indexGreaterThanIndex:", index);
    }
    return set;
}
,["CPSet"]), new objj_method(sel_getUid("selectedItem"), function $CPBrowser__selectedItem(self, _cmd)
{
    var selectedColumn = objj_msgSend(self, "selectedColumn"),
        selectedRow = objj_msgSend(self, "selectedRowInColumn:", selectedColumn);
    return objj_msgSend(self, "itemAtRow:inColumn:", selectedRow, selectedColumn);
}
,["id"]), new objj_method(sel_getUid("trackMouse:"), function $CPBrowser__trackMouse_(self, _cmd, anEvent)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("_column:clickedRow:"), function $CPBrowser___column_clickedRow_(self, _cmd, columnIndex, rowIndex)
{
    objj_msgSend(self, "setLastColumn:", columnIndex);
    if (rowIndex >= 0)
        objj_msgSend(self, "addColumn");
    objj_msgSend(self, "doClick:", self);
}
,["void","unsigned","unsigned"]), new objj_method(sel_getUid("sendAction"), function $CPBrowser__sendAction(self, _cmd)
{
    objj_msgSend(self, "sendAction:to:", self._action, self._target);
}
,["void"]), new objj_method(sel_getUid("doClick:"), function $CPBrowser__doClick_(self, _cmd, sender)
{
    objj_msgSend(self, "sendAction:to:", self._action, self._target);
}
,["void","id"]), new objj_method(sel_getUid("doDoubleClick:"), function $CPBrowser__doDoubleClick_(self, _cmd, sender)
{
    objj_msgSend(self, "sendAction:to:", self._doubleAction, self._target);
}
,["void","id"]), new objj_method(sel_getUid("keyDown:"), function $CPBrowser__keyDown_(self, _cmd, anEvent)
{
    var key = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
        column = objj_msgSend(self, "selectedColumn");
    if (column === CPNotFound)
        return;
    if (key === CPLeftArrowFunctionKey || key === CPRightArrowFunctionKey)
    {
        if (key === CPLeftArrowFunctionKey)
        {
            var previousColumn = column - 1,
                selectedRow = objj_msgSend(self, "selectedRowInColumn:", previousColumn);
            objj_msgSend(self, "selectRow:inColumn:", selectedRow, previousColumn);
        }
        else
            objj_msgSend(self, "selectRow:inColumn:", 0, column + 1);
    }
    else
        objj_msgSend(self._tableViews[column], "keyDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("columnContentWidthForColumnWidth:"), function $CPBrowser__columnContentWidthForColumnWidth_(self, _cmd, aWidth)
{
    var columnSpacing = objj_msgSend(self._tableViews[0], "intercellSpacing").width;
    return aWidth - (self._leafWidth + columnSpacing + (self._delegateSupportsImages ? self._imageWidth + columnSpacing : 0)) - columnSpacing - objj_msgSend(CPScroller, "scrollerWidth");
}
,["float","float"]), new objj_method(sel_getUid("columnWidthForColumnContentWidth:"), function $CPBrowser__columnWidthForColumnContentWidth_(self, _cmd, aWidth)
{
    var columnSpacing = objj_msgSend(self._tableViews[0], "intercellSpacing").width;
    return aWidth + (self._leafWidth + columnSpacing + (self._delegateSupportsImages ? self._imageWidth + columnSpacing : 0)) + columnSpacing + objj_msgSend(CPScroller, "scrollerWidth");
}
,["float","float"]), new objj_method(sel_getUid("setImageWidth:"), function $CPBrowser__setImageWidth_(self, _cmd, aWidth)
{
    self._imageWidth = aWidth;
    objj_msgSend(self, "tile");
}
,["void","float"]), new objj_method(sel_getUid("imageWidth"), function $CPBrowser__imageWidth(self, _cmd)
{
    return self._imageWidth;
}
,["float"]), new objj_method(sel_getUid("setMinColumnWidth:"), function $CPBrowser__setMinColumnWidth_(self, _cmd, minWidth)
{
    self._minColumnWidth = minWidth;
    objj_msgSend(self, "tile");
}
,["void","float"]), new objj_method(sel_getUid("minColumnWidth"), function $CPBrowser__minColumnWidth(self, _cmd)
{
    return self._minColumnWidth;
}
,["float"]), new objj_method(sel_getUid("setWidth:ofColumn:"), function $CPBrowser__setWidth_ofColumn_(self, _cmd, aWidth, column)
{
    self._columnWidths[column] = aWidth;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:didResizeColumn:")))
        objj_msgSend(self._delegate, "browser:didResizeColumn:", self, column);
    objj_msgSend(self, "tile");
}
,["void","float","unsigned"]), new objj_method(sel_getUid("widthOfColumn:"), function $CPBrowser__widthOfColumn_(self, _cmd, column)
{
    var width = self._columnWidths[column];
    if (width == null)
        width = self._defaultColumnWidth;
    return MAX(objj_msgSend(CPScroller, "scrollerWidth"), MAX(self._minColumnWidth, width));
}
,["float","unsigned"]), new objj_method(sel_getUid("setRowHeight:"), function $CPBrowser__setRowHeight_(self, _cmd, aHeight)
{
    self._rowHeight = aHeight;
}
,["void","float"]), new objj_method(sel_getUid("rowHeight"), function $CPBrowser__rowHeight(self, _cmd)
{
    return self._rowHeight;
}
,["float"]), new objj_method(sel_getUid("scrollColumnToVisible:"), function $CPBrowser__scrollColumnToVisible_(self, _cmd, columnIndex)
{
    objj_msgSend(self._contentView, "scrollRectToVisible:", objj_msgSend(objj_msgSend(objj_msgSend(self, "tableViewInColumn:", columnIndex), "enclosingScrollView"), "frame"));
}
,["void","unsigned"]), new objj_method(sel_getUid("scrollRowToVisible:inColumn:"), function $CPBrowser__scrollRowToVisible_inColumn_(self, _cmd, rowIndex, columnIndex)
{
    objj_msgSend(self, "scrollColumnToVisible:", columnIndex);
    objj_msgSend(objj_msgSend(self, "tableViewInColumn:", columnIndex), "scrollRowToVisible:", rowIndex);
}
,["void","unsigned","unsigned"]), new objj_method(sel_getUid("autohidesScroller"), function $CPBrowser__autohidesScroller(self, _cmd)
{
    return objj_msgSend(self._horizontalScrollView, "autohidesScrollers");
}
,["BOOL"]), new objj_method(sel_getUid("setAutohidesScroller:"), function $CPBrowser__setAutohidesScroller_(self, _cmd, shouldHide)
{
    objj_msgSend(self._horizontalScrollView, "setAutohidesScrollers:", shouldHide);
}
,["void","BOOL"]), new objj_method(sel_getUid("selectedRowInColumn:"), function $CPBrowser__selectedRowInColumn_(self, _cmd, columnIndex)
{
    if (columnIndex > objj_msgSend(self, "lastColumn") || columnIndex < 0)
        return -1;
    return objj_msgSend(self._tableViews[columnIndex], "selectedRow");
}
,["unsigned","unsigned"]), new objj_method(sel_getUid("selectedColumn"), function $CPBrowser__selectedColumn(self, _cmd)
{
    var column = objj_msgSend(self, "lastColumn"),
        row = objj_msgSend(self, "selectedRowInColumn:", column);
    if (row >= 0)
        return column;
    else
        return column - 1;
}
,["unsigned"]), new objj_method(sel_getUid("selectRow:inColumn:"), function $CPBrowser__selectRow_inColumn_(self, _cmd, row, column)
{
    var selectedIndexes = row === -1 ? objj_msgSend(CPIndexSet, "indexSet") : objj_msgSend(CPIndexSet, "indexSetWithIndex:", row);
    objj_msgSend(self, "selectRowIndexes:inColumn:", selectedIndexes, column);
}
,["void","unsigned","unsigned"]), new objj_method(sel_getUid("allowsMultipleSelection"), function $CPBrowser__allowsMultipleSelection(self, _cmd)
{
    return self._allowsMultipleSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsMultipleSelection:"), function $CPBrowser__setAllowsMultipleSelection_(self, _cmd, shouldAllow)
{
    if (self._allowsMultipleSelection === shouldAllow)
        return;
    self._allowsMultipleSelection = shouldAllow;
    objj_msgSend(self._tableViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setAllowsMultipleSelection:"), shouldAllow);
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsEmptySelection"), function $CPBrowser__allowsEmptySelection(self, _cmd)
{
    return self._allowsEmptySelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsEmptySelection:"), function $CPBrowser__setAllowsEmptySelection_(self, _cmd, shouldAllow)
{
    if (self._allowsEmptySelection === shouldAllow)
        return;
    self._allowsEmptySelection = shouldAllow;
    objj_msgSend(self._tableViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setAllowsEmptySelection:"), shouldAllow);
}
,["void","BOOL"]), new objj_method(sel_getUid("selectedRowIndexesInColumn:"), function $CPBrowser__selectedRowIndexesInColumn_(self, _cmd, column)
{
    if (column < 0 || column > objj_msgSend(self, "lastColumn") + 1)
        return objj_msgSend(CPIndexSet, "indexSet");
    return objj_msgSend(objj_msgSend(self, "tableViewInColumn:", column), "selectedRowIndexes");
}
,["CPIndexSet","unsigned"]), new objj_method(sel_getUid("selectRowIndexes:inColumn:"), function $CPBrowser__selectRowIndexes_inColumn_(self, _cmd, indexSet, column)
{
    if (column < 0 || column > objj_msgSend(self, "lastColumn") + 1)
        return;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:selectionIndexesForProposedSelection:inColumn:")))
        indexSet = objj_msgSend(self._delegate, "browser:selectionIndexesForProposedSelection:inColumn:", self, indexSet, column);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:shouldSelectRowIndexes:inColumn:")) && !objj_msgSend(self._delegate, "browser:shouldSelectRowIndexes:inColumn:", self, indexSet, column))
        return;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browserSelectionIsChanging:")))
        objj_msgSend(self._delegate, "browserSelectionIsChanging:", self);
    if (column > objj_msgSend(self, "lastColumn"))
        objj_msgSend(self, "addColumn");
    objj_msgSend(self, "setLastColumn:", column);
    objj_msgSend(objj_msgSend(self, "tableViewInColumn:", column), "selectRowIndexes:byExtendingSelection:", indexSet, NO);
    objj_msgSend(self, "scrollColumnToVisible:", column);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browserSelectionDidChange:")))
        objj_msgSend(self._delegate, "browserSelectionDidChange:", self);
}
,["void","CPIndexSet","unsigned"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPBrowser__setBackgroundColor_(self, _cmd, aColor)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBrowser").super_class }, "setBackgroundColor:", aColor);
    objj_msgSend(self._contentView, "setBackgroundColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPBrowser__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("registerForDraggedTypes:"), function $CPBrowser__registerForDraggedTypes_(self, _cmd, types)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBrowser").super_class }, "registerForDraggedTypes:", types);
    objj_msgSend(self._tableViews, "makeObjectsPerformSelector:withObject:", sel_getUid("registerForDraggedTypes:"), types);
}
,["void","CPArray"]), new objj_method(sel_getUid("canDragRowsWithIndexes:inColumn:withEvent:"), function $CPBrowser__canDragRowsWithIndexes_inColumn_withEvent_(self, _cmd, rowIndexes, columnIndex, dragEvent)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:canDragRowsWithIndexes:inColumn:withEvent:")))
        return objj_msgSend(self._delegate, "browser:canDragRowsWithIndexes:inColumn:withEvent:", self, rowIndexes, columnIndex, dragEvent);
    return YES;
}
,["BOOL","CPIndexSet","int","CPEvent"]), new objj_method(sel_getUid("draggingImageForRowsWithIndexes:inColumn:withEvent:offset:"), function $CPBrowser__draggingImageForRowsWithIndexes_inColumn_withEvent_offset_(self, _cmd, rowIndexes, columnIndex, dragEvent, dragImageOffset)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:")))
        return objj_msgSend(self._delegate, "browser:draggingImageForRowsWithIndexes:inColumn:withEvent:offset:", self, rowIndexes, columnIndex, dragEvent, dragImageOffset);
    return nil;
}
,["CPImage","CPIndexSet","int","CPEvent","CGPoint"]), new objj_method(sel_getUid("draggingViewForRowsWithIndexes:inColumn:withEvent:offset:"), function $CPBrowser__draggingViewForRowsWithIndexes_inColumn_withEvent_offset_(self, _cmd, rowIndexes, columnIndex, dragEvent, dragImageOffset)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:")))
        return objj_msgSend(self._delegate, "browser:draggingViewForRowsWithIndexes:inColumn:withEvent:offset:", self, rowIndexes, columnIndex, dragEvent, dragImageOffset);
    return nil;
}
,["CPView","CPIndexSet","int","CPEvent","CGPoint"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPBrowser__defaultThemeClass(self, _cmd)
{
    return "browser";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPBrowser__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "image-control-resize", objj_msgSend(CPNull, "null"), "image-control-leaf", objj_msgSend(CPNull, "null"), "image-control-leaf-pressed");
}
,["id"])]);
}{
var the_class = objj_getClass("CPBrowser")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPBrowser\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPBrowser__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBrowser").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "_init");
        self._allowsEmptySelection = objj_msgSend(aCoder, "decodeBoolForKey:", "CPBrowserAllowsEmptySelectionKey");
        self._allowsMultipleSelection = objj_msgSend(aCoder, "decodeBoolForKey:", "CPBrowserAllowsMultipleSelectionKey");
        self._prototypeView = objj_msgSend(aCoder, "decodeObjectForKey:", "CPBrowserPrototypeViewKey");
        self._rowHeight = objj_msgSend(aCoder, "decodeFloatForKey:", "CPBrowserRowHeightKey");
        self._imageWidth = objj_msgSend(aCoder, "decodeFloatForKey:", "CPBrowserImageWidthKey");
        self._minColumnWidth = objj_msgSend(aCoder, "decodeFloatForKey:", "CPBrowserMinColumnWidthKey");
        self._columnWidths = objj_msgSend(aCoder, "decodeObjectForKey:", "CPBrowserColumnWidthsKey");
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", "CPBrowserDelegateKey"));
        objj_msgSend(self, "setAutohidesScroller:", objj_msgSend(aCoder, "decodeBoolForKey:", "CPBrowserAutohidesScrollerKey"));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPBrowser__encodeWithCoder_(self, _cmd, aCoder)
{
    var actualSubviews = self._subviews;
    self._subviews = [];
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPBrowser").super_class }, "encodeWithCoder:", aCoder);
    self._subviews = actualSubviews;
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "autohidesScroller"), "CPBrowserAutohidesScrollerKey");
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsEmptySelection, "CPBrowserAllowsEmptySelectionKey");
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsMultipleSelection, "CPBrowserAllowsMultipleSelectionKey");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._delegate, "CPBrowserDelegateKey");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._prototypeView, "CPBrowserPrototypeViewKey");
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._rowHeight, "CPBrowserRowHeightKey");
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._imageWidth, "CPBrowserImageWidthKey");
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._minColumnWidth, "CPBrowserMinColumnWidthKey");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._columnWidths, "CPBrowserColumnWidthsKey");
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPBrowserResizeControl"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_mouseDownX"), new objj_ivar("_browser"), new objj_ivar("_index"), new objj_ivar("_width")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPBrowserResizeControl__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserResizeControl").super_class }, "initWithFrame:", aFrame))
    {
        var browser = objj_msgSend(objj_msgSend(CPBrowser, "alloc"), "init");
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(browser, "valueForThemeAttribute:", "image-control-resize")));
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("mouseDown:"), function $_CPBrowserResizeControl__mouseDown_(self, _cmd, anEvent)
{
    self._mouseDownX = objj_msgSend(anEvent, "locationInWindow").x;
    self._browser = objj_msgSend(objj_msgSend(self, "superview"), "_browser");
    self._index = objj_msgSend(self._browser, "columnOfTableView:", objj_msgSend(objj_msgSend(self, "superview"), "documentView"));
    self._width = objj_msgSend(self._browser, "widthOfColumn:", self._index);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $_CPBrowserResizeControl__mouseDragged_(self, _cmd, anEvent)
{
    var deltaX = objj_msgSend(anEvent, "locationInWindow").x - self._mouseDownX;
    objj_msgSend(self._browser, "setWidth:ofColumn:", self._width + deltaX, self._index);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $_CPBrowserResizeControl__mouseUp_(self, _cmd, anEvent)
{
}
,["void","CPEvent"])]);
}{var the_class = objj_allocateClassPair(CPScrollView, "_CPBrowserScrollView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_resizeControl"), new objj_ivar("_browser")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_browser"), function $_CPBrowserScrollView___browser(self, _cmd)
{
    return self._browser;
}
,["CPBrowser"]), new objj_method(sel_getUid("_setBrowser:"), function $_CPBrowserScrollView___setBrowser_(self, _cmd, newValue)
{
    self._browser = newValue;
}
,["void","CPBrowser"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPBrowserScrollView__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserScrollView").super_class }, "initWithFrame:", aFrame))
    {
        self._resizeControl = objj_msgSend(objj_msgSend(_CPBrowserResizeControl, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self, "addSubview:", self._resizeControl);
    }
    return self;
}
,["void","CGRect"]), new objj_method(sel_getUid("reflectScrolledClipView:"), function $_CPBrowserScrollView__reflectScrolledClipView_(self, _cmd, aClipView)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserScrollView").super_class }, "reflectScrolledClipView:", aClipView);
    var frame = objj_msgSend(self._verticalScroller, "frame");
    frame.size.height = CGRectGetHeight(objj_msgSend(self, "bounds")) - 14.0 - frame.origin.y;
    objj_msgSend(self._verticalScroller, "setFrameSize:", frame.size);
    var resizeFrame = CGRectMake(CGRectGetMinX(frame), CGRectGetMaxY(frame), objj_msgSend(CPScroller, "scrollerWidth"), 14.0);
    objj_msgSend(self._resizeControl, "setFrame:", resizeFrame);
}
,["void","CPClipView"])]);
}{var the_class = objj_allocateClassPair(CPTableView, "_CPBrowserTableView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_browser")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:browser:"), function $_CPBrowserTableView__initWithFrame_browser_(self, _cmd, aFrame, aBrowser)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableView").super_class }, "initWithFrame:", aFrame))
        self._browser = aBrowser;
    return self;
}
,["id","CGRect","CPBrowser"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPBrowserTableView__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("mouseDown:"), function $_CPBrowserTableView__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableView").super_class }, "mouseDown:", anEvent);
    objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self._browser);
}
,["void","CPEvent"]), new objj_method(sel_getUid("browserView"), function $_CPBrowserTableView__browserView(self, _cmd)
{
    return self._browser;
}
,["CPView"]), new objj_method(sel_getUid("_isFocused"), function $_CPBrowserTableView___isFocused(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableView").super_class }, "_isFocused") || objj_msgSend(self._browser, "tableViewInColumn:", objj_msgSend(self._browser, "selectedColumn")) === self;
}
,["BOOL"]), new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"), function $_CPBrowserTableView__canDragRowsWithIndexes_atPoint_(self, _cmd, rowIndexes, mouseDownPoint)
{
    return objj_msgSend(self._browser, "canDragRowsWithIndexes:inColumn:withEvent:", rowIndexes, objj_msgSend(self._browser, "columnOfTableView:", self), objj_msgSend(CPApp, "currentEvent"));
}
,["BOOL","CPIndexSet","CGPoint"]), new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"), function $_CPBrowserTableView__dragImageForRowsWithIndexes_tableColumns_event_offset_(self, _cmd, dragRows, theTableColumns, dragEvent, dragImageOffset)
{
    return objj_msgSend(self._browser, "draggingImageForRowsWithIndexes:inColumn:withEvent:offset:", dragRows, objj_msgSend(self._browser, "columnOfTableView:", self), dragEvent, dragImageOffset) || objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableView").super_class }, "dragImageForRowsWithIndexes:tableColumns:event:offset:", dragRows, theTableColumns, dragEvent, dragImageOffset);
}
,["CPImage","CPIndexSet","CPArray","CPEvent","CGPoint"]), new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"), function $_CPBrowserTableView__dragViewForRowsWithIndexes_tableColumns_event_offset_(self, _cmd, dragRows, theTableColumns, dragEvent, dragViewOffset)
{
    var count = theTableColumns.length;
    while (count--)
    {
        if (objj_msgSend(theTableColumns[count], "identifier") === "Leaf")
            objj_msgSend(theTableColumns, "removeObject:", theTableColumns[count]);
    }
    return objj_msgSend(self._browser, "draggingViewForRowsWithIndexes:inColumn:withEvent:offset:", dragRows, objj_msgSend(self._browser, "columnOfTableView:", self), dragEvent, dragViewOffset) || objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableView").super_class }, "dragViewForRowsWithIndexes:tableColumns:event:offset:", dragRows, theTableColumns, dragEvent, dragViewOffset);
}
,["CPView","CPIndexSet","CPArray","CPEvent","CGPoint"])]);
}objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "_CPBrowserTableDelegate"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_browser"), new objj_ivar("_index"), new objj_ivar("_delegate"), new objj_ivar("_item")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_browser"), function $_CPBrowserTableDelegate___browser(self, _cmd)
{
    return self._browser;
}
,["CPBrowser"]), new objj_method(sel_getUid("_setBrowser:"), function $_CPBrowserTableDelegate___setBrowser_(self, _cmd, newValue)
{
    self._browser = newValue;
}
,["void","CPBrowser"]), new objj_method(sel_getUid("_index"), function $_CPBrowserTableDelegate___index(self, _cmd)
{
    return self._index;
}
,["unsigned"]), new objj_method(sel_getUid("_setIndex:"), function $_CPBrowserTableDelegate___setIndex_(self, _cmd, newValue)
{
    self._index = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("_delegate"), function $_CPBrowserTableDelegate___delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("_setDelegate:"), function $_CPBrowserTableDelegate___setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("_item"), function $_CPBrowserTableDelegate___item(self, _cmd)
{
    return self._item;
}
,["id"]), new objj_method(sel_getUid("_setItem:"), function $_CPBrowserTableDelegate___setItem_(self, _cmd, newValue)
{
    self._item = newValue;
}
,["void","id"]), new objj_method(sel_getUid("numberOfRowsInTableView:"), function $_CPBrowserTableDelegate__numberOfRowsInTableView_(self, _cmd, aTableView)
{
    return objj_msgSend(self._delegate, "browser:numberOfChildrenOfItem:", self._browser, self._item);
}
,["unsigned","CPTableView"]), new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"), function $_CPBrowserTableDelegate__tableView_objectValueForTableColumn_row_(self, _cmd, aTableView, column, row)
{
    if (objj_msgSend(column, "identifier") === "Image")
        return objj_msgSend(self._delegate, "browser:imageValueForItem:", self._browser, objj_msgSend(self, "childAtIndex:", row));
    else if (objj_msgSend(column, "identifier") === "Leaf")
        return !objj_msgSend(self._browser, "isLeafItem:", objj_msgSend(self, "childAtIndex:", row));
    else
        return objj_msgSend(self._delegate, "browser:objectValueForItem:", self._browser, objj_msgSend(self, "childAtIndex:", row));
}
,["void","CPTableView","CPTableColumn","unsigned"]), new objj_method(sel_getUid("_tableViewDoubleClicked:"), function $_CPBrowserTableDelegate___tableViewDoubleClicked_(self, _cmd, aTableView)
{
    objj_msgSend(self._browser, "doDoubleClick:", self);
}
,["void","CPTableView"]), new objj_method(sel_getUid("_tableViewClicked:"), function $_CPBrowserTableDelegate___tableViewClicked_(self, _cmd, aTableView)
{
    var selectedIndexes = objj_msgSend(aTableView, "selectedRowIndexes");
    objj_msgSend(self._browser, "_column:clickedRow:", self._index, objj_msgSend(selectedIndexes, "count") === 1 ? objj_msgSend(selectedIndexes, "firstIndex") : -1);
}
,["void","CPTableView"]), new objj_method(sel_getUid("tableViewSelectionDidChange:"), function $_CPBrowserTableDelegate__tableViewSelectionDidChange_(self, _cmd, aNotification)
{
    var selectedIndexes = objj_msgSend(objj_msgSend(aNotification, "object"), "selectedRowIndexes");
    objj_msgSend(self._browser, "selectRowIndexes:inColumn:", selectedIndexes, self._index);
}
,["void","CPNotification"]), new objj_method(sel_getUid("childAtIndex:"), function $_CPBrowserTableDelegate__childAtIndex_(self, _cmd, index)
{
    return objj_msgSend(self._delegate, "browser:child:ofItem:", self._browser, index, self._item);
}
,["id","unsigned"]), new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"), function $_CPBrowserTableDelegate__tableView_acceptDrop_row_dropOperation_(self, _cmd, aTableView, info, row, operation)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:acceptDrop:atRow:column:dropOperation:")))
        return objj_msgSend(self._delegate, "browser:acceptDrop:atRow:column:dropOperation:", self._browser, info, row, self._index, operation);
    else
        return NO;
}
,["BOOL","CPTableView","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"), function $_CPBrowserTableDelegate__tableView_validateDrop_proposedRow_proposedDropOperation_(self, _cmd, aTableView, info, row, operation)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:validateDrop:proposedRow:column:dropOperation:")))
        return objj_msgSend(self._delegate, "browser:validateDrop:proposedRow:column:dropOperation:", self._browser, info, row, self._index, operation);
    else
        return CPDragOperationNone;
}
,["CPDragOperation","CPTableView","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"), function $_CPBrowserTableDelegate__tableView_writeRowsWithIndexes_toPasteboard_(self, _cmd, aTableView, rowIndexes, pboard)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:")))
        return objj_msgSend(self._delegate, "browser:writeRowsWithIndexes:inColumn:toPasteboard:", self._browser, rowIndexes, self._index, pboard);
    else
        return NO;
}
,["BOOL","CPTableView","CPIndexSet","CPPasteboard"]), new objj_method(sel_getUid("respondsToSelector:"), function $_CPBrowserTableDelegate__respondsToSelector_(self, _cmd, aSelector)
{
    if (aSelector === sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"))
        return objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("browser:writeRowsWithIndexes:inColumn:toPasteboard:"));
    else
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserTableDelegate").super_class }, "respondsToSelector:", aSelector);
}
,["BOOL","SEL"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPBrowserLeafView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isLeaf"), new objj_ivar("_branchImage"), new objj_ivar("_highlightedBranchImage")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isLeaf"), function $_CPBrowserLeafView__isLeaf(self, _cmd)
{
    return self._isLeaf;
}
,["BOOL"]), new objj_method(sel_getUid("branchImage"), function $_CPBrowserLeafView__branchImage(self, _cmd)
{
    return self._branchImage;
}
,["CPImage"]), new objj_method(sel_getUid("setBranchImage:"), function $_CPBrowserLeafView__setBranchImage_(self, _cmd, newValue)
{
    self._branchImage = newValue;
}
,["void","CPImage"]), new objj_method(sel_getUid("highlightedBranchImage"), function $_CPBrowserLeafView__highlightedBranchImage(self, _cmd)
{
    return self._highlightedBranchImage;
}
,["CPImage"]), new objj_method(sel_getUid("setHighlightedBranchImage:"), function $_CPBrowserLeafView__setHighlightedBranchImage_(self, _cmd, newValue)
{
    self._highlightedBranchImage = newValue;
}
,["void","CPImage"]), new objj_method(sel_getUid("objectValue"), function $_CPBrowserLeafView__objectValue(self, _cmd)
{
    return self._isLeaf;
}
,["BOOL"]), new objj_method(sel_getUid("setObjectValue:"), function $_CPBrowserLeafView__setObjectValue_(self, _cmd, aValue)
{
    self._isLeaf = !!aValue;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","id"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $_CPBrowserLeafView__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "image-view")
        return CGRectInset(objj_msgSend(self, "bounds"), 1, 1);
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserLeafView").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $_CPBrowserLeafView__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "image-view")
        return objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMakeZero());
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserLeafView").super_class }, "createEphemeralSubviewNamed:", aName);
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPBrowserLeafView__layoutSubviews(self, _cmd)
{
    var imageView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "image-view", CPWindowAbove, nil),
        isHighlighted = objj_msgSend(self, "themeState") & CPThemeStateSelectedDataView;
    objj_msgSend(imageView, "setImage:", self._isLeaf ? isHighlighted ? self._highlightedBranchImage : self._branchImage : nil);
    objj_msgSend(imageView, "setImageScaling:", CPImageScaleNone);
}
,["void"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPBrowserLeafView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserLeafView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isLeaf, "_CPBrowserLeafViewIsLeafKey");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._branchImage, "_CPBrowserLeafViewBranchImageKey");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._highlightedBranchImage, "_CPBrowserLeafViewHighlightedBranchImageKey");
}
,["void","CPCoder"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPBrowserLeafView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBrowserLeafView").super_class }, "initWithCoder:", aCoder))
    {
        self._isLeaf = objj_msgSend(aCoder, "decodeBoolForKey:", "_CPBrowserLeafViewIsLeafKey");
        self._branchImage = objj_msgSend(aCoder, "decodeObjectForKey:", "_CPBrowserLeafViewBranchImageKey");
        self._highlightedBranchImage = objj_msgSend(aCoder, "decodeObjectForKey:", "_CPBrowserLeafViewHighlightedBranchImageKey");
    }
    return self;
}
,["void","CPCoder"])]);
}p;10;CPButton.jt;34152;@STATIC;1.0;i;21;_CPImageAndTextView.ji;12;CGGeometry.ji;11;CPControl.ji;17;CPStringDrawing.ji;8;CPText.ji;20;CPWindow_Constants.jt;34014;objj_executeFile("_CPImageAndTextView.j", YES);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPControl.j", YES);objj_executeFile("CPStringDrawing.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPWindow_Constants.j", YES);CPRoundedBezelStyle = 1;
CPRegularSquareBezelStyle = 2;
CPThickSquareBezelStyle = 3;
CPThickerSquareBezelStyle = 4;
CPDisclosureBezelStyle = 5;
CPShadowlessSquareBezelStyle = 6;
CPCircularBezelStyle = 7;
CPTexturedSquareBezelStyle = 8;
CPHelpButtonBezelStyle = 9;
CPSmallSquareBezelStyle = 10;
CPTexturedRoundedBezelStyle = 11;
CPRoundRectBezelStyle = 12;
CPRecessedBezelStyle = 13;
CPRoundedDisclosureBezelStyle = 14;
CPHUDBezelStyle = -1;
CPMomentaryLightButton = 0;
CPPushOnPushOffButton = 1;
CPToggleButton = 2;
CPSwitchButton = 3;
CPRadioButton = 4;
CPMomentaryChangeButton = 5;
CPOnOffButton = 6;
CPMomentaryPushInButton = 7;
CPMomentaryPushButton = 0;
CPMomentaryLight = 7;
CPNoButtonMask = 0;
CPContentsButtonMask = 1;
CPPushInButtonMask = 2;
CPGrayButtonMask = 4;
CPBackgroundButtonMask = 8;
CPNoCellMask = CPNoButtonMask;
CPContentsCellMask = CPContentsButtonMask;
CPPushInCellMask = CPPushInButtonMask;
CPChangeGrayCellMask = CPGrayButtonMask;
CPChangeBackgroundCellMask = CPBackgroundButtonMask;
CPButtonStateMixed = CPThemeState("mixed");
CPButtonStateBezelStyleRounded = CPThemeState("rounded");
var CPButtonBezelStyleStateMap = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CPButtonStateBezelStyleRounded, CPRoundedBezelStyle, objj_msgSend(CPNull, "null"), CPRoundRectBezelStyle);
CPButtonDefaultHeight = 25.0;
CPButtonImageOffset = 3.0;
{var the_class = objj_allocateClassPair(CPControl, "CPButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_allowsMixedState"), new objj_ivar("_title"), new objj_ivar("_alternateTitle"), new objj_ivar("_showsStateBy"), new objj_ivar("_highlightsBy"), new objj_ivar("_imageDimsWhenDisabled"), new objj_ivar("_bezelStyle"), new objj_ivar("_controlSize"), new objj_ivar("_keyEquivalent"), new objj_ivar("_keyEquivalentModifierMask"), new objj_ivar("_continuousDelayTimer"), new objj_ivar("_continuousTimer"), new objj_ivar("_periodicDelay"), new objj_ivar("_periodicInterval"), new objj_ivar("_isTracking")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPButton__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "setValue:forThemeAttribute:", CPCenterTextAlignment, "alignment");
        objj_msgSend(self, "setValue:forThemeAttribute:", CPCenterVerticalTextAlignment, "vertical-alignment");
        objj_msgSend(self, "setValue:forThemeAttribute:", CPImageLeft, "image-position");
        objj_msgSend(self, "setValue:forThemeAttribute:", CPImageScaleNone, "image-scaling");
        objj_msgSend(self, "setBezelStyle:", CPRoundRectBezelStyle);
        objj_msgSend(self, "setBordered:", YES);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPButton___init(self, _cmd)
{
    self._controlSize = CPRegularControlSize;
    self._keyEquivalent = "";
    self._keyEquivalentModifierMask = 0;
    self._periodicInterval = 0.05;
    self._periodicDelay = 0.5;
    objj_msgSend(self, "setButtonType:", CPMomentaryPushInButton);
}
,["void"]), new objj_method(sel_getUid("allowsMixedState"), function $CPButton__allowsMixedState(self, _cmd)
{
    return self._allowsMixedState;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsMixedState:"), function $CPButton__setAllowsMixedState_(self, _cmd, aFlag)
{
    aFlag = !!aFlag;
    if (self._allowsMixedState === aFlag)
        return;
    self._allowsMixedState = aFlag;
    if (!self._allowsMixedState && objj_msgSend(self, "state") === CPMixedState)
        objj_msgSend(self, "setState:", CPOnState);
}
,["void","BOOL"]), new objj_method(sel_getUid("setObjectValue:"), function $CPButton__setObjectValue_(self, _cmd, anObjectValue)
{
    if (!anObjectValue || anObjectValue === "" || objj_msgSend(anObjectValue, "intValue") === 0)
        anObjectValue = CPOffState;
    else if (!objj_msgSend(anObjectValue, "isKindOfClass:", objj_msgSend(CPNumber, "class")))
        anObjectValue = CPOnState;
    else if (anObjectValue >= CPOnState)
        anObjectValue = CPOnState;
    else if (anObjectValue < CPOffState)
        if (objj_msgSend(self, "allowsMixedState"))
            anObjectValue = CPMixedState;
        else
            anObjectValue = CPOnState;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "setObjectValue:", anObjectValue);
    switch(objj_msgSend(self, "objectValue")) {
    case CPMixedState:
        objj_msgSend(self, "unsetThemeState:", CPThemeStateSelected);
        objj_msgSend(self, "setThemeState:", CPButtonStateMixed);
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            objj_msgSend(self, "setThemeState:", CPThemeStateHighlighted);
        else
            objj_msgSend(self, "unsetThemeState:", CPThemeStateHighlighted);
        break;
    case CPOnState:
        objj_msgSend(self, "unsetThemeState:", CPButtonStateMixed);
        objj_msgSend(self, "setThemeState:", CPThemeStateSelected);
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            objj_msgSend(self, "setThemeState:", CPThemeStateHighlighted);
        else
            objj_msgSend(self, "unsetThemeState:", CPThemeStateHighlighted);
        break;
    case CPOffState:
        objj_msgSend(self, "unsetThemeState:", CPThemeStateSelected | CPButtonStateMixed | CPThemeStateHighlighted);
    }
}
,["void","id"]), new objj_method(sel_getUid("nextState"), function $CPButton__nextState(self, _cmd)
{
    if (objj_msgSend(self, "allowsMixedState"))
    {
        var value = objj_msgSend(self, "state");
        return value - (value === -1 ? -2 : 1);
    }
    return 1 - objj_msgSend(self, "state");
}
,["CPInteger"]), new objj_method(sel_getUid("setNextState"), function $CPButton__setNextState(self, _cmd)
{
    if (objj_msgSend(self, "infoForBinding:", CPValueBinding))
        objj_msgSend(self, "setAllowsMixedState:", NO);
    objj_msgSend(self, "setState:", objj_msgSend(self, "nextState"));
}
,["void"]), new objj_method(sel_getUid("setState:"), function $CPButton__setState_(self, _cmd, aState)
{
    objj_msgSend(self, "setIntValue:", aState);
}
,["void","CPInteger"]), new objj_method(sel_getUid("state"), function $CPButton__state(self, _cmd)
{
    return objj_msgSend(self, "intValue");
}
,["CPInteger"]), new objj_method(sel_getUid("setTitle:"), function $CPButton__setTitle_(self, _cmd, aTitle)
{
    if (self._title === aTitle)
        return;
    self._title = aTitle;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPString"]), new objj_method(sel_getUid("title"), function $CPButton__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setAlternateTitle:"), function $CPButton__setAlternateTitle_(self, _cmd, aTitle)
{
    if (self._alternateTitle === aTitle)
        return;
    self._alternateTitle = aTitle;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPString"]), new objj_method(sel_getUid("alternateTitle"), function $CPButton__alternateTitle(self, _cmd)
{
    return self._alternateTitle;
}
,["CPString"]), new objj_method(sel_getUid("setImage:"), function $CPButton__setImage_(self, _cmd, anImage)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", anImage, "image");
}
,["void","CPImage"]), new objj_method(sel_getUid("image"), function $CPButton__image(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:inState:", "image", CPThemeStateNormal);
}
,["CPImage"]), new objj_method(sel_getUid("setAlternateImage:"), function $CPButton__setAlternateImage_(self, _cmd, anImage)
{
    objj_msgSend(self, "setValue:forThemeAttribute:inState:", anImage, "image", CPThemeStateHighlighted);
}
,["void","CPImage"]), new objj_method(sel_getUid("alternateImage"), function $CPButton__alternateImage(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:inState:", "image", CPThemeStateHighlighted);
}
,["CPImage"]), new objj_method(sel_getUid("setImageOffset:"), function $CPButton__setImageOffset_(self, _cmd, theImageOffset)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", theImageOffset, "image-offset");
}
,["void","float"]), new objj_method(sel_getUid("imageOffset"), function $CPButton__imageOffset(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "image-offset");
}
,["float"]), new objj_method(sel_getUid("setShowsStateBy:"), function $CPButton__setShowsStateBy_(self, _cmd, aMask)
{
    aMask &= ~CPPushInCellMask;
    if (self._showsStateBy === aMask)
        return;
    self._showsStateBy = aMask;
    if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask) && objj_msgSend(self, "state") != CPOffState)
        objj_msgSend(self, "setThemeState:", CPThemeStateHighlighted);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateHighlighted);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPInteger"]), new objj_method(sel_getUid("showsStateBy"), function $CPButton__showsStateBy(self, _cmd)
{
    return self._showsStateBy;
}
,["CPInteger"]), new objj_method(sel_getUid("setHighlightsBy:"), function $CPButton__setHighlightsBy_(self, _cmd, aMask)
{
    if (self._highlightsBy === aMask)
        return;
    self._highlightsBy = aMask;
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateHighlighted))
    {
        objj_msgSend(self, "setNeedsDisplay:", YES);
        objj_msgSend(self, "setNeedsLayout");
    }
}
,["void","CPInteger"]), new objj_method(sel_getUid("highlightsBy"), function $CPButton__highlightsBy(self, _cmd)
{
    return self._highlightsBy;
}
,["CPInteger"]), new objj_method(sel_getUid("setButtonType:"), function $CPButton__setButtonType_(self, _cmd, aButtonType)
{
    switch(aButtonType) {
    case CPMomentaryLightButton:
        objj_msgSend(self, "setHighlightsBy:", CPChangeGrayCellMask | CPChangeBackgroundCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPNoCellMask);
        break;
    case CPMomentaryPushInButton:
        objj_msgSend(self, "setHighlightsBy:", CPPushInCellMask | CPChangeGrayCellMask | CPChangeBackgroundCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPNoCellMask);
        break;
    case CPMomentaryChangeButton:
        objj_msgSend(self, "setHighlightsBy:", CPContentsCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPNoCellMask);
        break;
    case CPPushOnPushOffButton:
        objj_msgSend(self, "setHighlightsBy:", CPPushInCellMask | CPChangeGrayCellMask | CPChangeBackgroundCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPChangeBackgroundCellMask | CPChangeGrayCellMask);
        break;
    case CPOnOffButton:
        objj_msgSend(self, "setHighlightsBy:", CPChangeGrayCellMask | CPChangeBackgroundCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPChangeGrayCellMask | CPChangeBackgroundCellMask);
        break;
    case CPToggleButton:
        objj_msgSend(self, "setHighlightsBy:", CPPushInCellMask | CPContentsCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPContentsCellMask);
        break;
    case CPSwitchButton:
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "The CPSwitchButton type is not supported in Cappuccino, use the CPCheckBox class instead.");
    case CPRadioButton:
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "The CPRadioButton type is not supported in Cappuccino, use the CPRadio class instead.");
default:
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Unknown button type.");
    }
    objj_msgSend(self, "setImageDimsWhenDisabled:", YES);
}
,["void","CPButtonType"]), new objj_method(sel_getUid("setImageDimsWhenDisabled:"), function $CPButton__setImageDimsWhenDisabled_(self, _cmd, imageShouldDimWhenDisabled)
{
    imageShouldDimWhenDisabled = !!imageShouldDimWhenDisabled;
    if (self._imageDimsWhenDisabled === imageShouldDimWhenDisabled)
        return;
    self._imageDimsWhenDisabled = imageShouldDimWhenDisabled;
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateDisabled))
    {
        objj_msgSend(self, "setNeedsDisplay:", YES);
        objj_msgSend(self, "setNeedsLayout");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("imageDimsWhenDisabled"), function $CPButton__imageDimsWhenDisabled(self, _cmd)
{
    return self._imageDimsWhenDisabled;
}
,["BOOL"]), new objj_method(sel_getUid("setPeriodicDelay:interval:"), function $CPButton__setPeriodicDelay_interval_(self, _cmd, aDelay, anInterval)
{
    self._periodicDelay = aDelay;
    self._periodicInterval = anInterval;
}
,["void","float","float"]), new objj_method(sel_getUid("mouseDown:"), function $CPButton__mouseDown_(self, _cmd, anEvent)
{
    if (objj_msgSend(self, "isContinuous"))
    {
        self._continuousDelayTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", self._periodicDelay, function()
        {
            if (!self._continuousTimer)
                self._continuousTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", self._periodicInterval, self, sel_getUid("onContinousEvent:"), anEvent, YES);
        }, NO);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("onContinousEvent:"), function $CPButton__onContinousEvent_(self, _cmd, aTimer)
{
    if (self._target && self._action && objj_msgSend(self._target, "respondsToSelector:", self._action))
        objj_msgSend(self._target, "performSelector:withObject:", self._action, self);
}
,["void","CPTimer"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPButton__startTrackingAt_(self, _cmd, aPoint)
{
    self._isTracking = YES;
    var startedTracking = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "startTrackingAt:", aPoint);
    if (self._highlightsBy & (CPPushInCellMask | CPChangeGrayCellMask))
    {
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            objj_msgSend(self, "highlight:", objj_msgSend(self, "state") == CPOffState);
        else
            objj_msgSend(self, "highlight:", YES);
    }
    else
    {
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            objj_msgSend(self, "highlight:", objj_msgSend(self, "state") != CPOffState);
        else
            objj_msgSend(self, "highlight:", NO);
    }
    return startedTracking;
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $CPButton__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    self._isTracking = NO;
    if (mouseIsUp && CGRectContainsPoint(objj_msgSend(self, "bounds"), aPoint))
        objj_msgSend(self, "setNextState");
    else
    {
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            objj_msgSend(self, "highlight:", objj_msgSend(self, "state") != CPOffState);
        else
            objj_msgSend(self, "highlight:", NO);
    }
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "invalidateTimers");
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("invalidateTimers"), function $CPButton__invalidateTimers(self, _cmd)
{
    if (self._continuousTimer)
    {
        objj_msgSend(self._continuousTimer, "invalidate");
        self._continuousTimer = nil;
    }
    if (self._continuousDelayTimer)
    {
        objj_msgSend(self._continuousDelayTimer, "invalidate");
        self._continuousDelayTimer = nil;
    }
}
,["void"]), new objj_method(sel_getUid("contentRectForBounds:"), function $CPButton__contentRectForBounds_(self, _cmd, bounds)
{
    var contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    return CGRectInsetByInset(bounds, contentInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("bezelRectForBounds:"), function $CPButton__bezelRectForBounds_(self, _cmd, bounds)
{
    if (!objj_msgSend(self, "isBordered"))
        return bounds;
    var bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset");
    return CGRectInsetByInset(bounds, bezelInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("_minimumFrameSize"), function $CPButton___minimumFrameSize(self, _cmd)
{
    var size = CGSizeMakeZero(),
        contentView = objj_msgSend(self, "ephemeralSubviewNamed:", "content-view");
    if (contentView)
    {
        objj_msgSend(contentView, "sizeToFit");
        size = objj_msgSend(contentView, "frameSize");
    }
    else
        size = objj_msgSend(objj_msgSend(self, "title") || " ", "sizeWithFont:", objj_msgSend(self, "currentValueForThemeAttribute:", "font"));
    var contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset"),
        minSize = objj_msgSend(self, "currentValueForThemeAttribute:", "min-size"),
        maxSize = objj_msgSend(self, "currentValueForThemeAttribute:", "max-size");
    size.width = MAX(size.width + contentInset.left + contentInset.right, minSize.width);
    size.height = MAX(size.height + contentInset.top + contentInset.bottom, minSize.height);
    if (maxSize.width >= 0.0)
        size.width = MIN(size.width, maxSize.width);
    if (maxSize.height >= 0.0)
        size.height = MIN(size.height, maxSize.height);
    return size;
}
,["CGSize"]), new objj_method(sel_getUid("sizeToFit"), function $CPButton__sizeToFit(self, _cmd)
{
    objj_msgSend(self, "layoutSubviews");
    objj_msgSend(self, "setFrameSize:", objj_msgSend(self, "_minimumFrameSize"));
    if (objj_msgSend(self, "ephemeralSubviewNamed:", "content-view"))
        objj_msgSend(self, "layoutSubviews");
}
,["void"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPButton__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "bezel-view")
        return objj_msgSend(self, "bezelRectForBounds:", objj_msgSend(self, "bounds"));
    else if (aName === "content-view")
        return objj_msgSend(self, "contentRectForBounds:", objj_msgSend(self, "bounds"));
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPButton__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "bezel-view")
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(view, "setHitTests:", NO);
        return view;
    }
    else
        return objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMakeZero());
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPButton__layoutSubviews(self, _cmd)
{
    var bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bezel-view", CPWindowBelow, "content-view");
    objj_msgSend(bezelView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
    var contentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-view", CPWindowAbove, "bezel-view");
    if (contentView)
    {
        var title = nil,
            image = nil;
        if (self._isTracking)
        {
            if (self._highlightsBy & CPContentsCellMask)
            {
                if (self._showsStateBy & CPContentsCellMask)
                {
                    title = objj_msgSend(self, "state") == CPOffState && self._alternateTitle ? self._alternateTitle : self._title;
                    image = objj_msgSend(self, "state") == CPOffState && objj_msgSend(self, "alternateImage") ? objj_msgSend(self, "alternateImage") : objj_msgSend(self, "image");
                }
                else
                {
                    title = objj_msgSend(self, "alternateTitle");
                    image = objj_msgSend(self, "alternateImage");
                }
            }
            else if (self._showsStateBy & CPContentsCellMask)
            {
                title = objj_msgSend(self, "state") != CPOffState && self._alternateTitle ? self._alternateTitle : self._title;
                image = objj_msgSend(self, "state") != CPOffState && objj_msgSend(self, "alternateImage") ? objj_msgSend(self, "alternateImage") : objj_msgSend(self, "image");
            }
            else
            {
                title = self._title;
                image = objj_msgSend(self, "image");
            }
        }
        else
        {
            if (self._showsStateBy & CPContentsCellMask)
            {
                title = objj_msgSend(self, "state") != CPOffState && self._alternateTitle ? self._alternateTitle : self._title;
                image = objj_msgSend(self, "state") != CPOffState && objj_msgSend(self, "alternateImage") ? objj_msgSend(self, "alternateImage") : objj_msgSend(self, "image");
            }
            else
            {
                title = self._title;
                image = objj_msgSend(self, "image");
            }
        }
        objj_msgSend(contentView, "setText:", title);
        objj_msgSend(contentView, "setImage:", image);
        objj_msgSend(contentView, "setImageOffset:", objj_msgSend(self, "currentValueForThemeAttribute:", "image-offset"));
        objj_msgSend(contentView, "setFont:", objj_msgSend(self, "currentValueForThemeAttribute:", "font"));
        objj_msgSend(contentView, "setTextColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-color"));
        objj_msgSend(contentView, "setAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "alignment"));
        objj_msgSend(contentView, "setVerticalAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "vertical-alignment"));
        objj_msgSend(contentView, "setLineBreakMode:", objj_msgSend(self, "currentValueForThemeAttribute:", "line-break-mode"));
        objj_msgSend(contentView, "setTextShadowColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-color"));
        objj_msgSend(contentView, "setTextShadowOffset:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-offset"));
        objj_msgSend(contentView, "setImagePosition:", objj_msgSend(self, "currentValueForThemeAttribute:", "image-position"));
        objj_msgSend(contentView, "setImageScaling:", objj_msgSend(self, "currentValueForThemeAttribute:", "image-scaling"));
        objj_msgSend(contentView, "setDimsImage:", objj_msgSend(self, "hasThemeState:", CPThemeStateDisabled) && self._imageDimsWhenDisabled);
    }
}
,["void"]), new objj_method(sel_getUid("setBordered:"), function $CPButton__setBordered_(self, _cmd, shouldBeBordered)
{
    if (shouldBeBordered)
        objj_msgSend(self, "setThemeState:", CPThemeStateBordered);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBordered);
}
,["void","BOOL"]), new objj_method(sel_getUid("isBordered"), function $CPButton__isBordered(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBordered);
}
,["BOOL"]), new objj_method(sel_getUid("setKeyEquivalent:"), function $CPButton__setKeyEquivalent_(self, _cmd, aString)
{
    self._keyEquivalent = aString || "";
    if (aString === CPNewlineCharacter || aString === CPCarriageReturnCharacter)
        objj_msgSend(self, "setThemeState:", CPThemeStateDefault);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateDefault);
}
,["void","CPString"]), new objj_method(sel_getUid("viewWillMoveToWindow:"), function $CPButton__viewWillMoveToWindow_(self, _cmd, aWindow)
{
    var selfWindow = objj_msgSend(self, "window");
    if (selfWindow === aWindow || aWindow === nil)
        return;
    if (objj_msgSend(selfWindow, "defaultButton") === self)
        objj_msgSend(selfWindow, "setDefaultButton:", nil);
    if (objj_msgSend(self, "keyEquivalent") === CPNewlineCharacter || objj_msgSend(self, "keyEquivalent") === CPCarriageReturnCharacter)
        objj_msgSend(aWindow, "setDefaultButton:", self);
}
,["void","CPWindow"]), new objj_method(sel_getUid("keyEquivalent"), function $CPButton__keyEquivalent(self, _cmd)
{
    return self._keyEquivalent;
}
,["CPString"]), new objj_method(sel_getUid("setKeyEquivalentModifierMask:"), function $CPButton__setKeyEquivalentModifierMask_(self, _cmd, aMask)
{
    self._keyEquivalentModifierMask = aMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("keyEquivalentModifierMask"), function $CPButton__keyEquivalentModifierMask(self, _cmd)
{
    return self._keyEquivalentModifierMask;
}
,["unsigned"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $CPButton__performKeyEquivalent_(self, _cmd, anEvent)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "defaultButton") === self)
        return NO;
    if (!objj_msgSend(anEvent, "_triggersKeyEquivalent:withModifierMask:", objj_msgSend(self, "keyEquivalent"), objj_msgSend(self, "keyEquivalentModifierMask")))
        return NO;
    objj_msgSend(self, "performClick:", nil);
    return YES;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("performClick:"), function $CPButton__performClick_(self, _cmd, sender)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "setState:", objj_msgSend(self, "nextState"));
    var shouldHighlight = NO;
    if (self._highlightsBy & (CPPushInCellMask | CPChangeGrayCellMask))
    {
        if (self._showsStateBy & (CPChangeGrayCellMask | CPChangeBackgroundCellMask))
            shouldHighlight = objj_msgSend(self, "state") == CPOffState;
        else
            shouldHighlight = YES;
    }
    objj_msgSend(self, "highlight:", shouldHighlight);
    try    {
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    catch(e)     {
        throw e;
    }    finally     {
        if (shouldHighlight)
            objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.1, self, sel_getUid("unhighlightButtonTimerDidFinish:"), nil, NO);
    }
}
,["void","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPButton___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPTargetBinding || objj_msgSend(aBinding, "hasPrefix:", CPArgumentBinding))
        return objj_msgSend(CPActionBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPButton").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("buttonWithTitle:"), function $CPButton__buttonWithTitle_(self, _cmd, aTitle)
{
    return objj_msgSend(self, "buttonWithTitle:theme:", aTitle, objj_msgSend(CPTheme, "defaultTheme"));
}
,["id","CPString"]), new objj_method(sel_getUid("buttonWithTitle:theme:"), function $CPButton__buttonWithTitle_theme_(self, _cmd, aTitle, aTheme)
{
    var button = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    objj_msgSend(button, "setTheme:", aTheme);
    objj_msgSend(button, "setTitle:", aTitle);
    objj_msgSend(button, "sizeToFit");
    return button;
}
,["id","CPString","CPTheme"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPButton__defaultThemeClass(self, _cmd)
{
    return "button";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPButton__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "image", 0.0, "image-offset", CGInsetMakeZero(), "bezel-inset", CGInsetMakeZero(), "content-inset", objj_msgSend(CPNull, "null"), "bezel-color");
}
,["id"])]);
}{
var the_class = objj_getClass("CPButton")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setBezelStyle:"), function $CPButton__setBezelStyle_(self, _cmd, aBezelStyle)
{
    if (aBezelStyle === self._bezelStyle)
        return;
    var currentState = objj_msgSend(CPButtonBezelStyleStateMap, "objectForKey:", self._bezelStyle),
        newState = objj_msgSend(CPButtonBezelStyleStateMap, "objectForKey:", aBezelStyle);
    if (currentState)
        objj_msgSend(self, "unsetThemeState:", currentState);
    if (newState)
        objj_msgSend(self, "setThemeState:", newState);
    self._bezelStyle = aBezelStyle;
}
,["void","unsigned"]), new objj_method(sel_getUid("bezelStyle"), function $CPButton__bezelStyle(self, _cmd)
{
    return self._bezelStyle;
}
,["unsigned"])]);
}var CPButtonImageKey = "CPButtonImageKey",
    CPButtonAlternateImageKey = "CPButtonAlternateImageKey",
    CPButtonTitleKey = "CPButtonTitleKey",
    CPButtonAlternateTitleKey = "CPButtonAlternateTitleKey",
    CPButtonIsBorderedKey = "CPButtonIsBorderedKey",
    CPButtonAllowsMixedStateKey = "CPButtonAllowsMixedStateKey",
    CPButtonImageDimsWhenDisabledKey = "CPButtonImageDimsWhenDisabledKey",
    CPButtonImagePositionKey = "CPButtonImagePositionKey",
    CPButtonKeyEquivalentKey = "CPButtonKeyEquivalentKey",
    CPButtonKeyEquivalentMaskKey = "CPButtonKeyEquivalentMaskKey",
    CPButtonPeriodicDelayKey = "CPButtonPeriodicDelayKey",
    CPButtonPeriodicIntervalKey = "CPButtonPeriodicIntervalKey",
    CPButtonHighlightsByKey = "CPButtonHighlightsByKey",
    CPButtonShowsStateByKey = "CPButtonShowsStateByKey";
{
var the_class = objj_getClass("CPButton")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPButton\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPButton__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "_init");
        self._title = objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonTitleKey);
        self._alternateTitle = objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonAlternateTitleKey);
        self._allowsMixedState = objj_msgSend(aCoder, "decodeBoolForKey:", CPButtonAllowsMixedStateKey);
        if (objj_msgSend(aCoder, "containsValueForKey:", CPButtonHighlightsByKey))
        {
            self._highlightsBy = objj_msgSend(aCoder, "decodeIntForKey:", CPButtonHighlightsByKey);
            self._showsStateBy = objj_msgSend(aCoder, "decodeIntForKey:", CPButtonShowsStateByKey);
        }
        else
        {
        }
        objj_msgSend(self, "setImageDimsWhenDisabled:", objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonImageDimsWhenDisabledKey));
        if (objj_msgSend(aCoder, "containsValueForKey:", CPButtonImagePositionKey))
            objj_msgSend(self, "setImagePosition:", objj_msgSend(aCoder, "decodeIntForKey:", CPButtonImagePositionKey));
        if (objj_msgSend(aCoder, "containsValueForKey:", CPButtonKeyEquivalentKey))
            objj_msgSend(self, "setKeyEquivalent:", CFData.decodeBase64ToUtf16String(objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonKeyEquivalentKey)));
        if (objj_msgSend(aCoder, "containsValueForKey:", CPButtonPeriodicDelayKey))
            self._periodicDelay = objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonPeriodicDelayKey);
        if (objj_msgSend(aCoder, "containsValueForKey:", CPButtonPeriodicIntervalKey))
            self._periodicInterval = objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonPeriodicIntervalKey);
        self._keyEquivalentModifierMask = objj_msgSend(aCoder, "decodeIntForKey:", CPButtonKeyEquivalentMaskKey);
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPButton__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButton").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(self, "invalidateTimers");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._title, CPButtonTitleKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._alternateTitle, CPButtonAlternateTitleKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsMixedState, CPButtonAllowsMixedStateKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._highlightsBy, CPButtonHighlightsByKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._showsStateBy, CPButtonShowsStateByKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "imageDimsWhenDisabled"), CPButtonImageDimsWhenDisabledKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", objj_msgSend(self, "imagePosition"), CPButtonImagePositionKey);
    if (self._keyEquivalent)
        objj_msgSend(aCoder, "encodeObject:forKey:", CFData.encodeBase64Utf16String(self._keyEquivalent), CPButtonKeyEquivalentKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._keyEquivalentModifierMask, CPButtonKeyEquivalentMaskKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._periodicDelay, CPButtonPeriodicDelayKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._periodicInterval, CPButtonPeriodicIntervalKey);
}
,["void","CPCoder"])]);
}p;13;CPButtonBar.jt;13307;@STATIC;1.0;i;8;CPView.ji;20;CPWindow_Constants.jt;13250;objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);{var the_class = objj_allocateClassPair(CPView, "CPButtonBar"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_hasResizeControl"), new objj_ivar("_resizeControlIsLeftAligned"), new objj_ivar("_buttons")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPButtonBar__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._buttons = [];
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("awakeFromCib"), function $CPButtonBar__awakeFromCib(self, _cmd)
{
    var view = objj_msgSend(self, "superview"),
        subview = self;
    while (view)
    {
        if (objj_msgSend(view, "isKindOfClass:", objj_msgSend(CPSplitView, "class")))
        {
            var viewIndex = objj_msgSend(objj_msgSend(view, "subviews"), "indexOfObject:", subview);
            objj_msgSend(view, "setButtonBar:forDividerAtIndex:", self, viewIndex);
            break;
        }
        subview = view;
        view = objj_msgSend(view, "superview");
    }
}
,["void"]), new objj_method(sel_getUid("setButtons:"), function $CPButtonBar__setButtons_(self, _cmd, buttons)
{
    self._buttons = objj_msgSend(CPArray, "arrayWithArray:", buttons);
    for (var i = 0, count = objj_msgSend(self._buttons, "count"); i < count; i++)
        objj_msgSend(self._buttons[i], "setBordered:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPArray"]), new objj_method(sel_getUid("buttons"), function $CPButtonBar__buttons(self, _cmd)
{
    return objj_msgSend(CPArray, "arrayWithArray:", self._buttons);
}
,["CPArray"]), new objj_method(sel_getUid("setHasResizeControl:"), function $CPButtonBar__setHasResizeControl_(self, _cmd, shouldHaveResizeControl)
{
    if (self._hasResizeControl === shouldHaveResizeControl)
        return;
    self._hasResizeControl = !!shouldHaveResizeControl;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("hasResizeControl"), function $CPButtonBar__hasResizeControl(self, _cmd)
{
    return self._hasResizeControl;
}
,["BOOL"]), new objj_method(sel_getUid("setResizeControlIsLeftAligned:"), function $CPButtonBar__setResizeControlIsLeftAligned_(self, _cmd, shouldBeLeftAligned)
{
    if (self._resizeControlIsLeftAligned === shouldBeLeftAligned)
        return;
    self._resizeControlIsLeftAligned = !!shouldBeLeftAligned;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("resizeControlIsLeftAligned"), function $CPButtonBar__resizeControlIsLeftAligned(self, _cmd)
{
    return self._resizeControlIsLeftAligned;
}
,["BOOL"]), new objj_method(sel_getUid("resizeControlFrame"), function $CPButtonBar__resizeControlFrame(self, _cmd)
{
    var inset = objj_msgSend(self, "currentValueForThemeAttribute:", "resize-control-inset"),
        size = objj_msgSend(self, "currentValueForThemeAttribute:", "resize-control-size"),
        currentSize = objj_msgSend(self, "bounds"),
        leftOrigin = self._resizeControlIsLeftAligned ? 0 : currentSize.size.width - size.width - inset.right - inset.left;
    return CGRectMake(leftOrigin, 0, size.width + inset.left + inset.right, size.height + inset.top + inset.bottom);
}
,["CGRect"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPButtonBar__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "resize-control-view")
    {
        var inset = objj_msgSend(self, "currentValueForThemeAttribute:", "resize-control-inset"),
            size = objj_msgSend(self, "currentValueForThemeAttribute:", "resize-control-size"),
            currentSize = objj_msgSend(self, "bounds");
        if (self._resizeControlIsLeftAligned)
            return CGRectMake(inset.left, inset.top, size.width, size.height);
        else
            return CGRectMake(currentSize.size.width - size.width - inset.right, inset.top, size.width, size.height);
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPButtonBar__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "resize-control-view")
        return objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "createEphemeralSubviewNamed:", aName);
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPButtonBar__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
    var normalColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "button-bezel-color", CPThemeStateNormal),
        highlightedColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "button-bezel-color", CPThemeStateHighlighted),
        disabledColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "button-bezel-color", CPThemeStateDisabled),
        textColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "button-text-color", CPThemeStateNormal);
    var buttonsNotHidden = objj_msgSend(CPArray, "arrayWithArray:", self._buttons),
        count = objj_msgSend(buttonsNotHidden, "count");
    while (count--)
        if (objj_msgSend(buttonsNotHidden[count], "isHidden"))
            objj_msgSend(buttonsNotHidden, "removeObject:", buttonsNotHidden[count]);
    var currentButtonOffset = self._resizeControlIsLeftAligned ? CGRectGetMaxX(objj_msgSend(self, "bounds")) + 1 : -1,
        bounds = objj_msgSend(self, "bounds"),
        height = CGRectGetHeight(bounds) - 1,
        frameWidth = CGRectGetWidth(bounds),
        resizeRect = self._hasResizeControl ? objj_msgSend(self, "rectForEphemeralSubviewNamed:", "resize-control-view") : CGRectMakeZero(),
        resizeWidth = CGRectGetWidth(resizeRect),
        availableWidth = frameWidth - resizeWidth - 1;
    for (var i = 0, count = objj_msgSend(buttonsNotHidden, "count"); i < count; i++)
    {
        var button = buttonsNotHidden[i],
            width = CGRectGetWidth(objj_msgSend(button, "frame"));
        if (availableWidth > width)
            availableWidth -= width;
        else
            break;
        if (self._resizeControlIsLeftAligned)
        {
            objj_msgSend(button, "setFrame:", CGRectMake(currentButtonOffset - width, 1, width, height));
            currentButtonOffset -= width - 1;
        }
        else
        {
            objj_msgSend(button, "setFrame:", CGRectMake(currentButtonOffset, 1, width, height));
            currentButtonOffset += width - 1;
        }
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", normalColor, "bezel-color", CPThemeStateNormal | CPThemeStateBordered);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", highlightedColor, "bezel-color", CPThemeStateHighlighted | CPThemeStateBordered);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", disabledColor, "bezel-color", CPThemeStateDisabled | CPThemeStateBordered);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", textColor, "text-color", CPThemeStateBordered);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", normalColor, "bezel-color", CPThemeStateNormal | CPThemeStateBordered | CPPopUpButtonStatePullsDown);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", highlightedColor, "bezel-color", CPThemeStateHighlighted | CPThemeStateBordered | CPPopUpButtonStatePullsDown);
        objj_msgSend(button, "setValue:forThemeAttribute:inState:", disabledColor, "bezel-color", CPThemeStateDisabled | CPThemeStateBordered | CPPopUpButtonStatePullsDown);
        objj_msgSend(self, "addSubview:", button);
    }
    if (self._hasResizeControl)
    {
        var resizeControlView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "resize-control-view", CPWindowAbove, nil);
        objj_msgSend(resizeControlView, "setAutoresizingMask:", self._resizeControlIsLeftAligned ? CPViewMaxXMargin : CPViewMinXMargin);
        objj_msgSend(resizeControlView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "resize-control-color"));
    }
}
,["void"]), new objj_method(sel_getUid("setFrameSize:"), function $CPButtonBar__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CGSize"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("plusButton"), function $CPButtonBar__plusButton(self, _cmd)
{
    var button = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 35, 25)),
        image = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "button-image-plus", objj_msgSend(CPButtonBar, "class"));
    objj_msgSend(button, "setBordered:", NO);
    objj_msgSend(button, "setImage:", image);
    objj_msgSend(button, "setImagePosition:", CPImageOnly);
    return button;
}
,["id"]), new objj_method(sel_getUid("minusButton"), function $CPButtonBar__minusButton(self, _cmd)
{
    var button = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 35, 25)),
        image = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "button-image-minus", objj_msgSend(CPButtonBar, "class"));
    objj_msgSend(button, "setBordered:", NO);
    objj_msgSend(button, "setImage:", image);
    objj_msgSend(button, "setImagePosition:", CPImageOnly);
    return button;
}
,["id"]), new objj_method(sel_getUid("actionPopupButton"), function $CPButtonBar__actionPopupButton(self, _cmd)
{
    var button = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 35, 25)),
        image = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "button-image-action", objj_msgSend(CPButtonBar, "class"));
    objj_msgSend(button, "addItemWithTitle:", nil);
    objj_msgSend(objj_msgSend(button, "lastItem"), "setImage:", image);
    objj_msgSend(button, "setImagePosition:", CPImageOnly);
    objj_msgSend(button, "setValue:forThemeAttribute:", CGInsetMake(0, 0, 0, 0), "content-inset");
    objj_msgSend(button, "setPullsDown:", YES);
    return button;
}
,["id"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPButtonBar__defaultThemeClass(self, _cmd)
{
    return "button-bar";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPButtonBar__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGInsetMake(0.0, 0.0, 0.0, 0.0), "resize-control-inset", CGSizeMakeZero(), "resize-control-size", objj_msgSend(CPNull, "null"), "resize-control-color", objj_msgSend(CPNull, "null"), "bezel-color", objj_msgSend(CPNull, "null"), "button-bezel-color", objj_msgSend(CPNull, "null"), "button-text-color", objj_msgSend(CPNull, "null"), "button-image-plus", objj_msgSend(CPNull, "null"), "button-image-minus", objj_msgSend(CPNull, "null"), "button-image-action");
}
,["id"])]);
}var CPButtonBarHasResizeControlKey = "CPButtonBarHasResizeControlKey",
    CPButtonBarResizeControlIsLeftAlignedKey = "CPButtonBarResizeControlIsLeftAlignedKey",
    CPButtonBarButtonsKey = "CPButtonBarButtonsKey";
{
var the_class = objj_getClass("CPButtonBar")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPButtonBar\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("encodeWithCoder:"), function $CPButtonBar__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._hasResizeControl, CPButtonBarHasResizeControlKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._resizeControlIsLeftAligned, CPButtonBarResizeControlIsLeftAlignedKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._buttons, CPButtonBarButtonsKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("initWithCoder:"), function $CPButtonBar__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPButtonBar").super_class }, "initWithCoder:", aCoder))
    {
        self._buttons = objj_msgSend(aCoder, "decodeObjectForKey:", CPButtonBarButtonsKey) || [];
        self._hasResizeControl = objj_msgSend(aCoder, "decodeBoolForKey:", CPButtonBarHasResizeControlKey);
        self._resizeControlIsLeftAligned = objj_msgSend(aCoder, "decodeBoolForKey:", CPButtonBarResizeControlIsLeftAlignedKey);
    }
    return self;
}
,["id","CPCoder"])]);
}p;12;CPCheckBox.jt;5036;@STATIC;1.0;i;10;CPButton.jt;5002;objj_executeFile("CPButton.j", YES);CPCheckBoxImageOffset = 4.0;
{var the_class = objj_allocateClassPair(CPButton, "CPCheckBox"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPCheckBox__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCheckBox").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "setHighlightsBy:", CPContentsCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPContentsCellMask);
        objj_msgSend(self, "setImagePosition:", CPImageLeft);
        objj_msgSend(self, "setAlignment:", CPLeftTextAlignment);
        objj_msgSend(self, "setBordered:", NO);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("takeStateFromKeyPath:ofObjects:"), function $CPCheckBox__takeStateFromKeyPath_ofObjects_(self, _cmd, aKeyPath, objects)
{
    var count = objects.length,
        value = objj_msgSend(objects[0], "valueForKeyPath:", aKeyPath) ? CPOnState : CPOffState;
    objj_msgSend(self, "setAllowsMixedState:", NO);
    objj_msgSend(self, "setState:", value);
    while (count-- > 1)
    {
        if (value !== (objj_msgSend(objects[count], "valueForKeyPath:", aKeyPath) ? CPOnState : CPOffState))
        {
            objj_msgSend(self, "setAllowsMixedState:", YES);
            objj_msgSend(self, "setState:", CPMixedState);
        }
    }
}
,["void","CPString","CPArray"]), new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"), function $CPCheckBox__takeValueFromKeyPath_ofObjects_(self, _cmd, aKeyPath, objects)
{
    objj_msgSend(self, "takeStateFromKeyPath:ofObjects:", aKeyPath, objects);
}
,["void","CPString","CPArray"]), new objj_method(sel_getUid("image"), function $CPCheckBox__image(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "image");
}
,["CPImage"]), new objj_method(sel_getUid("alternateImage"), function $CPCheckBox__alternateImage(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "image");
}
,["CPImage"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPCheckBox__startTrackingAt_(self, _cmd, aPoint)
{
    var startedTracking = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCheckBox").super_class }, "startTrackingAt:", aPoint);
    objj_msgSend(self, "highlight:", YES);
    return startedTracking;
}
,["BOOL","CGPoint"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("checkBoxWithTitle:theme:"), function $CPCheckBox__checkBoxWithTitle_theme_(self, _cmd, aTitle, aTheme)
{
    return objj_msgSend(self, "buttonWithTitle:theme:", aTitle, aTheme);
}
,["id","CPString","CPTheme"]), new objj_method(sel_getUid("checkBoxWithTitle:"), function $CPCheckBox__checkBoxWithTitle_(self, _cmd, aTitle)
{
    return objj_msgSend(self, "buttonWithTitle:", aTitle);
}
,["id","CPString"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPCheckBox__defaultThemeClass(self, _cmd)
{
    return "check-box";
}
,["CPString"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPCheckBox___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding)
        return objj_msgSend(_CPCheckBoxValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPCheckBox").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPCheckBoxValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"), function $_CPCheckBoxValueBinder___updatePlaceholdersWithOptions_(self, _cmd, options)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCheckBoxValueBinder").super_class }, "_updatePlaceholdersWithOptions:", options);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPMixedState, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPOffState, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPOffState, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPOffState, CPNullMarker, YES);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPCheckBoxValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setAllowsMixedState:", aValue === CPMixedState);
    objj_msgSend(self._source, "setState:", aValue);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPCheckBoxValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "setState:", aValue);
}
,["void","id","CPString"])]);
}p;12;CPClipView.jt;7292;@STATIC;1.0;i;8;CPView.jt;7261;objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPView, "CPClipView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_documentView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setDocumentView:"), function $CPClipView__setDocumentView_(self, _cmd, aView)
{
    if (self._documentView == aView)
        return;
    if (self._documentView)
    {
        var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPViewFrameDidChangeNotification, self._documentView);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPViewBoundsDidChangeNotification, self._documentView);
        objj_msgSend(self._documentView, "removeFromSuperview");
    }
    self._documentView = aView;
    if (self._documentView)
    {
        objj_msgSend(self, "addSubview:", self._documentView);
        objj_msgSend(self, "_observeDocumentView");
    }
}
,["void","CPView"]), new objj_method(sel_getUid("_observeDocumentView"), function $CPClipView___observeDocumentView(self, _cmd)
{
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    objj_msgSend(self._documentView, "setPostsFrameChangedNotifications:", YES);
    objj_msgSend(self._documentView, "setPostsBoundsChangedNotifications:", YES);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("viewFrameChanged:"), CPViewFrameDidChangeNotification, self._documentView);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("viewBoundsChanged:"), CPViewBoundsDidChangeNotification, self._documentView);
}
,["void"]), new objj_method(sel_getUid("documentView"), function $CPClipView__documentView(self, _cmd)
{
    return self._documentView;
}
,["id"]), new objj_method(sel_getUid("constrainScrollPoint:"), function $CPClipView__constrainScrollPoint_(self, _cmd, aPoint)
{
    if (!self._documentView)
        return CGPointMakeZero();
    var documentFrame = objj_msgSend(self._documentView, "frame");
    aPoint.x = MAX(0.0, MIN(aPoint.x, MAX(CGRectGetWidth(documentFrame) - CGRectGetWidth(self._bounds), 0.0)));
    aPoint.y = MAX(0.0, MIN(aPoint.y, MAX(CGRectGetHeight(documentFrame) - CGRectGetHeight(self._bounds), 0.0)));
    return aPoint;
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("setBoundsOrigin:"), function $CPClipView__setBoundsOrigin_(self, _cmd, aPoint)
{
    if (CGPointEqualToPoint(self._bounds.origin, aPoint))
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPClipView").super_class }, "setBoundsOrigin:", aPoint);
    var superview = objj_msgSend(self, "superview"),
        scrollViewClass = objj_getClass("CPScrollView");
    if (objj_msgSend(superview, "isKindOfClass:", scrollViewClass))
        objj_msgSend(superview, "reflectScrolledClipView:", self);
}
,["void","CGPoint"]), new objj_method(sel_getUid("scrollToPoint:"), function $CPClipView__scrollToPoint_(self, _cmd, aPoint)
{
    objj_msgSend(self, "setBoundsOrigin:", objj_msgSend(self, "constrainScrollPoint:", aPoint));
}
,["void","CGPoint"]), new objj_method(sel_getUid("viewBoundsChanged:"), function $CPClipView__viewBoundsChanged_(self, _cmd, aNotification)
{
    objj_msgSend(self, "_constrainScrollPoint");
}
,["void","CPNotification"]), new objj_method(sel_getUid("viewFrameChanged:"), function $CPClipView__viewFrameChanged_(self, _cmd, aNotification)
{
    objj_msgSend(self, "_constrainScrollPoint");
}
,["void","CPNotification"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $CPClipView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPClipView").super_class }, "resizeSubviewsWithOldSize:", aSize);
    objj_msgSend(self, "_constrainScrollPoint");
}
,["void","CGSize"]), new objj_method(sel_getUid("_constrainScrollPoint"), function $CPClipView___constrainScrollPoint(self, _cmd)
{
    var oldScrollPoint = objj_msgSend(self, "bounds").origin;
    objj_msgSend(self, "scrollToPoint:", oldScrollPoint);
    if (!CGPointEqualToPoint(oldScrollPoint, objj_msgSend(self, "bounds").origin))
        return;
    var superview = objj_msgSend(self, "superview"),
        scrollViewClass = objj_getClass("CPScrollView");
    if (objj_msgSend(superview, "isKindOfClass:", scrollViewClass))
        objj_msgSend(superview, "reflectScrolledClipView:", self);
}
,["void"]), new objj_method(sel_getUid("autoscroll:"), function $CPClipView__autoscroll_(self, _cmd, anEvent)
{
    var bounds = objj_msgSend(self, "bounds"),
        eventLocation = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        superview = objj_msgSend(self, "superview"),
        deltaX = 0,
        deltaY = 0;
    if (CGRectContainsPoint(bounds, eventLocation))
        return NO;
    if (!objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPScrollView, "class")) || objj_msgSend(superview, "hasVerticalScroller"))
    {
        if (eventLocation.y < CGRectGetMinY(bounds))
            deltaY = CGRectGetMinY(bounds) - eventLocation.y;
        else if (eventLocation.y > CGRectGetMaxY(bounds))
            deltaY = CGRectGetMaxY(bounds) - eventLocation.y;
        if (deltaY < -bounds.size.height)
            deltaY = -bounds.size.height;
        if (deltaY > bounds.size.height)
            deltaY = bounds.size.height;
    }
    if (!objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPScrollView, "class")) || objj_msgSend(superview, "hasHorizontalScroller"))
    {
        if (eventLocation.x < CGRectGetMinX(bounds))
            deltaX = CGRectGetMinX(bounds) - eventLocation.x;
        else if (eventLocation.x > CGRectGetMaxX(bounds))
            deltaX = CGRectGetMaxX(bounds) - eventLocation.x;
        if (deltaX < -bounds.size.width)
            deltaX = -bounds.size.width;
        if (deltaX > bounds.size.width)
            deltaX = bounds.size.width;
    }
    return objj_msgSend(self, "scrollToPoint:", CGPointMake(bounds.origin.x - deltaX, bounds.origin.y - deltaY));
}
,["BOOL","CPEvent"])]);
}var CPClipViewDocumentViewKey = "CPScrollViewDocumentView";
{
var the_class = objj_getClass("CPClipView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPClipView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPClipView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPClipView").super_class }, "initWithCoder:", aCoder))
    {
        self._documentView = objj_msgSend(aCoder, "decodeObjectForKey:", CPClipViewDocumentViewKey);
        objj_msgSend(self, "_observeDocumentView");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPClipView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPClipView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._documentView, CPClipViewDocumentViewKey);
}
,["void","CPCoder"])]);
}p;18;CPCollectionView.jt;46937;@STATIC;1.0;I;20;Foundation/CPArray.jI;19;Foundation/CPData.jI;23;Foundation/CPIndexSet.jI;28;Foundation/CPKeyedArchiver.jI;30;Foundation/CPKeyedUnarchiver.ji;22;CPCollectionViewItem.ji;17;CPCompatibility.ji;24;CPDragServer_Constants.ji;14;CPPasteboard.ji;8;CPView.jt;46663;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPData.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("Foundation/CPKeyedArchiver.j", NO);objj_executeFile("Foundation/CPKeyedUnarchiver.j", NO);objj_executeFile("CPCollectionViewItem.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPDragServer_Constants.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPView.j", YES);var HORIZONTAL_MARGIN = 2;
{var the_class = objj_allocateClassPair(CPView, "CPCollectionView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_content"), new objj_ivar("_items"), new objj_ivar("_itemData"), new objj_ivar("_itemPrototype"), new objj_ivar("_itemForDragging"), new objj_ivar("_cachedItems"), new objj_ivar("_maxNumberOfRows"), new objj_ivar("_maxNumberOfColumns"), new objj_ivar("_minItemSize"), new objj_ivar("_maxItemSize"), new objj_ivar("_backgroundColors"), new objj_ivar("_tileWidth"), new objj_ivar("_isSelectable"), new objj_ivar("_allowsMultipleSelection"), new objj_ivar("_allowsEmptySelection"), new objj_ivar("_selectionIndexes"), new objj_ivar("_itemSize"), new objj_ivar("_horizontalMargin"), new objj_ivar("_verticalMargin"), new objj_ivar("_numberOfRows"), new objj_ivar("_numberOfColumns"), new objj_ivar("_delegate"), new objj_ivar("_mouseDownEvent"), new objj_ivar("_needsMinMaxItemSizeUpdate"), new objj_ivar("_storedFrameSize"), new objj_ivar("_uniformSubviewsResizing"), new objj_ivar("_lockResizing"), new objj_ivar("_currentDropIndex"), new objj_ivar("_currentDragOperation"), new objj_ivar("_dropView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("uniformSubviewsResizing"), function $CPCollectionView__uniformSubviewsResizing(self, _cmd)
{
    return self._uniformSubviewsResizing;
}
,["BOOL"]), new objj_method(sel_getUid("setUniformSubviewsResizing:"), function $CPCollectionView__setUniformSubviewsResizing_(self, _cmd, newValue)
{
    self._uniformSubviewsResizing = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithFrame:"), function $CPCollectionView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._maxNumberOfRows = 0;
        self._maxNumberOfColumns = 0;
        self._minItemSize = CGSizeMakeZero();
        self._maxItemSize = CGSizeMakeZero();
        objj_msgSend(self, "setBackgroundColors:", nil);
        self._verticalMargin = 5.0;
        self._isSelectable = YES;
        self._allowsEmptySelection = YES;
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPCollectionView___init(self, _cmd)
{
    self._content = [];
    self._items = [];
    self._cachedItems = [];
    self._numberOfColumns = CPNotFound;
    self._numberOfRows = CPNotFound;
    self._itemSize = CGSizeMakeZero();
    self._selectionIndexes = objj_msgSend(CPIndexSet, "indexSet");
    self._storedFrameSize = CGSizeMakeZero();
    self._needsMinMaxItemSizeUpdate = YES;
    self._uniformSubviewsResizing = NO;
    self._lockResizing = NO;
    self._currentDropIndex = -1;
    self._currentDragOperation = CPDragOperationNone;
    self._dropView = nil;
    objj_msgSend(self, "setAutoresizesSubviews:", NO);
    objj_msgSend(self, "setAutoresizingMask:", 0);
}
,["void"]), new objj_method(sel_getUid("setItemPrototype:"), function $CPCollectionView__setItemPrototype_(self, _cmd, anItem)
{
    self._cachedItems = [];
    self._itemData = nil;
    self._itemForDragging = nil;
    self._itemPrototype = anItem;
    objj_msgSend(self, "_reloadContentCachingRemovedItems:", NO);
}
,["void","CPCollectionViewItem"]), new objj_method(sel_getUid("itemPrototype"), function $CPCollectionView__itemPrototype(self, _cmd)
{
    return self._itemPrototype;
}
,["CPCollectionViewItem"]), new objj_method(sel_getUid("newItemForRepresentedObject:"), function $CPCollectionView__newItemForRepresentedObject_(self, _cmd, anObject)
{
    var item = nil;
    if (self._cachedItems.length)
        item = self._cachedItems.pop();
    else
        item = objj_msgSend(self._itemPrototype, "copy");
    objj_msgSend(item, "setRepresentedObject:", anObject);
    objj_msgSend(objj_msgSend(item, "view"), "setFrameSize:", self._itemSize);
    return item;
}
,["CPCollectionViewItem","id"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPCollectionView__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("isFirstResponder"), function $CPCollectionView__isFirstResponder(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self;
}
,["BOOL"]), new objj_method(sel_getUid("setContent:"), function $CPCollectionView__setContent_(self, _cmd, anArray)
{
    self._content = anArray;
    objj_msgSend(self, "reloadContent");
}
,["void","CPArray"]), new objj_method(sel_getUid("content"), function $CPCollectionView__content(self, _cmd)
{
    return self._content;
}
,["CPArray"]), new objj_method(sel_getUid("items"), function $CPCollectionView__items(self, _cmd)
{
    return self._items;
}
,["CPArray"]), new objj_method(sel_getUid("setSelectable:"), function $CPCollectionView__setSelectable_(self, _cmd, isSelectable)
{
    if (self._isSelectable == isSelectable)
        return;
    self._isSelectable = isSelectable;
    if (!self._isSelectable)
    {
        var index = CPNotFound,
            itemCount = objj_msgSend(self._items, "count");
        while ((index = objj_msgSend(self._selectionIndexes, "indexGreaterThanIndex:", index)) != CPNotFound && index < itemCount)
            objj_msgSend(self._items[index], "setSelected:", NO);
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("isSelectable"), function $CPCollectionView__isSelectable(self, _cmd)
{
    return self._isSelectable;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsEmptySelection:"), function $CPCollectionView__setAllowsEmptySelection_(self, _cmd, shouldAllowEmptySelection)
{
    self._allowsEmptySelection = shouldAllowEmptySelection;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsEmptySelection"), function $CPCollectionView__allowsEmptySelection(self, _cmd)
{
    return self._allowsEmptySelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsMultipleSelection:"), function $CPCollectionView__setAllowsMultipleSelection_(self, _cmd, shouldAllowMultipleSelection)
{
    self._allowsMultipleSelection = shouldAllowMultipleSelection;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsMultipleSelection"), function $CPCollectionView__allowsMultipleSelection(self, _cmd)
{
    return self._allowsMultipleSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setSelectionIndexes:"), function $CPCollectionView__setSelectionIndexes_(self, _cmd, anIndexSet)
{
    if (!anIndexSet)
        anIndexSet = objj_msgSend(CPIndexSet, "indexSet");
    if (!self._isSelectable || objj_msgSend(self._selectionIndexes, "isEqual:", anIndexSet))
        return;
    var index = CPNotFound,
        itemCount = objj_msgSend(self._items, "count");
    while ((index = objj_msgSend(self._selectionIndexes, "indexGreaterThanIndex:", index)) !== CPNotFound && index < itemCount)
        objj_msgSend(self._items[index], "setSelected:", NO);
    self._selectionIndexes = anIndexSet;
    var index = CPNotFound;
    while ((index = objj_msgSend(self._selectionIndexes, "indexGreaterThanIndex:", index)) !== CPNotFound)
        objj_msgSend(self._items[index], "setSelected:", YES);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "selectionIndexes");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "selectionIndexes", self), "reverseSetValueFor:", "selectionIndexes");
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionViewDidChangeSelection:")))
    {
        CPLog.warn("The delegate method collectionViewDidChangeSelection: is deprecated and will be removed in a future version, please bind to selectionIndexes instead.");
        objj_msgSend(self._delegate, "collectionViewDidChangeSelection:", self);
    }
}
,["void","CPIndexSet"]), new objj_method(sel_getUid("selectionIndexes"), function $CPCollectionView__selectionIndexes(self, _cmd)
{
    return objj_msgSend(self._selectionIndexes, "copy");
}
,["CPIndexSet"]), new objj_method(sel_getUid("reloadContent"), function $CPCollectionView__reloadContent(self, _cmd)
{
    objj_msgSend(self, "_reloadContentCachingRemovedItems:", YES);
}
,["void"]), new objj_method(sel_getUid("_reloadContentCachingRemovedItems:"), function $CPCollectionView___reloadContentCachingRemovedItems_(self, _cmd, shouldCache)
{
    var count = self._items.length;
    while (count--)
    {
        objj_msgSend(objj_msgSend(self._items[count], "view"), "removeFromSuperview");
        objj_msgSend(self._items[count], "setSelected:", NO);
        if (shouldCache)
            self._cachedItems.push(self._items[count]);
    }
    self._items = [];
    if (!self._itemPrototype)
        return;
    var index = 0;
    count = self._content.length;
    for (; index < count; ++index)
    {
        self._items.push(objj_msgSend(self, "newItemForRepresentedObject:", self._content[index]));
        objj_msgSend(self, "addSubview:", objj_msgSend(self._items[index], "view"));
    }
    index = CPNotFound;
    while ((index = objj_msgSend(self._selectionIndexes, "indexGreaterThanIndex:", index)) != CPNotFound && index < count)
        objj_msgSend(self._items[index], "setSelected:", YES);
    objj_msgSend(self, "tileIfNeeded:", NO);
}
,["void","BOOL"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $CPCollectionView__resizeSubviewsWithOldSize_(self, _cmd, oldBoundsSize)
{
}
,["void","CGSize"]), new objj_method(sel_getUid("resizeWithOldSuperviewSize:"), function $CPCollectionView__resizeWithOldSuperviewSize_(self, _cmd, oldBoundsSize)
{
    if (self._lockResizing)
        return;
    self._lockResizing = YES;
    objj_msgSend(self, "tile");
    self._lockResizing = NO;
}
,["void","CGSize"]), new objj_method(sel_getUid("tile"), function $CPCollectionView__tile(self, _cmd)
{
    objj_msgSend(self, "tileIfNeeded:", !self._uniformSubviewsResizing);
}
,["void"]), new objj_method(sel_getUid("tileIfNeeded:"), function $CPCollectionView__tileIfNeeded_(self, _cmd, lazyFlag)
{
    var frameSize = objj_msgSend(objj_msgSend(self, "superview"), "frameSize"),
        count = self._items.length,
        oldNumberOfColumns = self._numberOfColumns,
        oldNumberOfRows = self._numberOfRows,
        oldItemSize = self._itemSize,
        storedFrameSize = self._storedFrameSize;
    if (!frameSize)
        return;
    objj_msgSend(self, "_updateMinMaxItemSizeIfNeeded");
    objj_msgSend(self, "_computeGridWithSize:count:", frameSize, function(__input) { if (arguments.length) return count = __input; return count; });
    objj_msgSend(self, "setFrameSize:", self._storedFrameSize);
    if (!lazyFlag || self._numberOfColumns !== oldNumberOfColumns || self._numberOfRows !== oldNumberOfRows || !CGSizeEqualToSize(self._itemSize, oldItemSize))
        objj_msgSend(self, "displayItems:frameSize:itemSize:columns:rows:count:", self._items, self._storedFrameSize, self._itemSize, self._numberOfColumns, self._numberOfRows, count);
}
,["void","BOOL"]), new objj_method(sel_getUid("_computeGridWithSize:count:"), function $CPCollectionView___computeGridWithSize_count_(self, _cmd, aSuperviewSize, countRef)
{
    var width = aSuperviewSize.width,
        height = aSuperviewSize.height,
        itemSize = CGSizeMakeCopy(self._minItemSize),
        maxItemSizeWidth = self._maxItemSize.width,
        maxItemSizeHeight = self._maxItemSize.height,
        itemsCount = objj_msgSend(self._items, "count"),
        numberOfRows,
        numberOfColumns;
    numberOfColumns = FLOOR(width / itemSize.width);
    if (maxItemSizeWidth == 0)
        numberOfColumns = MIN(numberOfColumns, self._maxNumberOfColumns);
    if (self._maxNumberOfColumns > 0)
        numberOfColumns = MIN(MIN(self._maxNumberOfColumns, itemsCount), numberOfColumns);
    numberOfColumns = MAX(1.0, numberOfColumns);
    itemSize.width = FLOOR(width / numberOfColumns);
    if (maxItemSizeWidth > 0)
    {
        itemSize.width = MIN(maxItemSizeWidth, itemSize.width);
        if (numberOfColumns == 1)
            itemSize.width = MIN(maxItemSizeWidth, width);
    }
    numberOfRows = CEIL(itemsCount / numberOfColumns);
    if (self._maxNumberOfRows > 0)
        numberOfRows = MIN(numberOfRows, self._maxNumberOfRows);
    height = MAX(height, numberOfRows * (self._minItemSize.height + self._verticalMargin));
    var itemSizeHeight = FLOOR(height / numberOfRows);
    if (maxItemSizeHeight > 0)
        itemSizeHeight = MIN(itemSizeHeight, maxItemSizeHeight);
    self._itemSize = CGSizeMake(MAX(self._minItemSize.width, itemSize.width), MAX(self._minItemSize.height, itemSizeHeight));
    self._storedFrameSize = CGSizeMake(MAX(width, self._minItemSize.width), height);
    self._numberOfColumns = numberOfColumns;
    self._numberOfRows = numberOfRows;
    countRef(MIN(itemsCount, numberOfColumns * numberOfRows));
}
,["void","CGSize","Function"]), new objj_method(sel_getUid("displayItems:frameSize:itemSize:columns:rows:count:"), function $CPCollectionView__displayItems_frameSize_itemSize_columns_rows_count_(self, _cmd, displayItems, aFrameSize, anItemSize, numberOfColumns, numberOfRows, displayCount)
{
    self._horizontalMargin = self._uniformSubviewsResizing ? FLOOR((aFrameSize.width - numberOfColumns * anItemSize.width) / (numberOfColumns + 1)) : HORIZONTAL_MARGIN;
    var x = self._horizontalMargin,
        y = -anItemSize.height;
    objj_msgSend(displayItems, "enumerateObjectsUsingBlock:", function(item, idx, stop)
    {
        var view = objj_msgSend(item, "view");
        if (idx >= displayCount)
        {
            objj_msgSend(view, "setFrameOrigin:", CGPointMake(-anItemSize.width, -anItemSize.height));
            return;
        }
        if (idx % numberOfColumns == 0)
        {
            x = self._horizontalMargin;
            y += self._verticalMargin + anItemSize.height;
        }
        objj_msgSend(view, "setFrameOrigin:", CGPointMake(x, y));
        objj_msgSend(view, "setFrameSize:", anItemSize);
        x += anItemSize.width + self._horizontalMargin;
    });
}
,["void","CPArray","CGSize","CGSize","CPInteger","CPInteger","CPInteger"]), new objj_method(sel_getUid("_updateMinMaxItemSizeIfNeeded"), function $CPCollectionView___updateMinMaxItemSizeIfNeeded(self, _cmd)
{
    if (!self._needsMinMaxItemSizeUpdate)
        return;
    var prototypeView;
    if (self._itemPrototype && (prototypeView = objj_msgSend(self._itemPrototype, "view")))
    {
        if (self._minItemSize.width == 0)
            self._minItemSize.width = objj_msgSend(prototypeView, "frameSize").width;
        if (self._minItemSize.height == 0)
            self._minItemSize.height = objj_msgSend(prototypeView, "frameSize").height;
        if (self._maxItemSize.height == 0 && !(objj_msgSend(prototypeView, "autoresizingMask") & CPViewHeightSizable))
            self._maxItemSize.height = objj_msgSend(prototypeView, "frameSize").height;
        if (self._maxItemSize.width == 0 && !(objj_msgSend(prototypeView, "autoresizingMask") & CPViewWidthSizable))
            self._maxItemSize.width = objj_msgSend(prototypeView, "frameSize").width;
        self._needsMinMaxItemSizeUpdate = NO;
    }
}
,["void"]), new objj_method(sel_getUid("setMaxNumberOfRows:"), function $CPCollectionView__setMaxNumberOfRows_(self, _cmd, aMaxNumberOfRows)
{
    if (self._maxNumberOfRows == aMaxNumberOfRows)
        return;
    self._maxNumberOfRows = aMaxNumberOfRows;
    objj_msgSend(self, "tile");
}
,["void","unsigned"]), new objj_method(sel_getUid("maxNumberOfRows"), function $CPCollectionView__maxNumberOfRows(self, _cmd)
{
    return self._maxNumberOfRows;
}
,["unsigned"]), new objj_method(sel_getUid("setMaxNumberOfColumns:"), function $CPCollectionView__setMaxNumberOfColumns_(self, _cmd, aMaxNumberOfColumns)
{
    if (self._maxNumberOfColumns == aMaxNumberOfColumns)
        return;
    self._maxNumberOfColumns = aMaxNumberOfColumns;
    objj_msgSend(self, "tile");
}
,["void","unsigned"]), new objj_method(sel_getUid("maxNumberOfColumns"), function $CPCollectionView__maxNumberOfColumns(self, _cmd)
{
    return self._maxNumberOfColumns;
}
,["unsigned"]), new objj_method(sel_getUid("numberOfRows"), function $CPCollectionView__numberOfRows(self, _cmd)
{
    return self._numberOfRows;
}
,["unsigned"]), new objj_method(sel_getUid("numberOfColumns"), function $CPCollectionView__numberOfColumns(self, _cmd)
{
    return self._numberOfColumns;
}
,["unsigned"]), new objj_method(sel_getUid("setMinItemSize:"), function $CPCollectionView__setMinItemSize_(self, _cmd, aSize)
{
    if (aSize === nil || aSize === undefined)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Invalid value provided for minimum size");
    if (CGSizeEqualToSize(self._minItemSize, aSize))
        return;
    self._minItemSize = CGSizeMakeCopy(aSize);
    if (CGSizeEqualToSize(self._minItemSize, CGSizeMakeZero()))
        self._needsMinMaxItemSizeUpdate = YES;
    objj_msgSend(self, "tile");
}
,["void","CGSize"]), new objj_method(sel_getUid("minItemSize"), function $CPCollectionView__minItemSize(self, _cmd)
{
    return self._minItemSize;
}
,["CGSize"]), new objj_method(sel_getUid("setMaxItemSize:"), function $CPCollectionView__setMaxItemSize_(self, _cmd, aSize)
{
    if (CGSizeEqualToSize(self._maxItemSize, aSize))
        return;
    self._maxItemSize = CGSizeMakeCopy(aSize);
    objj_msgSend(self, "tile");
}
,["void","CGSize"]), new objj_method(sel_getUid("maxItemSize"), function $CPCollectionView__maxItemSize(self, _cmd)
{
    return self._maxItemSize;
}
,["CGSize"]), new objj_method(sel_getUid("setBackgroundColors:"), function $CPCollectionView__setBackgroundColors_(self, _cmd, backgroundColors)
{
    if (self._backgroundColors === backgroundColors)
        return;
    self._backgroundColors = backgroundColors;
    if (!self._backgroundColors)
        self._backgroundColors = [objj_msgSend(CPColor, "whiteColor")];
    if (objj_msgSend(self._backgroundColors, "count") === 1)
        objj_msgSend(self, "setBackgroundColor:", self._backgroundColors[0]);
    else
        objj_msgSend(self, "setBackgroundColor:", nil);
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPArray"]), new objj_method(sel_getUid("backgroundColors"), function $CPCollectionView__backgroundColors(self, _cmd)
{
    return self._backgroundColors;
}
,["CPArray"]), new objj_method(sel_getUid("mouseUp:"), function $CPCollectionView__mouseUp_(self, _cmd, anEvent)
{
    if (objj_msgSend(self._selectionIndexes, "count") && objj_msgSend(anEvent, "clickCount") == 2 && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionView:didDoubleClickOnItemAtIndex:")))
        objj_msgSend(self._delegate, "collectionView:didDoubleClickOnItemAtIndex:", self, objj_msgSend(self._selectionIndexes, "firstIndex"));
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $CPCollectionView__mouseDown_(self, _cmd, anEvent)
{
    self._mouseDownEvent = anEvent;
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        index = objj_msgSend(self, "_indexAtPoint:", location);
    if (index >= 0 && index < self._items.length)
    {
        if (self._allowsMultipleSelection && (objj_msgSend(anEvent, "modifierFlags") & CPPlatformActionKeyMask || objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask))
        {
            if (objj_msgSend(anEvent, "modifierFlags") & CPPlatformActionKeyMask)
            {
                var indexes = objj_msgSend(self._selectionIndexes, "copy");
                if (objj_msgSend(indexes, "containsIndex:", index))
                    objj_msgSend(indexes, "removeIndex:", index);
                else
                    objj_msgSend(indexes, "addIndex:", index);
            }
            else if (objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask)
            {
                var firstSelectedIndex = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex"),
                    newSelectedRange = nil;
                if (firstSelectedIndex === CPNotFound)
                    firstSelectedIndex = index;
                if (index < firstSelectedIndex)
                    newSelectedRange = CPMakeRange(index, firstSelectedIndex - index + 1);
                else
                    newSelectedRange = CPMakeRange(firstSelectedIndex, index - firstSelectedIndex + 1);
                indexes = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "copy");
                objj_msgSend(indexes, "addIndexesInRange:", newSelectedRange);
            }
        }
        else
            indexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", index);
        objj_msgSend(self, "setSelectionIndexes:", indexes);
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
    }
    else if (self._allowsEmptySelection)
        objj_msgSend(self, "setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSet"));
}
,["void","CPEvent"]), new objj_method(sel_getUid("setVerticalMargin:"), function $CPCollectionView__setVerticalMargin_(self, _cmd, aVerticalMargin)
{
    if (self._verticalMargin == aVerticalMargin)
        return;
    self._verticalMargin = aVerticalMargin;
    objj_msgSend(self, "tile");
}
,["void","float"]), new objj_method(sel_getUid("setUniformSubviewsResizing:"), function $CPCollectionView__setUniformSubviewsResizing_(self, _cmd, flag)
{
    self._uniformSubviewsResizing = flag;
    objj_msgSend(self, "tileIfNeeded:", NO);
}
,["void","float"]), new objj_method(sel_getUid("verticalMargin"), function $CPCollectionView__verticalMargin(self, _cmd)
{
    return self._verticalMargin;
}
,["float"]), new objj_method(sel_getUid("setDelegate:"), function $CPCollectionView__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPCollectionView__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("menuForEvent:"), function $CPCollectionView__menuForEvent_(self, _cmd, theEvent)
{
    if (!objj_msgSend(objj_msgSend(self, "delegate"), "respondsToSelector:", sel_getUid("collectionView:menuForItemAtIndex:")))
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionView").super_class }, "menuForEvent:", theEvent);
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(theEvent, "locationInWindow"), nil),
        index = objj_msgSend(self, "_indexAtPoint:", location);
    return objj_msgSend(self._delegate, "collectionView:menuForItemAtIndex:", self, index);
}
,["CPMenu","CPEvent"]), new objj_method(sel_getUid("_indexAtPoint:"), function $CPCollectionView___indexAtPoint_(self, _cmd, thePoint)
{
    var column = FLOOR(thePoint.x / (self._itemSize.width + self._horizontalMargin));
    if (column < self._numberOfColumns)
    {
        var row = FLOOR(thePoint.y / (self._itemSize.height + self._verticalMargin));
        if (row < self._numberOfRows)
            return row * self._numberOfColumns + column;
    }
    return CPNotFound;
}
,["int","CGPoint"]), new objj_method(sel_getUid("itemAtIndex:"), function $CPCollectionView__itemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._items, "objectAtIndex:", anIndex);
}
,["CPCollectionViewItem","unsigned"]), new objj_method(sel_getUid("frameForItemAtIndex:"), function $CPCollectionView__frameForItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "itemAtIndex:", anIndex), "view"), "frame");
}
,["CGRect","unsigned"]), new objj_method(sel_getUid("frameForItemsAtIndexes:"), function $CPCollectionView__frameForItemsAtIndexes_(self, _cmd, anIndexSet)
{
    var indexArray = [],
        frame = CGRectNull;
    objj_msgSend(anIndexSet, "getIndexes:maxCount:inIndexRange:", indexArray, -1, nil);
    var index = 0,
        count = objj_msgSend(indexArray, "count");
    for (; index < count; ++index)
        frame = CGRectUnion(frame, objj_msgSend(self, "frameForItemAtIndex:", indexArray[index]));
    return frame;
}
,["CGRect","CPIndexSet"])]);
}{
var the_class = objj_getClass("CPCollectionView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("pasteboard:provideDataForType:"), function $CPCollectionView__pasteboard_provideDataForType_(self, _cmd, aPasteboard, aType)
{
    objj_msgSend(aPasteboard, "setData:forType:", objj_msgSend(self._delegate, "collectionView:dataForItemsAtIndexes:forType:", self, self._selectionIndexes, aType), aType);
}
,["void","CPPasteboard","CPString"]), new objj_method(sel_getUid("_createDropIndicatorIfNeeded"), function $CPCollectionView___createDropIndicatorIfNeeded(self, _cmd)
{
    if (!self._dropView)
        self._dropView = objj_msgSend(objj_msgSend(_CPCollectionViewDropIndicator, "alloc"), "initWithFrame:", CGRectMake(-8, -8, 0, 0));
    objj_msgSend(self._dropView, "setFrameSize:", CGSizeMake(10, self._itemSize.height + self._verticalMargin));
    objj_msgSend(self, "addSubview:", self._dropView);
}
,["void"]), new objj_method(sel_getUid("mouseDragged:"), function $CPCollectionView__mouseDragged_(self, _cmd, anEvent)
{
    if (!self._mouseDownEvent)
        return;
    objj_msgSend(self, "_createDropIndicatorIfNeeded");
    var locationInWindow = objj_msgSend(anEvent, "locationInWindow"),
        mouseDownLocationInWindow = objj_msgSend(self._mouseDownEvent, "locationInWindow");
    if (ABS(locationInWindow.x - mouseDownLocationInWindow.x) < 3 && ABS(locationInWindow.y - mouseDownLocationInWindow.y) < 3)
        return;
    if (!objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionView:dragTypesForItemsAtIndexes:")))
        return;
    if (!objj_msgSend(self._selectionIndexes, "count"))
        return;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionView:canDragItemsAtIndexes:withEvent:")) && !objj_msgSend(self._delegate, "collectionView:canDragItemsAtIndexes:withEvent:", self, self._selectionIndexes, self._mouseDownEvent))
        return;
    var dragTypes = objj_msgSend(self._delegate, "collectionView:dragTypesForItemsAtIndexes:", self, self._selectionIndexes);
    objj_msgSend(objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard), "declareTypes:owner:", dragTypes, self);
    var dragImageOffset = CGSizeMakeZero(),
        view = objj_msgSend(self, "_draggingViewForItemsAtIndexes:withEvent:offset:", self._selectionIndexes, self._mouseDownEvent, dragImageOffset);
    objj_msgSend(view, "setFrameSize:", self._itemSize);
    objj_msgSend(view, "setAlphaValue:", 0.7);
    var dragLocation = objj_msgSend(self, "convertPoint:fromView:", locationInWindow, nil),
        dragPoint = CGPointMake(dragLocation.x - self._itemSize.width / 2, dragLocation.y - self._itemSize.height / 2);
    objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", view, dragPoint, dragImageOffset, self._mouseDownEvent, nil, self, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_draggingViewForItemsAtIndexes:withEvent:offset:"), function $CPCollectionView___draggingViewForItemsAtIndexes_withEvent_offset_(self, _cmd, indexes, anEvent, offset)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionView:draggingViewForItemsAtIndexes:withEvent:offset:")))
        return objj_msgSend(self._delegate, "collectionView:draggingViewForItemsAtIndexes:withEvent:offset:", self, indexes, anEvent, offset);
    return objj_msgSend(self, "draggingViewForItemsAtIndexes:withEvent:offset:", indexes, anEvent, offset);
}
,["CPView","CPIndexSet","CPEvent","CGPoint"]), new objj_method(sel_getUid("draggingViewForItemsAtIndexes:withEvent:offset:"), function $CPCollectionView__draggingViewForItemsAtIndexes_withEvent_offset_(self, _cmd, indexes, event, dragImageOffset)
{
    var idx = self._content[objj_msgSend(indexes, "firstIndex")];
    if (!self._itemForDragging)
        self._itemForDragging = objj_msgSend(self, "newItemForRepresentedObject:", idx);
    else
        objj_msgSend(self._itemForDragging, "setRepresentedObject:", idx);
    return objj_msgSend(self._itemForDragging, "view");
}
,["CPView","CPIndexSet","CPEvent","CGPoint"]), new objj_method(sel_getUid("_canDragItemsAtIndexes:withEvent:"), function $CPCollectionView___canDragItemsAtIndexes_withEvent_(self, _cmd, indexes, anEvent)
{
    if (objj_msgSend(self, "respondsToSelector:", sel_getUid("collectionView:canDragItemsAtIndexes:withEvent:")))
        return objj_msgSend(self._delegate, "collectionView:canDragItemsAtIndexes:withEvent:", self, indexes, anEvent);
    return YES;
}
,["BOOL","CPIndexSet","CPEvent"]), new objj_method(sel_getUid("draggingEntered:"), function $CPCollectionView__draggingEntered_(self, _cmd, draggingInfo)
{
    var dropIndex = -1,
        dropIndexRef = function(__input) { if (arguments.length) return dropIndex = __input; return dropIndex; },
        dragOp = objj_msgSend(self, "_validateDragWithInfo:dropIndex:dropOperation:", draggingInfo, dropIndexRef, 1);
    dropIndex = dropIndexRef();
    objj_msgSend(self, "_createDropIndicatorIfNeeded");
    objj_msgSend(self, "_updateDragAndDropStateWithDraggingInfo:newDragOperation:newDropIndex:newDropOperation:", draggingInfo, dragOp, dropIndex, 1);
    return self._currentDragOperation;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("draggingUpdated:"), function $CPCollectionView__draggingUpdated_(self, _cmd, draggingInfo)
{
    if (!objj_msgSend(self, "_dropIndexDidChange:", draggingInfo))
        return self._currentDragOperation;
    var dropIndex,
        dropIndexRef = function(__input) { if (arguments.length) return dropIndex = __input; return dropIndex; };
    var dragOperation = objj_msgSend(self, "_validateDragWithInfo:dropIndex:dropOperation:", draggingInfo, dropIndexRef, 1);
    dropIndex = dropIndexRef();
    objj_msgSend(self, "_updateDragAndDropStateWithDraggingInfo:newDragOperation:newDropIndex:newDropOperation:", draggingInfo, dragOperation, dropIndex, 1);
    return dragOperation;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("_validateDragWithInfo:dropIndex:dropOperation:"), function $CPCollectionView___validateDragWithInfo_dropIndex_dropOperation_(self, _cmd, draggingInfo, dropIndexRef, dropOperation)
{
    var result = CPDragOperationMove,
        dropIndex = objj_msgSend(self, "_dropIndexForDraggingInfo:proposedDropOperation:", draggingInfo, dropOperation);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("collectionView:validateDrop:proposedIndex:dropOperation:")))
    {
        var dropIndexRef2 = function(__input) { if (arguments.length) return dropIndex = __input; return dropIndex; };
        result = objj_msgSend(self._delegate, "collectionView:validateDrop:proposedIndex:dropOperation:", self, draggingInfo, dropIndexRef2, dropOperation);
        if (result !== CPDragOperationNone)
        {
            dropIndex = dropIndexRef2();
        }
    }
    dropIndexRef(dropIndex);
    return result;
}
,["CPDragOperation","id","Function","int"]), new objj_method(sel_getUid("draggingExited:"), function $CPCollectionView__draggingExited_(self, _cmd, draggingInfo)
{
    objj_msgSend(self, "_updateDragAndDropStateWithDraggingInfo:newDragOperation:newDropIndex:newDropOperation:", draggingInfo, 0, -1, 1);
}
,["void","id"]), new objj_method(sel_getUid("draggingEnded:"), function $CPCollectionView__draggingEnded_(self, _cmd, draggingInfo)
{
    objj_msgSend(self, "_updateDragAndDropStateWithDraggingInfo:newDragOperation:newDropIndex:newDropOperation:", draggingInfo, 0, -1, 1);
}
,["void","id"]), new objj_method(sel_getUid("performDragOperation:"), function $CPCollectionView__performDragOperation_(self, _cmd, draggingInfo)
{
    var result = NO;
    if (self._currentDragOperation && self._currentDropIndex !== -1)
        result = objj_msgSend(self._delegate, "collectionView:acceptDrop:index:dropOperation:", self, draggingInfo, self._currentDropIndex, 1);
    objj_msgSend(self, "draggingEnded:", draggingInfo);
    return result;
}
,["BOOL","id"]), new objj_method(sel_getUid("_updateDragAndDropStateWithDraggingInfo:newDragOperation:newDropIndex:newDropOperation:"), function $CPCollectionView___updateDragAndDropStateWithDraggingInfo_newDragOperation_newDropIndex_newDropOperation_(self, _cmd, draggingInfo, dragOperation, dropIndex, dropOperation)
{
    self._currentDropIndex = dropIndex;
    self._currentDragOperation = dragOperation;
    var frameOrigin,
        dropviewFrameWidth = CGRectGetWidth(objj_msgSend(self._dropView, "frame"));
    if (self._currentDropIndex == -1 || self._currentDragOperation == CPDragOperationNone)
        frameOrigin = CGPointMake(-dropviewFrameWidth, 0);
    else if (self._currentDropIndex == 0)
        frameOrigin = CGPointMake(0, 0);
    else
    {
        var offset;
        if (self._currentDropIndex % self._numberOfColumns !== 0 || self._currentDropIndex == objj_msgSend(self._items, "count"))
        {
            dropIndex = self._currentDropIndex - 1;
            offset = (self._horizontalMargin - dropviewFrameWidth) / 2;
        }
        else
        {
            offset = -self._itemSize.width - dropviewFrameWidth - (self._horizontalMargin - dropviewFrameWidth) / 2;
        }
        var rect = objj_msgSend(self, "frameForItemAtIndex:", dropIndex);
        frameOrigin = CGPointMake(CGRectGetMaxX(rect) + offset, rect.origin.y - self._verticalMargin);
    }
    objj_msgSend(self._dropView, "setFrameOrigin:", frameOrigin);
}
,["void","id","CPDragOperation","CPInteger","CPInteger"]), new objj_method(sel_getUid("_dropIndexDidChange:"), function $CPCollectionView___dropIndexDidChange_(self, _cmd, draggingInfo)
{
    var dropIndex = objj_msgSend(self, "_dropIndexForDraggingInfo:proposedDropOperation:", draggingInfo, 1);
    if (dropIndex == CPNotFound)
        dropIndex = objj_msgSend(objj_msgSend(self, "content"), "count");
    return self._currentDropIndex !== dropIndex;
}
,["BOOL","id"]), new objj_method(sel_getUid("_dropIndexForDraggingInfo:proposedDropOperation:"), function $CPCollectionView___dropIndexForDraggingInfo_proposedDropOperation_(self, _cmd, draggingInfo, dropOperation)
{
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(draggingInfo, "draggingLocation"), nil),
        locationX = location.x + self._itemSize.width / 2;
    var column = MIN(FLOOR(locationX / (self._itemSize.width + self._horizontalMargin)), self._numberOfColumns),
        row = FLOOR(location.y / (self._itemSize.height + self._verticalMargin));
    if (row >= self._numberOfRows - 1)
    {
        if (row >= self._numberOfRows)
        {
            row = self._numberOfRows - 1;
            column = self._numberOfColumns;
        }
        return MIN(row * self._numberOfColumns + column, objj_msgSend(self._items, "count"));
    }
    return row * self._numberOfColumns + column;
}
,["CPInteger","id","int"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPCollectionViewDropIndicator"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("drawRect:"), function $_CPCollectionViewDropIndicator__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        width = CGRectGetWidth(aRect),
        circleRect = CGRectMake(1, 1, width - 2, width - 2);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithHexString:", "4886ca"));
    CGContextSetFillColor(context, objj_msgSend(CPColor, "whiteColor"));
    CGContextSetLineWidth(context, 3);
    CGContextFillRect(context, circleRect);
    CGContextStrokeEllipseInRect(context, circleRect);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, FLOOR(width / 2), CGRectGetMinY(aRect) + width);
    CGContextAddLineToPoint(context, FLOOR(width / 2), CGRectGetHeight(aRect));
    CGContextStrokePath(context);
}
,["void","CGRect"])]);
}{
var the_class = objj_getClass("CPCollectionView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_modifySelectionWithNewIndex:direction:expand:"), function $CPCollectionView___modifySelectionWithNewIndex_direction_expand_(self, _cmd, anIndex, aDirection, shouldExpand)
{
    var count = objj_msgSend(objj_msgSend(self, "items"), "count");
    if (count === 0)
        return;
    anIndex = MIN(MAX(anIndex, 0), count - 1);
    if (self._allowsMultipleSelection && shouldExpand)
    {
        var indexes = objj_msgSend(self._selectionIndexes, "copy"),
            bottomAnchor = objj_msgSend(indexes, "firstIndex"),
            topAnchor = objj_msgSend(indexes, "lastIndex");
        if (aDirection === -1)
            objj_msgSend(indexes, "addIndexesInRange:", CPMakeRange(anIndex, bottomAnchor - anIndex + 1));
        else
            objj_msgSend(indexes, "addIndexesInRange:", CPMakeRange(topAnchor, anIndex - topAnchor + 1));
    }
    else
        indexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", anIndex);
    objj_msgSend(self, "setSelectionIndexes:", indexes);
    objj_msgSend(self, "_scrollToSelection");
}
,["void","int","int","BOOL"]), new objj_method(sel_getUid("_scrollToSelection"), function $CPCollectionView___scrollToSelection(self, _cmd)
{
    var frame = objj_msgSend(self, "frameForItemsAtIndexes:", objj_msgSend(self, "selectionIndexes"));
    if (!CGRectIsEmpty(frame))
        objj_msgSend(self, "scrollRectToVisible:", frame);
}
,["void"]), new objj_method(sel_getUid("moveLeft:"), function $CPCollectionView__moveLeft_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex");
    if (index === CPNotFound)
        index = objj_msgSend(objj_msgSend(self, "items"), "count");
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", index - 1, -1, NO);
}
,["void","id"]), new objj_method(sel_getUid("moveLeftAndModifySelection:"), function $CPCollectionView__moveLeftAndModifySelection_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex");
    if (index === CPNotFound)
        index = objj_msgSend(objj_msgSend(self, "items"), "count");
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", index - 1, -1, YES);
}
,["void","id"]), new objj_method(sel_getUid("moveRight:"), function $CPCollectionView__moveRight_(self, _cmd, sender)
{
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", objj_msgSend(objj_msgSend(self, "selectionIndexes"), "lastIndex") + 1, 1, NO);
}
,["void","id"]), new objj_method(sel_getUid("moveRightAndModifySelection:"), function $CPCollectionView__moveRightAndModifySelection_(self, _cmd, sender)
{
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", objj_msgSend(objj_msgSend(self, "selectionIndexes"), "lastIndex") + 1, 1, YES);
}
,["void","id"]), new objj_method(sel_getUid("moveDown:"), function $CPCollectionView__moveDown_(self, _cmd, sender)
{
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", objj_msgSend(objj_msgSend(self, "selectionIndexes"), "lastIndex") + objj_msgSend(self, "numberOfColumns"), 1, NO);
}
,["void","id"]), new objj_method(sel_getUid("moveDownAndModifySelection:"), function $CPCollectionView__moveDownAndModifySelection_(self, _cmd, sender)
{
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", objj_msgSend(objj_msgSend(self, "selectionIndexes"), "lastIndex") + objj_msgSend(self, "numberOfColumns"), 1, YES);
}
,["void","id"]), new objj_method(sel_getUid("moveUp:"), function $CPCollectionView__moveUp_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex");
    if (index == CPNotFound)
        index = objj_msgSend(objj_msgSend(self, "items"), "count");
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", index - objj_msgSend(self, "numberOfColumns"), -1, NO);
}
,["void","id"]), new objj_method(sel_getUid("moveUpAndModifySelection:"), function $CPCollectionView__moveUpAndModifySelection_(self, _cmd, sender)
{
    var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex");
    if (index == CPNotFound)
        index = objj_msgSend(objj_msgSend(self, "items"), "count");
    objj_msgSend(self, "_modifySelectionWithNewIndex:direction:expand:", index - objj_msgSend(self, "numberOfColumns"), -1, YES);
}
,["void","id"]), new objj_method(sel_getUid("deleteBackward:"), function $CPCollectionView__deleteBackward_(self, _cmd, sender)
{
    if (objj_msgSend(objj_msgSend(self, "delegate"), "respondsToSelector:", sel_getUid("collectionView:shouldDeleteItemsAtIndexes:")))
    {
        objj_msgSend(objj_msgSend(self, "delegate"), "collectionView:shouldDeleteItemsAtIndexes:", self, objj_msgSend(self, "selectionIndexes"));
        var index = objj_msgSend(objj_msgSend(self, "selectionIndexes"), "firstIndex");
        if (index > objj_msgSend(objj_msgSend(self, "content"), "count") - 1)
            objj_msgSend(self, "setSelectionIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(objj_msgSend(self, "content"), "count") - 1));
        objj_msgSend(self, "_scrollToSelection");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("keyDown:"), function $CPCollectionView__keyDown_(self, _cmd, anEvent)
{
    objj_msgSend(self, "interpretKeyEvents:", [anEvent]);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setAutoresizingMask:"), function $CPCollectionView__setAutoresizingMask_(self, _cmd, aMask)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionView").super_class }, "setAutoresizingMask:", 0);
}
,["void","int"])]);
}{
var the_class = objj_getClass("CPCollectionView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("rectForItemAtIndex:"), function $CPCollectionView__rectForItemAtIndex_(self, _cmd, anIndex)
{
    _CPReportLenientDeprecation(objj_msgSend(self, "class"), _cmd, sel_getUid("frameForItemAtIndex:"));
    return objj_msgSend(self, "frameForItemAtIndex:", anIndex);
}
,["CGRect","int"]), new objj_method(sel_getUid("rectForItemsAtIndexes:"), function $CPCollectionView__rectForItemsAtIndexes_(self, _cmd, anIndexSet)
{
    _CPReportLenientDeprecation(objj_msgSend(self, "class"), _cmd, sel_getUid("frameForItemsAtIndexes:"));
    return objj_msgSend(self, "frameForItemsAtIndexes:", anIndexSet);
}
,["CGRect","CPIndexSet"])]);
}var CPCollectionViewMinItemSizeKey = "CPCollectionViewMinItemSizeKey",
    CPCollectionViewMaxItemSizeKey = "CPCollectionViewMaxItemSizeKey",
    CPCollectionViewVerticalMarginKey = "CPCollectionViewVerticalMarginKey",
    CPCollectionViewMaxNumberOfRowsKey = "CPCollectionViewMaxNumberOfRowsKey",
    CPCollectionViewMaxNumberOfColumnsKey = "CPCollectionViewMaxNumberOfColumnsKey",
    CPCollectionViewSelectableKey = "CPCollectionViewSelectableKey",
    CPCollectionViewAllowsMultipleSelectionKey = "CPCollectionViewAllowsMultipleSelectionKey",
    CPCollectionViewBackgroundColorsKey = "CPCollectionViewBackgroundColorsKey";
{
var the_class = objj_getClass("CPCollectionView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCollectionView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCollectionView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._minItemSize = objj_msgSend(aCoder, "decodeSizeForKey:", CPCollectionViewMinItemSizeKey);
        self._maxItemSize = objj_msgSend(aCoder, "decodeSizeForKey:", CPCollectionViewMaxItemSizeKey);
        self._maxNumberOfRows = objj_msgSend(aCoder, "decodeIntForKey:", CPCollectionViewMaxNumberOfRowsKey);
        self._maxNumberOfColumns = objj_msgSend(aCoder, "decodeIntForKey:", CPCollectionViewMaxNumberOfColumnsKey);
        self._verticalMargin = objj_msgSend(aCoder, "decodeFloatForKey:", CPCollectionViewVerticalMarginKey);
        self._isSelectable = objj_msgSend(aCoder, "decodeBoolForKey:", CPCollectionViewSelectableKey);
        self._allowsMultipleSelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPCollectionViewAllowsMultipleSelectionKey);
        objj_msgSend(self, "setBackgroundColors:", objj_msgSend(aCoder, "decodeObjectForKey:", CPCollectionViewBackgroundColorsKey));
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCollectionView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionView").super_class }, "encodeWithCoder:", aCoder);
    if (!CGSizeEqualToSize(self._minItemSize, CGSizeMakeZero()))
        objj_msgSend(aCoder, "encodeSize:forKey:", self._minItemSize, CPCollectionViewMinItemSizeKey);
    if (!CGSizeEqualToSize(self._maxItemSize, CGSizeMakeZero()))
        objj_msgSend(aCoder, "encodeSize:forKey:", self._maxItemSize, CPCollectionViewMaxItemSizeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._maxNumberOfRows, CPCollectionViewMaxNumberOfRowsKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._maxNumberOfColumns, CPCollectionViewMaxNumberOfColumnsKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isSelectable, CPCollectionViewSelectableKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsMultipleSelection, CPCollectionViewAllowsMultipleSelectionKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._verticalMargin, CPCollectionViewVerticalMarginKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._backgroundColors, CPCollectionViewBackgroundColorsKey);
}
,["void","CPCoder"])]);
}p;22;CPCollectionViewItem.jt;2443;@STATIC;1.0;i;18;CPViewController.jt;2401;objj_executeFile("CPViewController.j", YES);{var the_class = objj_allocateClassPair(CPViewController, "CPCollectionViewItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isSelected"), new objj_ivar("_cachedArchive")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("copy"), function $CPCollectionViewItem__copy(self, _cmd)
{
    var cibName = objj_msgSend(self, "cibName"),
        copy;
    if (cibName)
    {
        copy = objj_msgSend(objj_msgSend(objj_msgSend(self, "class"), "alloc"), "initWithCibName:bundle:", cibName, objj_msgSend(self, "cibBundle"));
    }
    else
    {
        if (!self._cachedArchive)
            self._cachedArchive = objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self);
        copy = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", self._cachedArchive);
    }
    objj_msgSend(copy, "setRepresentedObject:", objj_msgSend(self, "representedObject"));
    objj_msgSend(copy, "setSelected:", self._isSelected);
    return copy;
}
,["id"]), new objj_method(sel_getUid("setRepresentedObject:"), function $CPCollectionViewItem__setRepresentedObject_(self, _cmd, anObject)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCollectionViewItem").super_class }, "setRepresentedObject:", anObject);
    var view = objj_msgSend(self, "view");
    if (objj_msgSend(view, "respondsToSelector:", sel_getUid("setRepresentedObject:")))
        objj_msgSend(view, "setRepresentedObject:", objj_msgSend(self, "representedObject"));
}
,["void","id"]), new objj_method(sel_getUid("setSelected:"), function $CPCollectionViewItem__setSelected_(self, _cmd, shouldBeSelected)
{
    shouldBeSelected = !!shouldBeSelected;
    if (self._isSelected === shouldBeSelected)
        return;
    self._isSelected = shouldBeSelected;
    var view = objj_msgSend(self, "view");
    if (objj_msgSend(view, "respondsToSelector:", sel_getUid("setSelected:")))
        objj_msgSend(view, "setSelected:", objj_msgSend(self, "isSelected"));
}
,["void","BOOL"]), new objj_method(sel_getUid("isSelected"), function $CPCollectionViewItem__isSelected(self, _cmd)
{
    return self._isSelected;
}
,["BOOL"]), new objj_method(sel_getUid("collectionView"), function $CPCollectionViewItem__collectionView(self, _cmd)
{
    return objj_msgSend(self._view, "superview");
}
,["CPCollectionView"])]);
}p;9;CPColor.jt;31891;@STATIC;1.0;I;21;Foundation/CPObject.ji;19;CPGraphicsContext.ji;9;CGColor.ji;17;CPCompatibility.ji;9;CPImage.jt;31773;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPGraphicsContext.j", YES);objj_executeFile("CGColor.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPImage.j", YES);CPColorPatternIsVertical = YES;
CPColorPatternIsHorizontal = NO;
var _redComponent = 0,
    _greenComponent = 1,
    _blueComponent = 2,
    _alphaCompnent = 3;
var _hueComponent = 0,
    _saturationComponent = 1,
    _brightnessComponent = 2;
var cachedBlackColor,
    cachedRedColor,
    cachedGreenColor,
    cachedBlueColor,
    cachedYellowColor,
    cachedGrayColor,
    cachedLightGrayColor,
    cachedDarkGrayColor,
    cachedWhiteColor,
    cachedBrownColor,
    cachedCyanColor,
    cachedMagentaColor,
    cachedOrangeColor,
    cachedPurpleColor,
    cachedShadowColor,
    cachedClearColor;
{var the_class = objj_allocateClassPair(CPObject, "CPColor"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_components"), new objj_ivar("_patternImage"), new objj_ivar("_cssString")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_initWithCSSString:"), function $CPColor___initWithCSSString_(self, _cmd, aString)
{
    if (aString.indexOf("rgb") == CPNotFound)
        return nil;
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColor").super_class }, "init");
    var startingIndex = aString.indexOf("("),
        parts = (aString.substring(startingIndex + 1)).split(',');
    self._components = [parseInt(parts[0], 10) / 255.0, parseInt(parts[1], 10) / 255.0, parseInt(parts[2], 10) / 255.0, parts[3] ? parseFloat(parts[3], 10) : 1.0];
    objj_msgSend(self, "_initCSSStringFromComponents");
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("_initWithRGBA:"), function $CPColor___initWithRGBA_(self, _cmd, components)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColor").super_class }, "init");
    if (self)
    {
        self._components = components;
        objj_msgSend(self, "_initCSSStringFromComponents");
    }
    return self;
}
,["id","CPArray"]), new objj_method(sel_getUid("_initCSSStringFromComponents"), function $CPColor___initCSSStringFromComponents(self, _cmd)
{
    var hasAlpha = CPFeatureIsCompatible(CPCSSRGBAFeature) && self._components[3] != 1.0;
    self._cssString = (hasAlpha ? "rgba(" : "rgb(") + parseInt(self._components[0] * 255.0) + ", " + parseInt(self._components[1] * 255.0) + ", " + parseInt(self._components[2] * 255.0) + (hasAlpha ? ", " + self._components[3] : "") + ")";
}
,["void"]), new objj_method(sel_getUid("_initWithPatternImage:"), function $CPColor___initWithPatternImage_(self, _cmd, anImage)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColor").super_class }, "init");
    if (self)
    {
        self._patternImage = anImage;
        self._cssString = "url(\"" + objj_msgSend(self._patternImage, "filename") + "\")";
        self._components = [0.0, 0.0, 0.0, 1.0];
    }
    return self;
}
,["id","CPImage"]), new objj_method(sel_getUid("patternImage"), function $CPColor__patternImage(self, _cmd)
{
    return self._patternImage;
}
,["CPImage"]), new objj_method(sel_getUid("alphaComponent"), function $CPColor__alphaComponent(self, _cmd)
{
    return self._components[3];
}
,["float"]), new objj_method(sel_getUid("blueComponent"), function $CPColor__blueComponent(self, _cmd)
{
    return self._components[2];
}
,["float"]), new objj_method(sel_getUid("greenComponent"), function $CPColor__greenComponent(self, _cmd)
{
    return self._components[1];
}
,["float"]), new objj_method(sel_getUid("redComponent"), function $CPColor__redComponent(self, _cmd)
{
    return self._components[0];
}
,["float"]), new objj_method(sel_getUid("components"), function $CPColor__components(self, _cmd)
{
    return self._components;
}
,["CPArray"]), new objj_method(sel_getUid("colorWithAlphaComponent:"), function $CPColor__colorWithAlphaComponent_(self, _cmd, anAlphaComponent)
{
    var components = self._components.slice();
    components[components.length - 1] = anAlphaComponent;
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "class"), "alloc"), "_initWithRGBA:", components);
}
,["CPColor","float"]), new objj_method(sel_getUid("colorUsingColorSpaceName:"), function $CPColor__colorUsingColorSpaceName_(self, _cmd, aColorSpaceName)
{
    return self;
}
,["CPColor","id"]), new objj_method(sel_getUid("hsbComponents"), function $CPColor__hsbComponents(self, _cmd)
{
    var red = ROUND(self._components[_redComponent] * 255.0),
        green = ROUND(self._components[_greenComponent] * 255.0),
        blue = ROUND(self._components[_blueComponent] * 255.0);
    var max = MAX(red, green, blue),
        min = MIN(red, green, blue),
        delta = max - min;
    var brightness = max / 255.0,
        saturation = max != 0 ? delta / max : 0;
    var hue;
    if (saturation == 0)
    {
        hue = 0;
    }
    else
    {
        var rr = (max - red) / delta,
            gr = (max - green) / delta,
            br = (max - blue) / delta;
        if (red == max)
            hue = br - gr;
        else if (green == max)
            hue = 2 + rr - br;
        else
            hue = 4 + gr - rr;
        hue /= 6;
        if (hue < 0)
            hue++;
    }
    return [hue, saturation, brightness];
}
,["CPArray"]), new objj_method(sel_getUid("hueComponent"), function $CPColor__hueComponent(self, _cmd)
{
    return objj_msgSend(self, "hsbComponents")[0];
}
,["float"]), new objj_method(sel_getUid("saturationComponent"), function $CPColor__saturationComponent(self, _cmd)
{
    return objj_msgSend(self, "hsbComponents")[1];
}
,["float"]), new objj_method(sel_getUid("brightnessComponent"), function $CPColor__brightnessComponent(self, _cmd)
{
    return objj_msgSend(self, "hsbComponents")[2];
}
,["float"]), new objj_method(sel_getUid("cssString"), function $CPColor__cssString(self, _cmd)
{
    return self._cssString;
}
,["CPString"]), new objj_method(sel_getUid("hexString"), function $CPColor__hexString(self, _cmd)
{
    return rgbToHex(objj_msgSend(self, "redComponent"), objj_msgSend(self, "greenComponent"), objj_msgSend(self, "blueComponent"));
}
,["CPString"]), new objj_method(sel_getUid("isEqual:"), function $CPColor__isEqual_(self, _cmd, aColor)
{
    if (!aColor)
        return NO;
    if (aColor === self)
        return YES;
    if (!objj_msgSend(aColor, "isKindOfClass:", CPColor))
        return NO;
    if (self._patternImage || objj_msgSend(aColor, "patternImage"))
        return objj_msgSend(self._patternImage, "isEqual:", objj_msgSend(aColor, "patternImage"));
    return ROUND(objj_msgSend(self, "redComponent") * 255.0) == ROUND(objj_msgSend(aColor, "redComponent") * 255.0) && ROUND(objj_msgSend(self, "greenComponent") * 255.0) == ROUND(objj_msgSend(aColor, "greenComponent") * 255.0) && ROUND(objj_msgSend(self, "blueComponent") * 255.0) == ROUND(objj_msgSend(aColor, "blueComponent") * 255.0) && objj_msgSend(self, "alphaComponent") == objj_msgSend(aColor, "alphaComponent");
}
,["BOOL","CPColor"]), new objj_method(sel_getUid("description"), function $CPColor__description(self, _cmd)
{
    var description = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColor").super_class }, "description"),
        patternImage = objj_msgSend(self, "patternImage");
    if (!patternImage)
        return description + " " + objj_msgSend(self, "cssString");
    description += " {\n";
    if (objj_msgSend(patternImage, "isThreePartImage") || objj_msgSend(patternImage, "isNinePartImage"))
    {
        var slices = objj_msgSend(patternImage, "imageSlices");
        if (objj_msgSend(patternImage, "isThreePartImage"))
            description += "    orientation: " + (objj_msgSend(patternImage, "isVertical") ? "vertical" : "horizontal") + ",\n";
        description += "    patternImage (" + slices.length + " part): [\n";
        for (var i = 0; i < slices.length; ++i)
        {
            var imgDescription = objj_msgSend(slices[i], "description") || "nil";
            description += imgDescription.replace(/^/mg, "        ") + ",\n";
        }
        description = description.substr(0, description.length - 2) + "\n    ]\n}";
    }
    else
        description += (objj_msgSend(patternImage, "description") || "nil").replace(/^/mg, "    ") + "\n}";
    return description;
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("colorWithRed:green:blue:alpha:"), function $CPColor__colorWithRed_green_blue_alpha_(self, _cmd, red, green, blue, alpha)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [MAX(0.0, MIN(1.0, red)), MAX(0.0, MIN(1.0, green)), MAX(0.0, MIN(1.0, blue)), MAX(0.0, MIN(1.0, alpha))]);
}
,["CPColor","float","float","float","float"]), new objj_method(sel_getUid("colorWithCalibratedRed:green:blue:alpha:"), function $CPColor__colorWithCalibratedRed_green_blue_alpha_(self, _cmd, red, green, blue, alpha)
{
    return objj_msgSend(self, "colorWithRed:green:blue:alpha:", red, green, blue, alpha);
}
,["CPColor","float","float","float","float"]), new objj_method(sel_getUid("colorWithWhite:alpha:"), function $CPColor__colorWithWhite_alpha_(self, _cmd, white, alpha)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [white, white, white, alpha]);
}
,["CPColor","float","float"]), new objj_method(sel_getUid("colorWithCalibratedWhite:alpha:"), function $CPColor__colorWithCalibratedWhite_alpha_(self, _cmd, white, alpha)
{
    return objj_msgSend(self, "colorWithWhite:alpha:", white, alpha);
}
,["CPColor","float","float"]), new objj_method(sel_getUid("colorWithHue:saturation:brightness:"), function $CPColor__colorWithHue_saturation_brightness_(self, _cmd, hue, saturation, brightness)
{
    return objj_msgSend(self, "colorWithHue:saturation:brightness:alpha:", hue, saturation, brightness, 1.0);
}
,["CPColor","float","float","float"]), new objj_method(sel_getUid("colorWithCalibratedHue:saturation:brightness:alpha:"), function $CPColor__colorWithCalibratedHue_saturation_brightness_alpha_(self, _cmd, hue, saturation, brightness, alpha)
{
    return objj_msgSend(self, "colorWithHue:saturation:brightness:alpha:", hue, saturation, brightness, alpha);
}
,["CPColor","float","float","float","float"]), new objj_method(sel_getUid("colorWithHue:saturation:brightness:alpha:"), function $CPColor__colorWithHue_saturation_brightness_alpha_(self, _cmd, hue, saturation, brightness, alpha)
{
    hue = MAX(MIN(hue, 1.0), 0.0);
    saturation = MAX(MIN(saturation, 1.0), 0.0);
    brightness = MAX(MIN(brightness, 1.0), 0.0);
    if (saturation === 0.0)
        return objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", brightness, alpha);
    var f = hue * 360 % 60,
        p = brightness * (1 - saturation),
        q = brightness * (60 - saturation * f) / 60,
        t = brightness * (60 - saturation * (60 - f)) / 60,
        b = brightness;
    switch(FLOOR(hue * 6)) {
    case 0:
    case 6:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", b, t, p, alpha);
    case 1:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", q, b, p, alpha);
    case 2:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", p, b, t, alpha);
    case 3:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", p, q, b, alpha);
    case 4:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", t, p, b, alpha);
    case 5:
        return objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", b, p, q, alpha);
    }
}
,["CPColor","float","float","float","float"]), new objj_method(sel_getUid("colorWithHexString:"), function $CPColor__colorWithHexString_(self, _cmd, hex)
{
    var rgba = hexToRGB(hex);
    return rgba ? objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", rgba) : null;
}
,["CPColor","string"]), new objj_method(sel_getUid("colorWithSRGBRed:green:blue:alpha:"), function $CPColor__colorWithSRGBRed_green_blue_alpha_(self, _cmd, red, green, blue, alpha)
{
    return objj_msgSend(self, "colorWithRed:green:blue:alpha:", red, green, blue, alpha);
}
,["CPColor","float","float","float","float"]), new objj_method(sel_getUid("blackColor"), function $CPColor__blackColor(self, _cmd)
{
    if (!cachedBlackColor)
        cachedBlackColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.0, 0.0, 0.0, 1.0]);
    return cachedBlackColor;
}
,["CPColor"]), new objj_method(sel_getUid("blueColor"), function $CPColor__blueColor(self, _cmd)
{
    if (!cachedBlueColor)
        cachedBlueColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.0, 0.0, 1.0, 1.0]);
    return cachedBlueColor;
}
,["CPColor"]), new objj_method(sel_getUid("darkGrayColor"), function $CPColor__darkGrayColor(self, _cmd)
{
    if (!cachedDarkGrayColor)
        cachedDarkGrayColor = objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 1.0 / 3.0, 1.0);
    return cachedDarkGrayColor;
}
,["CPColor"]), new objj_method(sel_getUid("grayColor"), function $CPColor__grayColor(self, _cmd)
{
    if (!cachedGrayColor)
        cachedGrayColor = objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 0.5, 1.0);
    return cachedGrayColor;
}
,["CPColor"]), new objj_method(sel_getUid("greenColor"), function $CPColor__greenColor(self, _cmd)
{
    if (!cachedGreenColor)
        cachedGreenColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.0, 1.0, 0.0, 1.0]);
    return cachedGreenColor;
}
,["CPColor"]), new objj_method(sel_getUid("lightGrayColor"), function $CPColor__lightGrayColor(self, _cmd)
{
    if (!cachedLightGrayColor)
        cachedLightGrayColor = objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 2.0 / 3.0, 1.0);
    return cachedLightGrayColor;
}
,["CPColor"]), new objj_method(sel_getUid("redColor"), function $CPColor__redColor(self, _cmd)
{
    if (!cachedRedColor)
        cachedRedColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [1.0, 0.0, 0.0, 1.0]);
    return cachedRedColor;
}
,["CPColor"]), new objj_method(sel_getUid("whiteColor"), function $CPColor__whiteColor(self, _cmd)
{
    if (!cachedWhiteColor)
        cachedWhiteColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [1.0, 1.0, 1.0, 1.0]);
    return cachedWhiteColor;
}
,["CPColor"]), new objj_method(sel_getUid("yellowColor"), function $CPColor__yellowColor(self, _cmd)
{
    if (!cachedYellowColor)
        cachedYellowColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [1.0, 1.0, 0.0, 1.0]);
    return cachedYellowColor;
}
,["CPColor"]), new objj_method(sel_getUid("brownColor"), function $CPColor__brownColor(self, _cmd)
{
    if (!cachedBrownColor)
        cachedBrownColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.6, 0.4, 0.2, 1.0]);
    return cachedBrownColor;
}
,["CPColor"]), new objj_method(sel_getUid("cyanColor"), function $CPColor__cyanColor(self, _cmd)
{
    if (!cachedCyanColor)
        cachedCyanColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.0, 1.0, 1.0, 1.0]);
    return cachedCyanColor;
}
,["CPColor"]), new objj_method(sel_getUid("magentaColor"), function $CPColor__magentaColor(self, _cmd)
{
    if (!cachedMagentaColor)
        cachedMagentaColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [1.0, 0.0, 1.0, 1.0]);
    return cachedMagentaColor;
}
,["CPColor"]), new objj_method(sel_getUid("orangeColor"), function $CPColor__orangeColor(self, _cmd)
{
    if (!cachedOrangeColor)
        cachedOrangeColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [1.0, 0.5, 0.0, 1.0]);
    return cachedOrangeColor;
}
,["CPColor"]), new objj_method(sel_getUid("purpleColor"), function $CPColor__purpleColor(self, _cmd)
{
    if (!cachedPurpleColor)
        cachedPurpleColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.5, 0.0, 0.5, 1.0]);
    return cachedPurpleColor;
}
,["CPColor"]), new objj_method(sel_getUid("shadowColor"), function $CPColor__shadowColor(self, _cmd)
{
    if (!cachedShadowColor)
        cachedShadowColor = objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.0, 0.0, 0.0, 1.0 / 3.0]);
    return cachedShadowColor;
}
,["CPColor"]), new objj_method(sel_getUid("clearColor"), function $CPColor__clearColor(self, _cmd)
{
    if (!cachedClearColor)
        cachedClearColor = objj_msgSend(self, "colorWithCalibratedWhite:alpha:", 0.0, 0.0);
    return cachedClearColor;
}
,["CPColor"]), new objj_method(sel_getUid("alternateSelectedControlColor"), function $CPColor__alternateSelectedControlColor(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.22, 0.46, 0.84, 1.0]);
}
,["CPColor"]), new objj_method(sel_getUid("secondarySelectedControlColor"), function $CPColor__secondarySelectedControlColor(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithRGBA:", [0.83, 0.83, 0.83, 1.0]);
}
,["CPColor"]), new objj_method(sel_getUid("colorWithPatternImage:"), function $CPColor__colorWithPatternImage_(self, _cmd, anImage)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithPatternImage:", anImage);
}
,["CPColor","CPImage"]), new objj_method(sel_getUid("colorWithCSSString:"), function $CPColor__colorWithCSSString_(self, _cmd, aString)
{
    return objj_msgSend(objj_msgSend(CPColor, "alloc"), "_initWithCSSString:", aString);
}
,["CPColor","CPString"])]);
}{
var the_class = objj_getClass("CPColor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("set"), function $CPColor__set(self, _cmd)
{
    objj_msgSend(self, "setFill");
    objj_msgSend(self, "setStroke");
}
,["void"]), new objj_method(sel_getUid("setFill"), function $CPColor__setFill(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetFillColor(ctx, self);
}
,["void"]), new objj_method(sel_getUid("setStroke"), function $CPColor__setStroke(self, _cmd)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetStrokeColor(ctx, self);
}
,["void"])]);
}{
var the_class = objj_getClass("CPColor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("randomColor"), function $CPColor__randomColor(self, _cmd)
{
    return objj_msgSend(CPColor, "colorWithRed:green:blue:alpha:", RAND(), RAND(), RAND(), 1.0);
}
,["CPColor"])]);
}var CPColorComponentsKey = "CPColorComponentsKey",
    CPColorPatternImageKey = "CPColorPatternImageKey";
{
var the_class = objj_getClass("CPColor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPColor\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPColor__initWithCoder_(self, _cmd, aCoder)
{
    if (objj_msgSend(aCoder, "containsValueForKey:", CPColorPatternImageKey))
        return objj_msgSend(self, "_initWithPatternImage:", objj_msgSend(aCoder, "decodeObjectForKey:", CPColorPatternImageKey));
    return objj_msgSend(self, "_initWithRGBA:", objj_msgSend(aCoder, "decodeObjectForKey:", CPColorComponentsKey));
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPColor__encodeWithCoder_(self, _cmd, aCoder)
{
    if (self._patternImage)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._patternImage, CPColorPatternImageKey);
    else
        objj_msgSend(aCoder, "encodeObject:forKey:", self._components, CPColorComponentsKey);
}
,["void","CPCoder"])]);
}var hexCharacters = "0123456789ABCDEF";
var hexToRGB = function(hex)
{
    if (hex.length == 3)
        hex = hex.charAt(0) + hex.charAt(0) + hex.charAt(1) + hex.charAt(1) + hex.charAt(2) + hex.charAt(2);
    if (hex.length != 6)
        return null;
    hex = hex.toUpperCase();
    for (var i = 0; i < hex.length; i++)
        if (hexCharacters.indexOf(hex.charAt(i)) == -1)
            return null;
    var red = (hexCharacters.indexOf(hex.charAt(0)) * 16 + hexCharacters.indexOf(hex.charAt(1))) / 255.0,
        green = (hexCharacters.indexOf(hex.charAt(2)) * 16 + hexCharacters.indexOf(hex.charAt(3))) / 255.0,
        blue = (hexCharacters.indexOf(hex.charAt(4)) * 16 + hexCharacters.indexOf(hex.charAt(5))) / 255.0;
    return [red, green, blue, 1.0];
};
var rgbToHex = function(r, g, b)
{
    return byteToHex(r) + byteToHex(g) + byteToHex(b);
};
var byteToHex = function(n)
{
    if (!n || isNaN(n))
        return "00";
    n = FLOOR(MIN(255, MAX(0, 256 * n)));
    return hexCharacters.charAt((n - n % 16) / 16) + hexCharacters.charAt(n % 16);
};
CPColorWithImages = function()
{
    var slices = nil,
        numParts = 0,
        isVertical = false,
        imageFactory = CPImageInBundle,
        args = Array.prototype.slice.apply(arguments);
    if (typeof args[args.length - 1] === "function")
        imageFactory = args.pop();
    switch(args.length) {
    case 1:
        return imageFromSlices(args[0], isVertical, imageFactory);
    case 2:
        if (typeof args[0] === "string")
            return patternColorsFromPattern.call(this, args[0], args[1], imageFactory);
        return imageFromSlices(args[0], args[1], imageFactory);
    case 3:
    case 4:
        return objj_msgSend(CPColor, "colorWithPatternImage:", imageFactory(args[0], args[1], args[2], args[3]));
default:
        throw "ERROR: Invalid argument count: " + args.length;
    }
}
var imageFromSlices = function(slices, isVertical, imageFactory)
{
    var imageSlices = [];
    for (var i = 0; i < slices.length; ++i)
    {
        var slice = slices[i];
        imageSlices.push(slice ? imageFactory(slice[0], slice[1], slice[2], slice[3]) : nil);
    }
    switch(slices.length) {
    case 3:
        return objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(objj_msgSend(CPThreePartImage, "alloc"), "initWithImageSlices:isVertical:", imageSlices, isVertical));
    case 9:
        return objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(objj_msgSend(CPNinePartImage, "alloc"), "initWithImageSlices:", imageSlices));
default:
        throw "ERROR: Invalid number of image slices: " + slices.length;
    }
};
var patternColorsFromPattern = function(pattern, attributes, imageFactory)
{
    if (pattern.match(/^.*\{[^}]+\}/))
    {
        var width = attributes["width"],
            height = attributes["height"],
            separator = attributes["separator"] || "-",
            orientation = attributes["orientation"],
            rightWidth,
            bottomHeight,
            centerWidthHeight,
            centerIsNil,
            numParts;
        if (pattern.indexOf("{position}") < 0)
            throw "ERROR: Pattern strings must have a {position} placeholder (\"" + pattern + "\")";
        if (orientation === undefined)
        {
            numParts = 9;
            if (attributes["centerIsNil"] !== undefined)
                centerIsNil = attributes["centerIsNil"];
        }
        else
        {
            numParts = 3;
            isVertical = orientation === PatternIsVertical;
            if (isVertical)
            {
                if (attributes["centerHeight"])
                    centerWidthHeight = attributes["centerHeight"];
            }
            else
            {
                if (attributes["centerWidth"])
                    centerWidthHeight = attributes["centerWidth"];
            }
        }
        if (attributes["rightWidth"])
            rightWidth = attributes["rightWidth"];
        if (attributes["bottomHeight"])
            bottomHeight = attributes["bottomHeight"];
        var positions = attributes["positions"] || "@",
            states = nil,
            styles = nil;
        if (numParts === 3)
        {
            if (positions === "@")
            {
                if (isVertical)
                    positions = ["top", "center", "bottom"];
                else
                    positions = ["left", "center", "right"];
            }
            else if (positions === "#")
                positions = ["0", "1", "2"];
            else
                throw "ERROR: Invalid positions: " + positions;
        }
        else
        {
            if (positions === "@" || positions === "abbrev")
                positions = ["top-left", "top", "top-right", "left", "center", "right", "bottom-left", "bottom", "bottom-right"];
            else if (positions === "full")
                positions = ["top-left", "top-center", "top-right", "center-left", "center-center", "center-right", "bottom-left", "bottom-center", "bottom-right"];
            else if (positions === "#")
                positions = ["0", "1", "2", "3", "4", "5", "6", "7", "8"];
            else
                throw "ERROR: Invalid positions: " + positions;
        }
        if (pattern.indexOf("{state}") >= 0)
        {
            states = attributes["states"];
            if (!states)
                throw "ERROR: {state} placeholder in the pattern (\"" + pattern + "\") but no states item in the attributes";
        }
        if (pattern.indexOf("{style}") >= 0)
        {
            styles = attributes["styles"];
            if (!styles)
                throw "ERROR: {style} placeholder in the pattern (\"" + pattern + "\") but no styles item in the attributes";
        }
        var placeholder = "{position}",
            pos = pattern.indexOf(placeholder),
            i;
        for (i = 0; i < positions.length; ++i)
            positions[i] = pattern.replace(placeholder, pos === 0 ? positions[i] + separator : separator + positions[i]);
        var slices = positions,
            object = slices,
            key,
            sep;
        if (states)
        {
            placeholder = "{state}";
            pos = pattern.indexOf(placeholder);
            object = {};
            for (i = 0; i < states.length; ++i)
            {
                var state = states[i];
                key = state || "@";
                sep = state ? separator : "";
                object[key] = slices.slice(0);
                replacePlaceholderInArray(object[key], placeholder, pos === 0 ? state + sep : sep + state);
            }
        }
        if (styles)
        {
            placeholder = "{style}";
            pos = pattern.indexOf(placeholder);
            var styleObject = {};
            for (i = 0; i < styles.length; ++i)
            {
                var style = styles[i];
                key = style || "@";
                sep = style ? separator : "";
                if (states)
                {
                    styleObject[key] = cloneObject(object);
                    replacePlaceholderInObject(styleObject[key], placeholder, pos === 0 ? style + sep : sep + style);
                }
                else
                {
                    styleObject[key] = slices.slice(0);
                    replacePlaceholderInArray(styleObject[key], placeholder, pos === 0 ? style + sep : sep + style);
                }
            }
            object = styleObject;
        }
        if (styles || states)
        {
            if (numParts === 3)
                makeThreePartSlicesFromObject(object, width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical);
            else
                makeNinePartSlicesFromObject(object, width, height, rightWidth, bottomHeight, centerIsNil);
            makeImagesFromObject(object, isVertical, imageFactory);
            return object;
        }
        else
        {
            if (numParts === 3)
                makeThreePartSlicesFromArray(object, width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical);
            else
                makeNinePartSlicesFromArray(object, width, height, rightWidth, bottomHeight, centerIsNil);
            return imageFromSlices(object, isVertical, imageFactory);
        }
    }
    else
        throw "ERROR: No placeholders in slice pattern (\"" + pattern + "\")";
};
var replacePlaceholderInArray = function(array, find, replacement)
{
    for (var i = 0; i < array.length; ++i)
        array[i] = array[i].replace(find, replacement);
};
var replacePlaceholderInObject = function(object, find, replacement)
{
    for (var key in object)
        if (object.hasOwnProperty(key))
            if (object[key].constructor === Array)
                replacePlaceholderInArray(object[key], find, replacement);
            else
                replacePlaceholderInObject(object[key], find, replacement);
};
var cloneObject = function(object)
{
    var clone = {};
    for (var key in object)
        if (object.hasOwnProperty(key))
            if (object[key].constructor === Array)
                clone[key] = object[key].slice(0);
            else if (typeof object[key] === "object")
                clone[key] = cloneObject(object[key]);
            else
                clone[key] = object[key];
    return clone;
};
var makeThreePartSlicesFromObject = function(object, width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical)
{
    for (var key in object)
        if (object.hasOwnProperty(key))
            if (object[key].constructor === Array)
                makeThreePartSlicesFromArray(object[key], width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical);
            else
                makeThreePartSlicesFromObject(object[key], width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical);
};
var makeThreePartSlicesFromArray = function(array, width, height, centerWidthHeight, rightWidth, bottomHeight, isVertical)
{
    array[0] = [array[0], width, height];
    if (isVertical)
    {
        array[1] = [array[1], width, centerWidthHeight ? centerWidthHeight : 1.0];
        array[2] = [array[2], width, bottomHeight ? bottomHeight : height];
    }
    else
    {
        array[1] = [array[1], centerWidthHeight ? centerWidthHeight : 1.0, height];
        array[2] = [array[2], rightWidth ? rightWidth : width, height];
    }
};
var makeNinePartSlicesFromObject = function(object, width, height, rightWidth, bottomHeight, centerIsNil)
{
    for (var key in object)
        if (object.hasOwnProperty(key))
            if (object[key].constructor === Array)
                makeNinePartSlicesFromArray(object[key], width, height, rightWidth, bottomHeight, centerIsNil);
            else
                makeNinePartSlicesFromObject(object[key], width, height, rightWidth, bottomHeight, centerIsNil);
};
var makeNinePartSlicesFromArray = function(array, width, height, rightWidth, bottomHeight, centerIsNil)
{
    rightWidth = rightWidth ? rightWidth : width;
    bottomHeight = bottomHeight ? bottomHeight : height;
    array[0] = [array[0], width, height];
    array[1] = [array[1], 1.0, height];
    array[2] = [array[2], rightWidth, height];
    array[3] = [array[3], width, 1.0];
    array[4] = centerIsNil ? nil : [array[4], 1.0, 1.0];
    array[5] = [array[5], rightWidth, 1.0];
    array[6] = [array[6], width, bottomHeight];
    array[7] = [array[7], 1.0, bottomHeight];
    array[8] = [array[8], rightWidth, bottomHeight];
};
var makeImagesFromObject = function(object, isVertical, imageFactory)
{
    for (var key in object)
        if (object.hasOwnProperty(key))
            if (object[key].constructor === Array)
                object[key] = imageFromSlices(object[key], isVertical, imageFactory);
            else
                makeImagesFromObject(object[key], isVertical, imageFactory);
};
p;14;CPColorPanel.jt;22849;@STATIC;1.0;i;10;CPButton.ji;10;CPCookie.ji;9;CPPanel.ji;14;CPPasteboard.ji;8;CPView.ji;15;CPColorPicker.ji;21;CPSliderColorPicker.jt;22709;objj_executeFile("CPButton.j", YES);objj_executeFile("CPCookie.j", YES);objj_executeFile("CPPanel.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPView.j", YES);CPWheelColorPickerMode = 1;
CPSliderColorPickerMode = 2;
CPColorPickerViewWidth = 265;
CPColorPickerViewHeight = 370;
CPColorPanelColorDidChangeNotification = "CPColorPanelColorDidChangeNotification";
var PREVIEW_HEIGHT = 20.0,
    TOOLBAR_HEIGHT = 32.0,
    SWATCH_HEIGHT = 14.0,
    ICON_WIDTH = 32.0,
    ICON_PADDING = 12.0;
var SharedColorPanel = nil,
    ColorPickerClasses = [];
{var the_class = objj_allocateClassPair(CPPanel, "CPColorPanel"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_toolbar"), new objj_ivar("_swatchView"), new objj_ivar("_previewView"), new objj_ivar("_opacitySlider"), new objj_ivar("_colorPickers"), new objj_ivar("_currentView"), new objj_ivar("_activePicker"), new objj_ivar("_color"), new objj_ivar("_target"), new objj_ivar("_action"), new objj_ivar("_mode")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPColorPanel__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorPanel").super_class }, "initWithContentRect:styleMask:", CGRectMake(500.0, 50.0, 219.0, 370.0), CPTitledWindowMask | CPClosableWindowMask | CPResizableWindowMask);
    if (self)
    {
        objj_msgSend(self, "setTitle:", "Color Panel");
        objj_msgSend(self, "setLevel:", CPFloatingWindowLevel);
        objj_msgSend(self, "setFloatingPanel:", YES);
        objj_msgSend(self, "setBecomesKeyOnlyIfNeeded:", YES);
        objj_msgSend(self, "setMinSize:", CGSizeMake(219.0, 363.0));
        objj_msgSend(self, "setMaxSize:", CGSizeMake(323.0, 537.0));
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("setColor:"), function $CPColorPanel__setColor_(self, _cmd, aColor)
{
    self._color = aColor;
    objj_msgSend(self._previewView, "setBackgroundColor:", self._color);
    objj_msgSend(CPApp, "sendAction:to:from:", sel_getUid("changeColor:"), nil, self);
    if (self._target && self._action)
        objj_msgSend(CPApp, "sendAction:to:from:", self._action, self._target, self);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPColorPanelColorDidChangeNotification, self);
    objj_msgSend(self._activePicker, "setColor:", self._color);
    objj_msgSend(self._opacitySlider, "setFloatValue:", objj_msgSend(self._color, "alphaComponent"));
}
,["void","CPColor"]), new objj_method(sel_getUid("setColor:updatePicker:"), function $CPColorPanel__setColor_updatePicker_(self, _cmd, aColor, bool)
{
    objj_msgSend(self, "setColor:", aColor);
    if (bool)
        objj_msgSend(self._activePicker, "setColor:", self._color);
}
,["void","CPColor","BOOL"]), new objj_method(sel_getUid("color"), function $CPColorPanel__color(self, _cmd)
{
    return self._color;
}
,["CPColor"]), new objj_method(sel_getUid("opacity"), function $CPColorPanel__opacity(self, _cmd)
{
    return objj_msgSend(self._opacitySlider, "floatValue");
}
,["float"]), new objj_method(sel_getUid("setTarget:"), function $CPColorPanel__setTarget_(self, _cmd, aTarget)
{
    self._target = aTarget;
}
,["void","id"]), new objj_method(sel_getUid("target"), function $CPColorPanel__target(self, _cmd)
{
    return self._target;
}
,["id"]), new objj_method(sel_getUid("setAction:"), function $CPColorPanel__setAction_(self, _cmd, anAction)
{
    self._action = anAction;
}
,["void","selector"]), new objj_method(sel_getUid("action"), function $CPColorPanel__action(self, _cmd)
{
    return self._action;
}
,["selector"]), new objj_method(sel_getUid("setMode:"), function $CPColorPanel__setMode_(self, _cmd, mode)
{
    self._mode = mode;
}
,["void","CPColorPanelMode"]), new objj_method(sel_getUid("_setPicker:"), function $CPColorPanel___setPicker_(self, _cmd, sender)
{
    var picker = self._colorPickers[objj_msgSend(sender, "tag")],
        view = objj_msgSend(picker, "provideNewView:", NO);
    if (!view)
        view = objj_msgSend(picker, "provideNewView:", YES);
    if (view == self._currentView)
        return;
    if (self._currentView)
        objj_msgSend(view, "setFrame:", objj_msgSend(self._currentView, "frame"));
    else
    {
        var height = TOOLBAR_HEIGHT + 10 + PREVIEW_HEIGHT + 5 + SWATCH_HEIGHT + 32,
            bounds = objj_msgSend(objj_msgSend(self, "contentView"), "bounds");
        objj_msgSend(view, "setFrameSize:", CGSizeMake(bounds.size.width - 10, bounds.size.height - height));
        objj_msgSend(view, "setFrameOrigin:", CGPointMake(5, height));
    }
    objj_msgSend(self._currentView, "removeFromSuperview");
    objj_msgSend(objj_msgSend(self, "contentView"), "addSubview:", view);
    self._currentView = view;
    self._activePicker = picker;
    objj_msgSend(picker, "setColor:", objj_msgSend(self, "color"));
}
,["void","id"]), new objj_method(sel_getUid("mode"), function $CPColorPanel__mode(self, _cmd)
{
    return self._mode;
}
,["CPColorPanelMode"]), new objj_method(sel_getUid("orderFront:"), function $CPColorPanel__orderFront_(self, _cmd, aSender)
{
    objj_msgSend(self, "_loadContentsIfNecessary");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorPanel").super_class }, "orderFront:", aSender);
}
,["void","id"]), new objj_method(sel_getUid("_loadContentsIfNecessary"), function $CPColorPanel___loadContentsIfNecessary(self, _cmd)
{
    if (self._toolbar)
        return;
    if (!self._color)
        self._color = objj_msgSend(CPColor, "whiteColor");
    self._colorPickers = [];
    var count = objj_msgSend(ColorPickerClasses, "count");
    for (var i = 0; i < count; i++)
    {
        var currentPickerClass = ColorPickerClasses[i],
            currentPicker = objj_msgSend(objj_msgSend(currentPickerClass, "alloc"), "initWithPickerMask:colorPanel:", 0, self);
        self._colorPickers.push(currentPicker);
    }
    var contentView = objj_msgSend(self, "contentView"),
        bounds = objj_msgSend(contentView, "bounds");
    self._toolbar = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0, 6, CGRectGetWidth(bounds), TOOLBAR_HEIGHT));
    objj_msgSend(self._toolbar, "setAutoresizingMask:", CPViewWidthSizable);
    var totalToolbarWidth = count * ICON_WIDTH + (count - 1) * ICON_PADDING,
        leftOffset = (CGRectGetWidth(bounds) - totalToolbarWidth) / 2.0,
        buttonForLater = nil;
    for (var i = 0; i < count; i++)
    {
        var image = objj_msgSend(self._colorPickers[i], "provideNewButtonImage"),
            highlightImage = objj_msgSend(self._colorPickers[i], "provideNewAlternateButtonImage"),
            button = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(leftOffset + i * (ICON_WIDTH + ICON_PADDING), 0, ICON_WIDTH, ICON_WIDTH));
        objj_msgSend(button, "setTag:", i);
        objj_msgSend(button, "setTarget:", self);
        objj_msgSend(button, "setAction:", sel_getUid("_setPicker:"));
        objj_msgSend(button, "setBordered:", NO);
        objj_msgSend(button, "setAutoresizingMask:", CPViewMinXMargin | CPViewMaxXMargin);
        objj_msgSend(button, "setImage:", image);
        objj_msgSend(button, "setAlternateImage:", highlightImage);
        objj_msgSend(self._toolbar, "addSubview:", button);
        if (!buttonForLater)
            buttonForLater = button;
    }
    var previewBox = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(76, TOOLBAR_HEIGHT + 10, CGRectGetWidth(bounds) - 86, PREVIEW_HEIGHT));
    self._previewView = objj_msgSend(objj_msgSend(_CPColorPanelPreview, "alloc"), "initWithFrame:", CGRectInset(objj_msgSend(previewBox, "bounds"), 2.0, 2.0));
    objj_msgSend(self._previewView, "setColorPanel:", self);
    objj_msgSend(self._previewView, "setAutoresizingMask:", CPViewWidthSizable);
    objj_msgSend(previewBox, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithWhite:alpha:", 0.8, 1.0));
    objj_msgSend(previewBox, "setAutoresizingMask:", CPViewWidthSizable);
    objj_msgSend(previewBox, "addSubview:", self._previewView);
    var _previewLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(10, TOOLBAR_HEIGHT + 10, 60, 15));
    objj_msgSend(_previewLabel, "setStringValue:", "Preview:");
    objj_msgSend(_previewLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(_previewLabel, "setAlignment:", CPRightTextAlignment);
    var swatchBox = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(76, TOOLBAR_HEIGHT + 10 + PREVIEW_HEIGHT + 5, CGRectGetWidth(bounds) - 86, SWATCH_HEIGHT + 2.0));
    objj_msgSend(swatchBox, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithWhite:alpha:", 0.8, 1.0));
    objj_msgSend(swatchBox, "setAutoresizingMask:", CPViewWidthSizable);
    self._swatchView = objj_msgSend(objj_msgSend(_CPColorPanelSwatches, "alloc"), "initWithFrame:", CGRectInset(objj_msgSend(swatchBox, "bounds"), 1.0, 1.0));
    objj_msgSend(self._swatchView, "setColorPanel:", self);
    objj_msgSend(self._swatchView, "setAutoresizingMask:", CPViewWidthSizable);
    objj_msgSend(swatchBox, "addSubview:", self._swatchView);
    var _swatchLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(10, TOOLBAR_HEIGHT + 8 + PREVIEW_HEIGHT + 6, 60, 15));
    objj_msgSend(_swatchLabel, "setStringValue:", "Swatches:");
    objj_msgSend(_swatchLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(_swatchLabel, "setAlignment:", CPRightTextAlignment);
    var opacityLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(10, TOOLBAR_HEIGHT + PREVIEW_HEIGHT + 35, 60, 20));
    objj_msgSend(opacityLabel, "setStringValue:", "Opacity:");
    objj_msgSend(opacityLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(opacityLabel, "setAlignment:", CPRightTextAlignment);
    self._opacitySlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(76, TOOLBAR_HEIGHT + PREVIEW_HEIGHT + 34, CGRectGetWidth(bounds) - 86, 20.0));
    objj_msgSend(self._opacitySlider, "setMinValue:", 0.0);
    objj_msgSend(self._opacitySlider, "setMaxValue:", 1.0);
    objj_msgSend(self._opacitySlider, "setAutoresizingMask:", CPViewWidthSizable);
    objj_msgSend(self._opacitySlider, "setTarget:", self);
    objj_msgSend(self._opacitySlider, "setAction:", sel_getUid("setOpacity:"));
    objj_msgSend(contentView, "addSubview:", self._toolbar);
    objj_msgSend(contentView, "addSubview:", previewBox);
    objj_msgSend(contentView, "addSubview:", _previewLabel);
    objj_msgSend(contentView, "addSubview:", swatchBox);
    objj_msgSend(contentView, "addSubview:", _swatchLabel);
    objj_msgSend(contentView, "addSubview:", opacityLabel);
    objj_msgSend(contentView, "addSubview:", self._opacitySlider);
    self._target = nil;
    self._action = nil;
    self._activePicker = nil;
    objj_msgSend(self._previewView, "setBackgroundColor:", self._color);
    if (buttonForLater)
        objj_msgSend(self, "_setPicker:", buttonForLater);
}
,["void"]), new objj_method(sel_getUid("setOpacity:"), function $CPColorPanel__setOpacity_(self, _cmd, sender)
{
    var components = objj_msgSend(objj_msgSend(self, "color"), "components"),
        alpha = objj_msgSend(sender, "floatValue");
    objj_msgSend(self, "setColor:updatePicker:", objj_msgSend(self._color, "colorWithAlphaComponent:", alpha), YES);
}
,["void","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("provideColorPickerClass:"), function $CPColorPanel__provideColorPickerClass_(self, _cmd, aColorPickerSubclass)
{
    ColorPickerClasses.push(aColorPickerSubclass);
}
,["void","Class"]), new objj_method(sel_getUid("sharedColorPanel"), function $CPColorPanel__sharedColorPanel(self, _cmd)
{
    if (!SharedColorPanel)
        SharedColorPanel = objj_msgSend(objj_msgSend(CPColorPanel, "alloc"), "init");
    return SharedColorPanel;
}
,["CPColorPanel"]), new objj_method(sel_getUid("setPickerMode:"), function $CPColorPanel__setPickerMode_(self, _cmd, mode)
{
    var panel = objj_msgSend(CPColorPanel, "sharedColorPanel");
    objj_msgSend(panel, "setMode:", mode);
}
,["void","CPColorPanelMode"])]);
}CPColorDragType = "CPColorDragType";
var CPColorPanelSwatchesCookie = "CPColorPanelSwatchesCookie";
{var the_class = objj_allocateClassPair(CPView, "_CPColorPanelSwatches"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_swatches"), new objj_ivar("_dragColor"), new objj_ivar("_colorPanel"), new objj_ivar("_swatchCookie")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPColorPanelSwatches__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPColorPanelSwatches").super_class }, "initWithFrame:", aFrame);
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "grayColor"));
    objj_msgSend(self, "registerForDraggedTypes:", objj_msgSend(CPArray, "arrayWithObjects:", CPColorDragType));
    var whiteColor = objj_msgSend(CPColor, "whiteColor");
    self._swatchCookie = objj_msgSend(objj_msgSend(CPCookie, "alloc"), "initWithName:", CPColorPanelSwatchesCookie);
    var colorList = objj_msgSend(self, "startingColorList");
    self._swatches = [];
    for (var i = 0; i < 50; i++)
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(13 * i + 1, 1, 12, 12)),
            fillView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectInset(objj_msgSend(view, "bounds"), 1.0, 1.0));
        objj_msgSend(view, "setBackgroundColor:", whiteColor);
        objj_msgSend(fillView, "setBackgroundColor:", i < colorList.length ? colorList[i] : whiteColor);
        objj_msgSend(view, "addSubview:", fillView);
        objj_msgSend(self, "addSubview:", view);
        self._swatches.push(view);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("isOpaque"), function $_CPColorPanelSwatches__isOpaque(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("startingColorList"), function $_CPColorPanelSwatches__startingColorList(self, _cmd)
{
    var cookieValue = objj_msgSend(self._swatchCookie, "value");
    if (!cookieValue)
    {
        return [objj_msgSend(CPColor, "blackColor"), objj_msgSend(CPColor, "darkGrayColor"), objj_msgSend(CPColor, "grayColor"), objj_msgSend(CPColor, "lightGrayColor"), objj_msgSend(CPColor, "whiteColor"), objj_msgSend(CPColor, "redColor"), objj_msgSend(CPColor, "greenColor"), objj_msgSend(CPColor, "blueColor"), objj_msgSend(CPColor, "yellowColor")];
    }
    var cookieValue = eval(cookieValue),
        result = [];
    for (var i = 0; i < cookieValue.length; i++)
        result.push(objj_msgSend(CPColor, "colorWithHexString:", cookieValue[i]));
    return result;
}
,["CPArray"]), new objj_method(sel_getUid("saveColorList"), function $_CPColorPanelSwatches__saveColorList(self, _cmd)
{
    var result = [];
    for (var i = 0; i < self._swatches.length; i++)
        result.push(objj_msgSend(objj_msgSend(objj_msgSend(self._swatches[i], "subviews")[0], "backgroundColor"), "hexString"));
    var future = new Date();
    future.setYear(2019);
    objj_msgSend(self._swatchCookie, "setValue:expires:domain:", JSON.stringify(result), future, nil);
}
,["CPArray"]), new objj_method(sel_getUid("setColorPanel:"), function $_CPColorPanelSwatches__setColorPanel_(self, _cmd, panel)
{
    self._colorPanel = panel;
}
,["void","CPColorPanel"]), new objj_method(sel_getUid("colorPanel"), function $_CPColorPanelSwatches__colorPanel(self, _cmd)
{
    return self._colorPanel;
}
,["CPColorPanel"]), new objj_method(sel_getUid("colorAtIndex:"), function $_CPColorPanelSwatches__colorAtIndex_(self, _cmd, index)
{
    return objj_msgSend(objj_msgSend(self._swatches[index], "subviews")[0], "backgroundColor");
}
,["CPColor","int"]), new objj_method(sel_getUid("setColor:atIndex:"), function $_CPColorPanelSwatches__setColor_atIndex_(self, _cmd, aColor, index)
{
    objj_msgSend(objj_msgSend(self._swatches[index], "subviews")[0], "setBackgroundColor:", aColor);
    objj_msgSend(self, "saveColorList");
}
,["void","CPColor","int"]), new objj_method(sel_getUid("mouseUp:"), function $_CPColorPanelSwatches__mouseUp_(self, _cmd, anEvent)
{
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        bounds = objj_msgSend(self, "bounds");
    if (!CGRectContainsPoint(bounds, point) || point.x > objj_msgSend(self, "bounds").size.width - 1 || point.x < 1)
        return NO;
    objj_msgSend(self._colorPanel, "setColor:updatePicker:", objj_msgSend(self, "colorAtIndex:", FLOOR(point.x / 13)), YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $_CPColorPanelSwatches__mouseDragged_(self, _cmd, anEvent)
{
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    if (point.x > objj_msgSend(self, "bounds").size.width - 1 || point.x < 1)
        return NO;
    objj_msgSend(objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard), "declareTypes:owner:", objj_msgSend(CPArray, "arrayWithObject:", CPColorDragType), self);
    var swatch = self._swatches[FLOOR(point.x / 13)];
    self._dragColor = objj_msgSend(objj_msgSend(swatch, "subviews")[0], "backgroundColor");
    var bounds = CGRectMakeCopy(objj_msgSend(swatch, "bounds"));
    var dragView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", bounds),
        dragFillView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectInset(bounds, 1.0, 1.0));
    objj_msgSend(dragView, "setBackgroundColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(dragFillView, "setBackgroundColor:", self._dragColor);
    objj_msgSend(dragView, "addSubview:", dragFillView);
    objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", dragView, CGPointMake(point.x - bounds.size.width / 2.0, point.y - bounds.size.height / 2.0), CGPointMake(0.0, 0.0), anEvent, nil, self, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("pasteboard:provideDataForType:"), function $_CPColorPanelSwatches__pasteboard_provideDataForType_(self, _cmd, aPasteboard, aType)
{
    if (aType == CPColorDragType)
        objj_msgSend(aPasteboard, "setData:forType:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self._dragColor), aType);
}
,["void","CPPasteboard","CPString"]), new objj_method(sel_getUid("performDragOperation:"), function $_CPColorPanelSwatches__performDragOperation_(self, _cmd, aSender)
{
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(aSender, "draggingLocation"), nil),
        pasteboard = objj_msgSend(aSender, "draggingPasteboard"),
        swatch = nil;
    if (!objj_msgSend(pasteboard, "availableTypeFromArray:", [CPColorDragType]) || location.x > objj_msgSend(self, "bounds").size.width - 1 || location.x < 1)
        return NO;
    objj_msgSend(self, "setColor:atIndex:", objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(pasteboard, "dataForType:", CPColorDragType)), FLOOR(location.x / 13));
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPColorPanelPreview"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_colorPanel")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPColorPanelPreview__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPColorPanelPreview").super_class }, "initWithFrame:", aFrame);
    objj_msgSend(self, "registerForDraggedTypes:", objj_msgSend(CPArray, "arrayWithObjects:", CPColorDragType));
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setColorPanel:"), function $_CPColorPanelPreview__setColorPanel_(self, _cmd, aPanel)
{
    self._colorPanel = aPanel;
}
,["void","CPColorPanel"]), new objj_method(sel_getUid("colorPanel"), function $_CPColorPanelPreview__colorPanel(self, _cmd)
{
    return self._colorPanel;
}
,["CPColorPanel"]), new objj_method(sel_getUid("performDragOperation:"), function $_CPColorPanelPreview__performDragOperation_(self, _cmd, aSender)
{
    var pasteboard = objj_msgSend(aSender, "draggingPasteboard");
    if (!objj_msgSend(pasteboard, "availableTypeFromArray:", [CPColorDragType]))
        return NO;
    var color = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(pasteboard, "dataForType:", CPColorDragType));
    objj_msgSend(self._colorPanel, "setColor:updatePicker:", color, YES);
}
,["void","id"]), new objj_method(sel_getUid("isOpaque"), function $_CPColorPanelPreview__isOpaque(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("mouseDragged:"), function $_CPColorPanelPreview__mouseDragged_(self, _cmd, anEvent)
{
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    objj_msgSend(objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard), "declareTypes:owner:", [CPColorDragType], self);
    var bounds = CGRectMake(0, 0, 15, 15);
    var dragView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", bounds),
        dragFillView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectInset(bounds, 1.0, 1.0));
    objj_msgSend(dragView, "setBackgroundColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(dragFillView, "setBackgroundColor:", objj_msgSend(self, "backgroundColor"));
    objj_msgSend(dragView, "addSubview:", dragFillView);
    objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", dragView, CGPointMake(point.x - bounds.size.width / 2.0, point.y - bounds.size.height / 2.0), CGPointMake(0.0, 0.0), anEvent, nil, self, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("pasteboard:provideDataForType:"), function $_CPColorPanelPreview__pasteboard_provideDataForType_(self, _cmd, aPasteboard, aType)
{
    if (aType == CPColorDragType)
        objj_msgSend(aPasteboard, "setData:forType:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", objj_msgSend(self, "backgroundColor")), aType);
}
,["void","CPPasteboard","CPString"])]);
}objj_executeFile("CPColorPicker.j", YES);objj_executeFile("CPSliderColorPicker.j", YES);objj_msgSend(CPColorPanel, "provideColorPickerClass:", CPColorWheelColorPicker);
objj_msgSend(CPColorPanel, "provideColorPickerClass:", CPSliderColorPicker);
p;15;CPColorPicker.jt;13760;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;13702;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPObject, "CPColorPicker"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_panel"), new objj_ivar("_mask")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithPickerMask:colorPanel:"), function $CPColorPicker__initWithPickerMask_colorPanel_(self, _cmd, aMask, aPanel)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorPicker").super_class }, "init"))
    {
        self._panel = aPanel;
        self._mask = aMask;
    }
    return self;
}
,["id","int","CPColorPanel"]), new objj_method(sel_getUid("colorPanel"), function $CPColorPicker__colorPanel(self, _cmd)
{
    return self._panel;
}
,["CPColorPanel"]), new objj_method(sel_getUid("provideNewButtonImage"), function $CPColorPicker__provideNewButtonImage(self, _cmd)
{
    return nil;
}
,["CPImage"]), new objj_method(sel_getUid("setMode:"), function $CPColorPicker__setMode_(self, _cmd, mode)
{
}
,["void","CPColorPanelMode"]), new objj_method(sel_getUid("setColor:"), function $CPColorPicker__setColor_(self, _cmd, aColor)
{
}
,["void","CPColor"])]);
}{var the_class = objj_allocateClassPair(CPColorPicker, "CPColorWheelColorPicker"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_pickerView"), new objj_ivar("_brightnessSlider"), new objj_ivar("_hueSaturationView"), new objj_ivar("_cachedColor")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithPickerMask:colorPanel:"), function $CPColorWheelColorPicker__initWithPickerMask_colorPanel_(self, _cmd, mask, owningColorPanel)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorWheelColorPicker").super_class }, "initWithPickerMask:colorPanel:", mask, owningColorPanel);
}
,["id","int","CPColorPanel"]), new objj_method(sel_getUid("initView"), function $CPColorWheelColorPicker__initView(self, _cmd)
{
    var aFrame = CGRectMake(0, 0, CPColorPickerViewWidth, CPColorPickerViewHeight);
    self._pickerView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", aFrame);
    objj_msgSend(self._pickerView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    self._brightnessSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(0, aFrame.size.height - 34, aFrame.size.width, 15));
    objj_msgSend(self._brightnessSlider, "setValue:forThemeAttribute:", 15.0, "track-width");
    objj_msgSend(self._brightnessSlider, "setValue:forThemeAttribute:", objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:", objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPColorPicker, "class")), "pathForResource:", "brightness_bar.png"))), "track-color");
    objj_msgSend(self._brightnessSlider, "setMinValue:", 0.0);
    objj_msgSend(self._brightnessSlider, "setMaxValue:", 100.0);
    objj_msgSend(self._brightnessSlider, "setFloatValue:", 100.0);
    objj_msgSend(self._brightnessSlider, "setTarget:", self);
    objj_msgSend(self._brightnessSlider, "setAction:", sel_getUid("brightnessSliderDidChange:"));
    objj_msgSend(self._brightnessSlider, "setAutoresizingMask:", CPViewWidthSizable | CPViewMinYMargin);
    self._hueSaturationView = objj_msgSend(objj_msgSend(__CPColorWheel, "alloc"), "initWithFrame:", CGRectMake(0, 0, aFrame.size.width, aFrame.size.height - 38));
    objj_msgSend(self._hueSaturationView, "setDelegate:", self);
    objj_msgSend(self._hueSaturationView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    objj_msgSend(self._pickerView, "addSubview:", self._hueSaturationView);
    objj_msgSend(self._pickerView, "addSubview:", self._brightnessSlider);
}
,["id"]), new objj_method(sel_getUid("brightnessSliderDidChange:"), function $CPColorWheelColorPicker__brightnessSliderDidChange_(self, _cmd, sender)
{
    objj_msgSend(self, "updateColor");
}
,["void","id"]), new objj_method(sel_getUid("colorWheelDidChange:"), function $CPColorWheelColorPicker__colorWheelDidChange_(self, _cmd, sender)
{
    objj_msgSend(self, "updateColor");
}
,["void","id"]), new objj_method(sel_getUid("updateColor"), function $CPColorWheelColorPicker__updateColor(self, _cmd)
{
    var hue = objj_msgSend(self._hueSaturationView, "angle"),
        saturation = objj_msgSend(self._hueSaturationView, "distance"),
        brightness = objj_msgSend(self._brightnessSlider, "floatValue");
    objj_msgSend(self._hueSaturationView, "setWheelBrightness:", brightness / 100.0);
    objj_msgSend(self._brightnessSlider, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithHue:saturation:brightness:", hue / 360.0, saturation / 100.0, 1));
    var colorPanel = objj_msgSend(self, "colorPanel"),
        opacity = objj_msgSend(colorPanel, "opacity");
    self._cachedColor = objj_msgSend(CPColor, "colorWithHue:saturation:brightness:alpha:", hue / 360.0, saturation / 100.0, brightness / 100.0, opacity);
    objj_msgSend(objj_msgSend(self, "colorPanel"), "setColor:", self._cachedColor);
}
,["void"]), new objj_method(sel_getUid("supportsMode:"), function $CPColorWheelColorPicker__supportsMode_(self, _cmd, mode)
{
    return mode == CPWheelColorPickerMode ? YES : NO;
}
,["BOOL","int"]), new objj_method(sel_getUid("currentMode"), function $CPColorWheelColorPicker__currentMode(self, _cmd)
{
    return CPWheelColorPickerMode;
}
,["int"]), new objj_method(sel_getUid("provideNewView:"), function $CPColorWheelColorPicker__provideNewView_(self, _cmd, initialRequest)
{
    if (initialRequest)
        objj_msgSend(self, "initView");
    return self._pickerView;
}
,["CPView","BOOL"]), new objj_method(sel_getUid("setColor:"), function $CPColorWheelColorPicker__setColor_(self, _cmd, newColor)
{
    if (objj_msgSend(newColor, "isEqual:", self._cachedColor))
        return;
    var hsb = objj_msgSend(newColor, "hsbComponents");
    objj_msgSend(self._hueSaturationView, "setPositionToColor:", newColor);
    objj_msgSend(self._brightnessSlider, "setFloatValue:", hsb[2] * 100.0);
    objj_msgSend(self._hueSaturationView, "setWheelBrightness:", hsb[2]);
    objj_msgSend(self._brightnessSlider, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithHue:saturation:brightness:", hsb[0], hsb[1], 1));
}
,["void","CPColor"]), new objj_method(sel_getUid("provideNewButtonImage"), function $CPColorWheelColorPicker__provideNewButtonImage(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "wheel_button.png"), CGSizeMake(32, 32));
}
,["CPImage"]), new objj_method(sel_getUid("provideNewAlternateButtonImage"), function $CPColorWheelColorPicker__provideNewAlternateButtonImage(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "wheel_button_h.png"), CGSizeMake(32, 32));
}
,["CPImage"])]);
}{var the_class = objj_allocateClassPair(CPView, "__CPColorWheel"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_wheelImage"), new objj_ivar("_blackWheelImage"), new objj_ivar("_crosshair"), new objj_ivar("_delegate"), new objj_ivar("_angle"), new objj_ivar("_distance"), new objj_ivar("_radius")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $__CPColorWheel__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("__CPColorWheel").super_class }, "initWithFrame:", aFrame))
    {
        var path = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "wheel.png");
        self._wheelImage = new Image();
        self._wheelImage.src = path;
        self._wheelImage.style.position = "absolute";
        path = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "wheel_black.png");
        self._blackWheelImage = new Image();
        self._blackWheelImage.src = path;
        self._blackWheelImage.style.opacity = "0";
        self._blackWheelImage.style.filter = "alpha(opacity=0)";
        self._blackWheelImage.style.position = "absolute";
        self._DOMElement.appendChild(self._wheelImage);
        self._DOMElement.appendChild(self._blackWheelImage);
        objj_msgSend(self, "setWheelSize:", aFrame.size);
        self._crosshair = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(self._radius - 2, self._radius - 2, 4, 4));
        objj_msgSend(self._crosshair, "setBackgroundColor:", objj_msgSend(CPColor, "blackColor"));
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectInset(objj_msgSend(self._crosshair, "bounds"), 1.0, 1.0));
        objj_msgSend(view, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
        objj_msgSend(self._crosshair, "addSubview:", view);
        objj_msgSend(self, "addSubview:", self._crosshair);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setWheelBrightness:"), function $__CPColorWheel__setWheelBrightness_(self, _cmd, brightness)
{
    self._blackWheelImage.style.opacity = 1.0 - brightness;
    self._blackWheelImage.style.filter = "alpha(opacity=" + (1.0 - brightness) * 100 + ")";
}
,["void","float"]), new objj_method(sel_getUid("setFrameSize:"), function $__CPColorWheel__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("__CPColorWheel").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "setWheelSize:", aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("setWheelSize:"), function $__CPColorWheel__setWheelSize_(self, _cmd, aSize)
{
    var min = MIN(aSize.width, aSize.height);
    self._blackWheelImage.style.width = min;
    self._blackWheelImage.style.height = min;
    self._blackWheelImage.width = min;
    self._blackWheelImage.height = min;
    self._blackWheelImage.style.top = (aSize.height - min) / 2.0 + "px";
    self._blackWheelImage.style.left = (aSize.width - min) / 2.0 + "px";
    self._wheelImage.style.width = min;
    self._wheelImage.style.height = min;
    self._wheelImage.width = min;
    self._wheelImage.height = min;
    self._wheelImage.style.top = (aSize.height - min) / 2.0 + "px";
    self._wheelImage.style.left = (aSize.width - min) / 2.0 + "px";
    self._radius = min / 2.0;
    objj_msgSend(self, "setAngle:distance:", objj_msgSend(self, "degreesToRadians:", self._angle), self._distance / 100.0 * self._radius);
}
,["void","CGSize"]), new objj_method(sel_getUid("setDelegate:"), function $__CPColorWheel__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $__CPColorWheel__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("angle"), function $__CPColorWheel__angle(self, _cmd)
{
    return self._angle;
}
,["float"]), new objj_method(sel_getUid("distance"), function $__CPColorWheel__distance(self, _cmd)
{
    return self._distance;
}
,["float"]), new objj_method(sel_getUid("mouseDown:"), function $__CPColorWheel__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(self, "reposition:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $__CPColorWheel__mouseDragged_(self, _cmd, anEvent)
{
    objj_msgSend(self, "reposition:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("reposition:"), function $__CPColorWheel__reposition_(self, _cmd, anEvent)
{
    var bounds = objj_msgSend(self, "bounds"),
        location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        midX = CGRectGetMidX(bounds),
        midY = CGRectGetMidY(bounds),
        distance = MIN(SQRT((location.x - midX) * (location.x - midX) + (location.y - midY) * (location.y - midY)), self._radius),
        angle = ATAN2(location.y - midY, location.x - midX);
    objj_msgSend(self, "setAngle:distance:", angle, distance);
    objj_msgSend(self._delegate, "colorWheelDidChange:", self);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setAngle:distance:"), function $__CPColorWheel__setAngle_distance_(self, _cmd, angle, distance)
{
    var bounds = objj_msgSend(self, "bounds"),
        midX = CGRectGetMidX(bounds),
        midY = CGRectGetMidY(bounds);
    self._angle = objj_msgSend(self, "radiansToDegrees:", angle);
    self._distance = distance / self._radius * 100.0;
    objj_msgSend(self._crosshair, "setFrameOrigin:", CGPointMake(COS(angle) * distance + midX - 2.0, SIN(angle) * distance + midY - 2.0));
}
,["void","int","float"]), new objj_method(sel_getUid("setPositionToColor:"), function $__CPColorWheel__setPositionToColor_(self, _cmd, aColor)
{
    var hsb = objj_msgSend(aColor, "hsbComponents"),
        bounds = objj_msgSend(self, "bounds"),
        angle = objj_msgSend(self, "degreesToRadians:", hsb[0] * 360.0),
        distance = hsb[1] * self._radius;
    objj_msgSend(self, "setAngle:distance:", angle, distance);
}
,["void","CPColor"]), new objj_method(sel_getUid("radiansToDegrees:"), function $__CPColorWheel__radiansToDegrees_(self, _cmd, radians)
{
    return (-radians / PI * 180 + 360) % 360;
}
,["int","float"]), new objj_method(sel_getUid("degreesToRadians:"), function $__CPColorWheel__degreesToRadians_(self, _cmd, degrees)
{
    return -((degrees - 360) / 180 * PI);
}
,["float","float"])]);
}p;14;CPColorSpace.jt;1157;@STATIC;1.0;I;21;Foundation/CPObject.jt;1112;objj_executeFile("Foundation/CPObject.j", NO);var sRGBColorSpace = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPColorSpace"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_cgColorSpace")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithCGColorSpace:"), function $CPColorSpace__initWithCGColorSpace_(self, _cmd, cgColorSpace)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorSpace").super_class }, "init"))
    {
        self._cgColorSpace = cgColorSpace;
    }
    return self;
}
,["id","CGColorSpace"]), new objj_method(sel_getUid("CGColorSpace"), function $CPColorSpace__CGColorSpace(self, _cmd)
{
    return self._cgColorSpace;
}
,["CGColorSpace"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sRGBColorSpace"), function $CPColorSpace__sRGBColorSpace(self, _cmd)
{
    if (!sRGBColorSpace)
        sRGBColorSpace = objj_msgSend(objj_msgSend(self, "alloc"), "initWithCGColorSpace:", CGColorSpaceCreateDeviceRGB());
    return sRGBColorSpace;
}
,["CPColorSpace"])]);
}p;13;CPColorWell.jt;12355;@STATIC;1.0;I;21;Foundation/CPString.ji;8;CPView.ji;9;CPColor.ji;14;CPColorPanel.jt;12265;objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPView.j", YES);objj_executeFile("CPColor.j", YES);objj_executeFile("CPColorPanel.j", YES);var _CPColorWellDidBecomeExclusiveNotification = "_CPColorWellDidBecomeExclusiveNotification";
{var the_class = objj_allocateClassPair(CPControl, "CPColorWell"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_active"), new objj_ivar("_bordered"), new objj_ivar("_color")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_reverseSetBinding"), function $CPColorWell___reverseSetBinding(self, _cmd)
{
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", CPValueBinding),
        theBinding = objj_msgSend(binderClass, "getBinding:forObject:", CPValueBinding, self);
    objj_msgSend(theBinding, "reverseSetValueFor:", "color");
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $CPColorWell__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorWell").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._active = NO;
        self._color = objj_msgSend(CPColor, "whiteColor");
        objj_msgSend(self, "setBordered:", YES);
        objj_msgSend(self, "_registerForNotifications");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_registerForNotifications"), function $CPColorWell___registerForNotifications(self, _cmd)
{
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("colorWellDidBecomeExclusive:"), _CPColorWellDidBecomeExclusiveNotification, nil);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("colorPanelWillClose:"), CPWindowWillCloseNotification, objj_msgSend(CPColorPanel, "sharedColorPanel"));
}
,["void"]), new objj_method(sel_getUid("setBordered:"), function $CPColorWell__setBordered_(self, _cmd, shouldBeBordered)
{
    if (shouldBeBordered)
        objj_msgSend(self, "setThemeState:", CPThemeStateBordered);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBordered);
}
,["void","BOOL"]), new objj_method(sel_getUid("isBordered"), function $CPColorWell__isBordered(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBordered);
}
,["BOOL"]), new objj_method(sel_getUid("color"), function $CPColorWell__color(self, _cmd)
{
    return self._color;
}
,["CPColor"]), new objj_method(sel_getUid("setColor:"), function $CPColorWell__setColor_(self, _cmd, aColor)
{
    if (self._color == aColor)
        return;
    self._color = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPColor"]), new objj_method(sel_getUid("takeColorFrom:"), function $CPColorWell__takeColorFrom_(self, _cmd, aSender)
{
    objj_msgSend(self, "setColor:", objj_msgSend(aSender, "color"));
}
,["void","id"]), new objj_method(sel_getUid("activate:"), function $CPColorWell__activate_(self, _cmd, shouldBeExclusive)
{
    if (shouldBeExclusive)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPColorWellDidBecomeExclusiveNotification, self);
    if (objj_msgSend(self, "isActive"))
        return;
    self._active = YES;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("colorPanelDidChangeColor:"), CPColorPanelColorDidChangeNotification, objj_msgSend(CPColorPanel, "sharedColorPanel"));
}
,["void","BOOL"]), new objj_method(sel_getUid("deactivate"), function $CPColorWell__deactivate(self, _cmd)
{
    if (!objj_msgSend(self, "isActive"))
        return;
    self._active = NO;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPColorPanelColorDidChangeNotification, objj_msgSend(CPColorPanel, "sharedColorPanel"));
}
,["void"]), new objj_method(sel_getUid("isActive"), function $CPColorWell__isActive(self, _cmd)
{
    return self._active;
}
,["BOOL"]), new objj_method(sel_getUid("colorPanelDidChangeColor:"), function $CPColorWell__colorPanelDidChangeColor_(self, _cmd, aNotification)
{
    objj_msgSend(self, "takeColorFrom:", objj_msgSend(aNotification, "object"));
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["void","CPNotification"]), new objj_method(sel_getUid("colorWellDidBecomeExclusive:"), function $CPColorWell__colorWellDidBecomeExclusive_(self, _cmd, aNotification)
{
    if (self != objj_msgSend(aNotification, "object"))
        objj_msgSend(self, "deactivate");
}
,["void","CPNotification"]), new objj_method(sel_getUid("colorPanelWillClose:"), function $CPColorWell__colorPanelWillClose_(self, _cmd, aNotification)
{
    objj_msgSend(self, "deactivate");
}
,["void","CPNotification"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $CPColorWell__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    objj_msgSend(self, "highlight:", NO);
    if (!mouseIsUp || !CGRectContainsPoint(objj_msgSend(self, "bounds"), aPoint) || !objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "activate:", YES);
    var colorPanel = objj_msgSend(CPColorPanel, "sharedColorPanel");
    objj_msgSend(colorPanel, "setColor:", self._color);
    objj_msgSend(colorPanel, "orderFront:", self);
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("contentRectForBounds:"), function $CPColorWell__contentRectForBounds_(self, _cmd, bounds)
{
    var contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    return CGRectInsetByInset(bounds, contentInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("bezelRectForBounds:"), function $CPColorWell__bezelRectForBounds_(self, _cmd, bounds)
{
    var bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset");
    return CGRectInsetByInset(bounds, bezelInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("contentBorderRectForBounds:"), function $CPColorWell__contentBorderRectForBounds_(self, _cmd, bounds)
{
    var contentBorderInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-border-inset");
    return CGRectInsetByInset(bounds, contentBorderInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPColorWell__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    switch(aName) {
    case "bezel-view":
        return objj_msgSend(self, "bezelRectForBounds:", objj_msgSend(self, "bounds"));
    case "content-view":
        return objj_msgSend(self, "contentRectForBounds:", objj_msgSend(self, "bounds"));
    case "content-border-view":
        return objj_msgSend(self, "contentBorderRectForBounds:", objj_msgSend(self, "bounds"));
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorWell").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPColorWell__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(view, "setHitTests:", NO);
    return view;
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPColorWell__layoutSubviews(self, _cmd)
{
    var bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bezel-view", CPWindowBelow, "content-view");
    objj_msgSend(bezelView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
    var contentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-view", CPWindowAbove, "bezel-view");
    objj_msgSend(contentView, "setBackgroundColor:", self._color);
    var contentBorderView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-border-view", CPWindowAbove, "content-view");
    objj_msgSend(contentBorderView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "content-border-color"));
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPColorWell___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return objj_msgSend(CPColorWellValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPColorWell").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPColorWell__defaultThemeClass(self, _cmd)
{
    return "colorwell";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPColorWell__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGInsetMakeZero(), "bezel-inset", objj_msgSend(CPNull, "null"), "bezel-color", CGInsetMake(3.0, 3.0, 3.0, 3.0), "content-inset", CGInsetMakeZero(), "content-border-inset", objj_msgSend(CPNull, "null"), "content-border-color");
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "CPColorWellValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"), function $CPColorWellValueBinder___updatePlaceholdersWithOptions_(self, _cmd, options)
{
    var placeholderColor = objj_msgSend(CPColor, "blackColor");
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholderColor, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholderColor, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholderColor, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholderColor, CPNullMarker, YES);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("valueForBinding:"), function $CPColorWellValueBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self._source, "color");
}
,["id","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $CPColorWellValueBinder__setValue_forBinding_(self, _cmd, aValue, theBinding)
{
    objj_msgSend(self._source, "setColor:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $CPColorWellValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setColor:", aValue);
}
,["void","id","CPString","CPString"])]);
}var CPColorWellColorKey = "CPColorWellColorKey",
    CPColorWellBorderedKey = "CPColorWellBorderedKey";
{
var the_class = objj_getClass("CPColorWell")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPColorWell\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPColorWell__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorWell").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._active = NO;
        self._color = objj_msgSend(aCoder, "decodeObjectForKey:", CPColorWellColorKey);
        objj_msgSend(self, "setBordered:", objj_msgSend(aCoder, "decodeBoolForKey:", CPColorWellBorderedKey));
        objj_msgSend(self, "_registerForNotifications");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPColorWell__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPColorWell").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._color, CPColorWellColorKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "isBordered"), CPColorWellBorderedKey);
}
,["void","CPCoder"])]);
}p;12;CPComboBox.jt;41416;@STATIC;1.0;i;8;CPText.ji;13;CPTextField.ji;14;_CPPopUpList.jt;41347;objj_executeFile("CPText.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("_CPPopUpList.j", YES);CPComboBoxSelectionDidChangeNotification = "CPComboBoxSelectionDidChangeNotification";
CPComboBoxSelectionIsChangingNotification = "CPComboBoxSelectionIsChangingNotification";
CPComboBoxWillDismissNotification = "CPComboBoxWillDismissNotification";
CPComboBoxWillPopUpNotification = "CPComboBoxWillPopUpNotification";
CPComboBoxStateButtonBordered = CPThemeState("button-bordered");
var CPComboBoxTextSubview = "text",
    CPComboBoxButtonSubview = "button",
    CPComboBoxDefaultNumberOfVisibleItems = 5,
    CPComboBoxFocusRingWidth = -1;
{var the_class = objj_allocateClassPair(CPTextField, "CPComboBox"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_items"), new objj_ivar("_listDelegate"), new objj_ivar("_dataSource"), new objj_ivar("_usesDataSource"), new objj_ivar("_completes"), new objj_ivar("_canComplete"), new objj_ivar("_numberOfVisibleItems"), new objj_ivar("_forceSelection"), new objj_ivar("_hasVerticalScroller"), new objj_ivar("_selectedStringValue"), new objj_ivar("_popUpButtonCausedResign")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPComboBox__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "initWithFrame:", aFrame);
    if (self)
        objj_msgSend(self, "_initComboBox");
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_initComboBox"), function $CPComboBox___initComboBox(self, _cmd)
{
    self._items = objj_msgSend(CPArray, "array");
    self._usesDataSource = NO;
    self._completes = NO;
    self._canComplete = NO;
    self._numberOfVisibleItems = CPComboBoxDefaultNumberOfVisibleItems;
    self._forceSelection = NO;
    self._hasVerticalScroller = YES;
    self._selectedStringValue = "";
    self._popUpButtonCausedResign = NO;
    objj_msgSend(self, "setTheme:", objj_msgSend(CPTheme, "defaultTheme"));
    objj_msgSend(self, "setBordered:", YES);
    objj_msgSend(self, "setBezeled:", YES);
    objj_msgSend(self, "setEditable:", YES);
    objj_msgSend(self, "setThemeState:", CPComboBoxStateButtonBordered);
}
,["void"]), new objj_method(sel_getUid("hasVerticalScroller"), function $CPComboBox__hasVerticalScroller(self, _cmd)
{
    return self._hasVerticalScroller;
}
,["BOOL"]), new objj_method(sel_getUid("setHasVerticalScroller:"), function $CPComboBox__setHasVerticalScroller_(self, _cmd, flag)
{
    flag = !!flag;
    if (self._hasVerticalScroller === flag)
        return;
    self._hasVerticalScroller = flag;
    objj_msgSend(objj_msgSend(self._listDelegate, "scrollView"), "setHasVerticalScroller:", flag);
}
,["void","BOOL"]), new objj_method(sel_getUid("intercellSpacing"), function $CPComboBox__intercellSpacing(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "intercellSpacing");
}
,["CGSize"]), new objj_method(sel_getUid("setIntercellSpacing:"), function $CPComboBox__setIntercellSpacing_(self, _cmd, aSize)
{
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "setIntercellSpacing:", aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("isButtonBordered"), function $CPComboBox__isButtonBordered(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPComboBoxStateButtonBordered);
}
,["BOOL"]), new objj_method(sel_getUid("setButtonBordered:"), function $CPComboBox__setButtonBordered_(self, _cmd, flag)
{
    if (!!flag)
        objj_msgSend(self, "setThemeState:", CPComboBoxStateButtonBordered);
    else
        objj_msgSend(self, "unsetThemeState:", CPComboBoxStateButtonBordered);
}
,["void","BOOL"]), new objj_method(sel_getUid("itemHeight"), function $CPComboBox__itemHeight(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "rowHeight");
}
,["float"]), new objj_method(sel_getUid("setItemHeight:"), function $CPComboBox__setItemHeight_(self, _cmd, itemHeight)
{
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "setRowHeight:", itemHeight);
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "reloadData");
}
,["void","float"]), new objj_method(sel_getUid("numberOfVisibleItems"), function $CPComboBox__numberOfVisibleItems(self, _cmd)
{
    return self._numberOfVisibleItems;
}
,["int"]), new objj_method(sel_getUid("setNumberOfVisibleItems:"), function $CPComboBox__setNumberOfVisibleItems_(self, _cmd, visibleItems)
{
    self._numberOfVisibleItems = MAX(visibleItems, 1);
}
,["void","int"]), new objj_method(sel_getUid("delegate"), function $CPComboBox__delegate(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "delegate");
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPComboBox__setDelegate_(self, _cmd, aDelegate)
{
    var delegate = objj_msgSend(self, "delegate");
    if (aDelegate === delegate)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (delegate)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", delegate, CPComboBoxSelectionIsChangingNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", delegate, CPComboBoxSelectionDidChangeNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", delegate, CPComboBoxWillDismissNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", delegate, CPComboBoxWillPopUpNotification, self);
    }
    if (aDelegate)
    {
        if (objj_msgSend(aDelegate, "respondsToSelector:", sel_getUid("comboBoxSelectionIsChanging:")))
            objj_msgSend(defaultCenter, "addObserver:selector:name:object:", delegate, sel_getUid("comboBoxSelectionIsChanging:"), CPComboBoxSelectionIsChangingNotification, self);
        if (objj_msgSend(aDelegate, "respondsToSelector:", sel_getUid("comboBoxSelectionDidChange:")))
            objj_msgSend(defaultCenter, "addObserver:selector:name:object:", delegate, sel_getUid("comboBoxSelectionDidChange:"), CPComboBoxSelectionDidChangeNotification, self);
        if (objj_msgSend(aDelegate, "respondsToSelector:", sel_getUid("comboBoxWillPopUp:")))
            objj_msgSend(defaultCenter, "addObserver:selector:name:object:", delegate, sel_getUid("comboBoxWillPopUp:"), CPComboBoxWillPopUpNotification, self);
        if (objj_msgSend(aDelegate, "respondsToSelector:", sel_getUid("comboBoxWillDismiss:")))
            objj_msgSend(defaultCenter, "addObserver:selector:name:object:", delegate, sel_getUid("comboBoxWillDissmis:"), CPComboBoxWillDismissNotification, self);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "setDelegate:", aDelegate);
}
,["void","id"]), new objj_method(sel_getUid("dataSource"), function $CPComboBox__dataSource(self, _cmd)
{
    if (!self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, NO);
    return self._dataSource;
}
,["id"]), new objj_method(sel_getUid("setDataSource:"), function $CPComboBox__setDataSource_(self, _cmd, aSource)
{
    if (!self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, NO);
    else if (self._dataSource !== aSource)
    {
        if (!objj_msgSend(aSource, "respondsToSelector:", sel_getUid("numberOfItemsInComboBox:")) || !objj_msgSend(aSource, "respondsToSelector:", sel_getUid("comboBox:objectValueForItemAtIndex:")))
        {
            CPLog.warn("Illegal %s data source (%s). Must implement numberOfItemsInComboBox: and comboBox:objectValueForItemAtIndex:", objj_msgSend(self, "className"), objj_msgSend(aSource, "description"));
        }
        else
            self._dataSource = aSource;
    }
}
,["void","id"]), new objj_method(sel_getUid("usesDataSource"), function $CPComboBox__usesDataSource(self, _cmd)
{
    return self._usesDataSource;
}
,["BOOL"]), new objj_method(sel_getUid("setUsesDataSource:"), function $CPComboBox__setUsesDataSource_(self, _cmd, flag)
{
    flag = !!flag;
    if (self._usesDataSource === flag)
        return;
    self._usesDataSource = flag;
    if (self._usesDataSource)
        objj_msgSend(self._items, "removeAllObjects");
    objj_msgSend(self, "reloadData");
}
,["void","BOOL"]), new objj_method(sel_getUid("addItemsWithObjectValues:"), function $CPComboBox__addItemsWithObjectValues_(self, _cmd, objects)
{
    objj_msgSend(self._items, "addObjectsFromArray:", objects);
    objj_msgSend(self, "reloadDataSourceForSelector:", _cmd);
}
,["void","CPArray"]), new objj_method(sel_getUid("addItemWithObjectValue:"), function $CPComboBox__addItemWithObjectValue_(self, _cmd, anObject)
{
    objj_msgSend(self._items, "addObject:", anObject);
    objj_msgSend(self, "reloadDataSourceForSelector:", _cmd);
}
,["void","id"]), new objj_method(sel_getUid("insertItemWithObjectValue:atIndex:"), function $CPComboBox__insertItemWithObjectValue_atIndex_(self, _cmd, anObject, anIndex)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
    objj_msgSend(self._items, "insertObject:atIndex:", anObject, anIndex);
    objj_msgSend(self, "reloadData");
}
,["void","id","int"]), new objj_method(sel_getUid("objectValues"), function $CPComboBox__objectValues(self, _cmd)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
    return self._items;
}
,["CPArray"]), new objj_method(sel_getUid("removeAllItems"), function $CPComboBox__removeAllItems(self, _cmd)
{
    objj_msgSend(self._items, "removeAllObjects");
    objj_msgSend(self, "reloadDataSourceForSelector:", _cmd);
}
,["void"]), new objj_method(sel_getUid("removeItemAtIndex:"), function $CPComboBox__removeItemAtIndex_(self, _cmd, index)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
    objj_msgSend(self._items, "removeObjectAtIndex:", index);
    objj_msgSend(self, "reloadData");
}
,["void","int"]), new objj_method(sel_getUid("removeItemWithObjectValue:"), function $CPComboBox__removeItemWithObjectValue_(self, _cmd, anObject)
{
    objj_msgSend(self._items, "removeObject:", anObject);
    objj_msgSend(self, "reloadDataSourceForSelector:", _cmd);
}
,["void","id"]), new objj_method(sel_getUid("numberOfItems"), function $CPComboBox__numberOfItems(self, _cmd)
{
    if (self._usesDataSource)
        return objj_msgSend(self._dataSource, "numberOfItemsInComboBox:", self);
    else
        return self._items.length;
}
,["int"]), new objj_method(sel_getUid("listDelegate"), function $CPComboBox__listDelegate(self, _cmd)
{
    return self._listDelegate;
}
,["_CPPopUpList"]), new objj_method(sel_getUid("setListDelegate:"), function $CPComboBox__setListDelegate_(self, _cmd, aDelegate)
{
    if (self._listDelegate === aDelegate)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._listDelegate)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, _CPPopUpListWillPopUpNotification, self._listDelegate);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, _CPPopUpListWillDismissNotification, self._listDelegate);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, _CPPopUpListDidDismissNotification, self._listDelegate);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, _CPPopUpListItemWasClickedNotification, self._listDelegate);
        var oldTableView = objj_msgSend(self._listDelegate, "tableView");
        if (oldTableView)
        {
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPTableViewSelectionIsChangingNotification, oldTableView);
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPTableViewSelectionDidChangeNotification, oldTableView);
        }
    }
    self._listDelegate = aDelegate;
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("comboBoxWillPopUp:"), _CPPopUpListWillPopUpNotification, self._listDelegate);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("comboBoxWillDismiss:"), _CPPopUpListWillDismissNotification, self._listDelegate);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("listDidDismiss:"), _CPPopUpListDidDismissNotification, self._listDelegate);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("itemWasClicked:"), _CPPopUpListItemWasClickedNotification, self._listDelegate);
    objj_msgSend(objj_msgSend(self._listDelegate, "scrollView"), "setHasVerticalScroller:", self._hasVerticalScroller);
    var tableView = objj_msgSend(self._listDelegate, "tableView");
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("comboBoxSelectionIsChanging:"), CPTableViewSelectionIsChangingNotification, tableView);
    objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("comboBoxSelectionDidChange:"), CPTableViewSelectionDidChangeNotification, tableView);
    objj_msgSend(self._listDelegate, "setFont:", objj_msgSend(self, "font"));
    objj_msgSend(self._listDelegate, "setAlignment:", objj_msgSend(self, "alignment"));
}
,["void","_CPPopUpList"]), new objj_method(sel_getUid("indexOfItemWithObjectValue:"), function $CPComboBox__indexOfItemWithObjectValue_(self, _cmd, anObject)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
    return objj_msgSend(self._items, "indexOfObject:", anObject);
}
,["int","id"]), new objj_method(sel_getUid("itemObjectValueAtIndex:"), function $CPComboBox__itemObjectValueAtIndex_(self, _cmd, index)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
    return objj_msgSend(self._items, "objectAtIndex:", index);
}
,["id","int"]), new objj_method(sel_getUid("noteNumberOfItemsChanged"), function $CPComboBox__noteNumberOfItemsChanged(self, _cmd)
{
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "noteNumberOfRowsChanged");
}
,["void"]), new objj_method(sel_getUid("scrollItemAtIndexToTop:"), function $CPComboBox__scrollItemAtIndexToTop_(self, _cmd, index)
{
    objj_msgSend(self._listDelegate, "scrollItemAtIndexToTop:", index);
}
,["void","int"]), new objj_method(sel_getUid("scrollItemAtIndexToVisible:"), function $CPComboBox__scrollItemAtIndexToVisible_(self, _cmd, index)
{
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "scrollRowToVisible:", index);
}
,["void","int"]), new objj_method(sel_getUid("reloadData"), function $CPComboBox__reloadData(self, _cmd)
{
    objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "reloadData");
}
,["void"]), new objj_method(sel_getUid("popUpList"), function $CPComboBox__popUpList(self, _cmd)
{
    if (!self._listDelegate)
        objj_msgSend(self, "setListDelegate:", objj_msgSend(objj_msgSend(_CPPopUpList, "alloc"), "initWithDataSource:", self));
    objj_msgSend(self, "_selectMatchingItem");
    if (CPComboBoxFocusRingWidth < 0)
    {
        var inset = objj_msgSend(self, "currentValueForThemeAttribute:", "border-inset");
        CPComboBoxFocusRingWidth = inset.bottom;
    }
    objj_msgSend(self._listDelegate, "popUpRelativeToRect:view:offset:", objj_msgSend(self, "_borderFrame"), self, CPComboBoxFocusRingWidth - 1);
}
,["void"]), new objj_method(sel_getUid("listIsVisible"), function $CPComboBox__listIsVisible(self, _cmd)
{
    return self._listDelegate ? objj_msgSend(self._listDelegate, "isVisible") : NO;
}
,["BOOL"]), new objj_method(sel_getUid("reloadDataSourceForSelector:"), function $CPComboBox__reloadDataSourceForSelector_(self, _cmd, cmd)
{
    if (self._usesDataSource)
        objj_msgSend(self, "_dataSourceWarningForMethod:condition:", cmd, YES);
    else
        objj_msgSend(self, "reloadData");
}
,["void","SEL"]), new objj_method(sel_getUid("takeStringValueFromList"), function $CPComboBox__takeStringValueFromList(self, _cmd)
{
    if (self._usesDataSource && self._dataSource && objj_msgSend(self._dataSource, "numberOfItemsInComboBox:", self) === 0)
        return NO;
    var selectedStringValue = objj_msgSend(self._listDelegate, "selectedStringValue");
    if (selectedStringValue === nil)
        return NO;
    else
        self._selectedStringValue = selectedStringValue;
    objj_msgSend(self, "setStringValue:", self._selectedStringValue);
    objj_msgSend(self, "_reverseSetBinding");
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("listDidDismiss:"), function $CPComboBox__listDidDismiss_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
}
,["void","CPNotification"]), new objj_method(sel_getUid("itemWasClicked:"), function $CPComboBox__itemWasClicked_(self, _cmd, aNotification)
{
    objj_msgSend(self, "takeStringValueFromList");
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["void","CPNotification"]), new objj_method(sel_getUid("deselectItemAtIndex:"), function $CPComboBox__deselectItemAtIndex_(self, _cmd, index)
{
    var table = objj_msgSend(self._listDelegate, "tableView"),
        row = objj_msgSend(table, "selectedRow");
    if (row !== index)
        return;
    objj_msgSend(table, "deselectRow:", index);
}
,["void","int"]), new objj_method(sel_getUid("indexOfSelectedItem"), function $CPComboBox__indexOfSelectedItem(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "selectedRow");
}
,["int"]), new objj_method(sel_getUid("objectValueOfSelectedItem"), function $CPComboBox__objectValueOfSelectedItem(self, _cmd)
{
    var row = objj_msgSend(objj_msgSend(self._listDelegate, "tableView"), "selectedRow");
    if (row >= 0)
    {
        if (self._usesDataSource)
            objj_msgSend(self, "_dataSourceWarningForMethod:condition:", _cmd, YES);
        return self._items[row];
    }
    return nil;
}
,["id"]), new objj_method(sel_getUid("selectItemAtIndex:"), function $CPComboBox__selectItemAtIndex_(self, _cmd, index)
{
    var table = objj_msgSend(self._listDelegate, "tableView"),
        row = objj_msgSend(table, "selectedRow");
    if (row === index)
        return;
    objj_msgSend(table, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", index), NO);
}
,["void","int"]), new objj_method(sel_getUid("selectItemWithObjectValue:"), function $CPComboBox__selectItemWithObjectValue_(self, _cmd, anObject)
{
    var index = objj_msgSend(self, "indexOfItemWithObjectValue:", anObject);
    if (index !== CPNotFound)
        objj_msgSend(self, "selectItemAtIndex:", index);
}
,["void","id"]), new objj_method(sel_getUid("completes"), function $CPComboBox__completes(self, _cmd)
{
    return self._completes;
}
,["BOOL"]), new objj_method(sel_getUid("setCompletes:"), function $CPComboBox__setCompletes_(self, _cmd, flag)
{
    self._completes = !!flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("completedString:"), function $CPComboBox__completedString_(self, _cmd, substring)
{
    if (self._usesDataSource)
        return objj_msgSend(self, "comboBoxCompletedString:", substring);
    else
    {
        var index = objj_msgSend(self._items, "indexOfObjectPassingTest:context:", CPComboBoxCompletionTest, substring);
        return index !== CPNotFound ? self._items[index] : nil;
    }
}
,["CPString","CPString"]), new objj_method(sel_getUid("forceSelection"), function $CPComboBox__forceSelection(self, _cmd)
{
    return self._forceSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setForceSelection:"), function $CPComboBox__setForceSelection_(self, _cmd, flag)
{
    self._forceSelection = !!flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("sendAction:to:"), function $CPComboBox__sendAction_to_(self, _cmd, anAction, anObject)
{
    if (objj_msgSend(self, "listIsVisible"))
    {
        objj_msgSend(self, "takeStringValueFromList");
        objj_msgSend(self._listDelegate, "close");
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "sendAction:to:", anAction, anObject);
}
,["BOOL","SEL","id"]), new objj_method(sel_getUid("setObjectValue:"), function $CPComboBox__setObjectValue_(self, _cmd, object)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "setObjectValue:", object);
    self._selectedStringValue = objj_msgSend(self, "stringValue");
}
,["void","id"]), new objj_method(sel_getUid("interpretKeyEvents:"), function $CPComboBox__interpretKeyEvents_(self, _cmd, events)
{
    var theEvent = events[0];
    self._canComplete = NO;
    if (self._completes)
    {
        if (!objj_msgSend(theEvent, "_couldBeKeyEquivalent") && objj_msgSend(theEvent, "characters").charAt(0) !== CPDeleteCharacter)
        {
            var value = objj_msgSend(self, "_inputElement").value,
                selectedRange = objj_msgSend(self, "selectedRange");
            self._canComplete = CPMaxRange(selectedRange) === value.length;
        }
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "interpretKeyEvents:", events);
}
,["void","CPArray"]), new objj_method(sel_getUid("paste:"), function $CPComboBox__paste_(self, _cmd, sender)
{
    if (self._completes)
    {
        var value = objj_msgSend(self, "_inputElement").value,
            selectedRange = objj_msgSend(self, "selectedRange");
        self._canComplete = CPMaxRange(selectedRange) === value.length;
    }
    else
        self._canComplete = NO;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "paste:", sender);
}
,["void","id"]), new objj_method(sel_getUid("textDidChange:"), function $CPComboBox__textDidChange_(self, _cmd, aNotification)
{
    var uncompletedString = objj_msgSend(self, "stringValue"),
        newString = uncompletedString;
    if (self._completes && self._canComplete)
    {
        newString = objj_msgSend(self, "completedString:", uncompletedString);
        if (newString && newString.length > uncompletedString.length)
        {
            objj_msgSend(self, "setStringValue:", newString);
            objj_msgSend(self, "setSelectedRange:", CPMakeRange(uncompletedString.length, newString.length - uncompletedString.length));
        }
    }
    objj_msgSend(self, "_selectMatchingItem");
    self._canComplete = NO;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "textDidChange:", aNotification);
}
,["void","CPNotification"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $CPComboBox__performKeyEquivalent_(self, _cmd, anEvent)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
    {
        var key = objj_msgSend(anEvent, "charactersIgnoringModifiers");
        switch(key) {
        case CPDownArrowFunctionKey:
            if (!objj_msgSend(self, "listIsVisible"))
            {
                objj_msgSend(self, "popUpList");
                return YES;
            }
            break;
        case CPEscapeFunctionKey:
            if (objj_msgSend(self, "listIsVisible"))
            {
                if (self._forceSelection && objj_msgSend(self, "_inputElement").value !== self._selectedStringValue)
                    objj_msgSend(self, "setStringValue:", self._selectedStringValue);
            }
            break;
        }
        if (objj_msgSend(self._listDelegate, "performKeyEquivalent:", anEvent))
            return YES;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "performKeyEquivalent:", anEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPComboBox__resignFirstResponder(self, _cmd)
{
    var buttonCausedResign = self._popUpButtonCausedResign;
    self._popUpButtonCausedResign = NO;
    var shouldResign = !buttonCausedResign && (!self._listDelegate || objj_msgSend(self._listDelegate, "controllingViewShouldResign"));
    if (!shouldResign)
    {
        var element = objj_msgSend(self, "_inputElement");
        window.setTimeout(function()
        {
            element.focus();
        }, 0);
        return NO;
    }
    objj_msgSend(self._listDelegate, "close");
    var value = objj_msgSend(self, "stringValue");
    if (value)
    {
        if (self._forceSelection && !objj_msgSend(value, "isEqual:", self._selectedStringValue))
            objj_msgSend(self, "setStringValue:", self._selectedStringValue);
    }
    else
        self._selectedStringValue = "";
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "resignFirstResponder");
}
,["BOOL"]), new objj_method(sel_getUid("setFont:"), function $CPComboBox__setFont_(self, _cmd, aFont)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "setFont:", aFont);
    objj_msgSend(self._listDelegate, "setFont:", aFont);
}
,["void","CPFont"]), new objj_method(sel_getUid("setAlignment:"), function $CPComboBox__setAlignment_(self, _cmd, alignment)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "setAlignment:", alignment);
    objj_msgSend(self._listDelegate, "setAlignment:", alignment);
}
,["void","CPTextAlignment"]), new objj_method(sel_getUid("popupButtonRectForBounds:"), function $CPComboBox__popupButtonRectForBounds_(self, _cmd, bounds)
{
    var borderInset = objj_msgSend(self, "currentValueForThemeAttribute:", "border-inset"),
        buttonSize = objj_msgSend(self, "currentValueForThemeAttribute:", "popup-button-size");
    bounds.origin.x = CGRectGetMaxX(bounds) - borderInset.right - buttonSize.width;
    bounds.origin.y += borderInset.top;
    bounds.size.width = buttonSize.width;
    bounds.size.height = buttonSize.height;
    return bounds;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPComboBox__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "popup-button-view")
        return objj_msgSend(self, "popupButtonRectForBounds:", objj_msgSend(self, "bounds"));
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPComboBox__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "popup-button-view")
    {
        var view = objj_msgSend(objj_msgSend(_CPComboBoxPopUpButton, "alloc"), "initWithFrame:comboBox:", CGRectMakeZero(), self);
        return view;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "createEphemeralSubviewNamed:", aName);
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPComboBox__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "layoutSubviews");
    var popupButtonView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "popup-button-view", CPWindowAbove, "content-view");
}
,["void"]), new objj_method(sel_getUid("_dataSourceWarningForMethod:condition:"), function $CPComboBox___dataSourceWarningForMethod_condition_(self, _cmd, cmd, flag)
{
    CPLog.warn("-[%s %s] should not be called when usesDataSource is set to %s", objj_msgSend(self, "className"), cmd, flag ? "YES" : "NO");
}
,["void","SEL","CPString"]), new objj_method(sel_getUid("_selectMatchingItem"), function $CPComboBox___selectMatchingItem(self, _cmd)
{
    var index = CPNotFound,
        stringValue = objj_msgSend(self, "stringValue");
    if (self._usesDataSource)
    {
        if (self._dataSource && objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("comboBox:indexOfItemWithStringValue:")))
            index = objj_msgSend(self._dataSource, "comboBox:indexOfItemWithStringValue:", self, stringValue);
    }
    else
        index = objj_msgSend(self, "indexOfItemWithObjectValue:", stringValue);
    objj_msgSend(self._listDelegate, "selectRow:", index);
    if (index !== CPNotFound)
    {
        objj_msgSend(self._listDelegate, "scrollItemAtIndexToTop:", index);
        self._selectedStringValue = stringValue;
    }
}
,["void"]), new objj_method(sel_getUid("_borderFrame"), function $CPComboBox___borderFrame(self, _cmd)
{
    var inset = objj_msgSend(self, "currentValueForThemeAttribute:", "border-inset"),
        frame = objj_msgSend(self, "bounds");
    frame.origin.x += inset.left;
    frame.origin.y += inset.top;
    frame.size.width -= inset.left + inset.right;
    frame.size.height -= inset.top + inset.bottom;
    return frame;
}
,["CGRect"]), new objj_method(sel_getUid("_popUpButtonWasClicked"), function $CPComboBox___popUpButtonWasClicked(self, _cmd)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    var firstResponder = objj_msgSend(objj_msgSend(self, "window"), "firstResponder");
    self._popUpButtonCausedResign = firstResponder === self;
    if (objj_msgSend(self, "listIsVisible"))
        objj_msgSend(self._listDelegate, "close");
    else
    {
        if (firstResponder !== self)
            objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
        objj_msgSend(self, "popUpList");
    }
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPComboBox__defaultThemeClass(self, _cmd)
{
    return "combobox";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPComboBox__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGSizeMake(21.0, 29.0), "popup-button-size", CGInsetMake(3.0, 3.0, 3.0, 3.0), "border-inset");
}
,["id"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPComboBox___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPContentBinding || aBinding === CPContentValuesBinding)
        return objj_msgSend(_CPComboBoxContentBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPComboBox").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{
var the_class = objj_getClass("CPComboBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPComboBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("comboBoxSelectionIsChanging:"), function $CPComboBox__comboBoxSelectionIsChanging_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPComboBoxSelectionIsChangingNotification, self);
}
,["void","CPNotification"]), new objj_method(sel_getUid("comboBoxSelectionDidChange:"), function $CPComboBox__comboBoxSelectionDidChange_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPComboBoxSelectionDidChangeNotification, self);
}
,["void","CPNotification"]), new objj_method(sel_getUid("comboBoxWillPopUp:"), function $CPComboBox__comboBoxWillPopUp_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPComboBoxWillPopUpNotification, self);
}
,["void","CPNotification"]), new objj_method(sel_getUid("comboBoxWillDismiss:"), function $CPComboBox__comboBoxWillDismiss_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPComboBoxWillDismissNotification, self);
}
,["void","CPNotification"])]);
}{
var the_class = objj_getClass("CPComboBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPComboBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("comboBoxCompletedString:"), function $CPComboBox__comboBoxCompletedString_(self, _cmd, uncompletedString)
{
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("comboBox:completedString:")))
        return objj_msgSend(self._dataSource, "comboBox:completedString:", self, uncompletedString);
    else
        return nil;
}
,["CPString","CPString"])]);
}{
var the_class = objj_getClass("CPComboBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPComboBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("numberOfItemsInList:"), function $CPComboBox__numberOfItemsInList_(self, _cmd, aList)
{
    return objj_msgSend(self, "numberOfItems");
}
,["int","_CPPopUpList"]), new objj_method(sel_getUid("numberOfVisibleItemsInList:"), function $CPComboBox__numberOfVisibleItemsInList_(self, _cmd, aList)
{
    return objj_msgSend(self, "numberOfVisibleItems");
}
,["int","_CPPopUpList"]), new objj_method(sel_getUid("list:objectValueForItemAtIndex:"), function $CPComboBox__list_objectValueForItemAtIndex_(self, _cmd, aList, index)
{
    if (self._usesDataSource)
        return objj_msgSend(self._dataSource, "comboBox:objectValueForItemAtIndex:", self, index);
    else
        return self._items[index];
}
,["id","_CPPopUpList","int"]), new objj_method(sel_getUid("list:displayValueForObjectValue:"), function $CPComboBox__list_displayValueForObjectValue_(self, _cmd, aList, aValue)
{
    return aValue || "";
}
,["id","_CPPopUpList","id"]), new objj_method(sel_getUid("list:stringValueForObjectValue:"), function $CPComboBox__list_stringValueForObjectValue_(self, _cmd, aList, aValue)
{
    return String(aValue);
}
,["CPString","_CPPopUpList","id"])]);
}{
var the_class = objj_getClass("CPComboBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPComboBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setContentValues:"), function $CPComboBox__setContentValues_(self, _cmd, anArray)
{
    objj_msgSend(self, "setUsesDataSource:", NO);
    objj_msgSend(self, "removeAllItems");
    objj_msgSend(self, "addItemsWithObjectValues:", anArray);
}
,["void","CPArray"]), new objj_method(sel_getUid("setContent:"), function $CPComboBox__setContent_(self, _cmd, anArray)
{
    objj_msgSend(self, "setUsesDataSource:", NO);
    self._items = [];
    var values = [];
    objj_msgSend(anArray, "enumerateObjectsUsingBlock:", function(object)
    {
        values.push(objj_msgSend(object, "description"));
    });
    objj_msgSend(self, "addItemsWithObjectValues:", values);
}
,["void","CPArray"])]);
}var CPComboBoxItemsKey = "CPComboBoxItemsKey",
    CPComboBoxListKey = "CPComboBoxListKey",
    CPComboBoxDelegateKey = "CPComboBoxDelegateKey",
    CPComboBoxDataSourceKey = "CPComboBoxDataSourceKey",
    CPComboBoxUsesDataSourceKey = "CPComboBoxUsesDataSourceKey",
    CPComboBoxCompletesKey = "CPComboBoxCompletesKey",
    CPComboBoxNumberOfVisibleItemsKey = "CPComboBoxNumberOfVisibleItemsKey",
    CPComboBoxHasVerticalScrollerKey = "CPComboBoxHasVerticalScrollerKey",
    CPComboBoxButtonBorderedKey = "CPComboBoxButtonBorderedKey";
{
var the_class = objj_getClass("CPComboBox")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPComboBox\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPComboBox__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "_initComboBox");
        self._items = objj_msgSend(aCoder, "decodeObjectForKey:", CPComboBoxItemsKey);
        self._listDelegate = objj_msgSend(aCoder, "decodeObjectForKey:", CPComboBoxListKey);
        self._delegate = objj_msgSend(aCoder, "decodeObjectForKey:", CPComboBoxDelegateKey);
        self._dataSource = objj_msgSend(aCoder, "decodeObjectForKey:", CPComboBoxDataSourceKey);
        self._usesDataSource = objj_msgSend(aCoder, "decodeBoolForKey:", CPComboBoxUsesDataSourceKey);
        self._completes = objj_msgSend(aCoder, "decodeBoolForKey:", CPComboBoxCompletesKey);
        self._numberOfVisibleItems = objj_msgSend(aCoder, "decodeIntForKey:", CPComboBoxNumberOfVisibleItemsKey);
        self._hasVerticalScroller = objj_msgSend(aCoder, "decodeBoolForKey:", CPComboBoxHasVerticalScrollerKey);
        objj_msgSend(self, "setButtonBordered:", objj_msgSend(aCoder, "decodeBoolForKey:", CPComboBoxButtonBorderedKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPComboBox__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPComboBox").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._items, CPComboBoxItemsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._listDelegate, CPComboBoxListKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._delegate, CPComboBoxDelegateKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._dataSource, CPComboBoxDataSourceKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._usesDataSource, CPComboBoxUsesDataSourceKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._completes, CPComboBoxCompletesKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._numberOfVisibleItems, CPComboBoxNumberOfVisibleItemsKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._hasVerticalScroller, CPComboBoxHasVerticalScrollerKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "isButtonBordered"), CPComboBoxButtonBorderedKey);
}
,["void","CPCoder"])]);
}var CPComboBoxCompletionTest = function(object, index, context)
{
    return (object.toString()).indexOf(context) === 0;
};
{var the_class = objj_allocateClassPair(CPBinder, "_CPComboBoxContentBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPComboBoxContentBinder__setValueFor_(self, _cmd, aBinding)
{
    var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey),
        options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        newValue = objj_msgSend(destination, "valueForKeyPath:", keyPath),
        isPlaceholder = CPIsControllerMarker(newValue);
    objj_msgSend(self._source, "removeAllItems");
    if (isPlaceholder)
    {
        switch(newValue) {
        case CPMultipleValuesMarker:
            newValue = objj_msgSend(options, "objectForKey:", CPMultipleValuesPlaceholderBindingOption) || [];
            break;
        case CPNoSelectionMarker:
            newValue = objj_msgSend(options, "objectForKey:", CPNoSelectionPlaceholderBindingOption) || [];
            break;
        case CPNotApplicableMarker:
            if (objj_msgSend(options, "objectForKey:", CPRaisesForNotApplicableKeysBindingOption))
                objj_msgSend(CPException, "raise:reason:", CPGenericException, "can't transform non applicable key on: " + self._source + " value: " + newValue);
            newValue = objj_msgSend(options, "objectForKey:", CPNotApplicablePlaceholderBindingOption) || [];
            break;
        case CPNullMarker:
            newValue = objj_msgSend(options, "objectForKey:", CPNullPlaceholderBindingOption) || [];
            break;
        }
        if (!objj_msgSend(newValue, "isKindOfClass:", objj_msgSend(CPArray, "class")))
            newValue = [];
    }
    else
        newValue = objj_msgSend(self, "transformValue:withOptions:", newValue, options);
    switch(aBinding) {
    case CPContentBinding:
        objj_msgSend(self._source, "setContent:", newValue);
        break;
    case CPContentValuesBinding:
        objj_msgSend(self._source, "setContentValues:", newValue);
        break;
    }
}
,["void","CPString"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPComboBoxPopUpButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_comboBox")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:comboBox:"), function $_CPComboBoxPopUpButton__initWithFrame_comboBox_(self, _cmd, aFrame, aComboBox)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPComboBoxPopUpButton").super_class }, "initWithFrame:", aFrame);
    if (self)
        self._comboBox = aComboBox;
    return self;
}
,["id","CGRect","CPComboBox"]), new objj_method(sel_getUid("mouseDown:"), function $_CPComboBoxPopUpButton__mouseDown_(self, _cmd, theEvent)
{
    objj_msgSend(self._comboBox, "_popUpButtonWasClicked");
}
,["void","CPEvent"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPComboBoxPopUpButton__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"])]);
}p;17;CPCompatibility.jt;9690;@STATIC;1.0;i;19;CPEvent_Constants.ji;12;CPPlatform.jt;9630;objj_executeFile("CPEvent_Constants.j", YES);objj_executeFile("CPPlatform.j", YES);CPUnknownBrowserEngine = 0;
CPGeckoBrowserEngine = 1;
CPInternetExplorerBrowserEngine = 2;
CPKHTMLBrowserEngine = 3;
CPOperaBrowserEngine = 4;
CPWebKitBrowserEngine = 5;
CPMacOperatingSystem = 0;
CPWindowsOperatingSystem = 1;
CPOtherOperatingSystem = 2;
CPCSSRGBAFeature = 5;
CPHTMLCanvasFeature = 6;
CPHTMLContentEditableFeature = 7;
CPHTMLDragAndDropFeature = 8;
CPJavaScriptInnerTextFeature = 9;
CPJavaScriptTextContentFeature = 10;
CPJavaScriptClipboardEventsFeature = 11;
CPJavaScriptClipboardAccessFeature = 12;
CPJavaScriptCanvasDrawFeature = 13;
CPJavaScriptCanvasTransformFeature = 14;
CPVMLFeature = 15;
CPJavaScriptRemedialKeySupport = 16;
CPJavaScriptShadowFeature = 20;
CPJavaScriptNegativeMouseWheelValues = 22;
CPJavaScriptMouseWheelValues_8_15 = 23;
CPOpacityRequiresFilterFeature = 24;
CPInputTypeCanBeChangedFeature = 25;
CPHTML5DragAndDropSourceYOffBy1 = 26;
CPSOPDisabledFromFileURLs = 27;
CPInputSetFontOutsideOfDOM = 28;
CPInput1PxLeftPadding = 29;
CPInputOnInputEventFeature = 30;
CPFileAPIFeature = 31;
CPCanvasParentDrawErrorsOnMovementBug = 1 << 0;
CPJavaScriptPasteRequiresEditableTarget = 1 << 1;
CPJavaScriptPasteCantRefocus = 1 << 2;
var USER_AGENT = "",
    PLATFORM_ENGINE = CPUnknownBrowserEngine,
    PLATFORM_FEATURES = [],
    PLATFORM_BUGS = 0,
    PLATFORM_STYLE_JS_PROPERTIES = {};
PLATFORM_FEATURES[CPInputTypeCanBeChangedFeature] = YES;
PLATFORM_FEATURES[CPInputSetFontOutsideOfDOM] = YES;
if (typeof window !== "undefined" && typeof window.navigator !== "undefined")
    USER_AGENT = window.navigator.userAgent;
if (typeof window !== "undefined" && window.opera)
{
    PLATFORM_ENGINE = CPOperaBrowserEngine;
    PLATFORM_FEATURES[CPJavaScriptCanvasDrawFeature] = YES;
}else if (typeof window !== "undefined" && window.attachEvent)
{
    PLATFORM_ENGINE = CPInternetExplorerBrowserEngine;
    PLATFORM_FEATURES[CPVMLFeature] = YES;
    PLATFORM_FEATURES[CPJavaScriptRemedialKeySupport] = YES;
    PLATFORM_FEATURES[CPJavaScriptShadowFeature] = YES;
    PLATFORM_FEATURES[CPOpacityRequiresFilterFeature] = YES;
    PLATFORM_FEATURES[CPInputTypeCanBeChangedFeature] = NO;
    PLATFORM_FEATURES[CPInputSetFontOutsideOfDOM] = NO;
    PLATFORM_FEATURES[CPJavaScriptClipboardAccessFeature] = YES;
}else if (USER_AGENT.indexOf("AppleWebKit/") != -1)
{
    PLATFORM_ENGINE = CPWebKitBrowserEngine;
    PLATFORM_FEATURES[CPCSSRGBAFeature] = YES;
    PLATFORM_FEATURES[CPHTMLContentEditableFeature] = YES;
    PLATFORM_FEATURES[CPJavaScriptClipboardEventsFeature] = YES;
    PLATFORM_FEATURES[CPJavaScriptClipboardAccessFeature] = NO;
    PLATFORM_FEATURES[CPJavaScriptShadowFeature] = YES;
    var versionStart = USER_AGENT.indexOf("AppleWebKit/") + "AppleWebKit/".length,
        versionEnd = USER_AGENT.indexOf(" ", versionStart),
        versionString = USER_AGENT.substring(versionStart, versionEnd),
        versionDivision = versionString.indexOf('.'),
        majorVersion = parseInt(versionString.substring(0, versionDivision)),
        minorVersion = parseInt(versionString.substr(versionDivision + 1));
    if (USER_AGENT.indexOf("Safari") !== CPNotFound && (majorVersion > 525 || majorVersion === 525 && minorVersion > 14) || USER_AGENT.indexOf("Chrome") !== CPNotFound)
        PLATFORM_FEATURES[CPJavaScriptRemedialKeySupport] = YES;
    if (!objj_msgSend(CPPlatform, "isBrowser"))
        PLATFORM_FEATURES[CPJavaScriptRemedialKeySupport] = YES;
    if (majorVersion < 532 || majorVersion === 532 && minorVersion < 6)
        PLATFORM_FEATURES[CPHTML5DragAndDropSourceYOffBy1] = YES;
    if (majorVersion < 537)
        PLATFORM_FEATURES[CPInput1PxLeftPadding] = YES;
    if (USER_AGENT.indexOf("Chrome") === CPNotFound)
    {
        PLATFORM_FEATURES[CPSOPDisabledFromFileURLs] = YES;
        PLATFORM_FEATURES[CPHTMLDragAndDropFeature] = YES;
        PLATFORM_BUGS |= CPJavaScriptPasteRequiresEditableTarget;
        PLATFORM_BUGS |= CPJavaScriptPasteCantRefocus;
    }
    if (majorVersion > 533)
        PLATFORM_BUGS |= CPCanvasParentDrawErrorsOnMovementBug;
}else if (USER_AGENT.indexOf("KHTML") != -1)
{
    PLATFORM_ENGINE = CPKHTMLBrowserEngine;
}else if (USER_AGENT.indexOf("Gecko") !== -1)
{
    PLATFORM_ENGINE = CPGeckoBrowserEngine;
    PLATFORM_FEATURES[CPJavaScriptCanvasDrawFeature] = YES;
    var index = USER_AGENT.indexOf("Firefox"),
        version = index === -1 ? 2.0 : parseFloat(USER_AGENT.substring(index + "Firefox".length + 1));
    if (version >= 3.0)
        PLATFORM_FEATURES[CPCSSRGBAFeature] = YES;
    if (version < 3.0)
        PLATFORM_FEATURES[CPJavaScriptMouseWheelValues_8_15] = YES;
    PLATFORM_FEATURES[CPInput1PxLeftPadding] = YES;
}if (typeof document != "undefined")
{
    var canvasElement = document.createElement("canvas");
    if (canvasElement && canvasElement.getContext)
    {
        PLATFORM_FEATURES[CPHTMLCanvasFeature] = YES;
        PLATFORM_FEATURES[CPOpacityRequiresFilterFeature] = NO;
        var context = (document.createElement("canvas")).getContext("2d");
        if (context && context.setTransform && context.transform)
            PLATFORM_FEATURES[CPJavaScriptCanvasTransformFeature] = YES;
    }
    var DOMElement = document.createElement("div");
    if (DOMElement.innerText != undefined)
        PLATFORM_FEATURES[CPJavaScriptInnerTextFeature] = YES;
    else if (DOMElement.textContent != undefined)
        PLATFORM_FEATURES[CPJavaScriptTextContentFeature] = YES;
    var DOMInputElement = document.createElement("input");
    if ("oninput" in DOMInputElement)
        PLATFORM_FEATURES[CPInputOnInputEventFeature] = YES;
    else if (typeof DOMInputElement.setAttribute === "function")
    {
        DOMInputElement.setAttribute("oninput", "return;");
        if (typeof DOMInputElement.oninput === "function")
            PLATFORM_FEATURES[CPInputOnInputEventFeature] = YES;
    }
    if (typeof DOMInputElement.setAttribute === "function")
    {
        DOMInputElement.setAttribute("type", "file");
        PLATFORM_FEATURES[CPFileAPIFeature] = !!DOMInputElement["files"];
    }
    else
        PLATFORM_FEATURES[CPFileAPIFeature] = NO;
}CPFeatureIsCompatible = function(aFeature)
{
    return !!PLATFORM_FEATURES[aFeature];
}
CPPlatformHasBug = function(aBug)
{
    return PLATFORM_BUGS & aBug;
}
CPBrowserIsEngine = function(anEngine)
{
    return PLATFORM_ENGINE === anEngine;
}
CPBrowserIsOperatingSystem = function(anOperatingSystem)
{
    return OPERATING_SYSTEM === anOperatingSystem;
}
OPERATING_SYSTEM = CPOtherOperatingSystem;
if (USER_AGENT.indexOf("Mac") !== -1)
{
    OPERATING_SYSTEM = CPMacOperatingSystem;
    CPPlatformActionKeyMask = CPCommandKeyMask;
    CPUndoKeyEquivalent = "z";
    CPRedoKeyEquivalent = "Z";
    CPUndoKeyEquivalentModifierMask = CPCommandKeyMask;
    CPRedoKeyEquivalentModifierMask = CPCommandKeyMask;
}else
{
    if (USER_AGENT.indexOf("Windows") !== -1)
        OPERATING_SYSTEM = CPWindowsOperatingSystem;
    CPPlatformActionKeyMask = CPControlKeyMask;
    CPUndoKeyEquivalent = "z";
    CPRedoKeyEquivalent = "y";
    CPUndoKeyEquivalentModifierMask = CPControlKeyMask;
    CPRedoKeyEquivalentModifierMask = CPControlKeyMask;
}CPBrowserStyleProperty = function(aProperty)
{
    var lowerProperty = aProperty.toLowerCase();
    if (PLATFORM_STYLE_JS_PROPERTIES[lowerProperty] === undefined)
    {
        var r = nil;
        var testElement = document.createElement('div');
        switch(lowerProperty) {
        case 'transitionend':
            var candidates = {'WebkitTransition': 'webkitTransitionEnd', 'MozTransition': 'transitionend', 'OTransition': 'oTransitionEnd', 'msTransition': 'MSTransitionEnd', 'transition': 'transitionend'};
            r = candidates[PLATFORM_STYLE_JS_PROPERTIES['transition']] || nil;
            break;
default:
            var prefixes = ["Webkit", "Moz", "O", "ms"],
                strippedProperty = (aProperty.split('-')).join(' '),
                capProperty = (objj_msgSend(strippedProperty, "capitalizedString").split(' ')).join('');
            for (var i = 0; i < prefixes.length; i++)
            {
                if (prefixes[i] + aProperty in testElement.style)
                {
                    r = prefixes[i] + aProperty;
                    break;
                }
                else if (prefixes[i] + capProperty in testElement.style)
                {
                    r = prefixes[i] + capProperty;
                    break;
                }
            }
            if (!r && lowerProperty in testElement.style)
                r = lowerProperty;
            break;
        }
        PLATFORM_STYLE_JS_PROPERTIES[lowerProperty] = r;
    }
    return PLATFORM_STYLE_JS_PROPERTIES[lowerProperty];
}
CPBrowserCSSProperty = function(aProperty)
{
    var browserProperty = CPBrowserStyleProperty(aProperty);
    if (!browserProperty)
        return nil;
    var prefixes = {'Webkit': '-webkit-', 'Moz': '-moz-', 'O': '-o-', 'ms': '-ms-'};
    for (var prefix in prefixes)
    {
        if (browserProperty.substring(0, prefix.length) == prefix)
        {
            var browserPropertyWithoutPrefix = browserProperty.substring(prefix.length),
                parts = browserPropertyWithoutPrefix.match(/[A-Z][a-z]+/g);
            if (parts && parts.length > 0)
                browserPropertyWithoutPrefix = parts.join("-");
            return prefixes[prefix] + browserPropertyWithoutPrefix.toLowerCase();
        }
    }
    var parts = browserProperty.match(/[A-Z][a-z]+/g);
    if (parts && parts.length > 0)
        browserProperty = parts.join("-");
    return browserProperty.toLowerCase();
}
p;11;CPControl.jt;29711;@STATIC;1.0;I;24;Foundation/CPFormatter.jI;20;Foundation/CPTimer.ji;8;CPFont.ji;10;CPShadow.ji;8;CPView.ji;19;CPKeyValueBinding.jt;29574;objj_executeFile("Foundation/CPFormatter.j", NO);objj_executeFile("Foundation/CPTimer.j", NO);objj_executeFile("CPFont.j", YES);objj_executeFile("CPShadow.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPKeyValueBinding.j", YES);CPLeftTextAlignment = 0;
CPRightTextAlignment = 1;
CPCenterTextAlignment = 2;
CPJustifiedTextAlignment = 3;
CPNaturalTextAlignment = 4;
CPRegularControlSize = 0;
CPSmallControlSize = 1;
CPMiniControlSize = 2;
CPLineBreakByWordWrapping = 0;
CPLineBreakByCharWrapping = 1;
CPLineBreakByClipping = 2;
CPLineBreakByTruncatingHead = 3;
CPLineBreakByTruncatingTail = 4;
CPLineBreakByTruncatingMiddle = 5;
CPTopVerticalTextAlignment = 1;
CPCenterVerticalTextAlignment = 2;
CPBottomVerticalTextAlignment = 3;
CPScaleProportionally = 0;
CPScaleToFit = 1;
CPScaleNone = 2;
CPImageScaleProportionallyDown = 0;
CPImageScaleAxesIndependently = 1;
CPImageScaleNone = 2;
CPImageScaleProportionallyUpOrDown = 3;
CPNoImage = 0;
CPImageOnly = 1;
CPImageLeft = 2;
CPImageRight = 3;
CPImageBelow = 4;
CPImageAbove = 5;
CPImageOverlaps = 6;
CPOnState = 1;
CPOffState = 0;
CPMixedState = -1;
CPControlNormalBackgroundColor = "CPControlNormalBackgroundColor";
CPControlSelectedBackgroundColor = "CPControlSelectedBackgroundColor";
CPControlHighlightedBackgroundColor = "CPControlHighlightedBackgroundColor";
CPControlDisabledBackgroundColor = "CPControlDisabledBackgroundColor";
CPControlTextDidBeginEditingNotification = "CPControlTextDidBeginEditingNotification";
CPControlTextDidChangeNotification = "CPControlTextDidChangeNotification";
CPControlTextDidEndEditingNotification = "CPControlTextDidEndEditingNotification";
var CPControlBlackColor = objj_msgSend(CPColor, "blackColor");
{var the_class = objj_allocateClassPair(CPView, "CPControl"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_value"), new objj_ivar("_formatter"), new objj_ivar("_target"), new objj_ivar("_action"), new objj_ivar("_sendActionOn"), new objj_ivar("_sendsActionOnEndEditing"), new objj_ivar("_continuousTracking"), new objj_ivar("_trackingWasWithinFrame"), new objj_ivar("_trackingMouseDownFlags"), new objj_ivar("_previousTrackingLocation")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("formatter"), function $CPControl__formatter(self, _cmd)
{
    return self._formatter;
}
,["CPFormatter"]), new objj_method(sel_getUid("setFormatter:"), function $CPControl__setFormatter_(self, _cmd, newValue)
{
    self._formatter = newValue;
}
,["void","CPFormatter"]), new objj_method(sel_getUid("sendsActionOnEndEditing"), function $CPControl__sendsActionOnEndEditing(self, _cmd)
{
    return self._sendsActionOnEndEditing;
}
,["BOOL"]), new objj_method(sel_getUid("setSendsActionOnEndEditing:"), function $CPControl__setSendsActionOnEndEditing_(self, _cmd, newValue)
{
    self._sendsActionOnEndEditing = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("_continuouslyReverseSetBinding"), function $CPControl___continuouslyReverseSetBinding(self, _cmd)
{
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", CPValueBinding),
        theBinding = objj_msgSend(binderClass, "getBinding:forObject:", CPValueBinding, self);
    if (objj_msgSend(theBinding, "continuouslyUpdatesValue"))
        objj_msgSend(theBinding, "reverseSetValueFor:", "objectValue");
}
,["void"]), new objj_method(sel_getUid("_reverseSetBinding"), function $CPControl___reverseSetBinding(self, _cmd)
{
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", CPValueBinding),
        theBinding = objj_msgSend(binderClass, "getBinding:forObject:", CPValueBinding, self);
    objj_msgSend(theBinding, "reverseSetValueFor:", "objectValue");
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $CPControl__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPControl").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._sendActionOn = CPLeftMouseUpMask;
        self._trackingMouseDownFlags = 0;
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setAction:"), function $CPControl__setAction_(self, _cmd, anAction)
{
    self._action = anAction;
}
,["void","SEL"]), new objj_method(sel_getUid("action"), function $CPControl__action(self, _cmd)
{
    return self._action;
}
,["SEL"]), new objj_method(sel_getUid("setTarget:"), function $CPControl__setTarget_(self, _cmd, aTarget)
{
    self._target = aTarget;
}
,["void","id"]), new objj_method(sel_getUid("target"), function $CPControl__target(self, _cmd)
{
    return self._target;
}
,["id"]), new objj_method(sel_getUid("sendAction:to:"), function $CPControl__sendAction_to_(self, _cmd, anAction, anObject)
{
    objj_msgSend(self, "_reverseSetBinding");
    var binding = objj_msgSend(CPBinder, "getBinding:forObject:", CPTargetBinding, self);
    objj_msgSend(binding, "invokeAction");
    return objj_msgSend(CPApp, "sendAction:to:from:", anAction, anObject, self);
}
,["BOOL","SEL","id"]), new objj_method(sel_getUid("sendActionOn:"), function $CPControl__sendActionOn_(self, _cmd, mask)
{
    var previousMask = self._sendActionOn;
    self._sendActionOn = mask;
    return previousMask;
}
,["int","int"]), new objj_method(sel_getUid("isContinuous"), function $CPControl__isContinuous(self, _cmd)
{
    return (self._sendActionOn & CPPeriodicMask) !== 0;
}
,["BOOL"]), new objj_method(sel_getUid("setContinuous:"), function $CPControl__setContinuous_(self, _cmd, flag)
{
    if (flag)
        self._sendActionOn |= CPPeriodicMask;
    else
        self._sendActionOn &= ~CPPeriodicMask;
}
,["void","BOOL"]), new objj_method(sel_getUid("tracksMouseOutsideOfFrame"), function $CPControl__tracksMouseOutsideOfFrame(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("trackMouse:"), function $CPControl__trackMouse_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type"),
        currentLocation = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        isWithinFrame = objj_msgSend(self, "tracksMouseOutsideOfFrame") || CGRectContainsPoint(objj_msgSend(self, "bounds"), currentLocation);
    if (type === CPLeftMouseUp)
    {
        objj_msgSend(self, "stopTracking:at:mouseIsUp:", self._previousTrackingLocation, currentLocation, YES);
        self._trackingMouseDownFlags = 0;
        if (isWithinFrame)
            objj_msgSend(self, "setThemeState:", CPThemeStateHovered);
    }
    else
    {
        objj_msgSend(self, "unsetThemeState:", CPThemeStateHovered);
        if (type === CPLeftMouseDown)
        {
            self._trackingMouseDownFlags = objj_msgSend(anEvent, "modifierFlags");
            self._continuousTracking = objj_msgSend(self, "startTrackingAt:", currentLocation);
        }
        else if (type === CPLeftMouseDragged)
        {
            if (isWithinFrame)
            {
                if (!self._trackingWasWithinFrame)
                    self._continuousTracking = objj_msgSend(self, "startTrackingAt:", currentLocation);
                else if (self._continuousTracking)
                    self._continuousTracking = objj_msgSend(self, "continueTracking:at:", self._previousTrackingLocation, currentLocation);
            }
            else
                objj_msgSend(self, "stopTracking:at:mouseIsUp:", self._previousTrackingLocation, currentLocation, NO);
        }
        objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackMouse:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
    }
    if (self._sendActionOn & 1 << type && isWithinFrame)
        objj_msgSend(self, "sendAction:to:", self._action, self._target);
    self._trackingWasWithinFrame = isWithinFrame;
    self._previousTrackingLocation = currentLocation;
}
,["void","CPEvent"]), new objj_method(sel_getUid("setState:"), function $CPControl__setState_(self, _cmd, state)
{
}
,["void","int"]), new objj_method(sel_getUid("nextState"), function $CPControl__nextState(self, _cmd)
{
    return 0;
}
,["int"]), new objj_method(sel_getUid("performClick:"), function $CPControl__performClick_(self, _cmd, sender)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "highlight:", YES);
    objj_msgSend(self, "setState:", objj_msgSend(self, "nextState"));
    try    {
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    catch(e)     {
        throw e;
    }    finally     {
        objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.1, self, sel_getUid("unhighlightButtonTimerDidFinish:"), nil, NO);
    }
}
,["void","id"]), new objj_method(sel_getUid("unhighlightButtonTimerDidFinish:"), function $CPControl__unhighlightButtonTimerDidFinish_(self, _cmd, sender)
{
    objj_msgSend(self, "highlight:", NO);
}
,["void","id"]), new objj_method(sel_getUid("mouseDownFlags"), function $CPControl__mouseDownFlags(self, _cmd)
{
    return self._trackingMouseDownFlags;
}
,["unsigned"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPControl__startTrackingAt_(self, _cmd, aPoint)
{
    objj_msgSend(self, "highlight:", YES);
    return self._sendActionOn & CPPeriodicMask || self._sendActionOn & CPLeftMouseDraggedMask;
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("continueTracking:at:"), function $CPControl__continueTracking_at_(self, _cmd, lastPoint, aPoint)
{
    return self._sendActionOn & CPPeriodicMask || self._sendActionOn & CPLeftMouseDraggedMask;
}
,["BOOL","CGPoint","CGPoint"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $CPControl__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    if (mouseIsUp)
        objj_msgSend(self, "highlight:", NO);
    else
        objj_msgSend(self, "highlight:", YES);
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("acceptsFirstMouse:"), function $CPControl__acceptsFirstMouse_(self, _cmd, anEvent)
{
    return objj_msgSend(self, "isEnabled");
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $CPControl__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "trackMouse:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseEntered:"), function $CPControl__mouseEntered_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "setThemeState:", CPThemeStateHovered);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPControl__mouseExited_(self, _cmd, anEvent)
{
    var currentLocation = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        isWithinFrame = objj_msgSend(self, "tracksMouseOutsideOfFrame") || CGRectContainsPoint(objj_msgSend(self, "bounds"), currentLocation);
    if (!isWithinFrame)
        objj_msgSend(self, "unsetThemeState:", CPThemeStateHovered);
}
,["void","CPEvent"]), new objj_method(sel_getUid("objectValue"), function $CPControl__objectValue(self, _cmd)
{
    return self._value;
}
,["id"]), new objj_method(sel_getUid("setObjectValue:"), function $CPControl__setObjectValue_(self, _cmd, anObject)
{
    self._value = anObject;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","id"]), new objj_method(sel_getUid("floatValue"), function $CPControl__floatValue(self, _cmd)
{
    var floatValue = parseFloat(self._value, 10);
    return isNaN(floatValue) ? 0.0 : floatValue;
}
,["float"]), new objj_method(sel_getUid("setFloatValue:"), function $CPControl__setFloatValue_(self, _cmd, aValue)
{
    objj_msgSend(self, "setObjectValue:", aValue);
}
,["void","float"]), new objj_method(sel_getUid("doubleValue"), function $CPControl__doubleValue(self, _cmd)
{
    var doubleValue = parseFloat(self._value, 10);
    return isNaN(doubleValue) ? 0.0 : doubleValue;
}
,["double"]), new objj_method(sel_getUid("setDoubleValue:"), function $CPControl__setDoubleValue_(self, _cmd, anObject)
{
    objj_msgSend(self, "setObjectValue:", anObject);
}
,["void","double"]), new objj_method(sel_getUid("intValue"), function $CPControl__intValue(self, _cmd)
{
    var intValue = parseInt(self._value, 10);
    return isNaN(intValue) ? 0.0 : intValue;
}
,["int"]), new objj_method(sel_getUid("setIntValue:"), function $CPControl__setIntValue_(self, _cmd, anObject)
{
    objj_msgSend(self, "setObjectValue:", anObject);
}
,["void","int"]), new objj_method(sel_getUid("integerValue"), function $CPControl__integerValue(self, _cmd)
{
    var intValue = parseInt(self._value, 10);
    return isNaN(intValue) ? 0.0 : intValue;
}
,["int"]), new objj_method(sel_getUid("setIntegerValue:"), function $CPControl__setIntegerValue_(self, _cmd, anObject)
{
    objj_msgSend(self, "setObjectValue:", anObject);
}
,["void","int"]), new objj_method(sel_getUid("stringValue"), function $CPControl__stringValue(self, _cmd)
{
    if (self._formatter && self._value !== undefined)
    {
        var formattedValue = objj_msgSend(self, "hasThemeState:", CPThemeStateEditing) ? objj_msgSend(self._formatter, "editingStringForObjectValue:", self._value) : objj_msgSend(self._formatter, "stringForObjectValue:", self._value);
        if (formattedValue !== nil && formattedValue !== undefined)
            return formattedValue;
    }
    return self._value === undefined || self._value === nil ? "" : String(self._value);
}
,["CPString"]), new objj_method(sel_getUid("setStringValue:"), function $CPControl__setStringValue_(self, _cmd, aString)
{
    if (aString === nil || aString === undefined)
    {
        CPLog.warn("nil or undefined sent to CPControl -setStringValue");
        return;
    }
    var value;
    if (self._formatter)
    {
        value = nil;
        if (objj_msgSend(self._formatter, "getObjectValue:forString:errorDescription:", function(__input) { if (arguments.length) return value = __input; return value; }, aString, nil) === NO)
        {
            if (!aString || objj_msgSend(self._formatter, "getObjectValue:forString:errorDescription:", function(__input) { if (arguments.length) return value = __input; return value; }, "", nil) === NO)
                value = undefined;
        }
    }
    else
        value = aString;
    objj_msgSend(self, "setObjectValue:", value);
}
,["void","CPString"]), new objj_method(sel_getUid("takeDoubleValueFrom:"), function $CPControl__takeDoubleValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("doubleValue")))
        objj_msgSend(self, "setDoubleValue:", objj_msgSend(sender, "doubleValue"));
}
,["void","id"]), new objj_method(sel_getUid("takeFloatValueFrom:"), function $CPControl__takeFloatValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("floatValue")))
        objj_msgSend(self, "setFloatValue:", objj_msgSend(sender, "floatValue"));
}
,["void","id"]), new objj_method(sel_getUid("takeIntegerValueFrom:"), function $CPControl__takeIntegerValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("integerValue")))
        objj_msgSend(self, "setIntegerValue:", objj_msgSend(sender, "integerValue"));
}
,["void","id"]), new objj_method(sel_getUid("takeIntValueFrom:"), function $CPControl__takeIntValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("intValue")))
        objj_msgSend(self, "setIntValue:", objj_msgSend(sender, "intValue"));
}
,["void","id"]), new objj_method(sel_getUid("takeObjectValueFrom:"), function $CPControl__takeObjectValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("objectValue")))
        objj_msgSend(self, "setObjectValue:", objj_msgSend(sender, "objectValue"));
}
,["void","id"]), new objj_method(sel_getUid("takeStringValueFrom:"), function $CPControl__takeStringValueFrom_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("stringValue")))
        objj_msgSend(self, "setStringValue:", objj_msgSend(sender, "stringValue"));
}
,["void","id"]), new objj_method(sel_getUid("textDidBeginEditing:"), function $CPControl__textDidBeginEditing_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") != self)
        return;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPControlTextDidBeginEditingNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(note, "object"), "CPFieldEditor"));
}
,["void","CPNotification"]), new objj_method(sel_getUid("textDidChange:"), function $CPControl__textDidChange_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") != self)
        return;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPControlTextDidChangeNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(note, "object"), "CPFieldEditor"));
}
,["void","CPNotification"]), new objj_method(sel_getUid("textDidEndEditing:"), function $CPControl__textDidEndEditing_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") != self)
        return;
    objj_msgSend(self, "_reverseSetBinding");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPControlTextDidEndEditingNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(note, "object"), "CPFieldEditor"));
}
,["void","CPNotification"]), new objj_method(sel_getUid("setAlignment:"), function $CPControl__setAlignment_(self, _cmd, alignment)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", alignment, "alignment");
}
,["void","CPTextAlignment"]), new objj_method(sel_getUid("alignment"), function $CPControl__alignment(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "alignment");
}
,["CPTextAlignment"]), new objj_method(sel_getUid("setVerticalAlignment:"), function $CPControl__setVerticalAlignment_(self, _cmd, alignment)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", alignment, "vertical-alignment");
}
,["void","CPTextVerticalAlignment"]), new objj_method(sel_getUid("verticalAlignment"), function $CPControl__verticalAlignment(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "vertical-alignment");
}
,["CPTextVerticalAlignment"]), new objj_method(sel_getUid("setLineBreakMode:"), function $CPControl__setLineBreakMode_(self, _cmd, mode)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", mode, "line-break-mode");
}
,["void","CPLineBreakMode"]), new objj_method(sel_getUid("lineBreakMode"), function $CPControl__lineBreakMode(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "line-break-mode");
}
,["CPLineBreakMode"]), new objj_method(sel_getUid("setTextColor:"), function $CPControl__setTextColor_(self, _cmd, aColor)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "text-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("textColor"), function $CPControl__textColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "text-color");
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $CPControl__setTextShadowColor_(self, _cmd, aColor)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "text-shadow-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $CPControl__textShadowColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "text-shadow-color");
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowOffset:"), function $CPControl__setTextShadowOffset_(self, _cmd, offset)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", offset, "text-shadow-offset");
}
,["void","CGSize"]), new objj_method(sel_getUid("textShadowOffset"), function $CPControl__textShadowOffset(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "text-shadow-offset");
}
,["CGSize"]), new objj_method(sel_getUid("setFont:"), function $CPControl__setFont_(self, _cmd, aFont)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aFont, "font");
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $CPControl__font(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "font");
}
,["CPFont"]), new objj_method(sel_getUid("setImagePosition:"), function $CPControl__setImagePosition_(self, _cmd, position)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", position, "image-position");
}
,["void","CPCellImagePosition"]), new objj_method(sel_getUid("imagePosition"), function $CPControl__imagePosition(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "image-position");
}
,["CPCellImagePosition"]), new objj_method(sel_getUid("setImageScaling:"), function $CPControl__setImageScaling_(self, _cmd, scaling)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", scaling, "image-scaling");
}
,["void","CPImageScaling"]), new objj_method(sel_getUid("imageScaling"), function $CPControl__imageScaling(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "image-scaling");
}
,["CPImageScaling"]), new objj_method(sel_getUid("setEnabled:"), function $CPControl__setEnabled_(self, _cmd, isEnabled)
{
    if (isEnabled)
        objj_msgSend(self, "unsetThemeState:", CPThemeStateDisabled);
    else
        objj_msgSend(self, "setThemeState:", CPThemeStateDisabled);
}
,["void","BOOL"]), new objj_method(sel_getUid("isEnabled"), function $CPControl__isEnabled(self, _cmd)
{
    return !objj_msgSend(self, "hasThemeState:", CPThemeStateDisabled);
}
,["BOOL"]), new objj_method(sel_getUid("highlight:"), function $CPControl__highlight_(self, _cmd, shouldHighlight)
{
    objj_msgSend(self, "setHighlighted:", shouldHighlight);
}
,["void","BOOL"]), new objj_method(sel_getUid("setHighlighted:"), function $CPControl__setHighlighted_(self, _cmd, isHighlighted)
{
    if (isHighlighted)
        objj_msgSend(self, "setThemeState:", CPThemeStateHighlighted);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateHighlighted);
}
,["void","BOOL"]), new objj_method(sel_getUid("isHighlighted"), function $CPControl__isHighlighted(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateHighlighted);
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("themeAttributes"), function $CPControl__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CPLeftTextAlignment, "alignment", CPTopVerticalTextAlignment, "vertical-alignment", CPLineBreakByClipping, "line-break-mode", objj_msgSend(CPColor, "blackColor"), "text-color", objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize), "font", objj_msgSend(CPNull, "null"), "text-shadow-color", CGSizeMakeZero(), "text-shadow-offset", CPImageLeft, "image-position", CPScaleToFit, "image-scaling", CGSizeMakeZero(), "min-size", CGSizeMake(-1.0, -1.0), "max-size");
}
,["CPDictionary"]), new objj_method(sel_getUid("initialize"), function $CPControl__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPControl, "class"))
        return;
    objj_msgSend(self, "exposeBinding:", "value");
    objj_msgSend(self, "exposeBinding:", "objectValue");
    objj_msgSend(self, "exposeBinding:", "stringValue");
    objj_msgSend(self, "exposeBinding:", "integerValue");
    objj_msgSend(self, "exposeBinding:", "intValue");
    objj_msgSend(self, "exposeBinding:", "doubleValue");
    objj_msgSend(self, "exposeBinding:", "floatValue");
    objj_msgSend(self, "exposeBinding:", "enabled");
}
,["void"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPControl___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding)
        return objj_msgSend(_CPValueBinder, "class");
    else if (objj_msgSend(aBinding, "hasPrefix:", CPEnabledBinding))
        return objj_msgSend(CPMultipleValueAndBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPControl").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}var CPControlValueKey = "CPControlValueKey",
    CPControlControlStateKey = "CPControlControlStateKey",
    CPControlIsEnabledKey = "CPControlIsEnabledKey",
    CPControlTargetKey = "CPControlTargetKey",
    CPControlActionKey = "CPControlActionKey",
    CPControlSendActionOnKey = "CPControlSendActionOnKey",
    CPControlFormatterKey = "CPControlFormatterKey",
    CPControlSendsActionOnEndEditingKey = "CPControlSendsActionOnEndEditingKey",
    __Deprecated__CPImageViewImageKey = "CPImageViewImageKey";
{
var the_class = objj_getClass("CPControl")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPControl\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPControl__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPControl").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "setObjectValue:", objj_msgSend(aCoder, "decodeObjectForKey:", CPControlValueKey));
        objj_msgSend(self, "setTarget:", objj_msgSend(aCoder, "decodeObjectForKey:", CPControlTargetKey));
        objj_msgSend(self, "setAction:", objj_msgSend(aCoder, "decodeObjectForKey:", CPControlActionKey));
        objj_msgSend(self, "sendActionOn:", objj_msgSend(aCoder, "decodeIntForKey:", CPControlSendActionOnKey));
        objj_msgSend(self, "setSendsActionOnEndEditing:", objj_msgSend(aCoder, "decodeBoolForKey:", CPControlSendsActionOnEndEditingKey));
        objj_msgSend(self, "setFormatter:", objj_msgSend(aCoder, "decodeObjectForKey:", CPControlFormatterKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPControl__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPControl").super_class }, "encodeWithCoder:", aCoder);
    if (self._sendsActionOnEndEditing)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._sendsActionOnEndEditing, CPControlSendsActionOnEndEditingKey);
    var objectValue = objj_msgSend(self, "objectValue");
    if (objectValue !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", objectValue, CPControlValueKey);
    if (self._target !== nil)
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._target, CPControlTargetKey);
    if (self._action !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._action, CPControlActionKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._sendActionOn, CPControlSendActionOnKey);
    if (self._formatter !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._formatter, CPControlFormatterKey);
}
,["void","CPCoder"])]);
}var _CPControlSizeIdentifiers = [],
    _CPControlCachedColorWithPatternImages = {},
    _CPControlCachedThreePartImagePattern = {};
_CPControlSizeIdentifiers[CPRegularControlSize] = "Regular";
_CPControlSizeIdentifiers[CPSmallControlSize] = "Small";
_CPControlSizeIdentifiers[CPMiniControlSize] = "Mini";
_CPControlIdentifierForControlSize = function(aControlSize)
{
    return _CPControlSizeIdentifiers[aControlSize];
}
_CPControlColorWithPatternImage = function(sizes, aClassName)
{
    var index = 1,
        count = arguments.length,
        identifier = "";
    for (; index < count; ++index)
        identifier += arguments[index];
    var color = _CPControlCachedColorWithPatternImages[identifier];
    if (!color)
    {
        var bundle = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPControl, "class"));
        color = objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(bundle, "pathForResource:", aClassName + "/" + identifier + ".png"), sizes[identifier]));
        _CPControlCachedColorWithPatternImages[identifier] = color;
    }
    return color;
}
_CPControlThreePartImagePattern = function(isVertical, sizes, aClassName)
{
    var index = 2,
        count = arguments.length,
        identifier = "";
    for (; index < count; ++index)
        identifier += arguments[index];
    var color = _CPControlCachedThreePartImagePattern[identifier];
    if (!color)
    {
        var bundle = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPControl, "class")),
            path = aClassName + "/" + identifier;
        sizes = sizes[identifier];
        color = objj_msgSend(CPColor, "colorWithPatternImage:", objj_msgSend(objj_msgSend(CPThreePartImage, "alloc"), "initWithImageSlices:isVertical:", [objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(bundle, "pathForResource:", path + "0.png"), sizes[0]), objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(bundle, "pathForResource:", path + "1.png"), sizes[1]), objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(bundle, "pathForResource:", path + "2.png"), sizes[2])], isVertical));
        _CPControlCachedThreePartImagePattern[identifier] = color;
    }
    return color;
}
p;14;CPController.jt;2533;@STATIC;1.0;I;21;Foundation/CPObject.jt;2488;objj_executeFile("Foundation/CPObject.j", NO);var CPControllerDeclaredKeysKey = "CPControllerDeclaredKeysKey";
{var the_class = objj_allocateClassPair(CPObject, "CPController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_editors"), new objj_ivar("_declaredKeys")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPController__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPController").super_class }, "init");
    if (self)
    {
        self._editors = [];
        self._declaredKeys = [];
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPController__encodeWithCoder_(self, _cmd, aCoder)
{
    if (objj_msgSend(self._declaredKeys, "count") > 0)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._declaredKeys, CPControllerDeclaredKeysKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("initWithCoder:"), function $CPController__initWithCoder_(self, _cmd, aDecoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPController").super_class }, "init");
    if (self)
    {
        self._editors = [];
        self._declaredKeys = objj_msgSend(aDecoder, "decodeObjectForKey:", CPControllerDeclaredKeysKey) || [];
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("isEditing"), function $CPController__isEditing(self, _cmd)
{
    return objj_msgSend(self._editors, "count") > 0;
}
,["BOOL"]), new objj_method(sel_getUid("commitEditing"), function $CPController__commitEditing(self, _cmd)
{
    var index = 0,
        count = self._editors.length;
    for (; index < count; ++index)
        if (!objj_msgSend(objj_msgSend(self._editors, "objectAtIndex:", index), "commitEditing"))
            return NO;
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("discardEditing"), function $CPController__discardEditing(self, _cmd)
{
    objj_msgSend(self._editors, "makeObjectsPerformSelector:", sel_getUid("discardEditing"));
}
,["void"]), new objj_method(sel_getUid("objectDidBeginEditing:"), function $CPController__objectDidBeginEditing_(self, _cmd, anEditor)
{
    objj_msgSend(self._editors, "addObject:", anEditor);
}
,["void","id"]), new objj_method(sel_getUid("objectDidEndEditing:"), function $CPController__objectDidEndEditing_(self, _cmd, anEditor)
{
    objj_msgSend(self._editors, "removeObject:", anEditor);
}
,["void","id"])]);
}p;10;CPCookie.jt;2067;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;1996;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPCookie"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_cookieName"), new objj_ivar("_cookieValue"), new objj_ivar("_expires")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithName:"), function $CPCookie__initWithName_(self, _cmd, aName)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCookie").super_class }, "init");
    self._cookieName = aName;
    self._cookieValue = objj_msgSend(self, "_readCookieValue");
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("value"), function $CPCookie__value(self, _cmd)
{
    return self._cookieValue;
}
,["CPString"]), new objj_method(sel_getUid("name"), function $CPCookie__name(self, _cmd)
{
    return self._cookieName;
}
,["CPString"]), new objj_method(sel_getUid("expires"), function $CPCookie__expires(self, _cmd)
{
    return self._expires;
}
,["CPString"]), new objj_method(sel_getUid("setValue:expires:domain:"), function $CPCookie__setValue_expires_domain_(self, _cmd, value, date, domain)
{
    if (date)
        var expires = "; expires=" + date.toGMTString();
    else
        var expires = "";
    if (domain)
        domain = "; domain=" + domain;
    else
        domain = "";
    document.cookie = self._cookieName + "=" + value + expires + "; path=/" + domain;
}
,["void","CPString","CPDate","CPString"]), new objj_method(sel_getUid("_readCookieValue"), function $CPCookie___readCookieValue(self, _cmd)
{
    var nameEQ = self._cookieName + "=",
        ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++)
    {
        var c = ca[i];
        while (c.charAt(0) == ' ')
            c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0)
            return c.substring(nameEQ.length, c.length);
    }
    return "";
}
,["CPString"])]);
}p;10;CPCursor.jt;13051;@STATIC;1.0;I;21;Foundation/CPObject.jt;13005;objj_executeFile("Foundation/CPObject.j", NO);var currentCursor = nil,
    cursorStack = [],
    cursors = {},
    ieCursorMap = {};
{var the_class = objj_allocateClassPair(CPObject, "CPCursor"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_cssString"), new objj_ivar("_hotSpot"), new objj_ivar("_image"), new objj_ivar("_isSetOnMouseEntered"), new objj_ivar("_isSetOnMouseExited")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_cssString"), function $CPCursor___cssString(self, _cmd)
{
    return self._cssString;
}
,["CPString"]), new objj_method(sel_getUid("hotSpot"), function $CPCursor__hotSpot(self, _cmd)
{
    return self._hotSpot;
}
,["CPString"]), new objj_method(sel_getUid("image"), function $CPCursor__image(self, _cmd)
{
    return self._image;
}
,["CPImage"]), new objj_method(sel_getUid("isSetOnMouseEntered"), function $CPCursor__isSetOnMouseEntered(self, _cmd)
{
    return self._isSetOnMouseEntered;
}
,["BOOL"]), new objj_method(sel_getUid("setOnMouseEntered:"), function $CPCursor__setOnMouseEntered_(self, _cmd, newValue)
{
    self._isSetOnMouseEntered = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("isSetOnMouseExited"), function $CPCursor__isSetOnMouseExited(self, _cmd)
{
    return self._isSetOnMouseExited;
}
,["BOOL"]), new objj_method(sel_getUid("setOnMouseExited:"), function $CPCursor__setOnMouseExited_(self, _cmd, newValue)
{
    self._isSetOnMouseExited = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithCSSString:"), function $CPCursor__initWithCSSString_(self, _cmd, aString)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCursor").super_class }, "init"))
        self._cssString = aString;
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithImage:hotSpot:"), function $CPCursor__initWithImage_hotSpot_(self, _cmd, image, hotSpot)
{
    self._hotSpot = hotSpot;
    self._image = image;
    return objj_msgSend(self, "initWithCSSString:", "url(" + objj_msgSend(self._image, "filename") + ")" + hotSpot.x + " " + hotSpot.y + ", auto");
}
,["id","CPImage","CGPoint"]), new objj_method(sel_getUid("initWithImage:foregroundColorHint:backgroundColorHint:hotSpot:"), function $CPCursor__initWithImage_foregroundColorHint_backgroundColorHint_hotSpot_(self, _cmd, image, foregroundColor, backgroundColor, aHotSpot)
{
    return objj_msgSend(self, "initWithImage:hotSpot:", image, aHotSpot);
}
,["id","CPImage","CPColor","CPColor","CGPoint"]), new objj_method(sel_getUid("pop"), function $CPCursor__pop(self, _cmd)
{
    objj_msgSend(CPCursor, "pop");
}
,["void"]), new objj_method(sel_getUid("push"), function $CPCursor__push(self, _cmd)
{
    currentCursor = cursorStack.push(self);
}
,["void"]), new objj_method(sel_getUid("set"), function $CPCursor__set(self, _cmd)
{
    currentCursor = self;
    objj_msgSend(objj_msgSend(self, "class"), "_setCursorCSS:", self._cssString);
}
,["void"]), new objj_method(sel_getUid("mouseEntered:"), function $CPCursor__mouseEntered_(self, _cmd, event)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPCursor__mouseExited_(self, _cmd, event)
{
}
,["void","CPEvent"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPCursor__initialize(self, _cmd)
{
    if (self !== CPCursor)
        return;
    ieCursorMap = {"ew-resize": "e-resize", "ns-resize": "n-resize", "nesw-resize": "ne-resize", "nwse-resize": "nw-resize"};
}
,["void"]), new objj_method(sel_getUid("hide"), function $CPCursor__hide(self, _cmd)
{
    objj_msgSend(self, "_setCursorCSS:", "none");
}
,["void"]), new objj_method(sel_getUid("unhide"), function $CPCursor__unhide(self, _cmd)
{
    objj_msgSend(self, "_setCursorCSS:", objj_msgSend(currentCursor, "_cssString"));
}
,["void"]), new objj_method(sel_getUid("setHiddenUntilMouseMoves:"), function $CPCursor__setHiddenUntilMouseMoves_(self, _cmd, flag)
{
    if (flag)
        objj_msgSend(CPCursor, "hide");
    else
        objj_msgSend(CPCursor, "unhide");
}
,["void","BOOL"]), new objj_method(sel_getUid("pop"), function $CPCursor__pop(self, _cmd)
{
    if (cursorStack.length > 1)
    {
        cursorStack.pop();
        currentCursor = cursorStack[cursorStack.length - 1];
    }
}
,["void"]), new objj_method(sel_getUid("currentCursor"), function $CPCursor__currentCursor(self, _cmd)
{
    return currentCursor;
}
,["CPCursor"]), new objj_method(sel_getUid("_setCursorCSS:"), function $CPCursor___setCursorCSS_(self, _cmd, aString)
{
    var platformWindows = objj_msgSend(objj_msgSend(CPPlatformWindow, "visiblePlatformWindows"), "allObjects");
    for (var i = 0, count = objj_msgSend(platformWindows, "count"); i < count; i++)
        platformWindows[i]._DOMBodyElement.style.cursor = aString;
}
,["void","CPString"]), new objj_method(sel_getUid("_systemCursorWithName:cssString:hasImage:"), function $CPCursor___systemCursorWithName_cssString_hasImage_(self, _cmd, cursorName, aString, doesHaveImage)
{
    var cursor = cursors[cursorName];
    if (typeof cursor === "undefined")
    {
        var cssString;
        if (doesHaveImage)
        {
            var themeResourcePath = objj_msgSend(objj_msgSend(objj_msgSend(CPApp, "themeBlend"), "bundle"), "resourcePath"),
                extension = CPBrowserIsEngine(CPInternetExplorerBrowserEngine) ? "cur" : "png";
            cssString = objj_msgSend(CPString, "stringWithFormat:", "url(%@cursors/%@.%@), %@", themeResourcePath, cursorName, extension, aString);
        }
        else
        {
            var ieLessThan9 = CPBrowserIsEngine(CPInternetExplorerBrowserEngine) && !CPFeatureIsCompatible(CPHTMLCanvasFeature);
            if (ieLessThan9)
                cssString = ieCursorMap[aString] || aString;
            else
                cssString = aString;
        }
        cursor = objj_msgSend(objj_msgSend(CPCursor, "alloc"), "initWithCSSString:", cssString);
        cursors[cursorName] = cursor;
    }
    return cursor;
}
,["CPCursor","CPString","CPString","BOOL"]), new objj_method(sel_getUid("arrowCursor"), function $CPCursor__arrowCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "default", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("crosshairCursor"), function $CPCursor__crosshairCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "crosshair", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("IBeamCursor"), function $CPCursor__IBeamCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "text", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("pointingHandCursor"), function $CPCursor__pointingHandCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "pointer", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeNorthwestCursor"), function $CPCursor__resizeNorthwestCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "nw-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeNorthwestSoutheastCursor"), function $CPCursor__resizeNorthwestSoutheastCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "nwse-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeNortheastCursor"), function $CPCursor__resizeNortheastCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "ne-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeNortheastSouthwestCursor"), function $CPCursor__resizeNortheastSouthwestCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "nesw-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeSouthwestCursor"), function $CPCursor__resizeSouthwestCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "sw-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeSoutheastCursor"), function $CPCursor__resizeSoutheastCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "se-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeDownCursor"), function $CPCursor__resizeDownCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "s-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeUpCursor"), function $CPCursor__resizeUpCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "n-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeLeftCursor"), function $CPCursor__resizeLeftCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "w-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeRightCursor"), function $CPCursor__resizeRightCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "e-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeLeftRightCursor"), function $CPCursor__resizeLeftRightCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "col-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeEastWestCursor"), function $CPCursor__resizeEastWestCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "ew-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeUpDownCursor"), function $CPCursor__resizeUpDownCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "row-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("resizeNorthSouthCursor"), function $CPCursor__resizeNorthSouthCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "ns-resize", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("operationNotAllowedCursor"), function $CPCursor__operationNotAllowedCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "not-allowed", NO);
}
,["CPCursor"]), new objj_method(sel_getUid("dragCopyCursor"), function $CPCursor__dragCopyCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "copy", YES);
}
,["CPCursor"]), new objj_method(sel_getUid("dragLinkCursor"), function $CPCursor__dragLinkCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "alias", YES);
}
,["CPCursor"]), new objj_method(sel_getUid("contextualMenuCursor"), function $CPCursor__contextualMenuCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "context-menu", YES);
}
,["CPCursor"]), new objj_method(sel_getUid("openHandCursor"), function $CPCursor__openHandCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "move", YES);
}
,["CPCursor"]), new objj_method(sel_getUid("closedHandCursor"), function $CPCursor__closedHandCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "-moz-grabbing", YES);
}
,["CPCursor"]), new objj_method(sel_getUid("disappearingItemCursor"), function $CPCursor__disappearingItemCursor(self, _cmd)
{
    return objj_msgSend(CPCursor, "_systemCursorWithName:cssString:hasImage:", CPStringFromSelector(_cmd), "auto", YES);
}
,["CPCursor"])]);
}{
var the_class = objj_getClass("CPCursor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCursor\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCursor__initWithCoder_(self, _cmd, coder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCursor").super_class }, "init"))
        self._cssString = objj_msgSend(coder, "decodeObjectForKey:", "CPCursorNameKey");
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCursor__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSend(coder, "encodeObject:forKey:", self._cssString, "CPCursorNameKey");
}
,["void","CPCoder"])]);
}p;24;CPDictionaryController.jt;7699;@STATIC;1.0;i;19;CPArrayController.jt;7656;objj_executeFile("CPArrayController.j", YES);{var the_class = objj_allocateClassPair(CPArrayController, "CPDictionaryController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentDictionary"), new objj_ivar("_includedKeys"), new objj_ivar("_excludedKeys"), new objj_ivar("_initialKey"), new objj_ivar("_initialValue")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("includedKeys"), function $CPDictionaryController__includedKeys(self, _cmd)
{
    return self._includedKeys;
}
,["CPArray"]), new objj_method(sel_getUid("setIncludedKeys:"), function $CPDictionaryController__setIncludedKeys_(self, _cmd, newValue)
{
    self._includedKeys = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("excludedKeys"), function $CPDictionaryController__excludedKeys(self, _cmd)
{
    return self._excludedKeys;
}
,["CPArray"]), new objj_method(sel_getUid("setExcludedKeys:"), function $CPDictionaryController__setExcludedKeys_(self, _cmd, newValue)
{
    self._excludedKeys = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("initialKey"), function $CPDictionaryController__initialKey(self, _cmd)
{
    return self._initialKey;
}
,["CPString"]), new objj_method(sel_getUid("setInitialKey:"), function $CPDictionaryController__setInitialKey_(self, _cmd, newValue)
{
    self._initialKey = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("initialValue"), function $CPDictionaryController__initialValue(self, _cmd)
{
    return self._initialValue;
}
,["id"]), new objj_method(sel_getUid("setInitialValue:"), function $CPDictionaryController__setInitialValue_(self, _cmd, newValue)
{
    self._initialValue = newValue;
}
,["void","id"]), new objj_method(sel_getUid("init"), function $CPDictionaryController__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDictionaryController").super_class }, "init");
    if (self)
    {
        self._initialKey = "key";
        self._initialValue = "value";
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("newObject"), function $CPDictionaryController__newObject(self, _cmd)
{
    var keys = objj_msgSend(self._contentDictionary, "allKeys"),
        newKey = self._initialKey,
        count = 0;
    if (objj_msgSend(keys, "containsObject:", newKey))
        while (objj_msgSend(keys, "containsObject:", newKey))
            newKey = objj_msgSend(CPString, "stringWithFormat:", "%@%i", self._initialKey, ++count);
    return objj_msgSend(self, "_newObjectWithKey:value:", newKey, self._initialValue);
}
,["id"]), new objj_method(sel_getUid("_newObjectWithKey:value:"), function $CPDictionaryController___newObjectWithKey_value_(self, _cmd, aKey, aValue)
{
    var aNewObject = objj_msgSend(_CPDictionaryControllerKeyValuePair, "new");
    aNewObject._dictionary = self._contentDictionary;
    aNewObject._controller = self;
    aNewObject._key = aKey;
    if (aValue !== nil)
        objj_msgSend(aNewObject, "setValue:", aValue);
    return aNewObject;
}
,["id","CPString","id"]), new objj_method(sel_getUid("contentDictionary"), function $CPDictionaryController__contentDictionary(self, _cmd)
{
    return self._contentDictionary;
}
,["CPDictionary"]), new objj_method(sel_getUid("setContentDictionary:"), function $CPDictionaryController__setContentDictionary_(self, _cmd, aDictionary)
{
    if (aDictionary == self._contentDictionary)
        return;
    if (objj_msgSend(aDictionary, "isKindOfClass:", objj_msgSend(CPDictionary, "class")))
        self._contentDictionary = aDictionary;
    else
        self._contentDictionary = nil;
    var array = objj_msgSend(CPArray, "array"),
        allKeys = objj_msgSend(self._contentDictionary, "allKeys");
    objj_msgSend(allKeys, "addObjectsFromArray:", self._includedKeys);
    var iter = objj_msgSend(objj_msgSend(CPSet, "setWithArray:", allKeys), "objectEnumerator"),
        obj;
    while ((obj = objj_msgSend(iter, "nextObject")) !== nil)
        if (!objj_msgSend(self._excludedKeys, "containsObject:", obj))
            objj_msgSend(array, "addObject:", objj_msgSend(self, "_newObjectWithKey:value:", obj, nil));
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDictionaryController").super_class }, "setContent:", array);
}
,["void","CPDictionary"])]);
}var CPIncludedKeys = "CPIncludedKeys",
    CPExcludedKeys = "CPExcludedKeys";
{
var the_class = objj_getClass("CPDictionaryController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDictionaryController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPDictionaryController__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDictionaryController").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._includedKeys = objj_msgSend(aCoder, "decodeObjectForKey:", CPIncludedKeys);
        self._excludedKeys = objj_msgSend(aCoder, "decodeObjectForKey:", CPExcludedKeys);
        self._initialKey = "key";
        self._initialValue = "value";
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPDictionaryController__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDictionaryController").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._includedKeys, CPIncludedKeys);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._excludedKeys, CPExcludedKeys);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPDictionaryControllerKeyValuePair"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_key"), new objj_ivar("_dictionary"), new objj_ivar("_controller")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("key"), function $_CPDictionaryControllerKeyValuePair__key(self, _cmd)
{
    return self._key;
}
,["CPString"]), new objj_method(sel_getUid("setKey:"), function $_CPDictionaryControllerKeyValuePair__setKey_(self, _cmd, newValue)
{
    self._key = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("dictionary"), function $_CPDictionaryControllerKeyValuePair__dictionary(self, _cmd)
{
    return self._dictionary;
}
,["CPDictionary"]), new objj_method(sel_getUid("setDictionary:"), function $_CPDictionaryControllerKeyValuePair__setDictionary_(self, _cmd, newValue)
{
    self._dictionary = newValue;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("controller"), function $_CPDictionaryControllerKeyValuePair__controller(self, _cmd)
{
    return self._controller;
}
,["CPDictionaryController"]), new objj_method(sel_getUid("setController:"), function $_CPDictionaryControllerKeyValuePair__setController_(self, _cmd, newValue)
{
    self._controller = newValue;
}
,["void","CPDictionaryController"]), new objj_method(sel_getUid("value"), function $_CPDictionaryControllerKeyValuePair__value(self, _cmd)
{
    return objj_msgSend(self._dictionary, "objectForKey:", self._key);
}
,["id"]), new objj_method(sel_getUid("setValue:"), function $_CPDictionaryControllerKeyValuePair__setValue_(self, _cmd, aValue)
{
    objj_msgSend(self._dictionary, "setObject:forKey:", aValue, self._key);
}
,["void","id"]), new objj_method(sel_getUid("isExplicitlyIncluded"), function $_CPDictionaryControllerKeyValuePair__isExplicitlyIncluded(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._controller, "_includedKeys"), "containsObject:", self._key);
}
,["BOOL"])]);
}p;12;CPDocument.jt;27217;@STATIC;1.0;I;21;Foundation/CPString.jI;20;Foundation/CPArray.ji;9;CPAlert.ji;13;CPResponder.ji;13;CPSavePanel.ji;18;CPViewController.ji;20;CPWindowController.jt;27049;objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("CPAlert.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPSavePanel.j", YES);objj_executeFile("CPViewController.j", YES);objj_executeFile("CPWindowController.j", YES);CPSaveOperation = 0;
CPSaveAsOperation = 1;
CPSaveToOperation = 2;
CPAutosaveOperation = 3;
CPChangeDone = 0;
CPChangeUndone = 1;
CPChangeCleared = 2;
CPChangeReadOtherContents = 3;
CPChangeAutosaved = 4;
CPDocumentWillSaveNotification = "CPDocumentWillSaveNotification";
CPDocumentDidSaveNotification = "CPDocumentDidSaveNotification";
CPDocumentDidFailToSaveNotification = "CPDocumentDidFailToSaveNotification";
var CPDocumentUntitledCount = 0;
{var the_class = objj_allocateClassPair(CPResponder, "CPDocument"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_window"), new objj_ivar("_view"), new objj_ivar("_viewControllersForWindowControllers"), new objj_ivar("_fileURL"), new objj_ivar("_fileType"), new objj_ivar("_windowControllers"), new objj_ivar("_untitledDocumentIndex"), new objj_ivar("_hasUndoManager"), new objj_ivar("_undoManager"), new objj_ivar("_changeCount"), new objj_ivar("_readConnection"), new objj_ivar("_writeRequest"), new objj_ivar("_canCloseAlert")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPDocument__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDocument").super_class }, "init");
    if (self)
    {
        self._windowControllers = [];
        self._viewControllersForWindowControllers = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._hasUndoManager = YES;
        self._changeCount = 0;
        objj_msgSend(self, "setNextResponder:", CPApp);
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("initWithType:error:"), function $CPDocument__initWithType_error_(self, _cmd, aType, anError)
{
    self = objj_msgSend(self, "init");
    if (self)
        objj_msgSend(self, "setFileType:", aType);
    return self;
}
,["id","CPString","CPError"]), new objj_method(sel_getUid("initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"), function $CPDocument__initWithContentsOfURL_ofType_delegate_didReadSelector_contextInfo_(self, _cmd, anAbsoluteURL, aType, aDelegate, aDidReadSelector, aContextInfo)
{
    self = objj_msgSend(self, "init");
    if (self)
    {
        objj_msgSend(self, "setFileURL:", anAbsoluteURL);
        objj_msgSend(self, "setFileType:", aType);
        objj_msgSend(self, "readFromURL:ofType:delegate:didReadSelector:contextInfo:", anAbsoluteURL, aType, aDelegate, aDidReadSelector, aContextInfo);
    }
    return self;
}
,["id","CPURL","CPString","id","SEL","id"]), new objj_method(sel_getUid("initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"), function $CPDocument__initForURL_withContentsOfURL_ofType_delegate_didReadSelector_contextInfo_(self, _cmd, anAbsoluteURL, absoluteContentsURL, aType, aDelegate, aDidReadSelector, aContextInfo)
{
    self = objj_msgSend(self, "init");
    if (self)
    {
        objj_msgSend(self, "setFileURL:", anAbsoluteURL);
        objj_msgSend(self, "setFileType:", aType);
        objj_msgSend(self, "readFromURL:ofType:delegate:didReadSelector:contextInfo:", absoluteContentsURL, aType, aDelegate, aDidReadSelector, aContextInfo);
    }
    return self;
}
,["id","CPURL","CPURL","CPString","id","SEL","id"]), new objj_method(sel_getUid("dataOfType:error:"), function $CPDocument__dataOfType_error_(self, _cmd, aType, anError)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "dataOfType:error: must be overridden by the document subclass.");
}
,["CPData","CPString","CPError"]), new objj_method(sel_getUid("readFromData:ofType:error:"), function $CPDocument__readFromData_ofType_error_(self, _cmd, aData, aType, anError)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "readFromData:ofType: must be overridden by the document subclass.");
}
,["void","CPData","CPString","CPError"]), new objj_method(sel_getUid("viewControllerWillLoadCib:"), function $CPDocument__viewControllerWillLoadCib_(self, _cmd, aViewController)
{
}
,["void","CPViewController"]), new objj_method(sel_getUid("viewControllerDidLoadCib:"), function $CPDocument__viewControllerDidLoadCib_(self, _cmd, aViewController)
{
}
,["void","CPViewController"]), new objj_method(sel_getUid("makeWindowControllers"), function $CPDocument__makeWindowControllers(self, _cmd)
{
    objj_msgSend(self, "makeViewAndWindowControllers");
}
,["void"]), new objj_method(sel_getUid("makeViewAndWindowControllers"), function $CPDocument__makeViewAndWindowControllers(self, _cmd)
{
    var viewCibName = objj_msgSend(self, "viewCibName"),
        windowCibName = objj_msgSend(self, "windowCibName"),
        viewController = nil,
        windowController = nil;
    if (objj_msgSend(viewCibName, "length"))
        viewController = objj_msgSend(objj_msgSend(CPViewController, "alloc"), "initWithCibName:bundle:owner:", viewCibName, nil, self);
    if (objj_msgSend(windowCibName, "length"))
        windowController = objj_msgSend(objj_msgSend(CPWindowController, "alloc"), "initWithWindowCibName:owner:", windowCibName, self);
    else if (viewController)
    {
        var view = objj_msgSend(viewController, "view"),
            viewFrame = objj_msgSend(view, "frame");
        viewFrame.origin = CGPointMake(50, 50);
        var theWindow = objj_msgSend(objj_msgSend(CPWindow, "alloc"), "initWithContentRect:styleMask:", viewFrame, CPTitledWindowMask | CPClosableWindowMask | CPMiniaturizableWindowMask | CPResizableWindowMask);
        windowController = objj_msgSend(objj_msgSend(CPWindowController, "alloc"), "initWithWindow:", theWindow);
    }
    if (windowController && viewController)
        objj_msgSend(windowController, "setSupportsMultipleDocuments:", YES);
    if (windowController)
        objj_msgSend(self, "addWindowController:", windowController);
    if (viewController)
        objj_msgSend(self, "addViewController:forWindowController:", viewController, windowController);
}
,["void"]), new objj_method(sel_getUid("windowControllers"), function $CPDocument__windowControllers(self, _cmd)
{
    return self._windowControllers;
}
,["CPArray"]), new objj_method(sel_getUid("addWindowController:"), function $CPDocument__addWindowController_(self, _cmd, aWindowController)
{
    objj_msgSend(self._windowControllers, "addObject:", aWindowController);
    if (objj_msgSend(aWindowController, "document") !== self)
        objj_msgSend(aWindowController, "setDocument:", self);
}
,["void","CPWindowController"]), new objj_method(sel_getUid("removeWindowController:"), function $CPDocument__removeWindowController_(self, _cmd, aWindowController)
{
    if (aWindowController)
        objj_msgSend(self._windowControllers, "removeObject:", aWindowController);
    if (objj_msgSend(aWindowController, "document") === self)
        objj_msgSend(aWindowController, "setDocument:", nil);
}
,["void","CPWindowController"]), new objj_method(sel_getUid("view"), function $CPDocument__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("viewControllers"), function $CPDocument__viewControllers(self, _cmd)
{
    return objj_msgSend(self._viewControllersForWindowControllers, "allValues");
}
,["CPArray"]), new objj_method(sel_getUid("addViewController:forWindowController:"), function $CPDocument__addViewController_forWindowController_(self, _cmd, aViewController, aWindowController)
{
    objj_msgSend(self._viewControllersForWindowControllers, "setObject:forKey:", aViewController, objj_msgSend(aWindowController, "UID"));
    if (objj_msgSend(aWindowController, "document") === self)
        objj_msgSend(aWindowController, "setViewController:", aViewController);
}
,["void","CPViewController","CPWindowController"]), new objj_method(sel_getUid("removeViewController:"), function $CPDocument__removeViewController_(self, _cmd, aViewController)
{
    objj_msgSend(self._viewControllersForWindowControllers, "removeObject:", aViewController);
}
,["void","CPViewController"]), new objj_method(sel_getUid("viewControllerForWindowController:"), function $CPDocument__viewControllerForWindowController_(self, _cmd, aWindowController)
{
    return objj_msgSend(self._viewControllersForWindowControllers, "objectForKey:", objj_msgSend(aWindowController, "UID"));
}
,["CPViewController","CPWindowController"]), new objj_method(sel_getUid("showWindows"), function $CPDocument__showWindows(self, _cmd)
{
    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("setDocument:"), self);
    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("showWindow:"), self);
}
,["void"]), new objj_method(sel_getUid("displayName"), function $CPDocument__displayName(self, _cmd)
{
    if (self._fileURL)
        return objj_msgSend(self._fileURL, "lastPathComponent");
    if (!self._untitledDocumentIndex)
        self._untitledDocumentIndex = ++CPDocumentUntitledCount;
    if (self._untitledDocumentIndex == 1)
        return "Untitled";
    return "Untitled " + self._untitledDocumentIndex;
}
,["CPString"]), new objj_method(sel_getUid("viewCibName"), function $CPDocument__viewCibName(self, _cmd)
{
    return nil;
}
,["CPString"]), new objj_method(sel_getUid("windowCibName"), function $CPDocument__windowCibName(self, _cmd)
{
    return nil;
}
,["CPString"]), new objj_method(sel_getUid("windowControllerDidLoadCib:"), function $CPDocument__windowControllerDidLoadCib_(self, _cmd, aWindowController)
{
}
,["void","CPWindowController"]), new objj_method(sel_getUid("windowControllerWillLoadCib:"), function $CPDocument__windowControllerWillLoadCib_(self, _cmd, aWindowController)
{
}
,["void","CPWindowController"]), new objj_method(sel_getUid("readFromURL:ofType:delegate:didReadSelector:contextInfo:"), function $CPDocument__readFromURL_ofType_delegate_didReadSelector_contextInfo_(self, _cmd, anAbsoluteURL, aType, aDelegate, aDidReadSelector, aContextInfo)
{
    objj_msgSend(self._readConnection, "cancel");
    self._readConnection = objj_msgSend(CPURLConnection, "connectionWithRequest:delegate:", objj_msgSend(CPURLRequest, "requestWithURL:", anAbsoluteURL), self);
    self._readConnection.session = _CPReadSessionMake(aType, aDelegate, aDidReadSelector, aContextInfo);
}
,["void","CPURL","CPString","id","SEL","id"]), new objj_method(sel_getUid("fileURL"), function $CPDocument__fileURL(self, _cmd)
{
    return self._fileURL;
}
,["CPURL"]), new objj_method(sel_getUid("setFileURL:"), function $CPDocument__setFileURL_(self, _cmd, aFileURL)
{
    if (self._fileURL === aFileURL)
        return;
    self._fileURL = aFileURL;
    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:", sel_getUid("synchronizeWindowTitleWithDocumentName"));
}
,["void","CPURL"]), new objj_method(sel_getUid("saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:"), function $CPDocument__saveToURL_ofType_forSaveOperation_delegate_didSaveSelector_contextInfo_(self, _cmd, anAbsoluteURL, aTypeName, aSaveOperation, aDelegate, aDidSaveSelector, aContextInfo)
{
    var data = objj_msgSend(self, "dataOfType:error:", objj_msgSend(self, "fileType"), nil),
        oldChangeCount = self._changeCount;
    self._writeRequest = objj_msgSend(CPURLRequest, "requestWithURL:", anAbsoluteURL);
    if (objj_msgSend(CPPlatform, "isBrowser"))
        objj_msgSend(self._writeRequest, "setHTTPMethod:", "POST");
    else
        objj_msgSend(self._writeRequest, "setHTTPMethod:", "PUT");
    objj_msgSend(self._writeRequest, "setHTTPBody:", objj_msgSend(data, "rawString"));
    objj_msgSend(self._writeRequest, "setValue:forHTTPHeaderField:", "close", "Connection");
    if (aSaveOperation === CPSaveOperation)
        objj_msgSend(self._writeRequest, "setValue:forHTTPHeaderField:", "true", "x-cappuccino-overwrite");
    if (aSaveOperation !== CPSaveToOperation)
        objj_msgSend(self, "updateChangeCount:", CPChangeCleared);
    var connection = objj_msgSend(CPURLConnection, "connectionWithRequest:delegate:", self._writeRequest, self);
    connection.session = _CPSaveSessionMake(anAbsoluteURL, aSaveOperation, oldChangeCount, aDelegate, aDidSaveSelector, aContextInfo, connection);
}
,["void","CPURL","CPString","CPSaveOperationType","id","SEL","id"]), new objj_method(sel_getUid("connection:didReceiveResponse:"), function $CPDocument__connection_didReceiveResponse_(self, _cmd, aConnection, aResponse)
{
    if (!objj_msgSend(aResponse, "isKindOfClass:", objj_msgSend(CPHTTPURLResponse, "class")))
        return;
    var statusCode = objj_msgSend(aResponse, "statusCode");
    if (statusCode === 200)
        return;
    var session = aConnection.session;
    if (aConnection == self._readConnection)
    {
        objj_msgSend(aConnection, "cancel");
        alert("There was an error retrieving the document.");
        objj_msgSend(session.delegate, session.didReadSelector, self, NO, session.contextInfo);
    }
    else
    {
        if (statusCode == 409)
        {
            objj_msgSend(aConnection, "cancel");
            if (confirm("There already exists a file with that name, would you like to overwrite it?"))
            {
                objj_msgSend(self._writeRequest, "setValue:forHTTPHeaderField:", "true", "x-cappuccino-overwrite");
                objj_msgSend(aConnection, "start");
            }
            else
            {
                if (session.saveOperation != CPSaveToOperation)
                {
                    self._changeCount += session.changeCount;
                    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("setDocumentEdited:"), objj_msgSend(self, "isDocumentEdited"));
                }
                self._writeRequest = nil;
                objj_msgSend(session.delegate, session.didSaveSelector, self, NO, session.contextInfo);
                objj_msgSend(self, "_sendDocumentSavedNotification:", NO);
            }
        }
    }
}
,["void","CPURLConnection","CPURLResponse"]), new objj_method(sel_getUid("connection:didReceiveData:"), function $CPDocument__connection_didReceiveData_(self, _cmd, aConnection, aData)
{
    var session = aConnection.session;
    if (aConnection == self._readConnection)
    {
        objj_msgSend(self, "readFromData:ofType:error:", objj_msgSend(CPData, "dataWithRawString:", aData), session.fileType, nil);
        objj_msgSend(session.delegate, session.didReadSelector, self, YES, session.contextInfo);
    }
    else
    {
        if (session.saveOperation != CPSaveToOperation)
            objj_msgSend(self, "setFileURL:", session.absoluteURL);
        self._writeRequest = nil;
        objj_msgSend(session.delegate, session.didSaveSelector, self, YES, session.contextInfo);
        objj_msgSend(self, "_sendDocumentSavedNotification:", YES);
    }
}
,["void","CPURLConnection","CPString"]), new objj_method(sel_getUid("connection:didFailWithError:"), function $CPDocument__connection_didFailWithError_(self, _cmd, aConnection, anError)
{
    var session = aConnection.session;
    if (self._readConnection == aConnection)
        objj_msgSend(session.delegate, session.didReadSelector, self, NO, session.contextInfo);
    else
    {
        if (session.saveOperation != CPSaveToOperation)
        {
            self._changeCount += session.changeCount;
            objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("setDocumentEdited:"), objj_msgSend(self, "isDocumentEdited"));
        }
        self._writeRequest = nil;
        alert("There was an error saving the document.");
        objj_msgSend(session.delegate, session.didSaveSelector, self, NO, session.contextInfo);
        objj_msgSend(self, "_sendDocumentSavedNotification:", NO);
    }
}
,["void","CPURLConnection","CPError"]), new objj_method(sel_getUid("connectionDidFinishLoading:"), function $CPDocument__connectionDidFinishLoading_(self, _cmd, aConnection)
{
    if (self._readConnection == aConnection)
        self._readConnection = nil;
}
,["void","CPURLConnection"]), new objj_method(sel_getUid("isDocumentEdited"), function $CPDocument__isDocumentEdited(self, _cmd)
{
    return self._changeCount != 0;
}
,["BOOL"]), new objj_method(sel_getUid("updateChangeCount:"), function $CPDocument__updateChangeCount_(self, _cmd, aChangeType)
{
    if (aChangeType == CPChangeDone)
        ++self._changeCount;
    else if (aChangeType == CPChangeUndone)
        --self._changeCount;
    else if (aChangeType == CPChangeCleared)
        self._changeCount = 0;
    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("setDocumentEdited:"), objj_msgSend(self, "isDocumentEdited"));
}
,["void","CPDocumentChangeType"]), new objj_method(sel_getUid("setFileType:"), function $CPDocument__setFileType_(self, _cmd, aType)
{
    self._fileType = aType;
}
,["void","CPString"]), new objj_method(sel_getUid("fileType"), function $CPDocument__fileType(self, _cmd)
{
    return self._fileType;
}
,["CPString"]), new objj_method(sel_getUid("hasUndoManager"), function $CPDocument__hasUndoManager(self, _cmd)
{
    return self._hasUndoManager;
}
,["BOOL"]), new objj_method(sel_getUid("setHasUndoManager:"), function $CPDocument__setHasUndoManager_(self, _cmd, aFlag)
{
    if (self._hasUndoManager == aFlag)
        return;
    self._hasUndoManager = aFlag;
    if (!self._hasUndoManager)
        objj_msgSend(self, "setUndoManager:", nil);
}
,["void","BOOL"]), new objj_method(sel_getUid("_undoManagerWillCloseGroup:"), function $CPDocument___undoManagerWillCloseGroup_(self, _cmd, aNotification)
{
    var undoManager = objj_msgSend(aNotification, "object");
    if (objj_msgSend(undoManager, "isUndoing") || objj_msgSend(undoManager, "isRedoing"))
        return;
    objj_msgSend(self, "updateChangeCount:", CPChangeDone);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_undoManagerDidUndoChange:"), function $CPDocument___undoManagerDidUndoChange_(self, _cmd, aNotification)
{
    objj_msgSend(self, "updateChangeCount:", CPChangeUndone);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_undoManagerDidRedoChange:"), function $CPDocument___undoManagerDidRedoChange_(self, _cmd, aNotification)
{
    objj_msgSend(self, "updateChangeCount:", CPChangeDone);
}
,["void","CPNotification"]), new objj_method(sel_getUid("setUndoManager:"), function $CPDocument__setUndoManager_(self, _cmd, anUndoManager)
{
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._undoManager)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPUndoManagerDidUndoChangeNotification, self._undoManager);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPUndoManagerDidRedoChangeNotification, self._undoManager);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPUndoManagerWillCloseUndoGroupNotification, self._undoManager);
    }
    self._undoManager = anUndoManager;
    if (self._undoManager)
    {
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_undoManagerDidUndoChange:"), CPUndoManagerDidUndoChangeNotification, self._undoManager);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_undoManagerDidRedoChange:"), CPUndoManagerDidRedoChangeNotification, self._undoManager);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_undoManagerWillCloseGroup:"), CPUndoManagerWillCloseUndoGroupNotification, self._undoManager);
    }
}
,["void","CPUndoManager"]), new objj_method(sel_getUid("undoManager"), function $CPDocument__undoManager(self, _cmd)
{
    if (self._hasUndoManager && !self._undoManager)
        objj_msgSend(self, "setUndoManager:", objj_msgSend(objj_msgSend(CPUndoManager, "alloc"), "init"));
    return self._undoManager;
}
,["CPUndoManager"]), new objj_method(sel_getUid("windowWillReturnUndoManager:"), function $CPDocument__windowWillReturnUndoManager_(self, _cmd, aWindow)
{
    return objj_msgSend(self, "undoManager");
}
,["CPUndoManager","CPWindow"]), new objj_method(sel_getUid("saveDocument:"), function $CPDocument__saveDocument_(self, _cmd, aSender)
{
    objj_msgSend(self, "saveDocumentWithDelegate:didSaveSelector:contextInfo:", nil, nil, nil);
}
,["void","id"]), new objj_method(sel_getUid("saveDocumentWithDelegate:didSaveSelector:contextInfo:"), function $CPDocument__saveDocumentWithDelegate_didSaveSelector_contextInfo_(self, _cmd, delegate, didSaveSelector, contextInfo)
{
    if (self._fileURL)
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPDocumentWillSaveNotification, self);
        objj_msgSend(self, "saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:", self._fileURL, objj_msgSend(self, "fileType"), CPSaveOperation, delegate, didSaveSelector, contextInfo);
    }
    else
        objj_msgSend(self, "_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:", delegate, didSaveSelector, contextInfo);
}
,["void","id","SEL","Object"]), new objj_method(sel_getUid("saveDocumentAs:"), function $CPDocument__saveDocumentAs_(self, _cmd, aSender)
{
    objj_msgSend(self, "_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:", nil, nil, nil);
}
,["void","id"]), new objj_method(sel_getUid("_saveDocumentAsWithDelegate:didSaveSelector:contextInfo:"), function $CPDocument___saveDocumentAsWithDelegate_didSaveSelector_contextInfo_(self, _cmd, delegate, didSaveSelector, contextInfo)
{
    var savePanel = objj_msgSend(CPSavePanel, "savePanel"),
        response = objj_msgSend(savePanel, "runModal");
    if (!response)
        return;
    var saveURL = objj_msgSend(savePanel, "URL");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPDocumentWillSaveNotification, self);
    objj_msgSend(self, "saveToURL:ofType:forSaveOperation:delegate:didSaveSelector:contextInfo:", saveURL, objj_msgSend(self, "fileType"), CPSaveAsOperation, delegate, didSaveSelector, contextInfo);
}
,["void","id","SEL","Object"]), new objj_method(sel_getUid("_sendDocumentSavedNotification:"), function $CPDocument___sendDocumentSavedNotification_(self, _cmd, didSave)
{
    if (didSave)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPDocumentDidSaveNotification, self);
    else
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPDocumentDidFailToSaveNotification, self);
}
,["void","BOOL"])]);
}{
var the_class = objj_getClass("CPDocument")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDocument\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("close"), function $CPDocument__close(self, _cmd)
{
    objj_msgSend(self._windowControllers, "makeObjectsPerformSelector:withObject:", sel_getUid("removeDocumentAndCloseIfNecessary:"), self);
    objj_msgSend(objj_msgSend(CPDocumentController, "sharedDocumentController"), "removeDocument:", self);
}
,["void"]), new objj_method(sel_getUid("shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:"), function $CPDocument__shouldCloseWindowController_delegate_shouldCloseSelector_contextInfo_(self, _cmd, controller, delegate, selector, info)
{
    if (objj_msgSend(controller, "shouldCloseDocument") || objj_msgSend(self._windowControllers, "count") < 2 && objj_msgSend(self._windowControllers, "indexOfObject:", controller) !== CPNotFound)
        objj_msgSend(self, "canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:", self, sel_getUid("_document:shouldClose:context:"), {delegate: delegate, selector: selector, context: info});
    else if (objj_msgSend(delegate, "respondsToSelector:", selector))
        objj_msgSend(delegate, selector, self, YES, info);
}
,["void","CPWindowController","id","SEL","Object"]), new objj_method(sel_getUid("_document:shouldClose:context:"), function $CPDocument___document_shouldClose_context_(self, _cmd, aDocument, shouldClose, context)
{
    if (aDocument === self && shouldClose)
        objj_msgSend(self, "close");
    objj_msgSend(context.delegate, context.selector, aDocument, shouldClose, context.context);
}
,["void","CPDocument","BOOL","Object"]), new objj_method(sel_getUid("canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:"), function $CPDocument__canCloseDocumentWithDelegate_shouldCloseSelector_contextInfo_(self, _cmd, aDelegate, aSelector, context)
{
    if (!objj_msgSend(self, "isDocumentEdited"))
        return objj_msgSend(aDelegate, "respondsToSelector:", aSelector) && objj_msgSend(aDelegate, aSelector, self, YES, context);
    self._canCloseAlert = objj_msgSend(objj_msgSend(CPAlert, "alloc"), "init");
    objj_msgSend(self._canCloseAlert, "setDelegate:", self);
    objj_msgSend(self._canCloseAlert, "setAlertStyle:", CPWarningAlertStyle);
    objj_msgSend(self._canCloseAlert, "setTitle:", "Unsaved Document");
    objj_msgSend(self._canCloseAlert, "setMessageText:", "Do you want to save the changes you've made to the document \"" + (objj_msgSend(self, "displayName") || objj_msgSend(self, "fileName")) + "\"?");
    objj_msgSend(self._canCloseAlert, "addButtonWithTitle:", "Save");
    objj_msgSend(self._canCloseAlert, "addButtonWithTitle:", "Cancel");
    objj_msgSend(self._canCloseAlert, "addButtonWithTitle:", "Don't Save");
    self._canCloseAlert._context = {delegate: aDelegate, selector: aSelector, context: context};
    objj_msgSend(self._canCloseAlert, "runModal");
}
,["void","id","SEL","Object"]), new objj_method(sel_getUid("alertDidEnd:returnCode:"), function $CPDocument__alertDidEnd_returnCode_(self, _cmd, alert, returnCode)
{
    if (alert !== self._canCloseAlert)
        return;
    var delegate = alert._context.delegate,
        selector = alert._context.selector,
        context = alert._context.context;
    if (returnCode === 0)
        objj_msgSend(self, "saveDocumentWithDelegate:didSaveSelector:contextInfo:", delegate, selector, context);
    else
        objj_msgSend(delegate, selector, self, returnCode === 2, context);
    self._canCloseAlert = nil;
}
,["void","CPAlert","int"])]);
}var _CPReadSessionMake = function(aType, aDelegate, aDidReadSelector, aContextInfo)
{
    return {fileType: aType, delegate: aDelegate, didReadSelector: aDidReadSelector, contextInfo: aContextInfo};
};
var _CPSaveSessionMake = function(anAbsoluteURL, aSaveOperation, aChangeCount, aDelegate, aDidSaveSelector, aContextInfo, aConnection)
{
    return {absoluteURL: anAbsoluteURL, saveOperation: aSaveOperation, changeCount: aChangeCount, delegate: aDelegate, didSaveSelector: aDidSaveSelector, contextInfo: aContextInfo, connection: aConnection};
};
p;22;CPDocumentController.jt;15614;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;12;CPDocument.ji;13;CPOpenPanel.ji;12;CPMenuItem.ji;20;CPWindowController.jt;15465;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("CPDocument.j", YES);objj_executeFile("CPOpenPanel.j", YES);objj_executeFile("CPMenuItem.j", YES);objj_executeFile("CPWindowController.j", YES);var CPSharedDocumentController = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPDocumentController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_documents"), new objj_ivar("_documentTypes")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPDocumentController__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDocumentController").super_class }, "init");
    if (self)
    {
        self._documents = objj_msgSend(objj_msgSend(CPArray, "alloc"), "init");
        if (!CPSharedDocumentController)
            CPSharedDocumentController = self;
        self._documentTypes = objj_msgSend(objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "infoDictionary"), "objectForKey:", "CPBundleDocumentTypes");
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("documentForURL:"), function $CPDocumentController__documentForURL_(self, _cmd, aURL)
{
    var index = 0,
        count = objj_msgSend(self._documents, "count");
    for (; index < count; ++index)
    {
        var theDocument = self._documents[index];
        if (objj_msgSend(objj_msgSend(theDocument, "fileURL"), "isEqual:", aURL))
            return theDocument;
    }
    return nil;
}
,["CPDocument","CPURL"]), new objj_method(sel_getUid("openUntitledDocumentOfType:display:"), function $CPDocumentController__openUntitledDocumentOfType_display_(self, _cmd, aType, shouldDisplay)
{
    var theDocument = objj_msgSend(self, "makeUntitledDocumentOfType:error:", aType, nil);
    if (theDocument)
        objj_msgSend(self, "addDocument:", theDocument);
    if (shouldDisplay)
    {
        objj_msgSend(theDocument, "makeWindowControllers");
        objj_msgSend(theDocument, "showWindows");
    }
    return theDocument;
}
,["void","CPString","BOOL"]), new objj_method(sel_getUid("makeUntitledDocumentOfType:error:"), function $CPDocumentController__makeUntitledDocumentOfType_error_(self, _cmd, aType, anError)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "documentClassForType:", aType), "alloc"), "initWithType:error:", aType, anError);
}
,["CPDocument","CPString","CPError"]), new objj_method(sel_getUid("openDocumentWithContentsOfURL:display:error:"), function $CPDocumentController__openDocumentWithContentsOfURL_display_error_(self, _cmd, anAbsoluteURL, shouldDisplay, anError)
{
    var result = objj_msgSend(self, "documentForURL:", anAbsoluteURL);
    if (!result)
    {
        var type = objj_msgSend(self, "typeForContentsOfURL:error:", anAbsoluteURL, anError);
        result = objj_msgSend(self, "makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:", anAbsoluteURL, type, self, sel_getUid("document:didRead:contextInfo:"), objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", shouldDisplay, "shouldDisplay"));
        objj_msgSend(self, "addDocument:", result);
        if (result)
            objj_msgSend(self, "noteNewRecentDocument:", result);
    }
    else if (shouldDisplay)
        objj_msgSend(result, "showWindows");
    return result;
}
,["CPDocument","CPURL","BOOL","CPError"]), new objj_method(sel_getUid("reopenDocumentForURL:withContentsOfURL:error:"), function $CPDocumentController__reopenDocumentForURL_withContentsOfURL_error_(self, _cmd, anAbsoluteURL, absoluteContentsURL, anError)
{
    return objj_msgSend(self, "makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:", anAbsoluteURL, absoluteContentsURL, objj_msgSend(objj_msgSend(self._documentTypes, "objectAtIndex:", 0), "objectForKey:", "CPBundleTypeName"), self, sel_getUid("document:didRead:contextInfo:"), nil);
}
,["CPDocument","CPURL","CPURL","CPError"]), new objj_method(sel_getUid("makeDocumentWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"), function $CPDocumentController__makeDocumentWithContentsOfURL_ofType_delegate_didReadSelector_contextInfo_(self, _cmd, anAbsoluteURL, aType, aDelegate, aSelector, aContextInfo)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "documentClassForType:", aType), "alloc"), "initWithContentsOfURL:ofType:delegate:didReadSelector:contextInfo:", anAbsoluteURL, aType, aDelegate, aSelector, aContextInfo);
}
,["CPDocument","CPURL","CPString","id","SEL","id"]), new objj_method(sel_getUid("makeDocumentForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:"), function $CPDocumentController__makeDocumentForURL_withContentsOfURL_ofType_delegate_didReadSelector_contextInfo_(self, _cmd, anAbsoluteURL, absoluteContentsURL, aType, aDelegate, aSelector, aContextInfo)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "documentClassForType:", aType), "alloc"), "initForURL:withContentsOfURL:ofType:delegate:didReadSelector:contextInfo:", anAbsoluteURL, absoluteContentsURL, aType, aDelegate, aSelector, aContextInfo);
}
,["CPDocument","CPURL","CPURL","CPString","id","SEL","id"]), new objj_method(sel_getUid("document:didRead:contextInfo:"), function $CPDocumentController__document_didRead_contextInfo_(self, _cmd, aDocument, didRead, aContextInfo)
{
    if (!didRead)
        return;
    objj_msgSend(aDocument, "makeWindowControllers");
    if (objj_msgSend(aContextInfo, "objectForKey:", "shouldDisplay"))
        objj_msgSend(aDocument, "showWindows");
}
,["void","CPDocument","BOOL","id"]), new objj_method(sel_getUid("newDocument:"), function $CPDocumentController__newDocument_(self, _cmd, aSender)
{
    objj_msgSend(self, "openUntitledDocumentOfType:display:", objj_msgSend(objj_msgSend(self._documentTypes, "objectAtIndex:", 0), "objectForKey:", "CPBundleTypeName"), YES);
}
,["CFAction","id"]), new objj_method(sel_getUid("openDocument:"), function $CPDocumentController__openDocument_(self, _cmd, aSender)
{
    var openPanel = objj_msgSend(CPOpenPanel, "openPanel");
    objj_msgSend(openPanel, "runModal");
    var URLs = objj_msgSend(openPanel, "URLs"),
        index = 0,
        count = objj_msgSend(URLs, "count");
    for (; index < count; ++index)
        objj_msgSend(self, "openDocumentWithContentsOfURL:display:error:", objj_msgSend(CPURL, "URLWithString:", URLs[index]), YES, nil);
}
,["void","id"]), new objj_method(sel_getUid("documents"), function $CPDocumentController__documents(self, _cmd)
{
    return self._documents;
}
,["CPArray"]), new objj_method(sel_getUid("currentDocument"), function $CPDocumentController__currentDocument(self, _cmd)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(CPApp, "mainWindow"), "windowController"), "document");
}
,["CPDocument"]), new objj_method(sel_getUid("addDocument:"), function $CPDocumentController__addDocument_(self, _cmd, aDocument)
{
    objj_msgSend(self._documents, "addObject:", aDocument);
}
,["void","CPDocument"]), new objj_method(sel_getUid("removeDocument:"), function $CPDocumentController__removeDocument_(self, _cmd, aDocument)
{
    objj_msgSend(self._documents, "removeObjectIdenticalTo:", aDocument);
}
,["void","CPDocument"]), new objj_method(sel_getUid("documentForWindow:"), function $CPDocumentController__documentForWindow_(self, _cmd, aWindow)
{
    return objj_msgSend(objj_msgSend(aWindow, "windowController"), "document");
}
,["CPDocument","CPWindow"]), new objj_method(sel_getUid("hasEditedDocuments"), function $CPDocumentController__hasEditedDocuments(self, _cmd)
{
    var iter = objj_msgSend(self._documents, "objectEnumerator"),
        obj;
    while ((obj = objj_msgSend(iter, "nextObject")) !== nil)
    {
        if (objj_msgSend(obj, "isDocumentEdited"))
            return YES;
    }
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("defaultType"), function $CPDocumentController__defaultType(self, _cmd)
{
    return objj_msgSend(self._documentTypes[0], "objectForKey:", "CPBundleTypeName");
}
,["CPString"]), new objj_method(sel_getUid("typeForContentsOfURL:error:"), function $CPDocumentController__typeForContentsOfURL_error_(self, _cmd, anAbsoluteURL, outError)
{
    var index = 0,
        count = self._documentTypes.length,
        extension = objj_msgSend(objj_msgSend(anAbsoluteURL, "pathExtension"), "lowercaseString"),
        starType = nil;
    for (; index < count; ++index)
    {
        var documentType = self._documentTypes[index],
            extensions = objj_msgSend(documentType, "objectForKey:", "CFBundleTypeExtensions"),
            extensionIndex = 0,
            extensionCount = extensions.length;
        for (; extensionIndex < extensionCount; ++extensionIndex)
        {
            var thisExtension = objj_msgSend(extensions[extensionIndex], "lowercaseString");
            if (thisExtension === extension)
                return objj_msgSend(documentType, "objectForKey:", "CPBundleTypeName");
            if (thisExtension === "****")
                starType = objj_msgSend(documentType, "objectForKey:", "CPBundleTypeName");
        }
    }
    return starType || objj_msgSend(self, "defaultType");
}
,["CPString","CPURL","CPError"]), new objj_method(sel_getUid("_infoForType:"), function $CPDocumentController___infoForType_(self, _cmd, aType)
{
    var i = 0,
        count = objj_msgSend(self._documentTypes, "count");
    for (; i < count; ++i)
    {
        var documentType = self._documentTypes[i];
        if (objj_msgSend(documentType, "objectForKey:", "CPBundleTypeName") == aType)
            return documentType;
    }
    return nil;
}
,["CPDictionary","CPString"]), new objj_method(sel_getUid("documentClassForType:"), function $CPDocumentController__documentClassForType_(self, _cmd, aType)
{
    var className = objj_msgSend(objj_msgSend(self, "_infoForType:", aType), "objectForKey:", "CPDocumentClass");
    return className ? CPClassFromString(className) : nil;
}
,["Class","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedDocumentController"), function $CPDocumentController__sharedDocumentController(self, _cmd)
{
    if (!CPSharedDocumentController)
        objj_msgSend(objj_msgSend(self, "alloc"), "init");
    return CPSharedDocumentController;
}
,["id"])]);
}{
var the_class = objj_getClass("CPDocumentController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("closeAllDocumentsWithDelegate:didCloseAllSelector:contextInfo:"), function $CPDocumentController__closeAllDocumentsWithDelegate_didCloseAllSelector_contextInfo_(self, _cmd, aDelegate, didCloseSelector, info)
{
    var context = {delegate: aDelegate, selector: didCloseSelector, context: info};
    objj_msgSend(self, "_closeDocumentsStartingWith:shouldClose:context:", nil, YES, context);
}
,["void","id","SEL","Object"]), new objj_method(sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"), function $CPDocumentController___closeDocumentsStartingWith_shouldClose_context_(self, _cmd, aDocument, shouldClose, context)
{
    if (shouldClose)
    {
        objj_msgSend(aDocument, "close");
        if (objj_msgSend(objj_msgSend(self, "documents"), "count") > 0)
        {
            objj_msgSend(objj_msgSend(objj_msgSend(self, "documents"), "lastObject"), "canCloseDocumentWithDelegate:shouldCloseSelector:contextInfo:", self, sel_getUid("_closeDocumentsStartingWith:shouldClose:context:"), context);
            return;
        }
    }
    if (objj_msgSend(context.delegate, "respondsToSelector:", context.selector))
        objj_msgSend(context.delegate, context.selector, self, objj_msgSend(objj_msgSend(self, "documents"), "count") === 0, context.context);
}
,["void","CPDocument","BOOL","Object"])]);
}{
var the_class = objj_getClass("CPDocumentController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDocumentController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("recentDocumentURLs"), function $CPDocumentController__recentDocumentURLs(self, _cmd)
{
    if (typeof window["cpRecentDocumentURLs"] === 'function')
        return window.cpRecentDocumentURLs();
    return [];
}
,["CPArray"]), new objj_method(sel_getUid("clearRecentDocuments:"), function $CPDocumentController__clearRecentDocuments_(self, _cmd, sender)
{
    if (typeof window["cpClearRecentDocuments"] === 'function')
        window.cpClearRecentDocuments();
    objj_msgSend(self, "_updateRecentDocumentsMenu");
}
,["void","id"]), new objj_method(sel_getUid("noteNewRecentDocument:"), function $CPDocumentController__noteNewRecentDocument_(self, _cmd, aDocument)
{
    objj_msgSend(self, "noteNewRecentDocumentURL:", objj_msgSend(aDocument, "fileURL"));
}
,["void","CPDocument"]), new objj_method(sel_getUid("noteNewRecentDocumentURL:"), function $CPDocumentController__noteNewRecentDocumentURL_(self, _cmd, aURL)
{
    var urlAsString = objj_msgSend(aURL, "isKindOfClass:", CPString) ? aURL : objj_msgSend(aURL, "absoluteString");
    if (typeof window["cpNoteNewRecentDocumentPath"] === 'function')
        window.cpNoteNewRecentDocumentPath(urlAsString);
    objj_msgSend(self, "_updateRecentDocumentsMenu");
}
,["void","CPURL"]), new objj_method(sel_getUid("_removeAllRecentDocumentsFromMenu:"), function $CPDocumentController___removeAllRecentDocumentsFromMenu_(self, _cmd, aMenu)
{
    var items = objj_msgSend(aMenu, "itemArray"),
        count = objj_msgSend(items, "count");
    while (count--)
    {
        var item = items[count];
        if (objj_msgSend(item, "action") === sel_getUid("_openRecentDocument:"))
            objj_msgSend(aMenu, "removeItemAtIndex:", count);
    }
}
,["void","CPMenu"]), new objj_method(sel_getUid("_updateRecentDocumentsMenu"), function $CPDocumentController___updateRecentDocumentsMenu(self, _cmd)
{
    var menu = objj_msgSend(objj_msgSend(CPApp, "mainMenu"), "_menuWithName:", "_CPRecentDocumentsMenu"),
        recentDocuments = objj_msgSend(self, "recentDocumentURLs"),
        menuItems = objj_msgSend(menu, "itemArray"),
        documentCount = objj_msgSend(recentDocuments, "count"),
        menuItemCount = objj_msgSend(menuItems, "count");
    objj_msgSend(self, "_removeAllRecentDocumentsFromMenu:", menu);
    if (menuItemCount)
    {
        if (!documentCount)
        {
            if (objj_msgSend(menuItems[0], "isSeparatorItem"))
                objj_msgSend(menu, "removeItemAtIndex:", 0);
        }
        else
        {
            if (!objj_msgSend(menuItems[0], "isSeparatorItem"))
                objj_msgSend(menu, "insertItem:atIndex:", objj_msgSend(CPMenuItem, "separatorItem"), 0);
        }
    }
    while (documentCount--)
    {
        var path = recentDocuments[documentCount],
            item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", objj_msgSend(path, "lastPathComponent"), sel_getUid("_openRecentDocument:"), nil);
        objj_msgSend(item, "setTag:", path);
        objj_msgSend(menu, "insertItem:atIndex:", item, 0);
    }
}
,["void"]), new objj_method(sel_getUid("_openRecentDocument:"), function $CPDocumentController___openRecentDocument_(self, _cmd, sender)
{
    objj_msgSend(self, "openDocumentWithContentsOfURL:display:error:", objj_msgSend(sender, "tag"), YES, nil);
}
,["void","id"])]);
}p;14;CPDragServer.jt;21173;@STATIC;1.0;i;24;CPDragServer_Constants.ji;9;CPEvent.ji;13;CPImageView.ji;14;CPPasteboard.ji;8;CPView.ji;20;CPWindow_Constants.jt;21037;objj_executeFile("CPDragServer_Constants.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);var CPDragServerPreviousEvent = nil,
    CPDragServerPeriodicUpdateInterval = 0.05;
var CPSharedDragServer = nil;
var CPDragServerSource = nil,
    CPDragServerDraggingInfo = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPDraggingInfo"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("draggingPasteboard"), function $CPDraggingInfo__draggingPasteboard(self, _cmd)
{
    if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
        return objj_msgSend(_CPDOMDataTransferPasteboard, "DOMDataTransferPasteboard");
    return objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingPasteboard");
}
,["CPPasteboard"]), new objj_method(sel_getUid("draggingSource"), function $CPDraggingInfo__draggingSource(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingSource");
}
,["id"]), new objj_method(sel_getUid("draggingLocation"), function $CPDraggingInfo__draggingLocation(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingLocation");
}
,["CGPoint"]), new objj_method(sel_getUid("draggingDestinationWindow"), function $CPDraggingInfo__draggingDestinationWindow(self, _cmd)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingDestination"), "isKindOfClass:", objj_msgSend(CPWindow, "class")) ? objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingDestination") : objj_msgSend(objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggingDestination"), "window");
}
,["CPWindow"]), new objj_method(sel_getUid("draggedImage"), function $CPDraggingInfo__draggedImage(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "draggedView"), "image");
}
,["CPImage"]), new objj_method(sel_getUid("draggedImageLocation"), function $CPDraggingInfo__draggedImageLocation(self, _cmd)
{
    return objj_msgSend(self, "draggedViewLocation");
}
,["CGPoint"]), new objj_method(sel_getUid("draggedView"), function $CPDraggingInfo__draggedView(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "draggedView");
}
,["CPView"]), new objj_method(sel_getUid("draggedViewLocation"), function $CPDraggingInfo__draggedViewLocation(self, _cmd)
{
    var dragServer = objj_msgSend(CPDragServer, "sharedDragServer");
    return objj_msgSend(objj_msgSend(objj_msgSend(dragServer, "draggingDestination"), "isKindOfClass:", objj_msgSend(CPWindow, "class")) ? objj_msgSend(dragServer, "draggingDestination") : objj_msgSend(objj_msgSend(dragServer, "draggingDestination"), "window"), "convertPlatformWindowToBase:", objj_msgSend(objj_msgSend(dragServer, "draggedView"), "frame").origin);
}
,["CGPoint"])]);
}var CPDraggingSource_draggedImage_movedTo_ = 1 << 0,
    CPDraggingSource_draggedImage_endedAt_operation_ = 1 << 1,
    CPDraggingSource_draggedView_movedTo_ = 1 << 2,
    CPDraggingSource_draggedView_endedAt_operation_ = 1 << 3;
{var the_class = objj_allocateClassPair(CPObject, "CPDragServer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isDragging"), new objj_ivar("_draggedWindow"), new objj_ivar("_draggedView"), new objj_ivar("_imageView"), new objj_ivar("_isDraggingImage"), new objj_ivar("_draggingOffset"), new objj_ivar("_draggingPasteboard"), new objj_ivar("_draggingSource"), new objj_ivar("_implementedDraggingSourceMethods"), new objj_ivar("_draggingLocation"), new objj_ivar("_draggingDestination"), new objj_ivar("_draggingDestinationWantsPeriodicUpdates"), new objj_ivar("_startDragLocation"), new objj_ivar("_shouldSlideBack"), new objj_ivar("_dragOperation"), new objj_ivar("_draggingUpdateTimer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isDragging"), function $CPDragServer__isDragging(self, _cmd)
{
    return self._isDragging;
}
,["BOOL"]), new objj_method(sel_getUid("draggedWindow"), function $CPDragServer__draggedWindow(self, _cmd)
{
    return self._draggedWindow;
}
,["CPWindow"]), new objj_method(sel_getUid("draggedView"), function $CPDragServer__draggedView(self, _cmd)
{
    return self._draggedView;
}
,["CPView"]), new objj_method(sel_getUid("draggingOffset"), function $CPDragServer__draggingOffset(self, _cmd)
{
    return self._draggingOffset;
}
,["CGSize"]), new objj_method(sel_getUid("draggingPasteboard"), function $CPDragServer__draggingPasteboard(self, _cmd)
{
    return self._draggingPasteboard;
}
,["CPPasteboard"]), new objj_method(sel_getUid("draggingSource"), function $CPDragServer__draggingSource(self, _cmd)
{
    return self._draggingSource;
}
,["id"]), new objj_method(sel_getUid("init"), function $CPDragServer__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDragServer").super_class }, "init");
    if (self)
    {
        self._draggedWindow = objj_msgSend(objj_msgSend(CPWindow, "alloc"), "initWithContentRect:styleMask:", CGRectMakeZero(), CPBorderlessWindowMask);
        objj_msgSend(self._draggedWindow, "setLevel:", CPDraggingWindowLevel);
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("draggingDestination"), function $CPDragServer__draggingDestination(self, _cmd)
{
    return self._draggingDestination;
}
,["id"]), new objj_method(sel_getUid("draggingLocation"), function $CPDragServer__draggingLocation(self, _cmd)
{
    return self._draggingLocation;
}
,["CGPoint"]), new objj_method(sel_getUid("draggingStartedInPlatformWindow:globalLocation:"), function $CPDragServer__draggingStartedInPlatformWindow_globalLocation_(self, _cmd, aPlatformWindow, aLocation)
{
    if (self._isDraggingImage)
    {
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedImage:beganAt:")))
            objj_msgSend(self._draggingSource, "draggedImage:beganAt:", objj_msgSend(self._draggedView, "image"), aLocation);
    }
    else
    {
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedView:beganAt:")))
            objj_msgSend(self._draggingSource, "draggedView:beganAt:", self._draggedView, aLocation);
    }
    if (!objj_msgSend(CPPlatform, "supportsDragAndDrop"))
        objj_msgSend(self._draggedWindow, "orderFront:", self);
}
,["void","CPPlatformWindow","CGPoint"]), new objj_method(sel_getUid("draggingSourceUpdatedWithGlobalLocation:"), function $CPDragServer__draggingSourceUpdatedWithGlobalLocation_(self, _cmd, aGlobalLocation)
{
    if (!objj_msgSend(CPPlatform, "supportsDragAndDrop"))
    {
        var frame = objj_msgSend(self._draggedWindow, "frame");
        frame.origin.x = aGlobalLocation.x - self._draggingOffset.width;
        frame.origin.y = aGlobalLocation.y - self._draggingOffset.height;
        objj_msgSend(self._draggedWindow, "_setFrame:display:animate:constrainWidth:constrainHeight:", frame, YES, NO, NO, NO);
    }
    if (self._implementedDraggingSourceMethods & CPDraggingSource_draggedImage_movedTo_)
        objj_msgSend(self._draggingSource, "draggedImage:movedTo:", objj_msgSend(self._draggedView, "image"), aGlobalLocation);
    else if (self._implementedDraggingSourceMethods & CPDraggingSource_draggedView_movedTo_)
        objj_msgSend(self._draggingSource, "draggedView:movedTo:", self._draggedView, aGlobalLocation);
}
,["void","CGPoint"]), new objj_method(sel_getUid("draggingUpdatedInPlatformWindow:location:"), function $CPDragServer__draggingUpdatedInPlatformWindow_location_(self, _cmd, aPlatformWindow, aLocation)
{
    objj_msgSend(self._draggingUpdateTimer, "invalidate");
    self._draggingUpdateTimer = nil;
    var dragOperation = CPDragOperationCopy,
        draggingDestination = objj_msgSend(aPlatformWindow, "_dragHitTest:pasteboard:", aLocation, objj_msgSend(CPDragServerDraggingInfo, "draggingPasteboard"));
    if (draggingDestination)
        self._draggingLocation = objj_msgSend(objj_msgSend(draggingDestination, "isKindOfClass:", objj_msgSend(CPWindow, "class")) ? draggingDestination : objj_msgSend(draggingDestination, "window"), "convertPlatformWindowToBase:", aLocation);
    if (draggingDestination !== self._draggingDestination)
    {
        if (objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("draggingExited:")))
            objj_msgSend(self._draggingDestination, "draggingExited:", CPDragServerDraggingInfo);
        self._draggingDestination = draggingDestination;
        if (objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("wantsPeriodicDraggingUpdates")))
            self._draggingDestinationWantsPeriodicUpdates = objj_msgSend(self._draggingDestination, "wantsPeriodicDraggingUpdates");
        else
            self._draggingDestinationWantsPeriodicUpdates = YES;
        if (objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("draggingEntered:")))
            dragOperation = objj_msgSend(self._draggingDestination, "draggingEntered:", CPDragServerDraggingInfo);
    }
    else if (objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("draggingUpdated:")))
        dragOperation = objj_msgSend(self._draggingDestination, "draggingUpdated:", CPDragServerDraggingInfo);
    if (!self._draggingDestination)
        dragOperation = CPDragOperationNone;
    else
    {
        if (self._draggingDestinationWantsPeriodicUpdates)
            self._draggingUpdateTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", CPDragServerPeriodicUpdateInterval, self, sel_getUid("_sendPeriodicDraggingUpdate:"), objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", aPlatformWindow, "platformWindow", aLocation, "location"), NO);
        var scrollView = objj_msgSend(self._draggingDestination, "isKindOfClass:", objj_msgSend(CPView, "class")) ? objj_msgSend(self._draggingDestination, "enclosingScrollView") : nil;
        if (scrollView)
        {
            var contentView = objj_msgSend(scrollView, "contentView"),
                bounds = objj_msgSend(contentView, "bounds"),
                insetBounds = CGRectInset(bounds, 30, 30),
                eventLocation = objj_msgSend(contentView, "convertPoint:fromView:", self._draggingLocation, nil),
                deltaX = 0,
                deltaY = 0;
            if (!CGRectContainsPoint(insetBounds, eventLocation))
            {
                if (objj_msgSend(scrollView, "hasVerticalScroller"))
                {
                    if (eventLocation.y < CGRectGetMinY(insetBounds))
                        deltaY = CGRectGetMinY(insetBounds) - eventLocation.y;
                    else if (eventLocation.y > CGRectGetMaxY(insetBounds))
                        deltaY = CGRectGetMaxY(insetBounds) - eventLocation.y;
                    if (deltaY < -insetBounds.size.height)
                        deltaY = -insetBounds.size.height;
                    if (deltaY > insetBounds.size.height)
                        deltaY = insetBounds.size.height;
                }
                if (objj_msgSend(scrollView, "hasHorizontalScroller"))
                {
                    if (eventLocation.x < CGRectGetMinX(insetBounds))
                        deltaX = CGRectGetMinX(insetBounds) - eventLocation.x;
                    else if (eventLocation.x > CGRectGetMaxX(insetBounds))
                        deltaX = CGRectGetMaxX(insetBounds) - eventLocation.x;
                    if (deltaX < -insetBounds.size.width)
                        deltaX = -insetBounds.size.width;
                    if (deltaX > insetBounds.size.width)
                        deltaX = insetBounds.size.width;
                }
                var scrollPoint = CGPointMake(bounds.origin.x - deltaX, bounds.origin.y - deltaY);
                objj_msgSend(contentView, "scrollToPoint:", scrollPoint);
                objj_msgSend(objj_msgSend(scrollView, "_headerView"), "scrollPoint:", scrollPoint);
            }
        }
    }
    return dragOperation;
}
,["CPDragOperation","CPPlatformWindow","CGPoint"]), new objj_method(sel_getUid("_sendPeriodicDraggingUpdate:"), function $CPDragServer___sendPeriodicDraggingUpdate_(self, _cmd, aTimer)
{
    var userInfo = objj_msgSend(aTimer, "userInfo");
    self._dragOperation = objj_msgSend(self, "draggingUpdatedInPlatformWindow:location:", objj_msgSend(userInfo, "objectForKey:", "platformWindow"), objj_msgSend(userInfo, "objectForKey:", "location"));
}
,["void","CPTimer"]), new objj_method(sel_getUid("draggingEndedInPlatformWindow:globalLocation:operation:"), function $CPDragServer__draggingEndedInPlatformWindow_globalLocation_operation_(self, _cmd, aPlatformWindow, aLocation, anOperation)
{
    objj_msgSend(self._draggingUpdateTimer, "invalidate");
    self._draggingUpdateTimer = nil;
    objj_msgSend(self._draggedView, "removeFromSuperview");
    if (!objj_msgSend(CPPlatform, "supportsDragAndDrop"))
        objj_msgSend(self._draggedWindow, "orderOut:", self);
    if (self._implementedDraggingSourceMethods & CPDraggingSource_draggedImage_endedAt_operation_)
        objj_msgSend(self._draggingSource, "draggedImage:endedAt:operation:", objj_msgSend(self._draggedView, "image"), aLocation, anOperation);
    else if (self._implementedDraggingSourceMethods & CPDraggingSource_draggedView_endedAt_operation_)
        objj_msgSend(self._draggingSource, "draggedView:endedAt:operation:", self._draggedView, aLocation, anOperation);
    self._isDragging = NO;
}
,["void","CPPlatformWindow","CGPoint","CPDragOperation"]), new objj_method(sel_getUid("performDragOperationInPlatformWindow:"), function $CPDragServer__performDragOperationInPlatformWindow_(self, _cmd, aPlatformWindow)
{
    if (self._draggingDestination && (!objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("prepareForDragOperation:")) || objj_msgSend(self._draggingDestination, "prepareForDragOperation:", CPDragServerDraggingInfo)) && (!objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("performDragOperation:")) || objj_msgSend(self._draggingDestination, "performDragOperation:", CPDragServerDraggingInfo)) && objj_msgSend(self._draggingDestination, "respondsToSelector:", sel_getUid("concludeDragOperation:")))
        objj_msgSend(self._draggingDestination, "concludeDragOperation:", CPDragServerDraggingInfo);
}
,["void","CPPlatformWindow"]), new objj_method(sel_getUid("dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:"), function $CPDragServer__dragView_fromWindow_at_offset_event_pasteboard_source_slideBack_(self, _cmd, aView, aWindow, viewLocation, mouseOffset, mouseDownEvent, aPasteboard, aSourceObject, slideBack)
{
    self._isDragging = YES;
    self._draggedView = aView;
    self._draggingPasteboard = aPasteboard || objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard);
    self._draggingSource = aSourceObject;
    self._draggingDestination = nil;
    self._shouldSlideBack = slideBack;
    var mouseDownWindow = objj_msgSend(mouseDownEvent, "window"),
        mouseDownEventLocation = objj_msgSend(mouseDownEvent, "locationInWindow");
    if (mouseDownEventLocation)
    {
        if (mouseDownWindow)
            mouseDownEventLocation = objj_msgSend(mouseDownWindow, "convertBaseToGlobal:", mouseDownEventLocation);
        self._draggingOffset = CGSizeMake(mouseDownEventLocation.x - viewLocation.x, mouseDownEventLocation.y - viewLocation.y);
    }
    else
        self._draggingOffset = CGSizeMakeZero();
    if (objj_msgSend(CPPlatform, "isBrowser"))
        objj_msgSend(self._draggedWindow, "setPlatformWindow:", objj_msgSend(aWindow, "platformWindow"));
    objj_msgSend(aView, "setFrameOrigin:", CGPointMakeZero());
    var mouseLocation = objj_msgSend(CPEvent, "mouseLocation"),
        viewSize = objj_msgSend(aView, "frameSize"),
        startDragLocationX = mouseLocation.x - self._draggingOffset.width,
        startDragLocationY = mouseLocation.y - self._draggingOffset.height,
        draggedWindowFrame = CGRectMake(startDragLocationX, startDragLocationY, viewSize.width, viewSize.height);
    self._startDragLocation = CGPointMake(startDragLocationX, startDragLocationY);
    objj_msgSend(self._draggedWindow, "_setFrame:display:animate:constrainWidth:constrainHeight:", draggedWindowFrame, YES, NO, NO, NO);
    objj_msgSend(objj_msgSend(self._draggedWindow, "contentView"), "addSubview:", aView);
    self._implementedDraggingSourceMethods = 0;
    if (self._draggedView === self._imageView)
    {
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedImage:movedTo:")))
            self._implementedDraggingSourceMethods |= CPDraggingSource_draggedImage_movedTo_;
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedImage:endedAt:operation:")))
            self._implementedDraggingSourceMethods |= CPDraggingSource_draggedImage_endedAt_operation_;
    }
    else
    {
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedView:movedTo:")))
            self._implementedDraggingSourceMethods |= CPDraggingSource_draggedView_movedTo_;
        if (objj_msgSend(self._draggingSource, "respondsToSelector:", sel_getUid("draggedView:endedAt:operation:")))
            self._implementedDraggingSourceMethods |= CPDraggingSource_draggedView_endedAt_operation_;
    }
    if (!objj_msgSend(CPPlatform, "supportsDragAndDrop"))
    {
        objj_msgSend(self, "draggingStartedInPlatformWindow:globalLocation:", objj_msgSend(aWindow, "platformWindow"), mouseLocation);
        objj_msgSend(self, "trackDragging:", mouseDownEvent);
    }
}
,["void","CPView","CPWindow","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:"), function $CPDragServer__dragImage_fromWindow_at_offset_event_pasteboard_source_slideBack_(self, _cmd, anImage, aWindow, imageLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack)
{
    self._isDraggingImage = YES;
    var imageSize = objj_msgSend(anImage, "size");
    if (!self._imageView)
        self._imageView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, imageSize.width, imageSize.height));
    objj_msgSend(self._imageView, "setImage:", anImage);
    objj_msgSend(self, "dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:", self._imageView, aWindow, imageLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack);
}
,["void","CPImage","CPWindow","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("trackDragging:"), function $CPDragServer__trackDragging_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type"),
        platformWindow = objj_msgSend(self._draggedWindow, "platformWindow"),
        platformWindowLocation = objj_msgSend(objj_msgSend(anEvent, "window"), "convertBaseToPlatformWindow:", objj_msgSend(anEvent, "locationInWindow"));
    if (type === CPLeftMouseUp)
    {
        if (self._dragOperation !== CPDragOperationNone)
            objj_msgSend(self, "performDragOperationInPlatformWindow:", platformWindow);
        objj_msgSend(self, "draggingEndedInPlatformWindow:globalLocation:operation:", platformWindow, platformWindowLocation, self._dragOperation);
        return;
    }
    else if (type === CPKeyDown)
    {
        var characters = objj_msgSend(anEvent, "characters");
        if (characters === CPEscapeFunctionKey)
        {
            self._dragOperation = CPDragOperationNone;
            objj_msgSend(self, "draggingEndedInPlatformWindow:globalLocation:operation:", platformWindow, CGPointMakeZero(), self._dragOperation);
            return;
        }
    }
    else
    {
        objj_msgSend(self, "draggingSourceUpdatedWithGlobalLocation:", platformWindowLocation);
        self._dragOperation = objj_msgSend(self, "draggingUpdatedInPlatformWindow:location:", platformWindow, platformWindowLocation);
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackDragging:"), CPMouseMovedMask | CPLeftMouseDraggedMask | CPLeftMouseUpMask | CPKeyDownMask, nil, 0, YES);
}
,["void","CPEvent"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPDragServer__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPDragServer, "class"))
        return;
    CPDragServerDraggingInfo = objj_msgSend(objj_msgSend(CPDraggingInfo, "alloc"), "init");
}
,["void"]), new objj_method(sel_getUid("sharedDragServer"), function $CPDragServer__sharedDragServer(self, _cmd)
{
    if (!CPSharedDragServer)
        CPSharedDragServer = objj_msgSend(objj_msgSend(CPDragServer, "alloc"), "init");
    return CPSharedDragServer;
}
,["CPDragServer"])]);
}p;24;CPDragServer_Constants.jt;258;@STATIC;1.0;t;240;CPDragOperationNone = 0;
CPDragOperationCopy = 1 << 1;
CPDragOperationLink = 1 << 1;
CPDragOperationGeneric = 1 << 2;
CPDragOperationPrivate = 1 << 3;
CPDragOperationMove = 1 << 4;
CPDragOperationDelete = 1 << 5;
CPDragOperationEvery = -1;
p;9;CPEvent.jt;16413;@STATIC;1.0;i;19;CPEvent_Constants.jI;21;Foundation/CPObject.jI;26;Foundation/CPObjJRuntime.jI;21;Foundation/CPString.ji;17;CPCompatibility.ji;12;CGGeometry.ji;8;CPText.jt;16235;objj_executeFile("CPEvent_Constants.j", YES);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPObjJRuntime.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPText.j", YES);var _CPEventPeriodicEventPeriod = 0,
    _CPEventPeriodicEventTimer = nil,
    _CPEventUpperCaseRegex = new RegExp("[A-Z]"),
    _CPEventStartupMilliseconds = (new Date()).getTime();
{var the_class = objj_allocateClassPair(CPObject, "CPEvent"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_type"), new objj_ivar("_location"), new objj_ivar("_modifierFlags"), new objj_ivar("_timestamp"), new objj_ivar("_context"), new objj_ivar("_eventNumber"), new objj_ivar("_clickCount"), new objj_ivar("_pressure"), new objj_ivar("_window"), new objj_ivar("_windowNumber"), new objj_ivar("_characters"), new objj_ivar("_charactersIgnoringModifiers"), new objj_ivar("_isARepeat"), new objj_ivar("_keyCode"), new objj_ivar("_DOMEvent"), new objj_ivar("_data1"), new objj_ivar("_data2"), new objj_ivar("_subtype"), new objj_ivar("_deltaX"), new objj_ivar("_deltaY"), new objj_ivar("_deltaZ"), new objj_ivar("_suppressCappuccinoCut"), new objj_ivar("_suppressCappuccinoPaste")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_initWithType:"), function $CPEvent___initWithType_(self, _cmd, anEventType)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPEvent").super_class }, "init"))
    {
        self._type = anEventType;
        self._deltaX = 0;
        self._deltaY = 0;
        self._deltaZ = 0;
    }
    return self;
}
,["id","CPEventType"]), new objj_method(sel_getUid("_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"), function $CPEvent___initMouseEventWithType_location_modifierFlags_timestamp_windowNumber_context_eventNumber_clickCount_pressure_(self, _cmd, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, anEventNumber, aClickCount, aPressure)
{
    if (self = objj_msgSend(self, "_initWithType:", anEventType))
    {
        self._location = CGPointCreateCopy(aPoint);
        self._modifierFlags = modifierFlags;
        self._timestamp = aTimestamp;
        self._context = aGraphicsContext;
        self._eventNumber = anEventNumber;
        self._clickCount = aClickCount;
        self._pressure = aPressure;
        self._window = objj_msgSend(CPApp, "windowWithWindowNumber:", aWindowNumber);
    }
    return self;
}
,["id","CPEventType","CGPoint","unsigned","CPTimeInterval","int","CPGraphicsContext","int","int","float"]), new objj_method(sel_getUid("_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"), function $CPEvent___initKeyEventWithType_location_modifierFlags_timestamp_windowNumber_context_characters_charactersIgnoringModifiers_isARepeat_keyCode_(self, _cmd, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, characters, unmodCharacters, isARepeat, code)
{
    if (self = objj_msgSend(self, "_initWithType:", anEventType))
    {
        self._location = CGPointCreateCopy(aPoint);
        self._modifierFlags = modifierFlags;
        self._timestamp = aTimestamp;
        self._context = aGraphicsContext;
        self._characters = characters;
        self._charactersIgnoringModifiers = unmodCharacters;
        self._isARepeat = isARepeat;
        self._keyCode = code;
        self._windowNumber = aWindowNumber;
    }
    return self;
}
,["id","CPEventType","CGPoint","unsigned int","CPTimeInterval","int","CPGraphicsContext","CPString","CPString","BOOL","unsigned short"]), new objj_method(sel_getUid("_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"), function $CPEvent___initOtherEventWithType_location_modifierFlags_timestamp_windowNumber_context_subtype_data1_data2_(self, _cmd, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, aSubtype, aData1, aData2)
{
    if (self = objj_msgSend(self, "_initWithType:", anEventType))
    {
        self._location = CGPointCreateCopy(aPoint);
        self._modifierFlags = modifierFlags;
        self._timestamp = aTimestamp;
        self._context = aGraphicsContext;
        self._subtype = aSubtype;
        self._data1 = aData1;
        self._data2 = aData2;
    }
    return self;
}
,["id","CPEventType","CGPoint","unsigned","CPTimeInterval","int","CPGraphicsContext","short","int","int"]), new objj_method(sel_getUid("locationInWindow"), function $CPEvent__locationInWindow(self, _cmd)
{
    return CGPointMakeCopy(self._location);
}
,["CGPoint"]), new objj_method(sel_getUid("globalLocation"), function $CPEvent__globalLocation(self, _cmd)
{
    var theWindow = objj_msgSend(self, "window"),
        location = objj_msgSend(self, "locationInWindow");
    if (theWindow)
        return objj_msgSend(theWindow, "convertBaseToGlobal:", location);
    return location;
}
,["CGPoint"]), new objj_method(sel_getUid("modifierFlags"), function $CPEvent__modifierFlags(self, _cmd)
{
    return self._modifierFlags;
}
,["unsigned"]), new objj_method(sel_getUid("timestamp"), function $CPEvent__timestamp(self, _cmd)
{
    return self._timestamp;
}
,["CPTimeInterval"]), new objj_method(sel_getUid("type"), function $CPEvent__type(self, _cmd)
{
    return self._type;
}
,["CPEventType"]), new objj_method(sel_getUid("window"), function $CPEvent__window(self, _cmd)
{
    if (!self._window)
        self._window = objj_msgSend(CPApp, "windowWithWindowNumber:", self._windowNumber);
    return self._window;
}
,["CPWindow"]), new objj_method(sel_getUid("windowNumber"), function $CPEvent__windowNumber(self, _cmd)
{
    return self._windowNumber;
}
,["int"]), new objj_method(sel_getUid("buttonNumber"), function $CPEvent__buttonNumber(self, _cmd)
{
    if (self._type === CPRightMouseDown || self._type === CPRightMouseUp || self._type === CPRightMouseDragged)
        return 1;
    return 0;
}
,["int"]), new objj_method(sel_getUid("clickCount"), function $CPEvent__clickCount(self, _cmd)
{
    return self._clickCount;
}
,["int"]), new objj_method(sel_getUid("characters"), function $CPEvent__characters(self, _cmd)
{
    return self._characters;
}
,["CPString"]), new objj_method(sel_getUid("charactersIgnoringModifiers"), function $CPEvent__charactersIgnoringModifiers(self, _cmd)
{
    return self._charactersIgnoringModifiers;
}
,["CPString"]), new objj_method(sel_getUid("isARepeat"), function $CPEvent__isARepeat(self, _cmd)
{
    return self._isARepeat;
}
,["BOOL"]), new objj_method(sel_getUid("keyCode"), function $CPEvent__keyCode(self, _cmd)
{
    return self._keyCode;
}
,["unsigned short"]), new objj_method(sel_getUid("pressure"), function $CPEvent__pressure(self, _cmd)
{
    return self._pressure;
}
,["float"]), new objj_method(sel_getUid("_DOMEvent"), function $CPEvent___DOMEvent(self, _cmd)
{
    return self._DOMEvent;
}
,["DOMEvent"]), new objj_method(sel_getUid("data1"), function $CPEvent__data1(self, _cmd)
{
    return self._data1;
}
,["int"]), new objj_method(sel_getUid("data2"), function $CPEvent__data2(self, _cmd)
{
    return self._data2;
}
,["int"]), new objj_method(sel_getUid("deltaX"), function $CPEvent__deltaX(self, _cmd)
{
    return self._deltaX;
}
,["float"]), new objj_method(sel_getUid("deltaY"), function $CPEvent__deltaY(self, _cmd)
{
    return self._deltaY;
}
,["float"]), new objj_method(sel_getUid("deltaZ"), function $CPEvent__deltaZ(self, _cmd)
{
    return self._deltaZ;
}
,["float"]), new objj_method(sel_getUid("_triggersKeyEquivalent:withModifierMask:"), function $CPEvent___triggersKeyEquivalent_withModifierMask_(self, _cmd, aKeyEquivalent, aKeyEquivalentModifierMask)
{
    if (!aKeyEquivalent)
        return NO;
    if (_CPEventUpperCaseRegex.test(aKeyEquivalent))
        aKeyEquivalentModifierMask |= CPShiftKeyMask;
    if (!CPBrowserIsOperatingSystem(CPMacOperatingSystem) && aKeyEquivalentModifierMask & CPCommandKeyMask)
    {
        aKeyEquivalentModifierMask |= CPControlKeyMask;
        aKeyEquivalentModifierMask &= ~CPCommandKeyMask;
    }
    if ((self._modifierFlags & (CPShiftKeyMask | CPAlternateKeyMask | CPCommandKeyMask | CPControlKeyMask)) !== aKeyEquivalentModifierMask)
        return NO;
    if (self._characters === CPNewlineCharacter || self._characters === CPCarriageReturnCharacter)
        return CPNewlineCharacter === aKeyEquivalent || CPCarriageReturnCharacter === aKeyEquivalent;
    return objj_msgSend(self._characters, "caseInsensitiveCompare:", aKeyEquivalent) === CPOrderedSame;
}
,["BOOL","CPString",null]), new objj_method(sel_getUid("_couldBeKeyEquivalent"), function $CPEvent___couldBeKeyEquivalent(self, _cmd)
{
    if (self._type !== CPKeyDown)
        return NO;
    var characterCount = self._characters.length;
    if (!characterCount)
        return NO;
    if (self._modifierFlags & (CPCommandKeyMask | CPControlKeyMask))
        return YES;
    var firstResponderIsText = objj_msgSend(objj_msgSend(self._window, "firstResponder"), "isKindOfClass:", objj_msgSend(CPTextField, "class"));
    for (var i = 0; i < characterCount; i++)
    {
        var c = self._characters.charAt(i);
        if (c >= CPUpArrowFunctionKey && c <= CPModeSwitchFunctionKey || c === CPEnterCharacter || c === CPNewlineCharacter || c === CPCarriageReturnCharacter || c === CPEscapeFunctionKey)
        {
            return YES;
        }
    }
    return !firstResponderIsText;
}
,["BOOL"]), new objj_method(sel_getUid("_platformIsEffectingCutOrPaste"), function $CPEvent___platformIsEffectingCutOrPaste(self, _cmd)
{
    return self._suppressCappuccinoCut || self._suppressCappuccinoPaste;
}
,["BOOL"]), new objj_method(sel_getUid("description"), function $CPEvent__description(self, _cmd)
{
    switch(self._type) {
    case CPKeyDown:
    case CPKeyUp:
    case CPFlagsChanged:
        return objj_msgSend(CPString, "stringWithFormat:", "CPEvent: type=%d loc=%@ time=%.1f flags=0x%X win=%@ winNum=%d ctxt=%@ chars=\"%@\" unmodchars=\"%@\" repeat=%d keyCode=%d", self._type, CGStringFromPoint(self._location), self._timestamp, self._modifierFlags, self._window, self._windowNumber, self._context, self._characters, self._charactersIgnoringModifiers, self._isARepeat, self._keyCode);
    case CPLeftMouseDown:
    case CPLeftMouseUp:
    case CPRightMouseDown:
    case CPRightMouseUp:
    case CPMouseMoved:
    case CPLeftMouseDragged:
    case CPRightMouseDragged:
    case CPMouseEntered:
    case CPMouseExited:
        return objj_msgSend(CPString, "stringWithFormat:", "CPEvent: type=%d loc=%@ time=%.1f flags=0x%X win=%@ winNum=%d ctxt=%@ evNum=%d click=%d buttonNumber=%d pressure=%f", self._type, CGStringFromPoint(self._location), self._timestamp, self._modifierFlags, self._window, self._windowNumber, self._context, self._eventNumber, self._clickCount, objj_msgSend(self, "buttonNumber"), self._pressure);
default:
        return objj_msgSend(CPString, "stringWithFormat:", "CPEvent: type=%d loc=%@ time=%.1f flags=0x%X win=%@ winNum=%d ctxt=%@ subtype=%d data1=%d data2=%d", self._type, CGStringFromPoint(self._location), self._timestamp, self._modifierFlags, self._window, self._windowNumber, self._context, self._subtype, self._data1, self._data2);
    }
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("currentTimestamp"), function $CPEvent__currentTimestamp(self, _cmd)
{
    return ((new Date()).getTime() - _CPEventStartupMilliseconds) / 1000;
}
,["CPTimeInterval"]), new objj_method(sel_getUid("keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:"), function $CPEvent__keyEventWithType_location_modifierFlags_timestamp_windowNumber_context_characters_charactersIgnoringModifiers_isARepeat_keyCode_(self, _cmd, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, characters, unmodCharacters, repeatKey, code)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "_initKeyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, characters, unmodCharacters, repeatKey, code);
}
,["CPEvent","CPEventType","CGPoint","unsigned int","CPTimeInterval","int","CPGraphicsContext","CPString","CPString","BOOL","unsigned short"]), new objj_method(sel_getUid("mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:"), function $CPEvent__mouseEventWithType_location_modifierFlags_timestamp_windowNumber_context_eventNumber_clickCount_pressure_(self, _cmd, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, anEventNumber, aClickCount, aPressure)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "_initMouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, anEventNumber, aClickCount, aPressure);
}
,["id","CPEventType","CGPoint","unsigned","CPTimeInterval","int","CPGraphicsContext","int","int","float"]), new objj_method(sel_getUid("otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:"), function $CPEvent__otherEventWithType_location_modifierFlags_timestamp_windowNumber_context_subtype_data1_data2_(self, _cmd, anEventType, aLocation, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, aSubtype, aData1, aData2)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "_initOtherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:", anEventType, aLocation, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, aSubtype, aData1, aData2);
}
,["CPEvent","CPEventType","CGPoint","unsigned","CPTimeInterval","int","CPGraphicsContext","short","int","int"]), new objj_method(sel_getUid("mouseLocation"), function $CPEvent__mouseLocation(self, _cmd)
{
    var event = objj_msgSend(CPApp, "currentEvent"),
        eventWindow = objj_msgSend(event, "window");
    if (eventWindow)
        return objj_msgSend(eventWindow, "convertBaseToGlobal:", objj_msgSend(event, "locationInWindow"));
    return objj_msgSend(event, "locationInWindow");
}
,["CGPoint"]), new objj_method(sel_getUid("startPeriodicEventsAfterDelay:withPeriod:"), function $CPEvent__startPeriodicEventsAfterDelay_withPeriod_(self, _cmd, aDelay, aPeriod)
{
    _CPEventPeriodicEventPeriod = aPeriod;
    _CPEventPeriodicEventTimer = window.setTimeout(function()
    {
        _CPEventPeriodicEventTimer = window.setInterval(_CPEventFirePeriodEvent, aPeriod * 1000.0);
    }, aDelay * 1000.0);
}
,["void","CPTimeInterval","CPTimeInterval"]), new objj_method(sel_getUid("stopPeriodicEvents"), function $CPEvent__stopPeriodicEvents(self, _cmd)
{
    if (_CPEventPeriodicEventTimer === nil)
        return;
    window.clearTimeout(_CPEventPeriodicEventTimer);
    _CPEventPeriodicEventTimer = nil;
}
,["void"])]);
}_CPEventFirePeriodEvent = function()
{
    objj_msgSend(CPApp, "sendEvent:", objj_msgSend(CPEvent, "otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:", CPPeriodic, CGPointMakeZero(), 0, objj_msgSend(CPEvent, "currentTimestamp"), 0, nil, 0, 0, 0));
}
var CPEventClass = objj_msgSend(CPEvent, "class");
_CPEventFromNativeMouseEvent = function(aNativeEvent, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, anEventNumber, aClickCount, aPressure)
{
    aNativeEvent.isa = CPEventClass;
    aNativeEvent._type = anEventType;
    aNativeEvent._location = aPoint;
    aNativeEvent._modifierFlags = modifierFlags;
    aNativeEvent._timestamp = aTimestamp;
    aNativeEvent._windowNumber = aWindowNumber;
    aNativeEvent._window = nil;
    aNativeEvent._context = aGraphicsContext;
    aNativeEvent._eventNumber = anEventNumber;
    aNativeEvent._clickCount = aClickCount;
    aNativeEvent._pressure = aPressure;
    return aNativeEvent;
}
p;19;CPEvent_Constants.jt;4507;@STATIC;1.0;t;4488;CPLeftMouseDown = 1;
CPLeftMouseUp = 2;
CPRightMouseDown = 3;
CPRightMouseUp = 4;
CPMouseMoved = 5;
CPLeftMouseDragged = 6;
CPRightMouseDragged = 7;
CPMouseEntered = 8;
CPMouseExited = 9;
CPKeyDown = 10;
CPKeyUp = 11;
CPFlagsChanged = 12;
CPAppKitDefined = 13;
CPSystemDefined = 14;
CPApplicationDefined = 15;
CPPeriodic = 16;
CPCursorUpdate = 17;
CPScrollWheel = 22;
CPOtherMouseDown = 25;
CPOtherMouseUp = 26;
CPOtherMouseDragged = 27;
CPTouchStart = 28;
CPTouchMove = 29;
CPTouchEnd = 30;
CPTouchCancel = 31;
CPAlphaShiftKeyMask = 1 << 16;
CPShiftKeyMask = 1 << 17;
CPControlKeyMask = 1 << 18;
CPAlternateKeyMask = 1 << 19;
CPCommandKeyMask = 1 << 20;
CPNumericPadKeyMask = 1 << 21;
CPHelpKeyMask = 1 << 22;
CPFunctionKeyMask = 1 << 23;
CPDeviceIndependentModifierFlagsMask = 0xffff0000;
CPLeftMouseDownMask = 1 << CPLeftMouseDown;
CPLeftMouseUpMask = 1 << CPLeftMouseUp;
CPRightMouseDownMask = 1 << CPRightMouseDown;
CPRightMouseUpMask = 1 << CPRightMouseUp;
CPOtherMouseDownMask = 1 << CPOtherMouseDown;
CPOtherMouseUpMask = 1 << CPOtherMouseUp;
CPMouseMovedMask = 1 << CPMouseMoved;
CPLeftMouseDraggedMask = 1 << CPLeftMouseDragged;
CPRightMouseDraggedMask = 1 << CPRightMouseDragged;
CPOtherMouseDragged = 1 << CPOtherMouseDragged;
CPMouseEnteredMask = 1 << CPMouseEntered;
CPMouseExitedMask = 1 << CPMouseExited;
CPCursorUpdateMask = 1 << CPCursorUpdate;
CPKeyDownMask = 1 << CPKeyDown;
CPKeyUpMask = 1 << CPKeyUp;
CPFlagsChangedMask = 1 << CPFlagsChanged;
CPAppKitDefinedMask = 1 << CPAppKitDefined;
CPSystemDefinedMask = 1 << CPSystemDefined;
CPApplicationDefinedMask = 1 << CPApplicationDefined;
CPPeriodicMask = 1 << CPPeriodic;
CPScrollWheelMask = 1 << CPScrollWheel;
CPAnyEventMask = 0xffffffff;
CPUpArrowFunctionKey = "\uF700";
CPDownArrowFunctionKey = "\uF701";
CPLeftArrowFunctionKey = "\uF702";
CPRightArrowFunctionKey = "\uF703";
CPF1FunctionKey = "\uF704";
CPF2FunctionKey = "\uF705";
CPF3FunctionKey = "\uF706";
CPF4FunctionKey = "\uF707";
CPF5FunctionKey = "\uF708";
CPF6FunctionKey = "\uF709";
CPF7FunctionKey = "\uF70A";
CPF8FunctionKey = "\uF70B";
CPF9FunctionKey = "\uF70C";
CPF10FunctionKey = "\uF70D";
CPF11FunctionKey = "\uF70E";
CPF12FunctionKey = "\uF70F";
CPF13FunctionKey = "\uF710";
CPF14FunctionKey = "\uF711";
CPF15FunctionKey = "\uF712";
CPF16FunctionKey = "\uF713";
CPF17FunctionKey = "\uF714";
CPF18FunctionKey = "\uF715";
CPF19FunctionKey = "\uF716";
CPF20FunctionKey = "\uF717";
CPF21FunctionKey = "\uF718";
CPF22FunctionKey = "\uF719";
CPF23FunctionKey = "\uF71A";
CPF24FunctionKey = "\uF71B";
CPF25FunctionKey = "\uF71C";
CPF26FunctionKey = "\uF71D";
CPF27FunctionKey = "\uF71E";
CPF28FunctionKey = "\uF71F";
CPF29FunctionKey = "\uF720";
CPF30FunctionKey = "\uF721";
CPF31FunctionKey = "\uF722";
CPF32FunctionKey = "\uF723";
CPF33FunctionKey = "\uF724";
CPF34FunctionKey = "\uF725";
CPF35FunctionKey = "\uF726";
CPInsertFunctionKey = "\uF727";
CPDeleteFunctionKey = "\uF728";
CPHomeFunctionKey = "\uF729";
CPBeginFunctionKey = "\uF72A";
CPEndFunctionKey = "\uF72B";
CPPageUpFunctionKey = "\uF72C";
CPPageDownFunctionKey = "\uF72D";
CPPrintScreenFunctionKey = "\uF72E";
CPScrollLockFunctionKey = "\uF72F";
CPPauseFunctionKey = "\uF730";
CPSysReqFunctionKey = "\uF731";
CPBreakFunctionKey = "\uF732";
CPResetFunctionKey = "\uF733";
CPStopFunctionKey = "\uF734";
CPMenuFunctionKey = "\uF735";
CPUserFunctionKey = "\uF736";
CPSystemFunctionKey = "\uF737";
CPPrintFunctionKey = "\uF738";
CPClearLineFunctionKey = "\uF739";
CPClearDisplayFunctionKey = "\uF73A";
CPInsertLineFunctionKey = "\uF73B";
CPDeleteLineFunctionKey = "\uF73C";
CPInsertCharFunctionKey = "\uF73D";
CPDeleteCharFunctionKey = "\uF73E";
CPPrevFunctionKey = "\uF73F";
CPNextFunctionKey = "\uF740";
CPSelectFunctionKey = "\uF741";
CPExecuteFunctionKey = "\uF742";
CPUndoFunctionKey = "\uF743";
CPRedoFunctionKey = "\uF744";
CPFindFunctionKey = "\uF745";
CPHelpFunctionKey = "\uF746";
CPModeSwitchFunctionKey = "\uF747";
CPEscapeFunctionKey = "\u001B";
CPSpaceFunctionKey = "\u0020";
CPDOMEventDoubleClick = "dblclick";
CPDOMEventMouseDown = "mousedown";
CPDOMEventMouseUp = "mouseup";
CPDOMEventMouseMoved = "mousemove";
CPDOMEventMouseDragged = "mousedrag";
CPDOMEventKeyUp = "keyup";
CPDOMEventKeyDown = "keydown";
CPDOMEventKeyPress = "keypress";
CPDOMEventCopy = "copy";
CPDOMEventPaste = "paste";
CPDOMEventScrollWheel = "mousewheel";
CPDOMEventTouchStart = "touchstart";
CPDOMEventTouchMove = "touchmove";
CPDOMEventTouchEnd = "touchend";
CPDOMEventTouchCancel = "touchcancel";
p;14;CPFlashMovie.jt;1736;@STATIC;1.0;I;21;Foundation/CPObject.jt;1691;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPFlashMovie"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_filename")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFile:"), function $CPFlashMovie__initWithFile_(self, _cmd, aFilename)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPFlashMovie").super_class }, "init");
    if (self)
        self._filename = aFilename;
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("filename"), function $CPFlashMovie__filename(self, _cmd)
{
    return self._filename;
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("flashMovieWithFile:"), function $CPFlashMovie__flashMovieWithFile_(self, _cmd, aFilename)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithFile:", aFilename);
}
,["id","CPString"])]);
}var CPFlashMovieFilenameKey = "CPFlashMovieFilenameKey";
{
var the_class = objj_getClass("CPFlashMovie")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPFlashMovie\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPFlashMovie__initWithCoder_(self, _cmd, aCoder)
{
    self._filename = objj_msgSend(aCoder, "decodeObjectForKey:", CPFlashMovieFilenameKey);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPFlashMovie__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._filename, CPFlashMovieFilenameKey);
}
,["void","CPCoder"])]);
}p;13;CPFlashView.jt;7085;@STATIC;1.0;i;14;CPFlashMovie.ji;8;CPView.jt;7035;objj_executeFile("CPFlashMovie.j", YES);objj_executeFile("CPView.j", YES);var IEFlashCLSID = "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000";
{var the_class = objj_allocateClassPair(CPView, "CPFlashView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_flashMovie"), new objj_ivar("_params"), new objj_ivar("_paramElements"), new objj_ivar("_DOMParamElement"), new objj_ivar("_DOMObjectElement")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPFlashView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPFlashView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        if (!CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
        {
            self._DOMObjectElement = document.createElement("object");
            self._DOMObjectElement.id = objj_msgSend(self, "elementID");
            self._DOMObjectElement.width = "100%";
            self._DOMObjectElement.height = "100%";
            self._DOMObjectElement.style.top = "0px";
            self._DOMObjectElement.style.left = "0px";
            self._DOMObjectElement.type = "application/x-shockwave-flash";
            self._DOMParamElement = document.createElement("param");
            self._DOMParamElement.name = "movie";
            self._DOMObjectElement.appendChild(self._DOMParamElement);
            self._DOMElement.appendChild(self._DOMObjectElement);
        }
        else
            objj_msgSend(self, "_rebuildIEObjects");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setFlashMovie:"), function $CPFlashView__setFlashMovie_(self, _cmd, aFlashMovie)
{
    if (self._flashMovie == aFlashMovie)
        return;
    self._flashMovie = aFlashMovie;
    if (!CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
    {
        self._DOMParamElement.value = objj_msgSend(aFlashMovie, "filename");
        self._DOMObjectElement.data = objj_msgSend(aFlashMovie, "filename");
    }
    else
        objj_msgSend(self, "_rebuildIEObjects");
}
,["void","CPFlashMovie"]), new objj_method(sel_getUid("flashMovie"), function $CPFlashView__flashMovie(self, _cmd)
{
    return self._flashMovie;
}
,["CPFlashMovie"]), new objj_method(sel_getUid("setFlashVars:"), function $CPFlashView__setFlashVars_(self, _cmd, aDictionary)
{
    var varString = "",
        enumerator = objj_msgSend(aDictionary, "keyEnumerator"),
        key;
    if (key = objj_msgSend(enumerator, "nextObject"))
        varString = objj_msgSend(varString, "stringByAppendingFormat:", "%@=%@", key, objj_msgSend(aDictionary, "objectForKey:", key));
    while (key = objj_msgSend(enumerator, "nextObject"))
        varString = objj_msgSend(varString, "stringByAppendingFormat:", "&%@=%@", key, objj_msgSend(aDictionary, "objectForKey:", key));
    if (!self._params)
        self._params = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    objj_msgSend(self._params, "setObject:forKey:", varString, "flashvars");
    objj_msgSend(self, "setParameters:", self._params);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("flashVars"), function $CPFlashView__flashVars(self, _cmd)
{
    return objj_msgSend(self._params, "objectForKey:", "flashvars");
}
,["CPDictionary"]), new objj_method(sel_getUid("setParameters:"), function $CPFlashView__setParameters_(self, _cmd, aDictionary)
{
    if (self._paramElements && !CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
    {
        var elements = objj_msgSend(self._paramElements, "allValues"),
            count = objj_msgSend(elements, "count");
        for (var i = 0; i < count; i++)
            self._DOMObjectElement.removeChild(objj_msgSend(elements, "objectAtIndex:", i));
    }
    if (!self._params)
        self._params = aDictionary;
    else
        objj_msgSend(self._params, "addEntriesFromDictionary:", aDictionary);
    if (!CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
    {
        self._paramElements = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        var enumerator = objj_msgSend(self._params, "keyEnumerator"),
            key;
        while (self._DOMObjectElement && (key = objj_msgSend(enumerator, "nextObject")) !== nil)
        {
            var param = document.createElement("param");
            param.name = key;
            param.value = objj_msgSend(self._params, "objectForKey:", key);
            self._DOMObjectElement.appendChild(param);
            objj_msgSend(self._paramElements, "setObject:forKey:", param, key);
        }
    }
    else
        objj_msgSend(self, "_rebuildIEObjects");
}
,["void","CPDictionary"]), new objj_method(sel_getUid("parameters"), function $CPFlashView__parameters(self, _cmd)
{
    return self._params;
}
,["CPDictionary"]), new objj_method(sel_getUid("_rebuildIEObjects"), function $CPFlashView___rebuildIEObjects(self, _cmd)
{
    self._DOMElement.innerHTML = "";
    if (!objj_msgSend(self._flashMovie, "filename"))
        return;
    var paramString = objj_msgSend(CPString, "stringWithFormat:", "<param name='movie' value='%@' />", objj_msgSend(self._flashMovie, "filename")),
        paramEnumerator = objj_msgSend(self._params, "keyEnumerator"),
        key;
    while ((key = objj_msgSend(paramEnumerator, "nextObject")) !== nil)
        paramString = objj_msgSend(paramString, "stringByAppendingFormat:", "<param name='%@' value='%@' />", key, objj_msgSend(self._params, "objectForKey:", key));
    self._DOMObjectElement = document.createElement("object");
    self._DOMElement.appendChild(self._DOMObjectElement);
    self._DOMObjectElement.outerHTML = objj_msgSend(CPString, "stringWithFormat:", "<object id=%@ classid=%@ width=%@ height=%@>%@</object>", objj_msgSend(self, "elementID"), IEFlashCLSID, CGRectGetWidth(objj_msgSend(self, "bounds")), CGRectGetHeight(objj_msgSend(self, "bounds")), paramString);
}
,["void"]), new objj_method(sel_getUid("elementID"), function $CPFlashView__elementID(self, _cmd)
{
    return "CPFV_" + objj_msgSend(self, "UID");
}
,["CPString"]), new objj_method(sel_getUid("mouseMoved:"), function $CPFlashView__mouseMoved_(self, _cmd, sommit)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","id"]), new objj_method(sel_getUid("mouseDragged:"), function $CPFlashView__mouseDragged_(self, _cmd, anEvent)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $CPFlashView__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $CPFlashView__mouseUp_(self, _cmd, anEvent)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"])]);
}p;8;CPFont.jt;14785;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPBundle.ji;8;CPView.jt;14701;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("CPView.j", YES);CPFontDefaultSystemFontFace = "Arial, sans-serif";
CPFontDefaultSystemFontSize = 12;
CPFontCurrentSystemSize = -1;
_CPFontSystemFacePlaceholder = "_CPFontSystemFacePlaceholder";
var _CPFontCache = {},
    _CPSystemFontCache = {},
    _CPFontSystemFontFace = CPFontDefaultSystemFontFace,
    _CPFontSystemFontSize = 12,
    _CPFontFallbackFaces = CPFontDefaultSystemFontFace.split(", "),
    _CPFontStripRegExp = new RegExp("(^\\s*[\"']?|[\"']?\\s*$)", "g");
{var the_class = objj_allocateClassPair(CPObject, "CPFont"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_name"), new objj_ivar("_size"), new objj_ivar("_ascender"), new objj_ivar("_descender"), new objj_ivar("_lineHeight"), new objj_ivar("_isBold"), new objj_ivar("_isItalic"), new objj_ivar("_isSystem"), new objj_ivar("_cssString")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isBold"), function $CPFont__isBold(self, _cmd)
{
    return self._isBold;
}
,["BOOL"]), new objj_method(sel_getUid("isItalic"), function $CPFont__isItalic(self, _cmd)
{
    return self._isItalic;
}
,["BOOL"]), new objj_method(sel_getUid("isSystem"), function $CPFont__isSystem(self, _cmd)
{
    return self._isSystem;
}
,["BOOL"]), new objj_method(sel_getUid("_initWithName:size:bold:italic:system:"), function $CPFont___initWithName_size_bold_italic_system_(self, _cmd, aName, aSize, isBold, isItalic, isSystem)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPFont").super_class }, "init");
    if (self)
    {
        self._size = aSize;
        self._ascender = 0;
        self._descender = 0;
        self._lineHeight = 0;
        self._isBold = isBold;
        self._isItalic = isItalic;
        self._isSystem = isSystem;
        if (isSystem)
        {
            self._name = aName;
            self._cssString = _CPFontCreateCSSString(_CPFontSystemFontFace, self._size, self._isBold, self._isItalic);
            _CPSystemFontCache[String(self._size) + (self._isBold ? "b" : "")] = self;
        }
        else
        {
            self._name = (_CPFontNormalizedNameArray(aName)).join(", ");
            self._cssString = _CPFontCreateCSSString(self._name, self._size, self._isBold, self._isItalic);
            _CPFontCache[self._cssString] = self;
        }
    }
    return self;
}
,["id","CPString","float","BOOL","BOOL","BOOL"]), new objj_method(sel_getUid("ascender"), function $CPFont__ascender(self, _cmd)
{
    var font = self._isSystem ? _CPSystemFontCache[String(self._size) + (self._isBold ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, self._size, self._isBold, NO, YES) : self;
    if (!font._ascender)
        objj_msgSend(font, "_getMetrics");
    return font._ascender;
}
,["float"]), new objj_method(sel_getUid("descender"), function $CPFont__descender(self, _cmd)
{
    var font = self._isSystem ? _CPSystemFontCache[String(self._size) + (self._isBold ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, self._size, self._isBold, NO, YES) : self;
    if (!font._descender)
        objj_msgSend(font, "_getMetrics");
    return font._descender;
}
,["float"]), new objj_method(sel_getUid("defaultLineHeightForFont"), function $CPFont__defaultLineHeightForFont(self, _cmd)
{
    var font = self._isSystem ? _CPSystemFontCache[String(self._size) + (self._isBold ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, self._size, self._isBold, NO, YES) : self;
    if (!font._lineHeight)
        objj_msgSend(font, "_getMetrics");
    return font._lineHeight;
}
,["float"]), new objj_method(sel_getUid("size"), function $CPFont__size(self, _cmd)
{
    return self._size <= 0 ? _CPFontSystemFontSize : self._size;
}
,["float"]), new objj_method(sel_getUid("cssString"), function $CPFont__cssString(self, _cmd)
{
    var font = self._isSystem ? _CPSystemFontCache[String(self._size) + (self._isBold ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, self._size, self._isBold, NO, YES) : self;
    return font._cssString;
}
,["CPString"]), new objj_method(sel_getUid("familyName"), function $CPFont__familyName(self, _cmd)
{
    if (self._isSystem)
        return _CPFontSystemFontFace;
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("isSystemSize"), function $CPFont__isSystemSize(self, _cmd)
{
    return self._size <= 0;
}
,["BOOL"]), new objj_method(sel_getUid("isEqual:"), function $CPFont__isEqual_(self, _cmd, anObject)
{
    return objj_msgSend(anObject, "isKindOfClass:", objj_msgSend(CPFont, "class")) && objj_msgSend(anObject, "cssString") === self._cssString;
}
,["BOOL","id"]), new objj_method(sel_getUid("description"), function $CPFont__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "%@ %@", objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPFont").super_class }, "description"), objj_msgSend(self, "cssString"));
}
,["CPString"]), new objj_method(sel_getUid("copy"), function $CPFont__copy(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", self._name, self._size, self._isBold, self._isItalic, self._isSystem);
}
,["id"]), new objj_method(sel_getUid("_getMetrics"), function $CPFont___getMetrics(self, _cmd)
{
    var metrics = objj_msgSend(CPString, "metricsOfFont:", self);
    self._ascender = objj_msgSend(metrics, "objectForKey:", "ascender");
    self._descender = objj_msgSend(metrics, "objectForKey:", "descender");
    self._lineHeight = objj_msgSend(metrics, "objectForKey:", "lineHeight");
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPFont__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPFont, "class"))
        return;
    var systemFontFace = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPSystemFontFace");
    if (!systemFontFace)
        systemFontFace = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class")), "objectForInfoDictionaryKey:", "CPSystemFontFace");
    if (systemFontFace)
        _CPFontSystemFontFace = (_CPFontNormalizedNameArray(systemFontFace)).join(", ");
    var systemFontSize = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPSystemFontSize");
    if (!systemFontSize)
        systemFontSize = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class")), "objectForInfoDictionaryKey:", "CPSystemFontSize");
    if (systemFontSize)
        _CPFontSystemFontSize = systemFontSize;
}
,["void"]), new objj_method(sel_getUid("systemFontFace"), function $CPFont__systemFontFace(self, _cmd)
{
    return _CPFontSystemFontFace;
}
,["CPString"]), new objj_method(sel_getUid("setSystemFontFace:"), function $CPFont__setSystemFontFace_(self, _cmd, aFace)
{
    var normalizedFaces = (_CPFontNormalizedNameArray(aFace)).join(", ");
    if (normalizedFaces === _CPFontSystemFontFace)
        return;
    objj_msgSend(self, "_invalidateSystemFontCache");
    _CPFontSystemFontFace = aFace;
}
,["CPString","CPString"]), new objj_method(sel_getUid("systemFontSize"), function $CPFont__systemFontSize(self, _cmd)
{
    return _CPFontSystemFontSize;
}
,["float"]), new objj_method(sel_getUid("systemFontSizeForControlSize:"), function $CPFont__systemFontSizeForControlSize_(self, _cmd, aSize)
{
    switch(aSize) {
    case CPSmallControlSize:
        return _CPFontSystemFontSize - 1;
    case CPMiniControlSize:
        return _CPFontSystemFontSize - 2;
    case CPRegularControlSize:
default:
        return _CPFontSystemFontSize;
    }
}
,["float","CPControlSize"]), new objj_method(sel_getUid("setSystemFontSize:"), function $CPFont__setSystemFontSize_(self, _cmd, size)
{
    if (size > 0 && size !== _CPFontSystemFontSize)
    {
        objj_msgSend(self, "_invalidateSystemFontCache");
        _CPFontSystemFontSize = size;
    }
}
,["float","float"]), new objj_method(sel_getUid("_invalidateSystemFontCache"), function $CPFont___invalidateSystemFontCache(self, _cmd)
{
    var systemSize = String(_CPFontSystemFontSize),
        currentSize = String(CPFontCurrentSystemSize);
    for (var key in _CPSystemFontCache)
    {
        if (_CPSystemFontCache.hasOwnProperty(key) && (key.indexOf(systemSize) === 0 || key.indexOf(currentSize) === 0))
        {
            delete _CPSystemFontCache[key];
        }
    }
}
,["void"]), new objj_method(sel_getUid("fontWithName:size:"), function $CPFont__fontWithName_size_(self, _cmd, aName, aSize)
{
    return _CPFontCache[_CPFontCreateCSSString((_CPFontNormalizedNameArray(aName)).join(", "), aSize <= 0 ? _CPFontSystemFontSize : aSize, NO, NO)] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", aName, aSize <= 0 ? _CPFontSystemFontSize : aSize, NO, NO, NO);
}
,["CPFont","CPString","float"]), new objj_method(sel_getUid("fontWithName:size:italic:"), function $CPFont__fontWithName_size_italic_(self, _cmd, aName, aSize, italic)
{
    return _CPFontCache[_CPFontCreateCSSString((_CPFontNormalizedNameArray(aName)).join(", "), aSize <= 0 ? _CPFontSystemFontSize : aSize, NO, italic)] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", aName, aSize <= 0 ? _CPFontSystemFontSize : aSize, NO, italic, NO);
}
,["CPFont","CPString","float","BOOL"]), new objj_method(sel_getUid("boldFontWithName:size:"), function $CPFont__boldFontWithName_size_(self, _cmd, aName, aSize)
{
    return _CPFontCache[_CPFontCreateCSSString((_CPFontNormalizedNameArray(aName)).join(", "), aSize <= 0 ? _CPFontSystemFontSize : aSize, YES, NO)] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", aName, aSize <= 0 ? _CPFontSystemFontSize : aSize, YES, NO, NO);
}
,["CPFont","CPString","float"]), new objj_method(sel_getUid("boldFontWithName:size:italic:"), function $CPFont__boldFontWithName_size_italic_(self, _cmd, aName, aSize, italic)
{
    return _CPFontCache[_CPFontCreateCSSString((_CPFontNormalizedNameArray(aName)).join(", "), aSize <= 0 ? _CPFontSystemFontSize : aSize, YES, italic)] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", aName, aSize <= 0 ? _CPFontSystemFontSize : aSize, YES, italic, NO);
}
,["CPFont","CPString","float","BOOL"]), new objj_method(sel_getUid("_fontWithName:size:bold:italic:"), function $CPFont___fontWithName_size_bold_italic_(self, _cmd, aName, aSize, bold, italic)
{
    return _CPFontCache[_CPFontCreateCSSString((_CPFontNormalizedNameArray(aName)).join(", "), aSize <= 0 ? _CPFontSystemFontSize : aSize, bold, italic)] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", aName, aSize <= 0 ? _CPFontSystemFontSize : aSize, bold, italic, NO);
}
,["CPFont","CPString","float","BOOL","BOOL"]), new objj_method(sel_getUid("systemFontOfSize:"), function $CPFont__systemFontOfSize_(self, _cmd, aSize)
{
    return _CPSystemFontCache[String(aSize === 0 ? _CPFontSystemFontSize : aSize) + (NO ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, aSize === 0 ? _CPFontSystemFontSize : aSize, NO, NO, YES);
}
,["CPFont","CGSize"]), new objj_method(sel_getUid("boldSystemFontOfSize:"), function $CPFont__boldSystemFontOfSize_(self, _cmd, aSize)
{
    return _CPSystemFontCache[String(aSize === 0 ? _CPFontSystemFontSize : aSize) + (YES ? "b" : "")] || objj_msgSend(objj_msgSend(CPFont, "alloc"), "_initWithName:size:bold:italic:system:", _CPFontSystemFacePlaceholder, aSize === 0 ? _CPFontSystemFontSize : aSize, YES, NO, YES);
}
,["CPFont","CGSize"])]);
}var CPFontNameKey = "CPFontNameKey",
    CPFontSizeKey = "CPFontSizeKey",
    CPFontIsBoldKey = "CPFontIsBoldKey",
    CPFontIsItalicKey = "CPFontIsItalicKey",
    CPFontIsSystemKey = "CPFontIsSystemKey";
{
var the_class = objj_getClass("CPFont")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPFont\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPFont__initWithCoder_(self, _cmd, aCoder)
{
    var fontName = objj_msgSend(aCoder, "decodeObjectForKey:", CPFontNameKey),
        size = objj_msgSend(aCoder, "decodeFloatForKey:", CPFontSizeKey),
        isBold = objj_msgSend(aCoder, "decodeBoolForKey:", CPFontIsBoldKey),
        isItalic = objj_msgSend(aCoder, "decodeBoolForKey:", CPFontIsItalicKey),
        isSystem = objj_msgSend(aCoder, "decodeBoolForKey:", CPFontIsSystemKey);
    return objj_msgSend(self, "_initWithName:size:bold:italic:system:", fontName, size, isBold, isItalic, isSystem);
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPFont__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._name, CPFontNameKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._size, CPFontSizeKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isBold, CPFontIsBoldKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isItalic, CPFontIsItalicKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isSystem, CPFontIsSystemKey);
}
,["void","CPCoder"])]);
}var _CPFontCreateCSSString = function(aName, aSize, isBold, isItalic)
{
    var properties = (isItalic ? "italic " : "") + (isBold ? "bold " : "") + (aSize <= 0 ? _CPFontSystemFontSize : aSize) + "px ";
    return properties + _CPFontConcatNameWithFallback(aName);
};
var _CPFontConcatNameWithFallback = function(aName)
{
    var names = _CPFontNormalizedNameArray(aName),
        fallbackFaces = _CPFontFallbackFaces.slice(0);
    for (var i = 0; i < names.length; ++i)
    {
        for (var j = 0; j < fallbackFaces.length; ++j)
        {
            if (names[i].toLowerCase() === fallbackFaces[j].toLowerCase())
            {
                fallbackFaces.splice(j, 1);
                break;
            }
        }
        if (names[i].indexOf(" ") > 0)
            names[i] = '"' + names[i] + '"';
    }
    return (names.concat(fallbackFaces)).join(", ");
};
var _CPFontNormalizedNameArray = function(aName)
{
    var names = aName.split(",");
    for (var i = 0; i < names.length; ++i)
        names[i] = names[i].replace(_CPFontStripRegExp, "");
    return names;
};
p;15;CPFontManager.jt;9870;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPFont.jt;9813;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPFont.j", YES);CPItalicFontMask = 1 << 0;
CPBoldFontMask = 1 << 1;
CPUnboldFontMask = 1 << 2;
CPNonStandardCharacterSetFontMask = 1 << 3;
CPNarrowFontMask = 1 << 4;
CPExpandedFontMask = 1 << 5;
CPCondensedFontMask = 1 << 6;
CPSmallCapsFontMask = 1 << 7;
CPPosterFontMask = 1 << 8;
CPCompressedFontMask = 1 << 9;
CPFixedPitchFontMask = 1 << 10;
CPUnitalicFontMask = 1 << 24;
var CPSharedFontManager = nil,
    CPFontManagerFactory = Nil;
{var the_class = objj_allocateClassPair(CPObject, "CPFontManager"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_availableFonts"), new objj_ivar("_target"), new objj_ivar("_action"), new objj_ivar("_delegate"), new objj_ivar("_selectedFont"), new objj_ivar("_multiple"), new objj_ivar("_activeChange")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("target"), function $CPFontManager__target(self, _cmd)
{
    return self._target;
}
,["id"]), new objj_method(sel_getUid("setTarget:"), function $CPFontManager__setTarget_(self, _cmd, newValue)
{
    self._target = newValue;
}
,["void","id"]), new objj_method(sel_getUid("action"), function $CPFontManager__action(self, _cmd)
{
    return self._action;
}
,["SEL"]), new objj_method(sel_getUid("setAction:"), function $CPFontManager__setAction_(self, _cmd, newValue)
{
    self._action = newValue;
}
,["void","SEL"]), new objj_method(sel_getUid("delegate"), function $CPFontManager__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPFontManager__setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("isMultiple"), function $CPFontManager__isMultiple(self, _cmd)
{
    return self._multiple;
}
,["BOOL"]), new objj_method(sel_getUid("setMultiple:"), function $CPFontManager__setMultiple_(self, _cmd, newValue)
{
    self._multiple = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("init"), function $CPFontManager__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPFontManager").super_class }, "init"))
    {
        self._action = sel_getUid("changeFont:");
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("availableFonts"), function $CPFontManager__availableFonts(self, _cmd)
{
    if (!self._availableFonts)
    {
        self._availableFonts = [];
        _CPFontDetectSpan = document.createElement("span");
        _CPFontDetectSpan.fontSize = "24px";
        _CPFontDetectSpan.appendChild(document.createTextNode("mmmmmmmmmml"));
        var div = document.createElement("div");
        div.style.position = "absolute";
        div.style.top = "-1000px";
        div.appendChild(_CPFontDetectSpan);
        (document.getElementsByTagName("body"))[0].appendChild(div);
        _CPFontDetectReferenceFonts = _CPFontDetectPickTwoDifferentFonts(["monospace", "serif", "sans-serif", "cursive"]);
        for (var i = 0; i < _CPFontDetectAllFonts.length; i++)
        {
            var available = _CPFontDetectFontAvailable(_CPFontDetectAllFonts[i]);
            if (available)
                self._availableFonts.push(_CPFontDetectAllFonts[i]);
        }
    }
    return self._availableFonts;
}
,["CPArray"]), new objj_method(sel_getUid("fontWithNameIsAvailable:"), function $CPFontManager__fontWithNameIsAvailable_(self, _cmd, aFontName)
{
    return _CPFontDetectFontAvailable(aFontName);
}
,["CPArray","CPString"]), new objj_method(sel_getUid("setSelectedFont:isMultiple:"), function $CPFontManager__setSelectedFont_isMultiple_(self, _cmd, aFont, aFlag)
{
    self._selectedFont = aFont;
    self._multiple = aFlag;
}
,["void","CPFont","BOOL"]), new objj_method(sel_getUid("selectedFont"), function $CPFontManager__selectedFont(self, _cmd)
{
    return self._selectedFont;
}
,["CPFont"]), new objj_method(sel_getUid("weightOfFont:"), function $CPFontManager__weightOfFont_(self, _cmd, aFont)
{
    return objj_msgSend(aFont, "isBold") ? 9 : 5;
}
,["int","CPFont"]), new objj_method(sel_getUid("traitsOfFont:"), function $CPFontManager__traitsOfFont_(self, _cmd, aFont)
{
    return (objj_msgSend(aFont, "isBold") ? CPBoldFontMask : 0) | (objj_msgSend(aFont, "isItalic") ? CPItalicFontMask : 0);
}
,["CPFontTraitMask","CPFont"]), new objj_method(sel_getUid("convertFont:"), function $CPFontManager__convertFont_(self, _cmd, aFont)
{
    if (!self._activeChange)
        return aFont;
    var addTraits = objj_msgSend(self._activeChange, "valueForKey:", "addTraits");
    if (addTraits)
        aFont = objj_msgSend(self, "convertFont:toHaveTrait:", aFont, addTraits);
    return aFont;
}
,["CPFont","CPFont"]), new objj_method(sel_getUid("convertFont:toHaveTrait:"), function $CPFontManager__convertFont_toHaveTrait_(self, _cmd, aFont, addTraits)
{
    if (!aFont)
        return nil;
    var shouldBeBold = (objj_msgSend(aFont, "isBold") || addTraits & CPBoldFontMask) && !(addTraits & CPUnboldFontMask),
        shouldBeItalic = (objj_msgSend(aFont, "isItalic") || addTraits & CPItalicFontMask) && !(addTraits & CPUnitalicFontMask),
        shouldBeSize = objj_msgSend(aFont, "size");
    aFont = objj_msgSend(CPFont, "_fontWithName:size:bold:italic:", objj_msgSend(aFont, "familyName"), shouldBeSize, shouldBeBold, shouldBeItalic) || aFont;
    return aFont;
}
,["CPFont","CPFont","CPFontTraitMask"]), new objj_method(sel_getUid("convertFont:toFace:"), function $CPFontManager__convertFont_toFace_(self, _cmd, aFont, aTypeface)
{
    if (!aFont)
        return nil;
    var shouldBeBold = objj_msgSend(aFont, "isBold"),
        shouldBeItalic = objj_msgSend(aFont, "isItalic"),
        shouldBeSize = objj_msgSend(aFont, "size");
    aFont = objj_msgSend(CPFont, "_fontWithName:size:bold:italic:", aTypeface, shouldBeSize, shouldBeBold, shouldBeItalic) || aFont;
    return aFont;
}
,["CPFont","CPFont","CPString"]), new objj_method(sel_getUid("addFontTrait:"), function $CPFontManager__addFontTrait_(self, _cmd, sender)
{
    var tag = objj_msgSend(sender, "tag");
    self._activeChange = tag === nil ? objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init") : objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", tag, "addTraits");
    objj_msgSend(self, "sendAction");
}
,["id","id"]), new objj_method(sel_getUid("sendAction"), function $CPFontManager__sendAction(self, _cmd)
{
    return objj_msgSend(CPApp, "sendAction:to:from:", self._action, self._target, self);
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedFontManager"), function $CPFontManager__sharedFontManager(self, _cmd)
{
    if (!CPSharedFontManager)
        CPSharedFontManager = objj_msgSend(objj_msgSend(CPFontManagerFactory, "alloc"), "init");
    return CPSharedFontManager;
}
,["CPFontManager"]), new objj_method(sel_getUid("setFontManagerFactory:"), function $CPFontManager__setFontManagerFactory_(self, _cmd, aClass)
{
    CPFontManagerFactory = aClass;
}
,["void","Class"])]);
}var _CPFontDetectSpan,
    _CPFontDetectReferenceFonts,
    _CPFontDetectAllFonts = ["American Typewriter", "Apple Chancery", "Arial", "Arial Black", "Arial Narrow", "Arial Rounded MT Bold", "Arial Unicode MS", "Big Caslon", "Bitstream Vera Sans", "Bitstream Vera Sans Mono", "Bitstream Vera Serif", "Brush Script MT", "Cambria", "Caslon", "Castellar", "Cataneo BT", "Centaur", "Century Gothic", "Century Schoolbook", "Century Schoolbook L", "Comic Sans", "Comic Sans MS", "Consolas", "Constantia", "Cooper Black", "Copperplate", "Copperplate Gothic Bold", "Copperplate Gothic Light", "Corbel", "Courier", "Courier New", "Futura", "Geneva", "Georgia", "Georgia Ref", "Geeza Pro", "Gigi", "Gill Sans", "Gill Sans MT", "Gill Sans MT Condensed", "Gill Sans MT Ext Condensed Bold", "Gill Sans Ultra Bold", "Gill Sans Ultra Bold Condensed", "Helvetica", "Helvetica Narrow", "Helvetica Neue", "Herculanum", "High Tower Text", "Highlight LET", "Hoefler Text", "Impact", "Imprint MT Shadow", "Lucida", "Lucida Bright", "Lucida Calligraphy", "Lucida Console", "Lucida Fax", "Lucida Grande", "Lucida Handwriting", "Lucida Sans", "Lucida Sans Typewriter", "Lucida Sans Unicode", "Marker Felt", "Microsoft Sans Serif", "Milano LET", "Minion Web", "MisterEarl BT", "Mistral", "Monaco", "Monotype Corsiva", "Monotype.com", "New Century Schoolbook", "New York", "News Gothic MT", "Papyrus", "Tahoma", "Techno", "Tempus Sans ITC", "Terminal", "Textile", "Times", "Times New Roman", "Tiranti Solid LET", "Trebuchet MS", "Verdana", "Verdana Ref", "Zapfino"];
var _CPFontDetectFontAvailable = function(font)
{
    for (var i = 0; i < _CPFontDetectReferenceFonts.length; i++)
        if (_CPFontDetectCompareFonts(_CPFontDetectReferenceFonts[i], font))
            return true;
    return false;
};
var _CPFontDetectCache = {};
var _CPFontDetectCompareFonts = function(fontA, fontB)
{
    var a;
    if (_CPFontDetectCache[fontA])
        a = _CPFontDetectCache[fontA];
    else
    {
        _CPFontDetectSpan.style.fontFamily = '"' + fontA + '"';
        _CPFontDetectCache[fontA] = a = {w: _CPFontDetectSpan.offsetWidth, h: _CPFontDetectSpan.offsetHeight};
    }
    _CPFontDetectSpan.style.fontFamily = '"' + fontB + '", "' + fontA + '"';
    var bWidth = _CPFontDetectSpan.offsetWidth,
        bHeight = _CPFontDetectSpan.offsetHeight;
    return a.w != bWidth || a.h != bHeight;
};
var _CPFontDetectPickTwoDifferentFonts = function(candidates)
{
    for (var i = 0; i < candidates.length; i++)
        for (var j = 0; j < i; j++)
            if (_CPFontDetectCompareFonts(candidates[i], candidates[j]))
                return [candidates[i], candidates[j]];
    return [candidates[0]];
};
objj_msgSend(CPFontManager, "setFontManagerFactory:", objj_msgSend(CPFontManager, "class"));
p;12;CPGradient.jt;5241;@STATIC;1.0;I;21;Foundation/CPObject.jI;24;Foundation/CPException.jI;27;Foundation/CPMutableArray.ji;9;CGColor.ji;14;CGColorSpace.ji;12;CGGradient.ji;14;CPBezierPath.ji;19;CPGraphicsContext.jt;5043;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPException.j", NO);objj_executeFile("Foundation/CPMutableArray.j", NO);objj_executeFile("CGColor.j", YES);objj_executeFile("CGColorSpace.j", YES);objj_executeFile("CGGradient.j", YES);objj_executeFile("CPBezierPath.j", YES);objj_executeFile("CPGraphicsContext.j", YES);CPGradientDrawsBeforeStartingLocation = kCGGradientDrawsBeforeStartLocation;
CPGradientDrawsAfterEndingLocation = kCGGradientDrawsAfterEndLocation;
{var the_class = objj_allocateClassPair(CPObject, "CPGradient"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_gradient")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithStartingColor:endingColor:"), function $CPGradient__initWithStartingColor_endingColor_(self, _cmd, startingColor, endingColor)
{
    return objj_msgSend(self, "initWithColors:", [startingColor, endingColor]);
}
,["id","CPColor","CPColor"]), new objj_method(sel_getUid("initWithColors:"), function $CPGradient__initWithColors_(self, _cmd, someColors)
{
    var count = objj_msgSend(someColors, "count");
    if (count < 2)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "at least 2 colors required");
    var distance = 1.0 / (count - 1),
        locations = objj_msgSend(CPMutableArray, "array"),
        location = 0.0;
    for (var i = 0; i < count; i++)
    {
        objj_msgSend(locations, "addObject:", location);
        location += distance;
    }
    return objj_msgSend(self, "initWithColors:atLocations:colorSpace:", someColors, locations, nil);
}
,["id","CPArray"]), new objj_method(sel_getUid("initWithColors:atLocations:colorSpace:"), function $CPGradient__initWithColors_atLocations_colorSpace_(self, _cmd, someColors, someLocations, aColorSpace)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPGradient").super_class }, "init"))
    {
        var cgColors = [],
            count = objj_msgSend(someColors, "count"),
            colorSpace = objj_msgSend(aColorSpace, "CGColorSpace") || CGColorSpaceCreateDeviceRGB;
        for (var i = 0; i < count; i++)
            cgColors.push(CGColorCreate(colorSpace, objj_msgSend(someColors[i], "components")));
        self._gradient = CGGradientCreateWithColors(colorSpace, cgColors, someLocations);
    }
    return self;
}
,["id","CPArray","CPArray","CPColorSpace"]), new objj_method(sel_getUid("drawInRect:angle:"), function $CPGradient__drawInRect_angle_(self, _cmd, rect, angle)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSaveGState(ctx);
    CGContextClipToRect(ctx, rect);
    CGContextAddRect(ctx, rect);
    objj_msgSend(self, "_drawInRect:atAngle:", rect, angle);
    CGContextRestoreGState(ctx);
}
,["void","CGRect","float"]), new objj_method(sel_getUid("_drawInRect:atAngle:"), function $CPGradient___drawInRect_atAngle_(self, _cmd, rect, angle)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        startPoint,
        endPoint;
    angle = (angle % 360.0 + 360.0) % 360.0;
    if (angle < 90.0)
        startPoint = CGPointMake(CGRectGetMinX(rect), CGRectGetMinY(rect));
    else if (angle < 180.0)
        startPoint = CGPointMake(CGRectGetMaxX(rect), CGRectGetMinY(rect));
    else if (angle < 270.0)
        startPoint = CGPointMake(CGRectGetMaxX(rect), CGRectGetMaxY(rect));
    else
        startPoint = CGPointMake(CGRectGetMinX(rect), CGRectGetMaxY(rect));
    var radians = PI * angle / 180.0,
        length = ABS(CGRectGetWidth(rect) * COS(radians)) + ABS(CGRectGetHeight(rect) * SIN(radians));
    endPoint = CGPointMake(startPoint.x + length * COS(radians), startPoint.y + length * SIN(radians));
    objj_msgSend(self, "drawFromPoint:toPoint:options:", startPoint, endPoint, CPGradientDrawsBeforeStartingLocation | CPGradientDrawsAfterEndingLocation);
}
,["void","CGRect","float"]), new objj_method(sel_getUid("drawInBezierPath:angle:"), function $CPGradient__drawInBezierPath_angle_(self, _cmd, aPath, anAngle)
{
    objj_msgSend(CPGraphicsContext, "saveGraphicsState");
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextBeginPath(ctx);
    CGContextAddPath(ctx, aPath._path);
    CGContextSetLineWidth(ctx, objj_msgSend(aPath, "lineWidth"));
    CGContextClosePath(ctx);
    objj_msgSend(self, "_drawInRect:atAngle:", objj_msgSend(aPath, "bounds"), anAngle);
    objj_msgSend(CPGraphicsContext, "restoreGraphicsState");
}
,["void","CPBezierPath","float"]), new objj_method(sel_getUid("drawFromPoint:toPoint:options:"), function $CPGradient__drawFromPoint_toPoint_options_(self, _cmd, startingPoint, endingPoint, options)
{
    var ctx = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextDrawLinearGradient(ctx, self._gradient, startingPoint, endingPoint, options);
}
,["void","NSPoint","NSPoint","NSGradientDrawingOptions"])]);
}p;12;CPGraphics.jt;3002;@STATIC;1.0;i;9;CPColor.ji;19;CPGraphicsContext.jt;2946;objj_executeFile("CPColor.j", YES);objj_executeFile("CPGraphicsContext.j", YES);CPCalibratedWhiteColorSpace = "CalibratedWhiteColorSpace";
CPCalibratedBlackColorSpace = "CalibratedBlackColorSpace";
CPCalibratedRGBColorSpace = "CalibratedRGBColorSpace";
CPDeviceWhiteColorSpace = "DeviceWhiteColorSpace";
CPDeviceBlackColorSpace = "DeviceBlackColorSpace";
CPDeviceRGBColorSpace = "DeviceRGBColorSpace";
CPDeviceCMYKColorSpace = "DeviceCMYKColorSpace";
CPNamedColorSpace = "NamedColorSpace";
CPPatternColorSpace = "PatternColorSpace";
CPCustomColorSpace = "CustomColorSpace";
CPDrawTiledRects = function(boundsRect, clipRect, sides, grays)
{
    if (sides.length != grays.length)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "sides (length: " + sides.length + ") and grays (length: " + grays.length + ") must have the same length.");
    var colors = [];
    for (var i = 0; i < grays.length; ++i)
        colors.push(objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", grays[i], 1.0));
    return CPDrawColorTiledRects(boundsRect, clipRect, sides, colors);
}
CPDrawColorTiledRects = function(boundsRect, clipRect, sides, colors)
{
    if (sides.length != colors.length)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "sides (length: " + sides.length + ") and colors (length: " + colors.length + ") must have the same length.");
    var resultRect = CGRectMakeCopy(boundsRect),
        slice = CGRectMakeZero(),
        remainder = CGRectMakeZero(),
        context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSaveGState(context);
    CGContextSetLineWidth(context, 1.0);
    for (var sideIndex = 0; sideIndex < sides.length; ++sideIndex)
    {
        var side = sides[sideIndex];
        CGRectDivide(resultRect, slice, remainder, 1.0, side);
        resultRect = remainder;
        slice = CGRectIntersection(slice, clipRect);
        if (CGRectIsEmpty(slice))
            continue;
        var minX,
            maxX,
            minY,
            maxY;
        if (side == CPMinXEdge || side == CPMaxXEdge)
        {
            if (CGRectGetWidth(slice) < 1.0)
                continue;
            minX = CGRectGetMinX(slice) + 0.5;
            maxX = minX;
            minY = CGRectGetMinY(slice);
            maxY = CGRectGetMaxY(slice);
        }
        else
        {
            if (CGRectGetHeight(slice) < 1.0)
                continue;
            minX = CGRectGetMinX(slice);
            maxX = CGRectGetMaxX(slice);
            minY = CGRectGetMinY(slice) + 0.5;
            maxY = minY;
        }
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, minX, minY);
        CGContextAddLineToPoint(context, maxX, maxY);
        CGContextSetStrokeColor(context, colors[sideIndex]);
        CGContextStrokePath(context);
    }
    CGContextRestoreGState(context);
    return resultRect;
}
p;19;CPGraphicsContext.jt;2956;@STATIC;1.0;I;21;Foundation/CPObject.ji;11;CGContext.jt;2895;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CGContext.j", YES);var CPGraphicsContextCurrent = nil,
    CPGraphicsContextThreadStack = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPGraphicsContext"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_graphicsPort")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithGraphicsPort:"), function $CPGraphicsContext__initWithGraphicsPort_(self, _cmd, aGraphicsPort)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPGraphicsContext").super_class }, "init");
    if (self)
        self._graphicsPort = aGraphicsPort;
    return self;
}
,["id","CPContext"]), new objj_method(sel_getUid("graphicsPort"), function $CPGraphicsContext__graphicsPort(self, _cmd)
{
    return self._graphicsPort;
}
,["CGContext"]), new objj_method(sel_getUid("isFlipped"), function $CPGraphicsContext__isFlipped(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("saveGraphicsState"), function $CPGraphicsContext__saveGraphicsState(self, _cmd)
{
    CGContextSaveGState(self._graphicsPort);
}
,["void"]), new objj_method(sel_getUid("restoreGraphicsState"), function $CPGraphicsContext__restoreGraphicsState(self, _cmd)
{
    CGContextRestoreGState(self._graphicsPort);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("currentContext"), function $CPGraphicsContext__currentContext(self, _cmd)
{
    return CPGraphicsContextCurrent;
}
,["CPGraphicsContext"]), new objj_method(sel_getUid("setCurrentContext:"), function $CPGraphicsContext__setCurrentContext_(self, _cmd, aGraphicsContext)
{
    CPGraphicsContextCurrent = aGraphicsContext;
}
,["void","CPGraphicsContext"]), new objj_method(sel_getUid("saveGraphicsState"), function $CPGraphicsContext__saveGraphicsState(self, _cmd)
{
    if (!CPGraphicsContextCurrent)
        return;
    if (!CPGraphicsContextThreadStack)
        CPGraphicsContextThreadStack = objj_msgSend(CPMutableArray, "array");
    objj_msgSend(CPGraphicsContextThreadStack, "addObject:", CPGraphicsContextCurrent);
    objj_msgSend(CPGraphicsContextCurrent, "saveGraphicsState");
}
,["void"]), new objj_method(sel_getUid("restoreGraphicsState"), function $CPGraphicsContext__restoreGraphicsState(self, _cmd)
{
    var lastContext = objj_msgSend(CPGraphicsContextThreadStack, "lastObject");
    if (lastContext)
    {
        objj_msgSend(lastContext, "restoreGraphicsState");
        objj_msgSend(CPGraphicsContextThreadStack, "removeLastObject");
    }
}
,["void"]), new objj_method(sel_getUid("graphicsContextWithGraphicsPort:flipped:"), function $CPGraphicsContext__graphicsContextWithGraphicsPort_flipped_(self, _cmd, aContext, aFlag)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithGraphicsPort:", aContext);
}
,["CPGraphicsContext","CGContext","BOOL"])]);
}p;9;CPImage.jt;16859;@STATIC;1.0;I;21;Foundation/CPBundle.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.jI;21;Foundation/CPString.jI;19;Foundation/CPData.ji;12;CGGeometry.ji;17;CPCompatibility.jt;16633;objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPRunLoop.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("Foundation/CPData.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPCompatibility.j", YES);CPImageLoadStatusInitialized = 0;
CPImageLoadStatusLoading = 1;
CPImageLoadStatusCompleted = 2;
CPImageLoadStatusCancelled = 3;
CPImageLoadStatusInvalidData = 4;
CPImageLoadStatusUnexpectedEOF = 5;
CPImageLoadStatusReadError = 6;
CPImageDidLoadNotification = "CPImageDidLoadNotification";
CPImageNameColorPanel = "CPImageNameColorPanel";
CPImageNameColorPanelHighlighted = "CPImageNameColorPanelHighlighted";
var imagesForNames = {},
    AppKitImageForNames = {},
    ImageDescriptionFormat = "%s {\n   filename: \"%s\",\n   size: { width:%f, height:%f }\n}";
AppKitImageForNames[CPImageNameColorPanel] = CGSizeMake(26.0, 29.0);
AppKitImageForNames[CPImageNameColorPanelHighlighted] = CGSizeMake(26.0, 29.0);
CPImageInBundle = function()
{
    var filename = arguments[0],
        size = nil,
        bundle = nil;
    if (typeof arguments[1] === "number")
    {
        if (arguments[1] !== nil && arguments[1] !== undefined)
            size = CGSizeMake(arguments[1], arguments[2]);
        bundle = arguments[3];
    }
    else if (typeof arguments[1] === "object")
    {
        size = arguments[1];
        bundle = arguments[2];
    }
    if (!bundle)
        bundle = objj_msgSend(CPBundle, "mainBundle");
    if (size)
        return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(bundle, "pathForResource:", filename), size);
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:", objj_msgSend(bundle, "pathForResource:", filename));
}
CPAppKitImage = function(aFilename, aSize)
{
    return CPImageInBundle(aFilename, aSize, objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class")));
}
{var the_class = objj_allocateClassPair(CPObject, "CPImage"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_size"), new objj_ivar("_filename"), new objj_ivar("_name"), new objj_ivar("_delegate"), new objj_ivar("_loadStatus"), new objj_ivar("_image")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPImage__init(self, _cmd)
{
    return objj_msgSend(self, "initByReferencingFile:size:", "", CGSizeMake(-1, -1));
}
,["id"]), new objj_method(sel_getUid("initByReferencingFile:size:"), function $CPImage__initByReferencingFile_size_(self, _cmd, aFilename, aSize)
{
    if (aFilename === undefined || aFilename === nil)
        return nil;
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImage").super_class }, "init");
    if (self)
    {
        self._size = CGSizeMakeCopy(aSize);
        self._filename = aFilename;
        self._loadStatus = CPImageLoadStatusInitialized;
    }
    return self;
}
,["id","CPString","CGSize"]), new objj_method(sel_getUid("initWithContentsOfFile:size:"), function $CPImage__initWithContentsOfFile_size_(self, _cmd, aFilename, aSize)
{
    self = objj_msgSend(self, "initByReferencingFile:size:", aFilename, aSize);
    if (self)
        objj_msgSend(self, "load");
    return self;
}
,["id","CPString","CGSize"]), new objj_method(sel_getUid("initWithContentsOfFile:"), function $CPImage__initWithContentsOfFile_(self, _cmd, aFilename)
{
    self = objj_msgSend(self, "initByReferencingFile:size:", aFilename, CGSizeMake(-1, -1));
    if (self)
        objj_msgSend(self, "load");
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("initWithData:"), function $CPImage__initWithData_(self, _cmd, someData)
{
    var base64 = objj_msgSend(someData, "base64"),
        type = objj_msgSend(base64, "hasPrefix:", "/9j/4AAQSkZJRgABAQEASABIAAD/") ? "jpg" : "png",
        dataURL = "data:image/" + type + ";base64," + base64;
    return objj_msgSend(self, "initWithContentsOfFile:", dataURL);
}
,["id","CPData"]), new objj_method(sel_getUid("filename"), function $CPImage__filename(self, _cmd)
{
    return self._filename;
}
,["CPString"]), new objj_method(sel_getUid("data"), function $CPImage__data(self, _cmd)
{
    var dataURL;
    if (objj_msgSend(self._filename, "hasPrefix:", "data:image"))
        dataURL = self._filename;
    else if (CPFeatureIsCompatible(CPHTMLCanvasFeature))
    {
        var canvas = document.createElement("canvas"),
            ctx = canvas.getContext("2d");
        (canvas.width = self._image.width, canvas.height = self._image.height);
        ctx.drawImage(self._image, 0, 0);
        dataURL = canvas.toDataURL("image/png");
    }
    else
        return nil;
    var base64 = dataURL.replace(/^data:image\/png;base64,/, "");
    return objj_msgSend(CPData, "dataWithBase64:", base64);
}
,["CPData"]), new objj_method(sel_getUid("setSize:"), function $CPImage__setSize_(self, _cmd, aSize)
{
    self._size = CGSizeMakeCopy(aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("size"), function $CPImage__size(self, _cmd)
{
    return self._size;
}
,["CGSize"]), new objj_method(sel_getUid("setName:"), function $CPImage__setName_(self, _cmd, aName)
{
    if (self._name === aName)
        return YES;
    if (imagesForNames[aName])
        return NO;
    self._name = aName;
    imagesForNames[aName] = self;
    return YES;
}
,["BOOL","CPString"]), new objj_method(sel_getUid("name"), function $CPImage__name(self, _cmd)
{
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("image"), function $CPImage__image(self, _cmd)
{
    return self._image;
}
,["Image"]), new objj_method(sel_getUid("setDelegate:"), function $CPImage__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPImage__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("loadStatus"), function $CPImage__loadStatus(self, _cmd)
{
    return self._loadStatus;
}
,["unsigned"]), new objj_method(sel_getUid("load"), function $CPImage__load(self, _cmd)
{
    if (self._loadStatus == CPImageLoadStatusLoading || self._loadStatus == CPImageLoadStatusCompleted)
        return;
    self._loadStatus = CPImageLoadStatusLoading;
    self._image = new Image();
    var isSynchronous = YES;
    self._image.onload = function()
    {
        if (isSynchronous)
            window.setTimeout(function()
            {
                objj_msgSend(self, "_imageDidLoad");
            }, 0);
        else
        {
            objj_msgSend(self, "_imageDidLoad");
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
        }
        objj_msgSend(self, "_derefFromImage");
    };
    self._image.onerror = function()
    {
        if (isSynchronous)
            window.setTimeout(function()
            {
                objj_msgSend(self, "_imageDidError");
            }, 0);
        else
        {
            objj_msgSend(self, "_imageDidError");
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
        }
        objj_msgSend(self, "_derefFromImage");
    };
    self._image.onabort = function()
    {
        if (isSynchronous)
            window.setTimeout(function()
            {
                objj_msgSend(self, "_imageDidAbort");
            }, 0);
        else
        {
            objj_msgSend(self, "_imageDidAbort");
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
        }
        objj_msgSend(self, "_derefFromImage");
    };
    self._image.src = self._filename;
    window.setTimeout(function()
    {
        isSynchronous = NO;
    }, 0);
}
,["void"]), new objj_method(sel_getUid("isSingleImage"), function $CPImage__isSingleImage(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("isThreePartImage"), function $CPImage__isThreePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("isNinePartImage"), function $CPImage__isNinePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("description"), function $CPImage__description(self, _cmd)
{
    var filename = objj_msgSend(self, "filename"),
        size = objj_msgSend(self, "size");
    if (filename.indexOf("data:") === 0)
    {
        var index = filename.indexOf(",");
        if (index > 0)
            filename = objj_msgSend(CPString, "stringWithFormat:", "%s,%s...%s", filename.substr(0, index), filename.substr(index + 1, 10), filename.substr(filename.length - 10));
        else
            filename = "data:<unknown type>";
    }
    return objj_msgSend(CPString, "stringWithFormat:", ImageDescriptionFormat, objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImage").super_class }, "description"), filename, size.width, size.height);
}
,["CPString"]), new objj_method(sel_getUid("_derefFromImage"), function $CPImage___derefFromImage(self, _cmd)
{
    self._image.onload = null;
    self._image.onerror = null;
    self._image.onabort = null;
}
,["void"]), new objj_method(sel_getUid("_imageDidLoad"), function $CPImage___imageDidLoad(self, _cmd)
{
    self._loadStatus = CPImageLoadStatusCompleted;
    if (!self._size || self._size.width == -1 && self._size.height == -1)
        self._size = CGSizeMake(self._image.width, self._image.height);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPImageDidLoadNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("imageDidLoad:")))
        objj_msgSend(self._delegate, "imageDidLoad:", self);
}
,["void"]), new objj_method(sel_getUid("_imageDidError"), function $CPImage___imageDidError(self, _cmd)
{
    self._loadStatus = CPImageLoadStatusReadError;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("imageDidError:")))
        objj_msgSend(self._delegate, "imageDidError:", self);
}
,["void"]), new objj_method(sel_getUid("_imageDidAbort"), function $CPImage___imageDidAbort(self, _cmd)
{
    self._loadStatus = CPImageLoadStatusCancelled;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("imageDidAbort:")))
        objj_msgSend(self._delegate, "imageDidAbort:", self);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("imageNamed:"), function $CPImage__imageNamed_(self, _cmd, aName)
{
    var image = imagesForNames[aName];
    if (image)
        return image;
    var imageOrSize = AppKitImageForNames[aName];
    if (!imageOrSize)
        return nil;
    if (!imageOrSize.isa)
    {
        imageOrSize = CPAppKitImage("CPImage/" + aName + ".png", imageOrSize);
        objj_msgSend(imageOrSize, "setName:", aName);
        AppKitImageForNames[aName] = imageOrSize;
    }
    return imageOrSize;
}
,["id","CPString"])]);
}{
var the_class = objj_getClass("CPImage")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPImage\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPImage__initWithCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(self, "initWithContentsOfFile:size:", objj_msgSend(aCoder, "decodeObjectForKey:", "CPFilename"), objj_msgSend(aCoder, "decodeSizeForKey:", "CPSize"));
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPImage__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._filename, "CPFilename");
    objj_msgSend(aCoder, "encodeSize:forKey:", self._size, "CPSize");
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPObject, "CPThreePartImage"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_imageSlices"), new objj_ivar("_isVertical")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithImageSlices:isVertical:"), function $CPThreePartImage__initWithImageSlices_isVertical_(self, _cmd, imageSlices, isVertical)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPThreePartImage").super_class }, "init");
    if (self)
    {
        self._imageSlices = imageSlices;
        self._isVertical = isVertical;
    }
    return self;
}
,["id","CPArray","BOOL"]), new objj_method(sel_getUid("filename"), function $CPThreePartImage__filename(self, _cmd)
{
    return "";
}
,["CPString"]), new objj_method(sel_getUid("imageSlices"), function $CPThreePartImage__imageSlices(self, _cmd)
{
    return self._imageSlices;
}
,["CPArray"]), new objj_method(sel_getUid("isVertical"), function $CPThreePartImage__isVertical(self, _cmd)
{
    return self._isVertical;
}
,["BOOL"]), new objj_method(sel_getUid("isSingleImage"), function $CPThreePartImage__isSingleImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("isThreePartImage"), function $CPThreePartImage__isThreePartImage(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("isNinePartImage"), function $CPThreePartImage__isNinePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"])]);
}var CPThreePartImageImageSlicesKey = "CPThreePartImageImageSlicesKey",
    CPThreePartImageIsVerticalKey = "CPThreePartImageIsVerticalKey";
{
var the_class = objj_getClass("CPThreePartImage")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPThreePartImage\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPThreePartImage__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPThreePartImage").super_class }, "init");
    if (self)
    {
        self._imageSlices = objj_msgSend(aCoder, "decodeObjectForKey:", CPThreePartImageImageSlicesKey);
        self._isVertical = objj_msgSend(aCoder, "decodeBoolForKey:", CPThreePartImageIsVerticalKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPThreePartImage__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._imageSlices, CPThreePartImageImageSlicesKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isVertical, CPThreePartImageIsVerticalKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPObject, "CPNinePartImage"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_imageSlices")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithImageSlices:"), function $CPNinePartImage__initWithImageSlices_(self, _cmd, imageSlices)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPNinePartImage").super_class }, "init");
    if (self)
        self._imageSlices = imageSlices;
    return self;
}
,["id","CPArray"]), new objj_method(sel_getUid("filename"), function $CPNinePartImage__filename(self, _cmd)
{
    return "";
}
,["CPString"]), new objj_method(sel_getUid("imageSlices"), function $CPNinePartImage__imageSlices(self, _cmd)
{
    return self._imageSlices;
}
,["CPArray"]), new objj_method(sel_getUid("isSingleImage"), function $CPNinePartImage__isSingleImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("isThreePartImage"), function $CPNinePartImage__isThreePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("isNinePartImage"), function $CPNinePartImage__isNinePartImage(self, _cmd)
{
    return YES;
}
,["BOOL"])]);
}var CPNinePartImageImageSlicesKey = "CPNinePartImageImageSlicesKey";
{
var the_class = objj_getClass("CPNinePartImage")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPNinePartImage\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPNinePartImage__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPNinePartImage").super_class }, "init");
    if (self)
        self._imageSlices = objj_msgSend(aCoder, "decodeObjectForKey:", CPNinePartImageImageSlicesKey);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPNinePartImage__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._imageSlices, CPNinePartImageImageSlicesKey);
}
,["void","CPCoder"])]);
}p;13;CPImageView.jt;17946;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.ji;11;CPControl.ji;9;CPImage.ji;14;CPShadowView.jt;17840;objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("CPControl.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPShadowView.j", YES);CPImageAlignCenter = 0;
CPImageAlignTop = 1;
CPImageAlignTopLeft = 2;
CPImageAlignTopRight = 3;
CPImageAlignLeft = 4;
CPImageAlignBottom = 5;
CPImageAlignBottomLeft = 6;
CPImageAlignBottomRight = 7;
CPImageAlignRight = 8;
var CPImageViewEmptyPlaceholderImage = nil;
{var the_class = objj_allocateClassPair(CPControl, "CPImageView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_DOMImageElement"), new objj_ivar("_hasShadow"), new objj_ivar("_shadowView"), new objj_ivar("_isEditable"), new objj_ivar("_imageRect"), new objj_ivar("_imageAlignment")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPImageView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImageView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "_createDOMImageElement");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_createDOMImageElement"), function $CPImageView___createDOMImageElement(self, _cmd)
{
    if (self._DOMImageElement)
        return;
    self._DOMImageElement = document.createElement("img");
    self._DOMImageElement.style.position = "absolute";
    self._DOMImageElement.style.left = "0px";
    self._DOMImageElement.style.top = "0px";
    if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
    {
        self._DOMImageElement.setAttribute("draggable", "true");
        self._DOMImageElement.style["-khtml-user-drag"] = "element";
    }
    self._DOMImageElement.style.visibility = "hidden";
    AppKitTagDOMElement(self, self._DOMImageElement);
    self._DOMElement.appendChild(self._DOMImageElement);
}
,["void"]), new objj_method(sel_getUid("image"), function $CPImageView__image(self, _cmd)
{
    return objj_msgSend(self, "objectValue");
}
,["CPImage"]), new objj_method(sel_getUid("setImage:"), function $CPImageView__setImage_(self, _cmd, anImage)
{
    objj_msgSend(self, "setObjectValue:", anImage);
}
,["void","CPImage"]), new objj_method(sel_getUid("setObjectValue:"), function $CPImageView__setObjectValue_(self, _cmd, anImage)
{
    var oldImage = objj_msgSend(self, "objectValue");
    if (oldImage === anImage)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImageView").super_class }, "setObjectValue:", anImage);
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (oldImage)
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPImageDidLoadNotification, oldImage);
    var newImage = objj_msgSend(self, "objectValue");
    if (!self._DOMImageElement)
        objj_msgSend(self, "_createDOMImageElement");
    self._DOMImageElement.src = newImage ? objj_msgSend(newImage, "filename") : objj_msgSend(CPImageViewEmptyPlaceholderImage, "filename");
    var size = objj_msgSend(newImage, "size");
    if (size && size.width === -1 && size.height === -1)
    {
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("imageDidLoad:"), CPImageDidLoadNotification, newImage);
        self._DOMImageElement.width = 0;
        self._DOMImageElement.height = 0;
        objj_msgSend(self._shadowView, "setHidden:", YES);
    }
    else
    {
        objj_msgSend(self, "hideOrDisplayContents");
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
}
,["void","CPImage"]), new objj_method(sel_getUid("imageDidLoad:"), function $CPImageView__imageDidLoad_(self, _cmd, aNotification)
{
    objj_msgSend(self, "hideOrDisplayContents");
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPNotification"]), new objj_method(sel_getUid("hasShadow"), function $CPImageView__hasShadow(self, _cmd)
{
    return self._hasShadow;
}
,["BOOL"]), new objj_method(sel_getUid("setHasShadow:"), function $CPImageView__setHasShadow_(self, _cmd, shouldHaveShadow)
{
    if (self._hasShadow == shouldHaveShadow)
        return;
    self._hasShadow = shouldHaveShadow;
    if (self._hasShadow)
    {
        self._shadowView = objj_msgSend(objj_msgSend(CPShadowView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
        objj_msgSend(self, "addSubview:", self._shadowView);
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    else
    {
        objj_msgSend(self._shadowView, "removeFromSuperview");
        self._shadowView = nil;
    }
    objj_msgSend(self, "hideOrDisplayContents");
}
,["void","BOOL"]), new objj_method(sel_getUid("setImageAlignment:"), function $CPImageView__setImageAlignment_(self, _cmd, anImageAlignment)
{
    if (self._imageAlignment == anImageAlignment)
        return;
    self._imageAlignment = anImageAlignment;
    if (!objj_msgSend(self, "image"))
        return;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPImageAlignment"]), new objj_method(sel_getUid("imageAlignment"), function $CPImageView__imageAlignment(self, _cmd)
{
    return self._imageAlignment;
}
,["unsigned"]), new objj_method(sel_getUid("setImageScaling:"), function $CPImageView__setImageScaling_(self, _cmd, anImageScaling)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImageView").super_class }, "setImageScaling:", anImageScaling);
    if (objj_msgSend(self, "currentValueForThemeAttribute:", "image-scaling") === CPImageScaleAxesIndependently)
    {
        if (NULL)
            var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
        else
            var ____p = CGPointMake(0.0, 0.0);
        self._DOMImageElement.style.left = ROUND(____p.x) + "px";
        self._DOMImageElement.style.top = ROUND(____p.y) + "px";
    }
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPImageScaling"]), new objj_method(sel_getUid("imageScaling"), function $CPImageView__imageScaling(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "image-scaling");
}
,["unsigned"]), new objj_method(sel_getUid("hideOrDisplayContents"), function $CPImageView__hideOrDisplayContents(self, _cmd)
{
    if (!objj_msgSend(self, "image"))
    {
        self._DOMImageElement.style.visibility = "hidden";
        objj_msgSend(self._shadowView, "setHidden:", YES);
    }
    else
    {
        self._DOMImageElement.style.visibility = "visible";
        objj_msgSend(self._shadowView, "setHidden:", NO);
    }
}
,["void"]), new objj_method(sel_getUid("imageRect"), function $CPImageView__imageRect(self, _cmd)
{
    return self._imageRect;
}
,["CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $CPImageView__layoutSubviews(self, _cmd)
{
    if (!objj_msgSend(self, "image"))
        return;
    var bounds = objj_msgSend(self, "bounds"),
        image = objj_msgSend(self, "image"),
        imageScaling = objj_msgSend(self, "currentValueForThemeAttribute:", "image-scaling"),
        x = 0.0,
        y = 0.0,
        insetWidth = self._hasShadow ? objj_msgSend(self._shadowView, "horizontalInset") : 0.0,
        insetHeight = self._hasShadow ? objj_msgSend(self._shadowView, "verticalInset") : 0.0,
        boundsWidth = CGRectGetWidth(bounds),
        boundsHeight = CGRectGetHeight(bounds),
        width = boundsWidth - insetWidth,
        height = boundsHeight - insetHeight;
    if (imageScaling === CPImageScaleAxesIndependently)
    {
        self._DOMImageElement.width = ROUND(width);
        self._DOMImageElement.height = ROUND(height);
    }
    else
    {
        var size = objj_msgSend(image, "size");
        if (size.width == -1 && size.height == -1)
            return;
        switch(imageScaling) {
        case CPImageScaleProportionallyDown:
            if (width >= size.width && height >= size.height)
            {
                width = size.width;
                height = size.height;
                break;
            }
        case CPImageScaleProportionallyUpOrDown:
            var imageRatio = size.width / size.height,
                viewRatio = width / height;
            if (viewRatio > imageRatio)
                width = height * imageRatio;
            else
                height = width / imageRatio;
            break;
        case CPImageScaleAxesIndependently:
        case CPImageScaleNone:
            width = size.width;
            height = size.height;
            break;
        }
        self._DOMImageElement.width = ROUND(width);
        self._DOMImageElement.height = ROUND(height);
        var x,
            y;
        switch(self._imageAlignment) {
        case CPImageAlignLeft:
        case CPImageAlignTopLeft:
        case CPImageAlignBottomLeft:
            x = 0.0;
            break;
        case CPImageAlignRight:
        case CPImageAlignTopRight:
        case CPImageAlignBottomRight:
            x = boundsWidth - width;
            break;
default:
            x = (boundsWidth - width) / 2.0;
            break;
        }
        switch(self._imageAlignment) {
        case CPImageAlignTop:
        case CPImageAlignTopLeft:
        case CPImageAlignTopRight:
            y = 0.0;
            break;
        case CPImageAlignBottom:
        case CPImageAlignBottomLeft:
        case CPImageAlignBottomRight:
            y = boundsHeight - height;
            break;
default:
            y = (boundsHeight - height) / 2.0;
            break;
        }
        if (NULL)
            var ____p = CGPointApplyAffineTransform(CGPointMake(x, y), NULL);
        else
            var ____p = CGPointMake(x, y);
        self._DOMImageElement.style.left = ROUND(____p.x) + "px";
        self._DOMImageElement.style.top = ROUND(____p.y) + "px";
    }
    self._imageRect = CGRectMake(x, y, width, height);
    if (self._hasShadow)
        objj_msgSend(self._shadowView, "setFrame:", CGRectMake(x - objj_msgSend(self._shadowView, "leftInset"), y - objj_msgSend(self._shadowView, "topInset"), width + insetWidth, height + insetHeight));
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $CPImageView__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setEditable:"), function $CPImageView__setEditable_(self, _cmd, shouldBeEditable)
{
    if (self._isEditable === shouldBeEditable)
        return;
    self._isEditable = shouldBeEditable;
    if (self._isEditable)
        objj_msgSend(self, "registerForDraggedTypes:", [CPImagesPboardType]);
    else
    {
        var draggedTypes = objj_msgSend(self, "registeredDraggedTypes");
        objj_msgSend(self, "unregisterDraggedTypes");
        objj_msgSend(draggedTypes, "removeObjectIdenticalTo:", CPImagesPboardType);
        objj_msgSend(self, "registerForDraggedTypes:", draggedTypes);
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("isEditable"), function $CPImageView__isEditable(self, _cmd)
{
    return self._isEditable;
}
,["BOOL"]), new objj_method(sel_getUid("performDragOperation:"), function $CPImageView__performDragOperation_(self, _cmd, aSender)
{
    var images = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(objj_msgSend(aSender, "draggingPasteboard"), "dataForType:", CPImagesPboardType));
    if (objj_msgSend(images, "count"))
    {
        objj_msgSend(self, "setImage:", images[0]);
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    return YES;
}
,["BOOL","CPDraggingInfo"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPImageView__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPImageView, "class"))
        return;
    var bundle = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class"));
    CPImageViewEmptyPlaceholderImage = objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:", objj_msgSend(bundle, "pathForResource:", "empty.png"));
}
,["void"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPImageView___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding || aBinding === CPValueURLBinding || aBinding === CPValuePathBinding || aBinding === CPDataBinding)
        return objj_msgSend(CPImageViewValueBinder, "class");
    else if (objj_msgSend(aBinding, "hasPrefix:", CPEditableBinding))
        return objj_msgSend(CPMultipleValueAndBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPImageView").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "CPImageViewValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"), function $CPImageViewValueBinder___updatePlaceholdersWithOptions_(self, _cmd, options)
{
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", nil, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", nil, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", nil, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", nil, CPNullMarker, YES);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $CPImageViewValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setImage:", nil);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $CPImageViewValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    var image;
    if (aValue == nil)
        image = nil;
    else if (aBinding === CPDataBinding)
        image = objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithData:", aValue);
    else if (aBinding === CPValueURLBinding || aBinding === CPValuePathBinding)
        image = objj_msgSend(CPImage, "cachedImageWithContentsOfFile:", aValue);
    else if (aBinding === CPValueBinding)
        image = aValue;
    objj_msgSend(self._source, "setImage:", image);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $CPImageViewValueBinder__valueForBinding_(self, _cmd, aBinding)
{
    var image = objj_msgSend(self._source, "image");
    if (aBinding === CPDataBinding)
        return objj_msgSend(image, "data");
    else if (aBinding === CPValueURLBinding || aBinding === CPValuePathBinding)
        return objj_msgSend(image, "filename");
    else if (aBinding === CPValueBinding)
        return image;
}
,["void","CPString"])]);
}var CPImageViewImageKey = "CPImageViewImageKey",
    CPImageViewImageScalingKey = "CPImageViewImageScalingKey",
    CPImageViewImageAlignmentKey = "CPImageViewImageAlignmentKey",
    CPImageViewHasShadowKey = "CPImageViewHasShadowKey",
    CPImageViewIsEditableKey = "CPImageViewIsEditableKey";
{
var the_class = objj_getClass("CPImageView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPImageView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPImageView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImageView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "_createDOMImageElement");
        objj_msgSend(self, "setHasShadow:", objj_msgSend(aCoder, "decodeBoolForKey:", CPImageViewHasShadowKey));
        objj_msgSend(self, "setImageAlignment:", objj_msgSend(aCoder, "decodeIntForKey:", CPImageViewImageAlignmentKey));
        if (objj_msgSend(aCoder, "decodeBoolForKey:", CPImageViewIsEditableKey))
            objj_msgSend(self, "setEditable:", YES);
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPImageView__encodeWithCoder_(self, _cmd, aCoder)
{
    if (self._shadowView)
        objj_msgSend(self._shadowView, "removeFromSuperview");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPImageView").super_class }, "encodeWithCoder:", aCoder);
    if (self._shadowView)
        objj_msgSend(self, "addSubview:", self._shadowView);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._hasShadow, CPImageViewHasShadowKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._imageAlignment, CPImageViewImageAlignmentKey);
    if (self._isEditable)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._isEditable, CPImageViewIsEditableKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPImage")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPImage\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("cachedImageWithContentsOfFile:"), function $CPImage__cachedImageWithContentsOfFile_(self, _cmd, aFile)
{
    var cached_name = objj_msgSend(CPString, "stringWithFormat:", "%@_%d", objj_msgSend(self, "class"), objj_msgSend(aFile, "hash")),
        image = objj_msgSend(CPImage, "imageNamed:", cached_name);
    if (!image)
    {
        image = objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:", aFile);
        objj_msgSend(image, "setName:", cached_name);
    }
    return image;
}
,["CPImage","CPString"])]);
}p;14;CPKeyBinding.jt;11540;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.ji;19;CPEvent_Constants.ji;8;CPText.jt;11433;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("CPEvent_Constants.j", YES);objj_executeFile("CPText.j", YES);CPStandardKeyBindings = {"@.": "cancelOperation:", "@a": "selectAll:", "^a": "moveToBeginningOfParagraph:", "^$a": "moveToBeginningOfParagraphAndModifySelection:", "^b": "moveBackward:", "^$b": "moveBackwardAndModifySelection:", "^~b": "moveWordBackward:", "^~$b": "moveWordBackwardAndModifySelection:", "^d": "deleteForward:", "^e": "moveToEndOfParagraph:", "^$e": "moveToEndOfParagraphAndModifySelection:", "^f": "moveForward:", "^$f": "moveForwardAndModifySelection:", "^~f": "moveWordForward:", "^~$f": "moveWordForwardAndModifySelection:", "^h": "deleteBackward:", "^k": "deleteToEndOfParagraph:", "^l": "centerSelectionInVisibleArea:", "^n": "moveDown:", "^$n": "moveDownAndModifySelection:", "^o": ["insertNewlineIgnoringFieldEditor:", "moveBackward:"], "^p": "moveUp:", "^$p": "moveUpAndModifySelection:", "^t": "transpose:", "^v": "pageDown:", "^$v": "pageDownAndModifySelection:", "^y": "yank:"};
CPStandardKeyBindings[CPNewlineCharacter] = "insertNewline:";
CPStandardKeyBindings[CPCarriageReturnCharacter] = "insertNewline:";
CPStandardKeyBindings[CPEnterCharacter] = "insertNewline:";
CPStandardKeyBindings["~" + CPNewlineCharacter] = "insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~" + CPCarriageReturnCharacter] = "insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["~" + CPEnterCharacter] = "insertNewlineIgnoringFieldEditor:";
CPStandardKeyBindings["^" + CPNewlineCharacter] = "insertLineBreak:";
CPStandardKeyBindings["^" + CPCarriageReturnCharacter] = "insertLineBreak:";
CPStandardKeyBindings["^" + CPEnterCharacter] = "insertLineBreak:";
CPStandardKeyBindings[CPBackspaceCharacter] = "deleteBackward:";
CPStandardKeyBindings["~" + CPBackspaceCharacter] = "deleteWordBackward:";
CPStandardKeyBindings[CPDeleteCharacter] = "deleteBackward:";
CPStandardKeyBindings["@" + CPDeleteCharacter] = "deleteToBeginningOfLine:";
CPStandardKeyBindings["~" + CPDeleteCharacter] = "deleteWordBackward:";
CPStandardKeyBindings["^" + CPDeleteCharacter] = "deleteBackwardByDecomposingPreviousCharacter:";
CPStandardKeyBindings["^~" + CPDeleteCharacter] = "deleteWordBackward:";
CPStandardKeyBindings[CPDeleteFunctionKey] = "deleteForward:";
CPStandardKeyBindings["~" + CPDeleteFunctionKey] = "deleteWordForward:";
CPStandardKeyBindings[CPTabCharacter] = "insertTab:";
CPStandardKeyBindings["~" + CPTabCharacter] = "insertTabIgnoringFieldEditor:";
CPStandardKeyBindings["^" + CPTabCharacter] = "selectNextKeyView:";
CPStandardKeyBindings[CPBackTabCharacter] = "insertBacktab:";
CPStandardKeyBindings["^" + CPBackTabCharacter] = "selectPreviousKeyView:";
CPStandardKeyBindings[CPEscapeFunctionKey] = "cancelOperation:";
CPStandardKeyBindings["~" + CPEscapeFunctionKey] = "complete:";
CPStandardKeyBindings[CPF5FunctionKey] = "complete:";
CPStandardKeyBindings[CPLeftArrowFunctionKey] = "moveLeft:";
CPStandardKeyBindings["~" + CPLeftArrowFunctionKey] = "moveWordLeft:";
CPStandardKeyBindings["^" + CPLeftArrowFunctionKey] = "moveToLeftEndOfLine:";
CPStandardKeyBindings["@" + CPLeftArrowFunctionKey] = "moveToLeftEndOfLine:";
CPStandardKeyBindings["$" + CPLeftArrowFunctionKey] = "moveLeftAndModifySelection:";
CPStandardKeyBindings["$~" + CPLeftArrowFunctionKey] = "moveWordLeftAndModifySelection:";
CPStandardKeyBindings["$^" + CPLeftArrowFunctionKey] = "moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@" + CPLeftArrowFunctionKey] = "moveToLeftEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^" + CPLeftArrowFunctionKey] = "makeBaseWritingDirectionRightToLeft:";
CPStandardKeyBindings["@^~" + CPLeftArrowFunctionKey] = "makeTextWritingDirectionRightToLeft:";
CPStandardKeyBindings[CPRightArrowFunctionKey] = "moveRight:";
CPStandardKeyBindings["~" + CPRightArrowFunctionKey] = "moveWordRight:";
CPStandardKeyBindings["^" + CPRightArrowFunctionKey] = "moveToRightEndOfLine:";
CPStandardKeyBindings["@" + CPRightArrowFunctionKey] = "moveToRightEndOfLine:";
CPStandardKeyBindings["$" + CPRightArrowFunctionKey] = "moveRightAndModifySelection:";
CPStandardKeyBindings["$~" + CPRightArrowFunctionKey] = "moveWordRightAndModifySelection:";
CPStandardKeyBindings["$^" + CPRightArrowFunctionKey] = "moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["$@" + CPRightArrowFunctionKey] = "moveToRightEndOfLineAndModifySelection:";
CPStandardKeyBindings["@^" + CPRightArrowFunctionKey] = "makeBaseWritingDirectionLeftToRight:";
CPStandardKeyBindings["@^~" + CPRightArrowFunctionKey] = "makeTextWritingDirectionLeftToRight:";
CPStandardKeyBindings[CPUpArrowFunctionKey] = "moveUp:";
CPStandardKeyBindings["~" + CPUpArrowFunctionKey] = ["moveBackward:", "moveToBeginningOfParagraph:"];
CPStandardKeyBindings["^" + CPUpArrowFunctionKey] = "scrollPageUp:";
CPStandardKeyBindings["@" + CPUpArrowFunctionKey] = "moveToBeginningOfDocument:";
CPStandardKeyBindings["$" + CPUpArrowFunctionKey] = "moveUpAndModifySelection:";
CPStandardKeyBindings["$~" + CPUpArrowFunctionKey] = "moveParagraphBackwardAndModifySelection:";
CPStandardKeyBindings["$@" + CPUpArrowFunctionKey] = "moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPDownArrowFunctionKey] = "moveDown:";
CPStandardKeyBindings["~" + CPDownArrowFunctionKey] = ["moveForward:", "moveToEndOfParagraph:"];
CPStandardKeyBindings["^" + CPDownArrowFunctionKey] = "scrollPageDown:";
CPStandardKeyBindings["@" + CPDownArrowFunctionKey] = "moveToEndOfDocument:";
CPStandardKeyBindings["$" + CPDownArrowFunctionKey] = "moveDownAndModifySelection:";
CPStandardKeyBindings["$~" + CPDownArrowFunctionKey] = "moveParagraphForwardAndModifySelection:";
CPStandardKeyBindings["$@" + CPDownArrowFunctionKey] = "moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings["@^" + CPDownArrowFunctionKey] = "makeBaseWritingDirectionNatural:";
CPStandardKeyBindings["@^~" + CPDownArrowFunctionKey] = "makeTextWritingDirectionNatural:";
CPStandardKeyBindings[CPHomeFunctionKey] = "scrollToBeginningOfDocument:";
CPStandardKeyBindings["$" + CPHomeFunctionKey] = "moveToBeginningOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPEndFunctionKey] = "scrollToEndOfDocument:";
CPStandardKeyBindings["$" + CPEndFunctionKey] = "moveToEndOfDocumentAndModifySelection:";
CPStandardKeyBindings[CPPageUpFunctionKey] = "scrollPageUp:";
CPStandardKeyBindings["~" + CPPageUpFunctionKey] = "pageUp:";
CPStandardKeyBindings["$" + CPPageUpFunctionKey] = "pageUpAndModifySelection:";
CPStandardKeyBindings[CPPageDownFunctionKey] = "scrollPageDown:";
CPStandardKeyBindings["~" + CPPageDownFunctionKey] = "pageDown:";
CPStandardKeyBindings["$" + CPPageDownFunctionKey] = "pageDownAndModifySelection:";
var CPKeyBindingCache = {};
{var the_class = objj_allocateClassPair(CPObject, "CPKeyBinding"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_key"), new objj_ivar("_modifierFlags"), new objj_ivar("_selectors"), new objj_ivar("_cacheName")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithPhysicalKeyString:selectors:"), function $CPKeyBinding__initWithPhysicalKeyString_selectors_(self, _cmd, binding, selectors)
{
    var components = binding.split(""),
        modifierFlags = (objj_msgSend(components, "containsObject:", "$") ? CPShiftKeyMask : 0) | (objj_msgSend(components, "containsObject:", "^") ? CPControlKeyMask : 0) | (objj_msgSend(components, "containsObject:", "~") ? CPAlternateKeyMask : 0) | (objj_msgSend(components, "containsObject:", "@") ? CPCommandKeyMask : 0);
    if (!objj_msgSend(selectors, "isKindOfClass:", CPArray))
        selectors = [selectors];
    return objj_msgSend(self, "initWithKey:modifierFlags:selectors:", objj_msgSend(components, "lastObject"), modifierFlags, selectors);
}
,["id","CPString","CPArray"]), new objj_method(sel_getUid("initWithKey:modifierFlags:selectors:"), function $CPKeyBinding__initWithKey_modifierFlags_selectors_(self, _cmd, aKey, aFlag, selectors)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPKeyBinding").super_class }, "init");
    if (self)
    {
        self._key = aKey;
        self._modifierFlags = aFlag;
        self._selectors = selectors;
        var cacheName = [];
        if (self._modifierFlags & CPCommandKeyMask)
            cacheName.push("@");
        if (self._modifierFlags & CPControlKeyMask)
            cacheName.push("^");
        if (self._modifierFlags & CPAlternateKeyMask)
            cacheName.push("~");
        if (self._modifierFlags & CPShiftKeyMask)
            cacheName.push("$");
        cacheName.push(self._key);
        self._cacheName = cacheName.join("");
    }
    return self;
}
,["id","CPString","unsigned","CPArray"]), new objj_method(sel_getUid("key"), function $CPKeyBinding__key(self, _cmd)
{
    return self._key;
}
,["CPString"]), new objj_method(sel_getUid("modifierFlags"), function $CPKeyBinding__modifierFlags(self, _cmd)
{
    return self._modifierFlags;
}
,["unsigned"]), new objj_method(sel_getUid("selectors"), function $CPKeyBinding__selectors(self, _cmd)
{
    return self._selectors;
}
,["CPArray"]), new objj_method(sel_getUid("_cacheName"), function $CPKeyBinding___cacheName(self, _cmd)
{
    return self._cacheName;
}
,["CPString"]), new objj_method(sel_getUid("isEqual:"), function $CPKeyBinding__isEqual_(self, _cmd, rhs)
{
    return self._key === objj_msgSend(rhs, "key") && self._modifierFlags === objj_msgSend(rhs, "modifierFlags");
}
,["BOOL","CPKeyBinding"]), new objj_method(sel_getUid("description"), function $CPKeyBinding__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "<KeyBinding string: '%@' modifierFlags: 0x%lx selectors: %@>", self._key, self._modifierFlags, self._selectors);
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPKeyBinding__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPKeyBinding, "class"))
        return;
    objj_msgSend(self, "createKeyBindingsFromJSObject:", CPStandardKeyBindings);
}
,["void"]), new objj_method(sel_getUid("createKeyBindingsFromJSObject:"), function $CPKeyBinding__createKeyBindingsFromJSObject_(self, _cmd, anObject)
{
    var binding;
    for (binding in anObject)
        objj_msgSend(self, "cacheKeyBinding:", objj_msgSend(objj_msgSend(CPKeyBinding, "alloc"), "initWithPhysicalKeyString:selectors:", binding, anObject[binding]));
}
,["void","JSObject"]), new objj_method(sel_getUid("cacheKeyBinding:"), function $CPKeyBinding__cacheKeyBinding_(self, _cmd, aBinding)
{
    if (!aBinding)
        return;
    CPKeyBindingCache[objj_msgSend(aBinding, "_cacheName")] = aBinding;
}
,["void","CPKeyBinding"]), new objj_method(sel_getUid("keyBindingForKey:modifierFlags:"), function $CPKeyBinding__keyBindingForKey_modifierFlags_(self, _cmd, aKey, aFlag)
{
    var tempBinding = objj_msgSend(objj_msgSend(self, "alloc"), "initWithKey:modifierFlags:selectors:", aKey, aFlag, nil);
    return CPKeyBindingCache[objj_msgSend(tempBinding, "_cacheName")];
}
,["CPKeyBinding","CPString","unsigned"]), new objj_method(sel_getUid("selectorsForKey:modifierFlags:"), function $CPKeyBinding__selectorsForKey_modifierFlags_(self, _cmd, aKey, aFlag)
{
    return objj_msgSend(objj_msgSend(self, "keyBindingForKey:modifierFlags:", aKey, aFlag), "selectors");
}
,["CPArray","CPString","unsigned"])]);
}p;19;CPKeyValueBinding.jt;35287;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;25;Foundation/CPInvocation.jI;31;Foundation/CPValueTransformer.jI;32;Foundation/CPKeyValueObserving.jt;35083;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPInvocation.j", NO);objj_executeFile("Foundation/CPValueTransformer.j", NO);objj_executeFile("Foundation/CPKeyValueObserving.j", NO);var exposedBindingsMap = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init"),
    bindingsMap = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
var CPBindingOperationAnd = 0,
    CPBindingOperationOr = 1;
{var the_class = objj_allocateClassPair(CPObject, "CPBinder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_info"), new objj_ivar("_source"), new objj_ivar("_suppressedNotifications"), new objj_ivar("_placeholderForMarker")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("source"), function $CPBinder__source(self, _cmd)
{
    return self._source;
}
,["id"]), new objj_method(sel_getUid("_setSource:"), function $CPBinder___setSource_(self, _cmd, newValue)
{
    self._source = newValue;
}
,["void","id"]), new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"), function $CPBinder__initWithBinding_name_to_keyPath_options_from_(self, _cmd, aBinding, aName, aDestination, aKeyPath, options, aSource)
{
    self = objj_msgSend(self, "init");
    if (self)
    {
        self._source = aSource;
        self._info = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", aDestination, CPObservedObjectKey, aKeyPath, CPObservedKeyPathKey);
        self._suppressedNotifications = {};
        self._placeholderForMarker = {};
        if (options)
            objj_msgSend(self._info, "setObject:forKey:", options, CPOptionsKey);
        objj_msgSend(self, "_updatePlaceholdersWithOptions:forBinding:", options, aName);
        objj_msgSend(aDestination, "addObserver:forKeyPath:options:context:", self, aKeyPath, CPKeyValueObservingOptionNew, aBinding);
        var bindings = objj_msgSend(bindingsMap, "objectForKey:", objj_msgSend(self._source, "UID"));
        if (!bindings)
        {
            bindings = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
            objj_msgSend(bindingsMap, "setObject:forKey:", bindings, objj_msgSend(self._source, "UID"));
        }
        objj_msgSend(bindings, "setObject:forKey:", self, aName);
        objj_msgSend(self, "setValueFor:", aBinding);
    }
    return self;
}
,["id","CPString","CPString","id","CPString","CPDictionary","id"]), new objj_method(sel_getUid("raiseIfNotApplicable:forKeyPath:options:"), function $CPBinder__raiseIfNotApplicable_forKeyPath_options_(self, _cmd, aValue, keyPath, options)
{
    if (aValue === CPNotApplicableMarker && objj_msgSend(options, "objectForKey:", CPRaisesForNotApplicableKeysBindingOption))
    {
        objj_msgSend(CPException, "raise:reason:", CPGenericException, "Cannot transform non-applicable key on: " + self._source + " key path: " + keyPath + " value: " + aValue);
    }
}
,["void","id","CPString","CPDictionary"]), new objj_method(sel_getUid("setValueFor:"), function $CPBinder__setValueFor_(self, _cmd, theBinding)
{
    var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey),
        options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        newValue = objj_msgSend(destination, "valueForKeyPath:", keyPath);
    if (CPIsControllerMarker(newValue))
    {
        objj_msgSend(self, "raiseIfNotApplicable:forKeyPath:options:", newValue, keyPath, options);
        var value = objj_msgSend(self, "_placeholderForMarker:", newValue);
        objj_msgSend(self, "setPlaceholderValue:withMarker:forBinding:", value, newValue, theBinding);
    }
    else
    {
        var value = objj_msgSend(self, "transformValue:withOptions:", newValue, options);
        objj_msgSend(self, "setValue:forBinding:", value, theBinding);
    }
}
,["void","CPString"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $CPBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setValue:forKey:", aValue, aBinding);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $CPBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "setValue:forKey:", aValue, aBinding);
}
,["void","id","CPString"]), new objj_method(sel_getUid("reverseSetValueFor:"), function $CPBinder__reverseSetValueFor_(self, _cmd, aBinding)
{
    var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey),
        options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        newValue = objj_msgSend(self, "valueForBinding:", aBinding);
    newValue = objj_msgSend(self, "reverseTransformValue:withOptions:", newValue, options);
    objj_msgSend(self, "suppressSpecificNotificationFromObject:keyPath:", destination, keyPath);
    objj_msgSend(destination, "setValue:forKeyPath:", newValue, keyPath);
    objj_msgSend(self, "unsuppressSpecificNotificationFromObject:keyPath:", destination, keyPath);
}
,["void","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $CPBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self._source, "valueForKeyPath:", aBinding);
}
,["id","CPString"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $CPBinder__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, changes, context)
{
    if (!changes)
        return;
    var objectSuppressions = self._suppressedNotifications[objj_msgSend(anObject, "UID")];
    if (objectSuppressions && objectSuppressions[aKeyPath])
        return;
    objj_msgSend(self, "setValueFor:", context);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("transformValue:withOptions:"), function $CPBinder__transformValue_withOptions_(self, _cmd, aValue, options)
{
    var valueTransformerName = objj_msgSend(options, "objectForKey:", CPValueTransformerNameBindingOption),
        valueTransformer;
    if (valueTransformerName)
    {
        valueTransformer = objj_msgSend(CPValueTransformer, "valueTransformerForName:", valueTransformerName);
        if (!valueTransformer)
        {
            var valueTransformerClass = CPClassFromString(valueTransformerName);
            if (valueTransformerClass)
            {
                valueTransformer = objj_msgSend(objj_msgSend(valueTransformerClass, "alloc"), "init");
                objj_msgSend(valueTransformerClass, "setValueTransformer:forName:", valueTransformer, valueTransformerName);
            }
        }
    }
    else
        valueTransformer = objj_msgSend(options, "objectForKey:", CPValueTransformerBindingOption);
    if (valueTransformer)
        aValue = objj_msgSend(valueTransformer, "transformedValue:", aValue);
    if ((aValue === undefined || aValue === nil || aValue === objj_msgSend(CPNull, "null")) && !objj_msgSend(self._source, "respondsToSelector:", sel_getUid("setPlaceholderString:")))
        aValue = objj_msgSend(options, "objectForKey:", CPNullPlaceholderBindingOption) || nil;
    return aValue;
}
,["id","id","CPDictionary"]), new objj_method(sel_getUid("reverseTransformValue:withOptions:"), function $CPBinder__reverseTransformValue_withOptions_(self, _cmd, aValue, options)
{
    var valueTransformerName = objj_msgSend(options, "objectForKey:", CPValueTransformerNameBindingOption),
        valueTransformer;
    if (valueTransformerName)
        valueTransformer = objj_msgSend(CPValueTransformer, "valueTransformerForName:", valueTransformerName);
    else
        valueTransformer = objj_msgSend(options, "objectForKey:", CPValueTransformerBindingOption);
    if (valueTransformer && objj_msgSend(objj_msgSend(valueTransformer, "class"), "allowsReverseTransformation"))
        aValue = objj_msgSend(valueTransformer, "reverseTransformedValue:", aValue);
    return aValue;
}
,["id","id","CPDictionary"]), new objj_method(sel_getUid("continuouslyUpdatesValue"), function $CPBinder__continuouslyUpdatesValue(self, _cmd)
{
    var options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey);
    return objj_msgSend(objj_msgSend(options, "objectForKey:", CPContinuouslyUpdatesValueBindingOption), "boolValue");
}
,["BOOL"]), new objj_method(sel_getUid("handlesContentAsCompoundValue"), function $CPBinder__handlesContentAsCompoundValue(self, _cmd)
{
    var options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey);
    return objj_msgSend(objj_msgSend(options, "objectForKey:", CPHandlesContentAsCompoundValueBindingOption), "boolValue");
}
,["BOOL"]), new objj_method(sel_getUid("suppressSpecificNotificationFromObject:keyPath:"), function $CPBinder__suppressSpecificNotificationFromObject_keyPath_(self, _cmd, anObject, aKeyPath)
{
    if (!anObject)
        return;
    var uid = objj_msgSend(anObject, "UID"),
        objectSuppressions = self._suppressedNotifications[uid];
    if (!objectSuppressions)
        self._suppressedNotifications[uid] = objectSuppressions = {};
    objectSuppressions[aKeyPath] = YES;
}
,["void","id","CPString"]), new objj_method(sel_getUid("unsuppressSpecificNotificationFromObject:keyPath:"), function $CPBinder__unsuppressSpecificNotificationFromObject_keyPath_(self, _cmd, anObject, aKeyPath)
{
    if (!anObject)
        return;
    var uid = objj_msgSend(anObject, "UID"),
        objectSuppressions = self._suppressedNotifications[uid];
    if (!objectSuppressions)
        return;
    delete objectSuppressions[aKeyPath];
}
,["void","id","CPString"]), new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"), function $CPBinder___updatePlaceholdersWithOptions_(self, _cmd, options)
{
    var count = objj_msgSend(CPBinderPlaceholderMarkers, "count");
    while (count--)
    {
        var marker = CPBinderPlaceholderMarkers[count],
            optionName = CPBinderPlaceholderOptions[count],
            isExplicit = objj_msgSend(options, "containsKey:", optionName),
            placeholder = isExplicit ? objj_msgSend(options, "objectForKey:", optionName) : nil;
        objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholder, marker, !isExplicit);
    }
}
,["void","CPDictionary"]), new objj_method(sel_getUid("_updatePlaceholdersWithOptions:forBinding:"), function $CPBinder___updatePlaceholdersWithOptions_forBinding_(self, _cmd, options, aBinding)
{
    objj_msgSend(self, "_updatePlaceholdersWithOptions:", options);
}
,["void","CPDictionary","CPString"]), new objj_method(sel_getUid("_placeholderForMarker:"), function $CPBinder___placeholderForMarker_(self, _cmd, aMarker)
{
    var placeholder = self._placeholderForMarker[objj_msgSend(aMarker, "UID")];
    if (placeholder)
        return placeholder.value;
    return nil;
}
,["JSObject","id"]), new objj_method(sel_getUid("_setPlaceholder:forMarker:isDefault:"), function $CPBinder___setPlaceholder_forMarker_isDefault_(self, _cmd, aPlaceholder, aMarker, isDefault)
{
    if (isDefault)
    {
        var existingPlaceholder = self._placeholderForMarker[objj_msgSend(aMarker, "UID")];
        if (existingPlaceholder && !existingPlaceholder.isDefault)
            return;
    }
    self._placeholderForMarker[objj_msgSend(aMarker, "UID")] = {'isDefault': isDefault, 'value': aPlaceholder};
}
,["void","id","id","BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("exposeBinding:forClass:"), function $CPBinder__exposeBinding_forClass_(self, _cmd, aBinding, aClass)
{
    var bindings = objj_msgSend(exposedBindingsMap, "objectForKey:", objj_msgSend(aClass, "UID"));
    if (!bindings)
    {
        bindings = [];
        objj_msgSend(exposedBindingsMap, "setObject:forKey:", bindings, objj_msgSend(aClass, "UID"));
    }
    bindings.push(aBinding);
}
,["void","CPString","Class"]), new objj_method(sel_getUid("exposedBindingsForClass:"), function $CPBinder__exposedBindingsForClass_(self, _cmd, aClass)
{
    return objj_msgSend(objj_msgSend(exposedBindingsMap, "objectForKey:", objj_msgSend(aClass, "UID")), "copy");
}
,["CPArray","Class"]), new objj_method(sel_getUid("getBinding:forObject:"), function $CPBinder__getBinding_forObject_(self, _cmd, aBinding, anObject)
{
    return objj_msgSend(objj_msgSend(bindingsMap, "objectForKey:", objj_msgSend(anObject, "UID")), "objectForKey:", aBinding);
}
,["CPBinder","CPString","id"]), new objj_method(sel_getUid("infoForBinding:forObject:"), function $CPBinder__infoForBinding_forObject_(self, _cmd, aBinding, anObject)
{
    var theBinding = objj_msgSend(self, "getBinding:forObject:", aBinding, anObject);
    if (theBinding)
        return theBinding._info;
    return nil;
}
,["CPDictionary","CPString","id"]), new objj_method(sel_getUid("allBindingsForObject:"), function $CPBinder__allBindingsForObject_(self, _cmd, anObject)
{
    return objj_msgSend(bindingsMap, "objectForKey:", objj_msgSend(anObject, "UID"));
}
,["CPDictionary","id"]), new objj_method(sel_getUid("unbind:forObject:"), function $CPBinder__unbind_forObject_(self, _cmd, aBinding, anObject)
{
    var bindings = objj_msgSend(bindingsMap, "objectForKey:", objj_msgSend(anObject, "UID"));
    if (!bindings)
        return;
    var theBinding = objj_msgSend(bindings, "objectForKey:", aBinding);
    if (!theBinding)
        return;
    var info = theBinding._info,
        observedObject = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey);
    objj_msgSend(observedObject, "removeObserver:forKeyPath:", theBinding, keyPath);
    objj_msgSend(bindings, "removeObjectForKey:", aBinding);
}
,["void","CPString","id"]), new objj_method(sel_getUid("unbindAllForObject:"), function $CPBinder__unbindAllForObject_(self, _cmd, anObject)
{
    var bindings = objj_msgSend(bindingsMap, "objectForKey:", objj_msgSend(anObject, "UID"));
    if (!bindings)
        return;
    var allKeys = objj_msgSend(bindings, "allKeys"),
        count = allKeys.length;
    while (count--)
        objj_msgSend(anObject, "unbind:", objj_msgSend(bindings, "objectForKey:", allKeys[count]));
    objj_msgSend(bindingsMap, "removeObjectForKey:", objj_msgSend(anObject, "UID"));
}
,["void","id"])]);
}{
var the_class = objj_getClass("CPObject")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("exposedBindings"), function $CPObject__exposedBindings(self, _cmd)
{
    var exposedBindings = [],
        theClass = objj_msgSend(self, "class");
    while (theClass)
    {
        var temp = objj_msgSend(CPBinder, "exposedBindingsForClass:", theClass);
        if (temp)
            objj_msgSend(exposedBindings, "addObjectsFromArray:", temp);
        theClass = objj_msgSend(theClass, "superclass");
    }
    return exposedBindings;
}
,["CPArray"]), new objj_method(sel_getUid("valueClassForBinding:"), function $CPObject__valueClassForBinding_(self, _cmd, binding)
{
    return objj_msgSend(CPString, "class");
}
,["Class","CPString"]), new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"), function $CPObject__bind_toObject_withKeyPath_options_(self, _cmd, aBinding, anObject, aKeyPath, options)
{
    if (!anObject || !aKeyPath)
        return CPLog.error("Invalid object or path on " + self + " for " + aBinding);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", aBinding);
    objj_msgSend(self, "unbind:", aBinding);
    objj_msgSend(objj_msgSend(binderClass, "alloc"), "initWithBinding:name:to:keyPath:options:from:", objj_msgSend(self, "_replacementKeyPathForBinding:", aBinding), aBinding, anObject, aKeyPath, options, self);
}
,["void","CPString","id","CPString","CPDictionary"]), new objj_method(sel_getUid("infoForBinding:"), function $CPObject__infoForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(CPBinder, "infoForBinding:forObject:", aBinding, self);
}
,["CPDictionary","CPString"]), new objj_method(sel_getUid("unbind:"), function $CPObject__unbind_(self, _cmd, aBinding)
{
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", aBinding);
    objj_msgSend(binderClass, "unbind:forObject:", aBinding, self);
}
,["void","CPString"]), new objj_method(sel_getUid("_replacementKeyPathForBinding:"), function $CPObject___replacementKeyPathForBinding_(self, _cmd, binding)
{
    return binding;
}
,["CPString","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("exposeBinding:"), function $CPObject__exposeBinding_(self, _cmd, aBinding)
{
    objj_msgSend(CPBinder, "exposeBinding:forClass:", aBinding, objj_msgSend(self, "class"));
}
,["void","CPString"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPObject___binderClassForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(CPBinder, "class");
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPValueBinder__setValueFor_(self, _cmd, theBinding)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPValueBinder").super_class }, "setValueFor:", "objectValue");
}
,["void","CPString"]), new objj_method(sel_getUid("reverseSetValueFor:"), function $_CPValueBinder__reverseSetValueFor_(self, _cmd, theBinding)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPValueBinder").super_class }, "reverseSetValueFor:", "objectValue");
}
,["void","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPMultipleValueBooleanBinding"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_operation")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPMultipleValueBooleanBinding__setValueFor_(self, _cmd, aBinding)
{
    var bindings = objj_msgSend(bindingsMap, "valueForKey:", objj_msgSend(self._source, "UID"));
    if (!bindings)
        return;
    var baseBinding = aBinding.replace(/\d$/, "");
    objj_msgSend(self._source, "setValue:forKey:", objj_msgSend(self, "resolveMultipleValuesForBinding:bindings:booleanOperation:", baseBinding, bindings, self._operation), baseBinding);
}
,["void","CPString"]), new objj_method(sel_getUid("reverseSetValueFor:"), function $_CPMultipleValueBooleanBinding__reverseSetValueFor_(self, _cmd, theBinding)
{
}
,["void","CPString"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPMultipleValueBooleanBinding__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, changes, context)
{
    objj_msgSend(self, "setValueFor:", context);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("resolveMultipleValuesForBinding:bindings:booleanOperation:"), function $_CPMultipleValueBooleanBinding__resolveMultipleValuesForBinding_bindings_booleanOperation_(self, _cmd, aBinding, bindings, operation)
{
    var bindingName = aBinding,
        theBinding,
        count = 2;
    while (theBinding = objj_msgSend(bindings, "objectForKey:", bindingName))
    {
        var info = theBinding._info,
            object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey),
            options = objj_msgSend(info, "objectForKey:", CPOptionsKey),
            value = objj_msgSend(object, "valueForKeyPath:", keyPath);
        if (CPIsControllerMarker(value))
        {
            objj_msgSend(self, "raiseIfNotApplicable:forKeyPath:options:", value, keyPath, options);
            value = objj_msgSend(theBinding, "_placeholderForMarker:", value);
        }
        else
            value = objj_msgSend(theBinding, "transformValue:withOptions:", value, options);
        if (operation === CPBindingOperationOr)
        {
            if (value)
                return YES;
        }
        else if (!value)
            return NO;
        bindingName = aBinding + count++;
    }
    return operation === CPBindingOperationOr ? NO : YES;
}
,["BOOL","CPString","CPDictionary","CPBindingOperationKind"])]);
}{var the_class = objj_allocateClassPair(_CPMultipleValueBooleanBinding, "CPMultipleValueAndBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPMultipleValueAndBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMultipleValueAndBinding").super_class }, "init"))
        self._operation = CPBindingOperationAnd;
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(_CPMultipleValueBooleanBinding, "CPMultipleValueOrBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPMultipleValueOrBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMultipleValueOrBinding").super_class }, "init"))
        self._operation = CPBindingOperationOr;
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPMultipleValueActionBinding"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_argumentBinding"), new objj_ivar("_targetBinding")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPMultipleValueActionBinding__setValueFor_(self, _cmd, theBinding)
{
    objj_msgSend(self, "checkForNullBinding:initializing:", theBinding, YES);
}
,["void","CPString"]), new objj_method(sel_getUid("reverseSetValueFor:"), function $_CPMultipleValueActionBinding__reverseSetValueFor_(self, _cmd, theBinding)
{
}
,["void","CPString"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPMultipleValueActionBinding__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, changes, context)
{
    objj_msgSend(self, "checkForNullBinding:initializing:", context, NO);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("checkForNullBinding:initializing:"), function $_CPMultipleValueActionBinding__checkForNullBinding_initializing_(self, _cmd, theBinding, isInitializing)
{
    if (!objj_msgSend(self._source, "isKindOfClass:", CPButton))
        return;
    if (isInitializing && theBinding === CPArgumentBinding)
        objj_msgSend(self._source, "setEnabled:", YES);
    var bindings = objj_msgSend(bindingsMap, "valueForKey:", objj_msgSend(self._source, "UID")),
        binding = objj_msgSend(bindings, "objectForKey:", theBinding),
        info = binding._info,
        options = objj_msgSend(info, "objectForKey:", CPOptionsKey);
    if (!objj_msgSend(options, "valueForKey:", CPAllowsNullArgumentBindingOption))
    {
        var object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey),
            value = objj_msgSend(object, "valueForKeyPath:", keyPath);
        if (value === nil || value === undefined)
        {
            objj_msgSend(self._source, "setEnabled:", NO);
            return;
        }
    }
    if (!isInitializing)
        objj_msgSend(self._source, "setEnabled:", YES);
}
,["void","CPString","BOOL"]), new objj_method(sel_getUid("invokeAction"), function $_CPMultipleValueActionBinding__invokeAction(self, _cmd)
{
    var bindings = objj_msgSend(bindingsMap, "valueForKey:", objj_msgSend(self._source, "UID")),
        theBinding = objj_msgSend(bindings, "objectForKey:", CPTargetBinding),
        info = theBinding._info,
        object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey),
        options = objj_msgSend(info, "objectForKey:", CPOptionsKey),
        target = objj_msgSend(object, "valueForKeyPath:", keyPath),
        selector = objj_msgSend(options, "objectForKey:", CPSelectorNameBindingOption);
    if (!target || !selector)
        return;
    var invocation = objj_msgSend(CPInvocation, "invocationWithMethodSignature:", objj_msgSend(target, "methodSignatureForSelector:", selector)),
        bindingName = CPArgumentBinding,
        count = 1;
    while (theBinding = objj_msgSend(bindings, "objectForKey:", bindingName))
    {
        info = theBinding._info;
        object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey);
        keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey);
        objj_msgSend(invocation, "setArgument:atIndex:", objj_msgSend(object, "valueForKeyPath:", keyPath), ++count);
        bindingName = CPArgumentBinding + count;
    }
    objj_msgSend(invocation, "setSelector:", selector);
    objj_msgSend(invocation, "invokeWithTarget:", target);
}
,["void"])]);
}{var the_class = objj_allocateClassPair(_CPMultipleValueActionBinding, "CPActionBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPActionBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPActionBinding").super_class }, "init"))
    {
        self._argumentBinding = CPArgumentBinding;
        self._targetBinding = CPTargetBinding;
    }
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(_CPMultipleValueActionBinding, "CPDoubleClickActionBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPDoubleClickActionBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDoubleClickActionBinding").super_class }, "init"))
    {
        self._argumentBinding = CPArgumentBinding;
        self._targetBinding = CPTargetBinding;
    }
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPPatternBinding"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_bindingKey"), new objj_ivar("_patternPlaceholder")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $_CPPatternBinding__setValueFor_(self, _cmd, aBinding)
{
    var bindings = objj_msgSend(bindingsMap, "valueForKey:", objj_msgSend(self._source, "UID"));
    if (!bindings)
        return;
    var baseBinding = aBinding.replace(/\d$/, ""),
        result = objj_msgSend(self, "resolveMultipleValuesForBindings:", bindings);
    if (result.isPlaceholder)
        objj_msgSend(self, "setPlaceholderValue:withMarker:forBinding:", result.value, result.marker, baseBinding);
    else
        objj_msgSend(self, "setValue:forBinding:", result.value, baseBinding);
}
,["void","CPString"]), new objj_method(sel_getUid("reverseSetValueFor:"), function $_CPPatternBinding__reverseSetValueFor_(self, _cmd, theBinding)
{
}
,["void","CPString"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPPatternBinding__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, changes, context)
{
    objj_msgSend(self, "setValueFor:", context);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("resolveMultipleValuesForBindings:"), function $_CPPatternBinding__resolveMultipleValuesForBindings_(self, _cmd, bindings)
{
    var theBinding,
        result = {value: "", isPlaceholder: NO, marker: nil};
    for (var count = 1; theBinding = objj_msgSend(bindings, "objectForKey:", self._bindingKey + count); ++count)
    {
        var info = theBinding._info,
            object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey),
            options = objj_msgSend(info, "objectForKey:", CPOptionsKey),
            value = objj_msgSend(object, "valueForKeyPath:", keyPath);
        if (count === 1)
            result.value = objj_msgSend(options, "objectForKey:", CPDisplayPatternBindingOption);
        if (CPIsControllerMarker(value))
        {
            objj_msgSend(self, "raiseIfNotApplicable:forKeyPath:options:", value, keyPath, options);
            result.isPlaceholder = YES;
            result.marker = value;
            value = objj_msgSend(theBinding, "_placeholderForMarker:", value);
        }
        else
            value = objj_msgSend(theBinding, "transformValue:withOptions:", value, options);
        if (value === nil || value === undefined)
            value = "";
        result.value = result.value.replace("%{" + self._patternPlaceholder + count + "}@", objj_msgSend(value, "description"));
    }
    return result;
}
,["JSObject","CPDictionary"])]);
}{var the_class = objj_allocateClassPair(_CPPatternBinding, "CPValueWithPatternBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPValueWithPatternBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPValueWithPatternBinding").super_class }, "init"))
    {
        self._bindingKey = CPDisplayPatternValueBinding;
        self._patternPlaceholder = "value";
    }
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(_CPPatternBinding, "CPTitleWithPatternBinding"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPTitleWithPatternBinding__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTitleWithPatternBinding").super_class }, "init"))
    {
        self._bindingKey = CPDisplayPatternTitleBinding;
        self._patternPlaceholder = "title";
    }
    return self;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPStateMarker"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_name")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithName:"), function $_CPStateMarker__initWithName_(self, _cmd, aName)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStateMarker").super_class }, "init"))
        self._name = aName;
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("description"), function $_CPStateMarker__description(self, _cmd)
{
    return "<" + self._name + ">";
}
,["CPString"])]);
}CPObservedObjectKey = "CPObservedObjectKey";
CPObservedKeyPathKey = "CPObservedKeyPathKey";
CPOptionsKey = "CPOptionsKey";
CPNoSelectionMarker = objj_msgSend(objj_msgSend(_CPStateMarker, "alloc"), "initWithName:", "NO SELECTION MARKER");
CPMultipleValuesMarker = objj_msgSend(objj_msgSend(_CPStateMarker, "alloc"), "initWithName:", "MULTIPLE VALUES MARKER");
CPNotApplicableMarker = objj_msgSend(objj_msgSend(_CPStateMarker, "alloc"), "initWithName:", "NOT APPLICABLE MARKER");
CPNullMarker = objj_msgSend(objj_msgSend(_CPStateMarker, "alloc"), "initWithName:", "NULL MARKER");
CPAlignmentBinding = "alignment";
CPArgumentBinding = "argument";
CPContentArrayBinding = "contentArray";
CPContentBinding = "content";
CPContentObjectBinding = "contentObject";
CPContentObjectsBinding = "contentObjects";
CPContentValuesBinding = "contentValues";
CPDisplayPatternTitleBinding = "displayPatternTitle";
CPDisplayPatternValueBinding = "displayPatternValue";
CPDoubleClickArgumentBinding = "doubleClickArgument";
CPDoubleClickTargetBinding = "doubleClickTarget";
CPEditableBinding = "editable";
CPEnabledBinding = "enabled";
CPFontBinding = "font";
CPFontNameBinding = "fontName";
CPFontBoldBinding = "fontBold";
CPHiddenBinding = "hidden";
CPFilterPredicateBinding = "filterPredicate";
CPMaxValueBinding = "maxValue";
CPMinValueBinding = "minValue";
CPPredicateBinding = "predicate";
CPSelectedIndexBinding = "selectedIndex";
CPSelectedLabelBinding = "selectedLabel";
CPSelectedObjectBinding = "selectedObject";
CPSelectedObjectsBinding = "selectedObjects";
CPSelectedTagBinding = "selectedTag";
CPSelectedValueBinding = "selectedValue";
CPSelectedValuesBinding = "selectedValues";
CPSelectionIndexesBinding = "selectionIndexes";
CPTargetBinding = "target";
CPTextColorBinding = "textColor";
CPTitleBinding = "title";
CPToolTipBinding = "toolTip";
CPValueBinding = "value";
CPValueURLBinding = "valueURL";
CPValuePathBinding = "valuePath";
CPDataBinding = "data";
CPAllowsEditingMultipleValuesSelectionBindingOption = "CPAllowsEditingMultipleValuesSelection";
CPAllowsNullArgumentBindingOption = "CPAllowsNullArgument";
CPConditionallySetsEditableBindingOption = "CPConditionallySetsEditable";
CPConditionallySetsEnabledBindingOption = "CPConditionallySetsEnabled";
CPConditionallySetsHiddenBindingOption = "CPConditionallySetsHidden";
CPContinuouslyUpdatesValueBindingOption = "CPContinuouslyUpdatesValue";
CPCreatesSortDescriptorBindingOption = "CPCreatesSortDescriptor";
CPDeletesObjectsOnRemoveBindingsOption = "CPDeletesObjectsOnRemove";
CPDisplayNameBindingOption = "CPDisplayName";
CPDisplayPatternBindingOption = "CPDisplayPattern";
CPHandlesContentAsCompoundValueBindingOption = "CPHandlesContentAsCompoundValue";
CPInsertsNullPlaceholderBindingOption = "CPInsertsNullPlaceholder";
CPInvokesSeparatelyWithArrayObjectsBindingOption = "CPInvokesSeparatelyWithArrayObjects";
CPMultipleValuesPlaceholderBindingOption = "CPMultipleValuesPlaceholder";
CPNoSelectionPlaceholderBindingOption = "CPNoSelectionPlaceholder";
CPNotApplicablePlaceholderBindingOption = "CPNotApplicablePlaceholder";
CPNullPlaceholderBindingOption = "CPNullPlaceholder";
CPPredicateFormatBindingOption = "CPPredicateFormat";
CPRaisesForNotApplicableKeysBindingOption = "CPRaisesForNotApplicableKeys";
CPSelectorNameBindingOption = "CPSelectorName";
CPSelectsAllWhenSettingContentBindingOption = "CPSelectsAllWhenSettingContent";
CPValidatesImmediatelyBindingOption = "CPValidatesImmediately";
CPValueTransformerNameBindingOption = "CPValueTransformerName";
CPValueTransformerBindingOption = "CPValueTransformer";
CPIsControllerMarker = function(anObject)
{
    return anObject === CPMultipleValuesMarker || anObject === CPNoSelectionMarker || anObject === CPNotApplicableMarker || anObject === CPNullMarker;
};
var CPBinderPlaceholderMarkers = [CPMultipleValuesMarker, CPNoSelectionMarker, CPNotApplicableMarker, CPNullMarker],
    CPBinderPlaceholderOptions = [CPMultipleValuesPlaceholderBindingOption, CPNoSelectionPlaceholderBindingOption, CPNotApplicablePlaceholderBindingOption, CPNullPlaceholderBindingOption];
p;18;CPLevelIndicator.jt;15190;@STATIC;1.0;i;11;CPControl.ji;20;CPWindow_Constants.jt;15129;objj_executeFile("CPControl.j", YES);objj_executeFile("CPWindow_Constants.j", YES);CPTickMarkBelow = 0;
CPTickMarkAbove = 1;
CPTickMarkLeft = CPTickMarkAbove;
CPTickMarkRight = CPTickMarkBelow;
CPRelevancyLevelIndicatorStyle = 0;
CPContinuousCapacityLevelIndicatorStyle = 1;
CPDiscreteCapacityLevelIndicatorStyle = 2;
CPRatingLevelIndicatorStyle = 3;
{var the_class = objj_allocateClassPair(CPControl, "CPLevelIndicator"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_levelIndicatorStyle"), new objj_ivar("_minValue"), new objj_ivar("_maxValue"), new objj_ivar("_warningValue"), new objj_ivar("_criticalValue"), new objj_ivar("_tickMarkPosition"), new objj_ivar("_numberOfTickMarks"), new objj_ivar("_numberOfMajorTickMarks"), new objj_ivar("_isEditable"), new objj_ivar("_isTracking")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("levelIndicatorStyle"), function $CPLevelIndicator__levelIndicatorStyle(self, _cmd)
{
    return self._levelIndicatorStyle;
}
,["CPLevelIndicator"]), new objj_method(sel_getUid("setLevelIndicatorStyle:"), function $CPLevelIndicator__setLevelIndicatorStyle_(self, _cmd, newValue)
{
    self._levelIndicatorStyle = newValue;
}
,["void","CPLevelIndicator"]), new objj_method(sel_getUid("minValue"), function $CPLevelIndicator__minValue(self, _cmd)
{
    return self._minValue;
}
,["double"]), new objj_method(sel_getUid("setMinValue:"), function $CPLevelIndicator__setMinValue_(self, _cmd, newValue)
{
    self._minValue = newValue;
}
,["void","double"]), new objj_method(sel_getUid("maxValue"), function $CPLevelIndicator__maxValue(self, _cmd)
{
    return self._maxValue;
}
,["double"]), new objj_method(sel_getUid("setMaxValue:"), function $CPLevelIndicator__setMaxValue_(self, _cmd, newValue)
{
    self._maxValue = newValue;
}
,["void","double"]), new objj_method(sel_getUid("warningValue"), function $CPLevelIndicator__warningValue(self, _cmd)
{
    return self._warningValue;
}
,["double"]), new objj_method(sel_getUid("setWarningValue:"), function $CPLevelIndicator__setWarningValue_(self, _cmd, newValue)
{
    self._warningValue = newValue;
}
,["void","double"]), new objj_method(sel_getUid("criticalValue"), function $CPLevelIndicator__criticalValue(self, _cmd)
{
    return self._criticalValue;
}
,["double"]), new objj_method(sel_getUid("setCriticalValue:"), function $CPLevelIndicator__setCriticalValue_(self, _cmd, newValue)
{
    self._criticalValue = newValue;
}
,["void","double"]), new objj_method(sel_getUid("tickMarkPosition"), function $CPLevelIndicator__tickMarkPosition(self, _cmd)
{
    return self._tickMarkPosition;
}
,["CPTickMarkPosition"]), new objj_method(sel_getUid("setTickMarkPosition:"), function $CPLevelIndicator__setTickMarkPosition_(self, _cmd, newValue)
{
    self._tickMarkPosition = newValue;
}
,["void","CPTickMarkPosition"]), new objj_method(sel_getUid("numberOfTickMarks"), function $CPLevelIndicator__numberOfTickMarks(self, _cmd)
{
    return self._numberOfTickMarks;
}
,["int"]), new objj_method(sel_getUid("setNumberOfTickMarks:"), function $CPLevelIndicator__setNumberOfTickMarks_(self, _cmd, newValue)
{
    self._numberOfTickMarks = newValue;
}
,["void","int"]), new objj_method(sel_getUid("numberOfMajorTickMarks"), function $CPLevelIndicator__numberOfMajorTickMarks(self, _cmd)
{
    return self._numberOfMajorTickMarks;
}
,["int"]), new objj_method(sel_getUid("setNumberOfMajorTickMarks:"), function $CPLevelIndicator__setNumberOfMajorTickMarks_(self, _cmd, newValue)
{
    self._numberOfMajorTickMarks = newValue;
}
,["void","int"]), new objj_method(sel_getUid("initWithFrame:"), function $CPLevelIndicator__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPLevelIndicator").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._levelIndicatorStyle = CPDiscreteCapacityLevelIndicatorStyle;
        self._maxValue = 2;
        self._warningValue = 2;
        self._criticalValue = 2;
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $CPLevelIndicator__layoutSubviews(self, _cmd)
{
    var bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bezel", CPWindowBelow, nil);
    objj_msgSend(bezelView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "bezel-color"));
    var segmentCount = self._maxValue - self._minValue;
    if (segmentCount <= 0)
        return;
    var filledColor = objj_msgSend(self, "valueForThemeAttribute:", "color-normal"),
        value = objj_msgSend(self, "doubleValue");
    if (value <= self._criticalValue)
        filledColor = objj_msgSend(self, "valueForThemeAttribute:", "color-critical");
    else if (value <= self._warningValue)
        filledColor = objj_msgSend(self, "valueForThemeAttribute:", "color-warning");
    for (var i = 0; i < segmentCount; i++)
    {
        var segmentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "segment-bezel-" + i, CPWindowAbove, bezelView);
        objj_msgSend(segmentView, "setBackgroundColor:", self._minValue + i < value ? filledColor : objj_msgSend(self, "valueForThemeAttribute:", "color-empty"));
    }
}
,["void"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPLevelIndicator__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    return objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
}
,["CPView","CPString"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPLevelIndicator__rectForEphemeralSubviewNamed_(self, _cmd, aViewName)
{
    var bezelHeight = 18,
        segmentHeight = 17,
        bounds = CGRectCreateCopy(objj_msgSend(self, "bounds"));
    if (aViewName == "bezel")
    {
        bounds.origin.y = (CGRectGetHeight(bounds) - bezelHeight) / 2.0;
        bounds.size.height = bezelHeight;
        return bounds;
    }
    else if (aViewName.indexOf("segment-bezel") === 0)
    {
        var segment = parseInt(aViewName.substring("segment-bezel-".length), 10),
            segmentCount = self._maxValue - self._minValue;
        if (segment >= segmentCount)
            return CGRectMakeZero();
        var basicSegmentWidth = bounds.size.width / segmentCount,
            segmentFrame = CGRectCreateCopy(objj_msgSend(self, "bounds")),
            spacing = objj_msgSend(self, "valueForThemeAttribute:", "spacing");
        segmentFrame.origin.y = (CGRectGetHeight(bounds) - bezelHeight) / 2.0;
        segmentFrame.origin.x = FLOOR(segment * basicSegmentWidth);
        segmentFrame.size.width = segment == segmentCount - 1 ? bounds.size.width - segmentFrame.origin.x : FLOOR((segment + 1) * basicSegmentWidth) - FLOOR(segment * basicSegmentWidth) - spacing;
        segmentFrame.size.height = segmentHeight;
        return segmentFrame;
    }
    return CGRectMakeZero();
}
,["CGRect","CPString"]), new objj_method(sel_getUid("setEditable:"), function $CPLevelIndicator__setEditable_(self, _cmd, shouldBeEditable)
{
    if (self._isEditable === shouldBeEditable)
        return;
    self._isEditable = shouldBeEditable;
}
,["void","BOOL"]), new objj_method(sel_getUid("isEditable"), function $CPLevelIndicator__isEditable(self, _cmd)
{
    return self._isEditable;
}
,["BOOL"]), new objj_method(sel_getUid("hitTest:"), function $CPLevelIndicator__hitTest_(self, _cmd, aPoint)
{
    if (!objj_msgSend(self, "isEditable"))
        return nil;
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPLevelIndicator").super_class }, "hitTest:", aPoint);
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("mouseDown:"), function $CPLevelIndicator__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEditable") || !objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "_trackMouse:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_trackMouse:"), function $CPLevelIndicator___trackMouse_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type == CPLeftMouseDown || type == CPLeftMouseDragged)
    {
        var segmentCount = self._maxValue - self._minValue;
        if (segmentCount <= 0)
            return;
        var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
            bounds = objj_msgSend(self, "bounds"),
            oldValue = objj_msgSend(self, "doubleValue"),
            newValue = oldValue;
        if (type == CPLeftMouseDragged && location.x < 0)
        {
            newValue = self._minValue;
        }
        else if (type == CPLeftMouseDragged && location.x > bounds.size.width)
        {
            newValue = self._maxValue;
        }
        else
        {
            for (var i = 0; i < segmentCount; i++)
            {
                var rect = objj_msgSend(self, "rectForEphemeralSubviewNamed:", "segment-bezel-" + i);
                if (location.x >= CGRectGetMinX(rect) && location.x < CGRectGetMaxX(rect))
                {
                    newValue = self._minValue + i + 1;
                    break;
                }
            }
        }
        if (newValue != oldValue)
            objj_msgSend(self, "setDoubleValue:", newValue);
        self._isTracking = YES;
        objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("_trackMouse:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
        if (objj_msgSend(self, "isContinuous"))
            objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    else if (self._isTracking)
    {
        self._isTracking = NO;
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("setMinValue:"), function $CPLevelIndicator__setMinValue_(self, _cmd, minValue)
{
    if (self._minValue === minValue)
        return;
    self._minValue = minValue;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","double"]), new objj_method(sel_getUid("setMaxValue:"), function $CPLevelIndicator__setMaxValue_(self, _cmd, maxValue)
{
    if (self._maxValue === maxValue)
        return;
    self._maxValue = maxValue;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","double"]), new objj_method(sel_getUid("setWarningValue:"), function $CPLevelIndicator__setWarningValue_(self, _cmd, warningValue)
{
    if (self._warningValue === warningValue)
        return;
    self._warningValue = warningValue;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","double"]), new objj_method(sel_getUid("setCriticalValue:"), function $CPLevelIndicator__setCriticalValue_(self, _cmd, criticalValue)
{
    if (self._criticalValue === criticalValue)
        return;
    self._criticalValue = criticalValue;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","double"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPLevelIndicator__defaultThemeClass(self, _cmd)
{
    return "level-indicator";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPLevelIndicator__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "bezel-color", objj_msgSend(CPNull, "null"), "color-empty", objj_msgSend(CPNull, "null"), "color-normal", objj_msgSend(CPNull, "null"), "color-warning", objj_msgSend(CPNull, "null"), "color-critical", 1.0, "spacing");
}
,["id"])]);
}var CPLevelIndicatorStyleKey = "CPLevelIndicatorStyleKey",
    CPLevelIndicatorMinValueKey = "CPLevelIndicatorMinValueKey",
    CPLevelIndicatorMaxValueKey = "CPLevelIndicatorMaxValueKey",
    CPLevelIndicatorWarningValueKey = "CPLevelIndicatorWarningValueKey",
    CPLevelIndicatorCriticalValueKey = "CPLevelIndicatorCriticalValueKey",
    CPLevelIndicatorTickMarkPositionKey = "CPLevelIndicatorTickMarkPositionKey",
    CPLevelIndicatorNumberOfTickMarksKey = "CPLevelIndicatorNumberOfTickMarksKey",
    CPLevelIndicatorNumberOfMajorTickMarksKey = "CPLevelIndicatorNumberOfMajorTickMarksKey",
    CPLevelIndicatorIsEditableKey = "CPLevelIndicatorIsEditableKey";
{
var the_class = objj_getClass("CPLevelIndicator")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPLevelIndicator\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPLevelIndicator__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPLevelIndicator").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._levelIndicatorStyle = objj_msgSend(aCoder, "decodeIntForKey:", CPLevelIndicatorStyleKey);
        self._minValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPLevelIndicatorMinValueKey);
        self._maxValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPLevelIndicatorMaxValueKey);
        self._warningValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPLevelIndicatorWarningValueKey);
        self._criticalValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPLevelIndicatorCriticalValueKey);
        self._tickMarkPosition = objj_msgSend(aCoder, "decodeIntForKey:", CPLevelIndicatorTickMarkPositionKey);
        self._numberOfTickMarks = objj_msgSend(aCoder, "decodeIntForKey:", CPLevelIndicatorNumberOfTickMarksKey);
        self._numberOfMajorTickMarks = objj_msgSend(aCoder, "decodeIntForKey:", CPLevelIndicatorNumberOfMajorTickMarksKey);
        self._isEditable = objj_msgSend(aCoder, "decodeBoolForKey:", CPLevelIndicatorIsEditableKey);
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPLevelIndicator__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPLevelIndicator").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._levelIndicatorStyle, CPLevelIndicatorStyleKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._minValue, CPLevelIndicatorMinValueKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._maxValue, CPLevelIndicatorMaxValueKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._warningValue, CPLevelIndicatorWarningValueKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._criticalValue, CPLevelIndicatorCriticalValueKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._tickMarkPosition, CPLevelIndicatorTickMarkPositionKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._numberOfTickMarks, CPLevelIndicatorNumberOfTickMarksKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._numberOfMajorTickMarks, CPLevelIndicatorNumberOfMajorTickMarksKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isEditable, CPLevelIndicatorIsEditableKey);
}
,["void","CPCoder"])]);
}p;20;CPObjectController.jt;29091;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;25;Foundation/CPCountedSet.jI;38;Foundation/_CPCollectionKVCOperators.ji;14;CPController.ji;19;CPKeyValueBinding.jt;28925;objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPCountedSet.j", NO);objj_executeFile("Foundation/_CPCollectionKVCOperators.j", NO);objj_executeFile("CPController.j", YES);objj_executeFile("CPKeyValueBinding.j", YES);{var the_class = objj_allocateClassPair(CPController, "CPObjectController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentObject"), new objj_ivar("_selection"), new objj_ivar("_objectClass"), new objj_ivar("_objectClassName"), new objj_ivar("_isEditable"), new objj_ivar("_automaticallyPreparesContent"), new objj_ivar("_observedKeys")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPObjectController__init(self, _cmd)
{
    return objj_msgSend(self, "initWithContent:", nil);
}
,["id"]), new objj_method(sel_getUid("initWithContent:"), function $CPObjectController__initWithContent_(self, _cmd, aContent)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPObjectController").super_class }, "init"))
    {
        objj_msgSend(self, "setEditable:", YES);
        objj_msgSend(self, "setObjectClass:", objj_msgSend(CPMutableDictionary, "class"));
        self._observedKeys = objj_msgSend(objj_msgSend(CPCountedSet, "alloc"), "init");
        self._selection = objj_msgSend(objj_msgSend(CPControllerSelectionProxy, "alloc"), "initWithController:", self);
        objj_msgSend(self, "setContent:", aContent);
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("content"), function $CPObjectController__content(self, _cmd)
{
    return self._contentObject;
}
,["id"]), new objj_method(sel_getUid("setContent:"), function $CPObjectController__setContent_(self, _cmd, aContent)
{
    objj_msgSend(self, "willChangeValueForKey:", "contentObject");
    objj_msgSend(self, "_selectionWillChange");
    self._contentObject = aContent;
    objj_msgSend(self, "_selectionDidChange");
    objj_msgSend(self, "didChangeValueForKey:", "contentObject");
}
,["void","id"]), new objj_method(sel_getUid("_setContentObject:"), function $CPObjectController___setContentObject_(self, _cmd, aContent)
{
    objj_msgSend(self, "setContent:", aContent);
}
,["void","id"]), new objj_method(sel_getUid("_contentObject"), function $CPObjectController___contentObject(self, _cmd)
{
    return objj_msgSend(self, "content");
}
,["id"]), new objj_method(sel_getUid("setAutomaticallyPreparesContent:"), function $CPObjectController__setAutomaticallyPreparesContent_(self, _cmd, shouldAutomaticallyPrepareContent)
{
    self._automaticallyPreparesContent = shouldAutomaticallyPrepareContent;
}
,["void","BOOL"]), new objj_method(sel_getUid("automaticallyPreparesContent"), function $CPObjectController__automaticallyPreparesContent(self, _cmd)
{
    return self._automaticallyPreparesContent;
}
,["BOOL"]), new objj_method(sel_getUid("prepareContent"), function $CPObjectController__prepareContent(self, _cmd)
{
    objj_msgSend(self, "setContent:", objj_msgSend(self, "newObject"));
}
,["void"]), new objj_method(sel_getUid("setObjectClass:"), function $CPObjectController__setObjectClass_(self, _cmd, aClass)
{
    self._objectClass = aClass;
}
,["void","Class"]), new objj_method(sel_getUid("objectClass"), function $CPObjectController__objectClass(self, _cmd)
{
    return self._objectClass;
}
,["Class"]), new objj_method(sel_getUid("_defaultNewObject"), function $CPObjectController___defaultNewObject(self, _cmd)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "objectClass"), "alloc"), "init");
}
,["id"]), new objj_method(sel_getUid("newObject"), function $CPObjectController__newObject(self, _cmd)
{
    return objj_msgSend(self, "_defaultNewObject");
}
,["id"]), new objj_method(sel_getUid("addObject:"), function $CPObjectController__addObject_(self, _cmd, anObject)
{
    objj_msgSend(self, "setContent:", anObject);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "contentObject");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "contentObject", self), "reverseSetValueFor:", "contentObject");
}
,["void","id"]), new objj_method(sel_getUid("removeObject:"), function $CPObjectController__removeObject_(self, _cmd, anObject)
{
    if (objj_msgSend(self, "content") === anObject)
        objj_msgSend(self, "setContent:", nil);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "contentObject");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "contentObject", self), "reverseSetValueFor:", "contentObject");
}
,["void","id"]), new objj_method(sel_getUid("add:"), function $CPObjectController__add_(self, _cmd, aSender)
{
    objj_msgSend(self, "addObject:", objj_msgSend(self, "newObject"));
}
,["void","id"]), new objj_method(sel_getUid("canAdd"), function $CPObjectController__canAdd(self, _cmd)
{
    return objj_msgSend(self, "isEditable");
}
,["BOOL"]), new objj_method(sel_getUid("remove:"), function $CPObjectController__remove_(self, _cmd, aSender)
{
    objj_msgSend(self, "removeObject:", objj_msgSend(self, "content"));
}
,["void","id"]), new objj_method(sel_getUid("canRemove"), function $CPObjectController__canRemove(self, _cmd)
{
    return objj_msgSend(self, "isEditable") && objj_msgSend(objj_msgSend(self, "selectedObjects"), "count");
}
,["BOOL"]), new objj_method(sel_getUid("setEditable:"), function $CPObjectController__setEditable_(self, _cmd, shouldBeEditable)
{
    self._isEditable = shouldBeEditable;
}
,["void","BOOL"]), new objj_method(sel_getUid("isEditable"), function $CPObjectController__isEditable(self, _cmd)
{
    return self._isEditable;
}
,["BOOL"]), new objj_method(sel_getUid("selectedObjects"), function $CPObjectController__selectedObjects(self, _cmd)
{
    return objj_msgSend(objj_msgSend(_CPObservableArray, "alloc"), "initWithArray:", [self._contentObject]);
}
,["CPArray"]), new objj_method(sel_getUid("selection"), function $CPObjectController__selection(self, _cmd)
{
    return self._selection;
}
,["id"]), new objj_method(sel_getUid("_selectionWillChange"), function $CPObjectController___selectionWillChange(self, _cmd)
{
    objj_msgSend(self._selection, "controllerWillChange");
    objj_msgSend(self, "willChangeValueForKey:", "selection");
}
,["void"]), new objj_method(sel_getUid("_selectionDidChange"), function $CPObjectController___selectionDidChange(self, _cmd)
{
    if (self._selection === undefined || self._selection === nil)
        self._selection = objj_msgSend(objj_msgSend(CPControllerSelectionProxy, "alloc"), "initWithController:", self);
    objj_msgSend(self._selection, "controllerDidChange");
    objj_msgSend(self, "didChangeValueForKey:", "selection");
}
,["void"]), new objj_method(sel_getUid("observedKeys"), function $CPObjectController__observedKeys(self, _cmd)
{
    return self._observedKeys;
}
,["id"]), new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"), function $CPObjectController__addObserver_forKeyPath_options_context_(self, _cmd, anObserver, aKeyPath, options, context)
{
    objj_msgSend(self._observedKeys, "addObject:", aKeyPath);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPObjectController").super_class }, "addObserver:forKeyPath:options:context:", anObserver, aKeyPath, options, context);
}
,["void","id","CPString","CPKeyValueObservingOptions","id"]), new objj_method(sel_getUid("removeObserver:forKeyPath:"), function $CPObjectController__removeObserver_forKeyPath_(self, _cmd, anObserver, aKeyPath)
{
    objj_msgSend(self._observedKeys, "removeObject:", aKeyPath);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPObjectController").super_class }, "removeObserver:forKeyPath:", anObserver, aKeyPath);
}
,["void","id","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPObjectController__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPObjectController, "class"))
        return;
    objj_msgSend(self, "exposeBinding:", "editable");
    objj_msgSend(self, "exposeBinding:", "contentObject");
}
,["id"]), new objj_method(sel_getUid("keyPathsForValuesAffectingContentObject"), function $CPObjectController__keyPathsForValuesAffectingContentObject(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "content");
}
,["CPSet"]), new objj_method(sel_getUid("automaticallyNotifiesObserversForKey:"), function $CPObjectController__automaticallyNotifiesObserversForKey_(self, _cmd, aKey)
{
    if (aKey === "contentObject")
        return NO;
    return YES;
}
,["BOOL","CPString"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanAdd"), function $CPObjectController__keyPathsForValuesAffectingCanAdd(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObject:", "editable");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanInsert"), function $CPObjectController__keyPathsForValuesAffectingCanInsert(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObject:", "editable");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingCanRemove"), function $CPObjectController__keyPathsForValuesAffectingCanRemove(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "editable", "selection");
}
,["CPSet"])]);
}var CPObjectControllerContentKey = "CPObjectControllerContentKey",
    CPObjectControllerObjectClassNameKey = "CPObjectControllerObjectClassNameKey",
    CPObjectControllerIsEditableKey = "CPObjectControllerIsEditableKey",
    CPObjectControllerAutomaticallyPreparesContentKey = "CPObjectControllerAutomaticallyPreparesContentKey";
{
var the_class = objj_getClass("CPObjectController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPObjectController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPObjectController__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPObjectController").super_class }, "init");
    if (self)
    {
        var objectClassName = objj_msgSend(aCoder, "decodeObjectForKey:", CPObjectControllerObjectClassNameKey),
            objectClass = CPClassFromString(objectClassName);
        objj_msgSend(self, "setObjectClass:", objectClass || objj_msgSend(CPMutableDictionary, "class"));
        objj_msgSend(self, "setEditable:", objj_msgSend(aCoder, "decodeBoolForKey:", CPObjectControllerIsEditableKey));
        objj_msgSend(self, "setAutomaticallyPreparesContent:", objj_msgSend(aCoder, "decodeBoolForKey:", CPObjectControllerAutomaticallyPreparesContentKey));
        objj_msgSend(self, "setContent:", objj_msgSend(aCoder, "decodeObjectForKey:", CPObjectControllerContentKey));
        self._observedKeys = objj_msgSend(objj_msgSend(CPCountedSet, "alloc"), "init");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPObjectController__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "content"), CPObjectControllerContentKey);
    if (self._objectClass)
        objj_msgSend(aCoder, "encodeObject:forKey:", CPStringFromClass(self._objectClass), CPObjectControllerObjectClassNameKey);
    else if (self._objectClassName)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._objectClassName, CPObjectControllerObjectClassNameKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "isEditable"), CPObjectControllerIsEditableKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", objj_msgSend(self, "automaticallyPreparesContent"), CPObjectControllerAutomaticallyPreparesContentKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("awakeFromCib"), function $CPObjectController__awakeFromCib(self, _cmd)
{
    if (!objj_msgSend(self, "content") && objj_msgSend(self, "automaticallyPreparesContent"))
        objj_msgSend(self, "prepareContent");
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPObservationProxy"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_keyPath"), new objj_ivar("_observer"), new objj_ivar("_object"), new objj_ivar("_notifyObject"), new objj_ivar("_context"), new objj_ivar("_options")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithKeyPath:observer:object:"), function $_CPObservationProxy__initWithKeyPath_observer_object_(self, _cmd, aKeyPath, anObserver, anObject)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservationProxy").super_class }, "init"))
    {
        self._keyPath = aKeyPath;
        self._observer = anObserver;
        self._object = anObject;
    }
    return self;
}
,["id","id","id","id"]), new objj_method(sel_getUid("observer"), function $_CPObservationProxy__observer(self, _cmd)
{
    return self._observer;
}
,["id"]), new objj_method(sel_getUid("keyPath"), function $_CPObservationProxy__keyPath(self, _cmd)
{
    return self._keyPath;
}
,["id"]), new objj_method(sel_getUid("context"), function $_CPObservationProxy__context(self, _cmd)
{
    return self._context;
}
,["id"]), new objj_method(sel_getUid("options"), function $_CPObservationProxy__options(self, _cmd)
{
    return self._options;
}
,["int"]), new objj_method(sel_getUid("setNotifyObject:"), function $_CPObservationProxy__setNotifyObject_(self, _cmd, notify)
{
    self._notifyObject = notify;
}
,["void","BOOL"]), new objj_method(sel_getUid("isEqual:"), function $_CPObservationProxy__isEqual_(self, _cmd, anObject)
{
    if (objj_msgSend(anObject, "class") === objj_msgSend(self, "class"))
    {
        if (anObject._observer === self._observer && objj_msgSend(anObject._keyPath, "isEqual:", self._keyPath) && objj_msgSend(anObject._object, "isEqual:", self._object))
            return YES;
    }
    return NO;
}
,["BOOL","id"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPObservationProxy__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, change, context)
{
    if (self._notifyObject)
        objj_msgSend(self._object, "observeValueForKeyPath:ofObject:change:context:", aKeyPath, self._object, change, context);
    objj_msgSend(self._observer, "observeValueForKeyPath:ofObject:change:context:", aKeyPath, self._object, change, context);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("description"), function $_CPObservationProxy__description(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservationProxy").super_class }, "description") + objj_msgSend(CPString, "stringWithFormat:", "observation proxy for %@ on key path %@", self._observer, self._keyPath);
}
,["CPString"])]);
}{var the_class = objj_allocateClassPair(_CPJavaScriptArray, "_CPObservableArray"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_observationProxies")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("description"), function $_CPObservableArray__description(self, _cmd)
{
    return "<_CPObservableArray: " + objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "description") + " >";
}
,["CPString"]), new objj_method(sel_getUid("initWithArray:"), function $_CPObservableArray__initWithArray_(self, _cmd, anArray)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "initWithArray:", anArray);
    self.isa = objj_msgSend(_CPObservableArray, "class");
    self._observationProxies = [];
    return self;
}
,["id","CPArray"]), new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"), function $_CPObservableArray__addObserver_forKeyPath_options_context_(self, _cmd, anObserver, aKeyPath, options, context)
{
    if (aKeyPath.charAt(0) === "@")
    {
        if (objj_msgSend(_CPCollectionKVCOperator, "isSimpleCollectionOperator:", aKeyPath))
            return;
        var proxy = objj_msgSend(objj_msgSend(_CPObservationProxy, "alloc"), "initWithKeyPath:observer:object:", aKeyPath, anObserver, self);
        proxy._options = options;
        proxy._context = context;
        objj_msgSend(self._observationProxies, "addObject:", proxy);
        var dotIndex = aKeyPath.indexOf("."),
            remaining = aKeyPath.substring(dotIndex + 1),
            indexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "count")));
        objj_msgSend(self, "addObserver:toObjectsAtIndexes:forKeyPath:options:context:", proxy, indexes, remaining, options, context);
    }
    else
    {
        var indexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "count")));
        objj_msgSend(self, "addObserver:toObjectsAtIndexes:forKeyPath:options:context:", anObserver, indexes, aKeyPath, options, context);
    }
}
,["void","id","CPString","CPKeyValueObservingOptions","id"]), new objj_method(sel_getUid("removeObserver:forKeyPath:"), function $_CPObservableArray__removeObserver_forKeyPath_(self, _cmd, anObserver, aKeyPath)
{
    if (aKeyPath.charAt(0) === "@")
    {
        if (objj_msgSend(_CPCollectionKVCOperator, "isSimpleCollectionOperator:", aKeyPath))
            return;
        var proxy = objj_msgSend(objj_msgSend(_CPObservationProxy, "alloc"), "initWithKeyPath:observer:object:", aKeyPath, anObserver, self),
            index = objj_msgSend(self._observationProxies, "indexOfObject:", proxy);
        proxy = objj_msgSend(self._observationProxies, "objectAtIndex:", index);
        var dotIndex = aKeyPath.indexOf("."),
            remaining = aKeyPath.substring(dotIndex + 1),
            indexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "count")));
        objj_msgSend(self, "removeObserver:fromObjectsAtIndexes:forKeyPath:", proxy, indexes, remaining);
    }
    else
    {
        var indexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "count")));
        objj_msgSend(self, "removeObserver:fromObjectsAtIndexes:forKeyPath:", anObserver, indexes, aKeyPath);
    }
}
,["void","id","CPString"]), new objj_method(sel_getUid("insertObject:atIndex:"), function $_CPObservableArray__insertObject_atIndex_(self, _cmd, anObject, anIndex)
{
    for (var i = 0, count = objj_msgSend(self._observationProxies, "count"); i < count; i++)
    {
        var proxy = objj_msgSend(self._observationProxies, "objectAtIndex:", i),
            keyPath = objj_msgSend(proxy, "keyPath"),
            operator = keyPath.charAt(0) === ".";
        if (operator)
            objj_msgSend(self, "willChangeValueForKey:", keyPath);
        objj_msgSend(anObject, "addObserver:forKeyPath:options:context:", proxy, keyPath, objj_msgSend(proxy, "options"), objj_msgSend(proxy, "context"));
        if (operator)
            objj_msgSend(self, "didChangeValueForKey:", keyPath);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "insertObject:atIndex:", anObject, anIndex);
}
,["void","id","unsigned"]), new objj_method(sel_getUid("removeObjectAtIndex:"), function $_CPObservableArray__removeObjectAtIndex_(self, _cmd, anIndex)
{
    var currentObject = objj_msgSend(self, "objectAtIndex:", anIndex);
    for (var i = 0, count = objj_msgSend(self._observationProxies, "count"); i < count; i++)
    {
        var proxy = objj_msgSend(self._observationProxies, "objectAtIndex:", i),
            keyPath = objj_msgSend(proxy, "keyPath"),
            operator = keyPath.charAt(0) === ".";
        if (operator)
            objj_msgSend(self, "willChangeValueForKey:", keyPath);
        objj_msgSend(currentObject, "removeObserver:forKeyPath:", proxy, keyPath);
        if (operator)
            objj_msgSend(self, "didChangeValueForKey:", keyPath);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "removeObjectAtIndex:", anIndex);
}
,["void","unsigned"]), new objj_method(sel_getUid("objectsAtIndexes:"), function $_CPObservableArray__objectsAtIndexes_(self, _cmd, theIndexes)
{
    return objj_msgSend(_CPObservableArray, "arrayWithArray:", objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "objectsAtIndexes:", theIndexes));
}
,["_CPObservableArray","CPIndexSet"]), new objj_method(sel_getUid("addObject:"), function $_CPObservableArray__addObject_(self, _cmd, anObject)
{
    objj_msgSend(self, "insertObject:atIndex:", anObject, objj_msgSend(self, "count"));
}
,["void","id"]), new objj_method(sel_getUid("removeLastObject"), function $_CPObservableArray__removeLastObject(self, _cmd)
{
    objj_msgSend(self, "removeObjectAtIndex:", objj_msgSend(self, "count"));
}
,["void"]), new objj_method(sel_getUid("replaceObjectAtIndex:withObject:"), function $_CPObservableArray__replaceObjectAtIndex_withObject_(self, _cmd, anIndex, anObject)
{
    var currentObject = objj_msgSend(self, "objectAtIndex:", anIndex);
    for (var i = 0, count = objj_msgSend(self._observationProxies, "count"); i < count; i++)
    {
        var proxy = objj_msgSend(self._observationProxies, "objectAtIndex:", i),
            keyPath = objj_msgSend(proxy, "keyPath"),
            operator = keyPath.charAt(0) === ".";
        if (operator)
            objj_msgSend(self, "willChangeValueForKey:", keyPath);
        objj_msgSend(currentObject, "removeObserver:forKeyPath:", proxy, keyPath);
        objj_msgSend(anObject, "addObserver:forKeyPath:options:context:", proxy, keyPath, objj_msgSend(proxy, "options"), objj_msgSend(proxy, "context"));
        if (operator)
            objj_msgSend(self, "didChangeValueForKey:", keyPath);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPObservableArray").super_class }, "replaceObjectAtIndex:withObject:", anIndex, anObject);
}
,["void","unsigned","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("alloc"), function $_CPObservableArray__alloc(self, _cmd)
{
    var a = [];
    a.isa = self;
    var ivars = class_copyIvarList(self),
        count = ivars.length;
    while (count--)
        a[ivar_getName(ivars[count])] = nil;
    return a;
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "CPControllerSelectionProxy"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_controller"), new objj_ivar("_keys"), new objj_ivar("_cachedValues"), new objj_ivar("_observationProxies"), new objj_ivar("_observedObjectsByKeyPath")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithController:"), function $CPControllerSelectionProxy__initWithController_(self, _cmd, aController)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPControllerSelectionProxy").super_class }, "init"))
    {
        self._cachedValues = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._observationProxies = objj_msgSend(CPArray, "array");
        self._controller = aController;
        self._observedObjectsByKeyPath = {};
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("_controllerMarkerForValues:"), function $CPControllerSelectionProxy___controllerMarkerForValues_(self, _cmd, theValues)
{
    var count = objj_msgSend(theValues, "count"),
        value;
    if (!count)
        value = CPNoSelectionMarker;
    else if (count === 1)
        value = objj_msgSend(theValues, "objectAtIndex:", 0);
    else
    {
        if (objj_msgSend(self._controller, "alwaysUsesMultipleValuesMarker"))
            value = CPMultipleValuesMarker;
        else
        {
            value = objj_msgSend(theValues, "objectAtIndex:", 0);
            for (var i = 0, count = objj_msgSend(theValues, "count"); i < count && value != CPMultipleValuesMarker; i++)
            {
                if (!objj_msgSend(value, "isEqual:", objj_msgSend(theValues, "objectAtIndex:", i)))
                    value = CPMultipleValuesMarker;
            }
        }
    }
    if (value === nil || value.isa && objj_msgSend(value, "isEqual:", objj_msgSend(CPNull, "null")))
        value = CPNullMarker;
    return value;
}
,["id","CPArray"]), new objj_method(sel_getUid("valueForKeyPath:"), function $CPControllerSelectionProxy__valueForKeyPath_(self, _cmd, theKeyPath)
{
    var values = objj_msgSend(objj_msgSend(self._controller, "selectedObjects"), "valueForKeyPath:", theKeyPath);
    if (objj_msgSend(values, "isKindOfClass:", CPArray) || objj_msgSend(values, "isKindOfClass:", CPSet))
    {
        var value = objj_msgSend(self, "_controllerMarkerForValues:", values);
        objj_msgSend(self._cachedValues, "setObject:forKey:", value, theKeyPath);
        return value;
    }
    else
        return values;
}
,["id","CPString"]), new objj_method(sel_getUid("valueForKey:"), function $CPControllerSelectionProxy__valueForKey_(self, _cmd, theKeyPath)
{
    return objj_msgSend(self, "valueForKeyPath:", theKeyPath);
}
,["id","CPString"]), new objj_method(sel_getUid("setValue:forKeyPath:"), function $CPControllerSelectionProxy__setValue_forKeyPath_(self, _cmd, theValue, theKeyPath)
{
    objj_msgSend(objj_msgSend(self._controller, "selectedObjects"), "setValue:forKeyPath:", theValue, theKeyPath);
    objj_msgSend(self._cachedValues, "removeObjectForKey:", theKeyPath);
    objj_msgSend(objj_msgSend(CPBinder, "getBinding:forObject:", "contentArray", self._controller), "_contentArrayDidChange");
}
,["void","id","CPString"]), new objj_method(sel_getUid("setValue:forKey:"), function $CPControllerSelectionProxy__setValue_forKey_(self, _cmd, theValue, theKeyPath)
{
    objj_msgSend(self, "setValue:forKeyPath:", theKeyPath, theKeyPath);
}
,["void","id","CPString"]), new objj_method(sel_getUid("count"), function $CPControllerSelectionProxy__count(self, _cmd)
{
    return objj_msgSend(self._cachedValues, "count");
}
,["unsigned"]), new objj_method(sel_getUid("keyEnumerator"), function $CPControllerSelectionProxy__keyEnumerator(self, _cmd)
{
    return objj_msgSend(self._cachedValues, "keyEnumerator");
}
,["id"]), new objj_method(sel_getUid("controllerWillChange"), function $CPControllerSelectionProxy__controllerWillChange(self, _cmd)
{
    self._keys = objj_msgSend(self._cachedValues, "allKeys");
    if (!self._keys)
        return;
    for (var i = 0, count = self._keys.length; i < count; i++)
        objj_msgSend(self, "willChangeValueForKey:", self._keys[i]);
    objj_msgSend(self._cachedValues, "removeAllObjects");
}
,["void"]), new objj_method(sel_getUid("controllerDidChange"), function $CPControllerSelectionProxy__controllerDidChange(self, _cmd)
{
    objj_msgSend(self._cachedValues, "removeAllObjects");
    if (!self._keys)
        return;
    for (var i = 0, count = self._keys.length; i < count; i++)
        objj_msgSend(self, "didChangeValueForKey:", self._keys[i]);
    self._keys = nil;
}
,["void"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $CPControllerSelectionProxy__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, change, context)
{
    objj_msgSend(self._cachedValues, "removeObjectForKey:", aKeyPath);
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("addObserver:forKeyPath:options:context:"), function $CPControllerSelectionProxy__addObserver_forKeyPath_options_context_(self, _cmd, anObject, aKeyPath, options, context)
{
    var proxy = objj_msgSend(objj_msgSend(_CPObservationProxy, "alloc"), "initWithKeyPath:observer:object:", aKeyPath, anObject, self);
    objj_msgSend(proxy, "setNotifyObject:", YES);
    objj_msgSend(self._observationProxies, "addObject:", proxy);
    var observedObjects = objj_msgSend(self._controller, "selectedObjects");
    self._observedObjectsByKeyPath[aKeyPath] = observedObjects;
    objj_msgSend(observedObjects, "addObserver:forKeyPath:options:context:", proxy, aKeyPath, options, context);
}
,["void","id","CPString","CPKeyValueObservingOptions","id"]), new objj_method(sel_getUid("removeObserver:forKeyPath:"), function $CPControllerSelectionProxy__removeObserver_forKeyPath_(self, _cmd, anObject, aKeyPath)
{
    var proxy = objj_msgSend(objj_msgSend(_CPObservationProxy, "alloc"), "initWithKeyPath:observer:object:", aKeyPath, anObject, self),
        index = objj_msgSend(self._observationProxies, "indexOfObject:", proxy);
    var observedObjects = self._observedObjectsByKeyPath[aKeyPath];
    objj_msgSend(observedObjects, "removeObserver:forKeyPath:", objj_msgSend(self._observationProxies, "objectAtIndex:", index), aKeyPath);
    objj_msgSend(self._observationProxies, "removeObjectAtIndex:", index);
    self._observedObjectsByKeyPath[aKeyPath] = nil;
}
,["void","id","CPString"])]);
}p;13;CPOpenPanel.jt;2801;@STATIC;1.0;i;9;CPPanel.jt;2769;objj_executeFile("CPPanel.j", YES);{var the_class = objj_allocateClassPair(CPPanel, "CPOpenPanel"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_canChooseFiles"), new objj_ivar("_canChooseDirectories"), new objj_ivar("_allowsMultipleSelection"), new objj_ivar("_directoryURL"), new objj_ivar("_URLs")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("canChooseFiles"), function $CPOpenPanel__canChooseFiles(self, _cmd)
{
    return self._canChooseFiles;
}
,["BOOL"]), new objj_method(sel_getUid("setCanChooseFiles:"), function $CPOpenPanel__setCanChooseFiles_(self, _cmd, newValue)
{
    self._canChooseFiles = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("canChooseDirectories"), function $CPOpenPanel__canChooseDirectories(self, _cmd)
{
    return self._canChooseDirectories;
}
,["BOOL"]), new objj_method(sel_getUid("setCanChooseDirectories:"), function $CPOpenPanel__setCanChooseDirectories_(self, _cmd, newValue)
{
    self._canChooseDirectories = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsMultipleSelection"), function $CPOpenPanel__allowsMultipleSelection(self, _cmd)
{
    return self._allowsMultipleSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsMultipleSelection:"), function $CPOpenPanel__setAllowsMultipleSelection_(self, _cmd, newValue)
{
    self._allowsMultipleSelection = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("directoryURL"), function $CPOpenPanel__directoryURL(self, _cmd)
{
    return self._directoryURL;
}
,["CPURL"]), new objj_method(sel_getUid("setDirectoryURL:"), function $CPOpenPanel__setDirectoryURL_(self, _cmd, newValue)
{
    self._directoryURL = newValue;
}
,["void","CPURL"]), new objj_method(sel_getUid("runModal"), function $CPOpenPanel__runModal(self, _cmd)
{
    if (typeof window["cpOpenPanel"] === "function")
    {
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
        var options = {directoryURL: objj_msgSend(self, "directoryURL"), canChooseFiles: objj_msgSend(self, "canChooseFiles"), canChooseDirectories: objj_msgSend(self, "canChooseDirectories"), allowsMultipleSelection: objj_msgSend(self, "allowsMultipleSelection")},
            result = window.cpOpenPanel(options);
        self._URLs = result.URLs;
        return result.button;
    }
    throw "-runModal is unimplemented.";
}
,["CPInteger"]), new objj_method(sel_getUid("URLs"), function $CPOpenPanel__URLs(self, _cmd)
{
    return self._URLs;
}
,["CPArray"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("openPanel"), function $CPOpenPanel__openPanel(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPOpenPanel, "alloc"), "init");
}
,["id"])]);
}p;15;CPOutlineView.jt;78753;@STATIC;1.0;i;10;CPButton.ji;15;CPTableColumn.ji;13;CPTableView.jt;78680;objj_executeFile("CPButton.j", YES);objj_executeFile("CPTableColumn.j", YES);objj_executeFile("CPTableView.j", YES);CPOutlineViewColumnDidMoveNotification = "CPOutlineViewColumnDidMoveNotification";
CPOutlineViewColumnDidResizeNotification = "CPOutlineViewColumnDidResizeNotification";
CPOutlineViewItemDidCollapseNotification = "CPOutlineViewItemDidCollapseNotification";
CPOutlineViewItemDidExpandNotification = "CPOutlineViewItemDidExpandNotification";
CPOutlineViewItemWillCollapseNotification = "CPOutlineViewItemWillCollapseNotification";
CPOutlineViewItemWillExpandNotification = "CPOutlineViewItemWillExpandNotification";
CPOutlineViewSelectionDidChangeNotification = "CPOutlineViewSelectionDidChangeNotification";
CPOutlineViewSelectionIsChangingNotification = "CPOutlineViewSelectionIsChangingNotification";
var CPOutlineViewDataSource_outlineView_objectValue_forTableColumn_byItem_ = 1 << 1,
    CPOutlineViewDataSource_outlineView_setObjectValue_forTableColumn_byItem_ = 1 << 2,
    CPOutlineViewDataSource_outlineView_shouldDeferDisplayingChildrenOfItem_ = 1 << 3,
    CPOutlineViewDataSource_outlineView_acceptDrop_item_childIndex_ = 1 << 4,
    CPOutlineViewDataSource_outlineView_validateDrop_proposedItem_proposedChildIndex_ = 1 << 5,
    CPOutlineViewDataSource_outlineView_validateDrop_proposedRow_proposedDropOperation_ = 1 << 6,
    CPOutlineViewDataSource_outlineView_namesOfPromisedFilesDroppedAtDestination_forDraggedItems_ = 1 << 7,
    CPOutlineViewDataSource_outlineView_itemForPersistentObject_ = 1 << 8,
    CPOutlineViewDataSource_outlineView_persistentObjectForItem_ = 1 << 9,
    CPOutlineViewDataSource_outlineView_writeItems_toPasteboard_ = 1 << 10,
    CPOutlineViewDataSource_outlineView_sortDescriptorsDidChange_ = 1 << 11;
var CPOutlineViewDelegate_outlineView_dataViewForTableColumn_item_ = 1 << 1,
    CPOutlineViewDelegate_outlineView_viewForTableColumn_item_ = 1 << 26,
    CPOutlineViewDelegate_outlineView_didClickTableColumn_ = 1 << 2,
    CPOutlineViewDelegate_outlineView_didDragTableColumn_ = 1 << 3,
    CPOutlineViewDelegate_outlineView_heightOfRowByItem_ = 1 << 4,
    CPOutlineViewDelegate_outlineView_isGroupItem_ = 1 << 5,
    CPOutlineViewDelegate_outlineView_mouseDownInHeaderOfTableColumn_ = 1 << 6,
    CPOutlineViewDelegate_outlineView_nextTypeSelectMatchFromItem_toItem_forString_ = 1 << 7,
    CPOutlineViewDelegate_outlineView_selectionIndexesForProposedSelection_ = 1 << 8,
    CPOutlineViewDelegate_outlineView_shouldCollapseItem_ = 1 << 9,
    CPOutlineViewDelegate_outlineView_shouldEditTableColumn_item_ = 1 << 10,
    CPOutlineViewDelegate_outlineView_shouldExpandItem_ = 1 << 11,
    CPOutlineViewDelegate_outlineView_shouldReorderColumn_toColumn_ = 1 << 12,
    CPOutlineViewDelegate_outlineView_shouldSelectItem_ = 1 << 13,
    CPOutlineViewDelegate_outlineView_shouldSelectTableColumn_ = 1 << 14,
    CPOutlineViewDelegate_outlineView_shouldShowOutlineDisclosureControlForItem_ = 1 << 15,
    CPOutlineViewDelegate_outlineView_shouldShowViewExpansionForTableColumn_item_ = 1 << 16,
    CPOutlineViewDelegate_outlineView_shouldTrackView_forTableColumn_item_ = 1 << 17,
    CPOutlineViewDelegate_outlineView_shouldTypeSelectForEvent_withCurrentSearchString_ = 1 << 18,
    CPOutlineViewDelegate_outlineView_sizeToFitWidthOfColumn_ = 1 << 19,
    CPOutlineViewDelegate_outlineView_toolTipForView_rect_tableColumn_item_mouseLocation_ = 1 << 20,
    CPOutlineViewDelegate_outlineView_typeSelectStringForTableColumn_item_ = 1 << 21,
    CPOutlineViewDelegate_outlineView_willDisplayOutlineView_forTableColumn_item_ = 1 << 22,
    CPOutlineViewDelegate_outlineView_willDisplayView_forTableColumn_item_ = 1 << 23,
    CPOutlineViewDelegate_selectionShouldChangeInOutlineView_ = 1 << 24,
    CPOutlineViewDelegate_outlineView_menuForTableColumn_item_ = 1 << 25;
CPOutlineViewDropOnItemIndex = -1;
var CPOutlineViewCoalesceSelectionNotificationStateOff = 0,
    CPOutlineViewCoalesceSelectionNotificationStateOn = 1,
    CPOutlineViewCoalesceSelectionNotificationStateDid = 2;
{var the_class = objj_allocateClassPair(CPTableView, "CPOutlineView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_outlineViewDataSource"), new objj_ivar("_outlineViewDelegate"), new objj_ivar("_outlineTableColumn"), new objj_ivar("_indentationPerLevel"), new objj_ivar("_indentationMarkerFollowsDataView"), new objj_ivar("_implementedOutlineViewDataSourceMethods"), new objj_ivar("_implementedOutlineViewDelegateMethods"), new objj_ivar("_rootItemInfo"), new objj_ivar("_itemsForRows"), new objj_ivar("_itemInfosForItems"), new objj_ivar("_disclosureControlPrototype"), new objj_ivar("_disclosureControlsForRows"), new objj_ivar("_disclosureControlData"), new objj_ivar("_disclosureControlQueue"), new objj_ivar("_shouldRetargetItem"), new objj_ivar("_retargetedItem"), new objj_ivar("_shouldRetargetChildIndex"), new objj_ivar("_retargedChildIndex"), new objj_ivar("_dragHoverTimer"), new objj_ivar("_dropItem"), new objj_ivar("_coalesceSelectionNotificationState")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPOutlineView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._selectionHighlightStyle = CPTableViewSelectionHighlightStyleSourceList;
        self._rootItemInfo = {isExpanded: YES, isExpandable: NO, shouldShowOutlineDisclosureControl: NO, level: -1, row: -1, children: [], weight: 0};
        self._itemsForRows = [];
        self._itemInfosForItems = {};
        self._disclosureControlsForRows = [];
        self._retargetedItem = nil;
        self._shouldRetargetItem = NO;
        self._retargedChildIndex = nil;
        self._shouldRetargetChildIndex = NO;
        objj_msgSend(self, "setIndentationPerLevel:", 16.0);
        objj_msgSend(self, "setIndentationMarkerFollowsDataView:", YES);
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "setDataSource:", objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource, "alloc"), "initWithOutlineView:", self));
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "setDelegate:", objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate, "alloc"), "initWithOutlineView:", self));
        objj_msgSend(self, "setDisclosureControlPrototype:", objj_msgSend(objj_msgSend(CPDisclosureButton, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 10.0, 10.0)));
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setDataSource:"), function $CPOutlineView__setDataSource_(self, _cmd, aDataSource)
{
    if (self._outlineViewDataSource === aDataSource)
        return;
    if (!objj_msgSend(aDataSource, "respondsToSelector:", sel_getUid("outlineView:child:ofItem:")))
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "Data source must implement 'outlineView:child:ofItem:'");
    if (!objj_msgSend(aDataSource, "respondsToSelector:", sel_getUid("outlineView:isItemExpandable:")))
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "Data source must implement 'outlineView:isItemExpandable:'");
    if (!objj_msgSend(aDataSource, "respondsToSelector:", sel_getUid("outlineView:numberOfChildrenOfItem:")))
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "Data source must implement 'outlineView:numberOfChildrenOfItem:'");
    self._outlineViewDataSource = aDataSource;
    self._implementedOutlineViewDataSourceMethods = 0;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:objectValueForTableColumn:byItem:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_objectValue_forTableColumn_byItem_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:setObjectValue:forTableColumn:byItem:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_setObjectValue_forTableColumn_byItem_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:shouldDeferDisplayingChildrenOfItem:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_shouldDeferDisplayingChildrenOfItem_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:acceptDrop:item:childIndex:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_acceptDrop_item_childIndex_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:validateDrop:proposedItem:proposedChildIndex:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_validateDrop_proposedItem_proposedChildIndex_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:validateDrop:proposedRow:proposedDropOperation:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_validateDrop_proposedRow_proposedDropOperation_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:namesOfPromisedFilesDroppedAtDestination:forDraggedItems:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_namesOfPromisedFilesDroppedAtDestination_forDraggedItems_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:itemForPersistentObject:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_itemForPersistentObject_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:persistentObjectForItem:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_persistentObjectForItem_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:writeItems:toPasteboard:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_writeItems_toPasteboard_;
    if (objj_msgSend(self._outlineViewDataSource, "respondsToSelector:", sel_getUid("outlineView:sortDescriptorsDidChange:")))
        self._implementedOutlineViewDataSourceMethods |= CPOutlineViewDataSource_outlineView_sortDescriptorsDidChange_;
    objj_msgSend(self, "reloadData");
}
,["void","id"]), new objj_method(sel_getUid("dataSource"), function $CPOutlineView__dataSource(self, _cmd)
{
    return self._outlineViewDataSource;
}
,["id"]), new objj_method(sel_getUid("isExpandable:"), function $CPOutlineView__isExpandable_(self, _cmd, anItem)
{
    if (!anItem)
        return YES;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return NO;
    return itemInfo.isExpandable;
}
,["BOOL","id"]), new objj_method(sel_getUid("_shouldShowOutlineDisclosureControlForItem:"), function $CPOutlineView___shouldShowOutlineDisclosureControlForItem_(self, _cmd, anItem)
{
    if (!anItem)
        return YES;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return YES;
    return itemInfo.shouldShowOutlineDisclosureControl;
}
,["BOOL","id"]), new objj_method(sel_getUid("isItemExpanded:"), function $CPOutlineView__isItemExpanded_(self, _cmd, anItem)
{
    if (!anItem)
        return YES;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return NO;
    return itemInfo.isExpanded;
}
,["BOOL","id"]), new objj_method(sel_getUid("expandItem:"), function $CPOutlineView__expandItem_(self, _cmd, anItem)
{
    objj_msgSend(self, "expandItem:expandChildren:", anItem, NO);
}
,["void","id"]), new objj_method(sel_getUid("expandItem:expandChildren:"), function $CPOutlineView__expandItem_expandChildren_(self, _cmd, anItem, shouldExpandChildren)
{
    if (objj_msgSend(self, "_delegateRespondsToShouldExpandItem"))
        if (objj_msgSend(self._outlineViewDelegate, "outlineView:shouldExpandItem:", self, anItem) == NO)
            return;
    var itemInfo = null;
    if (!anItem)
        itemInfo = self._rootItemInfo;
    else
        itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return;
    var isTopLevel = NO;
    if (!self._coalesceSelectionNotificationState)
    {
        isTopLevel = YES;
        self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateOn;
    }
    if (!itemInfo.isExpanded)
    {
        objj_msgSend(self, "_noteItemWillExpand:", anItem);
        var previousRowCount = objj_msgSend(self, "numberOfRows");
        itemInfo.isExpanded = YES;
        objj_msgSend(self, "reloadItem:reloadChildren:", anItem, YES);
        objj_msgSend(self, "_noteItemDidExpand:", anItem);
        var rowCountDelta = objj_msgSend(self, "numberOfRows") - previousRowCount;
        if (rowCountDelta)
        {
            var selection = objj_msgSend(self, "selectedRowIndexes"),
                expandIndex = objj_msgSend(self, "rowForItem:", anItem) + 1;
            if (objj_msgSend(selection, "intersectsIndexesInRange:", CPMakeRange(expandIndex, self._itemsForRows.length)))
            {
                objj_msgSend(self, "_noteSelectionIsChanging");
                objj_msgSend(selection, "shiftIndexesStartingAtIndex:by:", expandIndex, rowCountDelta);
                objj_msgSend(self, "_setSelectedRowIndexes:", selection);
            }
        }
    }
    if (shouldExpandChildren)
    {
        var children = itemInfo.children,
            childIndex = children.length;
        while (childIndex--)
            objj_msgSend(self, "expandItem:expandChildren:", children[childIndex], YES);
    }
    if (isTopLevel)
    {
        var r = self._coalesceSelectionNotificationState;
        self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateOff;
        if (r === CPOutlineViewCoalesceSelectionNotificationStateDid)
            objj_msgSend(self, "_noteSelectionDidChange");
    }
}
,["void","id","BOOL"]), new objj_method(sel_getUid("collapseItem:"), function $CPOutlineView__collapseItem_(self, _cmd, anItem)
{
    if (!anItem)
        return;
    if (objj_msgSend(self, "_delegateRespondsToShouldCollapseItem"))
        if (objj_msgSend(self._outlineViewDelegate, "outlineView:shouldCollapseItem:", self, anItem) == NO)
            return;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return;
    if (!itemInfo.isExpanded)
        return;
    self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateOn;
    objj_msgSend(self, "_noteItemWillCollapse:", anItem);
    var collapseTopIndex = objj_msgSend(self, "rowForItem:", anItem),
        topLevel = objj_msgSend(self, "levelForRow:", collapseTopIndex),
        collapseEndIndex = collapseTopIndex;
    while (collapseEndIndex + 1 < self._itemsForRows.length && objj_msgSend(self, "levelForRow:", collapseEndIndex + 1) > topLevel)
        collapseEndIndex++;
    var collapseRange = CPMakeRange(collapseTopIndex + 1, collapseEndIndex - collapseTopIndex);
    if (collapseRange.length)
    {
        var selection = objj_msgSend(self, "selectedRowIndexes");
        if (objj_msgSend(selection, "intersectsIndexesInRange:", collapseRange))
        {
            objj_msgSend(self, "_noteSelectionIsChanging");
            objj_msgSend(selection, "removeIndexesInRange:", collapseRange);
            objj_msgSend(self, "_setSelectedRowIndexes:", selection);
        }
        if (objj_msgSend(selection, "intersectsIndexesInRange:", CPMakeRange(collapseEndIndex + 1, self._itemsForRows.length)))
        {
            objj_msgSend(self, "_noteSelectionIsChanging");
            objj_msgSend(selection, "shiftIndexesStartingAtIndex:by:", collapseEndIndex + 1, -collapseRange.length);
            objj_msgSend(self, "_setSelectedRowIndexes:", selection);
        }
    }
    itemInfo.isExpanded = NO;
    objj_msgSend(self, "reloadItem:reloadChildren:", anItem, YES);
    objj_msgSend(self, "_noteItemDidCollapse:", anItem);
    var r = self._coalesceSelectionNotificationState;
    self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateOff;
    if (r === CPOutlineViewCoalesceSelectionNotificationStateDid)
        objj_msgSend(self, "_noteSelectionDidChange");
}
,["void","id"]), new objj_method(sel_getUid("reloadItem:"), function $CPOutlineView__reloadItem_(self, _cmd, anItem)
{
    objj_msgSend(self, "reloadItem:reloadChildren:", anItem, NO);
}
,["void","id"]), new objj_method(sel_getUid("reloadItem:reloadChildren:"), function $CPOutlineView__reloadItem_reloadChildren_(self, _cmd, anItem, shouldReloadChildren)
{
    if (!!shouldReloadChildren || !anItem)
        _loadItemInfoForItem(self, anItem);
    else
        _reloadItem(self, anItem);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "reloadData");
}
,["void","id","BOOL"]), new objj_method(sel_getUid("itemAtRow:"), function $CPOutlineView__itemAtRow_(self, _cmd, aRow)
{
    return self._itemsForRows[aRow] || nil;
}
,["id","CPInteger"]), new objj_method(sel_getUid("rowForItem:"), function $CPOutlineView__rowForItem_(self, _cmd, anItem)
{
    if (!anItem)
        return self._rootItemInfo.row;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return CPNotFound;
    return itemInfo.row;
}
,["CPInteger","id"]), new objj_method(sel_getUid("setOutlineTableColumn:"), function $CPOutlineView__setOutlineTableColumn_(self, _cmd, aTableColumn)
{
    if (self._outlineTableColumn === aTableColumn)
        return;
    self._outlineTableColumn = aTableColumn;
    objj_msgSend(self, "reloadData");
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("outlineTableColumn"), function $CPOutlineView__outlineTableColumn(self, _cmd)
{
    return self._outlineTableColumn;
}
,["CPTableColumn"]), new objj_method(sel_getUid("levelForItem:"), function $CPOutlineView__levelForItem_(self, _cmd, anItem)
{
    if (!anItem)
        return self._rootItemInfo.level;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return CPNotFound;
    return itemInfo.level;
}
,["CPInteger","id"]), new objj_method(sel_getUid("levelForRow:"), function $CPOutlineView__levelForRow_(self, _cmd, aRow)
{
    return objj_msgSend(self, "levelForItem:", objj_msgSend(self, "itemAtRow:", aRow));
}
,["CPInteger","CPInteger"]), new objj_method(sel_getUid("setIndentationPerLevel:"), function $CPOutlineView__setIndentationPerLevel_(self, _cmd, anIndentationWidth)
{
    if (self._indentationPerLevel === anIndentationWidth)
        return;
    self._indentationPerLevel = anIndentationWidth;
    objj_msgSend(self, "reloadData");
}
,["void","float"]), new objj_method(sel_getUid("indentationPerLevel"), function $CPOutlineView__indentationPerLevel(self, _cmd)
{
    return self._indentationPerLevel;
}
,["float"]), new objj_method(sel_getUid("setIndentationMarkerFollowsDataView:"), function $CPOutlineView__setIndentationMarkerFollowsDataView_(self, _cmd, indentationMarkerShouldFollowDataView)
{
    if (self._indentationMarkerFollowsDataView === indentationMarkerShouldFollowDataView)
        return;
    self._indentationMarkerFollowsDataView = indentationMarkerShouldFollowDataView;
    objj_msgSend(self, "reloadData");
}
,["void","BOOL"]), new objj_method(sel_getUid("indentationMarkerFollowsDataView"), function $CPOutlineView__indentationMarkerFollowsDataView(self, _cmd)
{
    return self._indentationMarkerFollowsDataView;
}
,["BOOL"]), new objj_method(sel_getUid("parentForItem:"), function $CPOutlineView__parentForItem_(self, _cmd, anItem)
{
    if (!anItem)
        return nil;
    var itemInfo = self._itemInfosForItems[objj_msgSend(anItem, "UID")];
    if (!itemInfo)
        return nil;
    var parent = itemInfo.parent;
    if (itemInfo[objj_msgSend(parent, "UID")] === self._rootItemInfo)
        parent = nil;
    return parent;
}
,["id","id"]), new objj_method(sel_getUid("_frameOfOutlineDataViewAtRow:"), function $CPOutlineView___frameOfOutlineDataViewAtRow_(self, _cmd, aRow)
{
    var columnIndex = objj_msgSend(objj_msgSend(self, "tableColumns"), "indexOfObject:", self._outlineTableColumn),
        frame = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "frameOfDataViewAtColumn:row:", columnIndex, aRow),
        indentationWidth = (objj_msgSend(self, "levelForRow:", aRow) + 1) * objj_msgSend(self, "indentationPerLevel");
    frame.origin.x += indentationWidth;
    frame.size.width -= indentationWidth;
    return frame;
}
,["CGRect","CPInteger"]), new objj_method(sel_getUid("frameOfOutlineDisclosureControlAtRow:"), function $CPOutlineView__frameOfOutlineDisclosureControlAtRow_(self, _cmd, aRow)
{
    var theItem = objj_msgSend(self, "itemAtRow:", aRow);
    if (!objj_msgSend(self, "isExpandable:", theItem) || !objj_msgSend(self, "_shouldShowOutlineDisclosureControlForItem:", theItem))
        return CGRectMakeZero();
    var dataViewFrame = objj_msgSend(self, "_frameOfOutlineDataViewAtRow:", aRow),
        disclosureWidth = CGRectGetWidth(objj_msgSend(self._disclosureControlPrototype, "frame")),
        frame = CGRectMake(CGRectGetMinX(dataViewFrame) - disclosureWidth, CGRectGetMinY(dataViewFrame), disclosureWidth, CGRectGetHeight(dataViewFrame));
    return frame;
}
,["CGRect","CPInteger"]), new objj_method(sel_getUid("_setSelectedRowIndexes:"), function $CPOutlineView___setSelectedRowIndexes_(self, _cmd, rows)
{
    if (self._disclosureControlsForRows.length)
    {
        var indexes = objj_msgSend(self._selectedRowIndexes, "copy");
        objj_msgSend(indexes, "removeIndexesInRange:", CPMakeRange(self._disclosureControlsForRows.length, self._itemsForRows.length - self._disclosureControlsForRows.length));
        objj_msgSend(objj_msgSend(self._disclosureControlsForRows, "objectsAtIndexes:", indexes), "makeObjectsPerformSelector:withObject:", sel_getUid("unsetThemeState:"), CPThemeStateSelected);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "_setSelectedRowIndexes:", rows);
    if (self._disclosureControlsForRows.length)
    {
        var indexes = objj_msgSend(self._selectedRowIndexes, "copy");
        objj_msgSend(indexes, "removeIndexesInRange:", CPMakeRange(self._disclosureControlsForRows.length, self._itemsForRows.length - self._disclosureControlsForRows.length));
        objj_msgSend(objj_msgSend(self._disclosureControlsForRows, "objectsAtIndexes:", indexes), "makeObjectsPerformSelector:withObject:", sel_getUid("setThemeState:"), CPThemeStateSelected);
    }
}
,["void","CPIndexSet"]), new objj_method(sel_getUid("setDelegate:"), function $CPOutlineView__setDelegate_(self, _cmd, aDelegate)
{
    if (self._outlineViewDelegate === aDelegate)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._outlineViewDelegate)
    {
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewColumnDidMove:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewColumnDidMoveNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewColumnDidResize:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewColumnDidResizeNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewSelectionDidChange:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewSelectionDidChangeNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewSelectionIsChanging:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewSelectionIsChangingNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemWillExpand:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewItemWillExpandNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemDidExpand:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewItemDidExpandNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemWillCollapse:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewItemWillCollapseNotification, self);
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemDidCollapse:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._outlineViewDelegate, CPOutlineViewItemDidCollapseNotification, self);
    }
    self._outlineViewDelegate = aDelegate;
    self._implementedOutlineViewDelegateMethods = 0;
    var delegateMethods = [CPOutlineViewDelegate_outlineView_dataViewForTableColumn_item_, sel_getUid("outlineView:dataViewForTableColumn:item:"), CPOutlineViewDelegate_outlineView_viewForTableColumn_item_, sel_getUid("outlineView:viewForTableColumn:item:"), CPOutlineViewDelegate_outlineView_didClickTableColumn_, sel_getUid("outlineView:didClickTableColumn:"), CPOutlineViewDelegate_outlineView_didDragTableColumn_, sel_getUid("outlineView:didDragTableColumn:"), CPOutlineViewDelegate_outlineView_heightOfRowByItem_, sel_getUid("outlineView:heightOfRowByItem:"), CPOutlineViewDelegate_outlineView_isGroupItem_, sel_getUid("outlineView:isGroupItem:"), CPOutlineViewDelegate_outlineView_mouseDownInHeaderOfTableColumn_, sel_getUid("outlineView:mouseDownInHeaderOfTableColumn:"), CPOutlineViewDelegate_outlineView_nextTypeSelectMatchFromItem_toItem_forString_, sel_getUid("outlineView:nextTypeSelectMatchFromItem:toItem:forString:"), CPOutlineViewDelegate_outlineView_selectionIndexesForProposedSelection_, sel_getUid("outlineView:selectionIndexesForProposedSelection:"), CPOutlineViewDelegate_outlineView_shouldCollapseItem_, sel_getUid("outlineView:shouldCollapseItem:"), CPOutlineViewDelegate_outlineView_shouldEditTableColumn_item_, sel_getUid("outlineView:shouldEditTableColumn:item:"), CPOutlineViewDelegate_outlineView_shouldExpandItem_, sel_getUid("outlineView:shouldExpandItem:"), CPOutlineViewDelegate_outlineView_shouldReorderColumn_toColumn_, sel_getUid("outlineView:shouldReorderColumn:toColumn:"), CPOutlineViewDelegate_outlineView_shouldSelectItem_, sel_getUid("outlineView:shouldSelectItem:"), CPOutlineViewDelegate_outlineView_shouldSelectTableColumn_, sel_getUid("outlineView:shouldSelectTableColumn:"), CPOutlineViewDelegate_outlineView_shouldShowOutlineDisclosureControlForItem_, sel_getUid("outlineView:shouldShowOutlineDisclosureControlForItem:"), CPOutlineViewDelegate_outlineView_shouldShowViewExpansionForTableColumn_item_, sel_getUid("outlineView:shouldShowViewExpansionForTableColumn:item:"), CPOutlineViewDelegate_outlineView_shouldTrackView_forTableColumn_item_, sel_getUid("outlineView:shouldTrackView:forTableColumn:item:"), CPOutlineViewDelegate_outlineView_shouldTypeSelectForEvent_withCurrentSearchString_, sel_getUid("outlineView:shouldTypeSelectForEvent:withCurrentSearchString:"), CPOutlineViewDelegate_outlineView_sizeToFitWidthOfColumn_, sel_getUid("outlineView:sizeToFitWidthOfColumn:"), CPOutlineViewDelegate_outlineView_toolTipForView_rect_tableColumn_item_mouseLocation_, sel_getUid("outlineView:toolTipForView:rect:tableColumn:item:mouseLocation:"), CPOutlineViewDelegate_outlineView_typeSelectStringForTableColumn_item_, sel_getUid("outlineView:typeSelectStringForTableColumn:item:"), CPOutlineViewDelegate_outlineView_willDisplayOutlineView_forTableColumn_item_, sel_getUid("outlineView:willDisplayOutlineView:forTableColumn:item:"), CPOutlineViewDelegate_outlineView_willDisplayView_forTableColumn_item_, sel_getUid("outlineView:willDisplayView:forTableColumn:item:"), CPOutlineViewDelegate_selectionShouldChangeInOutlineView_, sel_getUid("selectionShouldChangeInOutlineView:"), CPOutlineViewDelegate_outlineView_menuForTableColumn_item_, sel_getUid("outlineView:menuForTableColumn:item:")],
        delegateCount = objj_msgSend(delegateMethods, "count");
    for (var i = 0; i < delegateCount; i += 2)
    {
        var bitMask = delegateMethods[i],
            selector = delegateMethods[i + 1];
        if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", selector))
            self._implementedOutlineViewDelegateMethods |= bitMask;
    }
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewColumnDidMove:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewColumnDidMove:"), CPOutlineViewColumnDidMoveNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewColumnDidResize:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewColumnDidMove:"), CPOutlineViewColumnDidResizeNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewSelectionDidChange:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewSelectionDidChange:"), CPOutlineViewSelectionDidChangeNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewSelectionIsChanging:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewSelectionIsChanging:"), CPOutlineViewSelectionIsChangingNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemWillExpand:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewItemWillExpand:"), CPOutlineViewItemWillExpandNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemDidExpand:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewItemDidExpand:"), CPOutlineViewItemDidExpandNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemWillCollapse:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewItemWillCollapse:"), CPOutlineViewItemWillCollapseNotification, self);
    if (objj_msgSend(self._outlineViewDelegate, "respondsToSelector:", sel_getUid("outlineViewItemDidCollapse:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._outlineViewDelegate, sel_getUid("outlineViewItemDidCollapse:"), CPOutlineViewItemDidCollapseNotification, self);
    objj_msgSend(self, "_updateIsViewBased");
    if (objj_msgSend(self, "_delegateRespondsToDataViewForTableColumn"))
        CPLog.warn("outlineView:dataViewForTableColumn:item: is deprecated. You should use -outlineView:viewForTableColumn:item: where you can request the view with -makeViewWithIdentifier:owner:");
}
,["void","id"]), new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"), function $CPOutlineView___sendDelegateDeleteKeyPressed(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "delegate"), "respondsToSelector:", sel_getUid("outlineViewDeleteKeyPressed:")))
    {
        objj_msgSend(objj_msgSend(self, "delegate"), "outlineViewDeleteKeyPressed:", self);
        return YES;
    }
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("delegate"), function $CPOutlineView__delegate(self, _cmd)
{
    return self._outlineViewDelegate;
}
,["id"]), new objj_method(sel_getUid("setDisclosureControlPrototype:"), function $CPOutlineView__setDisclosureControlPrototype_(self, _cmd, aControl)
{
    self._disclosureControlPrototype = aControl;
    self._disclosureControlData = nil;
    self._disclosureControlQueue = [];
    objj_msgSend(self, "reloadData");
}
,["void","CPControl"]), new objj_method(sel_getUid("reloadData"), function $CPOutlineView__reloadData(self, _cmd)
{
    objj_msgSend(self, "reloadItem:reloadChildren:", nil, YES);
}
,["void"]), new objj_method(sel_getUid("addTableColumn:"), function $CPOutlineView__addTableColumn_(self, _cmd, aTableColumn)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "addTableColumn:", aTableColumn);
    if (objj_msgSend(self, "numberOfColumns") === 1)
        self._outlineTableColumn = aTableColumn;
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("removeTableColumn:"), function $CPOutlineView__removeTableColumn_(self, _cmd, aTableColumn)
{
    if (aTableColumn === objj_msgSend(self, "outlineTableColumn"))
        CPLog("CPOutlineView cannot remove outlineTableColumn with removeTableColumn:. User setOutlineTableColumn: instead.");
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "removeTableColumn:", aTableColumn);
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"), function $CPOutlineView__frameOfDataViewAtColumn_row_(self, _cmd, aColumn, aRow)
{
    var tableColumn = objj_msgSend(self, "tableColumns")[aColumn];
    if (tableColumn === self._outlineTableColumn)
        return objj_msgSend(self, "_frameOfOutlineDataViewAtRow:", aRow);
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "frameOfDataViewAtColumn:row:", aColumn, aRow);
}
,["CGRect","CPInteger","CPInteger"]), new objj_method(sel_getUid("_dragViewForColumn:event:offset:"), function $CPOutlineView___dragViewForColumn_event_offset_(self, _cmd, theColumnIndex, theDragEvent, theDragViewOffset)
{
    var dragView = objj_msgSend(objj_msgSend(_CPColumnDragView, "alloc"), "initWithLineColor:", objj_msgSend(self, "gridColor")),
        tableColumn = objj_msgSend(objj_msgSend(self, "tableColumns"), "objectAtIndex:", theColumnIndex),
        defaultRowHeight = objj_msgSend(self, "valueForThemeAttribute:", "default-row-height"),
        bounds = CGRectMake(0.0, 0.0, objj_msgSend(tableColumn, "width"), CGRectGetHeight(objj_msgSend(self, "exposedRect")) + defaultRowHeight),
        columnRect = objj_msgSend(self, "rectOfColumn:", theColumnIndex),
        headerView = objj_msgSend(tableColumn, "headerView"),
        row = objj_msgSend(self._exposedRows, "firstIndex");
    while (row !== CPNotFound)
    {
        var dataView = objj_msgSend(self, "_newDataViewForRow:tableColumn:", row, tableColumn),
            dataViewFrame = objj_msgSend(self, "frameOfDataViewAtColumn:row:", theColumnIndex, row);
        dataViewFrame.origin.x = 0.0;
        dataViewFrame.origin.y = CGRectGetMinY(dataViewFrame) - CGRectGetMinY(objj_msgSend(self, "exposedRect")) + defaultRowHeight;
        objj_msgSend(dataView, "setFrame:", dataViewFrame);
        objj_msgSend(dataView, "setObjectValue:", objj_msgSend(self, "_objectValueForTableColumn:row:", tableColumn, row));
        if (tableColumn === self._outlineTableColumn)
        {
            var indentationWidth = (objj_msgSend(self, "levelForRow:", row) + 1) * objj_msgSend(self, "indentationPerLevel");
            dataViewFrame.origin.x += indentationWidth;
            dataViewFrame.size.width -= indentationWidth;
            objj_msgSend(dataView, "setFrame:", dataViewFrame);
        }
        objj_msgSend(dragView, "addSubview:", dataView);
        row = objj_msgSend(self._exposedRows, "indexGreaterThanIndex:", row);
    }
    var headerFrame = objj_msgSend(headerView, "frame");
    headerFrame.origin = CGPointMakeZero();
    var columnHeaderView = objj_msgSend(objj_msgSend(_CPTableColumnHeaderView, "alloc"), "initWithFrame:", headerFrame);
    objj_msgSend(columnHeaderView, "setStringValue:", objj_msgSend(headerView, "stringValue"));
    objj_msgSend(columnHeaderView, "setThemeState:", objj_msgSend(headerView, "themeState"));
    objj_msgSend(dragView, "addSubview:", columnHeaderView);
    objj_msgSend(dragView, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
    objj_msgSend(dragView, "setAlphaValue:", 0.7);
    objj_msgSend(dragView, "setFrame:", bounds);
    return dragView;
}
,["CPView","int","CPEvent","CGPoint"]), new objj_method(sel_getUid("setDropItem:dropChildIndex:"), function $CPOutlineView__setDropItem_dropChildIndex_(self, _cmd, theItem, theIndex)
{
    if (self._dropItem !== theItem && theIndex < 0 && objj_msgSend(self, "isExpandable:", theItem) && !objj_msgSend(self, "isItemExpanded:", theItem))
    {
        if (self._dragHoverTimer)
            objj_msgSend(self._dragHoverTimer, "invalidate");
        var autoExpandCallBack = function()
        {
            if (self._dropItem)
            {
                objj_msgSend(self._dropOperationFeedbackView, "blink");
                objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", .3, objj_msgSend(self, "expandItem:", self._dropItem), NO);
            }
        };
        self._dragHoverTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", .8, autoExpandCallBack, NO);
    }
    if (theIndex >= 0)
    {
        objj_msgSend(self._dragHoverTimer, "invalidate");
        self._dragHoverTimer = nil;
    }
    self._dropItem = theItem;
    self._retargetedItem = theItem;
    self._shouldRetargetItem = YES;
    self._retargedChildIndex = theIndex;
    self._shouldRetargetChildIndex = YES;
    var retargetedItemInfo = self._retargetedItem !== nil ? self._itemInfosForItems[objj_msgSend(self._retargetedItem, "UID")] : self._rootItemInfo;
    if (self._retargedChildIndex === objj_msgSend(retargetedItemInfo.children, "count"))
    {
        var retargetedChildItem = objj_msgSend(retargetedItemInfo.children, "lastObject");
        self._retargetedDropRow = objj_msgSend(self, "rowForItem:", retargetedChildItem) + 1;
    }
    else
    {
        var retargetedChildItem = self._retargedChildIndex !== CPOutlineViewDropOnItemIndex ? retargetedItemInfo.children[self._retargedChildIndex] : self._retargetedItem;
        self._retargetedDropRow = objj_msgSend(self, "rowForItem:", retargetedChildItem);
    }
}
,["void","id","int"]), new objj_method(sel_getUid("_draggingEnded"), function $CPOutlineView___draggingEnded(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "_draggingEnded");
    self._dropItem = nil;
    objj_msgSend(self._dragHoverTimer, "invalidate");
    self._dragHoverTimer = nil;
}
,["void"]), new objj_method(sel_getUid("_parentItemForUpperRow:andLowerRow:atMouseOffset:"), function $CPOutlineView___parentItemForUpperRow_andLowerRow_atMouseOffset_(self, _cmd, theUpperRowIndex, theLowerRowIndex, theOffset)
{
    if (self._shouldRetargetItem)
        return self._retargetedItem;
    var lowerLevel = objj_msgSend(self, "levelForRow:", theLowerRowIndex),
        upperItem = objj_msgSend(self, "itemAtRow:", theUpperRowIndex),
        upperLevel = objj_msgSend(self, "levelForItem:", upperItem);
    while (upperLevel > lowerLevel)
    {
        upperLevel = objj_msgSend(self, "levelForItem:", upperItem);
        if (theOffset.x > (upperLevel + 1) * objj_msgSend(self, "indentationPerLevel"))
            return objj_msgSend(self, "parentForItem:", upperItem);
        upperItem = objj_msgSend(self, "parentForItem:", upperItem);
    }
    return objj_msgSend(self, "parentForItem:", objj_msgSend(self, "itemAtRow:", theLowerRowIndex));
}
,["id","int","int","CGPoint"]), new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"), function $CPOutlineView___rectForDropHighlightViewBetweenUpperRow_andLowerRow_offset_(self, _cmd, theUpperRowIndex, theLowerRowIndex, theOffset)
{
    var rect = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:", theUpperRowIndex, theLowerRowIndex, theOffset),
        parentItem = objj_msgSend(self, "_parentItemForUpperRow:andLowerRow:atMouseOffset:", theUpperRowIndex, theLowerRowIndex, theOffset),
        level = objj_msgSend(self, "levelForItem:", parentItem);
    rect.origin.x = (level + 1) * objj_msgSend(self, "indentationPerLevel");
    rect.size.width -= rect.origin.x;
    return rect;
}
,["CGRect","int","int","CGPoint"]), new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"), function $CPOutlineView___layoutDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    var rowArray = [],
        columnArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    objj_msgSend(columns, "getIndexes:maxCount:inIndexRange:", columnArray, -1, nil);
    var columnIndex = 0,
        columnsCount = columnArray.length;
    for (; columnIndex < columnsCount; ++columnIndex)
    {
        var column = columnArray[columnIndex],
            tableColumn = self._tableColumns[column],
            tableColumnUID = objj_msgSend(tableColumn, "UID"),
            dataViewsForTableColumn = self._dataViewsForTableColumns[tableColumnUID],
            rowIndex = 0,
            rowsCount = rowArray.length;
        for (; rowIndex < rowsCount; ++rowIndex)
        {
            var row = rowArray[rowIndex],
                dataView = dataViewsForTableColumn[row],
                dataViewFrame = objj_msgSend(self, "frameOfDataViewAtColumn:row:", column, row);
            objj_msgSend(dataView, "setFrame:", dataViewFrame);
            if (tableColumn === self._outlineTableColumn)
            {
                var control = self._disclosureControlsForRows[row],
                    frame = objj_msgSend(self, "frameOfOutlineDisclosureControlAtRow:", row);
                objj_msgSend(control, "setFrame:", frame);
            }
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_loadDataViewsInRows:columns:"), function $CPOutlineView___loadDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "_loadDataViewsInRows:columns:", rows, columns);
    var outlineColumn = objj_msgSend(objj_msgSend(self, "tableColumns"), "indexOfObjectIdenticalTo:", objj_msgSend(self, "outlineTableColumn"));
    if (!objj_msgSend(columns, "containsIndex:", outlineColumn) || objj_msgSend(self, "outlineTableColumn") === self._draggedColumn)
        return;
    var rowArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    var rowIndex = 0,
        rowsCount = rowArray.length;
    for (; rowIndex < rowsCount; ++rowIndex)
    {
        var row = rowArray[rowIndex],
            item = self._itemsForRows[row],
            isExpandable = objj_msgSend(self, "isExpandable:", item);
        if (!isExpandable)
            continue;
        var disclosureControlFrame = objj_msgSend(self, "frameOfOutlineDisclosureControlAtRow:", row);
        if (CGRectIsEmpty(disclosureControlFrame))
            continue;
        var control = objj_msgSend(self, "_dequeueDisclosureControl");
        self._disclosureControlsForRows[row] = control;
        objj_msgSend(control, "setState:", objj_msgSend(self, "isItemExpanded:", item) ? CPOnState : CPOffState);
        var selector = objj_msgSend(self, "isRowSelected:", row) ? "setThemeState:" : "unsetThemeState:";
        objj_msgSend(control, "performSelector:withObject:", CPSelectorFromString(selector), CPThemeStateSelected);
        objj_msgSend(control, "setFrame:", disclosureControlFrame);
        objj_msgSend(self, "addSubview:", control);
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"), function $CPOutlineView___unloadDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "_unloadDataViewsInRows:columns:", rows, columns);
    var outlineColumn = objj_msgSend(objj_msgSend(self, "tableColumns"), "indexOfObjectIdenticalTo:", objj_msgSend(self, "outlineTableColumn"));
    if (!objj_msgSend(columns, "containsIndex:", outlineColumn))
        return;
    var rowArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    var rowIndex = 0,
        rowsCount = rowArray.length;
    for (; rowIndex < rowsCount; ++rowIndex)
    {
        var row = rowArray[rowIndex],
            control = self._disclosureControlsForRows[row];
        if (!control)
            continue;
        objj_msgSend(control, "removeFromSuperview");
        objj_msgSend(self, "_enqueueDisclosureControl:", control);
        self._disclosureControlsForRows[row] = nil;
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_toggleFromDisclosureControl:"), function $CPOutlineView___toggleFromDisclosureControl_(self, _cmd, aControl)
{
    var controlFrame = objj_msgSend(aControl, "frame"),
        item = objj_msgSend(self, "itemAtRow:", objj_msgSend(self, "rowAtPoint:", CGPointMake(CGRectGetMinX(controlFrame), CGRectGetMidY(controlFrame))));
    if (objj_msgSend(self, "isItemExpanded:", item))
        objj_msgSend(self, "collapseItem:", item);
    else
        objj_msgSend(self, "expandItem:expandChildren:", item, objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "modifierFlags") & CPAlternateKeyMask);
}
,["void","CPControl"]), new objj_method(sel_getUid("_enqueueDisclosureControl:"), function $CPOutlineView___enqueueDisclosureControl_(self, _cmd, aControl)
{
    self._disclosureControlQueue.push(aControl);
}
,["void","CPControl"]), new objj_method(sel_getUid("_dequeueDisclosureControl"), function $CPOutlineView___dequeueDisclosureControl(self, _cmd)
{
    if (self._disclosureControlQueue.length)
        return self._disclosureControlQueue.pop();
    if (!self._disclosureControlData)
        if (!self._disclosureControlPrototype)
            return nil;
        else
            self._disclosureControlData = objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self._disclosureControlPrototype);
    var disclosureControl = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", self._disclosureControlData);
    objj_msgSend(disclosureControl, "setTarget:", self);
    objj_msgSend(disclosureControl, "setAction:", sel_getUid("_toggleFromDisclosureControl:"));
    return disclosureControl;
}
,["CPControl"]), new objj_method(sel_getUid("_noteSelectionIsChanging"), function $CPOutlineView___noteSelectionIsChanging(self, _cmd)
{
    if (!self._coalesceSelectionNotificationState || self._coalesceSelectionNotificationState === CPOutlineViewCoalesceSelectionNotificationStateOn)
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewSelectionIsChangingNotification, self, nil);
    }
    if (self._coalesceSelectionNotificationState === CPOutlineViewCoalesceSelectionNotificationStateOn)
        self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateDid;
}
,["void"]), new objj_method(sel_getUid("_noteSelectionDidChange"), function $CPOutlineView___noteSelectionDidChange(self, _cmd)
{
    if (!self._coalesceSelectionNotificationState)
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewSelectionDidChangeNotification, self, nil);
    }
    if (self._coalesceSelectionNotificationState === CPOutlineViewCoalesceSelectionNotificationStateOn)
        self._coalesceSelectionNotificationState = CPOutlineViewCoalesceSelectionNotificationStateDid;
}
,["void"]), new objj_method(sel_getUid("_noteItemWillExpand:"), function $CPOutlineView___noteItemWillExpand_(self, _cmd, item)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewItemWillExpandNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", item, "CPObject"));
}
,["void","id"]), new objj_method(sel_getUid("_noteItemDidExpand:"), function $CPOutlineView___noteItemDidExpand_(self, _cmd, item)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewItemDidExpandNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", item, "CPObject"));
}
,["void","id"]), new objj_method(sel_getUid("_noteItemWillCollapse:"), function $CPOutlineView___noteItemWillCollapse_(self, _cmd, item)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewItemWillCollapseNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", item, "CPObject"));
}
,["void","id"]), new objj_method(sel_getUid("_noteItemDidCollapse:"), function $CPOutlineView___noteItemDidCollapse_(self, _cmd, item)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPOutlineViewItemDidCollapseNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", item, "CPObject"));
}
,["void","id"]), new objj_method(sel_getUid("keyDown:"), function $CPOutlineView__keyDown_(self, _cmd, anEvent)
{
    var character = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
        modifierFlags = objj_msgSend(anEvent, "modifierFlags");
    if (character !== CPRightArrowFunctionKey && character !== CPLeftArrowFunctionKey)
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "keyDown:", anEvent);
    var rows = objj_msgSend(self, "selectedRowIndexes"),
        indexes = [],
        items = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", indexes, -1, nil);
    var i = 0,
        c = objj_msgSend(indexes, "count");
    for (; i < c; i++)
        items.push(objj_msgSend(self, "itemAtRow:", indexes[i]));
    if (character === CPRightArrowFunctionKey)
    {
        for (var i = 0; i < c; i++)
            objj_msgSend(self, "expandItem:", items[i]);
    }
    else if (character === CPLeftArrowFunctionKey)
    {
        if (c == 1)
        {
            var theItem = items[0];
            if (!objj_msgSend(self, "isItemExpanded:", theItem))
            {
                var parent = objj_msgSend(self, "parentForItem:", theItem),
                    shouldSelect = parent && (!(self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_selectionShouldChangeInOutlineView_) || objj_msgSend(self._outlineViewDelegate, "selectionShouldChangeInOutlineView:", self)) && (!(self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldSelectItem_) || objj_msgSend(self._outlineViewDelegate, "outlineView:shouldSelectItem:", self, parent));
                if (shouldSelect)
                {
                    var rowIndex = objj_msgSend(self, "rowForItem:", parent);
                    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", rowIndex), NO);
                    objj_msgSend(self, "scrollRowToVisible:", rowIndex);
                    return;
                }
            }
        }
        for (var i = 0; i < c; i++)
            objj_msgSend(self, "collapseItem:", items[i]);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "keyDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_sendDelegateViewForTableColumn:row:"), function $CPOutlineView___sendDelegateViewForTableColumn_row_(self, _cmd, aTableColumn, aRow)
{
    return objj_msgSend(self._outlineViewDelegate, "outlineView:viewForTableColumn:item:", self, aTableColumn, objj_msgSend(self, "itemAtRow:", aRow));
}
,["CPView","CPTableColumn","CPInteger"]), new objj_method(sel_getUid("_sendDelegateDataViewForTableColumn:row:"), function $CPOutlineView___sendDelegateDataViewForTableColumn_row_(self, _cmd, aTableColumn, aRow)
{
    return objj_msgSend(self._outlineViewDelegate, "outlineView:dataViewForTableColumn:item:", self, aTableColumn, objj_msgSend(self, "itemAtRow:", aRow));
}
,["CPView","CPTableColumn","CPInteger"]), new objj_method(sel_getUid("_dataSourceRespondsToObjectValueForTableColumn"), function $CPOutlineView___dataSourceRespondsToObjectValueForTableColumn(self, _cmd)
{
    return self._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_objectValue_forTableColumn_byItem_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToViewForTableColumn"), function $CPOutlineView___delegateRespondsToViewForTableColumn(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_viewForTableColumn_item_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToDataViewForTableColumn"), function $CPOutlineView___delegateRespondsToDataViewForTableColumn(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_dataViewForTableColumn_item_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToShouldExpandItem"), function $CPOutlineView___delegateRespondsToShouldExpandItem(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldExpandItem_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToShouldCollapseItem"), function $CPOutlineView___delegateRespondsToShouldCollapseItem(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldCollapseItem_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToSelectionIndexesForProposedSelection"), function $CPOutlineView___delegateRespondsToSelectionIndexesForProposedSelection(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_selectionIndexesForProposedSelection_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToShouldSelectRow"), function $CPOutlineView___delegateRespondsToShouldSelectRow(self, _cmd)
{
    return self._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldSelectItem_;
}
,["BOOL"])]);
}var _reloadItem = function(anOutlineView, anItem)
{
    if (!anItem)
        return;
    with(anOutlineView)
    {
        var itemInfosForItems = _itemInfosForItems,
            dataSource = _outlineViewDataSource,
            itemUID = objj_msgSend(anItem, "UID"),
            itemInfo = itemInfosForItems[itemUID];
        if (!itemInfo)
            return [];
        var parent = itemInfo.parent,
            parentItemInfo = parent ? itemInfosForItems[objj_msgSend(parent, "UID")] : _rootItemInfo,
            parentChildren = parentItemInfo.children,
            index = objj_msgSend(parentChildren, "indexOfObjectIdenticalTo:", anItem),
            newItem = objj_msgSend(dataSource, "outlineView:child:ofItem:", anOutlineView, index, parent);
        if (anItem !== newItem)
        {
            itemInfosForItems[objj_msgSend(anItem, "UID")] = nil;
            itemInfosForItems[objj_msgSend(newItem, "UID")] = itemInfo;
            parentChildren[index] = newItem;
            _itemsForRows[itemInfo.row] = newItem;
        }
        itemInfo.isExpandable = objj_msgSend(dataSource, "outlineView:isItemExpandable:", anOutlineView, newItem);
        itemInfo.isExpanded = itemInfo.isExpandable && itemInfo.isExpanded;
        itemInfo.shouldShowOutlineDisclosureControl = !(_implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldShowOutlineDisclosureControlForItem_) || objj_msgSend(_outlineViewDelegate, "outlineView:shouldShowOutlineDisclosureControlForItem:", self, newItem);
    }
};
var _loadItemInfoForItem = function(anOutlineView, anItem, isIntermediate)
{
    with(anOutlineView)
    {
        var itemInfosForItems = _itemInfosForItems,
            dataSource = _outlineViewDataSource;
        if (!anItem)
            var itemInfo = _rootItemInfo;
        else
        {
            var itemUID = objj_msgSend(anItem, "UID"),
                itemInfo = itemInfosForItems[itemUID];
            if (!itemInfo)
                return [];
            itemInfo.isExpandable = objj_msgSend(dataSource, "outlineView:isItemExpandable:", anOutlineView, anItem);
            itemInfo.shouldShowOutlineDisclosureControl = !(_implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldShowOutlineDisclosureControlForItem_) || objj_msgSend(_outlineViewDelegate, "outlineView:shouldShowOutlineDisclosureControlForItem:", self, anItem);
            if (!itemInfo.isExpandable && itemInfo.isExpanded)
            {
                itemInfo.isExpanded = NO;
                itemInfo.children = [];
            }
        }
        var weight = itemInfo.weight,
            descendants = anItem ? [anItem] : [];
        if (itemInfo.isExpanded && (!(_implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_shouldDeferDisplayingChildrenOfItem_) || !objj_msgSend(dataSource, "outlineView:shouldDeferDisplayingChildrenOfItem:", anOutlineView, anItem)))
        {
            var index = 0,
                count = objj_msgSend(dataSource, "outlineView:numberOfChildrenOfItem:", anOutlineView, anItem),
                level = itemInfo.level + 1;
            itemInfo.children = [];
            for (; index < count; ++index)
            {
                var childItem = objj_msgSend(dataSource, "outlineView:child:ofItem:", anOutlineView, index, anItem),
                    childItemInfo = itemInfosForItems[objj_msgSend(childItem, "UID")];
                if (!childItemInfo)
                {
                    childItemInfo = {isExpanded: NO, isExpandable: NO, shouldShowOutlineDisclosureControl: YES, children: [], weight: 1};
                    itemInfosForItems[objj_msgSend(childItem, "UID")] = childItemInfo;
                }
                itemInfo.children[index] = childItem;
                var childDescendants = _loadItemInfoForItem(anOutlineView, childItem, YES);
                childItemInfo.parent = anItem;
                childItemInfo.level = level;
                descendants = descendants.concat(childDescendants);
            }
        }
        itemInfo.weight = descendants.length;
        if (!isIntermediate)
        {
            var index = MAX(itemInfo.row, 0),
                itemsForRows = _itemsForRows;
            descendants.unshift(index, weight);
            itemsForRows.splice.apply(itemsForRows, descendants);
            var count = itemsForRows.length;
            for (; index < count; ++index)
                itemInfosForItems[objj_msgSend(itemsForRows[index], "UID")].row = index;
            var deltaWeight = itemInfo.weight - weight;
            if (deltaWeight !== 0)
            {
                var parent = itemInfo.parent;
                while (parent)
                {
                    var parentItemInfo = itemInfosForItems[objj_msgSend(parent, "UID")];
                    parentItemInfo.weight += deltaWeight;
                    parent = parentItemInfo.parent;
                }
                if (anItem)
                    _rootItemInfo.weight += deltaWeight;
            }
        }
    }
    return descendants;
};
{var the_class = objj_allocateClassPair(CPObject, "_CPOutlineViewTableViewDataSource"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_outlineView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithOutlineView:"), function $_CPOutlineViewTableViewDataSource__initWithOutlineView_(self, _cmd, anOutlineView)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPOutlineViewTableViewDataSource").super_class }, "init");
    if (self)
        self._outlineView = anOutlineView;
    return self;
}
,["id","CPOutlineView"]), new objj_method(sel_getUid("numberOfRowsInTableView:"), function $_CPOutlineViewTableViewDataSource__numberOfRowsInTableView_(self, _cmd, anOutlineView)
{
    return self._outlineView._itemsForRows.length;
}
,["CPInteger","CPTableView"]), new objj_method(sel_getUid("tableView:objectValueForTableColumn:row:"), function $_CPOutlineViewTableViewDataSource__tableView_objectValueForTableColumn_row_(self, _cmd, aTableView, aTableColumn, aRow)
{
    return objj_msgSend(self._outlineView._outlineViewDataSource, "outlineView:objectValueForTableColumn:byItem:", self._outlineView, aTableColumn, self._outlineView._itemsForRows[aRow]);
}
,["id","CPTableView","CPTableColumn","CPInteger"]), new objj_method(sel_getUid("tableView:setObjectValue:forTableColumn:row:"), function $_CPOutlineViewTableViewDataSource__tableView_setObjectValue_forTableColumn_row_(self, _cmd, aTableView, aValue, aColumn, aRow)
{
    if (!(self._outlineView._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_setObjectValue_forTableColumn_byItem_))
        return;
    objj_msgSend(self._outlineView._outlineViewDataSource, "outlineView:setObjectValue:forTableColumn:byItem:", self._outlineView, aValue, aColumn, self._outlineView._itemsForRows[aRow]);
}
,["void","CPTableView","id","CPTableColumn","CPInteger"]), new objj_method(sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:"), function $_CPOutlineViewTableViewDataSource__tableView_writeRowsWithIndexes_toPasteboard_(self, _cmd, aTableColumn, theIndexes, thePasteboard)
{
    if (!(self._outlineView._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_writeItems_toPasteboard_))
        return NO;
    var items = [],
        index = objj_msgSend(theIndexes, "firstIndex");
    while (index !== CPNotFound)
    {
        objj_msgSend(items, "addObject:", objj_msgSend(self._outlineView, "itemAtRow:", index));
        index = objj_msgSend(theIndexes, "indexGreaterThanIndex:", index);
    }
    return objj_msgSend(self._outlineView._outlineViewDataSource, "outlineView:writeItems:toPasteboard:", self._outlineView, items, thePasteboard);
}
,["BOOL","CPTableView","CPIndexSet","CPPasteboard"]), new objj_method(sel_getUid("_childIndexForDropOperation:row:offset:"), function $_CPOutlineViewTableViewDataSource___childIndexForDropOperation_row_offset_(self, _cmd, theDropOperation, theRow, theOffset)
{
    if (self._outlineView._shouldRetargetChildIndex)
        return self._outlineView._retargedChildIndex;
    var childIndex = CPNotFound;
    if (theDropOperation === CPTableViewDropAbove)
    {
        var parentItem = objj_msgSend(self._outlineView, "_parentItemForUpperRow:andLowerRow:atMouseOffset:", theRow - 1, theRow, theOffset),
            itemInfo = parentItem !== nil ? self._outlineView._itemInfosForItems[objj_msgSend(parentItem, "UID")] : self._outlineView._rootItemInfo,
            children = itemInfo.children;
        childIndex = objj_msgSend(children, "indexOfObject:", objj_msgSend(self._outlineView, "itemAtRow:", theRow));
        if (childIndex === CPNotFound)
            childIndex = children.length;
    }
    else if (theDropOperation === CPTableViewDropOn)
        childIndex = -1;
    return childIndex;
}
,["int","CPTableViewDropOperation","int","CGPoint"]), new objj_method(sel_getUid("_parentItemForDropOperation:row:offset:"), function $_CPOutlineViewTableViewDataSource___parentItemForDropOperation_row_offset_(self, _cmd, theDropOperation, theRow, theOffset)
{
    if (theDropOperation === CPTableViewDropAbove)
        return objj_msgSend(self._outlineView, "_parentItemForUpperRow:andLowerRow:atMouseOffset:", theRow - 1, theRow, theOffset);
    return objj_msgSend(self._outlineView, "itemAtRow:", theRow);
}
,["void","CPTableViewDropOperation","int","CGPoint"]), new objj_method(sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:"), function $_CPOutlineViewTableViewDataSource__tableView_validateDrop_proposedRow_proposedDropOperation_(self, _cmd, aTableView, theInfo, theRow, theOperation)
{
    if (!(self._outlineView._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_validateDrop_proposedItem_proposedChildIndex_))
        return CPDragOperationNone;
    self._outlineView._retargetedItem = nil;
    self._outlineView._shouldRetargetItem = NO;
    self._outlineView._retargedChildIndex = nil;
    self._outlineView._shouldRetargetChildIndex = NO;
    var location = objj_msgSend(self._outlineView, "convertPoint:fromView:", objj_msgSend(theInfo, "draggingLocation"), nil),
        parentItem = objj_msgSend(self, "_parentItemForDropOperation:row:offset:", theOperation, theRow, location),
        childIndex = objj_msgSend(self, "_childIndexForDropOperation:row:offset:", theOperation, theRow, location);
    return objj_msgSend(self._outlineView._outlineViewDataSource, "outlineView:validateDrop:proposedItem:proposedChildIndex:", self._outlineView, theInfo, parentItem, childIndex);
}
,["CPDragOperation","CPTableView","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("tableView:acceptDrop:row:dropOperation:"), function $_CPOutlineViewTableViewDataSource__tableView_acceptDrop_row_dropOperation_(self, _cmd, aTableView, theInfo, theRow, theOperation)
{
    if (!(self._outlineView._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_acceptDrop_item_childIndex_))
        return NO;
    var location = objj_msgSend(self._outlineView, "convertPoint:fromView:", objj_msgSend(theInfo, "draggingLocation"), nil),
        parentItem = objj_msgSend(self, "_parentItemForDropOperation:row:offset:", theOperation, theRow, location),
        childIndex = objj_msgSend(self, "_childIndexForDropOperation:row:offset:", theOperation, theRow, location);
    self._outlineView._retargetedItem = nil;
    self._outlineView._shouldRetargetItem = NO;
    self._outlineView._retargedChildIndex = nil;
    self._outlineView._shouldRetargetChildIndex = NO;
    return objj_msgSend(self._outlineView._outlineViewDataSource, "outlineView:acceptDrop:item:childIndex:", self._outlineView, theInfo, parentItem, childIndex);
}
,["BOOL","CPTableView","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("tableView:sortDescriptorsDidChange:"), function $_CPOutlineViewTableViewDataSource__tableView_sortDescriptorsDidChange_(self, _cmd, aTableView, oldSortDescriptors)
{
    if (self._outlineView._implementedOutlineViewDataSourceMethods & CPOutlineViewDataSource_outlineView_sortDescriptorsDidChange_)
    {
        objj_msgSend(objj_msgSend(self._outlineView, "dataSource"), "outlineView:sortDescriptorsDidChange:", self._outlineView, oldSortDescriptors);
    }
}
,["void","CPTableView","CPArray"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPOutlineViewTableViewDelegate"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_outlineView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithOutlineView:"), function $_CPOutlineViewTableViewDelegate__initWithOutlineView_(self, _cmd, anOutlineView)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPOutlineViewTableViewDelegate").super_class }, "init");
    if (self)
        self._outlineView = anOutlineView;
    return self;
}
,["id","CPOutlineView"]), new objj_method(sel_getUid("tableView:shouldSelectRow:"), function $_CPOutlineViewTableViewDelegate__tableView_shouldSelectRow_(self, _cmd, theTableView, theRow)
{
    return !(self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldSelectItem_) || objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:shouldSelectItem:", self._outlineView, objj_msgSend(self._outlineView, "itemAtRow:", theRow));
}
,["BOOL","CPTableView","int"]), new objj_method(sel_getUid("selectionShouldChangeInTableView:"), function $_CPOutlineViewTableViewDelegate__selectionShouldChangeInTableView_(self, _cmd, theTableView)
{
    return !(self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_selectionShouldChangeInOutlineView_) || objj_msgSend(self._outlineView._outlineViewDelegate, "selectionShouldChangeInOutlineView:", self._outlineView);
}
,["BOOL","CPTableView"]), new objj_method(sel_getUid("tableView:shouldEditTableColumn:row:"), function $_CPOutlineViewTableViewDelegate__tableView_shouldEditTableColumn_row_(self, _cmd, aTableView, aColumn, aRow)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_shouldEditTableColumn_item_)
        return objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:shouldEditTableColumn:item:", self._outlineView, aColumn, objj_msgSend(self._outlineView, "itemAtRow:", aRow));
    return NO;
}
,["BOOL","CPTableView","CPTableColumn","int"]), new objj_method(sel_getUid("tableView:heightOfRow:"), function $_CPOutlineViewTableViewDelegate__tableView_heightOfRow_(self, _cmd, theTableView, theRow)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_heightOfRowByItem_)
        return objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:heightOfRowByItem:", self._outlineView, objj_msgSend(self._outlineView, "itemAtRow:", theRow));
    return objj_msgSend(theTableView, "rowHeight");
}
,["float","CPTableView","int"]), new objj_method(sel_getUid("tableView:willDisplayView:forTableColumn:row:"), function $_CPOutlineViewTableViewDelegate__tableView_willDisplayView_forTableColumn_row_(self, _cmd, aTableView, aView, aTableColumn, aRowIndex)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_willDisplayView_forTableColumn_item_)
    {
        var item = objj_msgSend(self._outlineView, "itemAtRow:", aRowIndex);
        objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:willDisplayView:forTableColumn:item:", self._outlineView, aView, aTableColumn, item);
    }
}
,["void","CPTableView","id","CPTableColumn","int"]), new objj_method(sel_getUid("tableView:isGroupRow:"), function $_CPOutlineViewTableViewDelegate__tableView_isGroupRow_(self, _cmd, aTableView, aRow)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_isGroupItem_)
        return objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:isGroupItem:", self._outlineView, objj_msgSend(self._outlineView, "itemAtRow:", aRow));
    return NO;
}
,["BOOL","CPTableView","int"]), new objj_method(sel_getUid("tableView:menuForTableColumn:row:"), function $_CPOutlineViewTableViewDelegate__tableView_menuForTableColumn_row_(self, _cmd, aTableView, aTableColumn, aRow)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_menuForTableColumn_item_)
    {
        var item = objj_msgSend(self._outlineView, "itemAtRow:", aRow);
        return objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:menuForTableColumn:item:", self._outlineView, aTableColumn, item);
    }
    return objj_msgSend(self._outlineView, "menu") || objj_msgSend(objj_msgSend(self._outlineView, "class"), "defaultMenu");
}
,["CPMenu","CPTableView","CPTableColumn","int"]), new objj_method(sel_getUid("tableView:selectionIndexesForProposedSelection:"), function $_CPOutlineViewTableViewDelegate__tableView_selectionIndexesForProposedSelection_(self, _cmd, aTableView, anIndexSet)
{
    if (self._outlineView._implementedOutlineViewDelegateMethods & CPOutlineViewDelegate_outlineView_selectionIndexesForProposedSelection_)
        return objj_msgSend(self._outlineView._outlineViewDelegate, "outlineView:selectionIndexesForProposedSelection:", self._outlineView, anIndexSet);
    return anIndexSet;
}
,["CPIndexSet","CPTableView","CPIndexSet"])]);
}{var the_class = objj_allocateClassPair(CPButton, "CPDisclosureButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_angle")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPDisclosureButton__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDisclosureButton").super_class }, "initWithFrame:", aFrame);
    if (self)
        objj_msgSend(self, "setBordered:", NO);
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setState:"), function $CPDisclosureButton__setState_(self, _cmd, aState)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDisclosureButton").super_class }, "setState:", aState);
    if (objj_msgSend(self, "state") === CPOnState)
        self._angle = 0.0;
    else
        self._angle = -PI_2;
}
,["void","CPState"]), new objj_method(sel_getUid("drawRect:"), function $CPDisclosureButton__drawRect_(self, _cmd, aRect)
{
    var bounds = objj_msgSend(self, "bounds"),
        context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        width = CGRectGetWidth(bounds),
        height = CGRectGetHeight(bounds);
    CGContextBeginPath(context);
    if (self._angle)
    {
        var centre = CGPointMake(FLOOR(width / 2.0), FLOOR(height / 2.0));
        CGContextTranslateCTM(context, centre.x, centre.y);
        CGContextRotateCTM(context, self._angle);
        CGContextTranslateCTM(context, -centre.x, -centre.y);
    }
    CGContextTranslateCTM(context, FLOOR((width - 9.0) / 2.0), FLOOR((height - 8.0) / 2.0));
    CGContextMoveToPoint(context, 0.0, 0.0);
    CGContextAddLineToPoint(context, 9.0, 0.0);
    CGContextAddLineToPoint(context, 4.5, 8.0);
    CGContextClosePath(context);
    CGContextSetFillColor(context, colorForDisclosureTriangle(objj_msgSend(self, "hasThemeState:", CPThemeStateSelected), objj_msgSend(self, "hasThemeState:", CPThemeStateHighlighted)));
    CGContextFillPath(context);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 0.0, 0.0);
    CGContextAddLineToPoint(context, 4.5, 8.0);
    if (self._angle === 0.0)
        CGContextAddLineToPoint(context, 9.0, 0.0);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 1.0, 0.7));
    CGContextStrokePath(context);
}
,["void","CGRect"])]);
}var CPOutlineViewIndentationPerLevelKey = "CPOutlineViewIndentationPerLevelKey",
    CPOutlineViewOutlineTableColumnKey = "CPOutlineViewOutlineTableColumnKey",
    CPOutlineViewDataSourceKey = "CPOutlineViewDataSourceKey",
    CPOutlineViewDelegateKey = "CPOutlineViewDelegateKey";
{
var the_class = objj_getClass("CPOutlineView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPOutlineView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPOutlineView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._rootItemInfo = {isExpanded: YES, isExpandable: NO, level: -1, row: -1, children: [], weight: 0};
        self._itemsForRows = [];
        self._itemInfosForItems = {};
        self._disclosureControlsForRows = [];
        objj_msgSend(self, "setIndentationMarkerFollowsDataView:", YES);
        objj_msgSend(self, "setDisclosureControlPrototype:", objj_msgSend(objj_msgSend(CPDisclosureButton, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 10.0, 10.0)));
        self._outlineTableColumn = objj_msgSend(aCoder, "decodeObjectForKey:", CPOutlineViewOutlineTableColumnKey);
        self._indentationPerLevel = objj_msgSend(aCoder, "decodeFloatForKey:", CPOutlineViewIndentationPerLevelKey);
        self._outlineViewDataSource = objj_msgSend(aCoder, "decodeObjectForKey:", CPOutlineViewDataSourceKey);
        self._outlineViewDelegate = objj_msgSend(aCoder, "decodeObjectForKey:", CPOutlineViewDelegateKey);
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "setDataSource:", objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDataSource, "alloc"), "initWithOutlineView:", self));
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "setDelegate:", objj_msgSend(objj_msgSend(_CPOutlineViewTableViewDelegate, "alloc"), "initWithOutlineView:", self));
        objj_msgSend(self, "_updateIsViewBased");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPOutlineView__encodeWithCoder_(self, _cmd, aCoder)
{
    var internalDelegate = self._delegate,
        internalDataSource = self._dataSource;
    self._delegate = nil;
    self._dataSource = nil;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPOutlineView").super_class }, "encodeWithCoder:", aCoder);
    self._delegate = internalDelegate;
    self._dataSource = internalDataSource;
    objj_msgSend(aCoder, "encodeObject:forKey:", self._outlineTableColumn, CPOutlineViewOutlineTableColumnKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._indentationPerLevel, CPOutlineViewIndentationPerLevelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._outlineViewDataSource, CPOutlineViewDataSourceKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._outlineViewDelegate, CPOutlineViewDelegateKey);
}
,["void","CPCoder"])]);
}var colorForDisclosureTriangle = function(isSelected, isHighlighted)
{
    return isSelected ? isHighlighted ? objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 0.9, 1.0) : objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 1.0, 1.0) : isHighlighted ? objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 0.4, 1.0) : objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 0.5, 1.0);
};
p;9;CPPanel.jt;1805;@STATIC;1.0;i;10;CPWindow.jt;1771;objj_executeFile("CPWindow.j", YES);CPOKButton = 1;
CPCancelButton = 0;
CPDocModalWindowMask = 1 << 6;
{var the_class = objj_allocateClassPair(CPWindow, "CPPanel"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_becomesKeyOnlyIfNeeded"), new objj_ivar("_worksWhenModal")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isFloatingPanel"), function $CPPanel__isFloatingPanel(self, _cmd)
{
    return objj_msgSend(self, "level") == CPFloatingWindowLevel;
}
,["BOOL"]), new objj_method(sel_getUid("setFloatingPanel:"), function $CPPanel__setFloatingPanel_(self, _cmd, isFloatingPanel)
{
    objj_msgSend(self, "setLevel:", isFloatingPanel ? CPFloatingWindowLevel : CPNormalWindowLevel);
}
,["void","BOOL"]), new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"), function $CPPanel__becomesKeyOnlyIfNeeded(self, _cmd)
{
    return self._becomesKeyOnlyIfNeeded;
}
,["BOOL"]), new objj_method(sel_getUid("setBecomesKeyOnlyIfNeeded:"), function $CPPanel__setBecomesKeyOnlyIfNeeded_(self, _cmd, shouldBecomeKeyOnlyIfNeeded)
{
    self._becomesKeyOnlyIfNeeded = shouldBecomeKeyOnlyIfNeeded;
}
,["void","BOOL"]), new objj_method(sel_getUid("worksWhenModal"), function $CPPanel__worksWhenModal(self, _cmd)
{
    return self._worksWhenModal;
}
,["BOOL"]), new objj_method(sel_getUid("setWorksWhenModal:"), function $CPPanel__setWorksWhenModal_(self, _cmd, shouldWorkWhenModal)
{
    self._worksWhenModal = shouldWorkWhenModal;
}
,["void","BOOL"]), new objj_method(sel_getUid("canBecomeMainWindow"), function $CPPanel__canBecomeMainWindow(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("canBecomeKeyWindow"), function $CPPanel__canBecomeKeyWindow(self, _cmd)
{
    return YES;
}
,["BOOL"])]);
}p;14;CPPasteboard.jt;12280;@STATIC;1.0;I;21;Foundation/CPObject.jI;20;Foundation/CPArray.jI;19;Foundation/CPData.jI;25;Foundation/CPDictionary.jI;40;Foundation/CPPropertyListSerialization.jt;12110;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPData.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPPropertyListSerialization.j", NO);CPGeneralPboard = "CPGeneralPboard";
CPFontPboard = "CPFontPboard";
CPRulerPboard = "CPRulerPboard";
CPFindPboard = "CPFindPboard";
CPDragPboard = "CPDragPboard";
CPColorPboardType = "CPColorPboardType";
CPFilenamesPboardType = "CPFilenamesPboardType";
CPFontPboardType = "CPFontPboardType";
CPHTMLPboardType = "CPHTMLPboardType";
CPStringPboardType = "CPStringPboardType";
CPURLPboardType = "CPURLPboardType";
CPImagesPboardType = "CPImagesPboardType";
CPVideosPboardType = "CPVideosPboardType";
UTF8PboardType = "public.utf8-plain-text";
CPImagePboardType = "CPImagePboardType";
var CPPasteboards = nil,
    supportsNativePasteboard = NO;
{var the_class = objj_allocateClassPair(CPObject, "CPPasteboard"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_types"), new objj_ivar("_owners"), new objj_ivar("_provided"), new objj_ivar("_changeCount"), new objj_ivar("_stateUID"), new objj_ivar("_nativePasteboard")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_initWithName:"), function $CPPasteboard___initWithName_(self, _cmd, aName)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPasteboard").super_class }, "init");
    if (self)
    {
        self._types = [];
        self._owners = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._provided = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._changeCount = 0;
        if (supportsNativePasteboard)
        {
            self._nativePasteboard = window.cpPasteboardWithName(aName);
            objj_msgSend(self, "_synchronizePasteboard");
        }
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("addTypes:owner:"), function $CPPasteboard__addTypes_owner_(self, _cmd, types, anOwner)
{
    var i = 0,
        count = types.length;
    for (; i < count; ++i)
    {
        var type = types[i];
        if (!objj_msgSend(self._owners, "objectForKey:", type))
        {
            objj_msgSend(self._types, "addObject:", type);
            objj_msgSend(self._provided, "removeObjectForKey:", type);
        }
        objj_msgSend(self._owners, "setObject:forKey:", anOwner, type);
    }
    if (self._nativePasteboard)
    {
        var nativeTypes = objj_msgSend(types, "copy");
        if (objj_msgSend(types, "containsObject:", CPStringPboardType))
            nativeTypes.push(UTF8PboardType);
        self._nativePasteboard.addTypes_(nativeTypes);
    }
    return ++self._changeCount;
}
,["unsigned","CPArray","id"]), new objj_method(sel_getUid("declareTypes:owner:"), function $CPPasteboard__declareTypes_owner_(self, _cmd, types, anOwner)
{
    objj_msgSend(self, "_declareTypes:owner:updateNativePasteboard:", types, anOwner, YES);
}
,["unsigned","CPArray","id"]), new objj_method(sel_getUid("_declareTypes:owner:updateNativePasteboard:"), function $CPPasteboard___declareTypes_owner_updateNativePasteboard_(self, _cmd, types, anOwner, shouldUpdate)
{
    objj_msgSend(self._types, "setArray:", types);
    self._owners = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    self._provided = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    if (anOwner)
    {
        var count = self._types.length;
        while (count--)
            objj_msgSend(self._owners, "setObject:forKey:", anOwner, self._types[count]);
    }
    if (self._nativePasteboard && shouldUpdate)
    {
        var nativeTypes = objj_msgSend(types, "copy");
        if (objj_msgSend(types, "containsObject:", CPStringPboardType))
            nativeTypes.push(UTF8PboardType);
        self._nativePasteboard.declareTypes_(nativeTypes);
        self._changeCount = self._nativePasteboard.changeCount();
    }
    return ++self._changeCount;
}
,["unsigned","CPArray","id","BOOL"]), new objj_method(sel_getUid("setData:forType:"), function $CPPasteboard__setData_forType_(self, _cmd, aData, aType)
{
    objj_msgSend(self._provided, "setObject:forKey:", aData, aType);
    if (aType === CPStringPboardType)
        objj_msgSend(self, "setData:forType:", aData, UTF8PboardType);
    return YES;
}
,["BOOL","CPData","CPString"]), new objj_method(sel_getUid("setPropertyList:forType:"), function $CPPasteboard__setPropertyList_forType_(self, _cmd, aPropertyList, aType)
{
    return objj_msgSend(self, "setData:forType:", objj_msgSend(CPPropertyListSerialization, "dataFromPropertyList:format:", aPropertyList, CPPropertyList280NorthFormat_v1_0), aType);
}
,["BOOL","id","CPString"]), new objj_method(sel_getUid("setString:forType:"), function $CPPasteboard__setString_forType_(self, _cmd, aString, aType)
{
    if (aString && aString.isa && !objj_msgSend(aString, "isKindOfClass:", CPString))
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "CPPasteboard setString:forType: must be called with a string.");
    objj_msgSend(self, "setPropertyList:forType:", aString, aType);
}
,["void","CPString","CPString"]), new objj_method(sel_getUid("availableTypeFromArray:"), function $CPPasteboard__availableTypeFromArray_(self, _cmd, anArray)
{
    return objj_msgSend(anArray, "firstObjectCommonWithArray:", objj_msgSend(self, "types"));
}
,["CPString","CPArray"]), new objj_method(sel_getUid("types"), function $CPPasteboard__types(self, _cmd)
{
    objj_msgSend(self, "_synchronizePasteboard");
    return self._types;
}
,["CPArray"]), new objj_method(sel_getUid("changeCount"), function $CPPasteboard__changeCount(self, _cmd)
{
    return self._changeCount;
}
,["unsigned"]), new objj_method(sel_getUid("dataForType:"), function $CPPasteboard__dataForType_(self, _cmd, aType)
{
    var data = objj_msgSend(self._provided, "objectForKey:", aType);
    if (data)
        return data;
    var owner = objj_msgSend(self._owners, "objectForKey:", aType);
    if (owner)
    {
        objj_msgSend(owner, "pasteboard:provideDataForType:", self, aType);
        return objj_msgSend(self._provided, "objectForKey:", aType);
    }
    if (aType === CPStringPboardType)
        return objj_msgSend(self, "dataForType:", UTF8PboardType);
    return nil;
}
,["CPData","CPString"]), new objj_method(sel_getUid("_synchronizePasteboard"), function $CPPasteboard___synchronizePasteboard(self, _cmd)
{
    if (self._nativePasteboard && self._nativePasteboard.changeCount() > self._changeCount)
    {
        var nativeTypes = objj_msgSend(self._nativePasteboard.types(), "copy");
        if (objj_msgSend(nativeTypes, "containsObject:", UTF8PboardType))
            nativeTypes.push(CPStringPboardType);
        objj_msgSend(self, "_declareTypes:owner:updateNativePasteboard:", nativeTypes, self, NO);
        self._changeCount = self._nativePasteboard.changeCount();
    }
}
,["void"]), new objj_method(sel_getUid("pasteboard:provideDataForType:"), function $CPPasteboard__pasteboard_provideDataForType_(self, _cmd, aPasteboard, aType)
{
    if (aType === CPStringPboardType)
    {
        var string = self._nativePasteboard.stringForType_(UTF8PboardType);
        objj_msgSend(self, "setString:forType:", string, CPStringPboardType);
        objj_msgSend(self, "setString:forType:", string, UTF8PboardType);
    }
    else
        objj_msgSend(self, "setString:forType:", self._nativePasteboard.stringForType_(aType), aType);
}
,["void","CPPasteboard","CPString"]), new objj_method(sel_getUid("propertyListForType:"), function $CPPasteboard__propertyListForType_(self, _cmd, aType)
{
    var data = objj_msgSend(self, "dataForType:", aType);
    if (data)
        return objj_msgSend(CPPropertyListSerialization, "propertyListFromData:format:", data, CPPropertyList280NorthFormat_v1_0);
    return nil;
}
,["id","CPString"]), new objj_method(sel_getUid("stringForType:"), function $CPPasteboard__stringForType_(self, _cmd, aType)
{
    return objj_msgSend(self, "propertyListForType:", aType);
}
,["CPString","CPString"]), new objj_method(sel_getUid("_generateStateUID"), function $CPPasteboard___generateStateUID(self, _cmd)
{
    var bits = 32;
    self._stateUID = "";
    while (bits--)
        self._stateUID += ((FLOOR(RAND() * 16.0)).toString(16)).toUpperCase();
    return self._stateUID;
}
,["CPString"]), new objj_method(sel_getUid("_stateUID"), function $CPPasteboard___stateUID(self, _cmd)
{
    return self._stateUID;
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPPasteboard__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPPasteboard, "class"))
        return;
    objj_msgSend(self, "setVersion:", 1.0);
    CPPasteboards = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    if (typeof window.cpPasteboardWithName !== "undefined")
        supportsNativePasteboard = YES;
}
,["void"]), new objj_method(sel_getUid("generalPasteboard"), function $CPPasteboard__generalPasteboard(self, _cmd)
{
    return objj_msgSend(CPPasteboard, "pasteboardWithName:", CPGeneralPboard);
}
,["id"]), new objj_method(sel_getUid("pasteboardWithName:"), function $CPPasteboard__pasteboardWithName_(self, _cmd, aName)
{
    var pasteboard = objj_msgSend(CPPasteboards, "objectForKey:", aName);
    if (pasteboard)
        return pasteboard;
    pasteboard = objj_msgSend(objj_msgSend(CPPasteboard, "alloc"), "_initWithName:", aName);
    objj_msgSend(CPPasteboards, "setObject:forKey:", pasteboard, aName);
    return pasteboard;
}
,["id","CPString"])]);
}var DOMDataTransferPasteboard = nil;
{var the_class = objj_allocateClassPair(CPPasteboard, "_CPDOMDataTransferPasteboard"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dataTransfer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_setDataTransfer:"), function $_CPDOMDataTransferPasteboard___setDataTransfer_(self, _cmd, aDataTransfer)
{
    self._dataTransfer = aDataTransfer;
}
,["void","DataTransfer"]), new objj_method(sel_getUid("_setPasteboard:"), function $_CPDOMDataTransferPasteboard___setPasteboard_(self, _cmd, aPasteboard)
{
    self._dataTransfer.clearData();
    var types = objj_msgSend(aPasteboard, "types"),
        count = types.length;
    while (count--)
    {
        var type = types[count];
        if (type === CPStringPboardType)
            self._dataTransfer.setData(type, objj_msgSend(aPasteboard, "stringForType:", type));
        else
            self._dataTransfer.setData(type, objj_msgSend(objj_msgSend(aPasteboard, "dataForType:", type), "rawString"));
    }
}
,["void","CPPasteboard"]), new objj_method(sel_getUid("types"), function $_CPDOMDataTransferPasteboard__types(self, _cmd)
{
    return Array.prototype.slice.apply(self._dataTransfer.types);
}
,["CPArray"]), new objj_method(sel_getUid("dataForType:"), function $_CPDOMDataTransferPasteboard__dataForType_(self, _cmd, aType)
{
    var dataString = self._dataTransfer.getData(aType);
    if (aType === CPStringPboardType)
        return objj_msgSend(CPData, "dataFromPropertyList:format:", dataString, kCFPropertyList280NorthFormat_v1_0);
    return objj_msgSend(CPData, "dataWithRawString:", dataString);
}
,["CPData","CPString"]), new objj_method(sel_getUid("propertyListForType:"), function $_CPDOMDataTransferPasteboard__propertyListForType_(self, _cmd, aType)
{
    if (aType === CPStringPboardType)
        return self._dataTransfer.getData(aType);
    return objj_msgSend(CPPropertyListSerialization, "propertyListFromData:format:", objj_msgSend(self, "dataForType:", aType), CPPropertyListUnknownFormat);
}
,["id","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("DOMDataTransferPasteboard"), function $_CPDOMDataTransferPasteboard__DOMDataTransferPasteboard(self, _cmd)
{
    if (!DOMDataTransferPasteboard)
        DOMDataTransferPasteboard = objj_msgSend(objj_msgSend(_CPDOMDataTransferPasteboard, "alloc"), "init");
    return DOMDataTransferPasteboard;
}
,["_CPDOMDataTransferPasteboard"])]);
}p;11;CPPopover.jt;12572;@STATIC;1.0;I;21;Foundation/CPObject.ji;10;CPButton.ji;9;CPColor.ji;9;CPImage.ji;13;CPImageView.ji;13;CPResponder.ji;8;CPView.ji;18;_CPPopoverWindow.jt;12414;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPButton.j", YES);objj_executeFile("CPColor.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("_CPPopoverWindow.j", YES);CPPopoverBehaviorApplicationDefined = 0;
CPPopoverBehaviorTransient = 1;
CPPopoverBehaviorSemitransient = 2;
var CPPopoverDelegate_popover_willShow_ = 1 << 0,
    CPPopoverDelegate_popover_didShow_ = 1 << 1,
    CPPopoverDelegate_popover_shouldClose_ = 1 << 2,
    CPPopoverDelegate_popover_willClose_ = 1 << 3,
    CPPopoverDelegate_popover_didClose_ = 1 << 4;
{var the_class = objj_allocateClassPair(CPResponder, "CPPopover"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentViewController"), new objj_ivar("_delegate"), new objj_ivar("_animates"), new objj_ivar("_appearance"), new objj_ivar("_behavior"), new objj_ivar("_popoverWindow"), new objj_ivar("_implementedDelegateMethods")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("contentViewController"), function $CPPopover__contentViewController(self, _cmd)
{
    return self._contentViewController;
}
,["CPViewController"]), new objj_method(sel_getUid("setContentViewController:"), function $CPPopover__setContentViewController_(self, _cmd, newValue)
{
    self._contentViewController = newValue;
}
,["void","CPViewController"]), new objj_method(sel_getUid("delegate"), function $CPPopover__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("_setDelegate:"), function $CPPopover___setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("animates"), function $CPPopover__animates(self, _cmd)
{
    return self._animates;
}
,["BOOL"]), new objj_method(sel_getUid("_setAnimates:"), function $CPPopover___setAnimates_(self, _cmd, newValue)
{
    self._animates = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("appearance"), function $CPPopover__appearance(self, _cmd)
{
    return self._appearance;
}
,["int"]), new objj_method(sel_getUid("setAppearance:"), function $CPPopover__setAppearance_(self, _cmd, newValue)
{
    self._appearance = newValue;
}
,["void","int"]), new objj_method(sel_getUid("behavior"), function $CPPopover__behavior(self, _cmd)
{
    return self._behavior;
}
,["int"]), new objj_method(sel_getUid("_setBehavior:"), function $CPPopover___setBehavior_(self, _cmd, newValue)
{
    self._behavior = newValue;
}
,["void","int"]), new objj_method(sel_getUid("init"), function $CPPopover__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopover").super_class }, "init"))
    {
        self._animates = YES;
        self._appearance = CPPopoverAppearanceMinimal;
        self._behavior = CPPopoverBehaviorApplicationDefined;
    }
    return self;
}
,["CPPopover"]), new objj_method(sel_getUid("positioningRect"), function $CPPopover__positioningRect(self, _cmd)
{
    if (!objj_msgSend(self._popoverWindow, "isVisible"))
        return CGRectMakeZero();
    return objj_msgSend(self._popoverWindow, "frame");
}
,["CGRect"]), new objj_method(sel_getUid("setPositioningRect:"), function $CPPopover__setPositioningRect_(self, _cmd, aRect)
{
    if (!objj_msgSend(self._popoverWindow, "isVisible"))
        return;
    objj_msgSend(self._popoverWindow, "setFrame:", aRect);
}
,["void","CGRect"]), new objj_method(sel_getUid("contentSize"), function $CPPopover__contentSize(self, _cmd)
{
    if (!objj_msgSend(self._popoverWindow, "isVisible"))
        return CGRectMakeZero();
    return objj_msgSend(objj_msgSend(self._contentViewController, "view"), "frameSize");
}
,["CGSize"]), new objj_method(sel_getUid("setContentSize:"), function $CPPopover__setContentSize_(self, _cmd, aSize)
{
    objj_msgSend(objj_msgSend(self._contentViewController, "view"), "setFrameSize:", aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("isShown"), function $CPPopover__isShown(self, _cmd)
{
    return objj_msgSend(self._popoverWindow, "isVisible");
}
,["BOOL"]), new objj_method(sel_getUid("setAnimates:"), function $CPPopover__setAnimates_(self, _cmd, shouldAnimate)
{
    if (self._animates == shouldAnimate)
        return;
    self._animates = shouldAnimate;
    objj_msgSend(self._popoverWindow, "setAnimates:", self._animates);
}
,["void","BOOL"]), new objj_method(sel_getUid("setBehavior:"), function $CPPopover__setBehavior_(self, _cmd, aBehavior)
{
    if (self._behavior == aBehavior)
        return;
    self._behavior = aBehavior;
    objj_msgSend(self._popoverWindow, "setStyleMask:", objj_msgSend(self, "styleMaskForBehavior"));
}
,["void","int"]), new objj_method(sel_getUid("setDelegate:"), function $CPPopover__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate === aDelegate)
        return;
    self._delegate = aDelegate;
    self._implementedDelegateMethods = 0;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverWillShow:")))
        self._implementedDelegateMethods |= CPPopoverDelegate_popover_willShow_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverDidShow:")))
        self._implementedDelegateMethods |= CPPopoverDelegate_popover_didShow_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverShouldClose:")))
        self._implementedDelegateMethods |= CPPopoverDelegate_popover_shouldClose_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverWillClose:")))
        self._implementedDelegateMethods |= CPPopoverDelegate_popover_willClose_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("popoverDidClose:")))
        self._implementedDelegateMethods |= CPPopoverDelegate_popover_didClose_;
}
,["void","id"]), new objj_method(sel_getUid("showRelativeToRect:ofView:preferredEdge:"), function $CPPopover__showRelativeToRect_ofView_preferredEdge_(self, _cmd, positioningRect, positioningView, preferredEdge)
{
    if (!positioningView)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "positionView must not be nil");
    if (!self._contentViewController)
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "contentViewController must not be nil");
    if (objj_msgSend(self._popoverWindow, "isClosing"))
        return;
    if (self._implementedDelegateMethods & CPPopoverDelegate_popover_willShow_)
        objj_msgSend(self._delegate, "popoverWillShow:", self);
    if (!self._popoverWindow)
    {
        self._popoverWindow = objj_msgSend(objj_msgSend(_CPPopoverWindow, "alloc"), "initWithContentRect:styleMask:", CGRectMakeZero(), objj_msgSend(self, "styleMaskForBehavior"));
    }
    objj_msgSend(self._popoverWindow, "setPlatformWindow:", objj_msgSend(objj_msgSend(positioningView, "window"), "platformWindow"));
    objj_msgSend(self._popoverWindow, "setAppearance:", self._appearance);
    objj_msgSend(self._popoverWindow, "setAnimates:", self._animates);
    objj_msgSend(self._popoverWindow, "setDelegate:", self);
    objj_msgSend(self._popoverWindow, "setMovableByWindowBackground:", NO);
    objj_msgSend(self._popoverWindow, "setFrame:", objj_msgSend(self._popoverWindow, "frameRectForContentRect:", objj_msgSend(objj_msgSend(self._contentViewController, "view"), "frame")));
    objj_msgSend(self._popoverWindow, "setContentView:", objj_msgSend(self._contentViewController, "view"));
    objj_msgSend(self._popoverWindow, "positionRelativeToRect:ofView:preferredEdge:", positioningRect, positioningView, preferredEdge);
    if (!self._animates && self._implementedDelegateMethods & CPPopoverDelegate_popover_didShow_)
        objj_msgSend(self._delegate, "popoverDidShow:", self);
}
,["void","CGRect","CPView","CPRectEdge"]), new objj_method(sel_getUid("styleMaskForBehavior"), function $CPPopover__styleMaskForBehavior(self, _cmd)
{
    return self._behavior == CPPopoverBehaviorTransient ? CPClosableOnBlurWindowMask : 0;
}
,["unsigned"]), new objj_method(sel_getUid("close"), function $CPPopover__close(self, _cmd)
{
    objj_msgSend(self, "_close");
}
,["void"]), new objj_method(sel_getUid("_close"), function $CPPopover___close(self, _cmd)
{
    if (objj_msgSend(self._popoverWindow, "isClosing") || !objj_msgSend(self, "isShown"))
        return;
    if (self._implementedDelegateMethods & CPPopoverDelegate_popover_willClose_)
        objj_msgSend(self._delegate, "popoverWillClose:", self);
    objj_msgSend(self._popoverWindow, "close");
}
,["void"]), new objj_method(sel_getUid("performClose:"), function $CPPopover__performClose_(self, _cmd, sender)
{
    if (objj_msgSend(self._popoverWindow, "isClosing"))
        return;
    if (self._implementedDelegateMethods & CPPopoverDelegate_popover_shouldClose_)
        if (!objj_msgSend(self._delegate, "popoverShouldClose:", self))
            return;
    objj_msgSend(self, "_close");
}
,["id","id"]), new objj_method(sel_getUid("popoverWindowShouldClose:"), function $CPPopover__popoverWindowShouldClose_(self, _cmd, aPopoverWindow)
{
    objj_msgSend(self, "performClose:", self);
    return NO;
}
,["BOOL","_CPPopoverWindow"]), new objj_method(sel_getUid("popoverWindowDidClose:"), function $CPPopover__popoverWindowDidClose_(self, _cmd, aPopoverWindow)
{
    if (self._implementedDelegateMethods & CPPopoverDelegate_popover_didClose_)
        objj_msgSend(self._delegate, "popoverDidClose:", self);
}
,["void","_CPPopoverWindow"]), new objj_method(sel_getUid("popoverWindowDidShow:"), function $CPPopover__popoverWindowDidShow_(self, _cmd, aPopoverWindow)
{
    if (self._implementedDelegateMethods & CPPopoverDelegate_popover_didShow_)
        objj_msgSend(self._delegate, "popoverDidShow:", self);
}
,["void","_CPPopoverWindow"])]);
}{
var the_class = objj_getClass("CPPopover")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPopover\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setBehaviour:"), function $CPPopover__setBehaviour_(self, _cmd, aBehavior)
{
    _CPReportLenientDeprecation(self, _cmd, sel_getUid("setBehavior:"));
    objj_msgSend(self, "setBehavior:", aBehavior);
}
,["void","int"])]);
}var CPPopoverNeedsNewPopoverWindowKey = "CPPopoverNeedsNewPopoverWindowKey",
    CPPopoverAppearanceKey = "CPPopoverAppearanceKey",
    CPPopoverAnimatesKey = "CPPopoverAnimatesKey",
    CPPopoverContentViewControllerKey = "CPPopoverContentViewControllerKey",
    CPPopoverDelegateKey = "CPPopoverDelegateKey",
    CPPopoverBehaviorKey = "CPPopoverBehaviorKey";
{
var the_class = objj_getClass("CPPopover")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPopover\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPPopover__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopover").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._appearance = objj_msgSend(aCoder, "decodeIntForKey:", CPPopoverAppearanceKey);
        self._animates = objj_msgSend(aCoder, "decodeBoolForKey:", CPPopoverAnimatesKey);
        self._contentViewController = objj_msgSend(aCoder, "decodeObjectForKey:", CPPopoverContentViewControllerKey);
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", CPPopoverDelegateKey));
        objj_msgSend(self, "setBehavior:", objj_msgSend(aCoder, "decodeIntForKey:", CPPopoverBehaviorKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPPopover__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopover").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._appearance, CPPopoverAppearanceKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._animates, CPPopoverAnimatesKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._contentViewController, CPPopoverContentViewControllerKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._delegate, CPPopoverDelegateKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._behavior, CPPopoverBehaviorKey);
}
,["void","CPCoder"])]);
}p;15;CPPopUpButton.jt;35536;@STATIC;1.0;i;12;CGGeometry.ji;10;CPButton.ji;19;CPKeyValueBinding.ji;8;CPMenu.ji;12;CPMenuItem.jt;35431;objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPButton.j", YES);objj_executeFile("CPKeyValueBinding.j", YES);objj_executeFile("CPMenu.j", YES);objj_executeFile("CPMenuItem.j", YES);var VISIBLE_MARGIN = 7.0;
CPPopUpButtonStatePullsDown = CPThemeState("pulls-down");
{var the_class = objj_allocateClassPair(CPButton, "CPPopUpButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_selectedIndex"), new objj_ivar("_preferredEdge")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:pullsDown:"), function $CPPopUpButton__initWithFrame_pullsDown_(self, _cmd, aFrame, shouldPullDown)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopUpButton").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "selectItemAtIndex:", CPNotFound);
        self._preferredEdge = CPMaxYEdge;
        objj_msgSend(self, "setValue:forThemeAttribute:", CPImageLeft, "image-position");
        objj_msgSend(self, "setValue:forThemeAttribute:", CPLeftTextAlignment, "alignment");
        objj_msgSend(self, "setValue:forThemeAttribute:", CPLineBreakByTruncatingTail, "line-break-mode");
        objj_msgSend(self, "setMenu:", objj_msgSend(objj_msgSend(CPMenu, "alloc"), "initWithTitle:", ""));
        objj_msgSend(self, "setPullsDown:", shouldPullDown);
        var options = CPKeyValueObservingOptionNew | CPKeyValueObservingOptionOld;
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "menu.items", options, nil);
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "_firstItem.changeCount", options, nil);
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "selectedItem.changeCount", options, nil);
    }
    return self;
}
,["id","CGRect","BOOL"]), new objj_method(sel_getUid("initWithFrame:"), function $CPPopUpButton__initWithFrame_(self, _cmd, aFrame)
{
    return objj_msgSend(self, "initWithFrame:pullsDown:", aFrame, NO);
}
,["id","CGRect"]), new objj_method(sel_getUid("setPullsDown:"), function $CPPopUpButton__setPullsDown_(self, _cmd, shouldPullDown)
{
    if (shouldPullDown)
        var changed = objj_msgSend(self, "setThemeState:", CPPopUpButtonStatePullsDown);
    else
        var changed = objj_msgSend(self, "unsetThemeState:", CPPopUpButtonStatePullsDown);
    if (!changed)
        return;
    var items = objj_msgSend(objj_msgSend(self, "menu"), "itemArray");
    if (objj_msgSend(items, "count") <= 0)
        return;
    objj_msgSend(items[0], "setHidden:", objj_msgSend(self, "pullsDown"));
    objj_msgSend(self, "synchronizeTitleAndSelectedItem");
}
,["void","BOOL"]), new objj_method(sel_getUid("pullsDown"), function $CPPopUpButton__pullsDown(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPPopUpButtonStatePullsDown);
}
,["BOOL"]), new objj_method(sel_getUid("addItem:"), function $CPPopUpButton__addItem_(self, _cmd, anItem)
{
    objj_msgSend(objj_msgSend(self, "menu"), "addItem:", anItem);
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("addItemWithTitle:"), function $CPPopUpButton__addItemWithTitle_(self, _cmd, aTitle)
{
    objj_msgSend(objj_msgSend(self, "menu"), "addItemWithTitle:action:keyEquivalent:", aTitle, NULL, nil);
}
,["void","CPString"]), new objj_method(sel_getUid("addItemsWithTitles:"), function $CPPopUpButton__addItemsWithTitles_(self, _cmd, titles)
{
    var index = 0,
        count = objj_msgSend(titles, "count");
    for (; index < count; ++index)
        objj_msgSend(self, "addItemWithTitle:", titles[index]);
}
,["void","CPArray"]), new objj_method(sel_getUid("insertItemWithTitle:atIndex:"), function $CPPopUpButton__insertItemWithTitle_atIndex_(self, _cmd, aTitle, anIndex)
{
    var items = objj_msgSend(self, "itemArray"),
        count = objj_msgSend(items, "count");
    while (count--)
        if (objj_msgSend(items[count], "title") == aTitle)
            objj_msgSend(self, "removeItemAtIndex:", count);
    objj_msgSend(objj_msgSend(self, "menu"), "insertItemWithTitle:action:keyEquivalent:atIndex:", aTitle, NULL, nil, anIndex);
}
,["void","CPString","int"]), new objj_method(sel_getUid("removeAllItems"), function $CPPopUpButton__removeAllItems(self, _cmd)
{
    objj_msgSend(objj_msgSend(self, "menu"), "removeAllItems");
    objj_msgSend(self, "synchronizeTitleAndSelectedItem");
}
,["void"]), new objj_method(sel_getUid("removeItemWithTitle:"), function $CPPopUpButton__removeItemWithTitle_(self, _cmd, aTitle)
{
    objj_msgSend(self, "removeItemAtIndex:", objj_msgSend(self, "indexOfItemWithTitle:", aTitle));
    objj_msgSend(self, "synchronizeTitleAndSelectedItem");
}
,["void","CPString"]), new objj_method(sel_getUid("removeItemAtIndex:"), function $CPPopUpButton__removeItemAtIndex_(self, _cmd, anIndex)
{
    objj_msgSend(objj_msgSend(self, "menu"), "removeItemAtIndex:", anIndex);
    objj_msgSend(self, "synchronizeTitleAndSelectedItem");
}
,["void","int"]), new objj_method(sel_getUid("selectedItem"), function $CPPopUpButton__selectedItem(self, _cmd)
{
    var indexOfSelectedItem = objj_msgSend(self, "indexOfSelectedItem");
    if (indexOfSelectedItem < 0 || indexOfSelectedItem > objj_msgSend(self, "numberOfItems") - 1)
        return nil;
    return objj_msgSend(objj_msgSend(self, "menu"), "itemAtIndex:", indexOfSelectedItem);
}
,["CPMenuItem"]), new objj_method(sel_getUid("titleOfSelectedItem"), function $CPPopUpButton__titleOfSelectedItem(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "selectedItem"), "title");
}
,["CPString"]), new objj_method(sel_getUid("indexOfSelectedItem"), function $CPPopUpButton__indexOfSelectedItem(self, _cmd)
{
    return self._selectedIndex;
}
,["int"]), new objj_method(sel_getUid("selectItem:"), function $CPPopUpButton__selectItem_(self, _cmd, aMenuItem)
{
    objj_msgSend(self, "selectItemAtIndex:", objj_msgSend(self, "indexOfItem:", aMenuItem));
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("selectItemAtIndex:"), function $CPPopUpButton__selectItemAtIndex_(self, _cmd, anIndex)
{
    objj_msgSend(self, "setObjectValue:", anIndex);
}
,["void","CPUInteger"]), new objj_method(sel_getUid("setSelectedIndex:"), function $CPPopUpButton__setSelectedIndex_(self, _cmd, anIndex)
{
    objj_msgSend(self, "setObjectValue:", anIndex);
}
,["void","CPUInteger"]), new objj_method(sel_getUid("selectedIndex"), function $CPPopUpButton__selectedIndex(self, _cmd)
{
    return objj_msgSend(self, "objectValue");
}
,["CPUInteger"]), new objj_method(sel_getUid("setObjectValue:"), function $CPPopUpButton__setObjectValue_(self, _cmd, anIndex)
{
    var indexOfSelectedItem = objj_msgSend(self, "objectValue");
    anIndex = parseInt(+anIndex, 10);
    if (indexOfSelectedItem === anIndex)
        return;
    if (indexOfSelectedItem >= 0 && !objj_msgSend(self, "pullsDown"))
        objj_msgSend(objj_msgSend(self, "selectedItem"), "setState:", CPOffState);
    self._selectedIndex = anIndex;
    if (indexOfSelectedItem >= 0 && !objj_msgSend(self, "pullsDown"))
        objj_msgSend(objj_msgSend(self, "selectedItem"), "setState:", CPOnState);
    objj_msgSend(self, "synchronizeTitleAndSelectedItem");
}
,["void","int"]), new objj_method(sel_getUid("objectValue"), function $CPPopUpButton__objectValue(self, _cmd)
{
    return self._selectedIndex;
}
,["id"]), new objj_method(sel_getUid("selectItemWithTag:"), function $CPPopUpButton__selectItemWithTag_(self, _cmd, aTag)
{
    objj_msgSend(self, "selectItemAtIndex:", objj_msgSend(self, "indexOfItemWithTag:", aTag));
}
,["void","int"]), new objj_method(sel_getUid("selectItemWithTitle:"), function $CPPopUpButton__selectItemWithTitle_(self, _cmd, aTitle)
{
    objj_msgSend(self, "selectItemAtIndex:", objj_msgSend(self, "indexOfItemWithTitle:", aTitle));
}
,["void","CPString"]), new objj_method(sel_getUid("numberOfItems"), function $CPPopUpButton__numberOfItems(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "numberOfItems");
}
,["int"]), new objj_method(sel_getUid("itemArray"), function $CPPopUpButton__itemArray(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "itemArray");
}
,["CPArray"]), new objj_method(sel_getUid("itemAtIndex:"), function $CPPopUpButton__itemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "itemAtIndex:", anIndex);
}
,["CPMenuItem","unsigned"]), new objj_method(sel_getUid("itemTitleAtIndex:"), function $CPPopUpButton__itemTitleAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "menu"), "itemAtIndex:", anIndex), "title");
}
,["CPString","unsigned"]), new objj_method(sel_getUid("itemTitles"), function $CPPopUpButton__itemTitles(self, _cmd)
{
    var titles = [],
        items = objj_msgSend(self, "itemArray"),
        index = 0,
        count = objj_msgSend(items, "count");
    for (; index < count; ++index)
        titles.push(objj_msgSend(items[index], "title"));
    return titles;
}
,["CPArray"]), new objj_method(sel_getUid("itemWithTitle:"), function $CPPopUpButton__itemWithTitle_(self, _cmd, aTitle)
{
    var menu = objj_msgSend(self, "menu"),
        itemIndex = objj_msgSend(menu, "indexOfItemWithTitle:", aTitle);
    if (itemIndex === CPNotFound)
        return nil;
    return objj_msgSend(menu, "itemAtIndex:", itemIndex);
}
,["CPMenuItem","CPString"]), new objj_method(sel_getUid("lastItem"), function $CPPopUpButton__lastItem(self, _cmd)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "menu"), "itemArray"), "lastObject");
}
,["CPMenuItem"]), new objj_method(sel_getUid("indexOfItem:"), function $CPPopUpButton__indexOfItem_(self, _cmd, aMenuItem)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "indexOfItem:", aMenuItem);
}
,["int","CPMenuItem"]), new objj_method(sel_getUid("indexOfItemWithTag:"), function $CPPopUpButton__indexOfItemWithTag_(self, _cmd, aTag)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "indexOfItemWithTag:", aTag);
}
,["int","int"]), new objj_method(sel_getUid("indexOfItemWithTitle:"), function $CPPopUpButton__indexOfItemWithTitle_(self, _cmd, aTitle)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "indexOfItemWithTitle:", aTitle);
}
,["int","CPString"]), new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"), function $CPPopUpButton__indexOfItemWithRepresentedObject_(self, _cmd, anObject)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "indexOfItemWithRepresentedObject:", anObject);
}
,["int","id"]), new objj_method(sel_getUid("indexOfItemWithTarget:action:"), function $CPPopUpButton__indexOfItemWithTarget_action_(self, _cmd, aTarget, anAction)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "indexOfItemWithTarget:action:", aTarget, anAction);
}
,["int","id","SEL"]), new objj_method(sel_getUid("preferredEdge"), function $CPPopUpButton__preferredEdge(self, _cmd)
{
    return self._preferredEdge;
}
,["CPRectEdge"]), new objj_method(sel_getUid("setPreferredEdge:"), function $CPPopUpButton__setPreferredEdge_(self, _cmd, aRectEdge)
{
    self._preferredEdge = aRectEdge;
}
,["void","CPRectEdge"]), new objj_method(sel_getUid("setTitle:"), function $CPPopUpButton__setTitle_(self, _cmd, aTitle)
{
    if (objj_msgSend(self, "title") === aTitle)
        return;
    if (objj_msgSend(self, "pullsDown"))
    {
        var items = objj_msgSend(objj_msgSend(self, "menu"), "itemArray");
        if (objj_msgSend(items, "count") <= 0)
            objj_msgSend(self, "addItemWithTitle:", aTitle);
        else
        {
            objj_msgSend(items[0], "setTitle:", aTitle);
            objj_msgSend(self, "synchronizeTitleAndSelectedItem");
        }
    }
    else
    {
        var index = objj_msgSend(self, "indexOfItemWithTitle:", aTitle);
        if (index < 0)
        {
            objj_msgSend(self, "addItemWithTitle:", aTitle);
            index = objj_msgSend(self, "numberOfItems") - 1;
        }
        objj_msgSend(self, "selectItemAtIndex:", index);
    }
}
,["void","CPString"]), new objj_method(sel_getUid("setImage:"), function $CPPopUpButton__setImage_(self, _cmd, anImage)
{
}
,["void","CPImage"]), new objj_method(sel_getUid("synchronizeTitleAndSelectedItem"), function $CPPopUpButton__synchronizeTitleAndSelectedItem(self, _cmd)
{
    var item = nil;
    if (objj_msgSend(self, "pullsDown"))
    {
        var items = objj_msgSend(objj_msgSend(self, "menu"), "itemArray");
        if (objj_msgSend(items, "count") > 0)
            item = items[0];
    }
    else
        item = objj_msgSend(self, "selectedItem");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopUpButton").super_class }, "setImage:", objj_msgSend(item, "image"));
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopUpButton").super_class }, "setTitle:", objj_msgSend(item, "title"));
}
,["void"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $CPPopUpButton__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, changes, aContext)
{
    var pullsDown = objj_msgSend(self, "pullsDown");
    if (!pullsDown && aKeyPath === "selectedItem.changeCount" || pullsDown && (aKeyPath === "_firstItem" || aKeyPath === "_firstItem.changeCount"))
        objj_msgSend(self, "synchronizeTitleAndSelectedItem");
    if (aKeyPath === "menu")
    {
        aKeyPath = "menu.items";
        objj_msgSend(changes, "setObject:forKey:", CPKeyValueChangeSetting, CPKeyValueChangeKindKey);
        objj_msgSend(changes, "setObject:forKey:", objj_msgSend(objj_msgSend(self, "menu"), "itemArray"), CPKeyValueChangeNewKey);
    }
    if (aKeyPath === "menu.items")
    {
        var changeKind = objj_msgSend(changes, "objectForKey:", CPKeyValueChangeKindKey),
            indexOfSelectedItem = objj_msgSend(self, "indexOfSelectedItem");
        if (changeKind === CPKeyValueChangeRemoval)
        {
            var index = CPNotFound,
                indexes = objj_msgSend(changes, "objectForKey:", CPKeyValueChangeIndexesKey);
            if (objj_msgSend(indexes, "containsIndex:", 0) && objj_msgSend(self, "pullsDown"))
                objj_msgSend(self, "_firstItemDidChange");
            if (!objj_msgSend(self, "pullsDown") && objj_msgSend(indexes, "containsIndex:", indexOfSelectedItem))
            {
                indexOfSelectedItem = 0;
            }
            else
            {
                while ((index = objj_msgSend(indexes, "indexGreaterThanIndex:", index)) !== CPNotFound && index <= indexOfSelectedItem)
                    --indexOfSelectedItem;
            }
            objj_msgSend(self, "selectItemAtIndex:", indexOfSelectedItem);
        }
        else if (changeKind === CPKeyValueChangeReplacement)
        {
            var indexes = objj_msgSend(changes, "objectForKey:", CPKeyValueChangeIndexesKey);
            if (pullsDown && objj_msgSend(indexes, "containsIndex:", 0) || !pullsDown && objj_msgSend(indexes, "containsIndex:", indexOfSelectedItem))
                objj_msgSend(self, "synchronizeTitleAndSelectedItem");
        }
        else
        {
            var newItems = objj_msgSend(changes, "objectForKey:", CPKeyValueChangeNewKey);
            objj_msgSend(newItems, "enumerateObjectsUsingBlock:", function(aMenuItem)
            {
                var action = objj_msgSend(aMenuItem, "action");
                if (!action)
                    objj_msgSend(aMenuItem, "setAction:", action = sel_getUid("_popUpItemAction:"));
                if (action === sel_getUid("_popUpItemAction:"))
                    objj_msgSend(aMenuItem, "setTarget:", self);
            });
            if (changeKind === CPKeyValueChangeSetting)
            {
                objj_msgSend(self, "_firstItemDidChange");
                objj_msgSend(self, "selectItemAtIndex:", CPNotFound);
                objj_msgSend(self, "selectItemAtIndex:", MIN(objj_msgSend(newItems, "count") - 1, indexOfSelectedItem));
            }
            else
            {
                var indexes = objj_msgSend(changes, "objectForKey:", CPKeyValueChangeIndexesKey);
                if (objj_msgSend(self, "pullsDown") && objj_msgSend(indexes, "containsIndex:", 0))
                {
                    objj_msgSend(self, "_firstItemDidChange");
                    if (objj_msgSend(self, "numberOfItems") > 1)
                    {
                        var index = CPNotFound,
                            originalIndex = 0;
                        while ((index = objj_msgSend(indexes, "indexGreaterThanIndex:", index)) !== CPNotFound && index <= originalIndex)
                            ++originalIndex;
                        objj_msgSend(objj_msgSend(self, "itemAtIndex:", originalIndex), "setHidden:", NO);
                    }
                }
                if (indexOfSelectedItem < 0)
                    objj_msgSend(self, "selectItemAtIndex:", 0);
                else
                {
                    var index = CPNotFound;
                    while ((index = objj_msgSend(indexes, "indexGreaterThanIndex:", index)) !== CPNotFound && index <= indexOfSelectedItem)
                        ++indexOfSelectedItem;
                    objj_msgSend(self, "selectItemAtIndex:", indexOfSelectedItem);
                }
            }
        }
    }
}
,["void","CPString","id","CPDictionary","id"]), new objj_method(sel_getUid("mouseDown:"), function $CPPopUpButton__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled") || !objj_msgSend(self, "numberOfItems"))
        return;
    var menu = objj_msgSend(self, "menu");
    if (menu._lastCloseEvent === anEvent)
        return;
    objj_msgSend(self, "highlight:", YES);
    var bounds = objj_msgSend(self, "bounds"),
        minimumWidth = CGRectGetWidth(bounds);
    objj_msgSend(menu, "setFont:", objj_msgSend(self, "font"));
    if (objj_msgSend(self, "pullsDown"))
    {
        var positionedItem = nil,
            location = CGPointMake(0.0, CGRectGetMaxY(bounds) - 1);
    }
    else
    {
        var contentRect = objj_msgSend(self, "contentRectForBounds:", bounds),
            positionedItem = objj_msgSend(self, "selectedItem"),
            standardLeftMargin = objj_msgSend(_CPMenuWindow, "_standardLeftMargin") + objj_msgSend(_CPMenuItemStandardView, "_standardLeftMargin"),
            location = CGPointMake(CGRectGetMinX(contentRect) - standardLeftMargin, 0.0);
        minimumWidth += standardLeftMargin;
        objj_msgSend(menu, "_highlightItemAtIndex:", CPNotFound);
    }
    objj_msgSend(menu, "setMinimumWidth:", minimumWidth);
    objj_msgSend(menu, "_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:", positionedItem, location, CGRectGetMinY(bounds), CGRectGetMaxY(bounds), self, function(aMenu)
    {
        objj_msgSend(self, "highlight:", NO);
        var highlightedItem = objj_msgSend(aMenu, "highlightedItem");
        if (objj_msgSend(highlightedItem, "_isSelectable"))
            objj_msgSend(self, "selectItem:", highlightedItem);
    });
}
,["void","CPEvent"]), new objj_method(sel_getUid("rightMouseDown:"), function $CPPopUpButton__rightMouseDown_(self, _cmd, anEvent)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("_popUpItemAction:"), function $CPPopUpButton___popUpItemAction_(self, _cmd, aSender)
{
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["void","id"]), new objj_method(sel_getUid("_firstItemDidChange"), function $CPPopUpButton___firstItemDidChange(self, _cmd)
{
    objj_msgSend(self, "willChangeValueForKey:", "_firstItem");
    objj_msgSend(self, "didChangeValueForKey:", "_firstItem");
    objj_msgSend(objj_msgSend(self, "_firstItem"), "setHidden:", YES);
}
,["void"]), new objj_method(sel_getUid("_firstItem"), function $CPPopUpButton___firstItem(self, _cmd)
{
    if (objj_msgSend(self, "numberOfItems") <= 0)
        return nil;
    return objj_msgSend(objj_msgSend(self, "menu"), "itemAtIndex:", 0);
}
,["CPMenuItem"]), new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"), function $CPPopUpButton__takeValueFromKeyPath_ofObjects_(self, _cmd, aKeyPath, objects)
{
    var count = objects.length,
        value = objj_msgSend(objects[0], "valueForKeyPath:", aKeyPath);
    objj_msgSend(self, "selectItemWithTag:", value);
    objj_msgSend(self, "setEnabled:", YES);
    while (count-- > 1)
        if (value !== objj_msgSend(objects[count], "valueForKeyPath:", aKeyPath))
            objj_msgSend(objj_msgSend(self, "selectedItem"), "setState:", CPOffState);
}
,["void","CPString","CPArray"]), new objj_method(sel_getUid("_reverseSetBinding"), function $CPPopUpButton___reverseSetBinding(self, _cmd)
{
    objj_msgSend(_CPPopUpButtonSelectionBinder, "reverseSetValueForObject:", self);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopUpButton").super_class }, "_reverseSetBinding");
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPPopUpButton__defaultThemeClass(self, _cmd)
{
    return "popup-button";
}
,["CPString"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedIndex"), function $CPPopUpButton__keyPathsForValuesAffectingSelectedIndex(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObject:", "objectValue");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedTag"), function $CPPopUpButton__keyPathsForValuesAffectingSelectedTag(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObject:", "objectValue");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingSelectedItem"), function $CPPopUpButton__keyPathsForValuesAffectingSelectedItem(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObject:", "objectValue");
}
,["CPSet"])]);
}{
var the_class = objj_getClass("CPPopUpButton")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPopUpButton\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPPopUpButton___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPSelectedIndexBinding || aBinding == CPSelectedObjectBinding || aBinding == CPSelectedTagBinding || aBinding == CPSelectedValueBinding || aBinding == CPContentBinding || aBinding == CPContentObjectsBinding || aBinding == CPContentValuesBinding)
    {
        var capitalizedBinding = (aBinding.charAt(0)).toUpperCase() + aBinding.substr(1);
        return objj_msgSend(CPClassFromString("_CPPopUpButton" + capitalizedBinding + "Binder"), "class");
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPPopUpButton").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPPopUpButtonContentBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_getInsertNullOffset"), function $_CPPopUpButtonContentBinder___getInsertNullOffset(self, _cmd)
{
    var options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey);
    return objj_msgSend(options, "objectForKey:", CPInsertsNullPlaceholderBindingOption) ? 1 : 0;
}
,["CPInteger"]), new objj_method(sel_getUid("_getNullPlaceholder"), function $_CPPopUpButtonContentBinder___getNullPlaceholder(self, _cmd)
{
    var options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        placeholder = objj_msgSend(options, "objectForKey:", CPNullPlaceholderBindingOption) || "";
    if (placeholder === objj_msgSend(CPNull, "null"))
        placeholder = "";
    return placeholder;
}
,["CPString"]), new objj_method(sel_getUid("transformValue:withOptions:"), function $_CPPopUpButtonContentBinder__transformValue_withOptions_(self, _cmd, contentArray, options)
{
    return contentArray;
}
,["id","CPArray","CPDictionary"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonContentBinder__setValue_forBinding_(self, _cmd, contentArray, aBinding)
{
    objj_msgSend(self, "_setContent:", contentArray);
    objj_msgSend(self, "_setContentValuesIfNeeded:", contentArray);
}
,["void","CPArray","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPPopUpButtonContentBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self, "_content");
}
,["void","CPString"]), new objj_method(sel_getUid("_setContent:"), function $_CPPopUpButtonContentBinder___setContent_(self, _cmd, aValue)
{
    var count = objj_msgSend(aValue, "count"),
        options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        offset = objj_msgSend(self, "_getInsertNullOffset");
    if (count + offset != objj_msgSend(self._source, "numberOfItems"))
    {
        objj_msgSend(self._source, "removeAllItems");
        if (offset)
            objj_msgSend(self._source, "addItemWithTitle:", objj_msgSend(self, "_getNullPlaceholder"));
        for (var i = 0; i < count; i++)
        {
            var item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "", NULL, nil);
            objj_msgSend(self, "_setValue:forItem:withOptions:", objj_msgSend(aValue, "objectAtIndex:", i), item, options);
            objj_msgSend(self._source, "addItem:", item);
        }
    }
    else
    {
        for (var i = 0; i < count; i++)
        {
            objj_msgSend(self, "_setValue:forItem:withOptions:", objj_msgSend(aValue, "objectAtIndex:", i), objj_msgSend(self._source, "itemAtIndex:", i + offset), options);
        }
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("_setContentValuesIfNeeded:"), function $_CPPopUpButtonContentBinder___setContentValuesIfNeeded_(self, _cmd, values)
{
    var offset = objj_msgSend(self, "_getInsertNullOffset");
    if (!objj_msgSend(self._source, "infoForBinding:", CPContentValuesBinding))
    {
        if (offset)
            objj_msgSend(objj_msgSend(self._source, "itemAtIndex:", 0), "setTitle:", objj_msgSend(self, "_getNullPlaceholder"));
        var count = objj_msgSend(values, "count");
        for (var i = 0; i < count; i++)
            objj_msgSend(objj_msgSend(self._source, "itemAtIndex:", i + offset), "setTitle:", objj_msgSend(objj_msgSend(values, "objectAtIndex:", i), "description"));
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("_setValue:forItem:withOptions:"), function $_CPPopUpButtonContentBinder___setValue_forItem_withOptions_(self, _cmd, aValue, aMenuItem, options)
{
    var value = objj_msgSend(self, "_transformValue:withOptions:", aValue, options);
    objj_msgSend(aMenuItem, "setRepresentedObject:", value);
}
,["void","id","CPMenuItem","CPDictionary"]), new objj_method(sel_getUid("_transformValue:withOptions:"), function $_CPPopUpButtonContentBinder___transformValue_withOptions_(self, _cmd, aValue, options)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpButtonContentBinder").super_class }, "transformValue:withOptions:", aValue, options);
}
,["id","id","CPDictionary"]), new objj_method(sel_getUid("_content"), function $_CPPopUpButtonContentBinder___content(self, _cmd)
{
    return objj_msgSend(self._source, "valueForKeyPath:", "itemArray.representedObject");
}
,["CPArray"])]);
}{var the_class = objj_allocateClassPair(_CPPopUpButtonContentBinder, "_CPPopUpButtonContentValuesBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonContentValuesBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpButtonContentValuesBinder").super_class }, "_setContent:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("_setValue:forItem:withOptions:"), function $_CPPopUpButtonContentValuesBinder___setValue_forItem_withOptions_(self, _cmd, aValue, aMenuItem, options)
{
    if (aValue === objj_msgSend(CPNull, "null"))
        aValue = nil;
    var value = objj_msgSend(self, "_transformValue:withOptions:", aValue, options);
    objj_msgSend(aMenuItem, "setTitle:", value);
}
,["void","id","CPMenuItem","CPDictionary"]), new objj_method(sel_getUid("_content"), function $_CPPopUpButtonContentValuesBinder___content(self, _cmd)
{
    return objj_msgSend(self._source, "valueForKeyPath:", "itemArray.title");
}
,["CPArray"])]);
}var binderForObject = {};
{var the_class = objj_allocateClassPair(CPBinder, "_CPPopUpButtonSelectionBinder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_selectionBinding")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_selectionBinding"), function $_CPPopUpButtonSelectionBinder___selectionBinding(self, _cmd)
{
    return self._selectionBinding;
}
,["CPString"]), new objj_method(sel_getUid("_setSelectionBinding:"), function $_CPPopUpButtonSelectionBinder___setSelectionBinding_(self, _cmd, newValue)
{
    self._selectionBinding = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"), function $_CPPopUpButtonSelectionBinder__initWithBinding_name_to_keyPath_options_from_(self, _cmd, aBinding, aName, aDestination, aKeyPath, options, aSource)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopUpButtonSelectionBinder").super_class }, "initWithBinding:name:to:keyPath:options:from:", aBinding, aName, aDestination, aKeyPath, options, aSource);
    if (self)
    {
        binderForObject[objj_msgSend(aSource, "UID")] = self;
        self._selectionBinding = aName;
    }
    return self;
}
,["id","CPString","CPString","id","CPString","CPDictionary","id"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPPopUpButtonSelectionBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self, "setValue:forBinding:", aValue, aBinding);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("_getInsertNullOffset"), function $_CPPopUpButtonSelectionBinder___getInsertNullOffset(self, _cmd)
{
    var options = objj_msgSend(objj_msgSend(CPBinder, "infoForBinding:forObject:", CPContentBinding, self._source), "objectForKey:", CPOptionsKey);
    return objj_msgSend(options, "objectForKey:", CPInsertsNullPlaceholderBindingOption) ? 1 : 0;
}
,["CPInteger"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("reverseSetValueForObject:"), function $_CPPopUpButtonSelectionBinder__reverseSetValueForObject_(self, _cmd, aSource)
{
    var binder = binderForObject[objj_msgSend(aSource, "UID")];
    objj_msgSend(binder, "reverseSetValueFor:", objj_msgSend(binder, "_selectionBinding"));
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(_CPPopUpButtonSelectionBinder, "_CPPopUpButtonSelectedIndexBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonSelectedIndexBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "selectItemAtIndex:", aValue + objj_msgSend(self, "_getInsertNullOffset"));
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPPopUpButtonSelectedIndexBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self._source, "indexOfSelectedItem") - objj_msgSend(self, "_getInsertNullOffset");
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(_CPPopUpButtonSelectionBinder, "_CPPopUpButtonSelectedObjectBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonSelectedObjectBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    var index = objj_msgSend(self._source, "indexOfItemWithRepresentedObject:", aValue),
        offset = objj_msgSend(self, "_getInsertNullOffset");
    if (offset === 1 && index === CPNotFound)
        index = 0;
    objj_msgSend(self._source, "selectItemAtIndex:", index);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPPopUpButtonSelectedObjectBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(objj_msgSend(self._source, "selectedItem"), "representedObject");
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(_CPPopUpButtonSelectionBinder, "_CPPopUpButtonSelectedTagBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonSelectedTagBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "selectItemWithTag:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPPopUpButtonSelectedTagBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(objj_msgSend(self._source, "selectedItem"), "tag");
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(_CPPopUpButtonSelectionBinder, "_CPPopUpButtonSelectedValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPPopUpButtonSelectedValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "selectItemWithTitle:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPPopUpButtonSelectedValueBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self._source, "titleOfSelectedItem");
}
,["id","CPString"])]);
}var DEPRECATED_CPPopUpButtonMenuKey = "CPPopUpButtonMenuKey",
    DEPRECATED_CPPopUpButtonSelectedIndexKey = "CPPopUpButtonSelectedIndexKey";
{
var the_class = objj_getClass("CPPopUpButton")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPopUpButton\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPPopUpButton__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPopUpButton").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "synchronizeTitleAndSelectedItem");
        if (objj_msgSend(aCoder, "containsValueForKey:", DEPRECATED_CPPopUpButtonMenuKey))
        {
            CPLog.warn(self + " was encoded with an older version of Cappuccino. Please nib2cib the original nib again or open and re-save in Atlas.");
            objj_msgSend(self, "setMenu:", objj_msgSend(aCoder, "decodeObjectForKey:", DEPRECATED_CPPopUpButtonMenuKey));
            objj_msgSend(self, "setObjectValue:", objj_msgSend(aCoder, "decodeObjectForKey:", DEPRECATED_CPPopUpButtonSelectedIndexKey));
        }
        var options = CPKeyValueObservingOptionNew | CPKeyValueObservingOptionOld;
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "menu.items", options, nil);
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "_firstItem.changeCount", options, nil);
        objj_msgSend(self, "addObserver:forKeyPath:options:context:", self, "selectedItem.changeCount", options, nil);
    }
    return self;
}
,["id","CPCoder"])]);
}p;21;CPProgressIndicator.jt;16605;@STATIC;1.0;i;12;CGGeometry.ji;13;CPImageView.ji;8;CPView.ji;20;CPWindow_Constants.jt;16513;objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);CPProgressIndicatorBarStyle = 0;
CPProgressIndicatorSpinningStyle = 1;
CPProgressIndicatorHUDBarStyle = 2;
var CPProgressIndicatorSpinningStyleColors = [];
{var the_class = objj_allocateClassPair(CPView, "CPProgressIndicator"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_minValue"), new objj_ivar("_maxValue"), new objj_ivar("_doubleValue"), new objj_ivar("_controlSize"), new objj_ivar("_indeterminate"), new objj_ivar("_style"), new objj_ivar("_isAnimating"), new objj_ivar("_isDisplayedWhenStoppedSet"), new objj_ivar("_isDisplayedWhenStopped")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPProgressIndicator__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPProgressIndicator").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._minValue = 0.0;
        self._maxValue = 100.0;
        self._doubleValue = 0.0;
        self._style = CPProgressIndicatorBarStyle;
        self._isDisplayedWhenStoppedSet = NO;
        self._controlSize = CPRegularControlSize;
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setUsesThreadedAnimation:"), function $CPProgressIndicator__setUsesThreadedAnimation_(self, _cmd, aFlag)
{
}
,["void","BOOL"]), new objj_method(sel_getUid("startAnimation:"), function $CPProgressIndicator__startAnimation_(self, _cmd, aSender)
{
    self._isAnimating = YES;
    objj_msgSend(self, "_hideOrDisplay");
}
,["void","id"]), new objj_method(sel_getUid("stopAnimation:"), function $CPProgressIndicator__stopAnimation_(self, _cmd, aSender)
{
    self._isAnimating = NO;
    objj_msgSend(self, "_hideOrDisplay");
}
,["void","id"]), new objj_method(sel_getUid("usesThreadedAnimation"), function $CPProgressIndicator__usesThreadedAnimation(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("incrementBy:"), function $CPProgressIndicator__incrementBy_(self, _cmd, aValue)
{
    objj_msgSend(self, "setDoubleValue:", self._doubleValue + aValue);
}
,["void","double"]), new objj_method(sel_getUid("setDoubleValue:"), function $CPProgressIndicator__setDoubleValue_(self, _cmd, aValue)
{
    self._doubleValue = MIN(MAX(aValue, self._minValue), self._maxValue);
    objj_msgSend(self, "drawBar");
}
,["void","double"]), new objj_method(sel_getUid("doubleValue"), function $CPProgressIndicator__doubleValue(self, _cmd)
{
    return self._doubleValue;
}
,["double"]), new objj_method(sel_getUid("setMinValue:"), function $CPProgressIndicator__setMinValue_(self, _cmd, aValue)
{
    self._minValue = aValue;
}
,["void","double"]), new objj_method(sel_getUid("minValue"), function $CPProgressIndicator__minValue(self, _cmd)
{
    return self._minValue;
}
,["double"]), new objj_method(sel_getUid("setMaxValue:"), function $CPProgressIndicator__setMaxValue_(self, _cmd, aValue)
{
    self._maxValue = aValue;
}
,["void","double"]), new objj_method(sel_getUid("maxValue"), function $CPProgressIndicator__maxValue(self, _cmd)
{
    return self._maxValue;
}
,["double"]), new objj_method(sel_getUid("setControlSize:"), function $CPProgressIndicator__setControlSize_(self, _cmd, aControlSize)
{
    if (self._controlSize == aControlSize)
        return;
    self._controlSize = aControlSize;
    objj_msgSend(self, "updateBackgroundColor");
}
,["void","CPControlSize"]), new objj_method(sel_getUid("controlSize"), function $CPProgressIndicator__controlSize(self, _cmd)
{
    return self._controlSize;
}
,["CPControlSize"]), new objj_method(sel_getUid("setControlTint:"), function $CPProgressIndicator__setControlTint_(self, _cmd, aControlTint)
{
}
,["void","CPControlTint"]), new objj_method(sel_getUid("controlTint"), function $CPProgressIndicator__controlTint(self, _cmd)
{
    return 0;
}
,["CPControlTint"]), new objj_method(sel_getUid("setBezeled:"), function $CPProgressIndicator__setBezeled_(self, _cmd, isBezeled)
{
}
,["void","BOOL"]), new objj_method(sel_getUid("isBezeled"), function $CPProgressIndicator__isBezeled(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("setIndeterminate:"), function $CPProgressIndicator__setIndeterminate_(self, _cmd, indeterminate)
{
    if (self._indeterminate == indeterminate)
        return;
    self._indeterminate = indeterminate;
    objj_msgSend(self, "updateBackgroundColor");
}
,["void","BOOL"]), new objj_method(sel_getUid("isIndeterminate"), function $CPProgressIndicator__isIndeterminate(self, _cmd)
{
    return self._indeterminate;
}
,["BOOL"]), new objj_method(sel_getUid("setStyle:"), function $CPProgressIndicator__setStyle_(self, _cmd, aStyle)
{
    if (self._style == aStyle)
        return;
    self._style = aStyle;
    objj_msgSend(self, "setTheme:", self._style === CPProgressIndicatorHUDBarStyle ? objj_msgSend(CPTheme, "defaultHudTheme") : objj_msgSend(CPTheme, "defaultTheme"));
    objj_msgSend(self, "updateBackgroundColor");
}
,["void","CPProgressIndicatorStyle"]), new objj_method(sel_getUid("sizeToFit"), function $CPProgressIndicator__sizeToFit(self, _cmd)
{
    if (self._style == CPProgressIndicatorSpinningStyle)
        objj_msgSend(self, "setFrameSize:", objj_msgSend(objj_msgSend(CPProgressIndicatorSpinningStyleColors[self._controlSize], "patternImage"), "size"));
    else
        objj_msgSend(self, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), objj_msgSend(self, "valueForThemeAttribute:", "default-height")));
}
,["void"]), new objj_method(sel_getUid("setDisplayedWhenStopped:"), function $CPProgressIndicator__setDisplayedWhenStopped_(self, _cmd, isDisplayedWhenStopped)
{
    if (self._isDisplayedWhenStoppedSet && self._isDisplayedWhenStopped == isDisplayedWhenStopped)
        return;
    self._isDisplayedWhenStoppedSet = YES;
    self._isDisplayedWhenStopped = isDisplayedWhenStopped;
    objj_msgSend(self, "_hideOrDisplay");
}
,["void","BOOL"]), new objj_method(sel_getUid("isDisplayedWhenStopped"), function $CPProgressIndicator__isDisplayedWhenStopped(self, _cmd)
{
    if (self._isDisplayedWhenStoppedSet)
        return self._isDisplayedWhenStopped;
    if (self._style == CPProgressIndicatorBarStyle || self._style == CPProgressIndicatorHUDBarStyle)
        return YES;
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("_hideOrDisplay"), function $CPProgressIndicator___hideOrDisplay(self, _cmd)
{
    objj_msgSend(self, "setHidden:", !self._isAnimating && !objj_msgSend(self, "isDisplayedWhenStopped"));
}
,["void"]), new objj_method(sel_getUid("setFrameSize:"), function $CPProgressIndicator__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPProgressIndicator").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "drawBar");
}
,["void","CGSize"]), new objj_method(sel_getUid("drawBar"), function $CPProgressIndicator__drawBar(self, _cmd)
{
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPProgressIndicator__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    return objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
}
,["CPView","CPString"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPProgressIndicator__rectForEphemeralSubviewNamed_(self, _cmd, aViewName)
{
    if (aViewName === "bar-view" && self._style !== CPProgressIndicatorSpinningStyle)
    {
        var width = CGRectGetWidth(objj_msgSend(self, "bounds")),
            barWidth = width * ((self._doubleValue - self._minValue) / (self._maxValue - self._minValue));
        if (barWidth > 0.0 && barWidth < 4.0)
            barWidth = 4.0;
        if (self._indeterminate)
            barWidth = width;
        return CGRectMake(0, 0, barWidth, objj_msgSend(self, "valueForThemeAttribute:", "default-height"));
    }
    return nil;
}
,["CGRect","CPString"]), new objj_method(sel_getUid("updateBackgroundColor"), function $CPProgressIndicator__updateBackgroundColor(self, _cmd)
{
    if (objj_msgSend(CPProgressIndicatorSpinningStyleColors, "count") === 0)
    {
        CPProgressIndicatorSpinningStyleColors[CPMiniControlSize] = objj_msgSend(self, "valueForThemeAttribute:", "spinning-mini-gif");
        CPProgressIndicatorSpinningStyleColors[CPSmallControlSize] = objj_msgSend(self, "valueForThemeAttribute:", "spinning-small-gif");
        CPProgressIndicatorSpinningStyleColors[CPRegularControlSize] = objj_msgSend(self, "valueForThemeAttribute:", "spinning-regular-gif");
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $CPProgressIndicator__layoutSubviews(self, _cmd)
{
    if (YES)
    {
        if (self._style == CPProgressIndicatorSpinningStyle)
        {
            objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bar-view", CPWindowBelow, nil);
            objj_msgSend(self, "setBackgroundColor:", CPProgressIndicatorSpinningStyleColors[self._controlSize]);
        }
        else
        {
            objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
            var barView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bar-view", CPWindowBelow, nil);
            if (self._indeterminate)
                objj_msgSend(barView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "indeterminate-bar-color"));
            else
                objj_msgSend(barView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bar-color"));
        }
    }
    else
        objj_msgSend(self, "setBackgroundColor:", nil);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPProgressIndicator__defaultThemeClass(self, _cmd)
{
    return "progress-indicator";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPProgressIndicator__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "indeterminate-bar-color", objj_msgSend(CPNull, "null"), "bar-color", 20, "default-height", objj_msgSend(CPNull, "null"), "bezel-color", objj_msgSend(CPNull, "null"), "spinning-mini-gif", objj_msgSend(CPNull, "null"), "spinning-small-gif", objj_msgSend(CPNull, "null"), "spinning-regular-gif");
}
,["CPDictionary"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPProgressIndicator___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding || aBinding === "isIndeterminate")
        return objj_msgSend(_CPProgressIndicatorBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPProgressIndicator").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{
var the_class = objj_getClass("CPProgressIndicator")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPProgressIndicator\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPProgressIndicator__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPProgressIndicator").super_class }, "initWithCoder:", aCoder))
    {
        self._minValue = objj_msgSend(aCoder, "decodeObjectForKey:", "_minValue");
        self._maxValue = objj_msgSend(aCoder, "decodeObjectForKey:", "_maxValue");
        self._doubleValue = objj_msgSend(aCoder, "decodeObjectForKey:", "_doubleValue");
        self._controlSize = objj_msgSend(aCoder, "decodeObjectForKey:", "_controlSize");
        self._indeterminate = objj_msgSend(aCoder, "decodeObjectForKey:", "_indeterminate");
        self._style = objj_msgSend(aCoder, "decodeIntForKey:", "_style");
        self._isAnimating = objj_msgSend(aCoder, "decodeObjectForKey:", "_isAnimating");
        self._isDisplayedWhenStoppedSet = objj_msgSend(aCoder, "decodeObjectForKey:", "_isDisplayedWhenStoppedSet");
        self._isDisplayedWhenStopped = objj_msgSend(aCoder, "decodeObjectForKey:", "_isDisplayedWhenStopped");
        objj_msgSend(self, "updateBackgroundColor");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPProgressIndicator__encodeWithCoder_(self, _cmd, aCoder)
{
    var backgroundColor = objj_msgSend(self, "backgroundColor");
    objj_msgSend(self, "setBackgroundColor:", nil);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPProgressIndicator").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(self, "setBackgroundColor:", backgroundColor);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._minValue, "_minValue");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._maxValue, "_maxValue");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._doubleValue, "_doubleValue");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._controlSize, "_controlSize");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._indeterminate, "_indeterminate");
    objj_msgSend(aCoder, "encodeInt:forKey:", self._style, "_style");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._isAnimating, "_isAnimating");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._isDisplayedWhenStoppedSet, "_isDisplayedWhenStoppedSet");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._isDisplayedWhenStopped, "_isDisplayedWhenStopped");
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPProgressIndicatorBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:forBinding:"), function $_CPProgressIndicatorBinder___updatePlaceholdersWithOptions_forBinding_(self, _cmd, options, aBinding)
{
    var value = aBinding === CPValueBinding ? 0.0 : YES;
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", value, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", value, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", value, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", value, CPNullMarker, YES);
}
,["void","CPDictionary","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPProgressIndicatorBinder__valueForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding)
        return objj_msgSend(self._source, "doubleValue");
    else if (aBinding === "isIndeterminate")
        objj_msgSend(self._source, "isIndeterminate");
    else
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPProgressIndicatorBinder").super_class }, "valueForBinding:", aBinding);
}
,["id","CPString"]), new objj_method(sel_getUid("_setValue:forBinding:"), function $_CPProgressIndicatorBinder___setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    if (aBinding === CPValueBinding)
        objj_msgSend(self._source, "setDoubleValue:", aValue);
    else if (aBinding === "isIndeterminate")
        objj_msgSend(self._source, "setIndeterminate:", aValue);
    else
        return NO;
    return YES;
}
,["BOOL","id","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPProgressIndicatorBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    if (!objj_msgSend(self, "_setValue:forBinding:", aValue, aBinding))
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPProgressIndicatorBinder").super_class }, "setValue:forBinding:", aValue, aBinding);
}
,["void","id","CPString"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPProgressIndicatorBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    if (!objj_msgSend(self, "_setValue:forBinding:", aValue, aBinding))
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPProgressIndicatorBinder").super_class }, "setPlaceholderValue:withMarker:forBinding:", aValue, aMarker, aBinding);
}
,["void","id","CPString","CPString"])]);
}p;9;CPRadio.jt;17048;@STATIC;1.0;I;21;Foundation/CPObject.jI;18;Foundation/CPSet.ji;10;CPButton.jt;16964;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPSet.j", NO);objj_executeFile("CPButton.j", YES);CPRadioImageOffset = 4.0;
{var the_class = objj_allocateClassPair(CPButton, "CPRadio"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_radioGroup")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:radioGroup:"), function $CPRadio__initWithFrame_radioGroup_(self, _cmd, aFrame, aRadioGroup)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "setRadioGroup:", aRadioGroup);
        objj_msgSend(self, "setHighlightsBy:", CPContentsCellMask);
        objj_msgSend(self, "setShowsStateBy:", CPContentsCellMask);
        objj_msgSend(self, "setImagePosition:", CPImageLeft);
        objj_msgSend(self, "setAlignment:", CPLeftTextAlignment);
        objj_msgSend(self, "setBordered:", YES);
    }
    return self;
}
,["id","CGRect","CPRadioGroup"]), new objj_method(sel_getUid("initWithFrame:"), function $CPRadio__initWithFrame_(self, _cmd, aFrame)
{
    return objj_msgSend(self, "initWithFrame:radioGroup:", aFrame, objj_msgSend(CPRadioGroup, "new"));
}
,["id","CGRect"]), new objj_method(sel_getUid("nextState"), function $CPRadio__nextState(self, _cmd)
{
    return CPOnState;
}
,["CPInteger"]), new objj_method(sel_getUid("setRadioGroup:"), function $CPRadio__setRadioGroup_(self, _cmd, aRadioGroup)
{
    if (self._radioGroup === aRadioGroup)
        return;
    objj_msgSend(self._radioGroup, "_removeRadio:", self);
    self._radioGroup = aRadioGroup;
    objj_msgSend(self._radioGroup, "_addRadio:", self);
}
,["void","CPRadioGroup"]), new objj_method(sel_getUid("radioGroup"), function $CPRadio__radioGroup(self, _cmd)
{
    return self._radioGroup;
}
,["CPRadioGroup"]), new objj_method(sel_getUid("setObjectValue:"), function $CPRadio__setObjectValue_(self, _cmd, aValue)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "setObjectValue:", aValue);
    if (objj_msgSend(self, "state") === CPOnState)
        objj_msgSend(self._radioGroup, "_setSelectedRadio:", self);
}
,["void","id"]), new objj_method(sel_getUid("sendAction:to:"), function $CPRadio__sendAction_to_(self, _cmd, anAction, anObject)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "sendAction:to:", anAction, anObject);
    if (self._radioGroup)
        objj_msgSend(CPApp, "sendAction:to:from:", objj_msgSend(self._radioGroup, "action"), objj_msgSend(self._radioGroup, "target"), self._radioGroup);
}
,["void","SEL","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("radioWithTitle:theme:"), function $CPRadio__radioWithTitle_theme_(self, _cmd, aTitle, aTheme)
{
    return objj_msgSend(self, "buttonWithTitle:theme:", aTitle, aTheme);
}
,["id","CPString","CPTheme"]), new objj_method(sel_getUid("radioWithTitle:"), function $CPRadio__radioWithTitle_(self, _cmd, aTitle)
{
    return objj_msgSend(self, "buttonWithTitle:", aTitle);
}
,["id","CPString"]), new objj_method(sel_getUid("standardButtonWithTitle:"), function $CPRadio__standardButtonWithTitle_(self, _cmd, aTitle)
{
    var button = objj_msgSend(objj_msgSend(CPRadio, "alloc"), "init");
    objj_msgSend(button, "setTitle:", aTitle);
    return button;
}
,["CPButton","CPString"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPRadio__defaultThemeClass(self, _cmd)
{
    return "radio";
}
,["CPString"])]);
}var CPRadioRadioGroupKey = "CPRadioRadioGroupKey";
{
var the_class = objj_getClass("CPRadio")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPRadio\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPRadio__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "initWithCoder:", aCoder);
    if (self)
        self._radioGroup = objj_msgSend(aCoder, "decodeObjectForKey:", CPRadioRadioGroupKey);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPRadio__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._radioGroup, CPRadioRadioGroupKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("image"), function $CPRadio__image(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "image");
}
,["CPImage"]), new objj_method(sel_getUid("alternateImage"), function $CPRadio__alternateImage(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "image");
}
,["CPImage"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPRadio__startTrackingAt_(self, _cmd, aPoint)
{
    var startedTracking = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadio").super_class }, "startTrackingAt:", aPoint);
    objj_msgSend(self, "highlight:", YES);
    return startedTracking;
}
,["BOOL","CGPoint"])]);
}{var the_class = objj_allocateClassPair(CPObject, "CPRadioGroup"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_radios"), new objj_ivar("_selectedRadio"), new objj_ivar("_enabled"), new objj_ivar("_hidden"), new objj_ivar("_target"), new objj_ivar("_action")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("enabled"), function $CPRadioGroup__enabled(self, _cmd)
{
    return self._enabled;
}
,["BOOL"]), new objj_method(sel_getUid("_setEnabled:"), function $CPRadioGroup___setEnabled_(self, _cmd, newValue)
{
    self._enabled = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("hidden"), function $CPRadioGroup__hidden(self, _cmd)
{
    return self._hidden;
}
,["BOOL"]), new objj_method(sel_getUid("_setHidden:"), function $CPRadioGroup___setHidden_(self, _cmd, newValue)
{
    self._hidden = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("target"), function $CPRadioGroup__target(self, _cmd)
{
    return self._target;
}
,["id"]), new objj_method(sel_getUid("setTarget:"), function $CPRadioGroup__setTarget_(self, _cmd, newValue)
{
    self._target = newValue;
}
,["void","id"]), new objj_method(sel_getUid("action"), function $CPRadioGroup__action(self, _cmd)
{
    return self._action;
}
,["SEL"]), new objj_method(sel_getUid("setAction:"), function $CPRadioGroup__setAction_(self, _cmd, newValue)
{
    self._action = newValue;
}
,["void","SEL"]), new objj_method(sel_getUid("init"), function $CPRadioGroup__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadioGroup").super_class }, "init");
    if (self)
    {
        self._radios = [];
        self._selectedRadio = nil;
        self._enabled = YES;
        self._hidden = NO;
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("selectRadioAtIndex:"), function $CPRadioGroup__selectRadioAtIndex_(self, _cmd, index)
{
    if (index === -1)
        objj_msgSend(self, "_setSelectedRadio:", nil);
    else
    {
        var radio = objj_msgSend(self._radios, "objectAtIndex:", index);
        objj_msgSend(self, "_setSelectedRadio:", radio);
        objj_msgSend(radio, "setState:", CPOnState);
    }
}
,["void","int"]), new objj_method(sel_getUid("selectRadioWithTag:"), function $CPRadioGroup__selectRadioWithTag_(self, _cmd, tag)
{
    var index = objj_msgSend(self._radios, "indexOfObjectPassingTest:", function(radio)
    {
        return objj_msgSend(radio, "tag") === tag;
    });
    if (index !== CPNotFound)
    {
        objj_msgSend(self, "selectRadioAtIndex:", index);
        return YES;
    }
    else
        return NO;
}
,["BOOL","int"]), new objj_method(sel_getUid("selectedRadio"), function $CPRadioGroup__selectedRadio(self, _cmd)
{
    return self._selectedRadio;
}
,["CPRadio"]), new objj_method(sel_getUid("selectedRadioIndex"), function $CPRadioGroup__selectedRadioIndex(self, _cmd)
{
    return objj_msgSend(self._radios, "indexOfObject:", self._selectedRadio);
}
,["int"]), new objj_method(sel_getUid("radios"), function $CPRadioGroup__radios(self, _cmd)
{
    return self._radios;
}
,["CPArray"]), new objj_method(sel_getUid("setEnabled:"), function $CPRadioGroup__setEnabled_(self, _cmd, enabled)
{
    objj_msgSend(self._radios, "makeObjectsPerformSelector:withObject:", sel_getUid("setEnabled:"), enabled);
}
,["void","BOOL"]), new objj_method(sel_getUid("setHidden:"), function $CPRadioGroup__setHidden_(self, _cmd, hidden)
{
    objj_msgSend(self._radios, "makeObjectsPerformSelector:withObject:", sel_getUid("setHidden:"), hidden);
}
,["void","BOOL"]), new objj_method(sel_getUid("_addRadio:"), function $CPRadioGroup___addRadio_(self, _cmd, aRadio)
{
    if (objj_msgSend(self._radios, "indexOfObject:", aRadio) === CPNotFound)
        objj_msgSend(self._radios, "addObject:", aRadio);
    if (objj_msgSend(aRadio, "state") === CPOnState)
        objj_msgSend(self, "_setSelectedRadio:", aRadio);
}
,["void","CPRadio"]), new objj_method(sel_getUid("_removeRadio:"), function $CPRadioGroup___removeRadio_(self, _cmd, aRadio)
{
    if (self._selectedRadio === aRadio)
        self._selectedRadio = nil;
    objj_msgSend(self._radios, "removeObject:", aRadio);
}
,["void","CPRadio"]), new objj_method(sel_getUid("_selectRadioWithTitle:"), function $CPRadioGroup___selectRadioWithTitle_(self, _cmd, aTitle)
{
    var index = objj_msgSend(self._radios, "indexOfObjectPassingTest:", function(radio)
    {
        return objj_msgSend(radio, "title") === aTitle;
    });
    objj_msgSend(self, "selectRadioAtIndex:", index);
}
,["void","CPString"]), new objj_method(sel_getUid("_setSelectedRadio:"), function $CPRadioGroup___setSelectedRadio_(self, _cmd, aRadio)
{
    if (self._selectedRadio === aRadio)
        return;
    objj_msgSend(self._selectedRadio, "setState:", CPOffState);
    self._selectedRadio = aRadio;
    objj_msgSend(_CPRadioGroupSelectionBinder, "reverseSetValueForObject:", self);
}
,["void","CPRadio"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPRadioGroup__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPRadioGroup, "class"))
        return;
    objj_msgSend(self, "exposeBinding:", CPSelectedValueBinding);
    objj_msgSend(self, "exposeBinding:", CPSelectedTagBinding);
    objj_msgSend(self, "exposeBinding:", CPSelectedIndexBinding);
    objj_msgSend(self, "exposeBinding:", CPEnabledBinding);
    objj_msgSend(self, "exposeBinding:", CPHiddenBinding);
}
,["void"])]);
}var CPRadioGroupRadiosKey = "CPRadioGroupRadiosKey",
    CPRadioGroupSelectedRadioKey = "CPRadioGroupSelectedRadioKey";
{
var the_class = objj_getClass("CPRadioGroup")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPRadioGroup\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPRadioGroup__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRadioGroup").super_class }, "init");
    if (self)
    {
        self._radios = objj_msgSend(aCoder, "decodeObjectForKey:", CPRadioGroupRadiosKey);
        self._selectedRadio = objj_msgSend(aCoder, "decodeObjectForKey:", CPRadioGroupSelectedRadioKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPRadioGroup__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._radios, CPRadioGroupRadiosKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._selectedRadio, CPRadioGroupSelectedRadioKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPRadioGroup")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPRadioGroup\"");
var meta_class = the_class.isa;class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPRadioGroup___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPSelectedValueBinding || aBinding === CPSelectedTagBinding || aBinding === CPSelectedIndexBinding)
    {
        var capitalizedBinding = (aBinding.charAt(0)).toUpperCase() + aBinding.substr(1);
        return objj_msgSend(CPClassFromString("_CPRadioGroup" + capitalizedBinding + "Binder"), "class");
    }
    else if (objj_msgSend(aBinding, "hasPrefix:", CPEnabledBinding))
        return objj_msgSend(CPMultipleValueAndBinding, "class");
    else if (objj_msgSend(aBinding, "hasPrefix:", CPHiddenBinding))
        return objj_msgSend(CPMultipleValueOrBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPRadioGroup").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}var binderForObject = {};
{var the_class = objj_allocateClassPair(CPBinder, "_CPRadioGroupSelectionBinder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_selectionBinding")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_selectionBinding"), function $_CPRadioGroupSelectionBinder___selectionBinding(self, _cmd)
{
    return self._selectionBinding;
}
,["CPString"]), new objj_method(sel_getUid("_setSelectionBinding:"), function $_CPRadioGroupSelectionBinder___setSelectionBinding_(self, _cmd, newValue)
{
    self._selectionBinding = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"), function $_CPRadioGroupSelectionBinder__initWithBinding_name_to_keyPath_options_from_(self, _cmd, aBinding, aName, aDestination, aKeyPath, options, aSource)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRadioGroupSelectionBinder").super_class }, "initWithBinding:name:to:keyPath:options:from:", aBinding, aName, aDestination, aKeyPath, options, aSource);
    if (self)
    {
        binderForObject[objj_msgSend(aSource, "UID")] = self;
        self._selectionBinding = aName;
    }
    return self;
}
,["id","CPString","CPString","id","CPString","CPDictionary","id"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPRadioGroupSelectionBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self, "setValue:forBinding:", aValue, aBinding);
}
,["void","id","CPString","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("reverseSetValueForObject:"), function $_CPRadioGroupSelectionBinder__reverseSetValueForObject_(self, _cmd, aSource)
{
    var binder = binderForObject[objj_msgSend(aSource, "UID")];
    objj_msgSend(binder, "reverseSetValueFor:", objj_msgSend(binder, "_selectionBinding"));
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(_CPRadioGroupSelectionBinder, "_CPRadioGroupSelectedIndexBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPRadioGroupSelectedIndexBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "selectRadioAtIndex:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPRadioGroupSelectedIndexBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(self._source, "selectedRadioIndex");
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(_CPRadioGroupSelectionBinder, "_CPRadioGroupSelectedTagBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPRadioGroupSelectedTagBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "selectRadioWithTag:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPRadioGroupSelectedTagBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(objj_msgSend(self._source, "selectedRadio"), "tag");
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(_CPRadioGroupSelectionBinder, "_CPRadioGroupSelectedValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValue:forBinding:"), function $_CPRadioGroupSelectedValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "_selectRadioWithTitle:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPRadioGroupSelectedValueBinder__valueForBinding_(self, _cmd, aBinding)
{
    return objj_msgSend(objj_msgSend(self._source, "selectedRadio"), "title");
}
,["id","CPString"])]);
}p;13;CPResponder.jt;8607;@STATIC;1.0;I;21;Foundation/CPObject.jI;26;Foundation/CPObjJRuntime.ji;9;CPEvent.jt;8518;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPObjJRuntime.j", NO);objj_executeFile("CPEvent.j", YES);CPDeleteKeyCode = 8;
CPTabKeyCode = 9;
CPReturnKeyCode = 13;
CPEscapeKeyCode = 27;
CPSpaceKeyCode = 32;
CPPageUpKeyCode = 33;
CPPageDownKeyCode = 34;
CPLeftArrowKeyCode = 37;
CPUpArrowKeyCode = 38;
CPRightArrowKeyCode = 39;
CPDownArrowKeyCode = 40;
CPDeleteForwardKeyCode = 46;
{var the_class = objj_allocateClassPair(CPObject, "CPResponder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menu"), new objj_ivar("_nextResponder")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("acceptsFirstResponder"), function $CPResponder__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("becomeFirstResponder"), function $CPResponder__becomeFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPResponder__resignFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("setNextResponder:"), function $CPResponder__setNextResponder_(self, _cmd, aResponder)
{
    self._nextResponder = aResponder;
}
,["void","CPResponder"]), new objj_method(sel_getUid("nextResponder"), function $CPResponder__nextResponder(self, _cmd)
{
    return self._nextResponder;
}
,["CPResponder"]), new objj_method(sel_getUid("interpretKeyEvents:"), function $CPResponder__interpretKeyEvents_(self, _cmd, events)
{
    var index = 0,
        count = objj_msgSend(events, "count");
    for (; index < count; ++index)
    {
        var event = events[index],
            modifierFlags = objj_msgSend(event, "modifierFlags"),
            character = objj_msgSend(event, "charactersIgnoringModifiers"),
            selectorNames = objj_msgSend(CPKeyBinding, "selectorsForKey:modifierFlags:", character, modifierFlags);
        if (selectorNames)
        {
            for (var s = 0, scount = selectorNames.length; s < scount; s++)
            {
                var selector = selectorNames[s];
                if (!selector)
                    continue;
                objj_msgSend(self, "doCommandBySelector:", CPSelectorFromString(selector));
            }
        }
        else if (!(modifierFlags & (CPCommandKeyMask | CPControlKeyMask)) && objj_msgSend(self, "respondsToSelector:", sel_getUid("insertText:")))
            objj_msgSend(self, "insertText:", objj_msgSend(event, "characters"));
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("mouseDown:"), function $CPResponder__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("rightMouseDown:"), function $CPResponder__rightMouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $CPResponder__mouseDragged_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $CPResponder__mouseUp_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("rightMouseUp:"), function $CPResponder__rightMouseUp_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseMoved:"), function $CPResponder__mouseMoved_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseEntered:"), function $CPResponder__mouseEntered_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPResponder__mouseExited_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("scrollWheel:"), function $CPResponder__scrollWheel_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyDown:"), function $CPResponder__keyDown_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyUp:"), function $CPResponder__keyUp_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("flagsChanged:"), function $CPResponder__flagsChanged_(self, _cmd, anEvent)
{
    objj_msgSend(self._nextResponder, "performSelector:withObject:", _cmd, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $CPResponder__performKeyEquivalent_(self, _cmd, anEvent)
{
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("insertLineBreak:"), function $CPResponder__insertLineBreak_(self, _cmd, aSender)
{
    objj_msgSend(self, "insertNewline:", aSender);
}
,["void","id"]), new objj_method(sel_getUid("insertNewline:"), function $CPResponder__insertNewline_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(self, "nextResponder"), "insertNewline:", aSender);
}
,["void","id"]), new objj_method(sel_getUid("insertTab:"), function $CPResponder__insertTab_(self, _cmd, sender)
{
}
,["void","id"]), new objj_method(sel_getUid("insertBackTab:"), function $CPResponder__insertBackTab_(self, _cmd, sender)
{
}
,["void","id"]), new objj_method(sel_getUid("insertText:"), function $CPResponder__insertText_(self, _cmd, aString)
{
}
,["void","CPString"]), new objj_method(sel_getUid("doCommandBySelector:"), function $CPResponder__doCommandBySelector_(self, _cmd, aSelector)
{
    if (objj_msgSend(self, "respondsToSelector:", aSelector))
        objj_msgSend(self, "performSelector:", aSelector);
    else
        objj_msgSend(self._nextResponder, "doCommandBySelector:", aSelector);
}
,["void","SEL"]), new objj_method(sel_getUid("tryToPerform:with:"), function $CPResponder__tryToPerform_with_(self, _cmd, aSelector, anObject)
{
    if (objj_msgSend(self, "respondsToSelector:", aSelector))
    {
        objj_msgSend(self, "performSelector:withObject:", aSelector, anObject);
        return YES;
    }
    return objj_msgSend(self._nextResponder, "tryToPerform:with:", aSelector, anObject);
}
,["BOOL","SEL","id"]), new objj_method(sel_getUid("setMenu:"), function $CPResponder__setMenu_(self, _cmd, aMenu)
{
    self._menu = aMenu;
}
,["void","CPMenu"]), new objj_method(sel_getUid("menu"), function $CPResponder__menu(self, _cmd)
{
    return self._menu;
}
,["CPMenu"]), new objj_method(sel_getUid("undoManager"), function $CPResponder__undoManager(self, _cmd)
{
    return objj_msgSend(self._nextResponder, "performSelector:", _cmd);
}
,["CPUndoManager"]), new objj_method(sel_getUid("noResponderFor:"), function $CPResponder__noResponderFor_(self, _cmd, anEventSelector)
{
}
,["void","SEL"])]);
}var CPResponderNextResponderKey = "CPResponderNextResponderKey",
    CPResponderMenuKey = "CPResponderMenuKey";
{
var the_class = objj_getClass("CPResponder")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPResponder\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPResponder__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPResponder").super_class }, "init");
    if (self)
    {
        objj_msgSend(self, "setNextResponder:", objj_msgSend(aCoder, "decodeObjectForKey:", CPResponderNextResponderKey));
        objj_msgSend(self, "setMenu:", objj_msgSend(aCoder, "decodeObjectForKey:", CPResponderMenuKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPResponder__encodeWithCoder_(self, _cmd, aCoder)
{
    if (self._nextResponder !== nil)
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._nextResponder, CPResponderNextResponderKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._menu, CPResponderMenuKey);
}
,["void","CPCoder"])]);
}p;13;CPSavePanel.jt;3796;@STATIC;1.0;i;9;CPPanel.jt;3764;objj_executeFile("CPPanel.j", YES);{var the_class = objj_allocateClassPair(CPPanel, "CPSavePanel"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_URL"), new objj_ivar("_isExtensionHidden"), new objj_ivar("_canSelectHiddenExtension"), new objj_ivar("_allowsOtherFileTypes"), new objj_ivar("_canCreateDirectories"), new objj_ivar("_allowedFileTypes")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isExtensionHidden"), function $CPSavePanel__isExtensionHidden(self, _cmd)
{
    return self._isExtensionHidden;
}
,["BOOL"]), new objj_method(sel_getUid("setExtensionHidden:"), function $CPSavePanel__setExtensionHidden_(self, _cmd, newValue)
{
    self._isExtensionHidden = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("canSelectHiddenExtension"), function $CPSavePanel__canSelectHiddenExtension(self, _cmd)
{
    return self._canSelectHiddenExtension;
}
,["BOOL"]), new objj_method(sel_getUid("setCanSelectHiddenExtension:"), function $CPSavePanel__setCanSelectHiddenExtension_(self, _cmd, newValue)
{
    self._canSelectHiddenExtension = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsOtherFileTypes"), function $CPSavePanel__allowsOtherFileTypes(self, _cmd)
{
    return self._allowsOtherFileTypes;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsOtherFileTypes:"), function $CPSavePanel__setAllowsOtherFileTypes_(self, _cmd, newValue)
{
    self._allowsOtherFileTypes = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("canCreateDirectories"), function $CPSavePanel__canCreateDirectories(self, _cmd)
{
    return self._canCreateDirectories;
}
,["BOOL"]), new objj_method(sel_getUid("setCanCreateDirectories:"), function $CPSavePanel__setCanCreateDirectories_(self, _cmd, newValue)
{
    self._canCreateDirectories = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowedFileTypes"), function $CPSavePanel__allowedFileTypes(self, _cmd)
{
    return self._allowedFileTypes;
}
,["CPArray"]), new objj_method(sel_getUid("setAllowedFileTypes:"), function $CPSavePanel__setAllowedFileTypes_(self, _cmd, newValue)
{
    self._allowedFileTypes = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("init"), function $CPSavePanel__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSavePanel").super_class }, "init"))
    {
        self._canCreateDirectories = YES;
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("runModal"), function $CPSavePanel__runModal(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    if (typeof window["cpSavePanel"] === "function")
    {
        var resultObject = window.cpSavePanel({isExtensionHidden: self._isExtensionHidden, canSelectHiddenExtension: self._canSelectHiddenExtension, allowsOtherFileTypes: self._allowsOtherFileTypes, canCreateDirectories: self._canCreateDirectories, allowedFileTypes: self._allowedFileTypes}),
            result = resultObject.button;
        self._URL = result ? objj_msgSend(CPURL, "URLWithString:", resultObject.URL) : nil;
    }
    else
    {
        var documentName = window.prompt("Document Name:"),
            result = documentName !== null;
        self._URL = result ? objj_msgSend(objj_msgSend(self, "class"), "proposedFileURLWithDocumentName:", documentName) : nil;
    }
    return result;
}
,["CPInteger"]), new objj_method(sel_getUid("URL"), function $CPSavePanel__URL(self, _cmd)
{
    return self._URL;
}
,["CPURL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("savePanel"), function $CPSavePanel__savePanel(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPSavePanel, "alloc"), "init");
}
,["id"])]);
}p;10;CPScreen.jt;479;@STATIC;1.0;I;21;Foundation/CPObject.jt;435;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPScreen"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("visibleFrame"), function $CPScreen__visibleFrame(self, _cmd)
{
    return CGRectMake(window.screen.availLeft, window.screen.availTop, window.screen.availWidth, window.screen.availHeight);
}
,["CGRect"])]);
}p;12;CPScroller.jt;30390;@STATIC;1.0;i;13;CPAnimation.ji;11;CPControl.ji;20;CPWindow_Constants.ji;17;CPViewAnimation.jt;30289;objj_executeFile("CPAnimation.j", YES);objj_executeFile("CPControl.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("CPViewAnimation.j", YES);CPScrollerNoPart = 0;
CPScrollerDecrementPage = 1;
CPScrollerKnob = 2;
CPScrollerIncrementPage = 3;
CPScrollerDecrementLine = 4;
CPScrollerIncrementLine = 5;
CPScrollerKnobSlot = 6;
CPScrollerIncrementArrow = 0;
CPScrollerDecrementArrow = 1;
CPNoScrollerParts = 0;
CPOnlyScrollerArrows = 1;
CPAllScrollerParts = 2;
var PARTS_ARRANGEMENT = [CPScrollerKnobSlot, CPScrollerDecrementLine, CPScrollerIncrementLine, CPScrollerKnob],
    NAMES_FOR_PARTS = {},
    PARTS_FOR_NAMES = {};
var _CACHED_THEME_SCROLLER = nil;
NAMES_FOR_PARTS[CPScrollerDecrementLine] = "decrement-line";
NAMES_FOR_PARTS[CPScrollerIncrementLine] = "increment-line";
NAMES_FOR_PARTS[CPScrollerKnobSlot] = "knob-slot";
NAMES_FOR_PARTS[CPScrollerKnob] = "knob";
CPScrollerStyleLegacy = 0;
CPScrollerStyleOverlay = 1;
CPScrollerKnobStyleDefault = 0;
CPScrollerKnobStyleDark = 1;
CPScrollerKnobStyleLight = 2;
CPThemeStateScrollViewLegacy = CPThemeState("scroller-style-legacy");
CPThemeStateScrollerKnobLight = CPThemeState("scroller-knob-light");
CPThemeStateScrollerKnobDark = CPThemeState("scroller-knob-dark");
{var the_class = objj_allocateClassPair(CPControl, "CPScroller"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_controlSize"), new objj_ivar("_usableParts"), new objj_ivar("_partRects"), new objj_ivar("_isVertical"), new objj_ivar("_knobProportion"), new objj_ivar("_hitPart"), new objj_ivar("_trackingPart"), new objj_ivar("_trackingFloatValue"), new objj_ivar("_trackingStartPoint"), new objj_ivar("_animationScroller"), new objj_ivar("_allowFadingOut"), new objj_ivar("_style"), new objj_ivar("_timerFadeOut"), new objj_ivar("_isMouseOver")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isVertical"), function $CPScroller__isVertical(self, _cmd)
{
    return self._isVertical;
}
,["BOOL"]), new objj_method(sel_getUid("allowFadingOut"), function $CPScroller__allowFadingOut(self, _cmd)
{
    return self._allowFadingOut;
}
,["BOOL"]), new objj_method(sel_getUid("_setAllowFadingOut:"), function $CPScroller___setAllowFadingOut_(self, _cmd, newValue)
{
    self._allowFadingOut = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithFrame:"), function $CPScroller__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "initWithFrame:", aFrame))
    {
        self._controlSize = CPRegularControlSize;
        self._partRects = [];
        objj_msgSend(self, "setFloatValue:", 0.0);
        objj_msgSend(self, "setKnobProportion:", 1.0);
        self._hitPart = CPScrollerNoPart;
        self._allowFadingOut = YES;
        self._isMouseOver = NO;
        self._style = CPScrollerStyleOverlay;
        var paramAnimFadeOut = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self, CPViewAnimationTargetKey, CPViewAnimationFadeOutEffect, CPViewAnimationEffectKey);
        self._animationScroller = objj_msgSend(objj_msgSend(CPViewAnimation, "alloc"), "initWithDuration:animationCurve:", 0.2, CPAnimationEaseInOut);
        objj_msgSend(self._animationScroller, "setViewAnimations:", [paramAnimFadeOut]);
        objj_msgSend(self._animationScroller, "setDelegate:", self);
        objj_msgSend(self, "setAlphaValue:", 0.0);
        objj_msgSend(self, "_setIsVertical:", CGRectGetHeight(aFrame) >= CGRectGetWidth(aFrame));
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("style"), function $CPScroller__style(self, _cmd)
{
    return self._style;
}
,["void"]), new objj_method(sel_getUid("setStyle:"), function $CPScroller__setStyle_(self, _cmd, aStyle)
{
    if (self._style != nil && self._style === aStyle)
        return;
    self._style = aStyle;
    if (self._style === CPScrollerStyleLegacy)
    {
        objj_msgSend(self, "fadeIn");
        objj_msgSend(self, "setThemeState:", CPThemeStateScrollViewLegacy);
    }
    else
    {
        self._allowFadingOut = YES;
        objj_msgSend(self, "unsetThemeState:", CPThemeStateScrollViewLegacy);
    }
}
,["void","id"]), new objj_method(sel_getUid("setObjectValue:"), function $CPScroller__setObjectValue_(self, _cmd, aValue)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "setObjectValue:", MIN(1.0, MAX(0.0, +aValue)));
}
,["void","id"]), new objj_method(sel_getUid("controlSize"), function $CPScroller__controlSize(self, _cmd)
{
    return self._controlSize;
}
,["CPControlSize"]), new objj_method(sel_getUid("setControlSize:"), function $CPScroller__setControlSize_(self, _cmd, aControlSize)
{
    if (self._controlSize == aControlSize)
        return;
    self._controlSize = aControlSize;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPControlSize"]), new objj_method(sel_getUid("knobProportion"), function $CPScroller__knobProportion(self, _cmd)
{
    return self._knobProportion;
}
,["float"]), new objj_method(sel_getUid("setKnobProportion:"), function $CPScroller__setKnobProportion_(self, _cmd, aProportion)
{
    if (!(!isNaN(parseFloat(aProportion)) && isFinite(aProportion)))
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "aProportion must be numeric");
    self._knobProportion = MIN(1.0, MAX(0.0001, aProportion));
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","float"]), new objj_method(sel_getUid("_adjustScrollerSize"), function $CPScroller___adjustScrollerSize(self, _cmd)
{
    var frame = objj_msgSend(self, "frame"),
        scrollerWidth = objj_msgSend(self, "currentValueForThemeAttribute:", "scroller-width");
    if (objj_msgSend(self, "isVertical") && CGRectGetWidth(frame) !== scrollerWidth)
        frame.size.width = scrollerWidth;
    if (!objj_msgSend(self, "isVertical") && CGRectGetHeight(frame) !== scrollerWidth)
        frame.size.height = scrollerWidth;
    objj_msgSend(self, "setFrame:", frame);
}
,["void"]), new objj_method(sel_getUid("_performFadeOut:"), function $CPScroller___performFadeOut_(self, _cmd, aTimer)
{
    objj_msgSend(self, "fadeOut");
    self._timerFadeOut = nil;
}
,["void","CPTimer"]), new objj_method(sel_getUid("rectForPart:"), function $CPScroller__rectForPart_(self, _cmd, aPart)
{
    if (aPart == CPScrollerNoPart)
        return CGRectMakeZero();
    return self._partRects[aPart];
}
,["CGRect","CPScrollerPart"]), new objj_method(sel_getUid("testPart:"), function $CPScroller__testPart_(self, _cmd, aPoint)
{
    aPoint = objj_msgSend(self, "convertPoint:fromView:", aPoint, nil);
    if (!objj_msgSend(self, "hasThemeState:", CPThemeStateSelected))
        return CPScrollerNoPart;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerKnob), aPoint))
        return CPScrollerKnob;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerDecrementPage), aPoint))
        return CPScrollerDecrementPage;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerIncrementPage), aPoint))
        return CPScrollerIncrementPage;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerDecrementLine), aPoint))
        return CPScrollerDecrementLine;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerIncrementLine), aPoint))
        return CPScrollerIncrementLine;
    if (CGRectContainsPoint(objj_msgSend(self, "rectForPart:", CPScrollerKnobSlot), aPoint))
        return CPScrollerKnobSlot;
    return CPScrollerNoPart;
}
,["CPScrollerPart","CGPoint"]), new objj_method(sel_getUid("checkSpaceForParts"), function $CPScroller__checkSpaceForParts(self, _cmd)
{
    var bounds = objj_msgSend(self, "bounds");
    if (self._knobProportion === 1.0)
    {
        self._usableParts = CPNoScrollerParts;
        self._partRects[CPScrollerDecrementPage] = CGRectMakeZero();
        self._partRects[CPScrollerKnob] = CGRectMakeZero();
        self._partRects[CPScrollerIncrementPage] = CGRectMakeZero();
        self._partRects[CPScrollerDecrementLine] = CGRectMakeZero();
        self._partRects[CPScrollerIncrementLine] = CGRectMakeZero();
        self._partRects[CPScrollerKnobSlot] = CGRectMakeCopy(bounds);
        return;
    }
    self._usableParts = CPAllScrollerParts;
    var knobInset = objj_msgSend(self, "currentValueForThemeAttribute:", "knob-inset"),
        trackInset = objj_msgSend(self, "currentValueForThemeAttribute:", "track-inset"),
        width = CGRectGetWidth(bounds),
        height = CGRectGetHeight(bounds);
    if (objj_msgSend(self, "isVertical"))
    {
        var decrementLineSize = objj_msgSend(self, "currentValueForThemeAttribute:", "decrement-line-size"),
            incrementLineSize = objj_msgSend(self, "currentValueForThemeAttribute:", "increment-line-size"),
            effectiveDecrementLineHeight = decrementLineSize.height + trackInset.top,
            effectiveIncrementLineHeight = incrementLineSize.height + trackInset.bottom,
            slotSize = height - effectiveDecrementLineHeight - effectiveIncrementLineHeight,
            minimumKnobLength = objj_msgSend(self, "currentValueForThemeAttribute:", "minimum-knob-length"),
            knobWidth = width - knobInset.left - knobInset.right,
            knobHeight = MAX(minimumKnobLength, slotSize * self._knobProportion),
            knobLocation = effectiveDecrementLineHeight + (slotSize - knobHeight) * objj_msgSend(self, "floatValue");
        self._partRects[CPScrollerDecrementPage] = CGRectMake(0.0, effectiveDecrementLineHeight, width, knobLocation - effectiveDecrementLineHeight);
        self._partRects[CPScrollerKnob] = CGRectMake(knobInset.left, knobLocation, knobWidth, knobHeight);
        self._partRects[CPScrollerIncrementPage] = CGRectMake(0.0, knobLocation + knobHeight, width, height - (knobLocation + knobHeight) - effectiveIncrementLineHeight);
        self._partRects[CPScrollerKnobSlot] = CGRectMake(trackInset.left, effectiveDecrementLineHeight, width - trackInset.left - trackInset.right, slotSize);
        self._partRects[CPScrollerDecrementLine] = CGRectMake(0.0, 0.0, decrementLineSize.width, decrementLineSize.height);
        self._partRects[CPScrollerIncrementLine] = CGRectMake(0.0, height - incrementLineSize.height, incrementLineSize.width, incrementLineSize.height);
        if (height < knobHeight + decrementLineSize.height + incrementLineSize.height + trackInset.top + trackInset.bottom)
            self._partRects[CPScrollerKnob] = CGRectMakeZero();
        if (height < decrementLineSize.height + incrementLineSize.height - 2)
        {
            self._partRects[CPScrollerIncrementLine] = CGRectMakeZero();
            self._partRects[CPScrollerDecrementLine] = CGRectMakeZero();
            self._partRects[CPScrollerKnobSlot] = CGRectMake(trackInset.left, 0, width - trackInset.left - trackInset.right, height);
        }
    }
    else
    {
        var decrementLineSize = objj_msgSend(self, "currentValueForThemeAttribute:", "decrement-line-size"),
            incrementLineSize = objj_msgSend(self, "currentValueForThemeAttribute:", "increment-line-size"),
            effectiveDecrementLineWidth = decrementLineSize.width + trackInset.left,
            effectiveIncrementLineWidth = incrementLineSize.width + trackInset.right,
            slotSize = width - effectiveDecrementLineWidth - effectiveIncrementLineWidth,
            minimumKnobLength = objj_msgSend(self, "currentValueForThemeAttribute:", "minimum-knob-length"),
            knobWidth = MAX(minimumKnobLength, slotSize * self._knobProportion),
            knobHeight = height - knobInset.top - knobInset.bottom,
            knobLocation = effectiveDecrementLineWidth + (slotSize - knobWidth) * objj_msgSend(self, "floatValue");
        self._partRects[CPScrollerDecrementPage] = CGRectMake(effectiveDecrementLineWidth, 0.0, knobLocation - effectiveDecrementLineWidth, height);
        self._partRects[CPScrollerKnob] = CGRectMake(knobLocation, knobInset.top, knobWidth, knobHeight);
        self._partRects[CPScrollerIncrementPage] = CGRectMake(knobLocation + knobWidth, 0.0, width - (knobLocation + knobWidth) - effectiveIncrementLineWidth, height);
        self._partRects[CPScrollerKnobSlot] = CGRectMake(effectiveDecrementLineWidth, trackInset.top, slotSize, height - trackInset.top - trackInset.bottom);
        self._partRects[CPScrollerDecrementLine] = CGRectMake(0.0, 0.0, decrementLineSize.width, decrementLineSize.height);
        self._partRects[CPScrollerIncrementLine] = CGRectMake(width - incrementLineSize.width, 0.0, incrementLineSize.width, incrementLineSize.height);
        if (width < knobWidth + decrementLineSize.width + incrementLineSize.width + trackInset.left + trackInset.right)
            self._partRects[CPScrollerKnob] = CGRectMakeZero();
        if (width < decrementLineSize.width + incrementLineSize.width - 2)
        {
            self._partRects[CPScrollerIncrementLine] = CGRectMakeZero();
            self._partRects[CPScrollerDecrementLine] = CGRectMakeZero();
            self._partRects[CPScrollerKnobSlot] = CGRectMake(0.0, 0.0, width, slotSize);
        }
    }
}
,["void"]), new objj_method(sel_getUid("usableParts"), function $CPScroller__usableParts(self, _cmd)
{
    return self._usableParts;
}
,["CPUsableScrollerParts"]), new objj_method(sel_getUid("fadeIn"), function $CPScroller__fadeIn(self, _cmd)
{
    if (self._isMouseOver && self._knobProportion != 1.0)
        objj_msgSend(self, "setThemeState:", CPThemeStateSelected);
    if (self._timerFadeOut)
        objj_msgSend(self._timerFadeOut, "invalidate");
    objj_msgSend(self, "setAlphaValue:", 1.0);
}
,["void"]), new objj_method(sel_getUid("fadeOut"), function $CPScroller__fadeOut(self, _cmd)
{
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateScrollViewLegacy))
        return;
    objj_msgSend(self._animationScroller, "startAnimation");
}
,["void"]), new objj_method(sel_getUid("drawArrow:highlight:"), function $CPScroller__drawArrow_highlight_(self, _cmd, anArrow, shouldHighlight)
{
}
,["void","CPScrollerArrow","BOOL"]), new objj_method(sel_getUid("drawKnob"), function $CPScroller__drawKnob(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("drawKnobSlot"), function $CPScroller__drawKnobSlot(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("createViewForPart:"), function $CPScroller__createViewForPart_(self, _cmd, aPart)
{
    var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(view, "setHitTests:", NO);
    return view;
}
,["CPView","CPScrollerPart"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPScroller__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    return self._partRects[aName];
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPScroller__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(view, "setHitTests:", NO);
    return view;
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPScroller__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "_adjustScrollerSize");
    objj_msgSend(self, "checkSpaceForParts");
    var index = 0,
        count = PARTS_ARRANGEMENT.length,
        view;
    for (; index < count; ++index)
    {
        var part = PARTS_ARRANGEMENT[index];
        if (index === 0)
            view = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", part, CPWindowBelow, PARTS_ARRANGEMENT[index + 1]);
        else
            view = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", part, CPWindowAbove, PARTS_ARRANGEMENT[index - 1]);
        if (view)
            objj_msgSend(view, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", NAMES_FOR_PARTS[part] + "-color"));
    }
}
,["void"]), new objj_method(sel_getUid("drawParts"), function $CPScroller__drawParts(self, _cmd)
{
    objj_msgSend(self, "drawKnobSlot");
    objj_msgSend(self, "drawKnob");
    objj_msgSend(self, "drawArrow:highlight:", CPScrollerDecrementArrow, NO);
    objj_msgSend(self, "drawArrow:highlight:", CPScrollerIncrementArrow, NO);
}
,["void"]), new objj_method(sel_getUid("hitPart"), function $CPScroller__hitPart(self, _cmd)
{
    return self._hitPart;
}
,["CPScrollerPart"]), new objj_method(sel_getUid("trackKnob:"), function $CPScroller__trackKnob_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type === CPLeftMouseUp)
    {
        self._hitPart = CPScrollerNoPart;
        return;
    }
    if (type === CPLeftMouseDown)
    {
        self._trackingFloatValue = objj_msgSend(self, "floatValue");
        self._trackingStartPoint = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    }
    else if (type === CPLeftMouseDragged)
    {
        var knobRect = objj_msgSend(self, "rectForPart:", CPScrollerKnob),
            knobSlotRect = objj_msgSend(self, "rectForPart:", CPScrollerKnobSlot),
            remainder = !objj_msgSend(self, "isVertical") ? CGRectGetWidth(knobSlotRect) - CGRectGetWidth(knobRect) : CGRectGetHeight(knobSlotRect) - CGRectGetHeight(knobRect);
        if (remainder <= 0)
            objj_msgSend(self, "setFloatValue:", 0.0);
        else
        {
            var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
                delta = !objj_msgSend(self, "isVertical") ? location.x - self._trackingStartPoint.x : location.y - self._trackingStartPoint.y;
            objj_msgSend(self, "setFloatValue:", self._trackingFloatValue + delta / remainder);
        }
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackKnob:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
    if (type === CPLeftMouseDragged)
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["void","CPEvent"]), new objj_method(sel_getUid("trackScrollButtons:"), function $CPScroller__trackScrollButtons_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type === CPLeftMouseUp)
    {
        objj_msgSend(self, "highlight:", NO);
        objj_msgSend(CPEvent, "stopPeriodicEvents");
        self._hitPart = CPScrollerNoPart;
        return;
    }
    if (type === CPLeftMouseDown)
    {
        self._trackingPart = objj_msgSend(self, "hitPart");
        self._trackingStartPoint = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
        if (objj_msgSend(anEvent, "modifierFlags") & CPAlternateKeyMask)
        {
            if (self._trackingPart === CPScrollerDecrementLine)
                self._hitPart = CPScrollerDecrementPage;
            else if (self._trackingPart === CPScrollerIncrementLine)
                self._hitPart = CPScrollerIncrementPage;
            else if (self._trackingPart === CPScrollerDecrementPage || self._trackingPart === CPScrollerIncrementPage)
            {
                var knobRect = objj_msgSend(self, "rectForPart:", CPScrollerKnob),
                    knobWidth = !objj_msgSend(self, "isVertical") ? CGRectGetWidth(knobRect) : CGRectGetHeight(knobRect),
                    knobSlotRect = objj_msgSend(self, "rectForPart:", CPScrollerKnobSlot),
                    remainder = (!objj_msgSend(self, "isVertical") ? CGRectGetWidth(knobSlotRect) : CGRectGetHeight(knobSlotRect)) - knobWidth;
                objj_msgSend(self, "setFloatValue:", ((!objj_msgSend(self, "isVertical") ? self._trackingStartPoint.x - CGRectGetMinX(knobSlotRect) : self._trackingStartPoint.y - CGRectGetMinY(knobSlotRect)) - knobWidth / 2.0) / remainder);
                self._hitPart = CPScrollerKnob;
                objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
                return objj_msgSend(self, "trackKnob:", anEvent);
            }
        }
        objj_msgSend(self, "highlight:", YES);
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
        objj_msgSend(CPEvent, "startPeriodicEventsAfterDelay:withPeriod:", 0.5, 0.04);
    }
    else if (type === CPLeftMouseDragged)
    {
        self._trackingStartPoint = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
        if (self._trackingPart === CPScrollerDecrementPage || self._trackingPart === CPScrollerIncrementPage)
        {
            var hitPart = objj_msgSend(self, "testPart:", objj_msgSend(anEvent, "locationInWindow"));
            if (hitPart === CPScrollerDecrementPage || hitPart === CPScrollerIncrementPage)
            {
                self._trackingPart = hitPart;
                self._hitPart = hitPart;
            }
        }
        objj_msgSend(self, "highlight:", CGRectContainsPoint(objj_msgSend(self, "rectForPart:", self._trackingPart), self._trackingStartPoint));
    }
    else if (type == CPPeriodic && CGRectContainsPoint(objj_msgSend(self, "rectForPart:", self._trackingPart), self._trackingStartPoint))
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackScrollButtons:"), CPPeriodicMask | CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_setIsVertical:"), function $CPScroller___setIsVertical_(self, _cmd, isVertical)
{
    self._isVertical = isVertical;
    if (self._isVertical)
        objj_msgSend(self, "setThemeState:", CPThemeStateVertical);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateVertical);
}
,["void","BOOL"]), new objj_method(sel_getUid("setFrameSize:"), function $CPScroller__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "checkSpaceForParts");
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CGSize"]), new objj_method(sel_getUid("currentValueForThemeAttribute:"), function $CPScroller__currentValueForThemeAttribute_(self, _cmd, anAttributeName)
{
    var themeState = self._themeState;
    if (NAMES_FOR_PARTS[self._hitPart] + "-color" !== anAttributeName)
        themeState &= ~CPThemeStateHighlighted;
    return objj_msgSend(self, "valueForThemeAttribute:inState:", anAttributeName, themeState);
}
,["id","CPString"]), new objj_method(sel_getUid("mouseDown:"), function $CPScroller__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    self._hitPart = objj_msgSend(self, "testPart:", objj_msgSend(anEvent, "locationInWindow"));
    switch(self._hitPart) {
    case CPScrollerKnob:
        return objj_msgSend(self, "trackKnob:", anEvent);
    case CPScrollerDecrementLine:
    case CPScrollerIncrementLine:
    case CPScrollerDecrementPage:
    case CPScrollerIncrementPage:
        return objj_msgSend(self, "trackScrollButtons:", anEvent);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseEntered:"), function $CPScroller__mouseEntered_(self, _cmd, anEvent)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "mouseEntered:", anEvent);
    if (self._timerFadeOut)
        objj_msgSend(self._timerFadeOut, "invalidate");
    if (!objj_msgSend(self, "isEnabled"))
        return;
    self._allowFadingOut = NO;
    self._isMouseOver = YES;
    if (objj_msgSend(self, "alphaValue") > 0 && self._knobProportion != 1.0)
        objj_msgSend(self, "setThemeState:", CPThemeStateSelected);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPScroller__mouseExited_(self, _cmd, anEvent)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "mouseExited:", anEvent);
    if (objj_msgSend(self, "isHidden") || !objj_msgSend(self, "isEnabled") || !self._isMouseOver)
        return;
    self._allowFadingOut = YES;
    self._isMouseOver = NO;
    if (self._timerFadeOut)
        objj_msgSend(self._timerFadeOut, "invalidate");
    self._timerFadeOut = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 1.2, self, sel_getUid("_performFadeOut:"), nil, NO);
}
,["void","CPEvent"]), new objj_method(sel_getUid("animationDidEnd:"), function $CPScroller__animationDidEnd_(self, _cmd, animation)
{
    objj_msgSend(self, "unsetThemeState:", CPThemeStateSelected);
}
,["void","CPAnimation"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPScroller__defaultThemeClass(self, _cmd)
{
    return "scroller";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPScroller__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", 7.0, "scroller-width", objj_msgSend(CPNull, "null"), "knob-slot-color", objj_msgSend(CPNull, "null"), "decrement-line-color", objj_msgSend(CPNull, "null"), "increment-line-color", objj_msgSend(CPNull, "null"), "knob-color", CGSizeMakeZero(), "decrement-line-size", CGSizeMakeZero(), "increment-line-size", CGInsetMakeZero(), "track-inset", CGInsetMakeZero(), "knob-inset", 21.0, "minimum-knob-length", 9.0, "track-border-overlay");
}
,["id"]), new objj_method(sel_getUid("scrollerWidth"), function $CPScroller__scrollerWidth(self, _cmd)
{
    return objj_msgSend(self, "scrollerWidthInStyle:", CPScrollerStyleLegacy);
}
,["float"]), new objj_method(sel_getUid("scrollerWidthInStyle:"), function $CPScroller__scrollerWidthInStyle_(self, _cmd, aStyle)
{
    if (!_CACHED_THEME_SCROLLER)
        _CACHED_THEME_SCROLLER = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    if (aStyle == CPScrollerStyleLegacy)
        return objj_msgSend(_CACHED_THEME_SCROLLER, "valueForThemeAttribute:inState:", "scroller-width", CPThemeStateScrollViewLegacy);
    return objj_msgSend(_CACHED_THEME_SCROLLER, "currentValueForThemeAttribute:", "scroller-width");
}
,["float","int"]), new objj_method(sel_getUid("scrollerOverlay"), function $CPScroller__scrollerOverlay(self, _cmd)
{
    if (!_CACHED_THEME_SCROLLER)
        _CACHED_THEME_SCROLLER = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    return objj_msgSend(_CACHED_THEME_SCROLLER, "currentValueForThemeAttribute:", "track-border-overlay");
}
,["float"]), new objj_method(sel_getUid("scrollerWidthForControlSize:"), function $CPScroller__scrollerWidthForControlSize_(self, _cmd, aControlSize)
{
    return objj_msgSend(self, "scrollerWidth");
}
,["float","CPControlSize"])]);
}var CPScrollerControlSizeKey = "CPScrollerControlSize",
    CPScrollerIsVerticalKey = "CPScrollerIsVerticalKey",
    CPScrollerKnobProportionKey = "CPScrollerKnobProportion",
    CPScrollerStyleKey = "CPScrollerStyleKey";
{
var the_class = objj_getClass("CPScroller")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPScroller__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "initWithCoder:", aCoder))
    {
        self._controlSize = CPRegularControlSize;
        if (objj_msgSend(aCoder, "containsValueForKey:", CPScrollerControlSizeKey))
            self._controlSize = objj_msgSend(aCoder, "decodeIntForKey:", CPScrollerControlSizeKey);
        self._knobProportion = 1.0;
        if (objj_msgSend(aCoder, "containsValueForKey:", CPScrollerKnobProportionKey))
            self._knobProportion = objj_msgSend(aCoder, "decodeFloatForKey:", CPScrollerKnobProportionKey);
        self._partRects = [];
        self._hitPart = CPScrollerNoPart;
        self._allowFadingOut = YES;
        self._isMouseOver = NO;
        var paramAnimFadeOut = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self, CPViewAnimationTargetKey, CPViewAnimationFadeOutEffect, CPViewAnimationEffectKey);
        self._animationScroller = objj_msgSend(objj_msgSend(CPViewAnimation, "alloc"), "initWithDuration:animationCurve:", 0.2, CPAnimationEaseInOut);
        objj_msgSend(self._animationScroller, "setViewAnimations:", [paramAnimFadeOut]);
        objj_msgSend(self._animationScroller, "setDelegate:", self);
        objj_msgSend(self, "setAlphaValue:", 0.0);
        objj_msgSend(self, "setStyle:", objj_msgSend(aCoder, "decodeIntForKey:", CPScrollerStyleKey));
        objj_msgSend(self, "_setIsVertical:", objj_msgSend(aCoder, "decodeBoolForKey:", CPScrollerIsVerticalKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPScroller__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScroller").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._controlSize, CPScrollerControlSizeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._isVertical, CPScrollerIsVerticalKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._knobProportion, CPScrollerKnobProportionKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._style, CPScrollerStyleKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPScroller")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPScroller\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setFloatValue:knobProportion:"), function $CPScroller__setFloatValue_knobProportion_(self, _cmd, aValue, aProportion)
{
    objj_msgSend(self, "setFloatValue:", aValue);
    objj_msgSend(self, "setKnobProportion:", aProportion);
}
,["void","float","float"])]);
}p;14;CPScrollView.jt;51997;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.ji;7;CPBox.ji;12;CPClipView.ji;12;CPScroller.ji;8;CPView.jt;51882;objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("CPBox.j", YES);objj_executeFile("CPClipView.j", YES);objj_executeFile("CPScroller.j", YES);objj_executeFile("CPView.j", YES);var _isBrowserUsingOverlayScrollers = function()
{
    var outer = document.createElement('div'),
        inner = document.createElement('p');
    outer.style.position = "absolute";
    outer.style.top = "0px";
    outer.style.left = "0px";
    outer.style.visibility = "hidden";
    outer.style.width = "200px";
    outer.style.height = "150px";
    outer.style.overflow = "scroll";
    inner.style.width = "100%";
    inner.style.height = "200px";
    outer.appendChild(inner);
    document.body.appendChild(outer);
    var usingOverlayScrollers = outer.clientWidth === outer.offsetWidth;
    document.body.removeChild(outer);
    return usingOverlayScrollers;
};
var TIMER_INTERVAL = 0.2,
    CPScrollViewDelegate_scrollViewWillScroll_ = 1 << 0,
    CPScrollViewDelegate_scrollViewDidScroll_ = 1 << 1,
    CPScrollViewFadeOutTime = 1.3;
var CPScrollerStyleGlobal = CPScrollerStyleOverlay,
    CPScrollerStyleGlobalChangeNotification = "CPScrollerStyleGlobalChangeNotification";
{var the_class = objj_allocateClassPair(CPView, "CPScrollView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentView"), new objj_ivar("_headerClipView"), new objj_ivar("_cornerView"), new objj_ivar("_bottomCornerView"), new objj_ivar("_delegate"), new objj_ivar("_scrollTimer"), new objj_ivar("_hasVerticalScroller"), new objj_ivar("_hasHorizontalScroller"), new objj_ivar("_autohidesScrollers"), new objj_ivar("_verticalScroller"), new objj_ivar("_horizontalScroller"), new objj_ivar("_recursionCount"), new objj_ivar("_implementedDelegateMethods"), new objj_ivar("_verticalLineScroll"), new objj_ivar("_verticalPageScroll"), new objj_ivar("_horizontalLineScroll"), new objj_ivar("_horizontalPageScroll"), new objj_ivar("_borderType"), new objj_ivar("_timerScrollersHide"), new objj_ivar("_scrollerStyle"), new objj_ivar("_scrollerKnobStyle")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPScrollView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScrollView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._verticalLineScroll = 10.0;
        self._verticalPageScroll = 10.0;
        self._horizontalLineScroll = 10.0;
        self._horizontalPageScroll = 10.0;
        self._borderType = CPNoBorder;
        self._contentView = objj_msgSend(objj_msgSend(CPClipView, "alloc"), "initWithFrame:", objj_msgSend(self, "_insetBounds"));
        objj_msgSend(self, "addSubview:", self._contentView);
        self._headerClipView = objj_msgSend(objj_msgSend(CPClipView, "alloc"), "init");
        objj_msgSend(self, "addSubview:", self._headerClipView);
        self._bottomCornerView = objj_msgSend(objj_msgSend(CPView, "alloc"), "init");
        objj_msgSend(self, "addSubview:", self._bottomCornerView);
        objj_msgSend(self, "setHasVerticalScroller:", YES);
        objj_msgSend(self, "setHasHorizontalScroller:", YES);
        self._scrollerKnobStyle = CPScrollerKnobStyleDefault;
        objj_msgSend(self, "setScrollerStyle:", CPScrollerStyleGlobal);
        self._delegate = nil;
        self._scrollTimer = nil;
        self._implementedDelegateMethods = 0;
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_didReceiveDefaultStyleChange:"), CPScrollerStyleGlobalChangeNotification, nil);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("delegate"), function $CPScrollView__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPScrollView__setDelegate_(self, _cmd, aDelegate)
{
    if (aDelegate === self._delegate)
        return;
    self._delegate = aDelegate;
    self._implementedDelegateMethods = 0;
    if (self._delegate === nil)
        return;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("scrollViewWillScroll:")))
        self._implementedDelegateMethods |= CPScrollViewDelegate_scrollViewWillScroll_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("scrollViewDidScroll:")))
        self._implementedDelegateMethods |= CPScrollViewDelegate_scrollViewDidScroll_;
}
,["void","id"]), new objj_method(sel_getUid("scrollerStyle"), function $CPScrollView__scrollerStyle(self, _cmd)
{
    return self._scrollerStyle;
}
,["int"]), new objj_method(sel_getUid("setScrollerStyle:"), function $CPScrollView__setScrollerStyle_(self, _cmd, aStyle)
{
    if (self._scrollerStyle === aStyle)
        return;
    self._scrollerStyle = aStyle;
    objj_msgSend(self, "_updateScrollerStyle");
}
,["void","int"]), new objj_method(sel_getUid("scrollerKnobStyle"), function $CPScrollView__scrollerKnobStyle(self, _cmd)
{
    return self._scrollerKnobStyle;
}
,["int"]), new objj_method(sel_getUid("setScrollerKnobStyle:"), function $CPScrollView__setScrollerKnobStyle_(self, _cmd, newScrollerKnobStyle)
{
    if (self._scrollerKnobStyle === newScrollerKnobStyle)
        return;
    self._scrollerKnobStyle = newScrollerKnobStyle;
    objj_msgSend(self, "_updateScrollerStyle");
}
,["void","int"]), new objj_method(sel_getUid("contentView"), function $CPScrollView__contentView(self, _cmd)
{
    return self._contentView;
}
,["CPClipView"]), new objj_method(sel_getUid("setContentView:"), function $CPScrollView__setContentView_(self, _cmd, aContentView)
{
    if (self._contentView === aContentView || !aContentView)
        return;
    var documentView = objj_msgSend(aContentView, "documentView");
    if (documentView)
        objj_msgSend(documentView, "removeFromSuperview");
    objj_msgSend(self._contentView, "removeFromSuperview");
    self._contentView = aContentView;
    objj_msgSend(self._contentView, "setDocumentView:", documentView);
    objj_msgSend(self, "addSubview:", self._contentView);
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","CPClipView"]), new objj_method(sel_getUid("contentSize"), function $CPScrollView__contentSize(self, _cmd)
{
    return objj_msgSend(self._contentView, "frame").size;
}
,["CGSize"]), new objj_method(sel_getUid("documentView"), function $CPScrollView__documentView(self, _cmd)
{
    return objj_msgSend(self._contentView, "documentView");
}
,["id"]), new objj_method(sel_getUid("setDocumentView:"), function $CPScrollView__setDocumentView_(self, _cmd, aView)
{
    objj_msgSend(self._contentView, "setDocumentView:", aView);
    objj_msgSend(self, "_updateCornerAndHeaderView");
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","CPView"]), new objj_method(sel_getUid("borderType"), function $CPScrollView__borderType(self, _cmd)
{
    return self._borderType;
}
,["CPBorderType"]), new objj_method(sel_getUid("setBorderType:"), function $CPScrollView__setBorderType_(self, _cmd, borderType)
{
    if (self._borderType == borderType)
        return;
    self._borderType = borderType;
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPBorderType"]), new objj_method(sel_getUid("horizontalScroller"), function $CPScrollView__horizontalScroller(self, _cmd)
{
    return self._horizontalScroller;
}
,["CPScroller"]), new objj_method(sel_getUid("setHorizontalScroller:"), function $CPScrollView__setHorizontalScroller_(self, _cmd, aScroller)
{
    if (self._horizontalScroller === aScroller)
        return;
    objj_msgSend(self._horizontalScroller, "removeFromSuperview");
    objj_msgSend(self._horizontalScroller, "setTarget:", nil);
    objj_msgSend(self._horizontalScroller, "setAction:", nil);
    self._horizontalScroller = aScroller;
    objj_msgSend(self._horizontalScroller, "setTarget:", self);
    objj_msgSend(self._horizontalScroller, "setAction:", sel_getUid("_horizontalScrollerDidScroll:"));
    objj_msgSend(self, "addSubview:", self._horizontalScroller);
    objj_msgSend(self, "_updateScrollerStyle");
}
,["void","CPScroller"]), new objj_method(sel_getUid("hasHorizontalScroller"), function $CPScrollView__hasHorizontalScroller(self, _cmd)
{
    return self._hasHorizontalScroller;
}
,["BOOL"]), new objj_method(sel_getUid("setHasHorizontalScroller:"), function $CPScrollView__setHasHorizontalScroller_(self, _cmd, shouldHaveHorizontalScroller)
{
    if (self._hasHorizontalScroller === shouldHaveHorizontalScroller)
        return;
    self._hasHorizontalScroller = shouldHaveHorizontalScroller;
    if (self._hasHorizontalScroller && !self._horizontalScroller)
    {
        var bounds = objj_msgSend(self, "_insetBounds");
        objj_msgSend(self, "setHorizontalScroller:", objj_msgSend(objj_msgSend(CPScroller, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, MAX(CGRectGetWidth(bounds), objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle) + 1), objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle))));
        objj_msgSend(objj_msgSend(self, "horizontalScroller"), "setFrameSize:", CGSizeMake(CGRectGetWidth(bounds), objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle)));
    }
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","BOOL"]), new objj_method(sel_getUid("verticalScroller"), function $CPScrollView__verticalScroller(self, _cmd)
{
    return self._verticalScroller;
}
,["CPScroller"]), new objj_method(sel_getUid("setVerticalScroller:"), function $CPScrollView__setVerticalScroller_(self, _cmd, aScroller)
{
    if (self._verticalScroller === aScroller)
        return;
    objj_msgSend(self._verticalScroller, "removeFromSuperview");
    objj_msgSend(self._verticalScroller, "setTarget:", nil);
    objj_msgSend(self._verticalScroller, "setAction:", nil);
    self._verticalScroller = aScroller;
    objj_msgSend(self._verticalScroller, "setTarget:", self);
    objj_msgSend(self._verticalScroller, "setAction:", sel_getUid("_verticalScrollerDidScroll:"));
    objj_msgSend(self, "addSubview:", self._verticalScroller);
    objj_msgSend(self, "_updateScrollerStyle");
}
,["void","CPScroller"]), new objj_method(sel_getUid("hasVerticalScroller"), function $CPScrollView__hasVerticalScroller(self, _cmd)
{
    return self._hasVerticalScroller;
}
,["BOOL"]), new objj_method(sel_getUid("setHasVerticalScroller:"), function $CPScrollView__setHasVerticalScroller_(self, _cmd, shouldHaveVerticalScroller)
{
    if (self._hasVerticalScroller === shouldHaveVerticalScroller)
        return;
    self._hasVerticalScroller = shouldHaveVerticalScroller;
    if (self._hasVerticalScroller && !self._verticalScroller)
    {
        var bounds = objj_msgSend(self, "_insetBounds");
        objj_msgSend(self, "setVerticalScroller:", objj_msgSend(objj_msgSend(CPScroller, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle), MAX(CGRectGetHeight(bounds), objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle) + 1))));
        objj_msgSend(objj_msgSend(self, "verticalScroller"), "setFrameSize:", CGSizeMake(objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle), CGRectGetHeight(bounds)));
    }
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","BOOL"]), new objj_method(sel_getUid("autohidesScrollers"), function $CPScrollView__autohidesScrollers(self, _cmd)
{
    return self._autohidesScrollers;
}
,["BOOL"]), new objj_method(sel_getUid("setAutohidesScrollers:"), function $CPScrollView__setAutohidesScrollers_(self, _cmd, autohidesScrollers)
{
    if (self._autohidesScrollers == autohidesScrollers)
        return;
    self._autohidesScrollers = autohidesScrollers;
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","BOOL"]), new objj_method(sel_getUid("bottomCornerView"), function $CPScrollView__bottomCornerView(self, _cmd)
{
    return self._bottomCornerView;
}
,["CPView"]), new objj_method(sel_getUid("setBottomCornerView:"), function $CPScrollView__setBottomCornerView_(self, _cmd, aBottomCornerView)
{
    if (self._bottomCornerView === aBottomCornerView)
        return;
    objj_msgSend(self._bottomCornerView, "removeFromSuperview");
    objj_msgSend(aBottomCornerView, "setFrame:", objj_msgSend(self, "_bottomCornerViewFrame"));
    objj_msgSend(self, "addSubview:", aBottomCornerView);
    self._bottomCornerView = aBottomCornerView;
    objj_msgSend(self, "_updateCornerAndHeaderView");
}
,["void","CPView"]), new objj_method(sel_getUid("lineScroll"), function $CPScrollView__lineScroll(self, _cmd)
{
    return objj_msgSend(self, "horizontalLineScroll");
}
,["float"]), new objj_method(sel_getUid("setLineScroll:"), function $CPScrollView__setLineScroll_(self, _cmd, aLineScroll)
{
    objj_msgSend(self, "setHorizontalLineScroll:", aLineScroll);
    objj_msgSend(self, "setVerticalLineScroll:", aLineScroll);
}
,["void","float"]), new objj_method(sel_getUid("horizontalLineScroll"), function $CPScrollView__horizontalLineScroll(self, _cmd)
{
    return self._horizontalLineScroll;
}
,["float"]), new objj_method(sel_getUid("setHorizontalLineScroll:"), function $CPScrollView__setHorizontalLineScroll_(self, _cmd, aLineScroll)
{
    self._horizontalLineScroll = aLineScroll;
}
,["void","float"]), new objj_method(sel_getUid("verticalLineScroll"), function $CPScrollView__verticalLineScroll(self, _cmd)
{
    return self._verticalLineScroll;
}
,["float"]), new objj_method(sel_getUid("setVerticalLineScroll:"), function $CPScrollView__setVerticalLineScroll_(self, _cmd, aLineScroll)
{
    self._verticalLineScroll = aLineScroll;
}
,["void","float"]), new objj_method(sel_getUid("pageScroll"), function $CPScrollView__pageScroll(self, _cmd)
{
    return objj_msgSend(self, "horizontalPageScroll");
}
,["float"]), new objj_method(sel_getUid("setPageScroll:"), function $CPScrollView__setPageScroll_(self, _cmd, aPageScroll)
{
    objj_msgSend(self, "setHorizontalPageScroll:", aPageScroll);
    objj_msgSend(self, "setVerticalPageScroll:", aPageScroll);
}
,["void","float"]), new objj_method(sel_getUid("horizontalPageScroll"), function $CPScrollView__horizontalPageScroll(self, _cmd)
{
    return self._horizontalPageScroll;
}
,["float"]), new objj_method(sel_getUid("setHorizontalPageScroll:"), function $CPScrollView__setHorizontalPageScroll_(self, _cmd, aPageScroll)
{
    self._horizontalPageScroll = aPageScroll;
}
,["void","float"]), new objj_method(sel_getUid("verticalPageScroll"), function $CPScrollView__verticalPageScroll(self, _cmd)
{
    return self._verticalPageScroll;
}
,["float"]), new objj_method(sel_getUid("setVerticalPageScroll:"), function $CPScrollView__setVerticalPageScroll_(self, _cmd, aPageScroll)
{
    self._verticalPageScroll = aPageScroll;
}
,["void","float"]), new objj_method(sel_getUid("_updateScrollerStyle"), function $CPScrollView___updateScrollerStyle(self, _cmd)
{
    if (self._hasHorizontalScroller)
    {
        objj_msgSend(self._horizontalScroller, "setStyle:", self._scrollerStyle);
        objj_msgSend(self._horizontalScroller, "unsetThemeState:", CPThemeStateSelected);
        switch(self._scrollerKnobStyle) {
        case CPScrollerKnobStyleLight:
            objj_msgSend(self._horizontalScroller, "unsetThemeState:", CPThemeStateScrollerKnobDark);
            objj_msgSend(self._horizontalScroller, "setThemeState:", CPThemeStateScrollerKnobLight);
            break;
        case CPScrollerKnobStyleDark:
            objj_msgSend(self._horizontalScroller, "unsetThemeState:", CPThemeStateScrollerKnobLight);
            objj_msgSend(self._horizontalScroller, "setThemeState:", CPThemeStateScrollerKnobDark);
            break;
default:
            objj_msgSend(self._horizontalScroller, "unsetThemeState:", CPThemeStateScrollerKnobLight);
            objj_msgSend(self._horizontalScroller, "unsetThemeState:", CPThemeStateScrollerKnobDark);
        }
    }
    if (self._hasVerticalScroller)
    {
        objj_msgSend(self._verticalScroller, "setStyle:", self._scrollerStyle);
        objj_msgSend(self._verticalScroller, "unsetThemeState:", CPThemeStateSelected);
        switch(self._scrollerKnobStyle) {
        case CPScrollerKnobStyleLight:
            objj_msgSend(self._verticalScroller, "unsetThemeState:", CPThemeStateScrollerKnobDark);
            objj_msgSend(self._verticalScroller, "setThemeState:", CPThemeStateScrollerKnobLight);
            break;
        case CPScrollerKnobStyleDark:
            objj_msgSend(self._verticalScroller, "unsetThemeState:", CPThemeStateScrollerKnobLight);
            objj_msgSend(self._verticalScroller, "setThemeState:", CPThemeStateScrollerKnobDark);
            break;
default:
            objj_msgSend(self._verticalScroller, "unsetThemeState:", CPThemeStateScrollerKnobLight);
            objj_msgSend(self._verticalScroller, "unsetThemeState:", CPThemeStateScrollerKnobDark);
        }
    }
    if (self._scrollerStyle == CPScrollerStyleOverlay)
    {
        if (self._timerScrollersHide)
            objj_msgSend(self._timerScrollersHide, "invalidate");
        self._timerScrollersHide = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", CPScrollViewFadeOutTime, self, sel_getUid("_hideScrollers:"), nil, NO);
        objj_msgSend(objj_msgSend(self, "bottomCornerView"), "setHidden:", YES);
    }
    else
        objj_msgSend(objj_msgSend(self, "bottomCornerView"), "setHidden:", NO);
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void"]), new objj_method(sel_getUid("_insetBounds"), function $CPScrollView___insetBounds(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "class"), "_insetBounds:borderType:", objj_msgSend(self, "bounds"), self._borderType);
}
,["CGRect"]), new objj_method(sel_getUid("_updateCornerAndHeaderView"), function $CPScrollView___updateCornerAndHeaderView(self, _cmd)
{
    var documentView = objj_msgSend(self, "documentView"),
        currentHeaderView = objj_msgSend(self, "_headerView"),
        documentHeaderView = objj_msgSend(documentView, "respondsToSelector:", sel_getUid("headerView")) ? objj_msgSend(documentView, "headerView") : nil;
    if (currentHeaderView !== documentHeaderView)
    {
        objj_msgSend(currentHeaderView, "removeFromSuperview");
        objj_msgSend(self._headerClipView, "setDocumentView:", documentHeaderView);
    }
    var documentCornerView = objj_msgSend(documentView, "respondsToSelector:", sel_getUid("cornerView")) ? objj_msgSend(documentView, "cornerView") : nil;
    if (self._cornerView !== documentCornerView)
    {
        objj_msgSend(self._cornerView, "removeFromSuperview");
        self._cornerView = documentCornerView;
        if (self._cornerView)
        {
            objj_msgSend(self._cornerView, "setHidden:", !(self._scrollerStyle === CPScrollerStyleLegacy && self._verticalScroller && !objj_msgSend(self._verticalScroller, "isHidden")));
            objj_msgSend(self, "addSubview:", self._cornerView);
        }
    }
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
    objj_msgSend(documentHeaderView, "setNeedsLayout");
    objj_msgSend(documentHeaderView, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("_headerView"), function $CPScrollView___headerView(self, _cmd)
{
    return objj_msgSend(self._headerClipView, "documentView");
}
,["CPView"]), new objj_method(sel_getUid("_cornerViewFrame"), function $CPScrollView___cornerViewFrame(self, _cmd)
{
    if (!self._cornerView)
        return CGRectMakeZero();
    var bounds = objj_msgSend(self, "_insetBounds"),
        frame = objj_msgSend(self._cornerView, "frame");
    frame.origin.x = CGRectGetMaxX(bounds) - CGRectGetWidth(frame);
    frame.origin.y = CGRectGetMinY(bounds);
    return frame;
}
,["CGRect"]), new objj_method(sel_getUid("_headerClipViewFrame"), function $CPScrollView___headerClipViewFrame(self, _cmd)
{
    var headerView = objj_msgSend(self, "_headerView");
    if (!headerView)
        return CGRectMakeZero();
    var frame = objj_msgSend(self, "_insetBounds");
    frame.size.height = CGRectGetHeight(objj_msgSend(headerView, "frame"));
    if (self._scrollerStyle === CPScrollerStyleLegacy && self._verticalScroller && !objj_msgSend(self._verticalScroller, "isHidden"))
        frame.size.width -= CGRectGetWidth(objj_msgSend(self, "_cornerViewFrame"));
    return frame;
}
,["CGRect"]), new objj_method(sel_getUid("_bottomCornerViewFrame"), function $CPScrollView___bottomCornerViewFrame(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "horizontalScroller"), "isHidden") || objj_msgSend(objj_msgSend(self, "verticalScroller"), "isHidden"))
        return CGRectMakeZero();
    var verticalFrame = objj_msgSend(objj_msgSend(self, "verticalScroller"), "frame"),
        bottomCornerFrame = CGRectMakeZero();
    bottomCornerFrame.origin.x = CGRectGetMinX(verticalFrame);
    bottomCornerFrame.origin.y = CGRectGetMaxY(verticalFrame);
    bottomCornerFrame.size.width = objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle);
    bottomCornerFrame.size.height = objj_msgSend(CPScroller, "scrollerWidthInStyle:", self._scrollerStyle);
    return bottomCornerFrame;
}
,["CGRect"]), new objj_method(sel_getUid("_verticalScrollerDidScroll:"), function $CPScrollView___verticalScrollerDidScroll_(self, _cmd, aScroller)
{
    var value = objj_msgSend(aScroller, "floatValue"),
        documentFrame = objj_msgSend(objj_msgSend(self._contentView, "documentView"), "frame"),
        contentBounds = objj_msgSend(self._contentView, "bounds");
    switch(objj_msgSend(self._verticalScroller, "hitPart")) {
    case CPScrollerDecrementLine:
        contentBounds.origin.y -= self._verticalLineScroll;
        break;
    case CPScrollerIncrementLine:
        contentBounds.origin.y += self._verticalLineScroll;
        break;
    case CPScrollerDecrementPage:
        contentBounds.origin.y -= CGRectGetHeight(contentBounds) - self._verticalPageScroll;
        break;
    case CPScrollerIncrementPage:
        contentBounds.origin.y += CGRectGetHeight(contentBounds) - self._verticalPageScroll;
        break;
    case CPScrollerKnobSlot:
    case CPScrollerKnob:
default:
        contentBounds.origin.y = ROUND(value * (CGRectGetHeight(documentFrame) - CGRectGetHeight(contentBounds)));
    }
    objj_msgSend(self, "_sendDelegateMessages");
    objj_msgSend(self._contentView, "scrollToPoint:", contentBounds.origin);
}
,["void","CPScroller"]), new objj_method(sel_getUid("_horizontalScrollerDidScroll:"), function $CPScrollView___horizontalScrollerDidScroll_(self, _cmd, aScroller)
{
    var value = objj_msgSend(aScroller, "floatValue"),
        documentFrame = objj_msgSend(objj_msgSend(self, "documentView"), "frame"),
        contentBounds = objj_msgSend(self._contentView, "bounds");
    switch(objj_msgSend(self._horizontalScroller, "hitPart")) {
    case CPScrollerDecrementLine:
        contentBounds.origin.x -= self._horizontalLineScroll;
        break;
    case CPScrollerIncrementLine:
        contentBounds.origin.x += self._horizontalLineScroll;
        break;
    case CPScrollerDecrementPage:
        contentBounds.origin.x -= CGRectGetWidth(contentBounds) - self._horizontalPageScroll;
        break;
    case CPScrollerIncrementPage:
        contentBounds.origin.x += CGRectGetWidth(contentBounds) - self._horizontalPageScroll;
        break;
    case CPScrollerKnobSlot:
    case CPScrollerKnob:
default:
        contentBounds.origin.x = ROUND(value * (CGRectGetWidth(documentFrame) - CGRectGetWidth(contentBounds)));
    }
    objj_msgSend(self, "_sendDelegateMessages");
    objj_msgSend(self._contentView, "scrollToPoint:", contentBounds.origin);
    objj_msgSend(self._headerClipView, "scrollToPoint:", CGPointMake(contentBounds.origin.x, 0.0));
}
,["void","CPScroller"]), new objj_method(sel_getUid("_sendDelegateMessages"), function $CPScrollView___sendDelegateMessages(self, _cmd)
{
    if (self._implementedDelegateMethods == 0)
        return;
    if (!self._scrollTimer)
    {
        objj_msgSend(self, "_scrollViewWillScroll");
        self._scrollTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", TIMER_INTERVAL, self, sel_getUid("_scrollViewDidScroll"), nil, YES);
    }
    else
        objj_msgSend(self._scrollTimer, "setFireDate:", objj_msgSend(CPDate, "dateWithTimeIntervalSinceNow:", TIMER_INTERVAL));
}
,["void"]), new objj_method(sel_getUid("_hideScrollers:"), function $CPScrollView___hideScrollers_(self, _cmd, theTimer)
{
    if (objj_msgSend(self._verticalScroller, "allowFadingOut"))
        objj_msgSend(self._verticalScroller, "fadeOut");
    if (objj_msgSend(self._horizontalScroller, "allowFadingOut"))
        objj_msgSend(self._horizontalScroller, "fadeOut");
    self._timerScrollersHide = nil;
}
,["void","CPTimer"]), new objj_method(sel_getUid("_respondToScrollWheelEventWithDeltaX:deltaY:"), function $CPScrollView___respondToScrollWheelEventWithDeltaX_deltaY_(self, _cmd, deltaX, deltaY)
{
    var documentFrame = objj_msgSend(objj_msgSend(self, "documentView"), "frame"),
        contentBounds = objj_msgSend(self._contentView, "bounds"),
        contentFrame = objj_msgSend(self._contentView, "frame"),
        enclosingScrollView = objj_msgSend(self, "enclosingScrollView");
    contentBounds.origin.x = ROUND(contentBounds.origin.x + deltaX);
    contentBounds.origin.y = ROUND(contentBounds.origin.y + deltaY);
    var constrainedOrigin = objj_msgSend(self._contentView, "constrainScrollPoint:", CGPointCreateCopy(contentBounds.origin)),
        extraX = contentBounds.origin.x - constrainedOrigin.x,
        extraY = contentBounds.origin.y - constrainedOrigin.y;
    objj_msgSend(self, "_sendDelegateMessages");
    objj_msgSend(self._contentView, "scrollToPoint:", constrainedOrigin);
    objj_msgSend(self._headerClipView, "scrollToPoint:", CGPointMake(constrainedOrigin.x, 0.0));
    if (extraX || extraY)
        objj_msgSend(enclosingScrollView, "_respondToScrollWheelEventWithDeltaX:deltaY:", extraX, extraY);
}
,["void","float","float"]), new objj_method(sel_getUid("_scrollViewWillScroll"), function $CPScrollView___scrollViewWillScroll(self, _cmd)
{
    if (self._implementedDelegateMethods & CPScrollViewDelegate_scrollViewWillScroll_)
        objj_msgSend(self._delegate, "scrollViewWillScroll:", self);
}
,["void"]), new objj_method(sel_getUid("_scrollViewDidScroll"), function $CPScrollView___scrollViewDidScroll(self, _cmd)
{
    objj_msgSend(self._scrollTimer, "invalidate");
    self._scrollTimer = nil;
    if (self._implementedDelegateMethods & CPScrollViewDelegate_scrollViewDidScroll_)
        objj_msgSend(self._delegate, "scrollViewDidScroll:", self);
}
,["void"]), new objj_method(sel_getUid("_didReceiveDefaultStyleChange:"), function $CPScrollView___didReceiveDefaultStyleChange_(self, _cmd, aNotification)
{
    objj_msgSend(self, "setScrollerStyle:", CPScrollerStyleGlobal);
}
,["void","CPNotification"]), new objj_method(sel_getUid("tile"), function $CPScrollView__tile(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("reflectScrolledClipView:"), function $CPScrollView__reflectScrolledClipView_(self, _cmd, aClipView)
{
    if (self._contentView !== aClipView)
        return;
    if (self._recursionCount > 5)
        return;
    ++self._recursionCount;
    var documentView = objj_msgSend(self, "documentView");
    if (!documentView)
    {
        if (self._autohidesScrollers)
        {
            objj_msgSend(self._verticalScroller, "setHidden:", YES);
            objj_msgSend(self._horizontalScroller, "setHidden:", YES);
        }
        objj_msgSend(self._contentView, "setFrame:", objj_msgSend(self, "_insetBounds"));
        objj_msgSend(self._headerClipView, "setFrame:", CGRectMakeZero());
        --self._recursionCount;
        return;
    }
    var documentFrame = objj_msgSend(documentView, "frame"),
        contentFrame = objj_msgSend(self, "_insetBounds"),
        headerClipViewFrame = objj_msgSend(self, "_headerClipViewFrame"),
        headerClipViewHeight = CGRectGetHeight(headerClipViewFrame);
    contentFrame.origin.y += headerClipViewHeight;
    contentFrame.size.height -= headerClipViewHeight;
    var difference = CGSizeMake(CGRectGetWidth(documentFrame) - CGRectGetWidth(contentFrame), CGRectGetHeight(documentFrame) - CGRectGetHeight(contentFrame)),
        verticalScrollerWidth = objj_msgSend(CPScroller, "scrollerWidthInStyle:", objj_msgSend(self._verticalScroller, "style")),
        horizontalScrollerHeight = objj_msgSend(CPScroller, "scrollerWidthInStyle:", objj_msgSend(self._horizontalScroller, "style")),
        hasVerticalScroll = difference.height > 0.0,
        hasHorizontalScroll = difference.width > 0.0,
        shouldShowVerticalScroller = self._hasVerticalScroller && (!self._autohidesScrollers || hasVerticalScroll),
        shouldShowHorizontalScroller = self._hasHorizontalScroller && (!self._autohidesScrollers || hasHorizontalScroll);
    if (shouldShowVerticalScroller)
    {
        if (self._scrollerStyle === CPScrollerStyleLegacy)
            difference.width += verticalScrollerWidth;
        hasHorizontalScroll = difference.width > 0.0;
        shouldShowHorizontalScroller = self._hasHorizontalScroller && (!self._autohidesScrollers || hasHorizontalScroll);
    }
    if (shouldShowHorizontalScroller)
    {
        if (self._scrollerStyle === CPScrollerStyleLegacy)
            difference.height += horizontalScrollerHeight;
        hasVerticalScroll = difference.height > 0.0;
        shouldShowVerticalScroller = self._hasVerticalScroller && (!self._autohidesScrollers || hasVerticalScroll);
    }
    objj_msgSend(self._verticalScroller, "setHidden:", !shouldShowVerticalScroller);
    objj_msgSend(self._verticalScroller, "setEnabled:", hasVerticalScroll);
    objj_msgSend(self._horizontalScroller, "setHidden:", !shouldShowHorizontalScroller);
    objj_msgSend(self._horizontalScroller, "setEnabled:", hasHorizontalScroll);
    var overlay = objj_msgSend(CPScroller, "scrollerOverlay");
    if (self._scrollerStyle === CPScrollerStyleLegacy)
    {
        if (shouldShowVerticalScroller)
            contentFrame.size.width -= verticalScrollerWidth;
        if (shouldShowHorizontalScroller)
            contentFrame.size.height -= horizontalScrollerHeight;
        overlay = 0;
    }
    var scrollPoint = objj_msgSend(self._contentView, "bounds").origin,
        wasShowingVerticalScroller = !objj_msgSend(self._verticalScroller, "isHidden"),
        wasShowingHorizontalScroller = !objj_msgSend(self._horizontalScroller, "isHidden");
    if (shouldShowVerticalScroller)
    {
        var verticalScrollerY = MAX(CGRectGetMinY(contentFrame), MAX(CGRectGetMaxY(objj_msgSend(self, "_cornerViewFrame")), CGRectGetMaxY(headerClipViewFrame)));
        var verticalScrollerHeight = CGRectGetMaxY(contentFrame) - verticalScrollerY;
        if (self._scrollerStyle === CPScrollerStyleOverlay && hasHorizontalScroll)
            verticalScrollerHeight -= horizontalScrollerHeight;
        var documentHeight = CGRectGetHeight(documentFrame);
        objj_msgSend(self._verticalScroller, "setFloatValue:", difference.height <= 0.0 ? 0.0 : scrollPoint.y / difference.height);
        objj_msgSend(self._verticalScroller, "setKnobProportion:", documentHeight > 0 ? CGRectGetHeight(contentFrame) / documentHeight : 1.0);
        objj_msgSend(self._verticalScroller, "setFrame:", CGRectMake(CGRectGetMaxX(contentFrame) - overlay, verticalScrollerY, verticalScrollerWidth, verticalScrollerHeight));
    }
    else if (wasShowingVerticalScroller)
    {
        objj_msgSend(self._verticalScroller, "setFloatValue:", 0.0);
        objj_msgSend(self._verticalScroller, "setKnobProportion:", 1.0);
    }
    if (shouldShowHorizontalScroller)
    {
        var horizontalScrollerWidth = CGRectGetWidth(contentFrame);
        if (self._scrollerStyle === CPScrollerStyleOverlay && hasVerticalScroll)
            horizontalScrollerWidth -= verticalScrollerWidth;
        var documentWidth = CGRectGetWidth(documentFrame);
        objj_msgSend(self._horizontalScroller, "setFloatValue:", difference.width <= 0.0 ? 0.0 : scrollPoint.x / difference.width);
        objj_msgSend(self._horizontalScroller, "setKnobProportion:", documentWidth > 0 ? CGRectGetWidth(contentFrame) / documentWidth : 1.0);
        objj_msgSend(self._horizontalScroller, "setFrame:", CGRectMake(CGRectGetMinX(contentFrame), CGRectGetMaxY(contentFrame) - overlay, horizontalScrollerWidth, horizontalScrollerHeight));
    }
    else if (wasShowingHorizontalScroller)
    {
        objj_msgSend(self._horizontalScroller, "setFloatValue:", 0.0);
        objj_msgSend(self._horizontalScroller, "setKnobProportion:", 1.0);
    }
    objj_msgSend(self._contentView, "setFrame:", contentFrame);
    objj_msgSend(self._headerClipView, "setFrame:", objj_msgSend(self, "_headerClipViewFrame"));
    objj_msgSend(objj_msgSend(self._headerClipView, "documentView"), "setNeedsDisplay:", YES);
    if (self._scrollerStyle === CPScrollerStyleLegacy && self._verticalScroller && !objj_msgSend(self._verticalScroller, "isHidden"))
    {
        objj_msgSend(self._cornerView, "setFrame:", objj_msgSend(self, "_cornerViewFrame"));
        objj_msgSend(self._cornerView, "setHidden:", NO);
    }
    else
        objj_msgSend(self._cornerView, "setHidden:", YES);
    if (self._scrollerStyle === CPScrollerStyleLegacy)
    {
        objj_msgSend(objj_msgSend(self, "bottomCornerView"), "setFrame:", objj_msgSend(self, "_bottomCornerViewFrame"));
        objj_msgSend(objj_msgSend(self, "bottomCornerView"), "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bottom-corner-color"));
    }
    --self._recursionCount;
}
,["void","CPClipView"]), new objj_method(sel_getUid("flashScrollers"), function $CPScrollView__flashScrollers(self, _cmd)
{
    if (self._scrollerStyle === CPScrollerStyleLegacy)
        return;
    if (self._hasHorizontalScroller)
    {
        objj_msgSend(self._horizontalScroller, "setHidden:", NO);
        objj_msgSend(self._horizontalScroller, "fadeIn");
    }
    if (self._hasVerticalScroller)
    {
        objj_msgSend(self._verticalScroller, "setHidden:", NO);
        objj_msgSend(self._verticalScroller, "fadeIn");
    }
    if (self._timerScrollersHide)
        objj_msgSend(self._timerScrollersHide, "invalidate");
    self._timerScrollersHide = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", CPScrollViewFadeOutTime, self, sel_getUid("_hideScrollers:"), nil, NO);
}
,["void"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $CPScrollView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
    objj_msgSend(self, "reflectScrolledClipView:", self._contentView);
}
,["void","CGSize"]), new objj_method(sel_getUid("drawRect:"), function $CPScrollView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScrollView").super_class }, "drawRect:", aRect);
    if (self._borderType == CPNoBorder)
        return;
    var strokeRect = objj_msgSend(self, "bounds"),
        context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetLineWidth(context, 1);
    switch(self._borderType) {
    case CPLineBorder:
        CGContextSetStrokeColor(context, objj_msgSend(self, "currentValueForThemeAttribute:", "border-color"));
        CGContextStrokeRect(context, CGRectInset(strokeRect, 0.5, 0.5));
        break;
    case CPBezelBorder:
        objj_msgSend(self, "_drawGrayBezelInContext:bounds:", context, strokeRect);
        break;
    case CPGrooveBorder:
        objj_msgSend(self, "_drawGrooveInContext:bounds:", context, strokeRect);
        break;
default:
        break;
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawGrayBezelInContext:bounds:"), function $CPScrollView___drawGrayBezelInContext_bounds_(self, _cmd, context, aRect)
{
    var minX = CGRectGetMinX(aRect),
        maxX = CGRectGetMaxX(aRect),
        minY = CGRectGetMinY(aRect),
        maxY = CGRectGetMaxY(aRect),
        y = minY + 0.5;
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithWhite:alpha:", 142.0 / 255.0, 1.0));
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, minX, y);
    CGContextAddLineToPoint(context, maxX, y);
    CGContextStrokePath(context);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithWhite:alpha:", 192.0 / 255.0, 1.0));
    var x = maxX - 0.5;
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, x, minY + 1.0);
    CGContextAddLineToPoint(context, x, maxY);
    CGContextMoveToPoint(context, x - 0.5, maxY - 0.5);
    CGContextAddLineToPoint(context, minX, maxY - 0.5);
    x = minX + 0.5;
    CGContextMoveToPoint(context, x, maxY);
    CGContextAddLineToPoint(context, x, minY + 1.0);
    CGContextStrokePath(context);
}
,["void","CGContext","CGRect"]), new objj_method(sel_getUid("_drawGrooveInContext:bounds:"), function $CPScrollView___drawGrooveInContext_bounds_(self, _cmd, context, aRect)
{
    var minX = CGRectGetMinX(aRect),
        maxX = CGRectGetMaxX(aRect),
        minY = CGRectGetMinY(aRect),
        maxY = CGRectGetMaxY(aRect);
    CGContextBeginPath(context);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithWhite:alpha:", 159.0 / 255.0, 1.0));
    var y = minY + 0.5;
    CGContextMoveToPoint(context, minX, y);
    CGContextAddLineToPoint(context, maxX, y);
    var x = maxX - 1.5;
    CGContextMoveToPoint(context, x, minY + 2.0);
    CGContextAddLineToPoint(context, x, maxY - 1.0);
    y = maxY - 1.5;
    CGContextMoveToPoint(context, maxX - 1.0, y);
    CGContextAddLineToPoint(context, minX + 2.0, y);
    x = minX + 0.5;
    CGContextMoveToPoint(context, x, maxY);
    CGContextAddLineToPoint(context, x, minY);
    CGContextStrokePath(context);
    CGContextBeginPath(context);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "whiteColor"));
    var rect = CGRectOffset(aRect, 1.0, 1.0);
    rect.size.width -= 1.0;
    rect.size.height -= 1.0;
    CGContextStrokeRect(context, CGRectInset(rect, 0.5, 0.5));
    CGContextBeginPath(context);
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithWhite:alpha:", 192.0 / 255.0, 1.0));
    y = minY + 2.5;
    CGContextMoveToPoint(context, minX + 2.0, y);
    CGContextAddLineToPoint(context, maxX - 2.0, y);
    CGContextStrokePath(context);
}
,["void","CGContext","CGRect"]), new objj_method(sel_getUid("scrollWheel:"), function $CPScrollView__scrollWheel_(self, _cmd, anEvent)
{
    if (self._timerScrollersHide)
        objj_msgSend(self._timerScrollersHide, "invalidate");
    if (!objj_msgSend(self._verticalScroller, "isHidden"))
        objj_msgSend(self._verticalScroller, "fadeIn");
    if (!objj_msgSend(self._horizontalScroller, "isHidden"))
        objj_msgSend(self._horizontalScroller, "fadeIn");
    if (!objj_msgSend(self._horizontalScroller, "isHidden") || !objj_msgSend(self._verticalScroller, "isHidden"))
        self._timerScrollersHide = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", CPScrollViewFadeOutTime, self, sel_getUid("_hideScrollers:"), nil, NO);
    objj_msgSend(self, "_respondToScrollWheelEventWithDeltaX:deltaY:", objj_msgSend(anEvent, "deltaX"), objj_msgSend(anEvent, "deltaY"));
}
,["void","CPEvent"]), new objj_method(sel_getUid("scrollPageUp:"), function $CPScrollView__scrollPageUp_(self, _cmd, sender)
{
    var contentBounds = objj_msgSend(self._contentView, "bounds");
    objj_msgSend(self, "moveByOffset:", CGSizeMake(0.0, -(CGRectGetHeight(contentBounds) - self._verticalPageScroll)));
}
,["void","id"]), new objj_method(sel_getUid("scrollPageDown:"), function $CPScrollView__scrollPageDown_(self, _cmd, sender)
{
    var contentBounds = objj_msgSend(self._contentView, "bounds");
    objj_msgSend(self, "moveByOffset:", CGSizeMake(0.0, CGRectGetHeight(contentBounds) - self._verticalPageScroll));
}
,["void","id"]), new objj_method(sel_getUid("scrollToBeginningOfDocument:"), function $CPScrollView__scrollToBeginningOfDocument_(self, _cmd, sender)
{
    objj_msgSend(self._contentView, "scrollToPoint:", CGPointMakeZero());
    objj_msgSend(self._headerClipView, "scrollToPoint:", CGPointMakeZero());
}
,["void","id"]), new objj_method(sel_getUid("scrollToEndOfDocument:"), function $CPScrollView__scrollToEndOfDocument_(self, _cmd, sender)
{
    var contentBounds = objj_msgSend(self._contentView, "bounds"),
        documentFrame = objj_msgSend(objj_msgSend(self, "documentView"), "frame"),
        scrollPoint = CGPointMake(0.0, CGRectGetHeight(documentFrame) - CGRectGetHeight(contentBounds));
    objj_msgSend(self._contentView, "scrollToPoint:", scrollPoint);
    objj_msgSend(self._headerClipView, "scrollToPoint:", CGPointMakeZero());
}
,["void","id"]), new objj_method(sel_getUid("moveLeft:"), function $CPScrollView__moveLeft_(self, _cmd, sender)
{
    objj_msgSend(self, "moveByOffset:", CGSizeMake(-self._horizontalLineScroll, 0.0));
}
,["void","id"]), new objj_method(sel_getUid("moveRight:"), function $CPScrollView__moveRight_(self, _cmd, sender)
{
    objj_msgSend(self, "moveByOffset:", CGSizeMake(self._horizontalLineScroll, 0.0));
}
,["void","id"]), new objj_method(sel_getUid("moveUp:"), function $CPScrollView__moveUp_(self, _cmd, sender)
{
    objj_msgSend(self, "moveByOffset:", CGSizeMake(0.0, -self._verticalLineScroll));
}
,["void","id"]), new objj_method(sel_getUid("moveDown:"), function $CPScrollView__moveDown_(self, _cmd, sender)
{
    objj_msgSend(self, "moveByOffset:", CGSizeMake(0.0, self._verticalLineScroll));
}
,["void","id"]), new objj_method(sel_getUid("moveByOffset:"), function $CPScrollView__moveByOffset_(self, _cmd, aSize)
{
    var documentFrame = objj_msgSend(objj_msgSend(self, "documentView"), "frame"),
        contentBounds = objj_msgSend(self._contentView, "bounds");
    contentBounds.origin.x += aSize.width;
    contentBounds.origin.y += aSize.height;
    objj_msgSend(self._contentView, "scrollToPoint:", contentBounds.origin);
    objj_msgSend(self._headerClipView, "scrollToPoint:", CGPointMake(contentBounds.origin.x, 0));
}
,["void","CGSize"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPScrollView__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPScrollView, "class"))
        return;
    var globalValue = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPScrollersGlobalStyle");
    if (globalValue === nil || globalValue === -1)
        CPScrollerStyleGlobal = _isBrowserUsingOverlayScrollers() ? CPScrollerStyleOverlay : CPScrollerStyleLegacy;
    else
        CPScrollerStyleGlobal = globalValue;
}
,["void"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPScrollView__defaultThemeClass(self, _cmd)
{
    return "scrollview";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPScrollView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPColor, "whiteColor"), "bottom-corner-color", objj_msgSend(CPColor, "blackColor"), "border-color");
}
,["CPDictionary"]), new objj_method(sel_getUid("contentSizeForFrameSize:hasHorizontalScroller:hasVerticalScroller:borderType:"), function $CPScrollView__contentSizeForFrameSize_hasHorizontalScroller_hasVerticalScroller_borderType_(self, _cmd, frameSize, hFlag, vFlag, borderType)
{
    var bounds = objj_msgSend(self, "_insetBounds:borderType:", CGRectMake(0.0, 0.0, frameSize.width, frameSize.height), borderType),
        scrollerWidth = objj_msgSend(CPScroller, "scrollerWidth");
    if (hFlag)
        bounds.size.height -= scrollerWidth;
    if (vFlag)
        bounds.size.width -= scrollerWidth;
    return bounds.size;
}
,["CGSize","CGSize","BOOL","BOOL","CPBorderType"]), new objj_method(sel_getUid("frameSizeForContentSize:hasHorizontalScroller:hasVerticalScroller:borderType:"), function $CPScrollView__frameSizeForContentSize_hasHorizontalScroller_hasVerticalScroller_borderType_(self, _cmd, contentSize, hFlag, vFlag, borderType)
{
    var bounds = objj_msgSend(self, "_insetBounds:borderType:", CGRectMake(0.0, 0.0, contentSize.width, contentSize.height), borderType),
        widthInset = contentSize.width - bounds.size.width,
        heightInset = contentSize.height - bounds.size.height,
        frameSize = CGSizeMake(contentSize.width + widthInset, contentSize.height + heightInset),
        scrollerWidth = objj_msgSend(CPScroller, "scrollerWidth");
    if (hFlag)
        frameSize.height += scrollerWidth;
    if (vFlag)
        frameSize.width += scrollerWidth;
    return frameSize;
}
,["CGSize","CGSize","BOOL","BOOL","CPBorderType"]), new objj_method(sel_getUid("_insetBounds:borderType:"), function $CPScrollView___insetBounds_borderType_(self, _cmd, bounds, borderType)
{
    switch(borderType) {
    case CPLineBorder:
    case CPBezelBorder:
        return CGRectInset(bounds, 1.0, 1.0);
    case CPGrooveBorder:
        bounds = CGRectInset(bounds, 2.0, 2.0);
        ++bounds.origin.y;
        --bounds.size.height;
        return bounds;
    case CPNoBorder:
default:
        return bounds;
    }
}
,["CGRect","CGRect","CPBorderType"]), new objj_method(sel_getUid("globalScrollerStyle"), function $CPScrollView__globalScrollerStyle(self, _cmd)
{
    return CPScrollerStyleGlobal;
}
,["int"]), new objj_method(sel_getUid("setGlobalScrollerStyle:"), function $CPScrollView__setGlobalScrollerStyle_(self, _cmd, aStyle)
{
    CPScrollerStyleGlobal = aStyle;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPScrollerStyleGlobalChangeNotification, nil);
}
,["void","int"])]);
}var CPScrollViewContentViewKey = "CPScrollViewContentView",
    CPScrollViewHeaderClipViewKey = "CPScrollViewHeaderClipViewKey",
    CPScrollViewVLineScrollKey = "CPScrollViewVLineScroll",
    CPScrollViewHLineScrollKey = "CPScrollViewHLineScroll",
    CPScrollViewVPageScrollKey = "CPScrollViewVPageScroll",
    CPScrollViewHPageScrollKey = "CPScrollViewHPageScroll",
    CPScrollViewHasVScrollerKey = "CPScrollViewHasVScroller",
    CPScrollViewHasHScrollerKey = "CPScrollViewHasHScroller",
    CPScrollViewVScrollerKey = "CPScrollViewVScroller",
    CPScrollViewHScrollerKey = "CPScrollViewHScroller",
    CPScrollViewAutohidesScrollerKey = "CPScrollViewAutohidesScroller",
    CPScrollViewCornerViewKey = "CPScrollViewCornerViewKey",
    CPScrollViewBottomCornerViewKey = "CPScrollViewBottomCornerViewKey",
    CPScrollViewBorderTypeKey = "CPScrollViewBorderTypeKey",
    CPScrollViewScrollerStyleKey = "CPScrollViewScrollerStyleKey",
    CPScrollViewScrollerKnobStyleKey = "CPScrollViewScrollerKnobStyleKey";
{
var the_class = objj_getClass("CPScrollView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPScrollView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPScrollView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScrollView").super_class }, "initWithCoder:", aCoder))
    {
        self._verticalLineScroll = objj_msgSend(aCoder, "decodeFloatForKey:", CPScrollViewVLineScrollKey);
        self._verticalPageScroll = objj_msgSend(aCoder, "decodeFloatForKey:", CPScrollViewVPageScrollKey);
        self._horizontalLineScroll = objj_msgSend(aCoder, "decodeFloatForKey:", CPScrollViewHLineScrollKey);
        self._horizontalPageScroll = objj_msgSend(aCoder, "decodeFloatForKey:", CPScrollViewHPageScrollKey);
        self._contentView = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewContentViewKey);
        self._headerClipView = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewHeaderClipViewKey);
        if (!self._headerClipView)
        {
            self._headerClipView = objj_msgSend(objj_msgSend(CPClipView, "alloc"), "init");
            objj_msgSend(self, "addSubview:", self._headerClipView);
        }
        self._verticalScroller = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewVScrollerKey);
        self._horizontalScroller = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewHScrollerKey);
        self._hasVerticalScroller = objj_msgSend(aCoder, "decodeBoolForKey:", CPScrollViewHasVScrollerKey);
        self._hasHorizontalScroller = objj_msgSend(aCoder, "decodeBoolForKey:", CPScrollViewHasHScrollerKey);
        self._autohidesScrollers = objj_msgSend(aCoder, "decodeBoolForKey:", CPScrollViewAutohidesScrollerKey);
        self._borderType = objj_msgSend(aCoder, "decodeIntForKey:", CPScrollViewBorderTypeKey);
        self._cornerView = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewCornerViewKey);
        self._bottomCornerView = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewBottomCornerViewKey);
        self._delegate = nil;
        self._scrollTimer = nil;
        self._implementedDelegateMethods = 0;
        self._scrollerStyle = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewScrollerStyleKey) || CPScrollerStyleGlobal;
        self._scrollerKnobStyle = objj_msgSend(aCoder, "decodeObjectForKey:", CPScrollViewScrollerKnobStyleKey) || CPScrollerKnobStyleDefault;
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_didReceiveDefaultStyleChange:"), CPScrollerStyleGlobalChangeNotification, nil);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("awakeFromCib"), function $CPScrollView__awakeFromCib(self, _cmd)
{
    objj_msgSend(self, "_updateScrollerStyle");
    objj_msgSend(self, "_updateCornerAndHeaderView");
}
,["void"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPScrollView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPScrollView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._contentView, CPScrollViewContentViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._headerClipView, CPScrollViewHeaderClipViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._verticalScroller, CPScrollViewVScrollerKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._horizontalScroller, CPScrollViewHScrollerKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._verticalLineScroll, CPScrollViewVLineScrollKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._verticalPageScroll, CPScrollViewVPageScrollKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._horizontalLineScroll, CPScrollViewHLineScrollKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._horizontalPageScroll, CPScrollViewHPageScrollKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._hasVerticalScroller, CPScrollViewHasVScrollerKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._hasHorizontalScroller, CPScrollViewHasHScrollerKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._autohidesScrollers, CPScrollViewAutohidesScrollerKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._cornerView, CPScrollViewCornerViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._bottomCornerView, CPScrollViewBottomCornerViewKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._borderType, CPScrollViewBorderTypeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._scrollerStyle, CPScrollViewScrollerStyleKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._scrollerKnobStyle, CPScrollViewScrollerKnobStyleKey);
}
,["void","CPCoder"])]);
}p;15;CPSearchField.jt;27910;@STATIC;1.0;i;10;CPButton.ji;8;CPMenu.ji;12;CPMenuItem.ji;13;CPTextField.jt;27828;objj_executeFile("CPButton.j", YES);objj_executeFile("CPMenu.j", YES);objj_executeFile("CPMenuItem.j", YES);objj_executeFile("CPTextField.j", YES);CPSearchFieldRecentsTitleMenuItemTag = 1000;
CPSearchFieldRecentsMenuItemTag = 1001;
CPSearchFieldClearRecentsMenuItemTag = 1002;
CPSearchFieldNoRecentsMenuItemTag = 1003;
var CPAutosavedRecentsChangedNotification = "CPAutosavedRecentsChangedNotification";
var RECENT_SEARCH_PREFIX = "   ";
{var the_class = objj_allocateClassPair(CPTextField, "CPSearchField"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_searchButton"), new objj_ivar("_cancelButton"), new objj_ivar("_searchMenuTemplate"), new objj_ivar("_searchMenu"), new objj_ivar("_recentsAutosaveName"), new objj_ivar("_recentSearches"), new objj_ivar("_maximumRecents"), new objj_ivar("_sendsWholeSearchString"), new objj_ivar("_sendsSearchStringImmediately"), new objj_ivar("_canResignFirstResponder"), new objj_ivar("_partialStringTimer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPSearchField__initWithFrame_(self, _cmd, frame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "initWithFrame:", frame))
    {
        self._maximumRecents = 10;
        self._sendsWholeSearchString = NO;
        self._sendsSearchStringImmediately = NO;
        self._recentsAutosaveName = nil;
        objj_msgSend(self, "_init");
        self._cancelButton._DOMElement.style.cursor = "default";
        self._searchButton._DOMElement.style.cursor = "default";
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPSearchField___init(self, _cmd)
{
    self._recentSearches = objj_msgSend(CPArray, "array");
    objj_msgSend(self, "setBezeled:", YES);
    objj_msgSend(self, "setBezelStyle:", CPTextFieldRoundedBezel);
    objj_msgSend(self, "setBordered:", YES);
    objj_msgSend(self, "setEditable:", YES);
    objj_msgSend(self, "setContinuous:", YES);
    var bounds = objj_msgSend(self, "bounds"),
        cancelButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", objj_msgSend(self, "cancelButtonRectForBounds:", bounds)),
        searchButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", objj_msgSend(self, "searchButtonRectForBounds:", bounds));
    objj_msgSend(self, "setCancelButton:", cancelButton);
    objj_msgSend(self, "resetCancelButton");
    objj_msgSend(self, "setSearchButton:", searchButton);
    objj_msgSend(self, "resetSearchButton");
    self._canResignFirstResponder = YES;
}
,["void"]), new objj_method(sel_getUid("viewWillMoveToSuperview:"), function $CPSearchField__viewWillMoveToSuperview_(self, _cmd, aView)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "viewWillMoveToSuperview:", aView);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPControlTextDidChangeNotification, self);
    if (aView)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_searchFieldTextDidChange:"), CPControlTextDidChangeNotification, self);
}
,["void","CPView"]), new objj_method(sel_getUid("setSearchButton:"), function $CPSearchField__setSearchButton_(self, _cmd, button)
{
    if (button != self._searchButton)
    {
        objj_msgSend(self._searchButton, "removeFromSuperview");
        self._searchButton = button;
        objj_msgSend(self._searchButton, "setFrame:", objj_msgSend(self, "searchButtonRectForBounds:", objj_msgSend(self, "bounds")));
        objj_msgSend(self._searchButton, "setAutoresizingMask:", CPViewMaxXMargin);
        objj_msgSend(self, "addSubview:", self._searchButton);
    }
}
,["void","CPButton"]), new objj_method(sel_getUid("searchButton"), function $CPSearchField__searchButton(self, _cmd)
{
    return self._searchButton;
}
,["CPButton"]), new objj_method(sel_getUid("resetSearchButton"), function $CPSearchField__resetSearchButton(self, _cmd)
{
    var button = objj_msgSend(self, "searchButton"),
        searchButtonImage = self._searchMenuTemplate === nil ? objj_msgSend(self, "valueForThemeAttribute:", "image-search") : objj_msgSend(self, "valueForThemeAttribute:", "image-find");
    objj_msgSend(button, "setBordered:", NO);
    objj_msgSend(button, "setImageScaling:", CPImageScaleAxesIndependently);
    objj_msgSend(button, "setImage:", searchButtonImage);
    objj_msgSend(button, "setAutoresizingMask:", CPViewMaxXMargin);
}
,["void"]), new objj_method(sel_getUid("setCancelButton:"), function $CPSearchField__setCancelButton_(self, _cmd, button)
{
    if (button != self._cancelButton)
    {
        objj_msgSend(self._cancelButton, "removeFromSuperview");
        self._cancelButton = button;
        objj_msgSend(self._cancelButton, "setFrame:", objj_msgSend(self, "cancelButtonRectForBounds:", objj_msgSend(self, "bounds")));
        objj_msgSend(self._cancelButton, "setAutoresizingMask:", CPViewMinXMargin);
        objj_msgSend(self._cancelButton, "setTarget:", self);
        objj_msgSend(self._cancelButton, "setAction:", sel_getUid("cancelOperation:"));
        objj_msgSend(self._cancelButton, "setButtonType:", CPMomentaryChangeButton);
        objj_msgSend(self, "_updateCancelButtonVisibility");
        objj_msgSend(self, "addSubview:", self._cancelButton);
    }
}
,["void","CPButton"]), new objj_method(sel_getUid("cancelButton"), function $CPSearchField__cancelButton(self, _cmd)
{
    return self._cancelButton;
}
,["CPButton"]), new objj_method(sel_getUid("resetCancelButton"), function $CPSearchField__resetCancelButton(self, _cmd)
{
    var button = objj_msgSend(self, "cancelButton");
    objj_msgSend(button, "setBordered:", NO);
    objj_msgSend(button, "setImageScaling:", CPImageScaleAxesIndependently);
    objj_msgSend(button, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "image-cancel"));
    objj_msgSend(button, "setAlternateImage:", objj_msgSend(self, "valueForThemeAttribute:", "image-cancel-pressed"));
    objj_msgSend(button, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(button, "setTarget:", self);
    objj_msgSend(button, "setAction:", sel_getUid("cancelOperation:"));
}
,["void"]), new objj_method(sel_getUid("searchTextRectForBounds:"), function $CPSearchField__searchTextRectForBounds_(self, _cmd, rect)
{
    var leftOffset = 0,
        width = CGRectGetWidth(rect),
        bounds = objj_msgSend(self, "bounds");
    if (self._searchButton)
    {
        var searchBounds = objj_msgSend(self, "searchButtonRectForBounds:", bounds);
        leftOffset = CGRectGetMaxX(searchBounds) + 2;
    }
    if (self._cancelButton)
    {
        var cancelRect = objj_msgSend(self, "cancelButtonRectForBounds:", bounds);
        width = CGRectGetMinX(cancelRect) - leftOffset;
    }
    return CGRectMake(leftOffset, CGRectGetMinY(rect), width, CGRectGetHeight(rect));
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("searchButtonRectForBounds:"), function $CPSearchField__searchButtonRectForBounds_(self, _cmd, rect)
{
    var size = objj_msgSend(objj_msgSend(self, "valueForThemeAttribute:", "image-search"), "size") || CGSizeMakeZero();
    return CGRectMake(5, (CGRectGetHeight(rect) - size.height) / 2, size.width, size.height);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("cancelButtonRectForBounds:"), function $CPSearchField__cancelButtonRectForBounds_(self, _cmd, rect)
{
    var size = objj_msgSend(objj_msgSend(self, "valueForThemeAttribute:", "image-cancel"), "size") || CGSizeMakeZero();
    return CGRectMake(CGRectGetWidth(rect) - size.width - 5, (CGRectGetHeight(rect) - size.width) / 2, size.height, size.height);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("searchMenuTemplate"), function $CPSearchField__searchMenuTemplate(self, _cmd)
{
    return self._searchMenuTemplate;
}
,["CPMenu"]), new objj_method(sel_getUid("setSearchMenuTemplate:"), function $CPSearchField__setSearchMenuTemplate_(self, _cmd, aMenu)
{
    self._searchMenuTemplate = aMenu;
    objj_msgSend(self, "resetSearchButton");
    objj_msgSend(self, "_loadRecentSearchList");
    objj_msgSend(self, "_updateSearchMenu");
}
,["void","CPMenu"]), new objj_method(sel_getUid("sendsWholeSearchString"), function $CPSearchField__sendsWholeSearchString(self, _cmd)
{
    return self._sendsWholeSearchString;
}
,["BOOL"]), new objj_method(sel_getUid("setSendsWholeSearchString:"), function $CPSearchField__setSendsWholeSearchString_(self, _cmd, flag)
{
    self._sendsWholeSearchString = flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("sendsSearchStringImmediately"), function $CPSearchField__sendsSearchStringImmediately(self, _cmd)
{
    return self._sendsSearchStringImmediately;
}
,["BOOL"]), new objj_method(sel_getUid("setSendsSearchStringImmediately:"), function $CPSearchField__setSendsSearchStringImmediately_(self, _cmd, flag)
{
    self._sendsSearchStringImmediately = flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("maximumRecents"), function $CPSearchField__maximumRecents(self, _cmd)
{
    return self._maximumRecents;
}
,["int"]), new objj_method(sel_getUid("setMaximumRecents:"), function $CPSearchField__setMaximumRecents_(self, _cmd, max)
{
    if (max > 254)
        max = 254;
    else if (max < 0)
        max = 10;
    self._maximumRecents = max;
}
,["void","int"]), new objj_method(sel_getUid("recentSearches"), function $CPSearchField__recentSearches(self, _cmd)
{
    return self._recentSearches;
}
,["CPArray"]), new objj_method(sel_getUid("setRecentSearches:"), function $CPSearchField__setRecentSearches_(self, _cmd, searches)
{
    var max = MIN(objj_msgSend(self, "maximumRecents"), objj_msgSend(searches, "count")),
        searches = objj_msgSend(searches, "subarrayWithRange:", CPMakeRange(0, max));
    self._recentSearches = searches;
    objj_msgSend(self, "_autosaveRecentSearchList");
}
,["void","CPArray"]), new objj_method(sel_getUid("recentsAutosaveName"), function $CPSearchField__recentsAutosaveName(self, _cmd)
{
    return self._recentsAutosaveName;
}
,["CPString"]), new objj_method(sel_getUid("setRecentsAutosaveName:"), function $CPSearchField__setRecentsAutosaveName_(self, _cmd, name)
{
    if (self._recentsAutosaveName != nil)
        objj_msgSend(self, "_deregisterForAutosaveNotification");
    self._recentsAutosaveName = name;
    if (self._recentsAutosaveName != nil)
        objj_msgSend(self, "_registerForAutosaveNotification");
}
,["void","CPString"]), new objj_method(sel_getUid("contentRectForBounds:"), function $CPSearchField__contentRectForBounds_(self, _cmd, bounds)
{
    var superbounds = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "contentRectForBounds:", bounds);
    return objj_msgSend(self, "searchTextRectForBounds:", superbounds);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("menu"), function $CPSearchField__menu(self, _cmd)
{
    return self._searchMenu;
}
,["CPMenu"]), new objj_method(sel_getUid("isOpaque"), function $CPSearchField__isOpaque(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "isOpaque") && objj_msgSend(self._cancelButton, "isOpaque") && objj_msgSend(self._searchButton, "isOpaque");
}
,["BOOL"]), new objj_method(sel_getUid("_updateCancelButtonVisibility"), function $CPSearchField___updateCancelButtonVisibility(self, _cmd)
{
    objj_msgSend(self._cancelButton, "setHidden:", objj_msgSend(objj_msgSend(self, "stringValue"), "length") === 0);
}
,["void"]), new objj_method(sel_getUid("_searchFieldTextDidChange:"), function $CPSearchField___searchFieldTextDidChange_(self, _cmd, aNotification)
{
    if (!objj_msgSend(self, "sendsWholeSearchString"))
    {
        if (objj_msgSend(self, "sendsSearchStringImmediately"))
            objj_msgSend(self, "_sendPartialString");
        else
        {
            objj_msgSend(self._partialStringTimer, "invalidate");
            var timeInterval = objj_msgSend(CPSearchField, "_keyboardDelayForPartialSearchString:", objj_msgSend(self, "stringValue"));
            self._partialStringTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", timeInterval, self, sel_getUid("_sendPartialString"), nil, NO);
        }
    }
    objj_msgSend(self, "_updateCancelButtonVisibility");
}
,["void","CPNotification"]), new objj_method(sel_getUid("_sendAction:"), function $CPSearchField___sendAction_(self, _cmd, sender)
{
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["void","id"]), new objj_method(sel_getUid("sendAction:to:"), function $CPSearchField__sendAction_to_(self, _cmd, anAction, anObject)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "sendAction:to:", anAction, anObject);
    objj_msgSend(self._partialStringTimer, "invalidate");
    objj_msgSend(self, "_addStringToRecentSearches:", objj_msgSend(self, "stringValue"));
    objj_msgSend(self, "_updateCancelButtonVisibility");
}
,["void","SEL","id"]), new objj_method(sel_getUid("_addStringToRecentSearches:"), function $CPSearchField___addStringToRecentSearches_(self, _cmd, string)
{
    if (string === nil || string === "" || objj_msgSend(self._recentSearches, "containsObject:", string))
        return;
    var searches = objj_msgSend(CPMutableArray, "arrayWithArray:", self._recentSearches);
    objj_msgSend(searches, "addObject:", string);
    objj_msgSend(self, "setRecentSearches:", searches);
    objj_msgSend(self, "_updateSearchMenu");
}
,["void","CPString"]), new objj_method(sel_getUid("hitTest:"), function $CPSearchField__hitTest_(self, _cmd, aPoint)
{
    if (CGRectContainsPoint(objj_msgSend(self, "frame"), aPoint))
        return self;
    else
        return nil;
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPSearchField__resignFirstResponder(self, _cmd)
{
    return self._canResignFirstResponder && objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "resignFirstResponder");
}
,["BOOL"]), new objj_method(sel_getUid("mouseDown:"), function $CPSearchField__mouseDown_(self, _cmd, anEvent)
{
    var location = objj_msgSend(anEvent, "locationInWindow"),
        point = objj_msgSend(self, "convertPoint:fromView:", location, nil);
    if (CGRectContainsPoint(objj_msgSend(self, "searchButtonRectForBounds:", objj_msgSend(self, "bounds")), point))
    {
        if (self._searchMenuTemplate == nil)
        {
            if (objj_msgSend(self._searchButton, "target") && objj_msgSend(self._searchButton, "action"))
                objj_msgSend(self._searchButton, "mouseDown:", anEvent);
            else
                objj_msgSend(self, "_sendAction:", self);
        }
        else
            objj_msgSend(self, "_showMenu");
    }
    else if (CGRectContainsPoint(objj_msgSend(self, "cancelButtonRectForBounds:", objj_msgSend(self, "bounds")), point))
        objj_msgSend(self._cancelButton, "mouseDown:", anEvent);
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("defaultSearchMenuTemplate"), function $CPSearchField__defaultSearchMenuTemplate(self, _cmd)
{
    var template = objj_msgSend(objj_msgSend(CPMenu, "alloc"), "init"),
        item;
    item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Recent Searches", nil, "");
    objj_msgSend(item, "setTag:", CPSearchFieldRecentsTitleMenuItemTag);
    objj_msgSend(item, "setEnabled:", NO);
    objj_msgSend(template, "addItem:", item);
    item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Recent search item", sel_getUid("_searchFieldSearch:"), "");
    objj_msgSend(item, "setTag:", CPSearchFieldRecentsMenuItemTag);
    objj_msgSend(item, "setTarget:", self);
    objj_msgSend(template, "addItem:", item);
    item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "Clear Recent Searches", sel_getUid("_searchFieldClearRecents:"), "");
    objj_msgSend(item, "setTag:", CPSearchFieldClearRecentsMenuItemTag);
    objj_msgSend(item, "setTarget:", self);
    objj_msgSend(template, "addItem:", item);
    item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", "No Recent Searches", nil, "");
    objj_msgSend(item, "setTag:", CPSearchFieldNoRecentsMenuItemTag);
    objj_msgSend(item, "setEnabled:", NO);
    objj_msgSend(template, "addItem:", item);
    return template;
}
,["CPMenu"]), new objj_method(sel_getUid("_updateSearchMenu"), function $CPSearchField___updateSearchMenu(self, _cmd)
{
    if (self._searchMenuTemplate === nil)
        return;
    var menu = objj_msgSend(objj_msgSend(CPMenu, "alloc"), "init"),
        countOfRecents = objj_msgSend(self._recentSearches, "count"),
        numberOfItems = objj_msgSend(self._searchMenuTemplate, "numberOfItems");
    for (var i = 0; i < numberOfItems; i++)
    {
        var item = objj_msgSend(objj_msgSend(self._searchMenuTemplate, "itemAtIndex:", i), "copy");
        switch(objj_msgSend(item, "tag")) {
        case CPSearchFieldRecentsTitleMenuItemTag:
            if (countOfRecents === 0)
                continue;
            if (objj_msgSend(menu, "numberOfItems") > 0)
                objj_msgSend(self, "_addSeparatorToMenu:", menu);
            break;
        case CPSearchFieldRecentsMenuItemTag:
        {
            var itemAction = sel_getUid("_searchFieldSearch:");
            for (var recentIndex = 0; recentIndex < countOfRecents; ++recentIndex)
            {
                var recentItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", RECENT_SEARCH_PREFIX + objj_msgSend(self._recentSearches, "objectAtIndex:", recentIndex), itemAction, objj_msgSend(item, "keyEquivalent"));
                objj_msgSend(item, "setTarget:", self);
                objj_msgSend(menu, "addItem:", recentItem);
            }
            continue;
        }
        case CPSearchFieldClearRecentsMenuItemTag:
            if (countOfRecents === 0)
                continue;
            if (objj_msgSend(menu, "numberOfItems") > 0)
                objj_msgSend(self, "_addSeparatorToMenu:", menu);
            objj_msgSend(item, "setAction:", sel_getUid("_searchFieldClearRecents:"));
            objj_msgSend(item, "setTarget:", self);
            break;
        case CPSearchFieldNoRecentsMenuItemTag:
            if (countOfRecents !== 0)
                continue;
            if (objj_msgSend(menu, "numberOfItems") > 0)
                objj_msgSend(self, "_addSeparatorToMenu:", menu);
            break;
        }
        objj_msgSend(item, "setEnabled:", objj_msgSend(item, "isEnabled") && objj_msgSend(item, "action") != nil && objj_msgSend(item, "target") != nil);
        objj_msgSend(menu, "addItem:", item);
    }
    objj_msgSend(menu, "setDelegate:", self);
    self._searchMenu = menu;
}
,["void"]), new objj_method(sel_getUid("_addSeparatorToMenu:"), function $CPSearchField___addSeparatorToMenu_(self, _cmd, aMenu)
{
    var separator = objj_msgSend(CPMenuItem, "separatorItem");
    objj_msgSend(separator, "setEnabled:", NO);
    objj_msgSend(aMenu, "addItem:", separator);
}
,["void","CPMenu"]), new objj_method(sel_getUid("menuWillOpen:"), function $CPSearchField__menuWillOpen_(self, _cmd, menu)
{
    self._canResignFirstResponder = NO;
}
,["void","CPMenu"]), new objj_method(sel_getUid("menuDidClose:"), function $CPSearchField__menuDidClose_(self, _cmd, menu)
{
    self._canResignFirstResponder = YES;
    objj_msgSend(self, "becomeFirstResponder");
}
,["void","CPMenu"]), new objj_method(sel_getUid("_showMenu"), function $CPSearchField___showMenu(self, _cmd)
{
    if (self._searchMenu === nil || objj_msgSend(self._searchMenu, "numberOfItems") === 0 || !objj_msgSend(self, "isEnabled"))
        return;
    var aFrame = objj_msgSend(objj_msgSend(self, "superview"), "convertRect:toView:", objj_msgSend(self, "frame"), nil),
        location = CGPointMake(aFrame.origin.x + 10, aFrame.origin.y + aFrame.size.height - 4);
    var anEvent = objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", CPRightMouseDown, location, 0, objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "timestamp"), objj_msgSend(objj_msgSend(self, "window"), "windowNumber"), nil, 1, 1, 0);
    objj_msgSend(self, "selectAll:", nil);
    objj_msgSend(CPMenu, "popUpContextMenu:withEvent:forView:", self._searchMenu, anEvent, self);
}
,["void"]), new objj_method(sel_getUid("_sendPartialString"), function $CPSearchField___sendPartialString(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    objj_msgSend(self._partialStringTimer, "invalidate");
}
,["void"]), new objj_method(sel_getUid("cancelOperation:"), function $CPSearchField__cancelOperation_(self, _cmd, sender)
{
    objj_msgSend(self, "setObjectValue:", "");
    objj_msgSend(self, "textDidChange:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidChangeNotification, self, nil));
    objj_msgSend(self, "_updateCancelButtonVisibility");
}
,["void","id"]), new objj_method(sel_getUid("_searchFieldSearch:"), function $CPSearchField___searchFieldSearch_(self, _cmd, sender)
{
    var searchString = objj_msgSend(objj_msgSend(sender, "title"), "substringFromIndex:", objj_msgSend(RECENT_SEARCH_PREFIX, "length"));
    if (objj_msgSend(sender, "tag") != CPSearchFieldRecentsMenuItemTag)
        objj_msgSend(self, "_addStringToRecentSearches:", searchString);
    objj_msgSend(self, "setObjectValue:", searchString);
    objj_msgSend(self, "_sendPartialString");
    objj_msgSend(self, "selectAll:", nil);
    objj_msgSend(self, "_updateCancelButtonVisibility");
}
,["void","id"]), new objj_method(sel_getUid("_searchFieldClearRecents:"), function $CPSearchField___searchFieldClearRecents_(self, _cmd, sender)
{
    objj_msgSend(self, "setRecentSearches:", objj_msgSend(CPArray, "array"));
    objj_msgSend(self, "_updateSearchMenu");
    objj_msgSend(self, "setStringValue:", "");
    objj_msgSend(self, "_updateCancelButtonVisibility");
}
,["void","id"]), new objj_method(sel_getUid("_registerForAutosaveNotification"), function $CPSearchField___registerForAutosaveNotification(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_updateAutosavedRecents:"), CPAutosavedRecentsChangedNotification, self._recentsAutosaveName);
}
,["void"]), new objj_method(sel_getUid("_deregisterForAutosaveNotification"), function $CPSearchField___deregisterForAutosaveNotification(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPAutosavedRecentsChangedNotification, self._recentsAutosaveName);
}
,["void"]), new objj_method(sel_getUid("_autosaveRecentSearchList"), function $CPSearchField___autosaveRecentSearchList(self, _cmd)
{
    if (self._recentsAutosaveName != nil)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPAutosavedRecentsChangedNotification, self._recentsAutosaveName);
}
,["void"]), new objj_method(sel_getUid("_updateAutosavedRecents:"), function $CPSearchField___updateAutosavedRecents_(self, _cmd, notification)
{
    var name = objj_msgSend(notification, "object");
    objj_msgSend(objj_msgSend(CPUserDefaults, "standardUserDefaults"), "setObject:forKey:", self._recentSearches, name);
}
,["void","id"]), new objj_method(sel_getUid("_loadRecentSearchList"), function $CPSearchField___loadRecentSearchList(self, _cmd)
{
    var name = objj_msgSend(self, "recentsAutosaveName");
    if (name === nil)
        return;
    var list = objj_msgSend(objj_msgSend(CPUserDefaults, "standardUserDefaults"), "objectForKey:", name);
    if (list !== nil)
        self._recentSearches = list;
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPSearchField__defaultThemeClass(self, _cmd)
{
    return "searchfield";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPSearchField__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "image-search", objj_msgSend(CPNull, "null"), "image-find", objj_msgSend(CPNull, "null"), "image-cancel", objj_msgSend(CPNull, "null"), "image-cancel-pressed");
}
,["CPDictionary"]), new objj_method(sel_getUid("_keyboardDelayForPartialSearchString:"), function $CPSearchField___keyboardDelayForPartialSearchString_(self, _cmd, string)
{
    return (6 - MIN(objj_msgSend(string, "length"), 4)) / 10;
}
,["double","CPString"])]);
}var CPRecentsAutosaveNameKey = "CPRecentsAutosaveNameKey",
    CPSendsWholeSearchStringKey = "CPSendsWholeSearchStringKey",
    CPSendsSearchStringImmediatelyKey = "CPSendsSearchStringImmediatelyKey",
    CPMaximumRecentsKey = "CPMaximumRecentsKey",
    CPSearchMenuTemplateKey = "CPSearchMenuTemplateKey";
{
var the_class = objj_getClass("CPSearchField")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPSearchField\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("encodeWithCoder:"), function $CPSearchField__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSend(self._searchButton, "removeFromSuperview");
    objj_msgSend(self._cancelButton, "removeFromSuperview");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "encodeWithCoder:", coder);
    if (self._searchButton)
        objj_msgSend(self, "addSubview:", self._searchButton);
    if (self._cancelButton)
        objj_msgSend(self, "addSubview:", self._cancelButton);
    objj_msgSend(coder, "encodeBool:forKey:", self._sendsWholeSearchString, CPSendsWholeSearchStringKey);
    objj_msgSend(coder, "encodeBool:forKey:", self._sendsSearchStringImmediately, CPSendsSearchStringImmediatelyKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._maximumRecents, CPMaximumRecentsKey);
    if (self._recentsAutosaveName)
        objj_msgSend(coder, "encodeObject:forKey:", self._recentsAutosaveName, CPRecentsAutosaveNameKey);
    if (self._searchMenuTemplate)
        objj_msgSend(coder, "encodeObject:forKey:", self._searchMenuTemplate, CPSearchMenuTemplateKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("initWithCoder:"), function $CPSearchField__initWithCoder_(self, _cmd, coder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSearchField").super_class }, "initWithCoder:", coder))
    {
        objj_msgSend(self, "setRecentsAutosaveName:", objj_msgSend(coder, "decodeObjectForKey:", CPRecentsAutosaveNameKey));
        self._sendsWholeSearchString = objj_msgSend(coder, "decodeBoolForKey:", CPSendsWholeSearchStringKey);
        self._sendsSearchStringImmediately = objj_msgSend(coder, "decodeBoolForKey:", CPSendsSearchStringImmediatelyKey);
        self._maximumRecents = objj_msgSend(coder, "decodeIntForKey:", CPMaximumRecentsKey);
        var template = objj_msgSend(coder, "decodeObjectForKey:", CPSearchMenuTemplateKey);
        if (template)
            objj_msgSend(self, "setSearchMenuTemplate:", template);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CPCoder"])]);
}p;19;CPSecureTextField.jt;366;@STATIC;1.0;i;13;CPTextField.jt;330;objj_executeFile("CPTextField.j", YES);{var the_class = objj_allocateClassPair(CPTextField, "CPSecureTextField"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isSecure"), function $CPSecureTextField__isSecure(self, _cmd)
{
    return YES;
}
,["BOOL"])]);
}p;20;CPSegmentedControl.jt;40817;@STATIC;1.0;I;20;Foundation/CPArray.ji;11;CPControl.ji;20;CPWindow_Constants.ji;21;_CPImageAndTextView.jt;40705;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("CPControl.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("_CPImageAndTextView.j", YES);CPSegmentSwitchTrackingSelectOne = 0;
CPSegmentSwitchTrackingSelectAny = 1;
CPSegmentSwitchTrackingMomentary = 2;
{var the_class = objj_allocateClassPair(CPControl, "CPSegmentedControl"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_segments"), new objj_ivar("_themeStates"), new objj_ivar("_selectedSegment"), new objj_ivar("_segmentStyle"), new objj_ivar("_trackingMode"), new objj_ivar("_trackingSegment"), new objj_ivar("_trackingHighlighted")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPSegmentedControl__initWithFrame_(self, _cmd, aRect)
{
    self._segments = [];
    self._themeStates = [];
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "initWithFrame:", aRect);
    if (self)
    {
        self._selectedSegment = -1;
        self._trackingMode = CPSegmentSwitchTrackingSelectOne;
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"), function $CPSegmentedControl__bind_toObject_withKeyPath_options_(self, _cmd, aBinding, anObject, aKeyPath, options)
{
    if (objj_msgSend(objj_msgSend(self, "class"), "_isSelectionBinding:", aBinding) && self._trackingMode !== CPSegmentSwitchTrackingSelectOne)
        CPLog.warn("Binding " + aBinding + " needs CPSegmentSwitchTrackingSelectOne tracking mode");
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "bind:toObject:withKeyPath:options:", aBinding, anObject, aKeyPath, options);
}
,["void","CPString","id","CPString","CPDictionary"]), new objj_method(sel_getUid("_reverseSetBinding"), function $CPSegmentedControl___reverseSetBinding(self, _cmd)
{
    objj_msgSend(_CPSegmentedControlBinder, "reverseSetValueForObject:", self);
}
,["void"]), new objj_method(sel_getUid("selectedTag"), function $CPSegmentedControl__selectedTag(self, _cmd)
{
    return objj_msgSend(self._segments[self._selectedSegment], "tag");
}
,["int"]), new objj_method(sel_getUid("setSegmentCount:"), function $CPSegmentedControl__setSegmentCount_(self, _cmd, aCount)
{
    if (self._segments.length == aCount)
        return;
    var height = CGRectGetHeight(objj_msgSend(self, "bounds")),
        dividersBefore = MAX(0, self._segments.length - 1),
        dividersAfter = MAX(0, aCount - 1);
    if (self._segments.length < aCount)
    {
        for (var index = self._segments.length; index < aCount; ++index)
        {
            self._segments[index] = objj_msgSend(objj_msgSend(_CPSegmentItem, "alloc"), "init");
            self._themeStates[index] = CPThemeStateNormal;
        }
    }
    else if (aCount < self._segments.length)
    {
        self._segments.length = aCount;
        self._themeStates.length = aCount;
    }
    if (self._selectedSegment >= self._segments.length)
        self._selectedSegment = -1;
    var thickness = objj_msgSend(self, "currentValueForThemeAttribute:", "divider-thickness"),
        frame = objj_msgSend(self, "frame"),
        widthOfAllSegments = 0,
        dividerExtraSpace = (objj_msgSend(self._segments, "count") - 1) * thickness;
    for (var i = 0; i < objj_msgSend(self._segments, "count"); i++)
        widthOfAllSegments += objj_msgSend(self._segments[i], "width");
    objj_msgSend(self, "setFrameSize:", CGSizeMake(widthOfAllSegments + dividerExtraSpace, frame.size.height));
    objj_msgSend(self, "tileWithChangedSegment:", 0);
}
,["void","unsigned"]), new objj_method(sel_getUid("segmentCount"), function $CPSegmentedControl__segmentCount(self, _cmd)
{
    return self._segments.length;
}
,["unsigned"]), new objj_method(sel_getUid("setSelectedSegment:"), function $CPSegmentedControl__setSelectedSegment_(self, _cmd, aSegment)
{
    objj_msgSend(self, "setSelected:forSegment:", YES, aSegment);
}
,["void","unsigned"]), new objj_method(sel_getUid("selectedSegment"), function $CPSegmentedControl__selectedSegment(self, _cmd)
{
    return self._selectedSegment;
}
,["unsigned"]), new objj_method(sel_getUid("selectSegmentWithTag:"), function $CPSegmentedControl__selectSegmentWithTag_(self, _cmd, aTag)
{
    var index = 0;
    for (; index < self._segments.length; ++index)
        if (self._segments[index].tag == aTag)
        {
            objj_msgSend(self, "setSelectedSegment:", index);
            return YES;
        }
    return NO;
}
,["BOOL","int"]), new objj_method(sel_getUid("_selectSegmentWithLabel:"), function $CPSegmentedControl___selectSegmentWithLabel_(self, _cmd, aLabel)
{
    var index = 0;
    for (; index < self._segments.length; ++index)
        if (self._segments[index].label == aLabel)
        {
            objj_msgSend(self, "setSelectedSegment:", index);
            return YES;
        }
    return NO;
}
,["BOOL","CPString"]), new objj_method(sel_getUid("isTracking"), function $CPSegmentedControl__isTracking(self, _cmd)
{
}
,["BOOL"]), new objj_method(sel_getUid("setTrackingMode:"), function $CPSegmentedControl__setTrackingMode_(self, _cmd, aTrackingMode)
{
    if (self._trackingMode == aTrackingMode)
        return;
    self._trackingMode = aTrackingMode;
    if (self._trackingMode == CPSegmentSwitchTrackingSelectOne)
    {
        var index = 0,
            selected = NO;
        for (; index < self._segments.length; ++index)
            if (objj_msgSend(self._segments[index], "selected"))
                if (selected)
                    objj_msgSend(self, "setSelected:forSegment:", NO, index);
                else
                    selected = YES;
    }
    else if (self._trackingMode == CPSegmentSwitchTrackingMomentary)
    {
        var index = 0;
        for (; index < self._segments.length; ++index)
            if (objj_msgSend(self._segments[index], "selected"))
                objj_msgSend(self, "setSelected:forSegment:", NO, index);
    }
}
,["void","CPSegmentSwitchTracking"]), new objj_method(sel_getUid("trackingMode"), function $CPSegmentedControl__trackingMode(self, _cmd)
{
    return self._trackingMode;
}
,["CPSegmentSwitchTracking"]), new objj_method(sel_getUid("setWidth:forSegment:"), function $CPSegmentedControl__setWidth_forSegment_(self, _cmd, aWidth, aSegment)
{
    objj_msgSend(self._segments[aSegment], "setWidth:", aWidth);
    objj_msgSend(self, "tileWithChangedSegment:", aSegment);
}
,["void","float","unsigned"]), new objj_method(sel_getUid("widthForSegment:"), function $CPSegmentedControl__widthForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "width");
}
,["float","unsigned"]), new objj_method(sel_getUid("setImage:forSegment:"), function $CPSegmentedControl__setImage_forSegment_(self, _cmd, anImage, aSegment)
{
    objj_msgSend(self._segments[aSegment], "setImage:", anImage);
    objj_msgSend(self, "tileWithChangedSegment:", aSegment);
}
,["void","CPImage","unsigned"]), new objj_method(sel_getUid("imageForSegment:"), function $CPSegmentedControl__imageForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "image");
}
,["CPImage","unsigned"]), new objj_method(sel_getUid("setLabel:forSegment:"), function $CPSegmentedControl__setLabel_forSegment_(self, _cmd, aLabel, aSegment)
{
    objj_msgSend(self._segments[aSegment], "setLabel:", aLabel);
    objj_msgSend(self, "tileWithChangedSegment:", aSegment);
}
,["void","CPString","unsigned"]), new objj_method(sel_getUid("labelForSegment:"), function $CPSegmentedControl__labelForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "label");
}
,["CPString","unsigned"]), new objj_method(sel_getUid("setMenu:forSegment:"), function $CPSegmentedControl__setMenu_forSegment_(self, _cmd, aMenu, aSegment)
{
    objj_msgSend(self._segments[aSegment], "setMenu:", aMenu);
}
,["void","CPMenu","unsigned"]), new objj_method(sel_getUid("menuForSegment:"), function $CPSegmentedControl__menuForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "menu");
}
,["CPMenu","unsigned"]), new objj_method(sel_getUid("setSelected:forSegment:"), function $CPSegmentedControl__setSelected_forSegment_(self, _cmd, isSelected, aSegment)
{
    var segment = self._segments[aSegment];
    if (objj_msgSend(segment, "selected") == isSelected)
        return;
    objj_msgSend(segment, "setSelected:", isSelected);
    self._themeStates[aSegment] = isSelected ? CPThemeStateSelected : CPThemeStateNormal;
    if (isSelected)
    {
        var oldSelectedSegment = self._selectedSegment;
        self._selectedSegment = aSegment;
        if (self._trackingMode == CPSegmentSwitchTrackingSelectOne && oldSelectedSegment != aSegment && oldSelectedSegment != -1)
        {
            objj_msgSend(self._segments[oldSelectedSegment], "setSelected:", NO);
            self._themeStates[oldSelectedSegment] = CPThemeStateNormal;
            objj_msgSend(self, "drawSegmentBezel:highlight:", oldSelectedSegment, NO);
        }
    }
    if (self._trackingMode != CPSegmentSwitchTrackingMomentary)
        objj_msgSend(self, "drawSegmentBezel:highlight:", aSegment, NO);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","BOOL","unsigned"]), new objj_method(sel_getUid("isSelectedForSegment:"), function $CPSegmentedControl__isSelectedForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "selected");
}
,["BOOL","unsigned"]), new objj_method(sel_getUid("setEnabled:forSegment:"), function $CPSegmentedControl__setEnabled_forSegment_(self, _cmd, shouldBeEnabled, aSegment)
{
    if (objj_msgSend(self._segments[aSegment], "enabled") === shouldBeEnabled)
        return;
    objj_msgSend(self._segments[aSegment], "setEnabled:", shouldBeEnabled);
    if (shouldBeEnabled)
        self._themeStates[aSegment] &= ~CPThemeStateDisabled;
    else
        self._themeStates[aSegment] |= CPThemeStateDisabled;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","BOOL","unsigned"]), new objj_method(sel_getUid("isEnabledForSegment:"), function $CPSegmentedControl__isEnabledForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "enabled");
}
,["BOOL","unsigned"]), new objj_method(sel_getUid("setTag:forSegment:"), function $CPSegmentedControl__setTag_forSegment_(self, _cmd, aTag, aSegment)
{
    objj_msgSend(self._segments[aSegment], "setTag:", aTag);
}
,["void","int","unsigned"]), new objj_method(sel_getUid("tagForSegment:"), function $CPSegmentedControl__tagForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self._segments[aSegment], "tag");
}
,["int","unsigned"]), new objj_method(sel_getUid("drawSegmentBezel:highlight:"), function $CPSegmentedControl__drawSegmentBezel_highlight_(self, _cmd, aSegment, shouldHighlight)
{
    if (shouldHighlight)
        self._themeStates[aSegment] |= CPThemeStateHighlighted;
    else
        self._themeStates[aSegment] &= ~CPThemeStateHighlighted;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","int","BOOL"]), new objj_method(sel_getUid("_leftOffsetForSegment:"), function $CPSegmentedControl___leftOffsetForSegment_(self, _cmd, segment)
{
    var bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset");
    if (segment == 0)
        return bezelInset.left;
    var thickness = objj_msgSend(self, "currentValueForThemeAttribute:", "divider-thickness");
    return objj_msgSend(self, "_leftOffsetForSegment:", segment - 1) + objj_msgSend(self, "widthForSegment:", segment - 1) + thickness;
}
,["float","unsigned"]), new objj_method(sel_getUid("_indexOfLastSegment"), function $CPSegmentedControl___indexOfLastSegment(self, _cmd)
{
    var lastSegmentIndex = objj_msgSend(self._segments, "count") - 1;
    if (lastSegmentIndex < 0)
        lastSegmentIndex = 0;
    return lastSegmentIndex;
}
,["unsigned"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPSegmentedControl__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    var height = objj_msgSend(self, "currentValueForThemeAttribute:", "default-height"),
        contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset"),
        bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset"),
        bounds = objj_msgSend(self, "bounds");
    if (aName === "left-segment-bezel")
    {
        return CGRectMake(bezelInset.left, bezelInset.top, contentInset.left, height);
    }
    else if (aName === "right-segment-bezel")
    {
        return CGRectMake(CGRectGetWidth(objj_msgSend(self, "bounds")) - contentInset.right, bezelInset.top, contentInset.right, height);
    }
    else if (aName.indexOf("segment-bezel") === 0)
    {
        var segment = parseInt(aName.substring("segment-bezel-".length), 10),
            frame = CGRectCreateCopy(objj_msgSend(self._segments[segment], "frame"));
        if (segment === 0)
        {
            frame.origin.x += contentInset.left;
            frame.size.width -= contentInset.left;
        }
        if (segment === self._segments.length - 1)
            frame.size.width = CGRectGetWidth(objj_msgSend(self, "bounds")) - contentInset.right - frame.origin.x;
        return frame;
    }
    else if (aName.indexOf("divider-bezel") === 0)
    {
        var segment = parseInt(aName.substring("divider-bezel-".length), 10),
            width = objj_msgSend(self, "widthForSegment:", segment),
            left = objj_msgSend(self, "_leftOffsetForSegment:", segment),
            thickness = objj_msgSend(self, "currentValueForThemeAttribute:", "divider-thickness");
        return CGRectMake(left + width, bezelInset.top, thickness, height);
    }
    else if (aName.indexOf("segment-content") === 0)
    {
        var segment = parseInt(aName.substring("segment-content-".length), 10);
        return objj_msgSend(self, "contentFrameForSegment:", segment);
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPSegmentedControl__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (objj_msgSend(aName, "hasPrefix:", "segment-content"))
        return objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMakeZero());
    return objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPSegmentedControl__layoutSubviews(self, _cmd)
{
    if (self._segments.length <= 0)
        return;
    var themeState = self._themeStates[0];
    themeState |= self._themeState & CPThemeStateDisabled;
    var leftCapColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "left-segment-bezel-color", themeState),
        leftBezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "left-segment-bezel", CPWindowBelow, nil);
    objj_msgSend(leftBezelView, "setBackgroundColor:", leftCapColor);
    var themeState = self._themeStates[self._themeStates.length - 1];
    themeState |= self._themeState & CPThemeStateDisabled;
    var rightCapColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "right-segment-bezel-color", themeState),
        rightBezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "right-segment-bezel", CPWindowBelow, nil);
    objj_msgSend(rightBezelView, "setBackgroundColor:", rightCapColor);
    for (var i = 0, count = self._themeStates.length; i < count; i++)
    {
        var themeState = self._themeStates[i];
        themeState |= self._themeState & CPThemeStateDisabled;
        var bezelColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "center-segment-bezel-color", themeState),
            bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "segment-bezel-" + i, CPWindowBelow, nil);
        objj_msgSend(bezelView, "setBackgroundColor:", bezelColor);
        var segment = self._segments[i],
            contentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "segment-content-" + i, CPWindowAbove, "segment-bezel-" + i);
        objj_msgSend(contentView, "setText:", objj_msgSend(segment, "label"));
        objj_msgSend(contentView, "setImage:", objj_msgSend(segment, "image"));
        objj_msgSend(contentView, "setFont:", objj_msgSend(self, "valueForThemeAttribute:inState:", "font", themeState));
        objj_msgSend(contentView, "setTextColor:", objj_msgSend(self, "valueForThemeAttribute:inState:", "text-color", themeState));
        objj_msgSend(contentView, "setAlignment:", objj_msgSend(self, "valueForThemeAttribute:inState:", "alignment", themeState));
        objj_msgSend(contentView, "setVerticalAlignment:", objj_msgSend(self, "valueForThemeAttribute:inState:", "vertical-alignment", themeState));
        objj_msgSend(contentView, "setLineBreakMode:", objj_msgSend(self, "valueForThemeAttribute:inState:", "line-break-mode", themeState));
        objj_msgSend(contentView, "setTextShadowColor:", objj_msgSend(self, "valueForThemeAttribute:inState:", "text-shadow-color", themeState));
        objj_msgSend(contentView, "setTextShadowOffset:", objj_msgSend(self, "valueForThemeAttribute:inState:", "text-shadow-offset", themeState));
        objj_msgSend(contentView, "setImageScaling:", objj_msgSend(self, "valueForThemeAttribute:inState:", "image-scaling", themeState));
        if (objj_msgSend(segment, "image") && objj_msgSend(segment, "label"))
            objj_msgSend(contentView, "setImagePosition:", objj_msgSend(self, "valueForThemeAttribute:inState:", "image-position", themeState));
        else if (objj_msgSend(segment, "image"))
            objj_msgSend(contentView, "setImagePosition:", CPImageOnly);
        if (i == count - 1)
            continue;
        var borderState = self._themeStates[i] | self._themeStates[i + 1];
        borderState = borderState & CPThemeStateSelected & ~CPThemeStateHighlighted ? CPThemeStateSelected : CPThemeStateNormal;
        borderState |= self._themeState & CPThemeStateDisabled;
        var borderColor = objj_msgSend(self, "valueForThemeAttribute:inState:", "divider-bezel-color", borderState),
            borderView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "divider-bezel-" + i, CPWindowBelow, nil);
        objj_msgSend(borderView, "setBackgroundColor:", borderColor);
    }
}
,["void"]), new objj_method(sel_getUid("drawSegment:highlight:"), function $CPSegmentedControl__drawSegment_highlight_(self, _cmd, aSegment, shouldHighlight)
{
}
,["void","int","BOOL"]), new objj_method(sel_getUid("tileWithChangedSegment:"), function $CPSegmentedControl__tileWithChangedSegment_(self, _cmd, aSegment)
{
    if (aSegment >= self._segments.length)
        return;
    var segment = self._segments[aSegment],
        segmentWidth = objj_msgSend(segment, "width"),
        themeState = self._themeStates[aSegment] | self._themeState & CPThemeStateDisabled,
        contentInset = objj_msgSend(self, "valueForThemeAttribute:inState:", "content-inset", themeState),
        font = objj_msgSend(self, "font");
    if (!segmentWidth)
    {
        if (objj_msgSend(segment, "image") && objj_msgSend(segment, "label"))
            segmentWidth = objj_msgSend(objj_msgSend(segment, "label"), "sizeWithFont:", font).width + objj_msgSend(objj_msgSend(segment, "image"), "size").width + contentInset.left + contentInset.right;
        else if (segment.image)
            segmentWidth = objj_msgSend(objj_msgSend(segment, "image"), "size").width + contentInset.left + contentInset.right;
        else if (segment.label)
            segmentWidth = objj_msgSend(objj_msgSend(segment, "label"), "sizeWithFont:", font).width + contentInset.left + contentInset.right;
        else
            segmentWidth = 0.0;
    }
    var delta = segmentWidth - CGRectGetWidth(objj_msgSend(segment, "frame"));
    if (!delta)
    {
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
        return;
    }
    var frame = objj_msgSend(self, "frame");
    objj_msgSend(self, "setFrameSize:", CGSizeMake(CGRectGetWidth(frame) + delta, CGRectGetHeight(frame)));
    objj_msgSend(segment, "setWidth:", segmentWidth);
    objj_msgSend(segment, "setFrame:", objj_msgSend(self, "frameForSegment:", aSegment));
    var index = aSegment + 1;
    for (; index < self._segments.length; ++index)
    {
        objj_msgSend(self._segments[index], "frame").origin.x += delta;
        objj_msgSend(self, "drawSegmentBezel:highlight:", index, NO);
        objj_msgSend(self, "drawSegment:highlight:", index, NO);
    }
    objj_msgSend(self, "drawSegmentBezel:highlight:", aSegment, NO);
    objj_msgSend(self, "drawSegment:highlight:", aSegment, NO);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","unsigned"]), new objj_method(sel_getUid("frameForSegment:"), function $CPSegmentedControl__frameForSegment_(self, _cmd, aSegment)
{
    return objj_msgSend(self, "bezelFrameForSegment:", aSegment);
}
,["CGRect","unsigned"]), new objj_method(sel_getUid("bezelFrameForSegment:"), function $CPSegmentedControl__bezelFrameForSegment_(self, _cmd, aSegment)
{
    var height = objj_msgSend(self, "currentValueForThemeAttribute:", "default-height"),
        bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset"),
        width = objj_msgSend(self, "widthForSegment:", aSegment),
        left = objj_msgSend(self, "_leftOffsetForSegment:", aSegment);
    return CGRectMake(left, bezelInset.top, width, height);
}
,["CGRect","unsigned"]), new objj_method(sel_getUid("contentFrameForSegment:"), function $CPSegmentedControl__contentFrameForSegment_(self, _cmd, aSegment)
{
    var height = objj_msgSend(self, "currentValueForThemeAttribute:", "default-height"),
        contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset"),
        width = objj_msgSend(self, "widthForSegment:", aSegment),
        left = objj_msgSend(self, "_leftOffsetForSegment:", aSegment);
    return CGRectMake(left + contentInset.left, contentInset.top, width - contentInset.left - contentInset.right, height - contentInset.top - contentInset.bottom);
}
,["CGRect","unsigned"]), new objj_method(sel_getUid("testSegment:"), function $CPSegmentedControl__testSegment_(self, _cmd, aPoint)
{
    var location = objj_msgSend(self, "convertPoint:fromView:", aPoint, nil),
        count = self._segments.length;
    while (count--)
        if (CGRectContainsPoint(objj_msgSend(self._segments[count], "frame"), aPoint))
            return count;
    if (self._segments.length)
    {
        var adjustedLastFrame = CGRectCreateCopy(objj_msgSend(self._segments[self._segments.length - 1], "frame"));
        adjustedLastFrame.size.width = CGRectGetWidth(objj_msgSend(self, "bounds")) - adjustedLastFrame.origin.x;
        if (CGRectContainsPoint(adjustedLastFrame, aPoint))
            return self._segments.length - 1;
    }
    return -1;
}
,["unsigned","CGPoint"]), new objj_method(sel_getUid("mouseDown:"), function $CPSegmentedControl__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "trackSegment:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $CPSegmentedControl__mouseUp_(self, _cmd, anEvent)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("trackSegment:"), function $CPSegmentedControl__trackSegment_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type"),
        location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    if (type == CPLeftMouseUp)
    {
        if (self._trackingSegment == -1)
            return;
        if (self._trackingSegment === objj_msgSend(self, "testSegment:", location))
        {
            if (self._trackingMode == CPSegmentSwitchTrackingSelectAny)
            {
                objj_msgSend(self, "setSelected:forSegment:", !objj_msgSend(self, "isSelectedForSegment:", self._trackingSegment), self._trackingSegment);
                self._selectedSegment = self._trackingSegment;
            }
            else
                objj_msgSend(self, "setSelected:forSegment:", YES, self._trackingSegment);
            objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
            if (self._trackingMode == CPSegmentSwitchTrackingMomentary)
            {
                objj_msgSend(self, "setSelected:forSegment:", NO, self._trackingSegment);
                self._selectedSegment = -1;
            }
        }
        objj_msgSend(self, "drawSegmentBezel:highlight:", self._trackingSegment, NO);
        self._trackingSegment = -1;
        return;
    }
    if (type == CPLeftMouseDown)
    {
        var trackingSegment = objj_msgSend(self, "testSegment:", location);
        if (trackingSegment > -1 && objj_msgSend(self, "isEnabledForSegment:", trackingSegment))
        {
            self._trackingHighlighted = YES;
            self._trackingSegment = trackingSegment;
            objj_msgSend(self, "drawSegmentBezel:highlight:", self._trackingSegment, YES);
        }
    }
    else if (type == CPLeftMouseDragged)
    {
        if (self._trackingSegment == -1)
            return;
        var highlighted = objj_msgSend(self, "testSegment:", location) === self._trackingSegment;
        if (highlighted != self._trackingHighlighted)
        {
            self._trackingHighlighted = highlighted;
            objj_msgSend(self, "drawSegmentBezel:highlight:", self._trackingSegment, self._trackingHighlighted);
        }
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackSegment:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setFont:"), function $CPSegmentedControl__setFont_(self, _cmd, aFont)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "setFont:", aFont);
    objj_msgSend(self, "tileWithChangedSegment:", 0);
}
,["void","CPFont"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPSegmentedControl__defaultThemeClass(self, _cmd)
{
    return "segmented-control";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPSegmentedControl__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CPCenterTextAlignment, "alignment", CPCenterVerticalTextAlignment, "vertical-alignment", CPImageLeft, "image-position", CPImageScaleNone, "image-scaling", CGInsetMakeZero(), "bezel-inset", CGInsetMakeZero(), "content-inset", objj_msgSend(CPNull, "null"), "left-segment-bezel-color", objj_msgSend(CPNull, "null"), "right-segment-bezel-color", objj_msgSend(CPNull, "null"), "center-segment-bezel-color", objj_msgSend(CPNull, "null"), "divider-bezel-color", 1.0, "divider-thickness", 24.0, "default-height");
}
,["id"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPSegmentedControl___binderClassForBinding_(self, _cmd, aBinding)
{
    if (objj_msgSend(self, "_isSelectionBinding:", aBinding))
        return objj_msgSend(_CPSegmentedControlBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPSegmentedControl").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("_isSelectionBinding:"), function $CPSegmentedControl___isSelectionBinding_(self, _cmd, aBinding)
{
    return aBinding === CPSelectedIndexBinding || aBinding === CPSelectedLabelBinding || aBinding === CPSelectedTagBinding;
}
,["BOOL","CPString"])]);
}var CPSegmentedControlSegmentsKey = "CPSegmentedControlSegmentsKey",
    CPSegmentedControlSelectedKey = "CPSegmentedControlSelectedKey",
    CPSegmentedControlSegmentStyleKey = "CPSegmentedControlSegmentStyleKey",
    CPSegmentedControlTrackingModeKey = "CPSegmentedControlTrackingModeKey";
{
var the_class = objj_getClass("CPSegmentedControl")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPSegmentedControl\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPSegmentedControl__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        var frame = objj_msgSend(self, "frame"),
            originalWidth = frame.size.width;
        frame.size.width = 0;
        objj_msgSend(self, "setFrame:", frame);
        self._segments = objj_msgSend(aCoder, "decodeObjectForKey:", CPSegmentedControlSegmentsKey);
        self._segmentStyle = objj_msgSend(aCoder, "decodeIntForKey:", CPSegmentedControlSegmentStyleKey);
        self._themeStates = [];
        if (objj_msgSend(aCoder, "containsValueForKey:", CPSegmentedControlSelectedKey))
            self._selectedSegment = objj_msgSend(aCoder, "decodeIntForKey:", CPSegmentedControlSelectedKey);
        else
            self._selectedSegment = -1;
        if (objj_msgSend(aCoder, "containsValueForKey:", CPSegmentedControlTrackingModeKey))
            self._trackingMode = objj_msgSend(aCoder, "decodeIntForKey:", CPSegmentedControlTrackingModeKey);
        else
            self._trackingMode = CPSegmentSwitchTrackingSelectOne;
        for (var i = 0; i < self._segments.length; i++)
        {
            self._themeStates[i] = objj_msgSend(self._segments[i], "selected") ? CPThemeStateSelected : CPThemeStateNormal;
            objj_msgSend(self, "tileWithChangedSegment:", i);
        }
        var difference = MAX(originalWidth - objj_msgSend(self, "frame").size.width, 0.0),
            remainingWidth = FLOOR(difference / self._segments.length);
        for (var i = 0; i < self._segments.length; i++)
            objj_msgSend(self, "setWidth:forSegment:", objj_msgSend(self._segments[i], "width") + remainingWidth, i);
        objj_msgSend(self, "tileWithChangedSegment:", 0);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPSegmentedControl__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSegmentedControl").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._segments, CPSegmentedControlSegmentsKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._selectedSegment, CPSegmentedControlSelectedKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._segmentStyle, CPSegmentedControlSegmentStyleKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._trackingMode, CPSegmentedControlTrackingModeKey);
}
,["void","CPCoder"])]);
}var CPSegmentedControlBindersMap = {},
    CPSegmentedControlNoSelectionPlaceholder = "CPSegmentedControlNoSelectionPlaceholder";
{var the_class = objj_allocateClassPair(CPBinder, "_CPSegmentedControlBinder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_selectionBinding")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("selectionBinding"), function $_CPSegmentedControlBinder__selectionBinding(self, _cmd)
{
    return self._selectionBinding;
}
,["CPString"]), new objj_method(sel_getUid("initWithBinding:name:to:keyPath:options:from:"), function $_CPSegmentedControlBinder__initWithBinding_name_to_keyPath_options_from_(self, _cmd, aBinding, aName, aDestination, aKeyPath, options, aSource)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPSegmentedControlBinder").super_class }, "initWithBinding:name:to:keyPath:options:from:", aBinding, aName, aDestination, aKeyPath, options, aSource);
    if (self)
    {
        CPSegmentedControlBindersMap[objj_msgSend(aSource, "UID")] = self;
        self._selectionBinding = aName;
    }
    return self;
}
,["id","CPString","CPString","id","CPString","CPDictionary","id"]), new objj_method(sel_getUid("_updatePlaceholdersWithOptions:"), function $_CPSegmentedControlBinder___updatePlaceholdersWithOptions_(self, _cmd, options)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPSegmentedControlBinder").super_class }, "_updatePlaceholdersWithOptions:", options);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPSegmentedControlNoSelectionPlaceholder, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPSegmentedControlNoSelectionPlaceholder, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPSegmentedControlNoSelectionPlaceholder, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", CPSegmentedControlNoSelectionPlaceholder, CPNullMarker, YES);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPSegmentedControlBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    if (aValue == CPSegmentedControlNoSelectionPlaceholder)
        objj_msgSend(self._source, "setSelected:forSegment:", NO, objj_msgSend(self._source, "selectedSegment"));
    else
        objj_msgSend(self, "setValue:forBinding:", aValue, aBinding);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPSegmentedControlBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    if (aBinding == CPSelectedIndexBinding)
        objj_msgSend(self._source, "setSelectedSegment:", aValue);
    else if (aBinding == CPSelectedTagBinding)
        objj_msgSend(self._source, "selectSegmentWithTag:", aValue);
    else if (aBinding == CPSelectedLabelBinding)
        objj_msgSend(self._source, "_selectSegmentWithLabel:", aValue);
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForBinding:"), function $_CPSegmentedControlBinder__valueForBinding_(self, _cmd, aBinding)
{
    var selectedIndex = objj_msgSend(self._source, "selectedSegment");
    if (aBinding == CPSelectedIndexBinding)
        return selectedIndex;
    else if (aBinding == CPSelectedTagBinding)
        return objj_msgSend(self._source, "tagForSegment:", selectedIndex);
    else if (aBinding == CPSelectedLabelBinding)
        return objj_msgSend(self._source, "labelForSegment:", selectedIndex);
}
,["id","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("reverseSetValueForObject:"), function $_CPSegmentedControlBinder__reverseSetValueForObject_(self, _cmd, aSource)
{
    var binder = CPSegmentedControlBindersMap[objj_msgSend(aSource, "UID")];
    objj_msgSend(binder, "reverseSetValueFor:", objj_msgSend(binder, "selectionBinding"));
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPSegmentItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("image"), new objj_ivar("label"), new objj_ivar("menu"), new objj_ivar("selected"), new objj_ivar("enabled"), new objj_ivar("tag"), new objj_ivar("width"), new objj_ivar("frame")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("image"), function $_CPSegmentItem__image(self, _cmd)
{
    return self.image;
}
,["CPImage"]), new objj_method(sel_getUid("setImage:"), function $_CPSegmentItem__setImage_(self, _cmd, newValue)
{
    self.image = newValue;
}
,["void","CPImage"]), new objj_method(sel_getUid("label"), function $_CPSegmentItem__label(self, _cmd)
{
    return self.label;
}
,["CPString"]), new objj_method(sel_getUid("setLabel:"), function $_CPSegmentItem__setLabel_(self, _cmd, newValue)
{
    self.label = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("menu"), function $_CPSegmentItem__menu(self, _cmd)
{
    return self.menu;
}
,["CPMenu"]), new objj_method(sel_getUid("setMenu:"), function $_CPSegmentItem__setMenu_(self, _cmd, newValue)
{
    self.menu = newValue;
}
,["void","CPMenu"]), new objj_method(sel_getUid("selected"), function $_CPSegmentItem__selected(self, _cmd)
{
    return self.selected;
}
,["BOOL"]), new objj_method(sel_getUid("setSelected:"), function $_CPSegmentItem__setSelected_(self, _cmd, newValue)
{
    self.selected = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("enabled"), function $_CPSegmentItem__enabled(self, _cmd)
{
    return self.enabled;
}
,["BOOL"]), new objj_method(sel_getUid("setEnabled:"), function $_CPSegmentItem__setEnabled_(self, _cmd, newValue)
{
    self.enabled = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("tag"), function $_CPSegmentItem__tag(self, _cmd)
{
    return self.tag;
}
,["int"]), new objj_method(sel_getUid("setTag:"), function $_CPSegmentItem__setTag_(self, _cmd, newValue)
{
    self.tag = newValue;
}
,["void","int"]), new objj_method(sel_getUid("width"), function $_CPSegmentItem__width(self, _cmd)
{
    return self.width;
}
,["int"]), new objj_method(sel_getUid("setWidth:"), function $_CPSegmentItem__setWidth_(self, _cmd, newValue)
{
    self.width = newValue;
}
,["void","int"]), new objj_method(sel_getUid("frame"), function $_CPSegmentItem__frame(self, _cmd)
{
    return self.frame;
}
,["CGRect"]), new objj_method(sel_getUid("setFrame:"), function $_CPSegmentItem__setFrame_(self, _cmd, newValue)
{
    self.frame = newValue;
}
,["void","CGRect"]), new objj_method(sel_getUid("init"), function $_CPSegmentItem__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPSegmentItem").super_class }, "init"))
    {
        self.image = nil;
        self.label = "";
        self.menu = nil;
        self.selected = NO;
        self.enabled = YES;
        self.tag = -1;
        self.width = 0;
        self.frame = CGRectMakeZero();
    }
    return self;
}
,["id"])]);
}var CPSegmentItemImageKey = "CPSegmentItemImageKey",
    CPSegmentItemLabelKey = "CPSegmentItemLabelKey",
    CPSegmentItemMenuKey = "CPSegmentItemMenuKey",
    CPSegmentItemSelectedKey = "CPSegmentItemSelectedKey",
    CPSegmentItemEnabledKey = "CPSegmentItemEnabledKey",
    CPSegmentItemTagKey = "CPSegmentItemTagKey",
    CPSegmentItemWidthKey = "CPSegmentItemWidthKey";
{
var the_class = objj_getClass("_CPSegmentItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPSegmentItem\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPSegmentItem__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPSegmentItem").super_class }, "init");
    if (self)
    {
        self.image = objj_msgSend(aCoder, "decodeObjectForKey:", CPSegmentItemImageKey);
        self.label = objj_msgSend(aCoder, "decodeObjectForKey:", CPSegmentItemLabelKey);
        self.menu = objj_msgSend(aCoder, "decodeObjectForKey:", CPSegmentItemMenuKey);
        self.selected = objj_msgSend(aCoder, "decodeBoolForKey:", CPSegmentItemSelectedKey);
        self.enabled = objj_msgSend(aCoder, "decodeBoolForKey:", CPSegmentItemEnabledKey);
        self.tag = objj_msgSend(aCoder, "decodeIntForKey:", CPSegmentItemTagKey);
        self.width = objj_msgSend(aCoder, "decodeFloatForKey:", CPSegmentItemWidthKey);
        self.frame = CGRectMakeZero();
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPSegmentItem__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self.image, CPSegmentItemImageKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self.label, CPSegmentItemLabelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self.menu, CPSegmentItemMenuKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self.selected, CPSegmentItemSelectedKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self.enabled, CPSegmentItemEnabledKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self.tag, CPSegmentItemTagKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self.width, CPSegmentItemWidthKey);
}
,["void","CPCoder"])]);
}p;10;CPShadow.jt;2613;@STATIC;1.0;I;21;Foundation/CPObject.jt;2568;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPShadow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_offset"), new objj_ivar("_blurRadius"), new objj_ivar("_color")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("shadowOffset"), function $CPShadow__shadowOffset(self, _cmd)
{
    return self._offset;
}
,["CGSize"]), new objj_method(sel_getUid("setShadowOffset:"), function $CPShadow__setShadowOffset_(self, _cmd, newValue)
{
    self._offset = newValue;
}
,["void","CGSize"]), new objj_method(sel_getUid("shadowBlurRadius"), function $CPShadow__shadowBlurRadius(self, _cmd)
{
    return self._blurRadius;
}
,["float"]), new objj_method(sel_getUid("setShadowBlurRadius:"), function $CPShadow__setShadowBlurRadius_(self, _cmd, newValue)
{
    self._blurRadius = newValue;
}
,["void","float"]), new objj_method(sel_getUid("shadowColor"), function $CPShadow__shadowColor(self, _cmd)
{
    return self._color;
}
,["CPColor"]), new objj_method(sel_getUid("setShadowColor:"), function $CPShadow__setShadowColor_(self, _cmd, newValue)
{
    self._color = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("_initWithOffset:blurRadius:color:"), function $CPShadow___initWithOffset_blurRadius_color_(self, _cmd, anOffset, aBlurRadius, aColor)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPShadow").super_class }, "init");
    if (self)
    {
        self._offset = anOffset;
        self._blurRadius = aBlurRadius;
        self._color = aColor;
    }
    return self;
}
,["id","CGSize","float","CPColor"]), new objj_method(sel_getUid("set"), function $CPShadow__set(self, _cmd)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetShadowWithColor(context, self._offset, self._blurRadius, self._color);
}
,["void"]), new objj_method(sel_getUid("cssString"), function $CPShadow__cssString(self, _cmd)
{
    return objj_msgSend(self._color, "cssString") + " " + ROUND(self._offset.width) + "px " + ROUND(self._offset.height) + "px " + ROUND(self._blurRadius) + "px";
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("shadowWithOffset:blurRadius:color:"), function $CPShadow__shadowWithOffset_blurRadius_color_(self, _cmd, anOffset, aBlurRadius, aColor)
{
    return objj_msgSend(objj_msgSend(CPShadow, "alloc"), "_initWithOffset:blurRadius:color:", anOffset, aBlurRadius, aColor);
}
,["id","CGSize","float","CPColor"])]);
}p;14;CPShadowView.jt;6190;@STATIC;1.0;I;21;Foundation/CPBundle.ji;12;CGGeometry.ji;9;CPImage.ji;8;CPView.jt;6103;objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPView.j", YES);CPLightShadow = 0;
CPHeavyShadow = 1;
CPThemeStateShadowViewLight = CPThemeState("shadowview-style-light");
CPThemeStateShadowViewHeavy = CPThemeState("shadowview-style-heavy");
{var the_class = objj_allocateClassPair(CPView, "CPShadowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_weight")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPShadowView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPShadowView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "setWeight:", CPLightShadow);
        objj_msgSend(self, "setHitTests:", NO);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setWeight:"), function $CPShadowView__setWeight_(self, _cmd, aWeight)
{
    if (self._weight == aWeight)
        return;
    self._weight = aWeight;
    if (self._weight == CPLightShadow)
        objj_msgSend(self, "setThemeState:", CPThemeStateShadowViewLight);
    else
        objj_msgSend(self, "setThemeState:", CPThemeStateShadowViewHeavy);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPShadowWeight"]), new objj_method(sel_getUid("leftInset"), function $CPShadowView__leftInset(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset").left;
}
,["float"]), new objj_method(sel_getUid("rightInset"), function $CPShadowView__rightInset(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset").right;
}
,["float"]), new objj_method(sel_getUid("topInset"), function $CPShadowView__topInset(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset").top;
}
,["float"]), new objj_method(sel_getUid("bottomInset"), function $CPShadowView__bottomInset(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset").bottom;
}
,["float"]), new objj_method(sel_getUid("horizontalInset"), function $CPShadowView__horizontalInset(self, _cmd)
{
    var currentContentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    return currentContentInset.left + currentContentInset.right;
}
,["float"]), new objj_method(sel_getUid("verticalInset"), function $CPShadowView__verticalInset(self, _cmd)
{
    var currentContentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    return currentContentInset.top + currentContentInset.bottom;
}
,["float"]), new objj_method(sel_getUid("frameForContentFrame:"), function $CPShadowView__frameForContentFrame_(self, _cmd, aFrame)
{
    return objj_msgSend(objj_msgSend(self, "class"), "frameForContentFrame:withWeight:", aFrame, self._weight);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("setFrameForContentFrame:"), function $CPShadowView__setFrameForContentFrame_(self, _cmd, aFrame)
{
    objj_msgSend(self, "setFrame:", objj_msgSend(self, "frameForContentFrame:", aFrame));
}
,["void","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $CPShadowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPShadowView").super_class }, "layoutSubviews");
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPShadowView__defaultThemeClass(self, _cmd)
{
    return "shadow-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPShadowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "bezel-color", CGInsetMakeZero(), "content-inset");
}
,["id"]), new objj_method(sel_getUid("frameForContentFrame:withWeight:"), function $CPShadowView__frameForContentFrame_withWeight_(self, _cmd, aFrame, aWeight)
{
    var shadowView = objj_msgSend(CPShadowView, "new"),
        inset = objj_msgSend(shadowView, "valueForThemeAttribute:inState:", "content-inset", aWeight == CPLightShadow ? CPThemeStateShadowViewLight : CPThemeStateShadowViewHeavy);
    return CGRectMake(CGRectGetMinX(aFrame) - inset.left, CGRectGetMinY(aFrame) - inset.top, CGRectGetWidth(aFrame) + inset.left + inset.right, CGRectGetHeight(aFrame) + inset.top + inset.bottom);
}
,["CGRect","CGRect","CPShadowWeight"]), new objj_method(sel_getUid("shadowViewEnclosingView:"), function $CPShadowView__shadowViewEnclosingView_(self, _cmd, aView)
{
    return objj_msgSend(self, "shadowViewEnclosingView:withWeight:", aView, CPLightShadow);
}
,["id","CPView"]), new objj_method(sel_getUid("shadowViewEnclosingView:withWeight:"), function $CPShadowView__shadowViewEnclosingView_withWeight_(self, _cmd, aView, aWeight)
{
    var shadowView = objj_msgSend(objj_msgSend(self, "alloc"), "initWithFrame:", objj_msgSend(aView, "frame"));
    if (shadowView)
    {
        objj_msgSend(shadowView, "setWeight:", aWeight);
        var size = objj_msgSend(shadowView, "frame").size,
            inset = objj_msgSend(shadowView, "currentValueForThemeAttribute:", "content-inset"),
            width = size.width - inset.left - inset.right,
            height = size.height - inset.top - inset.bottom,
            enclosingView = objj_msgSend(aView, "superview");
        objj_msgSend(shadowView, "setHitTests:", objj_msgSend(aView, "hitTests"));
        objj_msgSend(shadowView, "setAutoresizingMask:", objj_msgSend(aView, "autoresizingMask"));
        objj_msgSend(aView, "removeFromSuperview");
        objj_msgSend(shadowView, "addSubview:", aView);
        objj_msgSend(aView, "setFrame:", CGRectMake(inset.left, inset.top, width, height));
        objj_msgSend(enclosingView, "addSubview:", shadowView);
    }
    return shadowView;
}
,["id","CPView","CPShadowWeight"])]);
}p;10;CPSlider.jt;16210;@STATIC;1.0;i;11;CPControl.ji;20;CPWindow_Constants.jt;16149;objj_executeFile("CPControl.j", YES);objj_executeFile("CPWindow_Constants.j", YES);CPLinearSlider = 0;
CPCircularSlider = 1;
{var the_class = objj_allocateClassPair(CPControl, "CPSlider"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_minValue"), new objj_ivar("_maxValue"), new objj_ivar("_altIncrementValue"), new objj_ivar("_isVertical"), new objj_ivar("_dragOffset")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPSlider__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._minValue = 0.0;
        self._maxValue = 100.0;
        objj_msgSend(self, "setObjectValue:", 50.0);
        objj_msgSend(self, "setContinuous:", YES);
        objj_msgSend(self, "_recalculateIsVertical");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setMinValue:"), function $CPSlider__setMinValue_(self, _cmd, aMinimumValue)
{
    if (self._minValue === aMinimumValue)
        return;
    self._minValue = aMinimumValue;
    var doubleValue = objj_msgSend(self, "doubleValue");
    if (doubleValue < self._minValue)
        objj_msgSend(self, "setDoubleValue:", self._minValue);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","float"]), new objj_method(sel_getUid("minValue"), function $CPSlider__minValue(self, _cmd)
{
    return self._minValue;
}
,["float"]), new objj_method(sel_getUid("setMaxValue:"), function $CPSlider__setMaxValue_(self, _cmd, aMaximumValue)
{
    if (self._maxValue === aMaximumValue)
        return;
    self._maxValue = aMaximumValue;
    var doubleValue = objj_msgSend(self, "doubleValue");
    if (doubleValue > self._maxValue)
        objj_msgSend(self, "setDoubleValue:", self._maxValue);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","float"]), new objj_method(sel_getUid("maxValue"), function $CPSlider__maxValue(self, _cmd)
{
    return self._maxValue;
}
,["float"]), new objj_method(sel_getUid("setObjectValue:"), function $CPSlider__setObjectValue_(self, _cmd, aValue)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "setObjectValue:", MIN(MAX(aValue, self._minValue), self._maxValue));
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","id"]), new objj_method(sel_getUid("setSliderType:"), function $CPSlider__setSliderType_(self, _cmd, aSliderType)
{
    if (aSliderType === CPCircularSlider)
        objj_msgSend(self, "setThemeState:", CPThemeStateCircular);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateCircular);
}
,["void","CPSliderType"]), new objj_method(sel_getUid("sliderType"), function $CPSlider__sliderType(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateCircular) ? CPCircularSlider : CPLinearSlider;
}
,["CPSliderType"]), new objj_method(sel_getUid("trackRectForBounds:"), function $CPSlider__trackRectForBounds_(self, _cmd, bounds)
{
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateCircular))
    {
        var originalBounds = CGRectCreateCopy(bounds);
        bounds.size.width = MIN(bounds.size.width, bounds.size.height);
        bounds.size.height = bounds.size.width;
        if (bounds.size.width < originalBounds.size.width)
            bounds.origin.x += (originalBounds.size.width - bounds.size.width) / 2.0;
        else
            bounds.origin.y += (originalBounds.size.height - bounds.size.height) / 2.0;
    }
    else
    {
        var trackWidth = objj_msgSend(self, "currentValueForThemeAttribute:", "track-width");
        if (trackWidth <= 0)
            return CGRectMakeZero();
        if (objj_msgSend(self, "isVertical"))
        {
            bounds.origin.x = (CGRectGetWidth(bounds) - trackWidth) / 2.0;
            bounds.size.width = trackWidth;
        }
        else
        {
            bounds.origin.y = (CGRectGetHeight(bounds) - trackWidth) / 2.0;
            bounds.size.height = trackWidth;
        }
    }
    return bounds;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("knobRectForBounds:"), function $CPSlider__knobRectForBounds_(self, _cmd, bounds)
{
    var knobSize = objj_msgSend(self, "currentValueForThemeAttribute:", "knob-size");
    if (knobSize.width <= 0 || knobSize.height <= 0)
        return CGRectMakeZero();
    var knobRect = CGRectMake(0.0, 0.0, knobSize.width, knobSize.height),
        trackRect = objj_msgSend(self, "trackRectForBounds:", bounds);
    if (!trackRect || CGRectIsEmpty(trackRect))
        trackRect = bounds;
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateCircular))
    {
        var angle = 3 * PI_2 - (1.0 - objj_msgSend(self, "doubleValue") - self._minValue) / (self._maxValue - self._minValue) * PI2,
            radius = CGRectGetWidth(trackRect) / 2.0 - 8.0;
        knobRect.origin.x = radius * COS(angle) + CGRectGetMidX(trackRect) - 3.0;
        knobRect.origin.y = radius * SIN(angle) + CGRectGetMidY(trackRect) - 2.0;
    }
    else if (objj_msgSend(self, "isVertical"))
    {
        knobRect.origin.x = CGRectGetMidX(trackRect) - knobSize.width / 2.0;
        knobRect.origin.y = (self._maxValue - objj_msgSend(self, "doubleValue")) / (self._maxValue - self._minValue) * (CGRectGetHeight(trackRect) - knobSize.height);
    }
    else
    {
        knobRect.origin.x = (objj_msgSend(self, "doubleValue") - self._minValue) / (self._maxValue - self._minValue) * (CGRectGetWidth(trackRect) - knobSize.width);
        knobRect.origin.y = CGRectGetMidY(trackRect) - knobSize.height / 2.0;
    }
    return knobRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPSlider__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "track-view")
        return objj_msgSend(self, "trackRectForBounds:", objj_msgSend(self, "bounds"));
    else if (aName === "knob-view")
        return objj_msgSend(self, "knobRectForBounds:", objj_msgSend(self, "bounds"));
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPSlider__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "track-view" || aName === "knob-view")
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "init");
        objj_msgSend(view, "setHitTests:", NO);
        return view;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "createEphemeralSubviewNamed:", aName);
}
,["CPView","CPString"]), new objj_method(sel_getUid("setAltIncrementValue:"), function $CPSlider__setAltIncrementValue_(self, _cmd, anAltIncrementValue)
{
    self._altIncrementValue = anAltIncrementValue;
}
,["void","float"]), new objj_method(sel_getUid("altIncrementValue"), function $CPSlider__altIncrementValue(self, _cmd)
{
    return self._altIncrementValue;
}
,["float"]), new objj_method(sel_getUid("setFrameSize:"), function $CPSlider__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "_recalculateIsVertical");
}
,["void","CGSize"]), new objj_method(sel_getUid("_recalculateIsVertical"), function $CPSlider___recalculateIsVertical(self, _cmd)
{
    var bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds),
        height = CGRectGetHeight(bounds);
    self._isVertical = width < height ? 1 : width > height ? 0 : -1;
    if (self._isVertical === 1)
        objj_msgSend(self, "setThemeState:", CPThemeStateVertical);
    else if (self._isVertical === 0)
        objj_msgSend(self, "unsetThemeState:", CPThemeStateVertical);
}
,["void"]), new objj_method(sel_getUid("isVertical"), function $CPSlider__isVertical(self, _cmd)
{
    return self._isVertical;
}
,["int"]), new objj_method(sel_getUid("layoutSubviews"), function $CPSlider__layoutSubviews(self, _cmd)
{
    var trackView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "track-view", CPWindowBelow, "knob-view");
    if (trackView)
        objj_msgSend(trackView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "track-color"));
    var knobView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "knob-view", CPWindowAbove, "track-view");
    if (knobView)
        objj_msgSend(knobView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "knob-color"));
}
,["void"]), new objj_method(sel_getUid("tracksMouseOutsideOfFrame"), function $CPSlider__tracksMouseOutsideOfFrame(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_valueAtPoint:"), function $CPSlider___valueAtPoint_(self, _cmd, aPoint)
{
    var bounds = objj_msgSend(self, "bounds"),
        knobRect = objj_msgSend(self, "knobRectForBounds:", bounds),
        trackRect = objj_msgSend(self, "trackRectForBounds:", bounds);
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateCircular))
    {
        var knobWidth = CGRectGetWidth(knobRect);
        trackRect.origin.x += knobWidth / 2;
        trackRect.size.width -= knobWidth;
        var minValue = objj_msgSend(self, "minValue"),
            dx = aPoint.x - CGRectGetMidX(trackRect),
            dy = aPoint.y - CGRectGetMidY(trackRect);
        return MAX(0.0, MIN(1.0, 1.0 - (3 * PI_2 - ATAN2(dy, dx)) % PI2 / PI2)) * (objj_msgSend(self, "maxValue") - minValue) + minValue;
    }
    else if (objj_msgSend(self, "isVertical"))
    {
        var knobHeight = CGRectGetHeight(knobRect);
        trackRect.origin.y += knobHeight / 2;
        trackRect.size.height -= knobHeight;
        var minValue = objj_msgSend(self, "minValue");
        return MAX(0.0, MIN(1.0, (CGRectGetMaxY(trackRect) - aPoint.y) / CGRectGetHeight(trackRect))) * (objj_msgSend(self, "maxValue") - minValue) + minValue;
    }
    else
    {
        var knobWidth = CGRectGetWidth(knobRect);
        trackRect.origin.x += knobWidth / 2;
        trackRect.size.width -= knobWidth;
        var minValue = objj_msgSend(self, "minValue");
        return MAX(0.0, MIN(1.0, (aPoint.x - CGRectGetMinX(trackRect)) / CGRectGetWidth(trackRect))) * (objj_msgSend(self, "maxValue") - minValue) + minValue;
    }
}
,["float","CGPoint"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPSlider__startTrackingAt_(self, _cmd, aPoint)
{
    var bounds = objj_msgSend(self, "bounds"),
        knobRect = objj_msgSend(self, "knobRectForBounds:", CGRectMakeCopy(bounds));
    if (CGRectContainsPoint(knobRect, aPoint))
        self._dragOffset = CGSizeMake(CGRectGetMidX(knobRect) - aPoint.x, CGRectGetMidY(knobRect) - aPoint.y);
    else
    {
        var trackRect = objj_msgSend(self, "trackRectForBounds:", bounds);
        if (trackRect && CGRectContainsPoint(trackRect, aPoint))
        {
            self._dragOffset = CGSizeMakeZero();
            objj_msgSend(self, "setObjectValue:", objj_msgSend(self, "_valueAtPoint:", aPoint));
        }
        else
            return NO;
    }
    objj_msgSend(self, "setHighlighted:", YES);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
    return YES;
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("continueTracking:at:"), function $CPSlider__continueTracking_at_(self, _cmd, lastPoint, aPoint)
{
    objj_msgSend(self, "setObjectValue:", objj_msgSend(self, "_valueAtPoint:", CGPointMake(aPoint.x + self._dragOffset.width, aPoint.y + self._dragOffset.height)));
    return YES;
}
,["BOOL","CGPoint","CGPoint"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $CPSlider__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    objj_msgSend(self, "setHighlighted:", NO);
    if (objj_msgSend(self._target, "respondsToSelector:", sel_getUid("sliderDidFinish:")))
        objj_msgSend(self._target, "sliderDidFinish:", self);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("isContinuous"), function $CPSlider__isContinuous(self, _cmd)
{
    return (self._sendActionOn & CPLeftMouseDraggedMask) !== 0;
}
,["BOOL"]), new objj_method(sel_getUid("setContinuous:"), function $CPSlider__setContinuous_(self, _cmd, flag)
{
    if (flag)
        self._sendActionOn |= CPLeftMouseDraggedMask;
    else
        self._sendActionOn &= ~CPLeftMouseDraggedMask;
}
,["void","BOOL"]), new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"), function $CPSlider__takeValueFromKeyPath_ofObjects_(self, _cmd, aKeyPath, objects)
{
    var count = objects.length,
        value = objj_msgSend(objects[0], "valueForKeyPath:", aKeyPath);
    objj_msgSend(self, "setObjectValue:", value);
    while (count-- > 1)
        if (value !== objj_msgSend(objects[count], "valueForKeyPath:", aKeyPath))
            return objj_msgSend(self, "setFloatValue:", 1.0);
}
,["void","CPString","CPArray"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPSlider__defaultThemeClass(self, _cmd)
{
    return "slider";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPSlider__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "knob-color", CGSizeMakeZero(), "knob-size", 0.0, "track-width", objj_msgSend(CPNull, "null"), "track-color");
}
,["id"])]);
}var CPSliderMinValueKey = "CPSliderMinValueKey",
    CPSliderMaxValueKey = "CPSliderMaxValueKey",
    CPSliderAltIncrValueKey = "CPSliderAltIncrValueKey";
{
var the_class = objj_getClass("CPSlider")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPSlider__initWithCoder_(self, _cmd, aCoder)
{
    self._minValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPSliderMinValueKey);
    self._maxValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPSliderMaxValueKey);
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._altIncrementValue = objj_msgSend(aCoder, "decodeDoubleForKey:", CPSliderAltIncrValueKey);
        objj_msgSend(self, "_recalculateIsVertical");
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPSlider__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSlider").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._minValue, CPSliderMinValueKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._maxValue, CPSliderMaxValueKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._altIncrementValue, CPSliderAltIncrValueKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPSlider")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPSlider\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("value"), function $CPSlider__value(self, _cmd)
{
    CPLog.warn("[CPSlider value] is deprecated, use doubleValue or objectValue instead.");
    return objj_msgSend(self, "doubleValue");
}
,["id"]), new objj_method(sel_getUid("setValue:"), function $CPSlider__setValue_(self, _cmd, aValue)
{
    CPLog.warn("[CPSlider setValue:] is deprecated, use setDoubleValue: or setObjectValue: instead.");
    objj_msgSend(self, "setObjectValue:", aValue);
}
,["void","id"])]);
}p;21;CPSliderColorPicker.jt;18256;@STATIC;1.0;i;15;CPColorPicker.ji;10;CPSlider.ji;13;CPTextField.ji;8;CPView.jt;18171;objj_executeFile("CPColorPicker.j", YES);objj_executeFile("CPSlider.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPColorPicker, "CPSliderColorPicker"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentView"), new objj_ivar("_redSlider"), new objj_ivar("_greenSlider"), new objj_ivar("_blueSlider"), new objj_ivar("_hueSlider"), new objj_ivar("_saturationSlider"), new objj_ivar("_brightnessSlider"), new objj_ivar("_rgbLabel"), new objj_ivar("_hsbLabel"), new objj_ivar("_redLabel"), new objj_ivar("_greenLabel"), new objj_ivar("_blueLabel"), new objj_ivar("_hueLabel"), new objj_ivar("_saturationLabel"), new objj_ivar("_brightnessLabel"), new objj_ivar("_hexLabel"), new objj_ivar("_hexValue"), new objj_ivar("_hexValue"), new objj_ivar("_redValue"), new objj_ivar("_greenValue"), new objj_ivar("_blueValue"), new objj_ivar("_hueValue"), new objj_ivar("_saturationValue"), new objj_ivar("_brightnessValue")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithPickerMask:colorPanel:"), function $CPSliderColorPicker__initWithPickerMask_colorPanel_(self, _cmd, mask, owningColorPanel)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSliderColorPicker").super_class }, "initWithPickerMask:colorPanel:", mask, owningColorPanel);
}
,["id","int","CPColorPanel"]), new objj_method(sel_getUid("initView"), function $CPSliderColorPicker__initView(self, _cmd)
{
    var aFrame = CGRectMake(0, 0, CPColorPickerViewWidth, CPColorPickerViewHeight);
    self._contentView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", aFrame);
    objj_msgSend(self._contentView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    self._rgbLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 10, 100, 20));
    objj_msgSend(self._rgbLabel, "setStringValue:", "Red, Green, Blue");
    objj_msgSend(self._rgbLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._redLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 37, 15, 20));
    objj_msgSend(self._redLabel, "setStringValue:", "R");
    objj_msgSend(self._redLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._redSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 35, aFrame.size.width - 70, 20));
    objj_msgSend(self._redSlider, "setMaxValue:", 1.0);
    objj_msgSend(self._redSlider, "setMinValue:", 0.0);
    objj_msgSend(self._redSlider, "setTarget:", self);
    objj_msgSend(self._redSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._redSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._redValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 30, 45, 28));
    objj_msgSend(self._redValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._redValue, "setEditable:", YES);
    objj_msgSend(self._redValue, "setBezeled:", YES);
    objj_msgSend(self._redValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._redValue);
    self._greenLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 63, 15, 20));
    objj_msgSend(self._greenLabel, "setStringValue:", "G");
    objj_msgSend(self._greenLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._greenSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 61, aFrame.size.width - 70, 20));
    objj_msgSend(self._greenSlider, "setMaxValue:", 1.0);
    objj_msgSend(self._greenSlider, "setMinValue:", 0.0);
    objj_msgSend(self._greenSlider, "setTarget:", self);
    objj_msgSend(self._greenSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._greenSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._greenValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 56, 45, 28));
    objj_msgSend(self._greenValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._greenValue, "setEditable:", YES);
    objj_msgSend(self._greenValue, "setBezeled:", YES);
    objj_msgSend(self._greenValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._greenValue);
    self._blueLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 90, 15, 20));
    objj_msgSend(self._blueLabel, "setStringValue:", "B");
    objj_msgSend(self._blueLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._blueSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 87, aFrame.size.width - 70, 20));
    objj_msgSend(self._blueSlider, "setMaxValue:", 1.0);
    objj_msgSend(self._blueSlider, "setMinValue:", 0.0);
    objj_msgSend(self._blueSlider, "setTarget:", self);
    objj_msgSend(self._blueSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._blueSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._blueValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 82, 45, 28));
    objj_msgSend(self._blueValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._blueValue, "setEditable:", YES);
    objj_msgSend(self._blueValue, "setBezeled:", YES);
    objj_msgSend(self._blueValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._blueValue);
    self._hsbLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 120, 190, 20));
    objj_msgSend(self._hsbLabel, "setStringValue:", "Hue, Saturation, Brightness");
    objj_msgSend(self._hsbLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._hueLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 145, 15, 20));
    objj_msgSend(self._hueLabel, "setStringValue:", "H");
    objj_msgSend(self._hueLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._hueSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 143, aFrame.size.width - 70, 20));
    objj_msgSend(self._hueSlider, "setMaxValue:", 0.999);
    objj_msgSend(self._hueSlider, "setMinValue:", 0.0);
    objj_msgSend(self._hueSlider, "setTarget:", self);
    objj_msgSend(self._hueSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._hueSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._hueValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 138, 45, 28));
    objj_msgSend(self._hueValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._hueValue, "setEditable:", YES);
    objj_msgSend(self._hueValue, "setBezeled:", YES);
    objj_msgSend(self._hueValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._hueValue);
    self._saturationLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 170, 15, 20));
    objj_msgSend(self._saturationLabel, "setStringValue:", "S");
    objj_msgSend(self._saturationLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._saturationSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 168, aFrame.size.width - 70, 20));
    objj_msgSend(self._saturationSlider, "setMaxValue:", 1.0);
    objj_msgSend(self._saturationSlider, "setMinValue:", 0.0);
    objj_msgSend(self._saturationSlider, "setTarget:", self);
    objj_msgSend(self._saturationSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._saturationSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._saturationValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 164, 45, 28));
    objj_msgSend(self._saturationValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._saturationValue, "setEditable:", YES);
    objj_msgSend(self._saturationValue, "setBezeled:", YES);
    objj_msgSend(self._saturationValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._saturationValue);
    self._brightnessLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 196, 15, 20));
    objj_msgSend(self._brightnessLabel, "setStringValue:", "B");
    objj_msgSend(self._brightnessLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._brightnessSlider = objj_msgSend(objj_msgSend(CPSlider, "alloc"), "initWithFrame:", CGRectMake(15, 194, aFrame.size.width - 70, 20));
    objj_msgSend(self._brightnessSlider, "setMaxValue:", 1.0);
    objj_msgSend(self._brightnessSlider, "setMinValue:", 0.0);
    objj_msgSend(self._brightnessSlider, "setTarget:", self);
    objj_msgSend(self._brightnessSlider, "setAction:", sel_getUid("sliderChanged:"));
    objj_msgSend(self._brightnessSlider, "setAutoresizingMask:", CPViewWidthSizable);
    self._brightnessValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(aFrame.size.width - 45, 190, 45, 28));
    objj_msgSend(self._brightnessValue, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(self._brightnessValue, "setEditable:", YES);
    objj_msgSend(self._brightnessValue, "setBezeled:", YES);
    objj_msgSend(self._brightnessValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._brightnessValue);
    self._hexLabel = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0, 230, 30, 20));
    objj_msgSend(self._hexLabel, "setStringValue:", "Hex");
    objj_msgSend(self._hexLabel, "setTextColor:", objj_msgSend(CPColor, "blackColor"));
    self._hexValue = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(32, 225, 80, 28));
    objj_msgSend(self._hexValue, "setEditable:", YES);
    objj_msgSend(self._hexValue, "setBezeled:", YES);
    objj_msgSend(self._hexValue, "setDelegate:", self);
    objj_msgSend(self._contentView, "addSubview:", self._hexValue);
    objj_msgSend(self._contentView, "addSubview:", self._rgbLabel);
    objj_msgSend(self._contentView, "addSubview:", self._redLabel);
    objj_msgSend(self._contentView, "addSubview:", self._greenLabel);
    objj_msgSend(self._contentView, "addSubview:", self._blueLabel);
    objj_msgSend(self._contentView, "addSubview:", self._redSlider);
    objj_msgSend(self._contentView, "addSubview:", self._greenSlider);
    objj_msgSend(self._contentView, "addSubview:", self._blueSlider);
    objj_msgSend(self._contentView, "addSubview:", self._hsbLabel);
    objj_msgSend(self._contentView, "addSubview:", self._hueLabel);
    objj_msgSend(self._contentView, "addSubview:", self._saturationLabel);
    objj_msgSend(self._contentView, "addSubview:", self._brightnessLabel);
    objj_msgSend(self._contentView, "addSubview:", self._hueSlider);
    objj_msgSend(self._contentView, "addSubview:", self._saturationSlider);
    objj_msgSend(self._contentView, "addSubview:", self._brightnessSlider);
    objj_msgSend(self._contentView, "addSubview:", self._hexLabel);
}
,["id"]), new objj_method(sel_getUid("provideNewView:"), function $CPSliderColorPicker__provideNewView_(self, _cmd, initialRequest)
{
    if (initialRequest)
        objj_msgSend(self, "initView");
    return self._contentView;
}
,["CPView","BOOL"]), new objj_method(sel_getUid("currentMode"), function $CPSliderColorPicker__currentMode(self, _cmd)
{
    return CPSliderColorPickerMode;
}
,["int"]), new objj_method(sel_getUid("supportsMode:"), function $CPSliderColorPicker__supportsMode_(self, _cmd, mode)
{
    return mode == CPSliderColorPickerMode ? YES : NO;
}
,["BOOL","int"]), new objj_method(sel_getUid("sliderChanged:"), function $CPSliderColorPicker__sliderChanged_(self, _cmd, sender)
{
    var newColor,
        colorPanel = objj_msgSend(self, "colorPanel"),
        alpha = objj_msgSend(colorPanel, "opacity");
    switch(sender) {
    case self._hueSlider:
    case self._saturationSlider:
    case self._brightnessSlider:
        newColor = objj_msgSend(CPColor, "colorWithHue:saturation:brightness:alpha:", objj_msgSend(self._hueSlider, "floatValue"), objj_msgSend(self._saturationSlider, "floatValue"), objj_msgSend(self._brightnessSlider, "floatValue"), alpha);
        objj_msgSend(self, "updateRGBSliders:", newColor);
        break;
    case self._redSlider:
    case self._greenSlider:
    case self._blueSlider:
        newColor = objj_msgSend(CPColor, "colorWithCalibratedRed:green:blue:alpha:", objj_msgSend(self._redSlider, "floatValue"), objj_msgSend(self._greenSlider, "floatValue"), objj_msgSend(self._blueSlider, "floatValue"), alpha);
        objj_msgSend(self, "updateHSBSliders:", newColor);
        break;
    }
    objj_msgSend(self, "updateLabels");
    objj_msgSend(self, "updateHex:", newColor);
    objj_msgSend(colorPanel, "setColor:", newColor);
}
,["void","id"]), new objj_method(sel_getUid("setColor:"), function $CPSliderColorPicker__setColor_(self, _cmd, aColor)
{
    if (!aColor)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "aColor can't be nil");
    objj_msgSend(self, "updateRGBSliders:", aColor);
    objj_msgSend(self, "updateHSBSliders:", aColor);
    objj_msgSend(self, "updateHex:", aColor);
    objj_msgSend(self, "updateLabels");
}
,["void","CPColor"]), new objj_method(sel_getUid("updateHSBSliders:"), function $CPSliderColorPicker__updateHSBSliders_(self, _cmd, aColor)
{
    var hsb = objj_msgSend(aColor, "hsbComponents");
    objj_msgSend(self._hueSlider, "setFloatValue:", hsb[0]);
    objj_msgSend(self._saturationSlider, "setFloatValue:", hsb[1]);
    objj_msgSend(self._brightnessSlider, "setFloatValue:", hsb[2]);
}
,["void","CPColor"]), new objj_method(sel_getUid("updateHex:"), function $CPSliderColorPicker__updateHex_(self, _cmd, aColor)
{
    objj_msgSend(self._hexValue, "setStringValue:", objj_msgSend(aColor, "hexString"));
}
,["void","CPColor"]), new objj_method(sel_getUid("updateRGBSliders:"), function $CPSliderColorPicker__updateRGBSliders_(self, _cmd, aColor)
{
    var rgb = objj_msgSend(aColor, "components");
    objj_msgSend(self._redSlider, "setFloatValue:", rgb[0]);
    objj_msgSend(self._greenSlider, "setFloatValue:", rgb[1]);
    objj_msgSend(self._blueSlider, "setFloatValue:", rgb[2]);
}
,["void","CPColor"]), new objj_method(sel_getUid("updateLabels"), function $CPSliderColorPicker__updateLabels(self, _cmd)
{
    objj_msgSend(self._hueValue, "setStringValue:", ROUND(objj_msgSend(self._hueSlider, "floatValue") * 360.0));
    objj_msgSend(self._saturationValue, "setStringValue:", ROUND(objj_msgSend(self._saturationSlider, "floatValue") * 100.0));
    objj_msgSend(self._brightnessValue, "setStringValue:", ROUND(objj_msgSend(self._brightnessSlider, "floatValue") * 100.0));
    objj_msgSend(self._redValue, "setStringValue:", ROUND(objj_msgSend(self._redSlider, "floatValue") * 255));
    objj_msgSend(self._greenValue, "setStringValue:", ROUND(objj_msgSend(self._greenSlider, "floatValue") * 255));
    objj_msgSend(self._blueValue, "setStringValue:", ROUND(objj_msgSend(self._blueSlider, "floatValue") * 255));
}
,["void"]), new objj_method(sel_getUid("provideNewButtonImage"), function $CPSliderColorPicker__provideNewButtonImage(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "slider_button.png"), CGSizeMake(32, 32));
}
,["CPImage"]), new objj_method(sel_getUid("provideNewAlternateButtonImage"), function $CPSliderColorPicker__provideNewAlternateButtonImage(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", CPColorPicker), "pathForResource:", "slider_button_h.png"), CGSizeMake(32, 32));
}
,["CPImage"]), new objj_method(sel_getUid("controlTextDidEndEditing:"), function $CPSliderColorPicker__controlTextDidEndEditing_(self, _cmd, aNotification)
{
    var field = objj_msgSend(aNotification, "object"),
        value = objj_msgSend(objj_msgSend(field, "stringValue"), "stringByTrimmingWhitespace");
    if (field === self._hexValue)
    {
        var newColor = objj_msgSend(CPColor, "colorWithHexString:", value);
        if (newColor)
        {
            objj_msgSend(self, "setColor:", newColor);
            objj_msgSend(objj_msgSend(self, "colorPanel"), "setColor:", newColor);
        }
    }
    else
    {
        switch(field) {
        case self._redValue:
            objj_msgSend(self._redSlider, "setFloatValue:", MAX(MIN(ROUND(value), 255) / 255.0, 0));
            objj_msgSend(self, "sliderChanged:", self._redSlider);
            break;
        case self._greenValue:
            objj_msgSend(self._greenSlider, "setFloatValue:", MAX(MIN(ROUND(value), 255) / 255.0, 0));
            objj_msgSend(self, "sliderChanged:", self._greenSlider);
            break;
        case self._blueValue:
            objj_msgSend(self._blueSlider, "setFloatValue:", MAX(MIN(ROUND(value), 255) / 255.0, 0));
            objj_msgSend(self, "sliderChanged:", self._blueSlider);
            break;
        case self._hueValue:
            objj_msgSend(self._hueSlider, "setFloatValue:", MAX(MIN(ROUND(value), 360) / 360.0, 0));
            objj_msgSend(self, "sliderChanged:", self._hueSlider);
            break;
        case self._saturationValue:
            objj_msgSend(self._saturationSlider, "setFloatValue:", MAX(MIN(ROUND(value), 100) / 100.0, 0));
            objj_msgSend(self, "sliderChanged:", self._saturationSlider);
            break;
        case self._brightnessValue:
            objj_msgSend(self._brightnessSlider, "setFloatValue:", MAX(MIN(ROUND(value), 100) / 100.0, 0));
            objj_msgSend(self, "sliderChanged:", self._brightnessSlider);
            break;
        }
    }
}
,["void","CPNotification"])]);
}p;9;CPSound.jt;6667;@STATIC;1.0;I;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.jt;6595;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPRunLoop.j", NO);CPSoundLoadStateEmpty = 0;
CPSoundLoadStateLoading = 1;
CPSoundLoadStateCanBePlayed = 2;
CPSoundLoadStateError = 3;
CPSoundPlayBackStatePlay = 0;
CPSoundPlayBackStateStop = 1;
CPSoundPlayBackStatePause = 2;
{var the_class = objj_allocateClassPair(CPObject, "CPSound"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_name"), new objj_ivar("_delegate"), new objj_ivar("_playRequestBeforeLoad"), new objj_ivar("_audioTag"), new objj_ivar("_loadStatus"), new objj_ivar("_playBackStatus")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("name"), function $CPSound__name(self, _cmd)
{
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("setName:"), function $CPSound__setName_(self, _cmd, newValue)
{
    self._name = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("delegate"), function $CPSound__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPSound__setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("init"), function $CPSound__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSound").super_class }, "init"))
    {
        self._loadStatus = CPSoundLoadStateEmpty;
        self._audioTag = document.createElement("audio");
        self._audioTag.preload = YES;
        self._playRequestBeforeLoad = NO;
        self._audioTag.addEventListener("canplay", function()
        {
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
            objj_msgSend(self, "_soundDidload");
        }, true);
        self._audioTag.addEventListener("ended", function()
        {
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
            objj_msgSend(self, "_soundDidEnd");
        }, true);
        self._audioTag.addEventListener("error", function()
        {
            objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
            objj_msgSend(self, "_soundError");
        }, true);
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("initWithContentsOfFile:byReference:"), function $CPSound__initWithContentsOfFile_byReference_(self, _cmd, aFile, byRef)
{
    if (self = objj_msgSend(self, "init"))
    {
        self._loadStatus = CPSoundLoadStateLoading;
        self._audioTag.src = aFile;
    }
    return self;
}
,["id","CPString","BOOL"]), new objj_method(sel_getUid("initWithContentsOfURL:byReference:"), function $CPSound__initWithContentsOfURL_byReference_(self, _cmd, aURL, byRef)
{
    return objj_msgSend(self, "initWithContentsOfFile:byReference:", objj_msgSend(aURL, "absoluteString"), NO);
}
,["id","CPURL","BOOL"]), new objj_method(sel_getUid("initWithData:"), function $CPSound__initWithData_(self, _cmd, someData)
{
    if (self = objj_msgSend(self, "init"))
    {
        self._loadStatus = CPSoundLoadStateLoading;
        self._audioTag.src = objj_msgSend(someData, "rawString");
    }
    return self;
}
,["id","CPData"]), new objj_method(sel_getUid("_soundDidload"), function $CPSound___soundDidload(self, _cmd)
{
    self._loadStatus = CPSoundLoadStateCanBePlayed;
    if (self._playRequestBeforeLoad)
    {
        self._playRequestBeforeLoad = NO;
        objj_msgSend(self, "play");
    }
}
,["void"]), new objj_method(sel_getUid("_soundDidEnd"), function $CPSound___soundDidEnd(self, _cmd)
{
    if (!objj_msgSend(self, "loops"))
        objj_msgSend(self, "stop");
}
,["void"]), new objj_method(sel_getUid("_soundError"), function $CPSound___soundError(self, _cmd)
{
    self._loadStatus = CPSoundLoadStateError;
    CPLog.error("Cannot load sound. Maybe the format of your sound is not compatible with your browser.");
}
,["void"]), new objj_method(sel_getUid("play"), function $CPSound__play(self, _cmd)
{
    if (self._loadStatus === CPSoundLoadStateLoading)
    {
        self._playRequestBeforeLoad = YES;
        return YES;
    }
    if (self._loadStatus !== CPSoundLoadStateCanBePlayed || self._playBackStatus === CPSoundPlayBackStatePlay)
        return NO;
    self._audioTag.play();
    self._playBackStatus = CPSoundPlayBackStatePlay;
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("stop"), function $CPSound__stop(self, _cmd)
{
    if (self._loadStatus !== CPSoundLoadStateCanBePlayed || self._playBackStatus === CPSoundPlayBackStateStop)
        return NO;
    self._audioTag.pause();
    self._audioTag.currentTime = 0.0;
    self._playBackStatus = CPSoundPlayBackStateStop;
    if (self._delegate && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("sound:didFinishPlaying:")))
        objj_msgSend(self._delegate, "sound:didFinishPlaying:", self, YES);
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("pause"), function $CPSound__pause(self, _cmd)
{
    if (self._loadStatus !== CPSoundLoadStateCanBePlayed || self._playBackStatus === CPSoundPlayBackStatePause)
        return NO;
    self._audioTag.pause();
    self._playBackStatus = CPSoundPlayBackStatePause;
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resume"), function $CPSound__resume(self, _cmd)
{
    if (self._loadStatus !== CPSoundLoadStateCanBePlayed || self._playBackStatus !== CPSoundPlayBackStatePause)
        return NO;
    self._audioTag.play();
    self._playBackStatus = CPSoundPlayBackStatePlay;
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("loops"), function $CPSound__loops(self, _cmd)
{
    return self._audioTag.loop;
}
,["BOOL"]), new objj_method(sel_getUid("setLoops:"), function $CPSound__setLoops_(self, _cmd, shouldLoop)
{
    self._audioTag.loop = shouldLoop;
}
,["void","BOOL"]), new objj_method(sel_getUid("volume"), function $CPSound__volume(self, _cmd)
{
    return self._audioTag.volume;
}
,["double"]), new objj_method(sel_getUid("setVolume:"), function $CPSound__setVolume_(self, _cmd, aVolume)
{
    if (aVolume > 1.0)
        aVolume = 1.0;
    else if (aVolume < 0.0)
        aVolume = 0.0;
    self._audioTag.volume = aVolume;
}
,["void","double"]), new objj_method(sel_getUid("duration"), function $CPSound__duration(self, _cmd)
{
    return self._audioTag.duration;
}
,["double"]), new objj_method(sel_getUid("isPlaying"), function $CPSound__isPlaying(self, _cmd)
{
    return self._playBackStatus === CPSoundPlayBackStatePlay;
}
,["BOOL"])]);
}p;13;CPSplitView.jt;42285;@STATIC;1.0;i;13;CPButtonBar.ji;9;CPImage.ji;8;CPView.ji;10;CPCursor.jt;42207;objj_executeFile("CPButtonBar.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPCursor.j", YES);CPSplitViewDidResizeSubviewsNotification = "CPSplitViewDidResizeSubviewsNotification";
CPSplitViewWillResizeSubviewsNotification = "CPSplitViewWillResizeSubviewsNotification";
var ShouldSuppressResizeNotifications = 1,
    DidPostWillResizeNotification = 1 << 1,
    DidSuppressResizeNotification = 1 << 2;
{var the_class = objj_allocateClassPair(CPView, "CPSplitView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_delegate"), new objj_ivar("_isVertical"), new objj_ivar("_isPaneSplitter"), new objj_ivar("_currentDivider"), new objj_ivar("_initialOffset"), new objj_ivar("_preCollapsePositions"), new objj_ivar("_originComponent"), new objj_ivar("_sizeComponent"), new objj_ivar("_DOMDividerElements"), new objj_ivar("_dividerImagePath"), new objj_ivar("_drawingDivider"), new objj_ivar("_autosaveName"), new objj_ivar("_shouldAutosave"), new objj_ivar("_shouldRestoreFromAutosaveUnlessFrameSize"), new objj_ivar("_needsResizeSubviews"), new objj_ivar("_suppressResizeNotificationsMask"), new objj_ivar("_buttonBars")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPSplitView__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSplitView").super_class }, "initWithFrame:", aFrame))
    {
        self._suppressResizeNotificationsMask = 0;
        self._preCollapsePositions = objj_msgSend(CPMutableDictionary, "new");
        self._currentDivider = CPNotFound;
        self._DOMDividerElements = [];
        self._buttonBars = [];
        self._shouldAutosave = YES;
        objj_msgSend(self, "_setVertical:", YES);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("dividerThickness"), function $CPSplitView__dividerThickness(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", objj_msgSend(self, "isPaneSplitter") ? "pane-divider-thickness" : "divider-thickness");
}
,["float"]), new objj_method(sel_getUid("isVertical"), function $CPSplitView__isVertical(self, _cmd)
{
    return self._isVertical;
}
,["BOOL"]), new objj_method(sel_getUid("setVertical:"), function $CPSplitView__setVertical_(self, _cmd, shouldBeVertical)
{
    if (!objj_msgSend(self, "_setVertical:", shouldBeVertical))
        return;
    var frame = objj_msgSend(self, "frame"),
        dividerThickness = objj_msgSend(self, "dividerThickness");
    objj_msgSend(self, "_postNotificationWillResize");
    var eachSize = ROUND((frame.size[self._sizeComponent] - dividerThickness * (self._subviews.length - 1)) / self._subviews.length),
        index = 0,
        count = self._subviews.length;
    if (objj_msgSend(self, "isVertical"))
    {
        for (; index < count; ++index)
            objj_msgSend(self._subviews[index], "setFrame:", CGRectMake(ROUND((eachSize + dividerThickness) * index), 0, eachSize, frame.size.height));
    }
    else
    {
        for (; index < count; ++index)
            objj_msgSend(self._subviews[index], "setFrame:", CGRectMake(0, ROUND((eachSize + dividerThickness) * index), frame.size.width, eachSize));
    }
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "_postNotificationDidResize");
}
,["void","BOOL"]), new objj_method(sel_getUid("_setVertical:"), function $CPSplitView___setVertical_(self, _cmd, shouldBeVertical)
{
    var changed = self._isVertical != shouldBeVertical;
    self._isVertical = shouldBeVertical;
    self._originComponent = objj_msgSend(self, "isVertical") ? "x" : "y";
    self._sizeComponent = objj_msgSend(self, "isVertical") ? "width" : "height";
    self._dividerImagePath = objj_msgSend(self, "isVertical") ? objj_msgSend(objj_msgSend(self, "valueForThemeAttribute:", "vertical-divider-color"), "filename") : objj_msgSend(objj_msgSend(self, "valueForThemeAttribute:", "horizontal-divider-color"), "filename");
    return changed;
}
,["BOOL","BOOL"]), new objj_method(sel_getUid("isPaneSplitter"), function $CPSplitView__isPaneSplitter(self, _cmd)
{
    return self._isPaneSplitter;
}
,["BOOL"]), new objj_method(sel_getUid("setIsPaneSplitter:"), function $CPSplitView__setIsPaneSplitter_(self, _cmd, shouldBePaneSplitter)
{
    if (self._isPaneSplitter == shouldBePaneSplitter)
        return;
    self._isPaneSplitter = shouldBePaneSplitter;
    if (self._DOMDividerElements[self._drawingDivider])
        objj_msgSend(self, "_setupDOMDivider");
    self._needsResizeSubviews = YES;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","BOOL"]), new objj_method(sel_getUid("didAddSubview:"), function $CPSplitView__didAddSubview_(self, _cmd, aSubview)
{
    self._needsResizeSubviews = YES;
}
,["void","CPView"]), new objj_method(sel_getUid("isSubviewCollapsed:"), function $CPSplitView__isSubviewCollapsed_(self, _cmd, subview)
{
    return objj_msgSend(subview, "frame").size[self._sizeComponent] < 1 ? YES : NO;
}
,["BOOL","CPView"]), new objj_method(sel_getUid("rectOfDividerAtIndex:"), function $CPSplitView__rectOfDividerAtIndex_(self, _cmd, aDivider)
{
    var frame = objj_msgSend(self._subviews[aDivider], "frame"),
        rect = CGRectMakeZero();
    rect.size = objj_msgSend(self, "frame").size;
    rect.size[self._sizeComponent] = objj_msgSend(self, "dividerThickness");
    rect.origin[self._originComponent] = frame.origin[self._originComponent] + frame.size[self._sizeComponent];
    return rect;
}
,["CGRect","int"]), new objj_method(sel_getUid("effectiveRectOfDividerAtIndex:"), function $CPSplitView__effectiveRectOfDividerAtIndex_(self, _cmd, aDivider)
{
    var realRect = objj_msgSend(self, "rectOfDividerAtIndex:", aDivider),
        padding = 2;
    realRect.size[self._sizeComponent] += padding * 2;
    realRect.origin[self._originComponent] -= padding;
    return realRect;
}
,["CGRect","int"]), new objj_method(sel_getUid("drawRect:"), function $CPSplitView__drawRect_(self, _cmd, rect)
{
    var count = objj_msgSend(self._subviews, "count") - 1;
    while (count-- > 0)
    {
        self._drawingDivider = count;
        objj_msgSend(self, "drawDividerInRect:", objj_msgSend(self, "rectOfDividerAtIndex:", count));
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("willRemoveSubview:"), function $CPSplitView__willRemoveSubview_(self, _cmd, aView)
{
    var dividerToRemove = self._DOMDividerElements.pop();
    if (dividerToRemove)
        self._DOMElement.removeChild(dividerToRemove);
    self._needsResizeSubviews = YES;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPView"]), new objj_method(sel_getUid("layoutSubviews"), function $CPSplitView__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "_adjustSubviewsWithCalculatedSize");
}
,["void"]), new objj_method(sel_getUid("drawDividerInRect:"), function $CPSplitView__drawDividerInRect_(self, _cmd, aRect)
{
    if (!self._DOMDividerElements[self._drawingDivider])
    {
        self._DOMDividerElements[self._drawingDivider] = document.createElement("div");
        self._DOMDividerElements[self._drawingDivider].style.position = "absolute";
        self._DOMDividerElements[self._drawingDivider].style.backgroundRepeat = "repeat";
        self._DOMElement.appendChild(self._DOMDividerElements[self._drawingDivider]);
    }
    objj_msgSend(self, "_setupDOMDivider");
    if (NULL)
        var ____p = CGPointApplyAffineTransform(CGPointMake(CGRectGetMinX(aRect), CGRectGetMinY(aRect)), NULL);
    else
        var ____p = CGPointMake(CGRectGetMinX(aRect), CGRectGetMinY(aRect));
    self._DOMDividerElements[self._drawingDivider].style.left = ROUND(____p.x) + "px";
    self._DOMDividerElements[self._drawingDivider].style.top = ROUND(____p.y) + "px";
    self._DOMDividerElements[self._drawingDivider].style.width = MAX(0.0, ROUND(CGRectGetWidth(aRect))) + "px";
    self._DOMDividerElements[self._drawingDivider].style.height = MAX(0.0, ROUND(CGRectGetHeight(aRect))) + "px";
}
,["void","CGRect"]), new objj_method(sel_getUid("_setupDOMDivider"), function $CPSplitView___setupDOMDivider(self, _cmd)
{
    if (self._isPaneSplitter)
    {
        self._DOMDividerElements[self._drawingDivider].style.backgroundColor = "";
        self._DOMDividerElements[self._drawingDivider].style.backgroundImage = "url('" + self._dividerImagePath + "')";
    }
    else
    {
        self._DOMDividerElements[self._drawingDivider].style.backgroundColor = objj_msgSend(objj_msgSend(self, "currentValueForThemeAttribute:", "pane-divider-color"), "cssString");
        self._DOMDividerElements[self._drawingDivider].style.backgroundImage = "";
    }
}
,["void"]), new objj_method(sel_getUid("viewWillDraw"), function $CPSplitView__viewWillDraw(self, _cmd)
{
    objj_msgSend(self, "_adjustSubviewsWithCalculatedSize");
}
,["void"]), new objj_method(sel_getUid("_adjustSubviewsWithCalculatedSize"), function $CPSplitView___adjustSubviewsWithCalculatedSize(self, _cmd)
{
    if (!self._needsResizeSubviews)
        return;
    self._needsResizeSubviews = NO;
    objj_msgSend(self, "resizeSubviewsWithOldSize:", objj_msgSend(self, "_calculateSize"));
}
,["void"]), new objj_method(sel_getUid("_calculateSize"), function $CPSplitView___calculateSize(self, _cmd)
{
    var subviews = objj_msgSend(self, "subviews"),
        count = subviews.length,
        size = CGSizeMakeZero();
    if (objj_msgSend(self, "isVertical"))
    {
        size.width += objj_msgSend(self, "dividerThickness") * (count - 1);
        size.height = CGRectGetHeight(objj_msgSend(self, "frame"));
    }
    else
    {
        size.width = CGRectGetWidth(objj_msgSend(self, "frame"));
        size.height += objj_msgSend(self, "dividerThickness") * (count - 1);
    }
    while (count--)
        size[self._sizeComponent] += objj_msgSend(subviews[count], "frame").size[self._sizeComponent];
    return size;
}
,["CGSize"]), new objj_method(sel_getUid("cursorAtPoint:hitDividerAtIndex:"), function $CPSplitView__cursorAtPoint_hitDividerAtIndex_(self, _cmd, aPoint, anIndex)
{
    var frame = objj_msgSend(self._subviews[anIndex], "frame"),
        startPosition = frame.origin[self._originComponent] + frame.size[self._sizeComponent],
        effectiveRect = objj_msgSend(self, "effectiveRectOfDividerAtIndex:", anIndex),
        buttonBar = self._buttonBars[anIndex],
        buttonBarRect = null,
        additionalRect = null;
    if (buttonBar != null)
    {
        buttonBarRect = objj_msgSend(buttonBar, "resizeControlFrame");
        buttonBarRect.origin = objj_msgSend(self, "convertPoint:fromView:", buttonBarRect.origin, buttonBar);
    }
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:")))
        effectiveRect = objj_msgSend(self._delegate, "splitView:effectiveRect:forDrawnRect:ofDividerAtIndex:", self, effectiveRect, effectiveRect, anIndex);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:additionalEffectiveRectOfDividerAtIndex:")))
        additionalRect = objj_msgSend(self._delegate, "splitView:additionalEffectiveRectOfDividerAtIndex:", self, anIndex);
    return CGRectContainsPoint(effectiveRect, aPoint) || additionalRect && CGRectContainsPoint(additionalRect, aPoint) || buttonBarRect && CGRectContainsPoint(buttonBarRect, aPoint);
}
,["BOOL","CGPoint","int"]), new objj_method(sel_getUid("hitTest:"), function $CPSplitView__hitTest_(self, _cmd, aPoint)
{
    if (objj_msgSend(self, "isHidden") || !objj_msgSend(self, "hitTests") || !CGRectContainsPoint(objj_msgSend(self, "frame"), aPoint))
        return nil;
    var point = objj_msgSend(self, "convertPoint:fromView:", aPoint, objj_msgSend(self, "superview")),
        count = objj_msgSend(self._subviews, "count") - 1;
    for (var i = 0; i < count; i++)
    {
        if (objj_msgSend(self, "cursorAtPoint:hitDividerAtIndex:", point, i))
            return self;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSplitView").super_class }, "hitTest:", aPoint);
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("trackDivider:"), function $CPSplitView__trackDivider_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type == CPLeftMouseUp)
    {
        self._shouldAutosave = YES;
        if (self._currentDivider != CPNotFound)
        {
            self._currentDivider = CPNotFound;
            objj_msgSend(self, "_autosave");
            objj_msgSend(self, "_updateResizeCursor:", anEvent);
        }
        return;
    }
    if (type == CPLeftMouseDown)
    {
        var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
            count = objj_msgSend(self._subviews, "count") - 1;
        self._currentDivider = CPNotFound;
        for (var i = 0; i < count; i++)
        {
            var frame = objj_msgSend(self._subviews[i], "frame"),
                startPosition = frame.origin[self._originComponent] + frame.size[self._sizeComponent];
            if (objj_msgSend(self, "cursorAtPoint:hitDividerAtIndex:", point, i))
            {
                if (objj_msgSend(anEvent, "clickCount") == 2 && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:canCollapseSubview:")) && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:")))
                {
                    var minPosition = objj_msgSend(self, "minPossiblePositionOfDividerAtIndex:", i),
                        maxPosition = objj_msgSend(self, "maxPossiblePositionOfDividerAtIndex:", i),
                        preCollapsePosition = objj_msgSend(self._preCollapsePositions, "objectForKey:", "" + i) || 0;
                    if (objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, self._subviews[i]) && objj_msgSend(self._delegate, "splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:", self, self._subviews[i], i))
                    {
                        if (objj_msgSend(self, "isSubviewCollapsed:", self._subviews[i]))
                            objj_msgSend(self, "setPosition:ofDividerAtIndex:", preCollapsePosition ? preCollapsePosition : minPosition + (maxPosition - minPosition) / 2, i);
                        else
                            objj_msgSend(self, "setPosition:ofDividerAtIndex:", minPosition, i);
                    }
                    else if (objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, self._subviews[i + 1]) && objj_msgSend(self._delegate, "splitView:shouldCollapseSubview:forDoubleClickOnDividerAtIndex:", self, self._subviews[i + 1], i))
                    {
                        if (objj_msgSend(self, "isSubviewCollapsed:", self._subviews[i + 1]))
                            objj_msgSend(self, "setPosition:ofDividerAtIndex:", preCollapsePosition ? preCollapsePosition : minPosition + (maxPosition - minPosition) / 2, i);
                        else
                            objj_msgSend(self, "setPosition:ofDividerAtIndex:", maxPosition, i);
                    }
                }
                else
                {
                    self._currentDivider = i;
                    self._initialOffset = startPosition - point[self._originComponent];
                    self._shouldAutosave = NO;
                    objj_msgSend(self, "_postNotificationWillResize");
                }
            }
        }
        if (self._currentDivider === CPNotFound)
            return;
    }
    else if (type == CPLeftMouseDragged && self._currentDivider != CPNotFound)
    {
        var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
        objj_msgSend(self, "setPosition:ofDividerAtIndex:", point[self._originComponent] + self._initialOffset, self._currentDivider);
        objj_msgSend(self, "_updateResizeCursor:", anEvent);
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackDivider:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $CPSplitView__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(self, "trackDivider:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("viewDidMoveToWindow"), function $CPSplitView__viewDidMoveToWindow(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("mouseEntered:"), function $CPSplitView__mouseEntered_(self, _cmd, anEvent)
{
    if (self._currentDivider == CPNotFound)
        objj_msgSend(self, "_updateResizeCursor:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseMoved:"), function $CPSplitView__mouseMoved_(self, _cmd, anEvent)
{
    if (self._currentDivider == CPNotFound)
        objj_msgSend(self, "_updateResizeCursor:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPSplitView__mouseExited_(self, _cmd, anEvent)
{
    if (self._currentDivider == CPNotFound)
        objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
}
,["void","CPEvent"]), new objj_method(sel_getUid("_updateResizeCursor:"), function $CPSplitView___updateResizeCursor_(self, _cmd, anEvent)
{
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
    if (objj_msgSend(anEvent, "type") === CPLeftMouseUp && !objj_msgSend(objj_msgSend(self, "window"), "acceptsMouseMovedEvents"))
    {
        objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
        return;
    }
    for (var i = 0, count = objj_msgSend(self._subviews, "count") - 1; i < count; i++)
    {
        if (self._currentDivider === i || self._currentDivider == CPNotFound && objj_msgSend(self, "cursorAtPoint:hitDividerAtIndex:", point, i))
        {
            var frameA = objj_msgSend(self._subviews[i], "frame"),
                sizeA = frameA.size[self._sizeComponent],
                startPosition = frameA.origin[self._originComponent] + sizeA,
                frameB = objj_msgSend(self._subviews[i + 1], "frame"),
                sizeB = frameB.size[self._sizeComponent],
                canShrink = objj_msgSend(self, "_realPositionForPosition:ofDividerAtIndex:", startPosition - 1, i) < startPosition,
                canGrow = objj_msgSend(self, "_realPositionForPosition:ofDividerAtIndex:", startPosition + 1, i) > startPosition,
                cursor = objj_msgSend(CPCursor, "arrowCursor");
            if (sizeA === 0)
                canGrow = YES;
            else if (!canShrink && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:canCollapseSubview:")) && objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, self._subviews[i]))
            {
                canShrink = YES;
            }
            if (sizeB === 0)
            {
                canGrow = NO;
                canShrink = YES;
            }
            else if (!canGrow && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:canCollapseSubview:")) && objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, self._subviews[i + 1]))
            {
                canGrow = YES;
            }
            if (self._isVertical && canShrink && canGrow)
                cursor = objj_msgSend(CPCursor, "resizeLeftRightCursor");
            else if (self._isVertical && canShrink)
                cursor = objj_msgSend(CPCursor, "resizeLeftCursor");
            else if (self._isVertical && canGrow)
                cursor = objj_msgSend(CPCursor, "resizeRightCursor");
            else if (canShrink && canGrow)
                cursor = objj_msgSend(CPCursor, "resizeUpDownCursor");
            else if (canShrink)
                cursor = objj_msgSend(CPCursor, "resizeUpCursor");
            else if (canGrow)
                cursor = objj_msgSend(CPCursor, "resizeDownCursor");
            objj_msgSend(cursor, "set");
            return;
        }
    }
    objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
}
,["void","CPEvent"]), new objj_method(sel_getUid("maxPossiblePositionOfDividerAtIndex:"), function $CPSplitView__maxPossiblePositionOfDividerAtIndex_(self, _cmd, dividerIndex)
{
    var frame = objj_msgSend(self._subviews[dividerIndex + 1], "frame");
    if (dividerIndex + 1 < objj_msgSend(self._subviews, "count") - 1)
        return frame.origin[self._originComponent] + frame.size[self._sizeComponent] - objj_msgSend(self, "dividerThickness");
    else
        return objj_msgSend(self, "frame").size[self._sizeComponent] - objj_msgSend(self, "dividerThickness");
}
,["float","int"]), new objj_method(sel_getUid("minPossiblePositionOfDividerAtIndex:"), function $CPSplitView__minPossiblePositionOfDividerAtIndex_(self, _cmd, dividerIndex)
{
    if (dividerIndex > 0)
    {
        var frame = objj_msgSend(self._subviews[dividerIndex - 1], "frame");
        return frame.origin[self._originComponent] + frame.size[self._sizeComponent] + objj_msgSend(self, "dividerThickness");
    }
    else
        return 0;
}
,["float","int"]), new objj_method(sel_getUid("_realPositionForPosition:ofDividerAtIndex:"), function $CPSplitView___realPositionForPosition_ofDividerAtIndex_(self, _cmd, position, dividerIndex)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:constrainSplitPosition:ofSubviewAt:")))
    {
        var proposedPosition = objj_msgSend(self._delegate, "splitView:constrainSplitPosition:ofSubviewAt:", self, position, dividerIndex);
        if (!isNaN(parseFloat(proposedPosition)) && isFinite(proposedPosition))
            position = proposedPosition;
    }
    var proposedMax = objj_msgSend(self, "maxPossiblePositionOfDividerAtIndex:", dividerIndex),
        proposedMin = objj_msgSend(self, "minPossiblePositionOfDividerAtIndex:", dividerIndex),
        actualMax = proposedMax,
        actualMin = proposedMin;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:constrainMinCoordinate:ofSubviewAt:")))
    {
        var proposedActualMin = objj_msgSend(self._delegate, "splitView:constrainMinCoordinate:ofSubviewAt:", self, proposedMin, dividerIndex);
        if (!isNaN(parseFloat(proposedActualMin)) && isFinite(proposedActualMin))
            actualMin = proposedActualMin;
    }
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:constrainMaxCoordinate:ofSubviewAt:")))
    {
        var proposedActualMax = objj_msgSend(self._delegate, "splitView:constrainMaxCoordinate:ofSubviewAt:", self, proposedMax, dividerIndex);
        if (!isNaN(parseFloat(proposedActualMax)) && isFinite(proposedActualMax))
            actualMax = proposedActualMax;
    }
    var viewA = self._subviews[dividerIndex],
        viewB = self._subviews[dividerIndex + 1],
        realPosition = MAX(MIN(position, actualMax), actualMin);
    if (position < proposedMin + (actualMin - proposedMin) / 2)
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:canCollapseSubview:")))
            if (objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, viewA))
                realPosition = proposedMin;
    if (position > proposedMax - (proposedMax - actualMax) / 2)
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:canCollapseSubview:")))
            if (objj_msgSend(self._delegate, "splitView:canCollapseSubview:", self, viewB))
                realPosition = proposedMax;
    return realPosition;
}
,["int","float","int"]), new objj_method(sel_getUid("setPosition:ofDividerAtIndex:"), function $CPSplitView__setPosition_ofDividerAtIndex_(self, _cmd, position, dividerIndex)
{
    self._shouldRestoreFromAutosaveUnlessFrameSize = nil;
    if (YES)
        self._suppressResizeNotificationsMask |= ShouldSuppressResizeNotifications;
    else
        self._suppressResizeNotificationsMask = 0;
    objj_msgSend(self, "_adjustSubviewsWithCalculatedSize");
    var realPosition = objj_msgSend(self, "_realPositionForPosition:ofDividerAtIndex:", position, dividerIndex),
        viewA = self._subviews[dividerIndex],
        frameA = objj_msgSend(viewA, "frame"),
        viewB = self._subviews[dividerIndex + 1],
        frameB = objj_msgSend(viewB, "frame"),
        preCollapsePosition = 0,
        preSize = frameA.size[self._sizeComponent];
    frameA.size[self._sizeComponent] = realPosition - frameA.origin[self._originComponent];
    if (preSize !== 0 && frameA.size[self._sizeComponent] === 0)
        preCollapsePosition = preSize;
    if (preSize !== frameA.size[self._sizeComponent])
    {
        if ((self._suppressResizeNotificationsMask & DidPostWillResizeNotification) === 0)
        {
            objj_msgSend(self, "_postNotificationWillResize");
            self._suppressResizeNotificationsMask |= DidPostWillResizeNotification;
        }
        objj_msgSend(self._subviews[dividerIndex], "setFrame:", frameA);
        if ((self._suppressResizeNotificationsMask & ShouldSuppressResizeNotifications) !== 0)
            self._suppressResizeNotificationsMask |= DidSuppressResizeNotification;
        else
            objj_msgSend(self, "_postNotificationDidResize");
    }
    preSize = frameB.size[self._sizeComponent];
    var preOrigin = frameB.origin[self._originComponent];
    frameB.size[self._sizeComponent] = frameB.origin[self._originComponent] + frameB.size[self._sizeComponent] - realPosition - objj_msgSend(self, "dividerThickness");
    if (preSize !== 0 && frameB.size[self._sizeComponent] === 0)
        preCollapsePosition = frameB.origin[self._originComponent];
    frameB.origin[self._originComponent] = realPosition + objj_msgSend(self, "dividerThickness");
    if (preSize !== frameB.size[self._sizeComponent] || preOrigin !== frameB.origin[self._originComponent])
    {
        if ((self._suppressResizeNotificationsMask & DidPostWillResizeNotification) === 0)
        {
            objj_msgSend(self, "_postNotificationWillResize");
            self._suppressResizeNotificationsMask |= DidPostWillResizeNotification;
        }
        objj_msgSend(self._subviews[dividerIndex + 1], "setFrame:", frameB);
        if ((self._suppressResizeNotificationsMask & ShouldSuppressResizeNotifications) !== 0)
            self._suppressResizeNotificationsMask |= DidSuppressResizeNotification;
        else
            objj_msgSend(self, "_postNotificationDidResize");
    }
    if (preCollapsePosition)
        objj_msgSend(self._preCollapsePositions, "setObject:forKey:", preCollapsePosition, "" + dividerIndex);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    if ((self._suppressResizeNotificationsMask & DidSuppressResizeNotification) !== 0)
        objj_msgSend(self, "_postNotificationDidResize");
    if (NO)
        self._suppressResizeNotificationsMask |= ShouldSuppressResizeNotifications;
    else
        self._suppressResizeNotificationsMask = 0;
}
,["void","float","int"]), new objj_method(sel_getUid("setFrameSize:"), function $CPSplitView__setFrameSize_(self, _cmd, aSize)
{
    if (self._shouldRestoreFromAutosaveUnlessFrameSize)
        self._shouldAutosave = NO;
    else
        objj_msgSend(self, "_adjustSubviewsWithCalculatedSize");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSplitView").super_class }, "setFrameSize:", aSize);
    if (self._shouldRestoreFromAutosaveUnlessFrameSize)
        self._shouldAutosave = YES;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CGSize"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $CPSplitView__resizeSubviewsWithOldSize_(self, _cmd, oldSize)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:resizeSubviewsWithOldSize:")))
    {
        objj_msgSend(self._delegate, "splitView:resizeSubviewsWithOldSize:", self, oldSize);
        return;
    }
    objj_msgSend(self, "adjustSubviews");
}
,["void","CGSize"]), new objj_method(sel_getUid("adjustSubviews"), function $CPSplitView__adjustSubviews(self, _cmd)
{
    var count = objj_msgSend(self._subviews, "count");
    if (!count)
        return;
    if ((self._suppressResizeNotificationsMask & DidPostWillResizeNotification) === 0)
    {
        objj_msgSend(self, "_postNotificationWillResize");
        self._suppressResizeNotificationsMask |= DidPostWillResizeNotification;
    }
    objj_msgSend(self, "_postNotificationWillResize");
    var index = 0,
        bounds = objj_msgSend(self, "bounds"),
        boundsSize = bounds.size[self._sizeComponent],
        oldSize = objj_msgSend(self, "_calculateSize"),
        dividerThickness = objj_msgSend(self, "dividerThickness"),
        totalDividers = count - 1,
        oldFlexibleSpace = 0,
        totalSizablePanes = 0,
        isSizableMap = {},
        viewSizes = [],
        delegateRespondsToShouldAdjust = objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitView:shouldAdjustSizeOfSubview:"));
    for (index = 0; index < count; ++index)
    {
        var view = self._subviews[index],
            isSizable = !delegateRespondsToShouldAdjust || objj_msgSend(self._delegate, "splitView:shouldAdjustSizeOfSubview:", self, view),
            size = objj_msgSend(view, "frame").size[self._sizeComponent];
        isSizableMap[index] = isSizable;
        viewSizes.push(size);
        if (isSizable)
        {
            oldFlexibleSpace += size;
            totalSizablePanes++;
        }
    }
    var nonSizableSpace = oldSize[self._sizeComponent] - oldFlexibleSpace,
        newFlexibleSpace = boundsSize - nonSizableSpace,
        remainingFixedPixelsToRemove = 0;
    if (newFlexibleSpace < 0)
    {
        remainingFixedPixelsToRemove = -newFlexibleSpace;
        newFlexibleSpace = 0;
    }
    var remainingFixedPanes = count - totalSizablePanes;
    for (index = 0; index < count; ++index)
    {
        var view = self._subviews[index],
            viewFrame = CGRectMakeCopy(bounds),
            isSizable = isSizableMap[index],
            targetSize = 0;
        if (index + 1 === count)
            targetSize = boundsSize - viewFrame.origin[self._originComponent];
        else if (!isSizable)
        {
            var removedFixedPixels = MIN(remainingFixedPixelsToRemove / remainingFixedPanes, viewSizes[index]);
            targetSize = viewSizes[index] - removedFixedPixels;
            remainingFixedPixelsToRemove -= removedFixedPixels;
            remainingFixedPanes--;
        }
        else if (oldFlexibleSpace > 0)
            targetSize = newFlexibleSpace * viewSizes[index] / oldFlexibleSpace;
        else
            targetSize = newFlexibleSpace / totalSizablePanes;
        targetSize = MAX(0, ROUND(targetSize));
        viewFrame.size[self._sizeComponent] = targetSize;
        objj_msgSend(view, "setFrame:", viewFrame);
        bounds.origin[self._originComponent] += targetSize + dividerThickness;
    }
    if ((self._suppressResizeNotificationsMask & ShouldSuppressResizeNotifications) !== 0)
        self._suppressResizeNotificationsMask |= DidSuppressResizeNotification;
    else
        objj_msgSend(self, "_postNotificationDidResize");
}
,["void"]), new objj_method(sel_getUid("setDelegate:"), function $CPSplitView__setDelegate_(self, _cmd, delegate)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitViewDidResizeSubviews:")))
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self._delegate, CPSplitViewDidResizeSubviewsNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitViewWillResizeSubviews:")))
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self._delegate, CPSplitViewWillResizeSubviewsNotification, self);
    self._delegate = delegate;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitViewDidResizeSubviews:")))
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self._delegate, sel_getUid("splitViewDidResizeSubviews:"), CPSplitViewDidResizeSubviewsNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("splitViewWillResizeSubviews:")))
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self._delegate, sel_getUid("splitViewWillResizeSubviews:"), CPSplitViewWillResizeSubviewsNotification, self);
}
,["void","id"]), new objj_method(sel_getUid("setButtonBar:forDividerAtIndex:"), function $CPSplitView__setButtonBar_forDividerAtIndex_(self, _cmd, aButtonBar, dividerIndex)
{
    if (!aButtonBar)
    {
        self._buttonBars[dividerIndex] = nil;
        return;
    }
    var view = objj_msgSend(aButtonBar, "superview"),
        subview = aButtonBar;
    while (view && view !== self)
    {
        subview = view;
        view = objj_msgSend(view, "superview");
    }
    if (view !== self)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "CPSplitView button bar must be a subview of the split view.");
    var viewIndex = objj_msgSend(objj_msgSend(self, "subviews"), "indexOfObject:", subview);
    objj_msgSend(aButtonBar, "setHasResizeControl:", YES);
    objj_msgSend(aButtonBar, "setResizeControlIsLeftAligned:", dividerIndex < viewIndex);
    self._buttonBars[dividerIndex] = aButtonBar;
}
,["void","CPButtonBar","unsigned"]), new objj_method(sel_getUid("_postNotificationWillResize"), function $CPSplitView___postNotificationWillResize(self, _cmd)
{
    var userInfo = nil;
    if (self._currentDivider !== CPNotFound)
        userInfo = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self._currentDivider, "CPSplitViewDividerIndex");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPSplitViewWillResizeSubviewsNotification, self, userInfo);
}
,["void"]), new objj_method(sel_getUid("_postNotificationDidResize"), function $CPSplitView___postNotificationDidResize(self, _cmd)
{
    var userInfo = nil;
    if (self._currentDivider !== CPNotFound)
        userInfo = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self._currentDivider, "CPSplitViewDividerIndex");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPSplitViewDidResizeSubviewsNotification, self, userInfo);
    objj_msgSend(self, "_autosave");
}
,["void"]), new objj_method(sel_getUid("setAutosaveName:"), function $CPSplitView__setAutosaveName_(self, _cmd, autosaveName)
{
    if (self._autosaveName == autosaveName)
        return;
    self._autosaveName = autosaveName;
}
,["void","CPString"]), new objj_method(sel_getUid("autosaveName"), function $CPSplitView__autosaveName(self, _cmd)
{
    return self._autosaveName;
}
,["CPString"]), new objj_method(sel_getUid("_autosave"), function $CPSplitView___autosave(self, _cmd)
{
    if (self._shouldRestoreFromAutosaveUnlessFrameSize || !self._shouldAutosave || !self._autosaveName)
        return;
    var userDefaults = objj_msgSend(CPUserDefaults, "standardUserDefaults"),
        autosaveName = objj_msgSend(self, "_framesKeyForAutosaveName:", objj_msgSend(self, "autosaveName")),
        autosavePrecollapseName = objj_msgSend(self, "_precollapseKeyForAutosaveName:", objj_msgSend(self, "autosaveName")),
        count = objj_msgSend(self._subviews, "count"),
        positions = objj_msgSend(CPMutableArray, "new"),
        preCollapseArray = objj_msgSend(CPMutableArray, "new");
    for (var i = 0; i < count; i++)
    {
        var frame = objj_msgSend(self._subviews[i], "frame");
        objj_msgSend(positions, "addObject:", CGStringFromRect(frame));
        objj_msgSend(preCollapseArray, "addObject:", objj_msgSend(self._preCollapsePositions, "objectForKey:", "" + i));
    }
    objj_msgSend(userDefaults, "setObject:forKey:", positions, autosaveName);
    objj_msgSend(userDefaults, "setObject:forKey:", preCollapseArray, autosavePrecollapseName);
}
,["void"]), new objj_method(sel_getUid("_restoreFromAutosaveIfNeeded"), function $CPSplitView___restoreFromAutosaveIfNeeded(self, _cmd)
{
    if (self._shouldRestoreFromAutosaveUnlessFrameSize && !CGSizeEqualToSize(objj_msgSend(self, "frameSize"), self._shouldRestoreFromAutosaveUnlessFrameSize))
    {
        objj_msgSend(self, "_restoreFromAutosave");
    }
    self._shouldRestoreFromAutosaveUnlessFrameSize = nil;
}
,["void"]), new objj_method(sel_getUid("_restoreFromAutosave"), function $CPSplitView___restoreFromAutosave(self, _cmd)
{
    if (!self._autosaveName)
        return;
    var autosaveName = objj_msgSend(self, "_framesKeyForAutosaveName:", objj_msgSend(self, "autosaveName")),
        autosavePrecollapseName = objj_msgSend(self, "_precollapseKeyForAutosaveName:", objj_msgSend(self, "autosaveName")),
        userDefaults = objj_msgSend(CPUserDefaults, "standardUserDefaults"),
        frames = objj_msgSend(userDefaults, "objectForKey:", autosaveName),
        preCollapseArray = objj_msgSend(userDefaults, "objectForKey:", autosavePrecollapseName);
    if (frames)
    {
        var dividerThickness = objj_msgSend(self, "dividerThickness"),
            position = 0;
        self._shouldAutosave = NO;
        for (var i = 0, count = objj_msgSend(frames, "count") - 1; i < count; i++)
        {
            var frame = CGRectFromString(frames[i]);
            position += frame.size[self._sizeComponent];
            objj_msgSend(self, "setPosition:ofDividerAtIndex:", position, i);
            position += dividerThickness;
        }
        self._shouldAutosave = YES;
    }
    if (preCollapseArray)
    {
        self._preCollapsePositions = objj_msgSend(CPMutableDictionary, "new");
        for (var i = 0, count = objj_msgSend(preCollapseArray, "count"); i < count; i++)
        {
            var item = preCollapseArray[i];
            if (item === nil)
                objj_msgSend(self._preCollapsePositions, "removeObjectForKey:", String(i));
            else
                objj_msgSend(self._preCollapsePositions, "setObject:forKey:", item, String(i));
        }
    }
}
,["void"]), new objj_method(sel_getUid("_framesKeyForAutosaveName:"), function $CPSplitView___framesKeyForAutosaveName_(self, _cmd, theAutosaveName)
{
    if (!theAutosaveName)
        return nil;
    return "CPSplitView Subview Frames " + theAutosaveName;
}
,["CPString","CPString"]), new objj_method(sel_getUid("_precollapseKeyForAutosaveName:"), function $CPSplitView___precollapseKeyForAutosaveName_(self, _cmd, theAutosaveName)
{
    if (!theAutosaveName)
        return nil;
    return "CPSplitView Subview Precollapse Positions " + theAutosaveName;
}
,["CPString","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPSplitView__defaultThemeClass(self, _cmd)
{
    return "splitview";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPSplitView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", 1.0, "divider-thickness", 10.0, "pane-divider-thickness", objj_msgSend(CPColor, "grayColor"), "pane-divider-color", objj_msgSend(CPNull, "null"), "horizontal-divider-color", objj_msgSend(CPNull, "null"), "vertical-divider-color");
}
,["id"])]);
}var CPSplitViewDelegateKey = "CPSplitViewDelegateKey",
    CPSplitViewIsVerticalKey = "CPSplitViewIsVerticalKey",
    CPSplitViewIsPaneSplitterKey = "CPSplitViewIsPaneSplitterKey",
    CPSplitViewButtonBarsKey = "CPSplitViewButtonBarsKey",
    CPSplitViewAutosaveNameKey = "CPSplitViewAutosaveNameKey";
{
var the_class = objj_getClass("CPSplitView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPSplitView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPSplitView__initWithCoder_(self, _cmd, aCoder)
{
    self._autosaveName = objj_msgSend(aCoder, "decodeObjectForKey:", CPSplitViewAutosaveNameKey);
    if (self._autosaveName)
    {
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "performSelector:target:argument:order:modes:", sel_getUid("_restoreFromAutosaveIfNeeded"), self, nil, 0, [CPDefaultRunLoopMode]);
    }
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSplitView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._suppressResizeNotificationsMask = 0;
        self._preCollapsePositions = objj_msgSend(CPMutableDictionary, "new");
        self._currentDivider = CPNotFound;
        self._shouldAutosave = YES;
        self._DOMDividerElements = [];
        self._buttonBars = objj_msgSend(aCoder, "decodeObjectForKey:", CPSplitViewButtonBarsKey) || [];
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", CPSplitViewDelegateKey));
        self._isPaneSplitter = objj_msgSend(aCoder, "decodeBoolForKey:", CPSplitViewIsPaneSplitterKey);
        objj_msgSend(self, "_setVertical:", objj_msgSend(aCoder, "decodeBoolForKey:", CPSplitViewIsVerticalKey));
        if (self._autosaveName)
        {
            objj_msgSend(self, "_restoreFromAutosave");
            self._shouldRestoreFromAutosaveUnlessFrameSize = objj_msgSend(self, "frameSize");
        }
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPSplitView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPSplitView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._delegate, CPSplitViewDelegateKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isVertical, CPSplitViewIsVerticalKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isPaneSplitter, CPSplitViewIsPaneSplitterKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._autosaveName, CPSplitViewAutosaveNameKey);
}
,["void","CPCoder"])]);
}p;11;CPStepper.jt;14193;@STATIC;1.0;i;11;CPControl.ji;10;CPButton.ji;13;CPTextField.jt;14124;objj_executeFile("CPControl.j", YES);objj_executeFile("CPButton.j", YES);objj_executeFile("CPTextField.j", YES);{var the_class = objj_allocateClassPair(CPControl, "CPStepper"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_valueWraps"), new objj_ivar("_autorepeat"), new objj_ivar("_increment"), new objj_ivar("_maxValue"), new objj_ivar("_minValue"), new objj_ivar("_buttonDown"), new objj_ivar("_buttonUp")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("valueWraps"), function $CPStepper__valueWraps(self, _cmd)
{
    return self._valueWraps;
}
,["BOOL"]), new objj_method(sel_getUid("setValueWraps:"), function $CPStepper__setValueWraps_(self, _cmd, newValue)
{
    self._valueWraps = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("autorepeat"), function $CPStepper__autorepeat(self, _cmd)
{
    return self._autorepeat;
}
,["BOOL"]), new objj_method(sel_getUid("_setAutorepeat:"), function $CPStepper___setAutorepeat_(self, _cmd, newValue)
{
    self._autorepeat = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("increment"), function $CPStepper__increment(self, _cmd)
{
    return self._increment;
}
,["int"]), new objj_method(sel_getUid("setIncrement:"), function $CPStepper__setIncrement_(self, _cmd, newValue)
{
    self._increment = newValue;
}
,["void","int"]), new objj_method(sel_getUid("maxValue"), function $CPStepper__maxValue(self, _cmd)
{
    return self._maxValue;
}
,["int"]), new objj_method(sel_getUid("setMaxValue:"), function $CPStepper__setMaxValue_(self, _cmd, newValue)
{
    self._maxValue = newValue;
}
,["void","int"]), new objj_method(sel_getUid("minValue"), function $CPStepper__minValue(self, _cmd)
{
    return self._minValue;
}
,["int"]), new objj_method(sel_getUid("setMinValue:"), function $CPStepper__setMinValue_(self, _cmd, newValue)
{
    self._minValue = newValue;
}
,["void","int"]), new objj_method(sel_getUid("_replacementKeyPathForBinding:"), function $CPStepper___replacementKeyPathForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return "doubleValue";
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "_replacementKeyPathForBinding:", aBinding);
}
,["CPString","CPString"]), new objj_method(sel_getUid("initWithFrame:"), function $CPStepper__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "initWithFrame:", aFrame))
    {
        self._maxValue = 59.0;
        self._minValue = 0.0;
        self._increment = 1.0;
        self._valueWraps = YES;
        self._autorepeat = YES;
        objj_msgSend(self, "setDoubleValue:", 0.0);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPStepper___init(self, _cmd)
{
    self._buttonUp = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._buttonUp, "setContinuous:", self._autorepeat);
    objj_msgSend(self._buttonUp, "setTarget:", self);
    objj_msgSend(self._buttonUp, "setAction:", sel_getUid("_buttonDidClick:"));
    objj_msgSend(self._buttonUp, "setAutoresizingMask:", CPViewNotSizable);
    objj_msgSend(self, "addSubview:", self._buttonUp);
    self._buttonDown = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._buttonDown, "setContinuous:", self._autorepeat);
    objj_msgSend(self._buttonDown, "setTarget:", self);
    objj_msgSend(self._buttonDown, "setAction:", sel_getUid("_buttonDidClick:"));
    objj_msgSend(self._buttonDown, "setAutoresizingMask:", CPViewNotSizable);
    objj_msgSend(self, "setContinuous:", self._autorepeat);
    objj_msgSend(self, "addSubview:", self._buttonDown);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("setEnabled:"), function $CPStepper__setEnabled_(self, _cmd, shouldEnabled)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "setEnabled:", shouldEnabled);
    objj_msgSend(self._buttonUp, "setEnabled:", shouldEnabled);
    objj_msgSend(self._buttonDown, "setEnabled:", shouldEnabled);
}
,["void","BOOL"]), new objj_method(sel_getUid("setFrame:"), function $CPStepper__setFrame_(self, _cmd, aFrame)
{
    var upSize = objj_msgSend(self, "valueForThemeAttribute:", "up-button-size"),
        downSize = objj_msgSend(self, "valueForThemeAttribute:", "down-button-size"),
        minSize = CGSizeMake(upSize.width, upSize.height + downSize.height),
        frame = CGRectMakeCopy(aFrame);
    frame.size.width = MAX(minSize.width, frame.size.width);
    frame.size.height = MAX(minSize.height, frame.size.height);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "setFrame:", frame);
}
,["void","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $CPStepper__layoutSubviews(self, _cmd)
{
    var aFrame = objj_msgSend(self, "frame"),
        upSize = objj_msgSend(self, "valueForThemeAttribute:", "up-button-size"),
        downSize = objj_msgSend(self, "valueForThemeAttribute:", "down-button-size"),
        upFrame = CGRectMake(aFrame.size.width - upSize.width, 0, upSize.width, upSize.height),
        downFrame = CGRectMake(aFrame.size.width - downSize.width, upSize.height, downSize.width, downSize.height);
    objj_msgSend(self._buttonUp, "setFrame:", upFrame);
    objj_msgSend(self._buttonDown, "setFrame:", downFrame);
    objj_msgSend(self._buttonUp, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-up-button", CPThemeStateBordered), "bezel-color", CPThemeStateBordered);
    objj_msgSend(self._buttonUp, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-up-button", CPThemeStateBordered | CPThemeStateDisabled), "bezel-color", CPThemeStateBordered | CPThemeStateDisabled);
    objj_msgSend(self._buttonUp, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-up-button", CPThemeStateBordered | CPThemeStateHighlighted), "bezel-color", CPThemeStateBordered | CPThemeStateHighlighted);
    objj_msgSend(self._buttonDown, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-down-button", CPThemeStateBordered), "bezel-color", CPThemeStateBordered);
    objj_msgSend(self._buttonDown, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-down-button", CPThemeStateBordered | CPThemeStateDisabled), "bezel-color", CPThemeStateBordered | CPThemeStateDisabled);
    objj_msgSend(self._buttonDown, "setValue:forThemeAttribute:inState:", objj_msgSend(self, "valueForThemeAttribute:inState:", "bezel-color-down-button", CPThemeStateBordered | CPThemeStateHighlighted), "bezel-color", CPThemeStateBordered | CPThemeStateHighlighted);
}
,["void"]), new objj_method(sel_getUid("_sizeToFit"), function $CPStepper___sizeToFit(self, _cmd)
{
    objj_msgSend(self, "setFrame:", CGRectMake(objj_msgSend(self, "frameOrigin").x, objj_msgSend(self, "frameOrigin").y, 0, 0));
}
,["void"]), new objj_method(sel_getUid("setAutorepeat:"), function $CPStepper__setAutorepeat_(self, _cmd, shouldAutoRepeat)
{
    if (shouldAutoRepeat !== self._autorepeat)
    {
        objj_msgSend(self._buttonUp, "setContinuous:", shouldAutoRepeat);
        objj_msgSend(self._buttonDown, "setContinuous:", shouldAutoRepeat);
    }
    objj_msgSend(self, "setContinuous:", shouldAutoRepeat);
}
,["void","BOOL"]), new objj_method(sel_getUid("setDoubleValue:"), function $CPStepper__setDoubleValue_(self, _cmd, aValue)
{
    if (aValue > self._maxValue)
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "setDoubleValue:", self._valueWraps ? self._minValue : self._maxValue);
    else if (aValue < self._minValue)
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "setDoubleValue:", self._valueWraps ? self._maxValue : self._minValue);
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "setDoubleValue:", aValue);
}
,["void","float"]), new objj_method(sel_getUid("_buttonDidClick:"), function $CPStepper___buttonDidClick_(self, _cmd, aSender)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    if (aSender == self._buttonUp)
        objj_msgSend(self, "setDoubleValue:", objj_msgSend(self, "doubleValue") + self._increment);
    else
        objj_msgSend(self, "setDoubleValue:", objj_msgSend(self, "doubleValue") - self._increment);
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
}
,["id","id"]), new objj_method(sel_getUid("performClickUp:"), function $CPStepper__performClickUp_(self, _cmd, aSender)
{
    objj_msgSend(self._buttonUp, "performClick:", aSender);
}
,["id","id"]), new objj_method(sel_getUid("performClickDown:"), function $CPStepper__performClickDown_(self, _cmd, aSender)
{
    objj_msgSend(self._buttonDown, "performClick:", aSender);
}
,["id","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("stepperWithInitialValue:minValue:maxValue:"), function $CPStepper__stepperWithInitialValue_minValue_maxValue_(self, _cmd, aValue, aMinValue, aMaxValue)
{
    var stepper = objj_msgSend(objj_msgSend(CPStepper, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(stepper, "setDoubleValue:", aValue);
    objj_msgSend(stepper, "setMinValue:", aMinValue);
    objj_msgSend(stepper, "setMaxValue:", aMaxValue);
    objj_msgSend(stepper, "_sizeToFit");
    return stepper;
}
,["CPStepper","float","float","float"]), new objj_method(sel_getUid("stepper"), function $CPStepper__stepper(self, _cmd)
{
    return objj_msgSend(CPStepper, "stepperWithInitialValue:minValue:maxValue:", 0.0, 0.0, 59.0);
}
,["CPStepper"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPStepper___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding || aBinding == CPMinValueBinding || aBinding == CPMaxValueBinding)
        return objj_msgSend(_CPStepperValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPStepper").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPStepper__defaultThemeClass(self, _cmd)
{
    return "stepper";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPStepper__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "bezel-color-up-button", objj_msgSend(CPNull, "null"), "bezel-color-down-button", CGSizeMakeZero(), "up-button-size", CGSizeMakeZero(), "down-button-size");
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPStepperValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:forBinding:"), function $_CPStepperValueBinder___updatePlaceholdersWithOptions_forBinding_(self, _cmd, options, aBinding)
{
    var placeholder = aBinding == CPMaxValueBinding ? objj_msgSend(self._source, "maxValue") : objj_msgSend(self._source, "minValue");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStepperValueBinder").super_class }, "_updatePlaceholdersWithOptions:", options);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholder, CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholder, CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholder, CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", placeholder, CPNullMarker, YES);
}
,["void","CPDictionary","CPString"])]);
}var CPStepperMinValue = "CPStepperMinValue",
    CPStepperMaxValue = "CPStepperMaxValue",
    CPStepperValueWraps = "CPStepperValueWraps",
    CPStepperAutorepeat = "CPStepperAutorepeat",
    CPStepperIncrement = "CPStepperIncrement";
{
var the_class = objj_getClass("CPStepper")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPStepper\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPStepper__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "initWithCoder:", aCoder))
    {
        self._increment = objj_msgSend(aCoder, "decodeIntForKey:", CPStepperIncrement);
        self._minValue = objj_msgSend(aCoder, "decodeIntForKey:", CPStepperMinValue);
        self._maxValue = objj_msgSend(aCoder, "decodeIntForKey:", CPStepperMaxValue);
        self._valueWraps = objj_msgSend(aCoder, "decodeBoolForKey:", CPStepperValueWraps);
        self._autorepeat = objj_msgSend(aCoder, "decodeBoolForKey:", CPStepperAutorepeat);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPStepper__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPStepper").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._increment, CPStepperIncrement);
    if (self._minValue)
        objj_msgSend(aCoder, "encodeInt:forKey:", self._minValue, CPStepperMinValue);
    if (self._maxValue)
        objj_msgSend(aCoder, "encodeInt:forKey:", self._maxValue, CPStepperMaxValue);
    if (self._valueWraps)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._valueWraps, CPStepperValueWraps);
    if (self._autorepeat)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._autorepeat, CPStepperAutorepeat);
}
,["void","CPCoder"])]);
}p;17;CPStringDrawing.jt;1698;@STATIC;1.0;I;21;Foundation/CPString.ji;12;CGGeometry.ji;18;CPPlatformString.jt;1613;objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPPlatformString.j", YES);var CPStringSizeWithFontInWidthCache = {};
CPStringSizeCachingEnabled = YES;
{
var the_class = objj_getClass("CPString")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPString\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("cssString"), function $CPString__cssString(self, _cmd)
{
    return self;
}
,["CPString"]), new objj_method(sel_getUid("sizeWithFont:"), function $CPString__sizeWithFont_(self, _cmd, aFont)
{
    return objj_msgSend(self, "sizeWithFont:inWidth:", aFont, NULL);
}
,["CGSize","CPFont"]), new objj_method(sel_getUid("sizeWithFont:inWidth:"), function $CPString__sizeWithFont_inWidth_(self, _cmd, aFont, aWidth)
{
    if (!CPStringSizeCachingEnabled)
        return objj_msgSend(CPPlatformString, "sizeOfString:withFont:forWidth:", self, aFont, aWidth);
    var cacheKey = self + objj_msgSend(aFont, "cssString") + aWidth,
        size = CPStringSizeWithFontInWidthCache[cacheKey];
    if (size === undefined)
    {
        size = objj_msgSend(CPPlatformString, "sizeOfString:withFont:forWidth:", self, aFont, aWidth);
        CPStringSizeWithFontInWidthCache[cacheKey] = size;
    }
    return CGSizeMakeCopy(size);
}
,["CGSize","CPFont","float"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("metricsOfFont:"), function $CPString__metricsOfFont_(self, _cmd, aFont)
{
    return objj_msgSend(CPPlatformString, "metricsOfFont:", aFont);
}
,["CPDictionary","CPFont"])]);
}p;15;CPTableColumn.jt;23037;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;21;Foundation/CPObject.jI;23;Foundation/CPIndexSet.jI;29;Foundation/CPSortDescriptor.jI;21;Foundation/CPString.ji;13;CPTextField.jt;22855;objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("Foundation/CPSortDescriptor.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPTextField.j", YES);CPTableColumnNoResizing = 0;
CPTableColumnAutoresizingMask = 1 << 0;
CPTableColumnUserResizingMask = 1 << 1;
{var the_class = objj_allocateClassPair(CPObject, "CPTableColumn"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_tableView"), new objj_ivar("_headerView"), new objj_ivar("_dataView"), new objj_ivar("_dataViewData"), new objj_ivar("_width"), new objj_ivar("_minWidth"), new objj_ivar("_maxWidth"), new objj_ivar("_resizingMask"), new objj_ivar("_identifier"), new objj_ivar("_isEditable"), new objj_ivar("_sortDescriptorPrototype"), new objj_ivar("_isHidden"), new objj_ivar("_headerToolTip"), new objj_ivar("_disableResizingPosting")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("disableResizingPosting"), function $CPTableColumn__disableResizingPosting(self, _cmd)
{
    return self._disableResizingPosting;
}
,["BOOL"]), new objj_method(sel_getUid("setDisableResizingPosting:"), function $CPTableColumn__setDisableResizingPosting_(self, _cmd, newValue)
{
    self._disableResizingPosting = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("init"), function $CPTableColumn__init(self, _cmd)
{
    return objj_msgSend(self, "initWithIdentifier:", "");
}
,["id"]), new objj_method(sel_getUid("initWithIdentifier:"), function $CPTableColumn__initWithIdentifier_(self, _cmd, anIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableColumn").super_class }, "init");
    if (self)
    {
        self._dataViewData = nil;
        self._width = 100.0;
        self._minWidth = 10.0;
        self._maxWidth = 1000000.0;
        self._resizingMask = CPTableColumnAutoresizingMask | CPTableColumnUserResizingMask;
        self._disableResizingPosting = NO;
        objj_msgSend(self, "setIdentifier:", anIdentifier);
        var header = objj_msgSend(objj_msgSend(_CPTableColumnHeaderView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self, "setHeaderView:", header);
        objj_msgSend(self, "setDataView:", objj_msgSend(CPTextField, "new"));
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("setTableView:"), function $CPTableColumn__setTableView_(self, _cmd, aTableView)
{
    self._tableView = aTableView;
}
,["void","CPTableView"]), new objj_method(sel_getUid("tableView"), function $CPTableColumn__tableView(self, _cmd)
{
    return self._tableView;
}
,["CPTableView"]), new objj_method(sel_getUid("_tryToResizeToWidth:"), function $CPTableColumn___tryToResizeToWidth_(self, _cmd, width)
{
    var min = objj_msgSend(self, "minWidth"),
        max = objj_msgSend(self, "maxWidth"),
        newWidth = ROUND(MIN(MAX(width, min), max));
    objj_msgSend(self, "setWidth:", newWidth);
    return newWidth - width;
}
,["int","int"]), new objj_method(sel_getUid("setWidth:"), function $CPTableColumn__setWidth_(self, _cmd, aWidth)
{
    aWidth = +aWidth;
    if (self._width === aWidth)
        return;
    var newWidth = MIN(MAX(aWidth, objj_msgSend(self, "minWidth")), objj_msgSend(self, "maxWidth"));
    if (self._width === newWidth)
        return;
    var oldWidth = self._width;
    self._width = newWidth;
    var tableView = objj_msgSend(self, "tableView");
    if (tableView)
    {
        var index = objj_msgSend(objj_msgSend(tableView, "tableColumns"), "indexOfObjectIdenticalTo:", self),
            dirtyTableColumnRangeIndex = tableView._dirtyTableColumnRangeIndex;
        if (dirtyTableColumnRangeIndex < 0)
            tableView._dirtyTableColumnRangeIndex = index;
        else
            tableView._dirtyTableColumnRangeIndex = MIN(index, tableView._dirtyTableColumnRangeIndex);
        var rows = tableView._exposedRows,
            columns = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(index, objj_msgSend(tableView._exposedColumns, "lastIndex") - index + 1));
        objj_msgSend(tableView, "_layoutDataViewsInRows:columns:", rows, columns);
        objj_msgSend(tableView, "tile");
        if (!self._disableResizingPosting)
            objj_msgSend(self, "_postDidResizeNotificationWithOldWidth:", oldWidth);
    }
}
,["void","float"]), new objj_method(sel_getUid("width"), function $CPTableColumn__width(self, _cmd)
{
    return self._width;
}
,["float"]), new objj_method(sel_getUid("setMinWidth:"), function $CPTableColumn__setMinWidth_(self, _cmd, aMinWidth)
{
    aMinWidth = +aMinWidth;
    if (self._minWidth === aMinWidth)
        return;
    self._minWidth = aMinWidth;
    var width = objj_msgSend(self, "width"),
        newWidth = MAX(width, objj_msgSend(self, "minWidth"));
    if (width !== newWidth)
        objj_msgSend(self, "setWidth:", newWidth);
}
,["void","float"]), new objj_method(sel_getUid("minWidth"), function $CPTableColumn__minWidth(self, _cmd)
{
    return self._minWidth;
}
,["float"]), new objj_method(sel_getUid("setMaxWidth:"), function $CPTableColumn__setMaxWidth_(self, _cmd, aMaxWidth)
{
    aMaxWidth = +aMaxWidth;
    if (self._maxWidth === aMaxWidth)
        return;
    self._maxWidth = aMaxWidth;
    var width = objj_msgSend(self, "width"),
        newWidth = MIN(width, objj_msgSend(self, "maxWidth"));
    if (width !== newWidth)
        objj_msgSend(self, "setWidth:", newWidth);
}
,["void","float"]), new objj_method(sel_getUid("maxWidth"), function $CPTableColumn__maxWidth(self, _cmd)
{
    return self._maxWidth;
}
,["float"]), new objj_method(sel_getUid("setResizingMask:"), function $CPTableColumn__setResizingMask_(self, _cmd, aResizingMask)
{
    self._resizingMask = aResizingMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("resizingMask"), function $CPTableColumn__resizingMask(self, _cmd)
{
    return self._resizingMask;
}
,["unsigned"]), new objj_method(sel_getUid("sizeToFit"), function $CPTableColumn__sizeToFit(self, _cmd)
{
    var width = CGRectGetWidth(objj_msgSend(self._headerView, "frame"));
    if (width < objj_msgSend(self, "minWidth"))
        objj_msgSend(self, "setMinWidth:", width);
    else if (width > objj_msgSend(self, "maxWidth"))
        objj_msgSend(self, "setMaxWidth:", width);
    if (self._width !== width)
        objj_msgSend(self, "setWidth:", width);
}
,["void"]), new objj_method(sel_getUid("setHeaderView:"), function $CPTableColumn__setHeaderView_(self, _cmd, aView)
{
    if (!aView)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Attempt to set nil header view on " + objj_msgSend(self, "description"));
    self._headerView = aView;
    var tableHeaderView = objj_msgSend(self._tableView, "headerView");
    objj_msgSend(tableHeaderView, "setNeedsLayout");
    objj_msgSend(tableHeaderView, "setNeedsDisplay:", YES);
}
,["void","CPView"]), new objj_method(sel_getUid("headerView"), function $CPTableColumn__headerView(self, _cmd)
{
    return self._headerView;
}
,["CPView"]), new objj_method(sel_getUid("setDataView:"), function $CPTableColumn__setDataView_(self, _cmd, aView)
{
    if (self._dataView)
        self._dataViewData = nil;
    objj_msgSend(aView, "setThemeState:", CPThemeStateTableDataView);
    self._dataView = aView;
    self._dataViewData = objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", aView);
}
,["void","CPView"]), new objj_method(sel_getUid("dataView"), function $CPTableColumn__dataView(self, _cmd)
{
    return self._dataView;
}
,["CPView"]), new objj_method(sel_getUid("dataViewForRow:"), function $CPTableColumn__dataViewForRow_(self, _cmd, aRowIndex)
{
    return objj_msgSend(self, "dataView");
}
,["id","int"]), new objj_method(sel_getUid("_newDataView"), function $CPTableColumn___newDataView(self, _cmd)
{
    if (!self._dataViewData)
        return nil;
    var newDataView = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", self._dataViewData);
    objj_msgSend(newDataView, "setAutoresizingMask:", CPViewNotSizable);
    return newDataView;
}
,["id"]), new objj_method(sel_getUid("setIdentifier:"), function $CPTableColumn__setIdentifier_(self, _cmd, anIdentifier)
{
    self._identifier = anIdentifier;
}
,["void","id"]), new objj_method(sel_getUid("identifier"), function $CPTableColumn__identifier(self, _cmd)
{
    return self._identifier;
}
,["id"]), new objj_method(sel_getUid("setEditable:"), function $CPTableColumn__setEditable_(self, _cmd, shouldBeEditable)
{
    self._isEditable = shouldBeEditable;
}
,["void","BOOL"]), new objj_method(sel_getUid("isEditable"), function $CPTableColumn__isEditable(self, _cmd)
{
    return self._isEditable;
}
,["BOOL"]), new objj_method(sel_getUid("setSortDescriptorPrototype:"), function $CPTableColumn__setSortDescriptorPrototype_(self, _cmd, aSortDescriptor)
{
    self._sortDescriptorPrototype = aSortDescriptor;
}
,["void","CPSortDescriptor"]), new objj_method(sel_getUid("sortDescriptorPrototype"), function $CPTableColumn__sortDescriptorPrototype(self, _cmd)
{
    if (self._sortDescriptorPrototype)
        return self._sortDescriptorPrototype;
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", CPValueBinding),
        binding = objj_msgSend(binderClass, "getBinding:forObject:", CPValueBinding, self);
    return objj_msgSend(binding, "_defaultSortDescriptorPrototype");
}
,["CPSortDescriptor"]), new objj_method(sel_getUid("setHidden:"), function $CPTableColumn__setHidden_(self, _cmd, shouldBeHidden)
{
    shouldBeHidden = !!shouldBeHidden;
    if (self._isHidden === shouldBeHidden)
        return;
    self._isHidden = shouldBeHidden;
    objj_msgSend(objj_msgSend(self, "headerView"), "setHidden:", shouldBeHidden);
    objj_msgSend(objj_msgSend(self, "tableView"), "_tableColumnVisibilityDidChange:", self);
}
,["void","BOOL"]), new objj_method(sel_getUid("isHidden"), function $CPTableColumn__isHidden(self, _cmd)
{
    return self._isHidden;
}
,["BOOL"]), new objj_method(sel_getUid("setHeaderToolTip:"), function $CPTableColumn__setHeaderToolTip_(self, _cmd, aToolTip)
{
    self._headerToolTip = aToolTip;
}
,["void","CPString"]), new objj_method(sel_getUid("headerToolTip"), function $CPTableColumn__headerToolTip(self, _cmd)
{
    return self._headerToolTip;
}
,["CPString"]), new objj_method(sel_getUid("_postDidResizeNotificationWithOldWidth:"), function $CPTableColumn___postDidResizeNotificationWithOldWidth_(self, _cmd, oldWidth)
{
    objj_msgSend(objj_msgSend(self, "tableView"), "_didResizeTableColumn:", self);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPTableViewColumnDidResizeNotification, objj_msgSend(self, "tableView"), objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self, "CPTableColumn", oldWidth, "CPOldWidth"));
}
,["void","float"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "CPTableColumnValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setValueFor:"), function $CPTableColumnValueBinder__setValueFor_(self, _cmd, aBinding)
{
    var tableView = objj_msgSend(self._source, "tableView"),
        column = objj_msgSend(objj_msgSend(tableView, "tableColumns"), "indexOfObjectIdenticalTo:", self._source),
        rowIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(tableView, "numberOfRows"))),
        columnIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", column);
    objj_msgSend(tableView, "reloadDataForRowIndexes:columnIndexes:", rowIndexes, columnIndexes);
}
,["void","CPString"]), new objj_method(sel_getUid("_defaultSortDescriptorPrototype"), function $CPTableColumnValueBinder___defaultSortDescriptorPrototype(self, _cmd)
{
    if (!objj_msgSend(self, "createsSortDescriptor"))
        return nil;
    var keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey),
        dotIndex = keyPath.indexOf(".");
    if (dotIndex === CPNotFound)
        return nil;
    var firstPart = keyPath.substring(0, dotIndex),
        key = keyPath.substring(dotIndex + 1);
    return objj_msgSend(CPSortDescriptor, "sortDescriptorWithKey:ascending:", key, YES);
}
,["CPSortDescriptor"]), new objj_method(sel_getUid("createsSortDescriptor"), function $CPTableColumnValueBinder__createsSortDescriptor(self, _cmd)
{
    var options = objj_msgSend(self._info, "objectForKey:", CPOptionsKey),
        optionValue = objj_msgSend(options, "objectForKey:", CPCreatesSortDescriptorBindingOption);
    return optionValue === nil ? YES : objj_msgSend(optionValue, "boolValue");
}
,["BOOL"])]);
}{
var the_class = objj_getClass("CPTableColumn")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"), function $CPTableColumn__bind_toObject_withKeyPath_options_(self, _cmd, aBinding, anObject, aKeyPath, options)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableColumn").super_class }, "bind:toObject:withKeyPath:options:", aBinding, anObject, aKeyPath, options);
    if (!objj_msgSend(aBinding, "isEqual:", "someListOfExceptedBindings(notAcceptedBindings)"))
    {
        var acIndex = aKeyPath.lastIndexOf("arrangedObjects."),
            arrayController = anObject;
        if (acIndex > 1)
        {
            var firstPart = aKeyPath.substring(0, acIndex - 1);
            arrayController = objj_msgSend(anObject, "valueForKeyPath:", firstPart);
        }
        objj_msgSend(objj_msgSend(self, "tableView"), "_establishBindingsIfUnbound:", arrayController);
    }
}
,["void","CPString","id","CPString","CPDictionary"]), new objj_method(sel_getUid("_prepareDataView:forRow:"), function $CPTableColumn___prepareDataView_forRow_(self, _cmd, aDataView, aRow)
{
    var bindingsDictionary = objj_msgSend(CPBinder, "allBindingsForObject:", self),
        keys = objj_msgSend(bindingsDictionary, "allKeys");
    for (var i = 0, count = objj_msgSend(keys, "count"); i < count; i++)
    {
        var bindingName = keys[i],
            bindingPath = objj_msgSend(aDataView, "_replacementKeyPathForBinding:", bindingName),
            binding = objj_msgSend(bindingsDictionary, "objectForKey:", bindingName),
            bindingInfo = binding._info,
            destination = objj_msgSend(bindingInfo, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(bindingInfo, "objectForKey:", CPObservedKeyPathKey),
            dotIndex = keyPath.lastIndexOf("."),
            value;
        if (dotIndex === CPNotFound)
            value = objj_msgSend(objj_msgSend(destination, "valueForKeyPath:", keyPath), "objectAtIndex:", aRow);
        else
        {
            var firstPart = keyPath.substring(0, dotIndex),
                secondPart = keyPath.substring(dotIndex + 1),
                firstValue = objj_msgSend(destination, "valueForKeyPath:", firstPart);
            if (objj_msgSend(firstValue, "isKindOfClass:", CPArray))
                value = objj_msgSend(objj_msgSend(firstValue, "objectAtIndex:", aRow), "valueForKeyPath:", secondPart);
            else
                value = objj_msgSend(objj_msgSend(firstValue, "valueForKeyPath:", secondPart), "objectAtIndex:", aRow);
        }
        value = objj_msgSend(binding, "transformValue:withOptions:", value, objj_msgSend(bindingInfo, "objectForKey:", CPOptionsKey));
        objj_msgSend(aDataView, "setValue:forKey:", value, "objectValue");
    }
}
,["void","CPView","unsigned"]), new objj_method(sel_getUid("_reverseSetDataView:forRow:"), function $CPTableColumn___reverseSetDataView_forRow_(self, _cmd, aDataView, aRow)
{
    var bindingsDictionary = objj_msgSend(CPBinder, "allBindingsForObject:", self),
        keys = objj_msgSend(bindingsDictionary, "allKeys"),
        newValue = objj_msgSend(aDataView, "valueForKey:", "objectValue");
    for (var i = 0, count = objj_msgSend(keys, "count"); i < count; i++)
    {
        var bindingName = keys[i],
            bindingPath = objj_msgSend(aDataView, "_replacementKeyPathForBinding:", bindingName),
            binding = objj_msgSend(bindingsDictionary, "objectForKey:", bindingName),
            bindingInfo = binding._info,
            destination = objj_msgSend(bindingInfo, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(bindingInfo, "objectForKey:", CPObservedKeyPathKey),
            options = objj_msgSend(bindingInfo, "objectForKey:", CPOptionsKey),
            dotIndex = keyPath.lastIndexOf(".");
        newValue = objj_msgSend(binding, "reverseTransformValue:withOptions:", newValue, options);
        if (dotIndex === CPNotFound)
            objj_msgSend(objj_msgSend(destination, "valueForKeyPath:", keyPath), "replaceObjectAtIndex:withObject:", aRow, newValue);
        else
        {
            var firstPart = keyPath.substring(0, dotIndex),
                secondPart = keyPath.substring(dotIndex + 1),
                firstValue = objj_msgSend(destination, "valueForKeyPath:", firstPart);
            if (objj_msgSend(firstValue, "isKindOfClass:", CPArray))
                objj_msgSend(objj_msgSend(firstValue, "objectAtIndex:", aRow), "setValue:forKeyPath:", newValue, secondPart);
            else
                objj_msgSend(objj_msgSend(firstValue, "valueForKeyPath:", secondPart), "replaceObjectAtIndex:withObject:", aRow, newValue);
        }
    }
}
,["void","CPView","unsigned"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPTableColumn___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return objj_msgSend(CPTableColumnValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPTableColumn").super_class }, "_binderClassForBinding:", aBinding);
}
,["id","CPString"])]);
}var CPTableColumnIdentifierKey = "CPTableColumnIdentifierKey",
    CPTableColumnHeaderViewKey = "CPTableColumnHeaderViewKey",
    CPTableColumnDataViewKey = "CPTableColumnDataViewKey",
    CPTableColumnWidthKey = "CPTableColumnWidthKey",
    CPTableColumnMinWidthKey = "CPTableColumnMinWidthKey",
    CPTableColumnMaxWidthKey = "CPTableColumnMaxWidthKey",
    CPTableColumnResizingMaskKey = "CPTableColumnResizingMaskKey",
    CPTableColumnIsHiddenKey = "CPTableColumnIsHiddenKey",
    CPSortDescriptorPrototypeKey = "CPSortDescriptorPrototypeKey",
    CPTableColumnIsEditableKey = "CPTableColumnIsEditableKey";
{
var the_class = objj_getClass("CPTableColumn")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTableColumn__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableColumn").super_class }, "init");
    if (self)
    {
        self._dataViewData = nil;
        self._width = objj_msgSend(aCoder, "decodeFloatForKey:", CPTableColumnWidthKey);
        self._minWidth = objj_msgSend(aCoder, "decodeFloatForKey:", CPTableColumnMinWidthKey);
        self._maxWidth = objj_msgSend(aCoder, "decodeFloatForKey:", CPTableColumnMaxWidthKey);
        objj_msgSend(self, "setIdentifier:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableColumnIdentifierKey));
        objj_msgSend(self, "setHeaderView:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableColumnHeaderViewKey));
        objj_msgSend(self, "setDataView:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableColumnDataViewKey));
        self._resizingMask = objj_msgSend(aCoder, "decodeIntForKey:", CPTableColumnResizingMaskKey);
        self._isHidden = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableColumnIsHiddenKey);
        self._isEditable = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableColumnIsEditableKey);
        self._sortDescriptorPrototype = objj_msgSend(aCoder, "decodeObjectForKey:", CPSortDescriptorPrototypeKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTableColumn__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._identifier, CPTableColumnIdentifierKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._width, CPTableColumnWidthKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._minWidth, CPTableColumnMinWidthKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._maxWidth, CPTableColumnMaxWidthKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._headerView, CPTableColumnHeaderViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._dataView, CPTableColumnDataViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._resizingMask, CPTableColumnResizingMaskKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isHidden, CPTableColumnIsHiddenKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isEditable, CPTableColumnIsEditableKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._sortDescriptorPrototype, CPSortDescriptorPrototypeKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPTableColumn")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableColumn\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setHeaderCell:"), function $CPTableColumn__setHeaderCell_(self, _cmd, aView)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "setHeaderCell: is not supported. Use -setHeaderView:aView instead.");
}
,["void","CPView"]), new objj_method(sel_getUid("headerCell"), function $CPTableColumn__headerCell(self, _cmd)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "headCell is not supported. Use -headerView instead.");
}
,["CPView"]), new objj_method(sel_getUid("setDataCell:"), function $CPTableColumn__setDataCell_(self, _cmd, aView)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "setDataCell: is not supported. Use -setDataView:aView instead.");
}
,["void","CPView"]), new objj_method(sel_getUid("dataCell"), function $CPTableColumn__dataCell(self, _cmd)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "dataCell is not supported. Use -dataView instead.");
}
,["CPView"]), new objj_method(sel_getUid("dataCellForRow:"), function $CPTableColumn__dataCellForRow_(self, _cmd, row)
{
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "dataCellForRow: is not supported. Use -dataViewForRow:row instead.");
}
,["id","int"])]);
}p;19;CPTableHeaderView.jt;34094;@STATIC;1.0;I;23;Foundation/CPIndexSet.ji;10;CPCursor.ji;14;CPPasteboard.ji;15;CPTableColumn.ji;8;CPView.ji;21;_CPImageAndTextView.jt;33954;objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("CPCursor.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPTableColumn.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("_CPImageAndTextView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPTableColumnHeaderView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_textField")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPTableColumnHeaderView__initWithFrame_(self, _cmd, frame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTableColumnHeaderView").super_class }, "initWithFrame:", frame);
    if (self)
        objj_msgSend(self, "_init");
    return self;
}
,["void","CGRect"]), new objj_method(sel_getUid("_init"), function $_CPTableColumnHeaderView___init(self, _cmd)
{
    self._textField = objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._textField, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    objj_msgSend(self._textField, "setLineBreakMode:", CPLineBreakByTruncatingTail);
    objj_msgSend(self._textField, "setAlignment:", CPLeftTextAlignment);
    objj_msgSend(self._textField, "setVerticalAlignment:", CPCenterVerticalTextAlignment);
    objj_msgSend(self, "addSubview:", self._textField);
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPTableColumnHeaderView__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "background-color"));
    var inset = objj_msgSend(self, "currentValueForThemeAttribute:", "text-inset"),
        bounds = objj_msgSend(self, "bounds");
    objj_msgSend(self._textField, "setFrame:", CGRectMake(inset.right, inset.top, bounds.size.width - inset.right - inset.left, bounds.size.height - inset.top - inset.bottom));
    objj_msgSend(self._textField, "setTextColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-color"));
    objj_msgSend(self._textField, "setFont:", objj_msgSend(self, "currentValueForThemeAttribute:", "font"));
    objj_msgSend(self._textField, "setTextShadowColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-color"));
    objj_msgSend(self._textField, "setTextShadowOffset:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-offset"));
    objj_msgSend(self._textField, "setAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-alignment"));
    objj_msgSend(self._textField, "setLineBreakMode:", objj_msgSend(self, "currentValueForThemeAttribute:", "line-break-mode"));
}
,["void"]), new objj_method(sel_getUid("setStringValue:"), function $_CPTableColumnHeaderView__setStringValue_(self, _cmd, string)
{
    objj_msgSend(self._textField, "setText:", string);
}
,["void","CPString"]), new objj_method(sel_getUid("stringValue"), function $_CPTableColumnHeaderView__stringValue(self, _cmd)
{
    return objj_msgSend(self._textField, "text");
}
,["CPString"]), new objj_method(sel_getUid("textField"), function $_CPTableColumnHeaderView__textField(self, _cmd)
{
    return self._textField;
}
,["void"]), new objj_method(sel_getUid("sizeToFit"), function $_CPTableColumnHeaderView__sizeToFit(self, _cmd)
{
    objj_msgSend(self._textField, "sizeToFit");
}
,["void"]), new objj_method(sel_getUid("setFont:"), function $_CPTableColumnHeaderView__setFont_(self, _cmd, aFont)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aFont, "font");
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $_CPTableColumnHeaderView__font(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "font");
}
,["CPFont"]), new objj_method(sel_getUid("setAlignment:"), function $_CPTableColumnHeaderView__setAlignment_(self, _cmd, alignment)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", alignment, "text-alignment");
}
,["void","CPTextAlignment"]), new objj_method(sel_getUid("alignment"), function $_CPTableColumnHeaderView__alignment(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "text-alignment");
}
,["CPTextAlignment"]), new objj_method(sel_getUid("setLineBreakMode:"), function $_CPTableColumnHeaderView__setLineBreakMode_(self, _cmd, mode)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", mode, "line-break-mode");
}
,["void","CPLineBreakMode"]), new objj_method(sel_getUid("lineBreakMode"), function $_CPTableColumnHeaderView__lineBreakMode(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "line-break-mode");
}
,["CPLineBreakMode"]), new objj_method(sel_getUid("setTextColor:"), function $_CPTableColumnHeaderView__setTextColor_(self, _cmd, aColor)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "text-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("textColor"), function $_CPTableColumnHeaderView__textColor(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "text-color");
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPTableColumnHeaderView__setTextShadowColor_(self, _cmd, aColor)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "text-shadow-color");
}
,["void","CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPTableColumnHeaderView__textShadowColor(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-color");
}
,["CPColor"]), new objj_method(sel_getUid("_setIndicatorImage:"), function $_CPTableColumnHeaderView___setIndicatorImage_(self, _cmd, anImage)
{
    if (anImage)
    {
        objj_msgSend(self._textField, "setImage:", anImage);
        objj_msgSend(self._textField, "setImagePosition:", CPImageRight);
    }
    else
    {
        objj_msgSend(self._textField, "setImagePosition:", CPNoImage);
    }
}
,["void","CPImage"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPTableColumnHeaderView__defaultThemeClass(self, _cmd)
{
    return "columnHeader";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPTableColumnHeaderView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "background-color", CPLeftTextAlignment, "text-alignment", CPLineBreakByTruncatingTail, "line-break-mode", CGInsetMakeZero(), "text-inset", objj_msgSend(CPNull, "null"), "text-color", objj_msgSend(CPNull, "null"), "font", objj_msgSend(CPNull, "null"), "text-shadow-color", CGSizeMakeZero(), "text-shadow-offset");
}
,["id"])]);
}var _CPTableColumnHeaderViewStringValueKey = "_CPTableColumnHeaderViewStringValueKey",
    _CPTableColumnHeaderViewFontKey = "_CPTableColumnHeaderViewFontKey",
    _CPTableColumnHeaderViewTextColorKey = "_CPTableColumnHeaderViewTextColorKey",
    _CPTableColumnHeaderViewTextShadowColorKey = "_CPTableColumnHeaderViewTextShadowColorKey",
    _CPTableColumnHeaderViewAlignmentKey = "_CPTableColumnHeaderViewAlignmentKey",
    _CPTableColumnHeaderViewLineBreakModeKey = "_CPTableColumnHeaderViewLineBreakModeKey",
    _CPTableColumnHeaderViewImageKey = "_CPTableColumnHeaderViewImageKey";
{
var the_class = objj_getClass("_CPTableColumnHeaderView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPTableColumnHeaderView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPTableColumnHeaderView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTableColumnHeaderView").super_class }, "initWithCoder:", aCoder))
    {
        objj_msgSend(self, "_init");
        objj_msgSend(self, "_setIndicatorImage:", objj_msgSend(aCoder, "decodeObjectForKey:", _CPTableColumnHeaderViewImageKey));
        objj_msgSend(self, "setStringValue:", objj_msgSend(aCoder, "decodeObjectForKey:", _CPTableColumnHeaderViewStringValueKey));
        objj_msgSend(self, "setFont:", objj_msgSend(aCoder, "decodeObjectForKey:", _CPTableColumnHeaderViewFontKey));
        objj_msgSend(self, "setTextColor:", objj_msgSend(aCoder, "decodeObjectForKey:", _CPTableColumnHeaderViewTextColorKey));
        objj_msgSend(self, "setTextShadowColor:", objj_msgSend(aCoder, "decodeObjectForKey:", _CPTableColumnHeaderViewTextShadowColorKey));
        objj_msgSend(self, "setAlignment:", objj_msgSend(aCoder, "decodeIntForKey:", _CPTableColumnHeaderViewAlignmentKey));
        objj_msgSend(self, "setLineBreakMode:", objj_msgSend(aCoder, "decodeIntForKey:", _CPTableColumnHeaderViewLineBreakModeKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPTableColumnHeaderView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTableColumnHeaderView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self._textField, "text"), _CPTableColumnHeaderViewStringValueKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self._textField, "image"), _CPTableColumnHeaderViewImageKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "font"), _CPTableColumnHeaderViewFontKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "textColor"), _CPTableColumnHeaderViewTextColorKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "textShadowColor"), _CPTableColumnHeaderViewTextShadowColorKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", objj_msgSend(self, "alignment"), _CPTableColumnHeaderViewAlignmentKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", objj_msgSend(self, "lineBreakMode"), _CPTableColumnHeaderViewLineBreakModeKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPView, "CPTableHeaderView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_mouseDownLocation"), new objj_ivar("_previousTrackingLocation"), new objj_ivar("_activeColumn"), new objj_ivar("_pressedColumn"), new objj_ivar("_lastDragDestinationColumnIndex"), new objj_ivar("_isResizing"), new objj_ivar("_isDragging"), new objj_ivar("_isTrackingColumn"), new objj_ivar("_drawsColumnLines"), new objj_ivar("_columnOldWidth"), new objj_ivar("_tableView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("tableView"), function $CPTableHeaderView__tableView(self, _cmd)
{
    return self._tableView;
}
,["CPTableView"]), new objj_method(sel_getUid("setTableView:"), function $CPTableHeaderView__setTableView_(self, _cmd, newValue)
{
    self._tableView = newValue;
}
,["void","CPTableView"]), new objj_method(sel_getUid("_init"), function $CPTableHeaderView___init(self, _cmd)
{
    self._mouseDownLocation = CGPointMakeZero();
    self._previousTrackingLocation = CGPointMakeZero();
    self._activeColumn = -1;
    self._pressedColumn = -1;
    self._isResizing = NO;
    self._isDragging = NO;
    self._isTrackingColumn = NO;
    self._drawsColumnLines = YES;
    self._columnOldWidth = 0.0;
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "background-color"));
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $CPTableHeaderView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableHeaderView").super_class }, "initWithFrame:", aFrame);
    if (self)
        objj_msgSend(self, "_init");
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("columnAtPoint:"), function $CPTableHeaderView__columnAtPoint_(self, _cmd, aPoint)
{
    return objj_msgSend(self._tableView, "columnAtPoint:", CGPointMake(aPoint.x, aPoint.y));
}
,["int","CGPoint"]), new objj_method(sel_getUid("headerRectOfColumn:"), function $CPTableHeaderView__headerRectOfColumn_(self, _cmd, aColumnIndex)
{
    var headerRect = CGRectMakeCopy(objj_msgSend(self, "bounds")),
        columnRect = objj_msgSend(self._tableView, "rectOfColumn:", aColumnIndex);
    headerRect.origin.x = CGRectGetMinX(columnRect);
    headerRect.size.width = CGRectGetWidth(columnRect);
    return headerRect;
}
,["CGRect","int"]), new objj_method(sel_getUid("setDrawsColumnLines:"), function $CPTableHeaderView__setDrawsColumnLines_(self, _cmd, aFlag)
{
    self._drawsColumnLines = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("drawsColumnLines"), function $CPTableHeaderView__drawsColumnLines(self, _cmd)
{
    return self._drawsColumnLines;
}
,["BOOL"]), new objj_method(sel_getUid("_cursorRectForColumn:"), function $CPTableHeaderView___cursorRectForColumn_(self, _cmd, column)
{
    if (column == -1 || !(objj_msgSend(self._tableView._tableColumns[column], "resizingMask") & CPTableColumnUserResizingMask))
        return CGRectMakeZero();
    var rect = objj_msgSend(self, "headerRectOfColumn:", column);
    rect.origin.x = CGRectGetMaxX(rect) - 5;
    rect.size.width = 20;
    return rect;
}
,["CGRect","int"]), new objj_method(sel_getUid("_setPressedColumn:"), function $CPTableHeaderView___setPressedColumn_(self, _cmd, column)
{
    if (self._pressedColumn != -1)
    {
        var headerView = objj_msgSend(self._tableView._tableColumns[self._pressedColumn], "headerView");
        objj_msgSend(headerView, "unsetThemeState:", CPThemeStateHighlighted);
    }
    if (column != -1)
    {
        var headerView = objj_msgSend(self._tableView._tableColumns[column], "headerView");
        objj_msgSend(headerView, "setThemeState:", CPThemeStateHighlighted);
        if (self._tableView._editingCellIndex || self._tableView._editingColumn == column)
            objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self._tableView);
    }
    self._pressedColumn = column;
}
,["void","CPInteger"]), new objj_method(sel_getUid("mouseDown:"), function $CPTableHeaderView__mouseDown_(self, _cmd, theEvent)
{
    objj_msgSend(self, "trackMouse:", theEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("trackMouse:"), function $CPTableHeaderView__trackMouse_(self, _cmd, theEvent)
{
    var type = objj_msgSend(theEvent, "type"),
        currentLocation = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(theEvent, "locationInWindow"), nil);
    currentLocation.x -= 5.0;
    var columnIndex = objj_msgSend(self, "columnAtPoint:", currentLocation),
        shouldResize = objj_msgSend(self, "shouldResizeTableColumn:at:", columnIndex, CGPointMake(currentLocation.x + 5.0, currentLocation.y));
    if (type === CPLeftMouseUp)
    {
        if (shouldResize)
            objj_msgSend(self, "stopResizingTableColumn:at:", self._activeColumn, currentLocation);
        else if (objj_msgSend(self, "_shouldStopTrackingTableColumn:at:", columnIndex, currentLocation))
        {
            objj_msgSend(self._tableView, "_didClickTableColumn:modifierFlags:", columnIndex, objj_msgSend(theEvent, "modifierFlags"));
            objj_msgSend(self, "stopTrackingTableColumn:at:", columnIndex, currentLocation);
            self._isTrackingColumn = NO;
        }
        objj_msgSend(self, "_updateResizeCursor:", objj_msgSend(CPApp, "currentEvent"));
        self._activeColumn = CPNotFound;
        return;
    }
    if (type === CPLeftMouseDown)
    {
        if (columnIndex === -1)
            return;
        self._mouseDownLocation = currentLocation;
        self._activeColumn = columnIndex;
        objj_msgSend(self._tableView, "_sendDelegateMouseDownInHeaderOfTableColumn:", columnIndex);
        if (shouldResize)
            objj_msgSend(self, "startResizingTableColumn:at:", columnIndex, currentLocation);
        else
        {
            objj_msgSend(self, "startTrackingTableColumn:at:", columnIndex, currentLocation);
            self._isTrackingColumn = YES;
        }
    }
    else if (type === CPLeftMouseDragged)
    {
        if (shouldResize)
            objj_msgSend(self, "continueResizingTableColumn:at:", self._activeColumn, currentLocation);
        else
        {
            if (self._activeColumn === columnIndex && CGRectContainsPoint(objj_msgSend(self, "headerRectOfColumn:", columnIndex), currentLocation))
            {
                if (self._isTrackingColumn && self._pressedColumn !== -1)
                {
                    if (!objj_msgSend(self, "continueTrackingTableColumn:at:", columnIndex, currentLocation))
                        return;
                }
                else
                    objj_msgSend(self, "startTrackingTableColumn:at:", columnIndex, currentLocation);
            }
            else if (self._isTrackingColumn && self._pressedColumn !== -1)
                objj_msgSend(self, "stopTrackingTableColumn:at:", self._activeColumn, currentLocation);
        }
    }
    self._previousTrackingLocation = currentLocation;
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackMouse:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("startTrackingTableColumn:at:"), function $CPTableHeaderView__startTrackingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    self._lastDragDestinationColumnIndex = -1;
    objj_msgSend(self, "_setPressedColumn:", aColumnIndex);
}
,["void","int","CGPoint"]), new objj_method(sel_getUid("continueTrackingTableColumn:at:"), function $CPTableHeaderView__continueTrackingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    if (objj_msgSend(self, "_shouldDragTableColumn:at:", aColumnIndex, aPoint))
    {
        var columnRect = objj_msgSend(self, "headerRectOfColumn:", aColumnIndex),
            offset = CGPointMakeZero(),
            view = objj_msgSend(self._tableView, "_dragViewForColumn:event:offset:", aColumnIndex, objj_msgSend(CPApp, "currentEvent"), offset),
            viewLocation = CGPointMakeZero();
        viewLocation.x = CGRectGetMinX(columnRect) + offset.x + (aPoint.x - self._mouseDownLocation.x);
        viewLocation.y = CGRectGetMinY(columnRect) + offset.y;
        objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", view, viewLocation, CGSizeMakeZero(), objj_msgSend(CPApp, "currentEvent"), objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard), self, YES);
        return NO;
    }
    return YES;
}
,["BOOL","int","CGPoint"]), new objj_method(sel_getUid("_shouldStopTrackingTableColumn:at:"), function $CPTableHeaderView___shouldStopTrackingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    return self._isTrackingColumn && self._activeColumn === aColumnIndex && CGRectContainsPoint(objj_msgSend(self, "headerRectOfColumn:", aColumnIndex), aPoint);
}
,["BOOL","int","CGPoint"]), new objj_method(sel_getUid("stopTrackingTableColumn:at:"), function $CPTableHeaderView__stopTrackingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    objj_msgSend(self, "_setPressedColumn:", CPNotFound);
    objj_msgSend(self, "_updateResizeCursor:", objj_msgSend(CPApp, "currentEvent"));
}
,["void","int","CGPoint"]), new objj_method(sel_getUid("_shouldDragTableColumn:at:"), function $CPTableHeaderView___shouldDragTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    return ABS(aPoint.x - self._mouseDownLocation.x) >= 10.0 && objj_msgSend(self._tableView, "_sendDelegateShouldReorderColumn:toColumn:", aColumnIndex, -1);
}
,["BOOL","int","CGPoint"]), new objj_method(sel_getUid("_headerRectOfLastVisibleColumn"), function $CPTableHeaderView___headerRectOfLastVisibleColumn(self, _cmd)
{
    var tableColumns = objj_msgSend(self._tableView, "tableColumns"),
        columnIndex = objj_msgSend(tableColumns, "count");
    while (columnIndex--)
    {
        var tableColumn = objj_msgSend(tableColumns, "objectAtIndex:", columnIndex);
        if (!objj_msgSend(tableColumn, "isHidden"))
            return objj_msgSend(self, "headerRectOfColumn:", columnIndex);
    }
    return nil;
}
,["CGRect"]), new objj_method(sel_getUid("_constrainDragView:at:"), function $CPTableHeaderView___constrainDragView_at_(self, _cmd, theDragView, aPoint)
{
    var tableColumns = objj_msgSend(self._tableView, "tableColumns"),
        lastColumnRect = objj_msgSend(self, "_headerRectOfLastVisibleColumn"),
        activeColumnRect = objj_msgSend(self, "headerRectOfColumn:", self._activeColumn),
        dragWindow = objj_msgSend(theDragView, "window"),
        frame = objj_msgSend(dragWindow, "frame");
    frame.origin = objj_msgSend(objj_msgSend(self, "window"), "convertGlobalToBase:", frame.origin);
    frame.origin = objj_msgSend(self, "convertPoint:fromView:", frame.origin, nil);
    frame.origin.x = MAX(0.0, MIN(CGRectGetMinX(frame), CGRectGetMaxX(lastColumnRect) - CGRectGetWidth(activeColumnRect)));
    frame.origin.y = CGRectGetMinY(lastColumnRect);
    frame.origin = objj_msgSend(self, "convertPoint:toView:", frame.origin, nil);
    frame.origin = objj_msgSend(objj_msgSend(self, "window"), "convertBaseToGlobal:", frame.origin);
    objj_msgSend(dragWindow, "setFrame:", frame);
}
,["void","CPView","CGPoint"]), new objj_method(sel_getUid("_moveColumn:toColumn:"), function $CPTableHeaderView___moveColumn_toColumn_(self, _cmd, aFromIndex, aToIndex)
{
    if (objj_msgSend(self._tableView, "_sendDelegateShouldReorderColumn:toColumn:", aFromIndex, aToIndex))
    {
        objj_msgSend(self._tableView, "moveColumn:toColumn:", aFromIndex, aToIndex);
        self._activeColumn = aToIndex;
        self._pressedColumn = self._activeColumn;
    }
}
,["void","int","int"]), new objj_method(sel_getUid("draggedView:beganAt:"), function $CPTableHeaderView__draggedView_beganAt_(self, _cmd, aView, aPoint)
{
    self._isDragging = YES;
    var column = objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", self._activeColumn);
    objj_msgSend(objj_msgSend(column, "headerView"), "setHidden:", YES);
    objj_msgSend(self._tableView, "_setDraggedColumn:", column);
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPView","CGPoint"]), new objj_method(sel_getUid("draggedView:movedTo:"), function $CPTableHeaderView__draggedView_movedTo_(self, _cmd, aView, aPoint)
{
    objj_msgSend(self, "_constrainDragView:at:", aView, aPoint);
    var dragWindow = objj_msgSend(aView, "window"),
        dragWindowFrame = objj_msgSend(dragWindow, "frame");
    var hoverPoint = CGPointCreateCopy(aPoint);
    if (aPoint.x < self._previousTrackingLocation.x)
        hoverPoint = CGPointMake(CGRectGetMinX(dragWindowFrame), CGRectGetMinY(dragWindowFrame));
    else if (aPoint.x > self._previousTrackingLocation.x)
        hoverPoint = CGPointMake(CGRectGetMaxX(dragWindowFrame), CGRectGetMinY(dragWindowFrame));
    hoverPoint = objj_msgSend(objj_msgSend(self, "window"), "convertGlobalToBase:", hoverPoint);
    hoverPoint = objj_msgSend(self, "convertPoint:fromView:", hoverPoint, nil);
    var hoveredColumn = objj_msgSend(self, "columnAtPoint:", hoverPoint);
    if (hoveredColumn !== self._lastDragDestinationColumnIndex && hoveredColumn !== -1)
    {
        var columnRect = objj_msgSend(self, "headerRectOfColumn:", hoveredColumn),
            columnCenterPoint = objj_msgSend(self, "convertPoint:fromView:", CGPointMake(CGRectGetMidX(columnRect), CGRectGetMidY(columnRect)), self);
        if (hoveredColumn < self._activeColumn && hoverPoint.x < columnCenterPoint.x)
        {
            objj_msgSend(self, "_moveColumn:toColumn:", self._activeColumn, hoveredColumn);
            self._lastDragDestinationColumnIndex = hoveredColumn;
        }
        else if (hoveredColumn > self._activeColumn && hoverPoint.x > columnCenterPoint.x)
        {
            objj_msgSend(self, "_moveColumn:toColumn:", self._activeColumn, hoveredColumn);
            self._lastDragDestinationColumnIndex = hoveredColumn;
        }
    }
    self._previousTrackingLocation = aPoint;
}
,["void","CPView","CGPoint"]), new objj_method(sel_getUid("draggedView:endedAt:operation:"), function $CPTableHeaderView__draggedView_endedAt_operation_(self, _cmd, aView, aLocation, anOperation)
{
    self._isDragging = NO;
    self._isTrackingColumn = NO;
    objj_msgSend(self._tableView, "_setDraggedColumn:", nil);
    objj_msgSend(objj_msgSend(objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", self._activeColumn), "headerView"), "setHidden:", NO);
    objj_msgSend(self, "stopTrackingTableColumn:at:", self._activeColumn, aLocation);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self._tableView, "_enqueueDraggingViews");
}
,["void","CPImage","CGPoint","CPDragOperation"]), new objj_method(sel_getUid("shouldResizeTableColumn:at:"), function $CPTableHeaderView__shouldResizeTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    if (self._isResizing)
        return YES;
    if (self._isTrackingColumn)
        return NO;
    return objj_msgSend(self._tableView, "allowsColumnResizing") && CGRectContainsPoint(objj_msgSend(self, "_cursorRectForColumn:", aColumnIndex), aPoint);
}
,["BOOL","int","CGPoint"]), new objj_method(sel_getUid("startResizingTableColumn:at:"), function $CPTableHeaderView__startResizingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    self._isResizing = YES;
    var tableColumn = objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", aColumnIndex);
    objj_msgSend(tableColumn, "setDisableResizingPosting:", YES);
    objj_msgSend(self._tableView, "setDisableAutomaticResizing:", YES);
}
,["void","int","CGPoint"]), new objj_method(sel_getUid("continueResizingTableColumn:at:"), function $CPTableHeaderView__continueResizingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    var tableColumn = objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", aColumnIndex),
        newWidth = objj_msgSend(tableColumn, "width") + aPoint.x - self._previousTrackingLocation.x;
    if (newWidth < objj_msgSend(tableColumn, "minWidth"))
        objj_msgSend(objj_msgSend(CPCursor, "resizeRightCursor"), "set");
    else if (newWidth > objj_msgSend(tableColumn, "maxWidth"))
        objj_msgSend(objj_msgSend(CPCursor, "resizeLeftCursor"), "set");
    else
    {
        self._tableView._lastColumnShouldSnap = NO;
        objj_msgSend(tableColumn, "setWidth:", newWidth);
        objj_msgSend(objj_msgSend(CPCursor, "resizeLeftRightCursor"), "set");
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
}
,["void","int","CGPoint"]), new objj_method(sel_getUid("stopResizingTableColumn:at:"), function $CPTableHeaderView__stopResizingTableColumn_at_(self, _cmd, aColumnIndex, aPoint)
{
    var tableColumn = objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", aColumnIndex);
    objj_msgSend(tableColumn, "_postDidResizeNotificationWithOldWidth:", self._columnOldWidth);
    objj_msgSend(tableColumn, "setDisableResizingPosting:", NO);
    objj_msgSend(self._tableView, "setDisableAutomaticResizing:", NO);
    self._isResizing = NO;
}
,["void","int","CGPoint"]), new objj_method(sel_getUid("_updateResizeCursor:"), function $CPTableHeaderView___updateResizeCursor_(self, _cmd, theEvent)
{
    if (!objj_msgSend(self._tableView, "allowsColumnResizing") || objj_msgSend(theEvent, "type") === CPLeftMouseUp && !objj_msgSend(objj_msgSend(self, "window"), "acceptsMouseMovedEvents"))
    {
        objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
        return;
    }
    var mouseLocation = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(theEvent, "locationInWindow"), nil),
        mouseOverLocation = CGPointMake(mouseLocation.x - 5, mouseLocation.y),
        overColumn = objj_msgSend(self, "columnAtPoint:", mouseOverLocation);
    if (overColumn >= 0 && CGRectContainsPoint(objj_msgSend(self, "_cursorRectForColumn:", overColumn), mouseLocation))
    {
        var tableColumn = objj_msgSend(objj_msgSend(self._tableView, "tableColumns"), "objectAtIndex:", overColumn),
            width = objj_msgSend(tableColumn, "width");
        if (width == objj_msgSend(tableColumn, "minWidth"))
            objj_msgSend(objj_msgSend(CPCursor, "resizeRightCursor"), "set");
        else if (width == objj_msgSend(tableColumn, "maxWidth"))
            objj_msgSend(objj_msgSend(CPCursor, "resizeLeftCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeLeftRightCursor"), "set");
    }
    else
        objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseEntered:"), function $CPTableHeaderView__mouseEntered_(self, _cmd, theEvent)
{
    objj_msgSend(self, "_updateResizeCursor:", theEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseMoved:"), function $CPTableHeaderView__mouseMoved_(self, _cmd, theEvent)
{
    objj_msgSend(self, "_updateResizeCursor:", theEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $CPTableHeaderView__mouseExited_(self, _cmd, theEvent)
{
    objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
}
,["void","CPEvent"]), new objj_method(sel_getUid("layoutSubviews"), function $CPTableHeaderView__layoutSubviews(self, _cmd)
{
    var tableColumns = objj_msgSend(self._tableView, "tableColumns"),
        count = objj_msgSend(tableColumns, "count");
    for (var i = 0; i < count; i++)
    {
        var column = objj_msgSend(tableColumns, "objectAtIndex:", i),
            headerView = objj_msgSend(column, "headerView"),
            frame = objj_msgSend(self, "headerRectOfColumn:", i);
        frame.origin.x -= 0.5;
        frame.size.width -= 1.0;
        frame.size.height -= 0.5;
        objj_msgSend(headerView, "setFrame:", frame);
        if (objj_msgSend(headerView, "superview") != self)
            objj_msgSend(self, "addSubview:", headerView);
    }
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "background-color"));
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $CPTableHeaderView__drawRect_(self, _cmd, aRect)
{
    if (!self._tableView || !objj_msgSend(self, "drawsColumnLines"))
        return;
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        exposedColumnIndexes = objj_msgSend(self._tableView, "columnIndexesInRect:", aRect),
        columnsArray = [],
        tableColumns = objj_msgSend(self._tableView, "tableColumns"),
        exposedTableColumns = self._tableView._exposedColumns,
        firstIndex = objj_msgSend(exposedTableColumns, "firstIndex"),
        exposedRange = CPMakeRange(firstIndex, objj_msgSend(exposedTableColumns, "lastIndex") - firstIndex + 1);
    CGContextSetLineWidth(context, 1);
    CGContextSetStrokeColor(context, objj_msgSend(self, "currentValueForThemeAttribute:", "divider-color"));
    objj_msgSend(exposedColumnIndexes, "getIndexes:maxCount:inIndexRange:", columnsArray, -1, exposedRange);
    var columnArrayIndex = 0,
        columnArrayCount = columnsArray.length,
        columnMaxX;
    CGContextBeginPath(context);
    for (; columnArrayIndex < columnArrayCount; columnArrayIndex++)
    {
        var columnIndex = columnsArray[columnArrayIndex],
            columnToStroke = objj_msgSend(self, "headerRectOfColumn:", columnIndex);
        columnMaxX = CGRectGetMaxX(columnToStroke);
        CGContextMoveToPoint(context, FLOOR(columnMaxX) - 0.5, ROUND(CGRectGetMinY(columnToStroke)));
        CGContextAddLineToPoint(context, FLOOR(columnMaxX) - 0.5, ROUND(CGRectGetMaxY(columnToStroke)) - 1.0);
    }
    CGContextClosePath(context);
    CGContextStrokePath(context);
}
,["void","CGRect"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPTableHeaderView__defaultThemeClass(self, _cmd)
{
    return "tableHeaderRow";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPTableHeaderView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "background-color", objj_msgSend(CPColor, "grayColor"), "divider-color");
}
,["id"])]);
}var CPTableHeaderViewTableViewKey = "CPTableHeaderViewTableViewKey",
    CPTableHeaderViewDrawsColumnLines = "CPTableHeaderViewDrawsColumnLines";
{
var the_class = objj_getClass("CPTableHeaderView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableHeaderView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTableHeaderView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableHeaderView").super_class }, "initWithCoder:", aCoder))
    {
        objj_msgSend(self, "_init");
        self._tableView = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableHeaderViewTableViewKey);
        if (objj_msgSend(aCoder, "containsValueForKey:", CPTableHeaderViewDrawsColumnLines))
            self._drawsColumnLines = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableHeaderViewDrawsColumnLines);
        else
        {
            self._drawsColumnLines = YES;
            CPLog.warn("The tableview header being decoded is using an old cib. Please run Nib2Cib.");
        }
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTableHeaderView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableHeaderView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._tableView, CPTableHeaderViewTableViewKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._drawsColumnLines, CPTableHeaderViewDrawsColumnLines);
}
,["void","CPCoder"])]);
}p;13;CPTableView.jt;204196;@STATIC;1.0;I;20;Foundation/CPArray.jI;23;Foundation/CPIndexSet.ji;24;CPDragServer_Constants.ji;12;CGGradient.ji;7;CPCib.ji;17;CPCompatibility.ji;11;CPControl.ji;13;CPImageView.ji;12;CPScroller.ji;14;CPScrollView.ji;15;CPTableColumn.ji;19;CPTableHeaderView.ji;8;CPText.ji;15;_CPCornerView.jt;203897;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("CPDragServer_Constants.j", YES);objj_executeFile("CGGradient.j", YES);objj_executeFile("CPCib.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPControl.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPScroller.j", YES);objj_executeFile("CPScrollView.j", YES);objj_executeFile("CPTableColumn.j", YES);objj_executeFile("CPTableHeaderView.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("_CPCornerView.j", YES);CPTableViewColumnDidMoveNotification = "CPTableViewColumnDidMoveNotification";
CPTableViewColumnDidResizeNotification = "CPTableViewColumnDidResizeNotification";
CPTableViewSelectionDidChangeNotification = "CPTableViewSelectionDidChangeNotification";
CPTableViewSelectionIsChangingNotification = "CPTableViewSelectionIsChangingNotification";
var CPTableViewDataSource_numberOfRowsInTableView_ = 1 << 0,
    CPTableViewDataSource_tableView_objectValueForTableColumn_row_ = 1 << 1,
    CPTableViewDataSource_tableView_setObjectValue_forTableColumn_row_ = 1 << 2,
    CPTableViewDataSource_tableView_acceptDrop_row_dropOperation_ = 1 << 3,
    CPTableViewDataSource_tableView_namesOfPromisedFilesDroppedAtDestination_forDraggedRowsWithIndexes_ = 1 << 4,
    CPTableViewDataSource_tableView_validateDrop_proposedRow_proposedDropOperation_ = 1 << 5,
    CPTableViewDataSource_tableView_writeRowsWithIndexes_toPasteboard_ = 1 << 6,
    CPTableViewDataSource_tableView_sortDescriptorsDidChange_ = 1 << 7;
var CPTableViewDelegate_selectionShouldChangeInTableView_ = 1 << 0,
    CPTableViewDelegate_tableView_viewForTableColumn_row_ = 1 << 1,
    CPTableViewDelegate_tableView_dataViewForTableColumn_row_ = 1 << 2,
    CPTableViewDelegate_tableView_didClickTableColumn_ = 1 << 3,
    CPTableViewDelegate_tableView_didDragTableColumn_ = 1 << 4,
    CPTableViewDelegate_tableView_heightOfRow_ = 1 << 5,
    CPTableViewDelegate_tableView_isGroupRow_ = 1 << 6,
    CPTableViewDelegate_tableView_mouseDownInHeaderOfTableColumn_ = 1 << 7,
    CPTableViewDelegate_tableView_nextTypeSelectMatchFromRow_toRow_forString_ = 1 << 8,
    CPTableViewDelegate_tableView_selectionIndexesForProposedSelection_ = 1 << 9,
    CPTableViewDelegate_tableView_shouldEditTableColumn_row_ = 1 << 10,
    CPTableViewDelegate_tableView_shouldSelectRow_ = 1 << 11,
    CPTableViewDelegate_tableView_shouldSelectTableColumn_ = 1 << 12,
    CPTableViewDelegate_tableView_shouldShowViewExpansionForTableColumn_row_ = 1 << 13,
    CPTableViewDelegate_tableView_shouldTrackView_forTableColumn_row_ = 1 << 14,
    CPTableViewDelegate_tableView_shouldTypeSelectForEvent_withCurrentSearchString_ = 1 << 15,
    CPTableViewDelegate_tableView_toolTipForView_rect_tableColumn_row_mouseLocation_ = 1 << 16,
    CPTableViewDelegate_tableView_typeSelectStringForTableColumn_row_ = 1 << 17,
    CPTableViewDelegate_tableView_willDisplayView_forTableColumn_row_ = 1 << 18,
    CPTableViewDelegate_tableViewSelectionDidChange_ = 1 << 19,
    CPTableViewDelegate_tableViewSelectionIsChanging_ = 1 << 20,
    CPTableViewDelegate_tableViewMenuForTableColumn_row_ = 1 << 21,
    CPTableViewDelegate_tableView_shouldReorderColumn_toColumn_ = 1 << 22;
CPTableViewDraggingDestinationFeedbackStyleNone = -1;
CPTableViewDraggingDestinationFeedbackStyleRegular = 0;
CPTableViewDraggingDestinationFeedbackStyleSourceList = 1;
CPTableViewDropOn = 0;
CPTableViewDropAbove = 1;
CPSourceListGradient = "CPSourceListGradient";
CPSourceListTopLineColor = "CPSourceListTopLineColor";
CPSourceListBottomLineColor = "CPSourceListBottomLineColor";
CPTableViewSelectionHighlightStyleNone = -1;
CPTableViewSelectionHighlightStyleRegular = 0;
CPTableViewSelectionHighlightStyleSourceList = 1;
CPTableViewGridNone = 0;
CPTableViewSolidVerticalGridLineMask = 1 << 0;
CPTableViewSolidHorizontalGridLineMask = 1 << 1;
CPTableViewNoColumnAutoresizing = 0;
CPTableViewUniformColumnAutoresizingStyle = 1;
CPTableViewSequentialColumnAutoresizingStyle = 2;
CPTableViewReverseSequentialColumnAutoresizingStyle = 3;
CPTableViewLastColumnOnlyAutoresizingStyle = 4;
CPTableViewFirstColumnOnlyAutoresizingStyle = 5;
{var the_class = objj_allocateClassPair(CPView, "_CPTableDrawView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_tableView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithTableView:"), function $_CPTableDrawView__initWithTableView_(self, _cmd, aTableView)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTableDrawView").super_class }, "init");
    if (self)
        self._tableView = aTableView;
    return self;
}
,["id","CPTableView"]), new objj_method(sel_getUid("drawRect:"), function $_CPTableDrawView__drawRect_(self, _cmd, aRect)
{
    var frame = objj_msgSend(self, "frame"),
        context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextTranslateCTM(context, -CGRectGetMinX(frame), -CGRectGetMinY(frame));
    objj_msgSend(self._tableView, "_drawRect:", aRect);
}
,["void","CGRect"])]);
}{var the_class = objj_allocateClassPair(CPControl, "CPTableView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dataSource"), new objj_ivar("_implementedDataSourceMethods"), new objj_ivar("_delegate"), new objj_ivar("_implementedDelegateMethods"), new objj_ivar("_tableColumns"), new objj_ivar("_tableColumnRanges"), new objj_ivar("_dirtyTableColumnRangeIndex"), new objj_ivar("_numberOfHiddenColumns"), new objj_ivar("_reloadAllRows"), new objj_ivar("_objectValues"), new objj_ivar("_exposedRect"), new objj_ivar("_exposedRows"), new objj_ivar("_exposedColumns"), new objj_ivar("_dataViewsForTableColumns"), new objj_ivar("_cachedDataViews"), new objj_ivar("_archivedDataViews"), new objj_ivar("_unavailable_custom_cibs"), new objj_ivar("_allowsColumnReordering"), new objj_ivar("_allowsColumnResizing"), new objj_ivar("_allowsColumnSelection"), new objj_ivar("_allowsMultipleSelection"), new objj_ivar("_allowsEmptySelection"), new objj_ivar("_sortDescriptors"), new objj_ivar("_intercellSpacing"), new objj_ivar("_rowHeight"), new objj_ivar("_usesAlternatingRowBackgroundColors"), new objj_ivar("_alternatingRowBackgroundColors"), new objj_ivar("_selectionHighlightStyle"), new objj_ivar("_unfocusedSelectionHighlightColor"), new objj_ivar("_unfocusedSourceListSelectionColor"), new objj_ivar("_currentHighlightedTableColumn"), new objj_ivar("_gridStyleMask"), new objj_ivar("_numberOfRows"), new objj_ivar("_groupRows"), new objj_ivar("_cachedRowHeights"), new objj_ivar("_autosaveName"), new objj_ivar("_autosaveTableColumns"), new objj_ivar("_headerView"), new objj_ivar("_cornerView"), new objj_ivar("_selectedColumnIndexes"), new objj_ivar("_selectedRowIndexes"), new objj_ivar("_selectionAnchorRow"), new objj_ivar("_lastSelectedRow"), new objj_ivar("_previouslySelectedRowIndexes"), new objj_ivar("_startTrackingPoint"), new objj_ivar("_startTrackingTimestamp"), new objj_ivar("_trackingPointMovedOutOfClickSlop"), new objj_ivar("_editingCellIndex"), new objj_ivar("_editingRow"), new objj_ivar("_editingColumn"), new objj_ivar("_tableDrawView"), new objj_ivar("_doubleAction"), new objj_ivar("_clickedRow"), new objj_ivar("_clickedColumn"), new objj_ivar("_columnAutoResizingStyle"), new objj_ivar("_lastTrackedRowIndex"), new objj_ivar("_originalMouseDownPoint"), new objj_ivar("_verticalMotionCanDrag"), new objj_ivar("_destinationDragStyle"), new objj_ivar("_isSelectingSession"), new objj_ivar("_draggedRowIndexes"), new objj_ivar("_wasSelectionBroken"), new objj_ivar("_dropOperationFeedbackView"), new objj_ivar("_dragOperationDefaultMask"), new objj_ivar("_retargetedDropRow"), new objj_ivar("_retargetedDropOperation"), new objj_ivar("_draggingViews"), new objj_ivar("_disableAutomaticResizing"), new objj_ivar("_lastColumnShouldSnap"), new objj_ivar("_implementsCustomDrawRow"), new objj_ivar("_isViewBased"), new objj_ivar("_contentBindingExplicitlySet"), new objj_ivar("_viewForTableColumnRowSelector"), new objj_ivar("_draggedColumn"), new objj_ivar("_differedColumnDataToRemove"), new objj_ivar("_isFirstResponder"), new objj_ivar("_isKeyWindow")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("disableAutomaticResizing"), function $CPTableView__disableAutomaticResizing(self, _cmd)
{
    return self._disableAutomaticResizing;
}
,["BOOL"]), new objj_method(sel_getUid("setDisableAutomaticResizing:"), function $CPTableView__setDisableAutomaticResizing_(self, _cmd, newValue)
{
    self._disableAutomaticResizing = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithFrame:"), function $CPTableView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._allowsColumnReordering = YES;
        self._allowsColumnResizing = YES;
        self._allowsMultipleSelection = NO;
        self._allowsEmptySelection = YES;
        self._allowsColumnSelection = NO;
        self._disableAutomaticResizing = NO;
        self._selectionHighlightStyle = CPTableViewSelectionHighlightStyleRegular;
        objj_msgSend(self, "setUsesAlternatingRowBackgroundColors:", NO);
        objj_msgSend(self, "setAlternatingRowBackgroundColors:", [objj_msgSend(CPColor, "whiteColor"), objj_msgSend(CPColor, "colorWithRed:green:blue:alpha:", 245.0 / 255.0, 249.0 / 255.0, 252.0 / 255.0, 1.0)]);
        self._tableColumns = [];
        self._tableColumnRanges = [];
        self._dirtyTableColumnRangeIndex = CPNotFound;
        self._numberOfHiddenColumns = 0;
        self._intercellSpacing = CGSizeMake(3.0, 2.0);
        self._rowHeight = objj_msgSend(self, "valueForThemeAttribute:", "default-row-height");
        objj_msgSend(self, "setGridColor:", objj_msgSend(CPColor, "colorWithHexString:", "dce0e2"));
        objj_msgSend(self, "setGridStyleMask:", CPTableViewGridNone);
        objj_msgSend(self, "setHeaderView:", objj_msgSend(objj_msgSend(CPTableHeaderView, "alloc"), "initWithFrame:", CGRectMake(0, 0, objj_msgSend(self, "bounds").size.width, self._rowHeight)));
        objj_msgSend(self, "setCornerView:", objj_msgSend(objj_msgSend(_CPCornerView, "alloc"), "initWithFrame:", CGRectMake(0, 0, objj_msgSend(CPScroller, "scrollerWidth"), CGRectGetHeight(objj_msgSend(self._headerView, "frame")))));
        self._currentHighlightedTableColumn = nil;
        self._draggedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
        self._verticalMotionCanDrag = YES;
        self._isSelectingSession = NO;
        self._retargetedDropRow = nil;
        self._retargetedDropOperation = nil;
        self._dragOperationDefaultMask = nil;
        self._destinationDragStyle = CPTableViewDraggingDestinationFeedbackStyleRegular;
        self._contentBindingExplicitlySet = NO;
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPTableView___init(self, _cmd)
{
    self._lastSelectedRow = self._clickedColumn = self._clickedRow = -1;
    self._selectedColumnIndexes = objj_msgSend(CPIndexSet, "indexSet");
    self._selectedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
    self._dropOperationFeedbackView = objj_msgSend(objj_msgSend(_CPDropOperationDrawingView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._dropOperationFeedbackView, "setTableView:", self);
    self._lastColumnShouldSnap = NO;
    if (!self._alternatingRowBackgroundColors)
        self._alternatingRowBackgroundColors = [objj_msgSend(CPColor, "whiteColor"), objj_msgSend(CPColor, "colorWithHexString:", "e4e7ff")];
    self._tableColumnRanges = [];
    self._dirtyTableColumnRangeIndex = 0;
    self._numberOfHiddenColumns = 0;
    self._objectValues = {};
    self._dataViewsForTableColumns = {};
    self._numberOfRows = 0;
    self._exposedRows = objj_msgSend(CPIndexSet, "indexSet");
    self._exposedColumns = objj_msgSend(CPIndexSet, "indexSet");
    self._cachedDataViews = {};
    self._archivedDataViews = nil;
    self._viewForTableColumnRowSelector = nil;
    self._unavailable_custom_cibs = {};
    self._cachedRowHeights = [];
    self._groupRows = objj_msgSend(CPIndexSet, "indexSet");
    self._tableDrawView = objj_msgSend(objj_msgSend(_CPTableDrawView, "alloc"), "initWithTableView:", self);
    objj_msgSend(self._tableDrawView, "setBackgroundColor:", objj_msgSend(CPColor, "clearColor"));
    objj_msgSend(self, "addSubview:", self._tableDrawView);
    self._draggedColumn = nil;
    self._draggingViews = objj_msgSend(CPArray, "array");
    self._editingRow = CPNotFound;
    self._editingColumn = CPNotFound;
    self._differedColumnDataToRemove = [];
    self._implementsCustomDrawRow = objj_msgSend(self, "implementsSelector:", sel_getUid("drawRow:clipRect:"));
    if (!self._sortDescriptors)
        self._sortDescriptors = [];
    objj_msgSend(self, "_startObservingFirstResponder");
}
,["void"]), new objj_method(sel_getUid("setDataSource:"), function $CPTableView__setDataSource_(self, _cmd, aDataSource)
{
    if (self._dataSource === aDataSource)
        return;
    self._dataSource = aDataSource;
    self._implementedDataSourceMethods = 0;
    if (!self._dataSource)
        return;
    var hasContentBinding = !!objj_msgSend(self, "infoForBinding:", "content");
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("numberOfRowsInTableView:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_numberOfRowsInTableView_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:objectValueForTableColumn:row:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_objectValueForTableColumn_row_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:setObjectValue:forTableColumn:row:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_setObjectValue_forTableColumn_row_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:acceptDrop:row:dropOperation:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_acceptDrop_row_dropOperation_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:namesOfPromisedFilesDroppedAtDestination:forDraggedRowsWithIndexes:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_namesOfPromisedFilesDroppedAtDestination_forDraggedRowsWithIndexes_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:validateDrop:proposedRow:proposedDropOperation:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_validateDrop_proposedRow_proposedDropOperation_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:writeRowsWithIndexes:toPasteboard:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_writeRowsWithIndexes_toPasteboard_;
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:sortDescriptorsDidChange:")))
        self._implementedDataSourceMethods |= CPTableViewDataSource_tableView_sortDescriptorsDidChange_;
    objj_msgSend(self, "reloadData");
}
,["void","id"]), new objj_method(sel_getUid("dataSource"), function $CPTableView__dataSource(self, _cmd)
{
    return self._dataSource;
}
,["id"]), new objj_method(sel_getUid("reloadDataForRowIndexes:columnIndexes:"), function $CPTableView__reloadDataForRowIndexes_columnIndexes_(self, _cmd, rowIndexes, columnIndexes)
{
    objj_msgSend(self, "reloadData");
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("reloadData"), function $CPTableView__reloadData(self, _cmd)
{
    self._reloadAllRows = YES;
    self._objectValues = {};
    self._cachedRowHeights = [];
    objj_msgSend(self._groupRows, "removeAllIndexes");
    objj_msgSend(self, "noteNumberOfRowsChanged");
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("setDoubleAction:"), function $CPTableView__setDoubleAction_(self, _cmd, anAction)
{
    self._doubleAction = anAction;
}
,["void","SEL"]), new objj_method(sel_getUid("doubleAction"), function $CPTableView__doubleAction(self, _cmd)
{
    return self._doubleAction;
}
,["SEL"]), new objj_method(sel_getUid("clickedColumn"), function $CPTableView__clickedColumn(self, _cmd)
{
    return self._clickedColumn;
}
,["CPInteger"]), new objj_method(sel_getUid("clickedRow"), function $CPTableView__clickedRow(self, _cmd)
{
    return self._clickedRow;
}
,["CPInteger"]), new objj_method(sel_getUid("setAllowsColumnReordering:"), function $CPTableView__setAllowsColumnReordering_(self, _cmd, shouldAllowColumnReordering)
{
    self._allowsColumnReordering = !!shouldAllowColumnReordering;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsColumnReordering"), function $CPTableView__allowsColumnReordering(self, _cmd)
{
    return self._allowsColumnReordering;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsColumnResizing:"), function $CPTableView__setAllowsColumnResizing_(self, _cmd, shouldAllowColumnResizing)
{
    self._allowsColumnResizing = !!shouldAllowColumnResizing;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsColumnResizing"), function $CPTableView__allowsColumnResizing(self, _cmd)
{
    return self._allowsColumnResizing;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsMultipleSelection:"), function $CPTableView__setAllowsMultipleSelection_(self, _cmd, shouldAllowMultipleSelection)
{
    self._allowsMultipleSelection = !!shouldAllowMultipleSelection;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsMultipleSelection"), function $CPTableView__allowsMultipleSelection(self, _cmd)
{
    return self._allowsMultipleSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsEmptySelection:"), function $CPTableView__setAllowsEmptySelection_(self, _cmd, shouldAllowEmptySelection)
{
    self._allowsEmptySelection = !!shouldAllowEmptySelection;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsEmptySelection"), function $CPTableView__allowsEmptySelection(self, _cmd)
{
    return self._allowsEmptySelection;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsColumnSelection:"), function $CPTableView__setAllowsColumnSelection_(self, _cmd, shouldAllowColumnSelection)
{
    self._allowsColumnSelection = !!shouldAllowColumnSelection;
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsColumnSelection"), function $CPTableView__allowsColumnSelection(self, _cmd)
{
    return self._allowsColumnSelection;
}
,["BOOL"]), new objj_method(sel_getUid("setIntercellSpacing:"), function $CPTableView__setIntercellSpacing_(self, _cmd, aSize)
{
    if (CGSizeEqualToSize(self._intercellSpacing, aSize))
        return;
    self._intercellSpacing = CGSizeMakeCopy(aSize);
    self._dirtyTableColumnRangeIndex = 0;
    objj_msgSend(self, "_recalculateTableColumnRanges");
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self._headerView, "setNeedsDisplay:", YES);
    objj_msgSend(self._headerView, "setNeedsLayout");
    objj_msgSend(self, "reloadData");
}
,["void","CGSize"]), new objj_method(sel_getUid("intercellSpacing"), function $CPTableView__intercellSpacing(self, _cmd)
{
    return CGSizeMakeCopy(self._intercellSpacing);
}
,["CGSize"]), new objj_method(sel_getUid("setRowHeight:"), function $CPTableView__setRowHeight_(self, _cmd, aRowHeight)
{
    aRowHeight = +aRowHeight;
    if (self._rowHeight === aRowHeight)
        return;
    self._rowHeight = MAX(0.0, aRowHeight);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","unsigned"]), new objj_method(sel_getUid("rowHeight"), function $CPTableView__rowHeight(self, _cmd)
{
    return self._rowHeight;
}
,["unsigned"]), new objj_method(sel_getUid("setUsesAlternatingRowBackgroundColors:"), function $CPTableView__setUsesAlternatingRowBackgroundColors_(self, _cmd, shouldUseAlternatingRowBackgroundColors)
{
    self._usesAlternatingRowBackgroundColors = shouldUseAlternatingRowBackgroundColors;
}
,["void","BOOL"]), new objj_method(sel_getUid("usesAlternatingRowBackgroundColors"), function $CPTableView__usesAlternatingRowBackgroundColors(self, _cmd)
{
    return self._usesAlternatingRowBackgroundColors;
}
,["BOOL"]), new objj_method(sel_getUid("setAlternatingRowBackgroundColors:"), function $CPTableView__setAlternatingRowBackgroundColors_(self, _cmd, alternatingRowBackgroundColors)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", alternatingRowBackgroundColors, "alternating-row-colors");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPArray"]), new objj_method(sel_getUid("alternatingRowBackgroundColors"), function $CPTableView__alternatingRowBackgroundColors(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "alternating-row-colors");
}
,["CPArray"]), new objj_method(sel_getUid("selectionHighlightStyle"), function $CPTableView__selectionHighlightStyle(self, _cmd)
{
    return self._selectionHighlightStyle;
}
,["unsigned"]), new objj_method(sel_getUid("setSelectionHighlightStyle:"), function $CPTableView__setSelectionHighlightStyle_(self, _cmd, aSelectionHighlightStyle)
{
    self._selectionHighlightStyle = aSelectionHighlightStyle;
    if (aSelectionHighlightStyle === CPTableViewSelectionHighlightStyleSourceList)
        self._destinationDragStyle = CPTableViewDraggingDestinationFeedbackStyleSourceList;
    else
        self._destinationDragStyle = CPTableViewDraggingDestinationFeedbackStyleRegular;
    objj_msgSend(self, "_updateHighlightWithOldRows:newRows:", objj_msgSend(CPIndexSet, "indexSet"), self._selectedRowIndexes);
    objj_msgSend(self, "_updateHighlightWithOldColumns:newColumns:", objj_msgSend(CPIndexSet, "indexSet"), self._selectedColumnIndexes);
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","unsigned"]), new objj_method(sel_getUid("setSelectionHighlightColor:"), function $CPTableView__setSelectionHighlightColor_(self, _cmd, aColor)
{
    if (objj_msgSend(objj_msgSend(self, "selectionHighlightColor"), "isEqual:", aColor))
        return;
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "selection-color");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPColor"]), new objj_method(sel_getUid("selectionHighlightColor"), function $CPTableView__selectionHighlightColor(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "selection-color");
}
,["CPColor"]), new objj_method(sel_getUid("unfocusedSelectionHighlightColor"), function $CPTableView__unfocusedSelectionHighlightColor(self, _cmd)
{
    if (!self._unfocusedSelectionHighlightColor)
        self._unfocusedSelectionHighlightColor = objj_msgSend(self, "_unfocusedSelectionColorFromColor:saturation:", objj_msgSend(self, "selectionHighlightColor"), 0);
    return self._unfocusedSelectionHighlightColor;
}
,["CPColor"]), new objj_method(sel_getUid("setSelectionGradientColors:"), function $CPTableView__setSelectionGradientColors_(self, _cmd, aDictionary)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aDictionary, "sourcelist-selection-color");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("selectionGradientColors"), function $CPTableView__selectionGradientColors(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "sourcelist-selection-color");
}
,["CPDictionary"]), new objj_method(sel_getUid("unfocusedSelectionGradientColors"), function $CPTableView__unfocusedSelectionGradientColors(self, _cmd)
{
    if (!self._unfocusedSourceListSelectionColor)
    {
        var sourceListColors = objj_msgSend(self, "selectionGradientColors");
        self._unfocusedSourceListSelectionColor = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(self, "_unfocusedGradientFromGradient:", objj_msgSend(sourceListColors, "objectForKey:", CPSourceListGradient)), CPSourceListGradient, objj_msgSend(self, "_unfocusedSelectionColorFromColor:saturation:", objj_msgSend(sourceListColors, "objectForKey:", CPSourceListTopLineColor), 0.2), CPSourceListTopLineColor, objj_msgSend(self, "_unfocusedSelectionColorFromColor:saturation:", objj_msgSend(sourceListColors, "objectForKey:", CPSourceListBottomLineColor), 0.2), CPSourceListBottomLineColor);
    }
    return self._unfocusedSourceListSelectionColor;
}
,["void"]), new objj_method(sel_getUid("_unfocusedSelectionColorFromColor:saturation:"), function $CPTableView___unfocusedSelectionColorFromColor_saturation_(self, _cmd, aColor, saturation)
{
    var hsb = objj_msgSend(aColor, "hsbComponents");
    return objj_msgSend(CPColor, "colorWithHue:saturation:brightness:", hsb[0], hsb[1] * saturation, hsb[2]);
}
,["CPColor","CPColor","float"]), new objj_method(sel_getUid("_unfocusedGradientFromGradient:"), function $CPTableView___unfocusedGradientFromGradient_(self, _cmd, aGradient)
{
    var colors = objj_msgSend(aGradient.colors, "copy"),
        count = objj_msgSend(colors, "count");
    while (count--)
    {
        var rgba = colors[count].components,
            hsb = objj_msgSend(self, "_unfocusedSelectionColorFromColor:saturation:", objj_msgSend(CPColor, "colorWithRed:green:blue:alpha:", rgba[0], rgba[1], rgba[2], rgba[3]), 0.2);
        colors[count] = CGColorCreate(aGradient.colorspace, objj_msgSend(objj_msgSend(hsb, "components"), "copy"));
    }
    return CGGradientCreateWithColors(aGradient.colorspace, colors, aGradient.locations);
}
,["CGGradient","CGGradient"]), new objj_method(sel_getUid("setGridColor:"), function $CPTableView__setGridColor_(self, _cmd, aColor)
{
    objj_msgSend(self, "setValue:forThemeAttribute:", aColor, "grid-color");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPColor"]), new objj_method(sel_getUid("gridColor"), function $CPTableView__gridColor(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "grid-color");
}
,["CPColor"]), new objj_method(sel_getUid("setGridStyleMask:"), function $CPTableView__setGridStyleMask_(self, _cmd, aGrideStyleMask)
{
    if (self._gridStyleMask === aGrideStyleMask)
        return;
    self._gridStyleMask = aGrideStyleMask;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","unsigned"]), new objj_method(sel_getUid("gridStyleMask"), function $CPTableView__gridStyleMask(self, _cmd)
{
    return self._gridStyleMask;
}
,["unsigned"]), new objj_method(sel_getUid("addTableColumn:"), function $CPTableView__addTableColumn_(self, _cmd, aTableColumn)
{
    objj_msgSend(self._tableColumns, "addObject:", aTableColumn);
    objj_msgSend(aTableColumn, "setTableView:", self);
    if (self._dirtyTableColumnRangeIndex < 0)
        self._dirtyTableColumnRangeIndex = self._tableColumns.length - 1;
    else
        self._dirtyTableColumnRangeIndex = MIN(self._tableColumns.length - 1, self._dirtyTableColumnRangeIndex);
    if (objj_msgSend(objj_msgSend(self, "sortDescriptors"), "count") > 0)
    {
        var mainSortDescriptor = objj_msgSend(objj_msgSend(self, "sortDescriptors"), "objectAtIndex:", 0);
        if (aTableColumn === objj_msgSend(self, "_tableColumnForSortDescriptor:", mainSortDescriptor))
        {
            var image = objj_msgSend(mainSortDescriptor, "ascending") ? objj_msgSend(self, "_tableHeaderSortImage") : objj_msgSend(self, "_tableHeaderReverseSortImage");
            objj_msgSend(self, "setIndicatorImage:inTableColumn:", image, aTableColumn);
        }
    }
    objj_msgSend(self, "tile");
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("removeTableColumn:"), function $CPTableView__removeTableColumn_(self, _cmd, aTableColumn)
{
    if (objj_msgSend(aTableColumn, "tableView") !== self)
        return;
    var index = objj_msgSend(self._tableColumns, "indexOfObjectIdenticalTo:", aTableColumn);
    if (index === CPNotFound)
        return;
    objj_msgSend(self._differedColumnDataToRemove, "addObject:", {"column": aTableColumn, "shouldBeHidden": objj_msgSend(aTableColumn, "isHidden")});
    objj_msgSend(aTableColumn, "setHidden:", YES);
    objj_msgSend(aTableColumn, "setTableView:", nil);
    var tableColumnUID = objj_msgSend(aTableColumn, "UID");
    if (self._objectValues[tableColumnUID])
        self._objectValues[tableColumnUID] = nil;
    if (self._dirtyTableColumnRangeIndex < 0)
        self._dirtyTableColumnRangeIndex = index;
    else
        self._dirtyTableColumnRangeIndex = MIN(index, self._dirtyTableColumnRangeIndex);
    objj_msgSend(self._tableColumns, "removeObject:", aTableColumn);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("_setDraggedColumn:"), function $CPTableView___setDraggedColumn_(self, _cmd, aColumn)
{
    if (self._draggedColumn === aColumn)
        return;
    var previouslyDraggedColumn = self._draggedColumn;
    self._draggedColumn = aColumn;
    if (aColumn)
        objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", self._exposedRows, objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(self._tableColumns, "indexOfObject:", aColumn)));
    if (previouslyDraggedColumn)
        objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", self._exposedRows, objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(self._tableColumns, "indexOfObject:", previouslyDraggedColumn)));
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("_moveColumn:toColumn:"), function $CPTableView___moveColumn_toColumn_(self, _cmd, fromIndex, toIndex)
{
    fromIndex = +fromIndex;
    toIndex = +toIndex;
    if (fromIndex === toIndex)
        return;
    if (self._dirtyTableColumnRangeIndex < 0)
        self._dirtyTableColumnRangeIndex = MIN(fromIndex, toIndex);
    else
        self._dirtyTableColumnRangeIndex = MIN(fromIndex, toIndex, self._dirtyTableColumnRangeIndex);
    var tableColumn = self._tableColumns[fromIndex];
    objj_msgSend(self._tableColumns, "removeObjectAtIndex:", fromIndex);
    objj_msgSend(self._tableColumns, "insertObject:atIndex:", tableColumn, toIndex);
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsLayout");
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsDisplay:", YES);
    var rowIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "numberOfRows"))),
        columnIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(fromIndex, toIndex));
    objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", rowIndexes, columnIndexes);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPTableViewColumnDidMoveNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", fromIndex, "CPOldColumn", toIndex, "CPNewColumn"));
}
,["void","unsigned","unsigned"]), new objj_method(sel_getUid("moveColumn:toColumn:"), function $CPTableView__moveColumn_toColumn_(self, _cmd, theColumnIndex, theToIndex)
{
    objj_msgSend(self, "_moveColumn:toColumn:", theColumnIndex, theToIndex);
    objj_msgSend(self, "_autosave");
}
,["void","int","int"]), new objj_method(sel_getUid("_tableColumnVisibilityDidChange:"), function $CPTableView___tableColumnVisibilityDidChange_(self, _cmd, aColumn)
{
    var columnIndex = objj_msgSend(objj_msgSend(self, "tableColumns"), "indexOfObjectIdenticalTo:", aColumn);
    if (self._dirtyTableColumnRangeIndex < 0)
        self._dirtyTableColumnRangeIndex = columnIndex;
    else
        self._dirtyTableColumnRangeIndex = MIN(columnIndex, self._dirtyTableColumnRangeIndex);
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsLayout");
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsDisplay:", YES);
    var rowIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "numberOfRows")));
    objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", rowIndexes, objj_msgSend(CPIndexSet, "indexSetWithIndex:", columnIndex));
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("tableColumns"), function $CPTableView__tableColumns(self, _cmd)
{
    return self._tableColumns;
}
,["CPArray"]), new objj_method(sel_getUid("columnWithIdentifier:"), function $CPTableView__columnWithIdentifier_(self, _cmd, anIdentifier)
{
    var index = 0,
        count = self._tableColumns.length;
    for (; index < count; ++index)
        if (objj_msgSend(self._tableColumns[index], "identifier") === anIdentifier)
            return index;
    return CPNotFound;
}
,["CPInteger","CPString"]), new objj_method(sel_getUid("tableColumnWithIdentifier:"), function $CPTableView__tableColumnWithIdentifier_(self, _cmd, anIdentifier)
{
    var index = objj_msgSend(self, "columnWithIdentifier:", anIdentifier);
    if (index === CPNotFound)
        return nil;
    return self._tableColumns[index];
}
,["CPTableColumn","CPString"]), new objj_method(sel_getUid("_didResizeTableColumn:"), function $CPTableView___didResizeTableColumn_(self, _cmd, theColumn)
{
    objj_msgSend(self, "_autosave");
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("selectColumnIndexes:byExtendingSelection:"), function $CPTableView__selectColumnIndexes_byExtendingSelection_(self, _cmd, columns, shouldExtendSelection)
{
    if (objj_msgSend(columns, "firstIndex") != CPNotFound && objj_msgSend(columns, "firstIndex") < 0 || objj_msgSend(columns, "lastIndex") >= objj_msgSend(self, "numberOfColumns"))
        return;
    if (objj_msgSend(self._selectedRowIndexes, "count") > 0)
    {
        objj_msgSend(self, "_updateHighlightWithOldRows:newRows:", self._selectedRowIndexes, objj_msgSend(CPIndexSet, "indexSet"));
        self._selectedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
    }
    var previousSelectedIndexes = objj_msgSend(self._selectedColumnIndexes, "copy");
    if (shouldExtendSelection)
        objj_msgSend(self._selectedColumnIndexes, "addIndexes:", columns);
    else
        self._selectedColumnIndexes = objj_msgSend(columns, "copy");
    objj_msgSend(self, "_updateHighlightWithOldColumns:newColumns:", previousSelectedIndexes, self._selectedColumnIndexes);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    if (self._headerView)
        objj_msgSend(self._headerView, "setNeedsDisplay:", YES);
    objj_msgSend(self, "_noteSelectionDidChange");
}
,["void","CPIndexSet","BOOL"]), new objj_method(sel_getUid("_setSelectedRowIndexes:"), function $CPTableView___setSelectedRowIndexes_(self, _cmd, rows)
{
    if (objj_msgSend(self._selectedRowIndexes, "isEqualToIndexSet:", rows))
        return;
    var previousSelectedIndexes = self._selectedRowIndexes;
    self._lastSelectedRow = objj_msgSend(rows, "count") > 0 ? objj_msgSend(rows, "lastIndex") : -1;
    self._selectedRowIndexes = objj_msgSend(rows, "copy");
    objj_msgSend(self, "_updateHighlightWithOldRows:newRows:", previousSelectedIndexes, self._selectedRowIndexes);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "selectionIndexes");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "selectionIndexes", self), "reverseSetValueFor:", "selectedRowIndexes");
    objj_msgSend(self, "_noteSelectionDidChange");
}
,["void","CPIndexSet"]), new objj_method(sel_getUid("selectRowIndexes:byExtendingSelection:"), function $CPTableView__selectRowIndexes_byExtendingSelection_(self, _cmd, rows, shouldExtendSelection)
{
    if (objj_msgSend(rows, "isEqualToIndexSet:", self._selectedRowIndexes) || (objj_msgSend(rows, "firstIndex") != CPNotFound && objj_msgSend(rows, "firstIndex") < 0 || objj_msgSend(rows, "lastIndex") >= objj_msgSend(self, "numberOfRows")) || objj_msgSend(self, "numberOfColumns") <= 0)
        return;
    if (objj_msgSend(self._selectedColumnIndexes, "count") > 0)
    {
        objj_msgSend(self, "_updateHighlightWithOldColumns:newColumns:", self._selectedColumnIndexes, objj_msgSend(CPIndexSet, "indexSet"));
        self._selectedColumnIndexes = objj_msgSend(CPIndexSet, "indexSet");
        if (self._headerView)
            objj_msgSend(self._headerView, "setNeedsDisplay:", YES);
    }
    var newSelectedIndexes;
    if (shouldExtendSelection)
    {
        newSelectedIndexes = objj_msgSend(self._selectedRowIndexes, "copy");
        objj_msgSend(newSelectedIndexes, "addIndexes:", rows);
    }
    else
        newSelectedIndexes = objj_msgSend(rows, "copy");
    objj_msgSend(self, "_setSelectedRowIndexes:", newSelectedIndexes);
}
,["void","CPIndexSet","BOOL"]), new objj_method(sel_getUid("_updateHighlightWithOldRows:newRows:"), function $CPTableView___updateHighlightWithOldRows_newRows_(self, _cmd, oldRows, newRows)
{
    var firstExposedRow = objj_msgSend(self._exposedRows, "firstIndex"),
        exposedLength = objj_msgSend(self._exposedRows, "lastIndex") - firstExposedRow + 1,
        deselectRows = [],
        selectRows = [],
        deselectRowIndexes = objj_msgSend(oldRows, "copy"),
        selectRowIndexes = objj_msgSend(newRows, "copy");
    objj_msgSend(deselectRowIndexes, "removeMatches:", selectRowIndexes);
    objj_msgSend(deselectRowIndexes, "getIndexes:maxCount:inIndexRange:", deselectRows, -1, CPMakeRange(firstExposedRow, exposedLength));
    objj_msgSend(selectRowIndexes, "getIndexes:maxCount:inIndexRange:", selectRows, -1, CPMakeRange(firstExposedRow, exposedLength));
    var selectionState = objj_msgSend(self, "_isFocused") ? CPThemeStateSelectedDataViewF : CPThemeStateSelectedDataView;
    for (var identifier in self._dataViewsForTableColumns)
    {
        var dataViewsInTableColumn = self._dataViewsForTableColumns[identifier];
        var count = deselectRows.length;
        while (count--)
        {
            var view = dataViewsInTableColumn[deselectRows[count]];
            objj_msgSend(view, "unsetThemeState:", CPThemeStateSelectedDataViewF | CPThemeStateSelectedDataView);
        }
        var count = selectRows.length;
        while (count--)
        {
            var view = dataViewsInTableColumn[selectRows[count]];
            objj_msgSend(view, "unsetThemeState:", CPThemeStateSelectedDataViewF | CPThemeStateSelectedDataView);
            objj_msgSend(view, "setThemeState:", selectionState);
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_updateHighlightWithOldColumns:newColumns:"), function $CPTableView___updateHighlightWithOldColumns_newColumns_(self, _cmd, oldColumns, newColumns)
{
    var firstExposedColumn = objj_msgSend(self._exposedColumns, "firstIndex"),
        exposedLength = objj_msgSend(self._exposedColumns, "lastIndex") - firstExposedColumn + 1,
        deselectColumns = [],
        selectColumns = [],
        deselectColumnIndexes = objj_msgSend(oldColumns, "copy"),
        selectColumnIndexes = objj_msgSend(newColumns, "copy"),
        selectRows = [];
    objj_msgSend(deselectColumnIndexes, "removeMatches:", selectColumnIndexes);
    objj_msgSend(deselectColumnIndexes, "getIndexes:maxCount:inIndexRange:", deselectColumns, -1, CPMakeRange(firstExposedColumn, exposedLength));
    objj_msgSend(selectColumnIndexes, "getIndexes:maxCount:inIndexRange:", selectColumns, -1, CPMakeRange(firstExposedColumn, exposedLength));
    objj_msgSend(self._exposedRows, "getIndexes:maxCount:inIndexRange:", selectRows, -1, nil);
    var showsSelection = self._selectionHighlightStyle !== CPTableViewSelectionHighlightStyleNone,
        selectors = [sel_getUid("unsetThemeState:"), sel_getUid("setThemeState:")],
        selectors_args = [CPThemeStateSelectedDataViewF | CPThemeStateSelectedDataView, objj_msgSend(self, "_isFocused") ? CPThemeStateSelectedDataViewF : CPThemeStateSelectedDataView],
        selectInfo = [{columns: deselectColumns, rowSelectorIndex: 0, headerSelectorIndex: 0}, {columns: selectColumns, rowSelectorIndex: showsSelection ? 1 : 0, headerSelectorIndex: 1}],
        rowsCount = selectRows.length;
    for (var selectIndex = 0; selectIndex < selectInfo.length; ++selectIndex)
    {
        var info = selectInfo[selectIndex],
            count = info.columns.length,
            rowSelector = selectors[info.rowSelectorIndex],
            rowSelectorArg = selectors_args[info.rowSelectorIndex],
            headerSelector = selectors[info.headerSelectorIndex];
        while (count--)
        {
            var columnIndex = info.columns[count],
                identifier = objj_msgSend(self._tableColumns[columnIndex], "UID"),
                dataViewsInTableColumn = self._dataViewsForTableColumns[identifier];
            for (var i = 0; i < rowsCount; i++)
            {
                var rowIndex = selectRows[i],
                    dataView = dataViewsInTableColumn[rowIndex];
                objj_msgSend(dataView, "performSelector:withObject:", rowSelector, rowSelectorArg);
            }
            if (self._headerView)
            {
                var headerView = objj_msgSend(self._tableColumns[columnIndex], "headerView");
                objj_msgSend(headerView, "performSelector:withObject:", headerSelector, CPThemeStateSelected);
            }
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("selectedColumn"), function $CPTableView__selectedColumn(self, _cmd)
{
    return objj_msgSend(self._selectedColumnIndexes, "lastIndex");
}
,["int"]), new objj_method(sel_getUid("selectedColumnIndexes"), function $CPTableView__selectedColumnIndexes(self, _cmd)
{
    return self._selectedColumnIndexes;
}
,["CPIndexSet"]), new objj_method(sel_getUid("selectedRow"), function $CPTableView__selectedRow(self, _cmd)
{
    return self._lastSelectedRow;
}
,["int"]), new objj_method(sel_getUid("selectedRowIndexes"), function $CPTableView__selectedRowIndexes(self, _cmd)
{
    return objj_msgSend(self._selectedRowIndexes, "copy");
}
,["CPIndexSet"]), new objj_method(sel_getUid("deselectColumn:"), function $CPTableView__deselectColumn_(self, _cmd, anIndex)
{
    var selectedColumnIndexes = objj_msgSend(self._selectedColumnIndexes, "copy");
    objj_msgSend(selectedColumnIndexes, "removeIndex:", anIndex);
    objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", selectedColumnIndexes, NO);
    objj_msgSend(self, "_noteSelectionDidChange");
}
,["void","CPInteger"]), new objj_method(sel_getUid("deselectRow:"), function $CPTableView__deselectRow_(self, _cmd, aRow)
{
    var selectedRowIndexes = objj_msgSend(self._selectedRowIndexes, "copy");
    objj_msgSend(selectedRowIndexes, "removeIndex:", aRow);
    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", selectedRowIndexes, NO);
    objj_msgSend(self, "_noteSelectionDidChange");
}
,["void","CPInteger"]), new objj_method(sel_getUid("numberOfSelectedColumns"), function $CPTableView__numberOfSelectedColumns(self, _cmd)
{
    return objj_msgSend(self._selectedColumnIndexes, "count");
}
,["CPInteger"]), new objj_method(sel_getUid("numberOfSelectedRows"), function $CPTableView__numberOfSelectedRows(self, _cmd)
{
    return objj_msgSend(self._selectedRowIndexes, "count");
}
,["CPInteger"]), new objj_method(sel_getUid("isColumnSelected:"), function $CPTableView__isColumnSelected_(self, _cmd, anIndex)
{
    return objj_msgSend(self._selectedColumnIndexes, "containsIndex:", anIndex);
}
,["BOOL","CPInteger"]), new objj_method(sel_getUid("isRowSelected:"), function $CPTableView__isRowSelected_(self, _cmd, aRow)
{
    return objj_msgSend(self._selectedRowIndexes, "containsIndex:", aRow);
}
,["BOOL","CPInteger"]), new objj_method(sel_getUid("deselectAll"), function $CPTableView__deselectAll(self, _cmd)
{
    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSet"), NO);
    objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSet"), NO);
}
,["void"]), new objj_method(sel_getUid("selectAll:"), function $CPTableView__selectAll_(self, _cmd, sender)
{
    if (self._allowsMultipleSelection)
    {
        if (!objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
            return;
        if (objj_msgSend(objj_msgSend(self, "selectedColumnIndexes"), "count"))
            objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "numberOfColumns"))), NO);
        else
            objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "numberOfRows"))), NO);
    }
}
,["void","id"]), new objj_method(sel_getUid("deselectAll:"), function $CPTableView__deselectAll_(self, _cmd, sender)
{
    if (objj_msgSend(self, "allowsEmptySelection"))
    {
        if (!objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
            return;
        objj_msgSend(self, "deselectAll");
    }
}
,["void","id"]), new objj_method(sel_getUid("numberOfColumns"), function $CPTableView__numberOfColumns(self, _cmd)
{
    return self._tableColumns.length;
}
,["int"]), new objj_method(sel_getUid("numberOfRows"), function $CPTableView__numberOfRows(self, _cmd)
{
    if (self._numberOfRows !== nil)
        return self._numberOfRows;
    var contentBindingInfo = objj_msgSend(self, "infoForBinding:", "content");
    if (contentBindingInfo)
    {
        var destination = objj_msgSend(contentBindingInfo, "objectForKey:", CPObservedObjectKey),
            keyPath = objj_msgSend(contentBindingInfo, "objectForKey:", CPObservedKeyPathKey);
        self._numberOfRows = objj_msgSend(objj_msgSend(destination, "valueForKeyPath:", keyPath), "count");
    }
    else
    {
        self._numberOfRows = objj_msgSend(self, "_sendDataSourceNumberOfRowsInTableView");
        if (!self._numberOfRows)
        {
            if (self._dataSource && !objj_msgSend(self, "_dataSourceRespondsToNumberOfRowsinTableView"))
                CPLog("no content binding established and data source " + objj_msgSend(self._dataSource, "description") + " does not implement numberOfRowsInTableView:");
            self._numberOfRows = 0;
        }
    }
    return self._numberOfRows;
}
,["int"]), new objj_method(sel_getUid("editColumn:row:withEvent:select:"), function $CPTableView__editColumn_row_withEvent_select_(self, _cmd, columnIndex, rowIndex, theEvent, flag)
{
    if (self._isViewBased)
    {
        var identifier = objj_msgSend(self._tableColumns[columnIndex], "UID"),
            view = self._dataViewsForTableColumns[identifier][rowIndex];
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", view);
    }
    else
    {
        if (!objj_msgSend(self, "isRowSelected:", rowIndex))
            objj_msgSend(objj_msgSend(CPException, "exceptionWithName:reason:userInfo:", "Error", "Attempt to edit row=" + rowIndex + " when not selected.", nil), "raise");
        objj_msgSend(self, "scrollRowToVisible:", rowIndex);
        objj_msgSend(self, "scrollColumnToVisible:", columnIndex);
        self._editingCellIndex = CGPointMake(columnIndex, rowIndex);
        self._editingCellIndex._shouldSelect = flag;
        objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", rowIndex), objj_msgSend(CPIndexSet, "indexSetWithIndex:", columnIndex));
    }
}
,["void","CPInteger","CPInteger","CPEvent","BOOL"]), new objj_method(sel_getUid("editedColumn"), function $CPTableView__editedColumn(self, _cmd)
{
    if (!self._editingCellIndex)
        return CPNotFound;
    return self._editingCellIndex.x;
}
,["CPInteger"]), new objj_method(sel_getUid("editedRow"), function $CPTableView__editedRow(self, _cmd)
{
    if (!self._editingCellIndex)
        return CPNotFound;
    return self._editingCellIndex.y;
}
,["CPInteger"]), new objj_method(sel_getUid("cornerView"), function $CPTableView__cornerView(self, _cmd)
{
    return self._cornerView;
}
,["CPView"]), new objj_method(sel_getUid("setCornerView:"), function $CPTableView__setCornerView_(self, _cmd, aView)
{
    if (self._cornerView === aView)
        return;
    self._cornerView = aView;
    var scrollView = objj_msgSend(self, "enclosingScrollView");
    if (objj_msgSend(scrollView, "isKindOfClass:", objj_msgSend(CPScrollView, "class")) && objj_msgSend(scrollView, "documentView") === self)
        objj_msgSend(scrollView, "_updateCornerAndHeaderView");
}
,["void","CPView"]), new objj_method(sel_getUid("headerView"), function $CPTableView__headerView(self, _cmd)
{
    return self._headerView;
}
,["CPView"]), new objj_method(sel_getUid("setHeaderView:"), function $CPTableView__setHeaderView_(self, _cmd, aHeaderView)
{
    if (self._headerView === aHeaderView)
        return;
    objj_msgSend(self._headerView, "setTableView:", nil);
    self._headerView = aHeaderView;
    if (self._headerView)
    {
        objj_msgSend(self._headerView, "setTableView:", self);
        objj_msgSend(self._headerView, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), CGRectGetHeight(objj_msgSend(self._headerView, "frame"))));
    }
    else
    {
        objj_msgSend(self._cornerView, "removeFromSuperview");
        self._cornerView = nil;
    }
    var scrollView = objj_msgSend(self, "enclosingScrollView");
    if (objj_msgSend(scrollView, "isKindOfClass:", objj_msgSend(CPScrollView, "class")) && objj_msgSend(scrollView, "documentView") === self)
        objj_msgSend(scrollView, "_updateCornerAndHeaderView");
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPView"]), new objj_method(sel_getUid("_recalculateTableColumnRanges"), function $CPTableView___recalculateTableColumnRanges(self, _cmd)
{
    if (self._dirtyTableColumnRangeIndex < 0)
        return;
    self._numberOfHiddenColumns = 0;
    var index = self._dirtyTableColumnRangeIndex,
        count = self._tableColumns.length,
        x = index === 0 ? 0.0 : CPMaxRange(self._tableColumnRanges[index - 1]);
    for (; index < count; ++index)
    {
        var tableColumn = self._tableColumns[index];
        if (objj_msgSend(tableColumn, "isHidden"))
        {
            self._numberOfHiddenColumns += 1;
            self._tableColumnRanges[index] = CPMakeRange(x, 0.0);
        }
        else
        {
            var width = objj_msgSend(self._tableColumns[index], "width") + self._intercellSpacing.width;
            self._tableColumnRanges[index] = CPMakeRange(x, width);
            x += width;
        }
    }
    self._tableColumnRanges.length = count;
    self._dirtyTableColumnRangeIndex = CPNotFound;
}
,["void"]), new objj_method(sel_getUid("rectOfColumn:"), function $CPTableView__rectOfColumn_(self, _cmd, aColumnIndex)
{
    aColumnIndex = +aColumnIndex;
    if (aColumnIndex < 0 || aColumnIndex >= self._tableColumns.length)
        return CGRectMakeZero();
    if (objj_msgSend(objj_msgSend(self._tableColumns, "objectAtIndex:", aColumnIndex), "isHidden"))
        return CGRectMakeZero();
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var range = self._tableColumnRanges[aColumnIndex];
    return CGRectMake(range.location, 0.0, range.length, CGRectGetHeight(objj_msgSend(self, "bounds")));
}
,["CGRect","CPInteger"]), new objj_method(sel_getUid("_rectOfRow:checkRange:"), function $CPTableView___rectOfRow_checkRange_(self, _cmd, aRowIndex, checkRange)
{
    var lastIndex = objj_msgSend(self, "numberOfRows") - 1,
        validIndex = aRowIndex >= 0 && aRowIndex <= lastIndex;
    if (checkRange && !validIndex)
        return CGRectMakeZero();
    var y = 0,
        height,
        fixedHeightRows = 0;
    if (self._implementedDelegateMethods & CPTableViewDelegate_tableView_heightOfRow_)
    {
        objj_msgSend(self, "_populateRowHeightCacheIfNeeded");
        var heightInfo;
        if (validIndex)
        {
            heightInfo = self._cachedRowHeights[aRowIndex];
            y = heightInfo.y;
            height = heightInfo.height + self._intercellSpacing.height;
        }
        else
        {
            height = self._rowHeight + self._intercellSpacing.height;
            if (self._numberOfRows > 0)
            {
                heightInfo = self._cachedRowHeights[lastIndex];
                y = heightInfo.y + heightInfo.height + self._intercellSpacing.height;
                fixedHeightRows = aRowIndex - self._numberOfRows;
            }
        }
    }
    else
    {
        fixedHeightRows = aRowIndex;
        height = self._rowHeight + self._intercellSpacing.height;
    }
    y += fixedHeightRows * (self._rowHeight + self._intercellSpacing.height);
    return CGRectMake(0.0, y, CGRectGetWidth(objj_msgSend(self, "bounds")), height);
}
,["CGRect","CPInteger","BOOL"]), new objj_method(sel_getUid("rectOfRow:"), function $CPTableView__rectOfRow_(self, _cmd, aRowIndex)
{
    return objj_msgSend(self, "_rectOfRow:checkRange:", aRowIndex, YES);
}
,["CGRect","CPInteger"]), new objj_method(sel_getUid("rowsInRect:"), function $CPTableView__rowsInRect_(self, _cmd, aRect)
{
    if (self._numberOfRows <= 0)
        return CPMakeRange(0, 0);
    var bounds = objj_msgSend(self, "bounds");
    if (!CGRectIntersectsRect(aRect, bounds))
        return CPMakeRange(0, 0);
    var firstRow = objj_msgSend(self, "rowAtPoint:", aRect.origin);
    if (firstRow < 0)
        firstRow = 0;
    var lastRow = objj_msgSend(self, "rowAtPoint:", CGPointMake(0.0, CGRectGetMaxY(aRect)));
    if (lastRow < 0)
        lastRow = self._numberOfRows - 1;
    return CPMakeRange(firstRow, lastRow - firstRow + 1);
}
,["CPRange","CGRect"]), new objj_method(sel_getUid("_exposedRowsInRect:"), function $CPTableView___exposedRowsInRect_(self, _cmd, aRect)
{
    var rowRange = objj_msgSend(self, "rowsInRect:", aRect),
        lastRealRow = CPMaxRange(rowRange) - 1,
        rectOfLastRealRow = objj_msgSend(self, "_rectOfRow:checkRange:", lastRealRow, NO),
        bottomOfRealRows = CGRectGetMaxY(rectOfLastRealRow),
        rectBottom = CGRectGetMaxY(aRect);
    if (bottomOfRealRows >= rectBottom)
        return rowRange;
    var numberOfSynthesizedRows = CEIL((rectBottom - bottomOfRealRows) / (self._rowHeight + self._intercellSpacing.height));
    rowRange.length += numberOfSynthesizedRows;
    return rowRange;
}
,["CPRange","CGRect"]), new objj_method(sel_getUid("columnIndexesInRect:"), function $CPTableView__columnIndexesInRect_(self, _cmd, aRect)
{
    var column = MAX(0, objj_msgSend(self, "columnAtPoint:", CGPointMake(aRect.origin.x, 0.0))),
        lastColumn = objj_msgSend(self, "columnAtPoint:", CGPointMake(CGRectGetMaxX(aRect), 0.0));
    if (lastColumn === CPNotFound)
        lastColumn = self._tableColumns.length - 1;
    if (self._numberOfHiddenColumns <= 0)
        return objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(column, lastColumn - column + 1));
    var indexSet = objj_msgSend(CPIndexSet, "indexSet");
    for (; column <= lastColumn; ++column)
    {
        var tableColumn = self._tableColumns[column];
        if (!objj_msgSend(tableColumn, "isHidden"))
            objj_msgSend(indexSet, "addIndex:", column);
    }
    return indexSet;
}
,["CPIndexSet","CGRect"]), new objj_method(sel_getUid("columnAtPoint:"), function $CPTableView__columnAtPoint_(self, _cmd, aPoint)
{
    var bounds = objj_msgSend(self, "bounds");
    if (!CGRectContainsPoint(bounds, aPoint))
        return CPNotFound;
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var x = aPoint.x,
        low = 0,
        high = self._tableColumnRanges.length - 1;
    while (low <= high)
    {
        var middle = FLOOR(low + (high - low) / 2),
            range = self._tableColumnRanges[middle];
        if (x < range.location)
            high = middle - 1;
        else if (x >= CPMaxRange(range))
            low = middle + 1;
        else
        {
            var numberOfColumns = self._tableColumnRanges.length;
            while (middle < numberOfColumns && objj_msgSend(self._tableColumns[middle], "isHidden"))
                ++middle;
            if (middle < numberOfColumns)
                return middle;
            return CPNotFound;
        }
    }
    return CPNotFound;
}
,["CPInteger","CGPoint"]), new objj_method(sel_getUid("rowAtPoint:"), function $CPTableView__rowAtPoint_(self, _cmd, aPoint)
{
    var bounds = objj_msgSend(self, "bounds");
    if (aPoint.x < CGRectGetMinX(bounds) || aPoint.x >= CGRectGetMaxX(bounds))
        return -1;
    if (self._implementedDelegateMethods & CPTableViewDelegate_tableView_heightOfRow_)
    {
        var heightInfo = objj_msgSend(self._cachedRowHeights, "lastObject");
        if (aPoint.y >= heightInfo.y + heightInfo.height + self._intercellSpacing.height)
            return -1;
        return objj_msgSend(self._cachedRowHeights, "indexOfObject:inSortedRange:options:usingComparator:", aPoint, nil, 0, function(aPoint, heightInfo)
        {
            if (aPoint.y < heightInfo.y)
                return CPOrderedAscending;
            if (aPoint.y > heightInfo.y + heightInfo.height + self._intercellSpacing.height)
                return CPOrderedDescending;
            return CPOrderedSame;
        });
    }
    else
    {
        var row = FLOOR(aPoint.y / (self._rowHeight + self._intercellSpacing.height));
        return row >= self._numberOfRows ? -1 : row;
    }
}
,["CPInteger","CGPoint"]), new objj_method(sel_getUid("rowForView:"), function $CPTableView__rowForView_(self, _cmd, aView)
{
    return objj_msgSend(self, "rowNotColumn:forView:", YES, aView);
}
,["CPInteger","CPView"]), new objj_method(sel_getUid("columnForView:"), function $CPTableView__columnForView_(self, _cmd, aView)
{
    return objj_msgSend(self, "rowNotColumn:forView:", NO, aView);
}
,["CPInteger","CPView"]), new objj_method(sel_getUid("rowNotColumn:forView:"), function $CPTableView__rowNotColumn_forView_(self, _cmd, isRow, aView)
{
    if (!objj_msgSend(aView, "isKindOfClass:", objj_msgSend(CPView, "class")))
        return -1;
    var cellView = aView,
        contentView = objj_msgSend(objj_msgSend(self, "window"), "contentView"),
        max_rec = 100;
    while (max_rec--)
    {
        if (!cellView || cellView === contentView)
        {
            return -1;
        }
        else
        {
            var superview = objj_msgSend(cellView, "superview");
            if (objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPTableView, "class")))
            {
                break;
            }
            cellView = superview;
        }
    }
    var exposedRows = [],
        exposedColumns = [];
    objj_msgSend(self._exposedRows, "getIndexes:maxCount:inIndexRange:", exposedRows, -1, nil);
    objj_msgSend(self._exposedColumns, "getIndexes:maxCount:inIndexRange:", exposedColumns, -1, nil);
    var colcount = exposedColumns.length,
        countOfRows = exposedRows.length;
    while (colcount--)
    {
        var column = exposedColumns[colcount],
            tableColumnUID = objj_msgSend(self._tableColumns[column], "UID"),
            dataViewsInTableColumn = self._dataViewsForTableColumns[tableColumnUID],
            rowcount = countOfRows;
        while (rowcount--)
        {
            var row = exposedRows[rowcount];
            if (cellView == dataViewsInTableColumn[row])
                return isRow ? row : column;
        }
    }
    return -1;
}
,["CPInteger","BOOL","CPView"]), new objj_method(sel_getUid("frameOfDataViewAtColumn:row:"), function $CPTableView__frameOfDataViewAtColumn_row_(self, _cmd, aColumn, aRow)
{
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    if (aColumn > objj_msgSend(self, "numberOfColumns") || aRow > objj_msgSend(self, "numberOfRows"))
        return CGRectMakeZero();
    var tableColumnRange = self._tableColumnRanges[aColumn],
        rectOfRow = objj_msgSend(self, "rectOfRow:", aRow),
        leftInset = FLOOR(self._intercellSpacing.width / 2.0),
        topInset = FLOOR(self._intercellSpacing.height / 2.0);
    return CGRectMake(tableColumnRange.location + leftInset, CGRectGetMinY(rectOfRow) + topInset, tableColumnRange.length - self._intercellSpacing.width, CGRectGetHeight(rectOfRow) - self._intercellSpacing.height);
}
,["CGRect","CPInteger","CPInteger"]), new objj_method(sel_getUid("resizeWithOldSuperviewSize:"), function $CPTableView__resizeWithOldSuperviewSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "resizeWithOldSuperviewSize:", aSize);
    if (self._disableAutomaticResizing)
        return;
    var mask = self._columnAutoResizingStyle;
    if (!self._lastColumnShouldSnap)
    {
        var superview = objj_msgSend(self, "superview");
        if (!superview || !objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPClipView, "class")))
            return;
        var superviewWidth = objj_msgSend(superview, "bounds").size.width,
            lastColumnMaxX = CGRectGetMaxX(objj_msgSend(self, "rectOfColumn:", objj_msgSend(self, "numberOfColumns") - 1));
        if (lastColumnMaxX >= superviewWidth && lastColumnMaxX <= aSize.width || lastColumnMaxX <= superviewWidth && lastColumnMaxX >= aSize.width)
            self._lastColumnShouldSnap = YES;
        else if (mask === CPTableViewUniformColumnAutoresizingStyle)
            return;
    }
    if (mask === CPTableViewUniformColumnAutoresizingStyle)
        objj_msgSend(self, "_resizeAllColumnUniformlyWithOldSize:", aSize);
    else if (mask === CPTableViewLastColumnOnlyAutoresizingStyle)
        objj_msgSend(self, "sizeLastColumnToFit");
    else if (mask === CPTableViewFirstColumnOnlyAutoresizingStyle)
        objj_msgSend(self, "_autoResizeFirstColumn");
}
,["void","CGSize"]), new objj_method(sel_getUid("_autoResizeFirstColumn"), function $CPTableView___autoResizeFirstColumn(self, _cmd)
{
    var superview = objj_msgSend(self, "superview");
    if (!superview)
        return;
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var count = self._tableColumns.length,
        columnToResize = nil,
        totalWidth = 0,
        i = 0;
    for (; i < count; i++)
    {
        var column = self._tableColumns[i];
        if (!objj_msgSend(column, "isHidden"))
        {
            if (!columnToResize)
                columnToResize = column;
            totalWidth += objj_msgSend(column, "width") + self._intercellSpacing.width;
        }
    }
    if (columnToResize)
    {
        var superviewSize = objj_msgSend(superview, "bounds").size,
            newWidth = superviewSize.width - totalWidth;
        newWidth += objj_msgSend(columnToResize, "width");
        objj_msgSend(columnToResize, "_tryToResizeToWidth:", newWidth);
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("_resizeAllColumnUniformlyWithOldSize:"), function $CPTableView___resizeAllColumnUniformlyWithOldSize_(self, _cmd, oldSize)
{
    var superview = objj_msgSend(self, "superview");
    if (!superview || !objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPClipView, "class")))
        return;
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var superviewWidth = objj_msgSend(superview, "bounds").size.width,
        count = self._tableColumns.length,
        resizableColumns = objj_msgSend(CPIndexSet, "indexSet"),
        remainingSpace = 0.0,
        i = 0;
    for (; i < count; i++)
    {
        var tableColumn = self._tableColumns[i];
        if (!objj_msgSend(tableColumn, "isHidden") && objj_msgSend(tableColumn, "resizingMask") & CPTableColumnAutoresizingMask)
            objj_msgSend(resizableColumns, "addIndex:", i);
    }
    var maxXofColumns = CGRectGetMaxX(objj_msgSend(self, "rectOfColumn:", objj_msgSend(resizableColumns, "lastIndex"))),
        remainingSpace = superviewWidth - maxXofColumns,
        resizeableColumnsCount = objj_msgSend(resizableColumns, "count"),
        proportionate = 0;
    while (remainingSpace && resizeableColumnsCount)
    {
        proportionate += remainingSpace / resizeableColumnsCount;
        remainingSpace = 0.0;
        var index = CPNotFound;
        while ((index = objj_msgSend(resizableColumns, "indexGreaterThanIndex:", index)) !== CPNotFound)
        {
            var item = self._tableColumns[index],
                proposedWidth = objj_msgSend(item, "width") + proportionate,
                resizeLeftovers = objj_msgSend(item, "_tryToResizeToWidth:", proposedWidth);
            if (resizeLeftovers)
            {
                objj_msgSend(resizableColumns, "removeIndex:", index);
                remainingSpace += resizeLeftovers;
            }
        }
    }
    while (count-- && objj_msgSend(self._tableColumns[count], "isHidden"));
    var delta = superviewWidth - CGRectGetMaxX(objj_msgSend(self, "rectOfColumn:", count)) - (objj_msgSend(self, "intercellSpacing").width || 1),
        newSize = objj_msgSend(item, "width") + delta;
    objj_msgSend(item, "_tryToResizeToWidth:", newSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("setColumnAutoresizingStyle:"), function $CPTableView__setColumnAutoresizingStyle_(self, _cmd, style)
{
    self._columnAutoResizingStyle = style;
}
,["void","unsigned"]), new objj_method(sel_getUid("columnAutoresizingStyle"), function $CPTableView__columnAutoresizingStyle(self, _cmd)
{
    return self._columnAutoResizingStyle;
}
,["unsigned"]), new objj_method(sel_getUid("sizeLastColumnToFit"), function $CPTableView__sizeLastColumnToFit(self, _cmd)
{
    self._lastColumnShouldSnap = YES;
    var superview = objj_msgSend(self, "superview");
    if (!superview)
        return;
    var superviewSize = objj_msgSend(superview, "bounds").size;
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var count = self._tableColumns.length;
    while (count-- && objj_msgSend(self._tableColumns[count], "isHidden"));
    if (count >= 0)
    {
        var columnToResize = self._tableColumns[count],
            newSize = MAX(0.0, superviewSize.width - CGRectGetMinX(objj_msgSend(self, "rectOfColumn:", count)) - self._intercellSpacing.width);
        objj_msgSend(columnToResize, "_tryToResizeToWidth:", newSize);
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("noteNumberOfRowsChanged"), function $CPTableView__noteNumberOfRowsChanged(self, _cmd)
{
    var oldNumberOfRows = self._numberOfRows;
    self._numberOfRows = nil;
    self._cachedRowHeights = [];
    objj_msgSend(self, "noteHeightOfRowsWithIndexesChanged:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(self, "numberOfRows"))));
    var hangingSelections = oldNumberOfRows - self._numberOfRows;
    if (hangingSelections > 0)
    {
        var previousSelectionCount = objj_msgSend(self._selectedRowIndexes, "count");
        objj_msgSend(self._selectedRowIndexes, "removeIndexesInRange:", CPMakeRange(self._numberOfRows, hangingSelections));
        if (!objj_msgSend(self._selectedRowIndexes, "containsIndex:", objj_msgSend(self, "selectedRow")))
            self._lastSelectedRow = CPNotFound;
        if (previousSelectionCount > objj_msgSend(self._selectedRowIndexes, "count"))
            objj_msgSend(self, "_noteSelectionDidChange");
    }
    objj_msgSend(self, "tile");
}
,["void"]), new objj_method(sel_getUid("_populateRowHeightCacheIfNeeded"), function $CPTableView___populateRowHeightCacheIfNeeded(self, _cmd)
{
    if (objj_msgSend(self, "numberOfRows") !== self._cachedRowHeights.length)
        objj_msgSend(self, "noteHeightOfRowsWithIndexesChanged:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, self._numberOfRows)));
}
,["void"]), new objj_method(sel_getUid("noteHeightOfRowsWithIndexesChanged:"), function $CPTableView__noteHeightOfRowsWithIndexesChanged_(self, _cmd, anIndexSet)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_heightOfRow_))
        return;
    var i = objj_msgSend(anIndexSet, "indexGreaterThanOrEqualToIndex:", 0);
    if (i === CPNotFound)
        return;
    var y = i < self._cachedRowHeights.length ? self._cachedRowHeights[i].y : 0;
    for (var count = objj_msgSend(self, "numberOfRows"); i < count; ++i)
    {
        var height;
        if (objj_msgSend(anIndexSet, "containsIndex:", i))
            height = objj_msgSend(self, "_sendDelegateHeightOfRow:", i);
        else
            height = self._cachedRowHeights[i].height || self._rowHeight;
        self._cachedRowHeights[i] = {y: y, height: height};
        y += height + self._intercellSpacing.height;
    }
}
,["void","CPIndexSet"]), new objj_method(sel_getUid("tile"), function $CPTableView__tile(self, _cmd)
{
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var width = self._tableColumnRanges.length > 0 ? CPMaxRange(objj_msgSend(self._tableColumnRanges, "lastObject")) : 0.0,
        superview = objj_msgSend(self, "superview"),
        height = 0;
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_heightOfRow_))
        height = (self._rowHeight + self._intercellSpacing.height) * self._numberOfRows;
    else if (self._numberOfRows > 0)
    {
        objj_msgSend(self, "_populateRowHeightCacheIfNeeded");
        var heightInfo = self._cachedRowHeights[self._cachedRowHeights.length - 1];
        height = heightInfo.y + heightInfo.height + self._intercellSpacing.height;
    }
    if (objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPClipView, "class")))
    {
        var superviewSize = objj_msgSend(superview, "bounds").size;
        width = MAX(superviewSize.width, width);
        height = MAX(superviewSize.height, height);
    }
    objj_msgSend(self, "setFrameSize:", CGSizeMake(width, height));
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("scrollRowToVisible:"), function $CPTableView__scrollRowToVisible_(self, _cmd, rowIndex)
{
    var visible = objj_msgSend(self, "visibleRect"),
        rowRect = objj_msgSend(self, "rectOfRow:", rowIndex);
    visible.origin.y = rowRect.origin.y;
    visible.size.height = rowRect.size.height;
    objj_msgSend(self, "scrollRectToVisible:", visible);
}
,["void","int"]), new objj_method(sel_getUid("scrollColumnToVisible:"), function $CPTableView__scrollColumnToVisible_(self, _cmd, columnIndex)
{
    var visible = objj_msgSend(self, "visibleRect"),
        colRect = objj_msgSend(self, "rectOfColumn:", columnIndex);
    visible.origin.x = colRect.origin.x;
    visible.size.width = colRect.size.width;
    objj_msgSend(self, "scrollRectToVisible:", visible);
    objj_msgSend(self._headerView, "scrollRectToVisible:", colRect);
}
,["void","int"]), new objj_method(sel_getUid("setAutosaveName:"), function $CPTableView__setAutosaveName_(self, _cmd, theAutosaveName)
{
    if (self._autosaveName === theAutosaveName)
        return;
    self._autosaveName = theAutosaveName;
    objj_msgSend(self, "setAutosaveTableColumns:", !!theAutosaveName);
    objj_msgSend(self, "_restoreFromAutosave");
}
,["void","CPString"]), new objj_method(sel_getUid("autosaveName"), function $CPTableView__autosaveName(self, _cmd)
{
    return self._autosaveName;
}
,["CPString"]), new objj_method(sel_getUid("setAutosaveTableColumns:"), function $CPTableView__setAutosaveTableColumns_(self, _cmd, shouldAutosave)
{
    self._autosaveTableColumns = shouldAutosave;
}
,["void","BOOL"]), new objj_method(sel_getUid("autosaveTableColumns"), function $CPTableView__autosaveTableColumns(self, _cmd)
{
    return self._autosaveTableColumns;
}
,["BOOL"]), new objj_method(sel_getUid("_columnsKeyForAutosaveName:"), function $CPTableView___columnsKeyForAutosaveName_(self, _cmd, theAutosaveName)
{
    return "CPTableView Columns " + theAutosaveName;
}
,["CPString","CPString"]), new objj_method(sel_getUid("_autosaveEnabled"), function $CPTableView___autosaveEnabled(self, _cmd)
{
    return objj_msgSend(self, "autosaveName") && objj_msgSend(self, "autosaveTableColumns");
}
,["BOOL"]), new objj_method(sel_getUid("_autosave"), function $CPTableView___autosave(self, _cmd)
{
    if (!objj_msgSend(self, "_autosaveEnabled"))
        return;
    var userDefaults = objj_msgSend(CPUserDefaults, "standardUserDefaults"),
        autosaveName = objj_msgSend(self, "autosaveName");
    var columns = objj_msgSend(self, "tableColumns"),
        columnsSetup = [];
    for (var i = 0; i < objj_msgSend(columns, "count"); i++)
    {
        var column = objj_msgSend(columns, "objectAtIndex:", i),
            metaData = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(column, "identifier"), "identifier", objj_msgSend(column, "width"), "width");
        objj_msgSend(columnsSetup, "addObject:", metaData);
    }
    objj_msgSend(userDefaults, "setObject:forKey:", columnsSetup, objj_msgSend(self, "_columnsKeyForAutosaveName:", autosaveName));
}
,["void"]), new objj_method(sel_getUid("_restoreFromAutosave"), function $CPTableView___restoreFromAutosave(self, _cmd)
{
    if (!objj_msgSend(self, "_autosaveEnabled"))
        return;
    var userDefaults = objj_msgSend(CPUserDefaults, "standardUserDefaults"),
        autosaveName = objj_msgSend(self, "autosaveName"),
        tableColumns = objj_msgSend(userDefaults, "objectForKey:", objj_msgSend(self, "_columnsKeyForAutosaveName:", autosaveName));
    if (objj_msgSend(tableColumns, "count") != objj_msgSend(objj_msgSend(self, "tableColumns"), "count"))
        return;
    for (var i = 0; i < objj_msgSend(tableColumns, "count"); i++)
    {
        var metaData = objj_msgSend(tableColumns, "objectAtIndex:", i),
            columnIdentifier = objj_msgSend(metaData, "objectForKey:", "identifier"),
            column = objj_msgSend(self, "columnWithIdentifier:", columnIdentifier),
            tableColumn = objj_msgSend(self, "tableColumnWithIdentifier:", columnIdentifier);
        if (tableColumn && column != CPNotFound)
        {
            objj_msgSend(self, "_moveColumn:toColumn:", column, i);
            objj_msgSend(tableColumn, "setWidth:", objj_msgSend(metaData, "objectForKey:", "width"));
        }
    }
}
,["void"]), new objj_method(sel_getUid("setDelegate:"), function $CPTableView__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate === aDelegate)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._delegate)
    {
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewColumnDidMove:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTableViewColumnDidMoveNotification, self);
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewColumnDidResize:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTableViewColumnDidResizeNotification, self);
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewSelectionDidChange:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTableViewSelectionDidChangeNotification, self);
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewSelectionIsChanging:")))
            objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTableViewSelectionIsChangingNotification, self);
    }
    self._delegate = aDelegate;
    self._implementedDelegateMethods = 0;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("selectionShouldChangeInTableView:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_selectionShouldChangeInTableView_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:viewForTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_viewForTableColumn_row_;
    else if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:dataViewForTableColumn:row:")))
    {
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_dataViewForTableColumn_row_;
        CPLog.warn("tableView:dataViewForTableColumn: is deprecated. You should use -tableView:viewForTableColumn: where you can request the view with -makeViewWithIdentifier:owner:");
    }
    objj_msgSend(self, "_updateIsViewBased");
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:didClickTableColumn:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_didClickTableColumn_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:didDragTableColumn:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_didDragTableColumn_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:heightOfRow:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_heightOfRow_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:isGroupRow:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_isGroupRow_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:mouseDownInHeaderOfTableColumn:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_mouseDownInHeaderOfTableColumn_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:nextTypeSelectMatchFromRow:toRow:forString:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_nextTypeSelectMatchFromRow_toRow_forString_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:selectionIndexesForProposedSelection:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_selectionIndexesForProposedSelection_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldEditTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldEditTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldSelectRow:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldSelectRow_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldSelectTableColumn:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldSelectTableColumn_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldShowViewExpansionForTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldShowViewExpansionForTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldTrackView:forTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldTrackView_forTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldTypeSelectForEvent:withCurrentSearchString:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldTypeSelectForEvent_withCurrentSearchString_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:toolTipForView:rect:tableColumn:row:mouseLocation:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_toolTipForView_rect_tableColumn_row_mouseLocation_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:typeSelectStringForTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_typeSelectStringForTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:willDisplayView:forTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_willDisplayView_forTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:menuForTableColumn:row:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableViewMenuForTableColumn_row_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableView:shouldReorderColumn:toColumn:")))
        self._implementedDelegateMethods |= CPTableViewDelegate_tableView_shouldReorderColumn_toColumn_;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewColumnDidMove:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("tableViewColumnDidMove:"), CPTableViewColumnDidMoveNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewColumnDidResize:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("tableViewColumnDidResize:"), CPTableViewColumnDidResizeNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewSelectionDidChange:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("tableViewSelectionDidChange:"), CPTableViewSelectionDidChangeNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewSelectionIsChanging:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("tableViewSelectionIsChanging:"), CPTableViewSelectionIsChangingNotification, self);
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPTableView__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("_didClickTableColumn:modifierFlags:"), function $CPTableView___didClickTableColumn_modifierFlags_(self, _cmd, clickedColumn, modifierFlags)
{
    objj_msgSend(self, "_changeSortDescriptorsForClickOnColumn:", clickedColumn);
    if (self._allowsColumnSelection)
    {
        if (objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
        {
            objj_msgSend(self, "_noteSelectionIsChanging");
            if (modifierFlags & CPPlatformActionKeyMask)
            {
                if (objj_msgSend(self, "isColumnSelected:", clickedColumn))
                    objj_msgSend(self, "deselectColumn:", clickedColumn);
                else if (objj_msgSend(self, "allowsMultipleSelection") == YES)
                    objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", clickedColumn), YES);
                return;
            }
            else if (modifierFlags & CPShiftKeyMask)
            {
                var startColumn = MIN(clickedColumn, objj_msgSend(self._selectedColumnIndexes, "lastIndex")),
                    endColumn = MAX(clickedColumn, objj_msgSend(self._selectedColumnIndexes, "firstIndex"));
                objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(startColumn, endColumn - startColumn + 1)), YES);
                return;
            }
            else
                objj_msgSend(self, "selectColumnIndexes:byExtendingSelection:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", clickedColumn), NO);
        }
    }
    objj_msgSend(self, "_sendDelegateDidClickTableColumn:", clickedColumn);
}
,["void","int","unsigned"]), new objj_method(sel_getUid("_changeSortDescriptorsForClickOnColumn:"), function $CPTableView___changeSortDescriptorsForClickOnColumn_(self, _cmd, column)
{
    var tableColumn = objj_msgSend(self._tableColumns, "objectAtIndex:", column),
        newMainSortDescriptor = objj_msgSend(tableColumn, "sortDescriptorPrototype");
    if (!newMainSortDescriptor)
        return;
    var oldMainSortDescriptor = nil,
        oldSortDescriptors = objj_msgSend(self, "sortDescriptors"),
        newSortDescriptors = objj_msgSend(CPArray, "arrayWithArray:", oldSortDescriptors),
        e = objj_msgSend(newSortDescriptors, "objectEnumerator"),
        descriptor = nil,
        outdatedDescriptors = objj_msgSend(CPArray, "array");
    if (objj_msgSend(self._sortDescriptors, "count") > 0)
        oldMainSortDescriptor = objj_msgSend(objj_msgSend(self, "sortDescriptors"), "objectAtIndex:", 0);
    while ((descriptor = objj_msgSend(e, "nextObject")) !== nil)
    {
        if (objj_msgSend(objj_msgSend(descriptor, "key"), "isEqual:", objj_msgSend(newMainSortDescriptor, "key")))
            objj_msgSend(outdatedDescriptors, "addObject:", descriptor);
    }
    if (objj_msgSend(objj_msgSend(newMainSortDescriptor, "key"), "isEqual:", objj_msgSend(oldMainSortDescriptor, "key")))
        newMainSortDescriptor = objj_msgSend(oldMainSortDescriptor, "reversedSortDescriptor");
    objj_msgSend(newSortDescriptors, "removeObjectsInArray:", outdatedDescriptors);
    objj_msgSend(newSortDescriptors, "insertObject:atIndex:", newMainSortDescriptor, 0);
    objj_msgSend(self, "setHighlightedTableColumn:", tableColumn);
    objj_msgSend(self, "setSortDescriptors:", newSortDescriptors);
}
,["void","int"]), new objj_method(sel_getUid("setIndicatorImage:inTableColumn:"), function $CPTableView__setIndicatorImage_inTableColumn_(self, _cmd, anImage, aTableColumn)
{
    if (aTableColumn)
    {
        var headerView = objj_msgSend(aTableColumn, "headerView");
        if (objj_msgSend(headerView, "respondsToSelector:", sel_getUid("_setIndicatorImage:")))
            objj_msgSend(headerView, "_setIndicatorImage:", anImage);
    }
}
,["void","CPImage","CPTableColumn"]), new objj_method(sel_getUid("_tableHeaderSortImage"), function $CPTableView___tableHeaderSortImage(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "sort-image");
}
,["CPImage"]), new objj_method(sel_getUid("_tableHeaderReverseSortImage"), function $CPTableView___tableHeaderReverseSortImage(self, _cmd)
{
    return objj_msgSend(self, "currentValueForThemeAttribute:", "sort-image-reversed");
}
,["CPImage"]), new objj_method(sel_getUid("highlightedTableColumn"), function $CPTableView__highlightedTableColumn(self, _cmd)
{
    return self._currentHighlightedTableColumn;
}
,["CPTableColumn"]), new objj_method(sel_getUid("setHighlightedTableColumn:"), function $CPTableView__setHighlightedTableColumn_(self, _cmd, aTableColumn)
{
    if (self._currentHighlightedTableColumn == aTableColumn)
        return;
    if (self._headerView)
    {
        if (self._currentHighlightedTableColumn != nil)
            objj_msgSend(objj_msgSend(self._currentHighlightedTableColumn, "headerView"), "unsetThemeState:", CPThemeStateSelected);
        if (aTableColumn != nil)
            objj_msgSend(objj_msgSend(aTableColumn, "headerView"), "setThemeState:", CPThemeStateSelected);
    }
    self._currentHighlightedTableColumn = aTableColumn;
}
,["void","CPTableColumn"]), new objj_method(sel_getUid("canDragRowsWithIndexes:atPoint:"), function $CPTableView__canDragRowsWithIndexes_atPoint_(self, _cmd, rowIndexes, mouseDownPoint)
{
    return objj_msgSend(rowIndexes, "count") > 0 && objj_msgSend(self, "numberOfRows") > 0 && objj_msgSend(self, "numberOfColumns") > 0;
}
,["BOOL","CPIndexSet","CGPoint"]), new objj_method(sel_getUid("dragImageForRowsWithIndexes:tableColumns:event:offset:"), function $CPTableView__dragImageForRowsWithIndexes_tableColumns_event_offset_(self, _cmd, dragRows, theTableColumns, dragEvent, dragImageOffset)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "image-generic-file");
}
,["CPImage","CPIndexSet","CPArray","CPEvent","CGPoint"]), new objj_method(sel_getUid("dragViewForRowsWithIndexes:tableColumns:event:offset:"), function $CPTableView__dragViewForRowsWithIndexes_tableColumns_event_offset_(self, _cmd, theDraggedRows, theTableColumns, theDragEvent, dragViewOffset)
{
    var bounds = objj_msgSend(self, "bounds"),
        view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", bounds);
    objj_msgSend(view, "setAlphaValue:", 0.7);
    var columnIndex = objj_msgSend(theTableColumns, "count");
    while (columnIndex--)
    {
        var tableColumn = objj_msgSend(theTableColumns, "objectAtIndex:", columnIndex),
            row = objj_msgSend(theDraggedRows, "firstIndex");
        while (row !== CPNotFound)
        {
            var dataView = objj_msgSend(self, "_newDataViewForRow:tableColumn:", row, tableColumn);
            objj_msgSend(dataView, "setFrame:", objj_msgSend(self, "frameOfDataViewAtColumn:row:", columnIndex, row));
            objj_msgSend(self, "_setObjectValueForTableColumn:row:forView:", tableColumn, row, dataView);
            objj_msgSend(view, "addSubview:", dataView);
            objj_msgSend(self._draggingViews, "addObject:", dataView);
            row = objj_msgSend(theDraggedRows, "indexGreaterThanIndex:", row);
        }
    }
    var dragPoint = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(theDragEvent, "locationInWindow"), nil);
    dragViewOffset.x = CGRectGetWidth(bounds) / 2 - dragPoint.x;
    dragViewOffset.y = CGRectGetHeight(bounds) / 2 - dragPoint.y;
    return view;
}
,["CPView","CPIndexSet","CPArray","CPEvent","CGPoint"]), new objj_method(sel_getUid("_dragViewForColumn:event:offset:"), function $CPTableView___dragViewForColumn_event_offset_(self, _cmd, theColumnIndex, theDragEvent, theDragViewOffset)
{
    var dragView = objj_msgSend(objj_msgSend(_CPColumnDragView, "alloc"), "initWithLineColor:", objj_msgSend(self, "gridColor")),
        tableColumn = objj_msgSend(objj_msgSend(self, "tableColumns"), "objectAtIndex:", theColumnIndex),
        defaultRowHeight = objj_msgSend(self, "valueForThemeAttribute:", "default-row-height"),
        bounds = CGRectMake(0.0, 0.0, objj_msgSend(tableColumn, "width"), CGRectGetHeight(objj_msgSend(self, "exposedRect")) + defaultRowHeight),
        columnRect = objj_msgSend(self, "rectOfColumn:", theColumnIndex),
        headerView = objj_msgSend(tableColumn, "headerView"),
        row = objj_msgSend(self._exposedRows, "firstIndex");
    objj_msgSend(dragView, "setFrame:", bounds);
    while (row !== CPNotFound)
    {
        var dataView = objj_msgSend(self, "_newDataViewForRow:tableColumn:", row, tableColumn),
            dataViewFrame = objj_msgSend(self, "frameOfDataViewAtColumn:row:", theColumnIndex, row);
        dataViewFrame.origin.x = 0.0;
        dataViewFrame.origin.y = CGRectGetMinY(dataViewFrame) - CGRectGetMinY(objj_msgSend(self, "exposedRect")) + defaultRowHeight;
        objj_msgSend(dataView, "setFrame:", dataViewFrame);
        objj_msgSend(self, "_setObjectValueForTableColumn:row:forView:", tableColumn, row, dataView);
        objj_msgSend(dragView, "addSubview:", dataView);
        objj_msgSend(self._draggingViews, "addObject:", dataView);
        row = objj_msgSend(self._exposedRows, "indexGreaterThanIndex:", row);
    }
    var columnHeaderView = objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", headerView));
    objj_msgSend(dragView, "addSubview:", columnHeaderView);
    objj_msgSend(dragView, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
    objj_msgSend(dragView, "setAlphaValue:", 0.7);
    return dragView;
}
,["CPView","int","CPEvent","CGPoint"]), new objj_method(sel_getUid("setDraggingSourceOperationMask:forLocal:"), function $CPTableView__setDraggingSourceOperationMask_forLocal_(self, _cmd, mask, isLocal)
{
    self._dragOperationDefaultMask = mask;
}
,["void","CPDragOperation","BOOL"]), new objj_method(sel_getUid("setDropRow:dropOperation:"), function $CPTableView__setDropRow_dropOperation_(self, _cmd, row, operation)
{
    if (row > objj_msgSend(self, "numberOfRows") && operation === CPTableViewDropOn)
    {
        var numberOfRows = objj_msgSend(self, "numberOfRows") + 1,
            reason = "Attempt to set dropRow=" + row + " dropOperation=CPTableViewDropOn when [0 - " + numberOfRows + "] is valid range of rows.";
        objj_msgSend(objj_msgSend(CPException, "exceptionWithName:reason:userInfo:", "Error", reason, nil), "raise");
    }
    self._retargetedDropRow = row;
    self._retargetedDropOperation = operation;
}
,["void","CPInteger","CPTableViewDropOperation"]), new objj_method(sel_getUid("setDraggingDestinationFeedbackStyle:"), function $CPTableView__setDraggingDestinationFeedbackStyle_(self, _cmd, aStyle)
{
    self._destinationDragStyle = aStyle;
}
,["void","CPTableViewDraggingDestinationFeedbackStyle"]), new objj_method(sel_getUid("draggingDestinationFeedbackStyle"), function $CPTableView__draggingDestinationFeedbackStyle(self, _cmd)
{
    return self._destinationDragStyle;
}
,["CPTableViewDraggingDestinationFeedbackStyle"]), new objj_method(sel_getUid("setVerticalMotionCanBeginDrag:"), function $CPTableView__setVerticalMotionCanBeginDrag_(self, _cmd, aFlag)
{
    self._verticalMotionCanDrag = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("verticalMotionCanBeginDrag"), function $CPTableView__verticalMotionCanBeginDrag(self, _cmd)
{
    return self._verticalMotionCanDrag;
}
,["BOOL"]), new objj_method(sel_getUid("_tableColumnForSortDescriptor:"), function $CPTableView___tableColumnForSortDescriptor_(self, _cmd, theSortDescriptor)
{
    var tableColumns = objj_msgSend(self, "tableColumns");
    for (var i = 0; i < objj_msgSend(tableColumns, "count"); i++)
    {
        var tableColumn = objj_msgSend(tableColumns, "objectAtIndex:", i),
            sortDescriptorPrototype = objj_msgSend(tableColumn, "sortDescriptorPrototype");
        if (!sortDescriptorPrototype)
            continue;
        if (objj_msgSend(sortDescriptorPrototype, "key") === objj_msgSend(theSortDescriptor, "key") && objj_msgSend(sortDescriptorPrototype, "selector") === objj_msgSend(theSortDescriptor, "selector"))
        {
            return tableColumn;
        }
    }
    return nil;
}
,["CPTableColumn","CPSortDescriptor"]), new objj_method(sel_getUid("setSortDescriptors:"), function $CPTableView__setSortDescriptors_(self, _cmd, sortDescriptors)
{
    var oldSortDescriptors = objj_msgSend(objj_msgSend(self, "sortDescriptors"), "copy"),
        newSortDescriptors = objj_msgSend(CPArray, "array");
    if (sortDescriptors !== nil)
        objj_msgSend(newSortDescriptors, "addObjectsFromArray:", sortDescriptors);
    if (objj_msgSend(newSortDescriptors, "isEqual:", oldSortDescriptors))
        return;
    self._sortDescriptors = newSortDescriptors;
    var oldColumn = nil,
        newColumn = nil;
    if (objj_msgSend(newSortDescriptors, "count") > 0)
    {
        var newMainSortDescriptor = objj_msgSend(newSortDescriptors, "objectAtIndex:", 0);
        newColumn = objj_msgSend(self, "_tableColumnForSortDescriptor:", newMainSortDescriptor);
    }
    if (objj_msgSend(oldSortDescriptors, "count") > 0)
    {
        var oldMainSortDescriptor = objj_msgSend(oldSortDescriptors, "objectAtIndex:", 0);
        oldColumn = objj_msgSend(self, "_tableColumnForSortDescriptor:", oldMainSortDescriptor);
    }
    var image = objj_msgSend(newMainSortDescriptor, "ascending") ? objj_msgSend(self, "_tableHeaderSortImage") : objj_msgSend(self, "_tableHeaderReverseSortImage");
    objj_msgSend(self, "setIndicatorImage:inTableColumn:", nil, oldColumn);
    objj_msgSend(self, "setIndicatorImage:inTableColumn:", image, newColumn);
    objj_msgSend(self, "_sendDataSourceSortDescriptorsDidChange:", oldSortDescriptors);
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", "sortDescriptors");
    objj_msgSend(objj_msgSend(binderClass, "getBinding:forObject:", "sortDescriptors", self), "reverseSetValueFor:", "sortDescriptors");
}
,["void","CPArray"]), new objj_method(sel_getUid("sortDescriptors"), function $CPTableView__sortDescriptors(self, _cmd)
{
    return self._sortDescriptors;
}
,["CPArray"]), new objj_method(sel_getUid("_objectValueForTableColumn:row:"), function $CPTableView___objectValueForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    var tableColumnUID = objj_msgSend(aTableColumn, "UID"),
        tableColumnObjectValues = self._objectValues[tableColumnUID];
    if (!tableColumnObjectValues)
    {
        tableColumnObjectValues = [];
        self._objectValues[tableColumnUID] = tableColumnObjectValues;
    }
    var objectValue = tableColumnObjectValues[aRowIndex];
    if (objectValue === undefined)
    {
        if (objj_msgSend(self, "_dataSourceRespondsToObjectValueForTableColumn"))
        {
            objectValue = objj_msgSend(self, "_sendDataSourceObjectValueForTableColumn:row:", aTableColumn, aRowIndex);
            tableColumnObjectValues[aRowIndex] = objectValue;
        }
        else if (!self._isViewBased && !objj_msgSend(self, "infoForBinding:", "content"))
        {
            CPLog.warn("no content binding established and data source " + objj_msgSend(self._dataSource, "description") + " does not implement tableView:objectValueForTableColumn:row:");
        }
    }
    return objectValue;
}
,["id","CPTableColumn","CPInteger"]), new objj_method(sel_getUid("exposedRect"), function $CPTableView__exposedRect(self, _cmd)
{
    if (!self._exposedRect)
    {
        var superview = objj_msgSend(self, "superview");
        if (objj_msgSend(superview, "isKindOfClass:", objj_msgSend(CPClipView, "class")))
            self._exposedRect = objj_msgSend(superview, "bounds");
        else
            self._exposedRect = objj_msgSend(self, "bounds");
    }
    return self._exposedRect;
}
,["CGRect"]), new objj_method(sel_getUid("load"), function $CPTableView__load(self, _cmd)
{
    if (self._reloadAllRows)
    {
        objj_msgSend(self, "_unloadDataViewsInRows:columns:", self._exposedRows, self._exposedColumns);
        self._exposedRows = objj_msgSend(CPIndexSet, "indexSet");
        self._exposedColumns = objj_msgSend(CPIndexSet, "indexSet");
        self._reloadAllRows = NO;
    }
    var exposedRect = objj_msgSend(self, "exposedRect"),
        exposedRows = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", objj_msgSend(self, "rowsInRect:", exposedRect)),
        exposedColumns = objj_msgSend(self, "columnIndexesInRect:", exposedRect),
        obscuredRows = objj_msgSend(self._exposedRows, "copy"),
        obscuredColumns = objj_msgSend(self._exposedColumns, "copy");
    objj_msgSend(obscuredRows, "removeIndexes:", exposedRows);
    objj_msgSend(obscuredColumns, "removeIndexes:", exposedColumns);
    var newlyExposedRows = objj_msgSend(exposedRows, "copy"),
        newlyExposedColumns = objj_msgSend(exposedColumns, "copy");
    objj_msgSend(newlyExposedRows, "removeIndexes:", self._exposedRows);
    objj_msgSend(newlyExposedColumns, "removeIndexes:", self._exposedColumns);
    var previouslyExposedRows = objj_msgSend(exposedRows, "copy"),
        previouslyExposedColumns = objj_msgSend(exposedColumns, "copy");
    objj_msgSend(previouslyExposedRows, "removeIndexes:", newlyExposedRows);
    objj_msgSend(previouslyExposedColumns, "removeIndexes:", newlyExposedColumns);
    objj_msgSend(self, "_unloadDataViewsInRows:columns:", previouslyExposedRows, obscuredColumns);
    objj_msgSend(self, "_unloadDataViewsInRows:columns:", obscuredRows, previouslyExposedColumns);
    objj_msgSend(self, "_unloadDataViewsInRows:columns:", obscuredRows, obscuredColumns);
    objj_msgSend(self, "_unloadDataViewsInRows:columns:", newlyExposedRows, newlyExposedColumns);
    objj_msgSend(self, "_loadDataViewsInRows:columns:", previouslyExposedRows, newlyExposedColumns);
    objj_msgSend(self, "_loadDataViewsInRows:columns:", newlyExposedRows, previouslyExposedColumns);
    objj_msgSend(self, "_loadDataViewsInRows:columns:", newlyExposedRows, newlyExposedColumns);
    self._exposedRows = exposedRows;
    self._exposedColumns = exposedColumns;
    objj_msgSend(self._tableDrawView, "setFrame:", exposedRect);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    if (objj_msgSend(self._differedColumnDataToRemove, "count"))
    {
        for (var i = 0; i < self._differedColumnDataToRemove.length; i++)
        {
            var data = self._differedColumnDataToRemove[i],
                column = data.column,
                tableColumnUID = objj_msgSend(column, "UID"),
                dataViews = self._dataViewsForTableColumns[tableColumnUID];
            for (var j = 0; j < objj_msgSend(dataViews, "count"); j++)
            {
                objj_msgSend(self, "_enqueueReusableDataView:", objj_msgSend(dataViews, "objectAtIndex:", j));
            }
        }
        objj_msgSend(self._differedColumnDataToRemove, "removeAllObjects");
    }
    for (var identifier in self._cachedDataViews)
    {
        var dataViews = self._cachedDataViews[identifier],
            count = dataViews.length;
        while (count--)
            objj_msgSend(dataViews[count], "removeFromSuperview");
    }
}
,["void"]), new objj_method(sel_getUid("_unloadDataViewsInRows:columns:"), function $CPTableView___unloadDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    if (!objj_msgSend(rows, "count") || !objj_msgSend(columns, "count"))
        return;
    var rowArray = [],
        columnArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    objj_msgSend(columns, "getIndexes:maxCount:inIndexRange:", columnArray, -1, nil);
    var columnIndex = 0,
        columnsCount = columnArray.length;
    for (; columnIndex < columnsCount; ++columnIndex)
    {
        var column = columnArray[columnIndex],
            tableColumn = self._tableColumns[column],
            tableColumnUID = objj_msgSend(tableColumn, "UID"),
            rowIndex = 0,
            rowsCount = rowArray.length;
        for (; rowIndex < rowsCount; ++rowIndex)
        {
            var row = rowArray[rowIndex],
                dataViews = self._dataViewsForTableColumns[tableColumnUID];
            if (!dataViews || row >= dataViews.length)
                continue;
            if (row === self._editingRow && column === self._editingColumn)
                objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
            var dataView = objj_msgSend(dataViews, "objectAtIndex:", row);
            objj_msgSend(dataViews, "replaceObjectAtIndex:withObject:", row, nil);
            objj_msgSend(self, "_enqueueReusableDataView:", dataView);
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_loadDataViewsInRows:columns:"), function $CPTableView___loadDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    if (!objj_msgSend(rows, "count") || !objj_msgSend(columns, "count"))
        return;
    var rowArray = [],
        rowRects = [],
        columnArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    objj_msgSend(columns, "getIndexes:maxCount:inIndexRange:", columnArray, -1, nil);
    if (self._dirtyTableColumnRangeIndex !== CPNotFound)
        objj_msgSend(self, "_recalculateTableColumnRanges");
    var columnIndex = 0,
        columnsCount = columnArray.length;
    for (; columnIndex < columnsCount; ++columnIndex)
    {
        var column = columnArray[columnIndex],
            tableColumn = self._tableColumns[column];
        if (objj_msgSend(tableColumn, "isHidden") || tableColumn === self._draggedColumn)
            continue;
        var tableColumnUID = objj_msgSend(tableColumn, "UID");
        if (!self._dataViewsForTableColumns[tableColumnUID])
            self._dataViewsForTableColumns[tableColumnUID] = [];
        var rowIndex = 0,
            rowsCount = rowArray.length,
            isColumnSelected = objj_msgSend(self._selectedColumnIndexes, "containsIndex:", column);
        for (; rowIndex < rowsCount; ++rowIndex)
        {
            var row = rowArray[rowIndex],
                dataView = objj_msgSend(self, "_newDataViewForRow:tableColumn:", row, tableColumn),
                isButton = objj_msgSend(dataView, "isKindOfClass:", objj_msgSend(CPButton, "class")),
                isTextField = objj_msgSend(dataView, "isKindOfClass:", objj_msgSend(CPTextField, "class"));
            objj_msgSend(dataView, "setFrame:", objj_msgSend(self, "frameOfDataViewAtColumn:row:", column, row));
            objj_msgSend(self, "_setObjectValueForTableColumn:row:forView:", tableColumn, row, dataView);
            if (self._selectionHighlightStyle !== CPTableViewSelectionHighlightStyleNone && (isColumnSelected || objj_msgSend(self, "isRowSelected:", row)))
            {
                objj_msgSend(dataView, "setThemeState:", objj_msgSend(self, "_isFocused") ? CPThemeStateSelectedDataViewF : CPThemeStateSelectedDataView);
            }
            else
                objj_msgSend(dataView, "unsetThemeState:", CPThemeStateSelectedDataViewF | CPThemeStateSelectedDataView);
            if (objj_msgSend(self, "_sendDelegateIsGroupRow:", row))
            {
                objj_msgSend(self._groupRows, "addIndex:", row);
                objj_msgSend(dataView, "setThemeState:", CPThemeStateGroupRow);
            }
            else
            {
                objj_msgSend(self._groupRows, "removeIndexesInRange:", CPMakeRange(row, 1));
                objj_msgSend(dataView, "unsetThemeState:", CPThemeStateGroupRow);
            }
            objj_msgSend(self, "_sendDelegateWillDisplayView:forTableColumn:row:", dataView, tableColumn, row);
            objj_msgSend(self, "setNeedsDisplay:", YES);
            if (objj_msgSend(dataView, "superview") !== self)
                objj_msgSend(self, "addSubview:", dataView);
            self._dataViewsForTableColumns[tableColumnUID][row] = dataView;
            if (self._isViewBased)
                continue;
            if (isButton || self._editingCellIndex && self._editingCellIndex.x === column && self._editingCellIndex.y === row)
            {
                if (isTextField)
                {
                    objj_msgSend(dataView, "setEditable:", YES);
                    objj_msgSend(dataView, "setSendsActionOnEndEditing:", YES);
                    objj_msgSend(dataView, "setSelectable:", YES);
                    objj_msgSend(dataView, "selectText:", nil);
                    objj_msgSend(dataView, "setBezeled:", YES);
                    objj_msgSend(dataView, "setDelegate:", self);
                }
                objj_msgSend(dataView, "setTarget:", self);
                objj_msgSend(dataView, "setAction:", sel_getUid("_commitDataViewObjectValue:"));
                dataView.tableViewEditedColumnObj = tableColumn;
                dataView.tableViewEditedRowIndex = row;
            }
            else if (isTextField)
            {
                objj_msgSend(dataView, "setEditable:", NO);
                objj_msgSend(dataView, "setSelectable:", NO);
            }
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_setObjectValueForTableColumn:row:forView:"), function $CPTableView___setObjectValueForTableColumn_row_forView_(self, _cmd, aTableColumn, aRow, aDataView)
{
    if (objj_msgSend(self, "_dataSourceRespondsToObjectValueForTableColumn"))
        objj_msgSend(aDataView, "setObjectValue:", objj_msgSend(self, "_objectValueForTableColumn:row:", aTableColumn, aRow));
    if (self._contentBindingExplicitlySet)
        objj_msgSend(self, "_prepareContentBindedDataView:forRow:", aDataView, aRow);
    else
        objj_msgSend(aTableColumn, "_prepareDataView:forRow:", aDataView, aRow);
}
,["void","CPTableColumn","CPInteger","CPView"]), new objj_method(sel_getUid("_prepareContentBindedDataView:forRow:"), function $CPTableView___prepareContentBindedDataView_forRow_(self, _cmd, dataView, aRow)
{
    var binder = objj_msgSend(CPTableContentBinder, "getBinding:forObject:", "content", self),
        content = objj_msgSend(binder, "content"),
        rowContent = objj_msgSend(content, "objectAtIndex:", aRow);
    objj_msgSend(dataView, "setObjectValue:", rowContent);
}
,["void","CPView","CPInteger"]), new objj_method(sel_getUid("_layoutDataViewsInRows:columns:"), function $CPTableView___layoutDataViewsInRows_columns_(self, _cmd, rows, columns)
{
    var rowArray = [],
        columnArray = [];
    objj_msgSend(rows, "getIndexes:maxCount:inIndexRange:", rowArray, -1, nil);
    objj_msgSend(columns, "getIndexes:maxCount:inIndexRange:", columnArray, -1, nil);
    var columnIndex = 0,
        columnsCount = columnArray.length;
    for (; columnIndex < columnsCount; ++columnIndex)
    {
        var column = columnArray[columnIndex],
            tableColumn = self._tableColumns[column],
            tableColumnUID = objj_msgSend(tableColumn, "UID"),
            dataViewsForTableColumn = self._dataViewsForTableColumns[tableColumnUID],
            rowIndex = 0,
            rowsCount = rowArray.length;
        if (dataViewsForTableColumn)
        {
            for (; rowIndex < rowsCount; ++rowIndex)
            {
                var row = rowArray[rowIndex],
                    dataView = dataViewsForTableColumn[row];
                objj_msgSend(dataView, "setFrame:", objj_msgSend(self, "frameOfDataViewAtColumn:row:", column, row));
            }
        }
    }
}
,["void","CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_commitDataViewObjectValue:"), function $CPTableView___commitDataViewObjectValue_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("sendsActionOnEndEditing")) && objj_msgSend(sender, "sendsActionOnEndEditing") && self._editingCellIndex === nil)
        return;
    self._editingCellIndex = nil;
    objj_msgSend(self, "_sendDataSourceSetObjectValue:forTableColumn:row:", objj_msgSend(sender, "objectValue"), sender.tableViewEditedColumnObj, sender.tableViewEditedRowIndex);
    objj_msgSend(sender.tableViewEditedColumnObj, "_reverseSetDataView:forRow:", sender, sender.tableViewEditedRowIndex);
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("setEditable:")))
        objj_msgSend(sender, "setEditable:", NO);
    if (objj_msgSend(sender, "respondsToSelector:", sel_getUid("setSelectable:")))
        objj_msgSend(sender, "setSelectable:", NO);
    if (objj_msgSend(sender, "isKindOfClass:", objj_msgSend(CPTextField, "class")))
        objj_msgSend(sender, "setBezeled:", NO);
    objj_msgSend(self, "reloadDataForRowIndexes:columnIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", sender.tableViewEditedRowIndex), objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(self._tableColumns, "indexOfObject:", sender.tableViewEditedColumnObj)));
    objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
}
,["void","id"]), new objj_method(sel_getUid("controlTextDidBlur:"), function $CPTableView__controlTextDidBlur_(self, _cmd, theNotification)
{
    var dataView = objj_msgSend(theNotification, "object");
    if (objj_msgSend(dataView, "respondsToSelector:", sel_getUid("setEditable:")))
        objj_msgSend(dataView, "setEditable:", NO);
    if (objj_msgSend(dataView, "respondsToSelector:", sel_getUid("setSelectable:")))
        objj_msgSend(dataView, "setSelectable:", NO);
    if (objj_msgSend(dataView, "isKindOfClass:", objj_msgSend(CPTextField, "class")))
        objj_msgSend(dataView, "setBezeled:", NO);
    self._editingCellIndex = nil;
}
,["void","CPNotification"]), new objj_method(sel_getUid("_newDataViewForRow:tableColumn:"), function $CPTableView___newDataViewForRow_tableColumn_(self, _cmd, aRow, aTableColumn)
{
    var view = nil;
    if (self._viewForTableColumnRowSelector)
        view = objj_msgSend(self, self._viewForTableColumnRowSelector, aTableColumn, aRow);
    if (!view)
    {
        var columnIdentifier = objj_msgSend(aTableColumn, "identifier");
        if (!columnIdentifier)
            columnIdentifier = objj_msgSend(aTableColumn, "UID");
        view = objj_msgSend(self, "makeViewWithIdentifier:owner:", columnIdentifier, self._delegate);
        if (!view)
            view = objj_msgSend(aTableColumn, "_newDataView");
        objj_msgSend(view, "setIdentifier:", columnIdentifier);
    }
    return view;
}
,["CPView","CPInteger","CPTableColumn"]), new objj_method(sel_getUid("makeViewWithIdentifier:owner:"), function $CPTableView__makeViewWithIdentifier_owner_(self, _cmd, anIdentifier, anOwner)
{
    if (!anIdentifier)
        return nil;
    var view,
        reusableViews = self._cachedDataViews[anIdentifier];
    if (reusableViews && reusableViews.length)
        view = reusableViews.pop();
    else if (self._isViewBased)
        view = objj_msgSend(self, "_unarchiveViewWithIdentifier:owner:", anIdentifier, anOwner);
    return view;
}
,["id","CPString","id"]), new objj_method(sel_getUid("_unarchiveViewWithIdentifier:owner:"), function $CPTableView___unarchiveViewWithIdentifier_owner_(self, _cmd, anIdentifier, anOwner)
{
    var cib = objj_msgSend(self._archivedDataViews, "objectForKey:", anIdentifier);
    if (!cib && !self._unavailable_custom_cibs[anIdentifier])
    {
        var bundle = anOwner ? objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(anOwner, "class")) : objj_msgSend(CPBundle, "mainBundle");
        cib = objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithCibNamed:bundle:", anIdentifier, bundle);
    }
    if (!cib)
    {
        self._unavailable_custom_cibs[anIdentifier] = YES;
        return nil;
    }
    var objects = [],
        load = objj_msgSend(cib, "instantiateCibWithOwner:topLevelObjects:", anOwner, objects);
    if (!load)
        return nil;
    var count = objects.length;
    while (count--)
    {
        var obj = objects[count];
        if (objj_msgSend(obj, "isKindOfClass:", objj_msgSend(CPView, "class")))
        {
            objj_msgSend(obj, "setIdentifier:", anIdentifier);
            objj_msgSend(obj, "setAutoresizingMask:", CPViewNotSizable);
            return obj;
        }
    }
    return nil;
}
,["CPView","CPString","id"]), new objj_method(sel_getUid("_updateIsViewBased"), function $CPTableView___updateIsViewBased(self, _cmd)
{
    if (objj_msgSend(self, "_delegateRespondsToViewForTableColumn"))
        self._viewForTableColumnRowSelector = sel_getUid("_sendDelegateViewForTableColumn:row:");
    else if (objj_msgSend(self, "_delegateRespondsToDataViewForTableColumn"))
        self._viewForTableColumnRowSelector = sel_getUid("_sendDelegateDataViewForTableColumn:row:");
    self._isViewBased = self._viewForTableColumnRowSelector !== nil || self._archivedDataViews !== nil;
}
,["void"]), new objj_method(sel_getUid("_enqueueReusableDataView:"), function $CPTableView___enqueueReusableDataView_(self, _cmd, aDataView)
{
    if (!aDataView)
        return;
    var identifier = objj_msgSend(aDataView, "identifier");
    if (!self._cachedDataViews[identifier])
        self._cachedDataViews[identifier] = [aDataView];
    else
        self._cachedDataViews[identifier].push(aDataView);
}
,["void","CPView"]), new objj_method(sel_getUid("setFrameSize:"), function $CPTableView__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setFrameSize:", aSize);
    if (self._headerView)
        objj_msgSend(self._headerView, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), CGRectGetHeight(objj_msgSend(self._headerView, "frame"))));
    self._exposedRect = nil;
}
,["void","CGSize"]), new objj_method(sel_getUid("setFrameOrigin:"), function $CPTableView__setFrameOrigin_(self, _cmd, aPoint)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setFrameOrigin:", aPoint);
    self._exposedRect = nil;
}
,["void","CGPoint"]), new objj_method(sel_getUid("setBoundsOrigin:"), function $CPTableView__setBoundsOrigin_(self, _cmd, aPoint)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setBoundsOrigin:", aPoint);
    self._exposedRect = nil;
}
,["void","CGPoint"]), new objj_method(sel_getUid("setBoundsSize:"), function $CPTableView__setBoundsSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setBoundsSize:", aSize);
    self._exposedRect = nil;
}
,["void","CGSize"]), new objj_method(sel_getUid("setNeedsDisplay:"), function $CPTableView__setNeedsDisplay_(self, _cmd, aFlag)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setNeedsDisplay:", aFlag);
    objj_msgSend(self._tableDrawView, "setNeedsDisplay:", aFlag);
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsDisplay:", YES);
}
,["void","BOOL"]), new objj_method(sel_getUid("setNeedsLayout"), function $CPTableView__setNeedsLayout(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "setNeedsLayout");
    objj_msgSend(objj_msgSend(self, "headerView"), "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("_isFocused"), function $CPTableView___isFocused(self, _cmd)
{
    var isEditing = self._editingRow !== CPNotFound || self._editingCellIndex;
    return objj_msgSend(objj_msgSend(self, "window"), "isKeyWindow") && (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self || isEditing);
}
,["BOOL"]), new objj_method(sel_getUid("_drawRect:"), function $CPTableView___drawRect_(self, _cmd, aRect)
{
    var exposedRect = objj_msgSend(self, "exposedRect");
    objj_msgSend(self, "drawBackgroundInClipRect:", exposedRect);
    objj_msgSend(self, "highlightSelectionInClipRect:", exposedRect);
    objj_msgSend(self, "drawGridInClipRect:", exposedRect);
    if (self._implementsCustomDrawRow)
        objj_msgSend(self, "_drawRows:clipRect:", self._exposedRows, exposedRect);
}
,["void","CGRect"]), new objj_method(sel_getUid("drawBackgroundInClipRect:"), function $CPTableView__drawBackgroundInClipRect_(self, _cmd, aRect)
{
    if (!self._usesAlternatingRowBackgroundColors)
        return;
    var rowColors = objj_msgSend(self, "alternatingRowBackgroundColors"),
        colorCount = objj_msgSend(rowColors, "count");
    if (colorCount === 0)
        return;
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    if (colorCount === 1)
    {
        CGContextSetFillColor(context, rowColors[0]);
        CGContextFillRect(context, aRect);
        return;
    }
    var exposedRows = objj_msgSend(self, "_exposedRowsInRect:", aRect),
        firstRow = FLOOR(exposedRows.location / colorCount) * colorCount,
        lastRow = CPMaxRange(exposedRows) - 1,
        colorIndex = 0,
        groupRowRects = [];
    while (colorIndex < colorCount)
    {
        CGContextBeginPath(context);
        for (var row = firstRow + colorIndex; row <= lastRow; row += colorCount)
        {
            if (!objj_msgSend(self._groupRows, "containsIndex:", row))
                CGContextAddRect(context, CGRectIntersection(aRect, objj_msgSend(self, "_rectOfRow:checkRange:", row, NO)));
            else
                groupRowRects.push(CGRectIntersection(aRect, objj_msgSend(self, "_rectOfRow:checkRange:", row, NO)));
        }
        CGContextClosePath(context);
        CGContextSetFillColor(context, rowColors[colorIndex]);
        CGContextFillPath(context);
        colorIndex++;
    }
    objj_msgSend(self, "_drawGroupRowsForRects:", groupRowRects);
}
,["void","CGRect"]), new objj_method(sel_getUid("drawGridInClipRect:"), function $CPTableView__drawGridInClipRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        gridStyleMask = objj_msgSend(self, "gridStyleMask");
    if (!(gridStyleMask & (CPTableViewSolidHorizontalGridLineMask | CPTableViewSolidVerticalGridLineMask)))
        return;
    CGContextBeginPath(context);
    if (gridStyleMask & CPTableViewSolidHorizontalGridLineMask)
    {
        var exposedRows = objj_msgSend(self, "_exposedRowsInRect:", aRect),
            row = exposedRows.location,
            lastRow = CPMaxRange(exposedRows) - 1,
            rowY = -0.5,
            minX = CGRectGetMinX(aRect),
            maxX = CGRectGetMaxX(aRect);
        for (; row <= lastRow; ++row)
        {
            var rowRect = objj_msgSend(self, "_rectOfRow:checkRange:", row, NO),
                rowY = CGRectGetMaxY(rowRect) - 0.5;
            CGContextMoveToPoint(context, minX, rowY);
            CGContextAddLineToPoint(context, maxX, rowY);
        }
        if (self._rowHeight > 0.0)
        {
            var rowHeight = self._rowHeight + self._intercellSpacing.height,
                totalHeight = CGRectGetMaxY(aRect);
            while (rowY < totalHeight)
            {
                rowY += rowHeight;
                CGContextMoveToPoint(context, minX, rowY);
                CGContextAddLineToPoint(context, maxX, rowY);
            }
        }
    }
    if (gridStyleMask & CPTableViewSolidVerticalGridLineMask)
    {
        var exposedColumnIndexes = objj_msgSend(self, "columnIndexesInRect:", aRect),
            columnsArray = [];
        objj_msgSend(exposedColumnIndexes, "getIndexes:maxCount:inIndexRange:", columnsArray, -1, nil);
        var columnArrayIndex = 0,
            columnArrayCount = columnsArray.length,
            minY = CGRectGetMinY(aRect),
            maxY = CGRectGetMaxY(aRect);
        for (; columnArrayIndex < columnArrayCount; ++columnArrayIndex)
        {
            var columnRect = objj_msgSend(self, "rectOfColumn:", columnsArray[columnArrayIndex]),
                columnX = CGRectGetMaxX(columnRect) - 0.5;
            CGContextMoveToPoint(context, columnX, minY);
            CGContextAddLineToPoint(context, columnX, maxY);
        }
    }
    CGContextClosePath(context);
    CGContextSetStrokeColor(context, objj_msgSend(self, "gridColor"));
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("highlightSelectionInClipRect:"), function $CPTableView__highlightSelectionInClipRect_(self, _cmd, aRect)
{
    if (self._selectionHighlightStyle === CPTableViewSelectionHighlightStyleNone)
        return;
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        indexes = [],
        rectSelector = sel_getUid("rectOfRow:");
    if (objj_msgSend(self._selectedRowIndexes, "count") >= 1)
    {
        var exposedRows = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", objj_msgSend(self, "rowsInRect:", aRect)),
            firstRow = objj_msgSend(exposedRows, "firstIndex"),
            exposedRange = CPMakeRange(firstRow, objj_msgSend(exposedRows, "lastIndex") - firstRow + 1);
        objj_msgSend(self._selectedRowIndexes, "getIndexes:maxCount:inIndexRange:", indexes, -1, exposedRange);
    }
    else if (objj_msgSend(self._selectedColumnIndexes, "count") >= 1)
    {
        rectSelector = sel_getUid("rectOfColumn:");
        var exposedColumns = objj_msgSend(self, "columnIndexesInRect:", aRect),
            firstColumn = objj_msgSend(exposedColumns, "firstIndex"),
            exposedRange = CPMakeRange(firstColumn, objj_msgSend(exposedColumns, "lastIndex") - firstColumn + 1);
        objj_msgSend(self._selectedColumnIndexes, "getIndexes:maxCount:inIndexRange:", indexes, -1, exposedRange);
    }
    var count,
        count2 = count = objj_msgSend(indexes, "count");
    if (!count)
        return;
    var drawGradient = CPFeatureIsCompatible(CPHTMLCanvasFeature) && self._selectionHighlightStyle === CPTableViewSelectionHighlightStyleSourceList && objj_msgSend(self._selectedRowIndexes, "count") >= 1,
        deltaHeight = 0.5 * (self._gridStyleMask & CPTableViewSolidHorizontalGridLineMask),
        focused = objj_msgSend(self, "_isFocused");
    CGContextBeginPath(context);
    if (drawGradient)
    {
        var gradientCache = focused ? objj_msgSend(self, "selectionGradientColors") : objj_msgSend(self, "unfocusedSelectionGradientColors"),
            topLineColor = objj_msgSend(gradientCache, "objectForKey:", CPSourceListTopLineColor),
            bottomLineColor = objj_msgSend(gradientCache, "objectForKey:", CPSourceListBottomLineColor),
            gradientColor = objj_msgSend(gradientCache, "objectForKey:", CPSourceListGradient);
    }
    var normalSelectionHighlightColor = focused ? objj_msgSend(self, "selectionHighlightColor") : objj_msgSend(self, "unfocusedSelectionHighlightColor");
    if (objj_msgSend(self._groupRows, "count"))
    {
        var topGroupLineColor = objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 212.0 / 255.0, 1.0),
            bottomGroupLineColor = objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 185.0 / 255.0, 1.0),
            gradientGroupColor = CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(), [212.0 / 255.0, 212.0 / 255.0, 212.0 / 255.0, 1.0, 197.0 / 255.0, 197.0 / 255.0, 197.0 / 255.0, 1.0], [0, 1], 2);
    }
    while (count--)
    {
        var currentIndex = indexes[count],
            rowRect = CGRectIntersection(objj_msgSend(self, rectSelector, currentIndex), aRect);
        if (!drawGradient)
            var shouldUseGroupGradient = objj_msgSend(self._groupRows, "containsIndex:", currentIndex);
        if (drawGradient || shouldUseGroupGradient)
        {
            var minX = CGRectGetMinX(rowRect),
                minY = CGRectGetMinY(rowRect),
                maxX = CGRectGetMaxX(rowRect),
                maxY = CGRectGetMaxY(rowRect) - deltaHeight;
            if (!drawGradient)
            {
                objj_msgSend(normalSelectionHighlightColor, "setFill");
                CGContextClosePath(context);
                CGContextFillPath(context);
                CGContextBeginPath(context);
            }
            CGContextAddRect(context, rowRect);
            CGContextDrawLinearGradient(context, shouldUseGroupGradient ? gradientGroupColor : gradientColor, rowRect.origin, CGPointMake(minX, maxY), 0);
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, minX, minY + .5);
            CGContextAddLineToPoint(context, maxX, minY + .5);
            CGContextSetStrokeColor(context, shouldUseGroupGradient ? topGroupLineColor : topLineColor);
            CGContextStrokePath(context);
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, minX, maxY - .5);
            CGContextAddLineToPoint(context, maxX, maxY - .5);
            CGContextSetStrokeColor(context, shouldUseGroupGradient ? bottomGroupLineColor : bottomLineColor);
            CGContextStrokePath(context);
        }
        else
        {
            var radius = objj_msgSend(self, "currentValueForThemeAttribute:", "selection-radius");
            if (radius > 0)
            {
                var minX = CGRectGetMinX(rowRect),
                    maxX = CGRectGetMaxX(rowRect),
                    minY = CGRectGetMinY(rowRect),
                    maxY = CGRectGetMaxY(rowRect);
                CGContextMoveToPoint(context, minX + radius, minY);
                CGContextAddArcToPoint(context, maxX, minY, maxX, minY + radius, radius);
                CGContextAddArcToPoint(context, maxX, maxY, maxX - radius, maxY, radius);
                CGContextAddArcToPoint(context, minX, maxY, minX, maxY - radius, radius);
                CGContextAddArcToPoint(context, minX, minY, minX + radius, minY, radius);
            }
            else
                CGContextAddRect(context, rowRect);
        }
    }
    CGContextClosePath(context);
    if (!drawGradient)
    {
        objj_msgSend(normalSelectionHighlightColor, "setFill");
        CGContextFillPath(context);
    }
    CGContextBeginPath(context);
    var gridStyleMask = objj_msgSend(self, "gridStyleMask");
    for (var i = 0; i < count2; i++)
    {
        var rect = objj_msgSend(self, rectSelector, indexes[i]),
            minX = CGRectGetMinX(rect) - 0.5,
            maxX = CGRectGetMaxX(rect) - 0.5,
            minY = CGRectGetMinY(rect) - 0.5,
            maxY = CGRectGetMaxY(rect) - 0.5;
        if (objj_msgSend(self._selectedRowIndexes, "count") >= 1 && gridStyleMask & CPTableViewSolidVerticalGridLineMask)
        {
            var exposedColumns = objj_msgSend(self, "columnIndexesInRect:", aRect),
                exposedColumnIndexes = [],
                firstExposedColumn = objj_msgSend(exposedColumns, "firstIndex"),
                exposedRange = CPMakeRange(firstExposedColumn, objj_msgSend(exposedColumns, "lastIndex") - firstExposedColumn + 1);
            objj_msgSend(exposedColumns, "getIndexes:maxCount:inIndexRange:", exposedColumnIndexes, -1, exposedRange);
            var exposedColumnCount = objj_msgSend(exposedColumnIndexes, "count");
            for (var c = firstExposedColumn; c < exposedColumnCount; c++)
            {
                var colRect = objj_msgSend(self, "rectOfColumn:", exposedColumnIndexes[c]),
                    colX = CGRectGetMaxX(colRect) + 0.5;
                CGContextMoveToPoint(context, colX, minY);
                CGContextAddLineToPoint(context, colX, maxY);
            }
        }
        if (objj_msgSend(indexes, "containsObject:", indexes[i] + 1))
        {
            CGContextMoveToPoint(context, minX, maxY);
            CGContextAddLineToPoint(context, maxX, maxY);
        }
    }
    CGContextClosePath(context);
    CGContextSetStrokeColor(context, objj_msgSend(self, "currentValueForThemeAttribute:", "highlighted-grid-color"));
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("_drawGroupRowsForRects:"), function $CPTableView___drawGroupRowsForRects_(self, _cmd, rects)
{
    if (CPFeatureIsCompatible(CPHTMLCanvasFeature) && self._selectionHighlightStyle === CPTableViewSelectionHighlightStyleSourceList || !rects.length)
        return;
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        i = rects.length;
    CGContextBeginPath(context);
    var gradientCache = objj_msgSend(self, "selectionGradientColors"),
        topLineColor = objj_msgSend(CPColor, "colorWithHexString:", "d3d3d3"),
        bottomLineColor = objj_msgSend(CPColor, "colorWithHexString:", "bebebd"),
        gradientColor = CGGradientCreateWithColorComponents(CGColorSpaceCreateDeviceRGB(), [220.0 / 255.0, 220.0 / 255.0, 220.0 / 255.0, 1.0, 199.0 / 255.0, 199.0 / 255.0, 199.0 / 255.0, 1.0], [0, 1], 2),
        drawGradient = YES;
    while (i--)
    {
        var rowRect = rects[i];
        CGContextAddRect(context, rowRect);
        if (drawGradient)
        {
            var minX = CGRectGetMinX(rowRect),
                minY = CGRectGetMinY(rowRect),
                maxX = CGRectGetMaxX(rowRect),
                maxY = CGRectGetMaxY(rowRect);
            CGContextDrawLinearGradient(context, gradientColor, rowRect.origin, CGPointMake(minX, maxY), 0);
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, minX, minY);
            CGContextAddLineToPoint(context, maxX, minY);
            CGContextSetStrokeColor(context, topLineColor);
            CGContextStrokePath(context);
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, minX, maxY);
            CGContextAddLineToPoint(context, maxX, maxY - 1);
            CGContextSetStrokeColor(context, bottomLineColor);
            CGContextStrokePath(context);
        }
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("_drawRows:clipRect:"), function $CPTableView___drawRows_clipRect_(self, _cmd, rowsIndexes, clipRect)
{
    var row = objj_msgSend(rowsIndexes, "firstIndex");
    while (row !== CPNotFound)
    {
        objj_msgSend(self, "drawRow:clipRect:", row, CGRectIntersection(clipRect, objj_msgSend(self, "rectOfRow:", row)));
        row = objj_msgSend(rowsIndexes, "indexGreaterThanIndex:", row);
    }
}
,["void","CPIndexSet","CGRect"]), new objj_method(sel_getUid("drawRow:clipRect:"), function $CPTableView__drawRow_clipRect_(self, _cmd, row, rect)
{
}
,["void","CPInteger","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $CPTableView__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "load");
}
,["void"]), new objj_method(sel_getUid("viewWillMoveToSuperview:"), function $CPTableView__viewWillMoveToSuperview_(self, _cmd, aView)
{
    var superview = objj_msgSend(self, "superview"),
        defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (superview)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPViewFrameDidChangeNotification, superview);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPViewBoundsDidChangeNotification, superview);
    }
    if (objj_msgSend(aView, "isKindOfClass:", objj_msgSend(CPClipView, "class")))
    {
        objj_msgSend(aView, "setPostsFrameChangedNotifications:", YES);
        objj_msgSend(aView, "setPostsBoundsChangedNotifications:", YES);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("superviewFrameChanged:"), CPViewFrameDidChangeNotification, aView);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("superviewBoundsChanged:"), CPViewBoundsDidChangeNotification, aView);
    }
}
,["void","CPView"]), new objj_method(sel_getUid("superviewBoundsChanged:"), function $CPTableView__superviewBoundsChanged_(self, _cmd, aNotification)
{
    self._exposedRect = nil;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPNotification"]), new objj_method(sel_getUid("superviewFrameChanged:"), function $CPTableView__superviewFrameChanged_(self, _cmd, aNotification)
{
    self._exposedRect = nil;
    objj_msgSend(self, "tile");
}
,["void","CPNotification"]), new objj_method(sel_getUid("tracksMouseOutsideOfFrame"), function $CPTableView__tracksMouseOutsideOfFrame(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("startTrackingAt:"), function $CPTableView__startTrackingAt_(self, _cmd, aPoint)
{
    var oldResponder = objj_msgSend(objj_msgSend(self, "window"), "firstResponder");
    objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
    if (oldResponder && objj_msgSend(oldResponder, "isKindOfClass:", objj_msgSend(CPTableView, "class")) && oldResponder !== self)
        objj_msgSend(oldResponder, "setSelectionHighlightStyle:", objj_msgSend(oldResponder, "selectionHighlightStyle"));
    var row = objj_msgSend(self, "rowAtPoint:", aPoint);
    if (row < 0 && self._allowsEmptySelection)
    {
        if (objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
        {
            var indexSet = objj_msgSend(self, "_sendDelegateSelectionIndexesForProposedSelection:", objj_msgSend(CPIndexSet, "indexSet"));
            objj_msgSend(self, "_noteSelectionIsChanging");
            objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", indexSet, NO);
        }
    }
    if (objj_msgSend(self, "mouseDownFlags") & CPShiftKeyMask)
        self._selectionAnchorRow = ABS(objj_msgSend(self._selectedRowIndexes, "firstIndex") - row) < ABS(objj_msgSend(self._selectedRowIndexes, "lastIndex") - row) ? objj_msgSend(self._selectedRowIndexes, "firstIndex") : objj_msgSend(self._selectedRowIndexes, "lastIndex");
    else
        self._selectionAnchorRow = row;
    self._startTrackingPoint = aPoint;
    self._startTrackingTimestamp = new Date();
    if (objj_msgSend(self, "_dataSourceRespondsToSetObjectValueForTableColumnRow"))
        self._trackingPointMovedOutOfClickSlop = NO;
    if (row >= 0 && !objj_msgSend(self, "_dataSourceRespondsToWriteRowsWithIndexesToPasteboard"))
        objj_msgSend(self, "_updateSelectionWithMouseAtRow:", row);
    return YES;
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("menuForEvent:"), function $CPTableView__menuForEvent_(self, _cmd, theEvent)
{
    if (!objj_msgSend(self, "_delegateRespondsToMenuForTableColumnRow"))
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "menuForEvent:", theEvent);
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(theEvent, "locationInWindow"), nil),
        row = objj_msgSend(self, "rowAtPoint:", location),
        column = objj_msgSend(self, "columnAtPoint:", location),
        tableColumn = objj_msgSend(objj_msgSend(self, "tableColumns"), "objectAtIndex:", column);
    return objj_msgSend(self, "_sendDelegateMenuForTableColumn:row:", tableColumn, row);
}
,["CPMenu","CPEvent"]), new objj_method(sel_getUid("trackMouse:"), function $CPTableView__trackMouse_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self._draggedRowIndexes, "count"))
    {
        objj_msgSend(self, "autoscroll:", anEvent);
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "trackMouse:", anEvent);
    }
    else
        objj_msgSend(CPApp, "sendEvent:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("continueTracking:at:"), function $CPTableView__continueTracking_at_(self, _cmd, lastPoint, aPoint)
{
    var row = objj_msgSend(self, "rowAtPoint:", aPoint);
    if (!self._isSelectingSession && objj_msgSend(self, "_dataSourceRespondsToWriteRowsWithIndexesToPasteboard"))
    {
        if (row >= 0 && (ABS(self._startTrackingPoint.x - aPoint.x) > 3 || self._verticalMotionCanDrag && ABS(self._startTrackingPoint.y - aPoint.y) > 3) || objj_msgSend(self._selectedRowIndexes, "containsIndex:", row))
        {
            if (objj_msgSend(self._selectedRowIndexes, "containsIndex:", row))
                self._draggedRowIndexes = objj_msgSend(objj_msgSend(CPIndexSet, "alloc"), "initWithIndexSet:", self._selectedRowIndexes);
            else
                self._draggedRowIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", row);
            var pboard = objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard);
            if (objj_msgSend(self, "canDragRowsWithIndexes:atPoint:", self._draggedRowIndexes, aPoint) && objj_msgSend(self, "_sendDataSourceWriteRowsWithIndexes:toPasteboard:", self._draggedRowIndexes, pboard))
            {
                var currentEvent = objj_msgSend(CPApp, "currentEvent"),
                    offset = CGPointMakeZero(),
                    tableColumns = objj_msgSend(self._tableColumns, "objectsAtIndexes:", self._exposedColumns);
                var view = objj_msgSend(self, "dragViewForRowsWithIndexes:tableColumns:event:offset:", self._draggedRowIndexes, tableColumns, currentEvent, offset);
                if (!view)
                {
                    var image = objj_msgSend(self, "dragImageForRowsWithIndexes:tableColumns:event:offset:", self._draggedRowIndexes, tableColumns, currentEvent, offset);
                    view = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMake(0, 0, objj_msgSend(image, "size").width, objj_msgSend(image, "size").height));
                    objj_msgSend(view, "setImage:", image);
                }
                var bounds = objj_msgSend(view, "bounds"),
                    viewLocation = CGPointMake(aPoint.x - CGRectGetWidth(bounds) / 2 + offset.x, aPoint.y - CGRectGetHeight(bounds) / 2 + offset.y);
                objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", view, viewLocation, CGPointMakeZero(), objj_msgSend(CPApp, "currentEvent"), pboard, self, YES);
                self._startTrackingPoint = nil;
                return NO;
            }
            self._draggedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
        }
        else if (ABS(self._startTrackingPoint.x - aPoint.x) < 5 && ABS(self._startTrackingPoint.y - aPoint.y) < 5)
            return YES;
    }
    self._isSelectingSession = YES;
    if (row >= 0 && row !== self._lastTrackedRowIndex)
    {
        self._lastTrackedRowIndex = row;
        objj_msgSend(self, "_updateSelectionWithMouseAtRow:", row);
    }
    if (objj_msgSend(self, "_dataSourceRespondsToSetObjectValueForTableColumnRow") && !self._trackingPointMovedOutOfClickSlop)
    {
        var CLICK_SPACE_DELTA = 5.0;
        if (ABS(aPoint.x - self._startTrackingPoint.x) > CLICK_SPACE_DELTA || ABS(aPoint.y - self._startTrackingPoint.y) > CLICK_SPACE_DELTA)
        {
            self._trackingPointMovedOutOfClickSlop = YES;
        }
    }
    return YES;
}
,["BOOL","CGPoint","CGPoint"]), new objj_method(sel_getUid("stopTracking:at:mouseIsUp:"), function $CPTableView__stopTracking_at_mouseIsUp_(self, _cmd, lastPoint, aPoint, mouseIsUp)
{
    self._isSelectingSession = NO;
    var CLICK_TIME_DELTA = 1000,
        columnIndex = -1,
        column,
        rowIndex,
        shouldEdit = YES;
    if (objj_msgSend(self, "_dataSourceRespondsToWriteRowsWithIndexesToPasteboard"))
    {
        rowIndex = objj_msgSend(self, "rowAtPoint:", aPoint);
        if (rowIndex !== -1)
        {
            if (objj_msgSend(self._draggedRowIndexes, "count") > 0)
            {
                self._draggedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
                return;
            }
            self._previouslySelectedRowIndexes = objj_msgSend(self._selectedRowIndexes, "copy");
            objj_msgSend(self, "_updateSelectionWithMouseAtRow:", rowIndex);
        }
    }
    if (!self._isViewBased && mouseIsUp && !self._trackingPointMovedOutOfClickSlop && objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "clickCount") > 1 && (objj_msgSend(self, "_dataSourceRespondsToSetObjectValueForTableColumnRow") || objj_msgSend(self, "infoForBinding:", "content")))
    {
        columnIndex = objj_msgSend(self, "columnAtPoint:", lastPoint);
        if (columnIndex !== -1)
        {
            column = self._tableColumns[columnIndex];
            if (objj_msgSend(column, "isEditable"))
            {
                rowIndex = objj_msgSend(self, "rowAtPoint:", aPoint);
                if (rowIndex !== -1)
                {
                    if (objj_msgSend(self, "_sendDelegateShouldEditTableColumn:row:", column, rowIndex))
                    {
                        objj_msgSend(self, "editColumn:row:withEvent:select:", columnIndex, rowIndex, nil, YES);
                        return;
                    }
                }
            }
        }
    }
    if (objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "clickCount") === 2 && self._doubleAction)
    {
        self._clickedRow = objj_msgSend(self, "rowAtPoint:", aPoint);
        self._clickedColumn = objj_msgSend(self, "columnAtPoint:", lastPoint);
        objj_msgSend(self, "sendAction:to:", self._doubleAction, self._target);
    }
}
,["void","CGPoint","CGPoint","BOOL"]), new objj_method(sel_getUid("draggingEntered:"), function $CPTableView__draggingEntered_(self, _cmd, sender)
{
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(sender, "draggingLocation"), nil),
        dropOperation = objj_msgSend(self, "_proposedDropOperationAtPoint:", location),
        row = objj_msgSend(self, "_proposedRowAtPoint:", location);
    if (self._retargetedDropRow !== nil)
        row = self._retargetedDropRow;
    var draggedTypes = objj_msgSend(self, "registeredDraggedTypes"),
        count = objj_msgSend(draggedTypes, "count"),
        i = 0;
    for (; i < count; i++)
    {
        if (objj_msgSend(objj_msgSend(objj_msgSend(sender, "draggingPasteboard"), "types"), "containsObject:", objj_msgSend(draggedTypes, "objectAtIndex:", i)))
            return objj_msgSend(self, "_sendDataSourceValidateDrop:proposedRow:proposedDropOperation:", sender, row, dropOperation);
    }
    return CPDragOperationNone;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("draggingExited:"), function $CPTableView__draggingExited_(self, _cmd, sender)
{
    objj_msgSend(self._dropOperationFeedbackView, "removeFromSuperview");
}
,["void","id"]), new objj_method(sel_getUid("draggingEnded:"), function $CPTableView__draggingEnded_(self, _cmd, sender)
{
    objj_msgSend(self, "_draggingEnded");
}
,["void","id"]), new objj_method(sel_getUid("_draggingEnded"), function $CPTableView___draggingEnded(self, _cmd)
{
    self._retargetedDropOperation = nil;
    self._retargetedDropRow = nil;
    self._draggedRowIndexes = objj_msgSend(CPIndexSet, "indexSet");
    objj_msgSend(self._dropOperationFeedbackView, "removeFromSuperview");
    objj_msgSend(self, "_enqueueDraggingViews");
}
,["void"]), new objj_method(sel_getUid("wantsPeriodicDraggingUpdates"), function $CPTableView__wantsPeriodicDraggingUpdates(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_proposedDropOperationAtPoint:"), function $CPTableView___proposedDropOperationAtPoint_(self, _cmd, theDragPoint)
{
    if (self._retargetedDropOperation !== nil)
        return self._retargetedDropOperation;
    var row = objj_msgSend(self, "_proposedRowAtPoint:", theDragPoint),
        rowRect = objj_msgSend(self, "rectOfRow:", row);
    if (objj_msgSend(self, "intercellSpacing").height < 5.0)
        rowRect = CGRectInset(rowRect, 0.0, 5.0 - objj_msgSend(self, "intercellSpacing").height);
    if (CGRectContainsPoint(rowRect, theDragPoint) && row < self._numberOfRows)
        return CPTableViewDropOn;
    return CPTableViewDropAbove;
}
,["CPTableViewDropOperation","CGPoint"]), new objj_method(sel_getUid("_proposedRowAtPoint:"), function $CPTableView___proposedRowAtPoint_(self, _cmd, dragPoint)
{
    var row = objj_msgSend(self, "rowAtPoint:", dragPoint),
        lowerRow = row + 1,
        rect = objj_msgSend(self, "rectOfRow:", row),
        bottomPoint = CGRectGetMaxY(rect),
        bottomThirty = bottomPoint - (bottomPoint - CGRectGetMinY(rect)) * 0.3,
        numberOfRows = objj_msgSend(self, "numberOfRows");
    if (row < 0)
        row = CGRectGetMaxY(rect) < dragPoint.y ? numberOfRows : row;
    else if (dragPoint.y > MAX(bottomThirty, bottomPoint - 6))
        row = lowerRow;
    row = MIN(numberOfRows, row);
    return row;
}
,["CPInteger","CGPoint"]), new objj_method(sel_getUid("_rectForDropHighlightViewOnRow:"), function $CPTableView___rectForDropHighlightViewOnRow_(self, _cmd, theRowIndex)
{
    if (theRowIndex >= objj_msgSend(self, "numberOfRows"))
        theRowIndex = objj_msgSend(self, "numberOfRows") - 1;
    return objj_msgSend(self, "_rectOfRow:checkRange:", theRowIndex, NO);
}
,["CGRect","int"]), new objj_method(sel_getUid("_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:"), function $CPTableView___rectForDropHighlightViewBetweenUpperRow_andLowerRow_offset_(self, _cmd, theUpperRowIndex, theLowerRowIndex, theOffset)
{
    if (theLowerRowIndex > objj_msgSend(self, "numberOfRows"))
        theLowerRowIndex = objj_msgSend(self, "numberOfRows");
    return objj_msgSend(self, "_rectOfRow:checkRange:", theLowerRowIndex, NO);
}
,["CGRect","int","int","CGPoint"]), new objj_method(sel_getUid("draggingUpdated:"), function $CPTableView__draggingUpdated_(self, _cmd, sender)
{
    self._retargetedDropRow = nil;
    self._retargetedDropOperation = nil;
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(sender, "draggingLocation"), nil),
        dropOperation = objj_msgSend(self, "_proposedDropOperationAtPoint:", location),
        numberOfRows = objj_msgSend(self, "numberOfRows"),
        row = objj_msgSend(self, "_proposedRowAtPoint:", location),
        dragOperation = objj_msgSend(self, "_sendDataSourceValidateDrop:proposedRow:proposedDropOperation:", sender, row, dropOperation);
    if (self._retargetedDropRow !== nil)
        row = self._retargetedDropRow;
    if (self._retargetedDropOperation !== nil)
        dropOperation = self._retargetedDropOperation;
    if (dropOperation === CPTableViewDropOn && row >= numberOfRows)
        row = numberOfRows - 1;
    var rect = CGRectMakeZero();
    if (row === -1)
        rect = objj_msgSend(self, "exposedRect");
    else if (dropOperation === CPTableViewDropAbove)
        rect = objj_msgSend(self, "_rectForDropHighlightViewBetweenUpperRow:andLowerRow:offset:", row - 1, row, location);
    else
        rect = objj_msgSend(self, "_rectForDropHighlightViewOnRow:", row);
    objj_msgSend(self._dropOperationFeedbackView, "setDropOperation:", row !== -1 ? dropOperation : CPDragOperationNone);
    objj_msgSend(self._dropOperationFeedbackView, "setHidden:", dragOperation == CPDragOperationNone);
    objj_msgSend(self._dropOperationFeedbackView, "setFrame:", rect);
    objj_msgSend(self._dropOperationFeedbackView, "setCurrentRow:", row);
    objj_msgSend(self, "addSubview:", self._dropOperationFeedbackView);
    return dragOperation;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("prepareForDragOperation:"), function $CPTableView__prepareForDragOperation_(self, _cmd, sender)
{
    objj_msgSend(self._dropOperationFeedbackView, "removeFromSuperview");
    return objj_msgSend(self, "_dataSourceRespondsToValidateDropProposedRowProposedDropOperation");
}
,["BOOL","id"]), new objj_method(sel_getUid("performDragOperation:"), function $CPTableView__performDragOperation_(self, _cmd, sender)
{
    var location = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(sender, "draggingLocation"), nil),
        operation = objj_msgSend(self, "_proposedDropOperationAtPoint:", location),
        row = self._retargetedDropRow;
    if (row === nil)
        var row = objj_msgSend(self, "_proposedRowAtPoint:", location);
    return objj_msgSend(self, "_sendDataSourceAcceptDrop:row:dropOperation:", sender, row, operation);
}
,["BOOL","id"]), new objj_method(sel_getUid("concludeDragOperation:"), function $CPTableView__concludeDragOperation_(self, _cmd, sender)
{
    objj_msgSend(self, "reloadData");
}
,["void","id"]), new objj_method(sel_getUid("draggedView:endedAt:operation:"), function $CPTableView__draggedView_endedAt_operation_(self, _cmd, aView, aLocation, anOperation)
{
    objj_msgSend(self, "_draggingEnded");
    objj_msgSend(self, "draggedImage:endedAt:operation:", aView, aLocation, anOperation);
}
,["void","CPImage","CGPoint","CPDragOperation"]), new objj_method(sel_getUid("_enqueueDraggingViews"), function $CPTableView___enqueueDraggingViews(self, _cmd)
{
    objj_msgSend(self._draggingViews, "enumerateObjectsUsingBlock:", function(dataView, idx)
    {
        objj_msgSend(self, "_enqueueReusableDataView:", dataView);
    });
    objj_msgSend(self._draggingViews, "removeAllObjects");
}
,["void"]), new objj_method(sel_getUid("_updateSelectionWithMouseAtRow:"), function $CPTableView___updateSelectionWithMouseAtRow_(self, _cmd, aRow)
{
    if (aRow < 0)
        return;
    var newSelection,
        shouldExtendSelection = NO;
    if (objj_msgSend(self, "mouseDownFlags") & (CPCommandKeyMask | CPControlKeyMask | CPAlternateKeyMask))
    {
        if (objj_msgSend(self._selectedRowIndexes, "containsIndex:", aRow))
        {
            newSelection = objj_msgSend(self._selectedRowIndexes, "copy");
            objj_msgSend(newSelection, "removeIndex:", aRow);
        }
        else if (self._allowsMultipleSelection)
        {
            newSelection = objj_msgSend(self._selectedRowIndexes, "copy");
            objj_msgSend(newSelection, "addIndex:", aRow);
        }
        else
            newSelection = objj_msgSend(CPIndexSet, "indexSetWithIndex:", aRow);
    }
    else if (self._allowsMultipleSelection)
    {
        if (self._selectionAnchorRow == CPNotFound)
            self._selectionAnchorRow = objj_msgSend(self, "numberOfRows") - 1;
        newSelection = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(MIN(aRow, self._selectionAnchorRow), ABS(aRow - self._selectionAnchorRow) + 1));
        shouldExtendSelection = objj_msgSend(self, "mouseDownFlags") & CPShiftKeyMask && (self._lastSelectedRow == objj_msgSend(self._selectedRowIndexes, "lastIndex") && aRow > self._lastSelectedRow || self._lastSelectedRow == objj_msgSend(self._selectedRowIndexes, "firstIndex") && aRow < self._lastSelectedRow);
    }
    else if (aRow >= 0 && aRow < self._numberOfRows)
        newSelection = objj_msgSend(CPIndexSet, "indexSetWithIndex:", aRow);
    else
        newSelection = objj_msgSend(CPIndexSet, "indexSet");
    if (objj_msgSend(newSelection, "isEqualToIndexSet:", self._selectedRowIndexes))
        return;
    if (!objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
        return;
    newSelection = objj_msgSend(self, "_sendDelegateSelectionIndexesForProposedSelection:", newSelection);
    if (!objj_msgSend(self, "_delegateRespondsToSelectionIndexesForProposedSelection") && objj_msgSend(self, "_delegateRespondsToShouldSelectRow"))
    {
        var indexArray = [];
        objj_msgSend(newSelection, "getIndexes:maxCount:inIndexRange:", indexArray, -1, nil);
        var indexCount = indexArray.length;
        while (indexCount--)
        {
            var index = indexArray[indexCount];
            if (!objj_msgSend(self, "_sendDelegateShouldSelectRow:", index))
                objj_msgSend(newSelection, "removeIndex:", index);
        }
        if (objj_msgSend(newSelection, "count") === 0)
            return;
    }
    if (!self._allowsEmptySelection && objj_msgSend(newSelection, "count") === 0)
        return;
    if (objj_msgSend(newSelection, "isEqualToIndexSet:", self._selectedRowIndexes))
        return;
    objj_msgSend(self, "_noteSelectionIsChanging");
    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", newSelection, shouldExtendSelection);
    self._lastSelectedRow = objj_msgSend(newSelection, "containsIndex:", aRow) ? aRow : objj_msgSend(newSelection, "lastIndex");
}
,["void","CPInteger"]), new objj_method(sel_getUid("_noteSelectionIsChanging"), function $CPTableView___noteSelectionIsChanging(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPTableViewSelectionIsChangingNotification, self, nil);
}
,["void"]), new objj_method(sel_getUid("_noteSelectionDidChange"), function $CPTableView___noteSelectionDidChange(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPTableViewSelectionDidChangeNotification, self, nil);
}
,["void"]), new objj_method(sel_getUid("becomeKeyWindow"), function $CPTableView__becomeKeyWindow(self, _cmd)
{
    self._isKeyWindow = YES;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setSelectionHighlightStyle:", objj_msgSend(self, "selectionHighlightStyle"));
}
,["void"]), new objj_method(sel_getUid("resignKeyWindow"), function $CPTableView__resignKeyWindow(self, _cmd)
{
    self._isKeyWindow = NO;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setSelectionHighlightStyle:", objj_msgSend(self, "selectionHighlightStyle"));
}
,["void"]), new objj_method(sel_getUid("becomeFirstResponder"), function $CPTableView__becomeFirstResponder(self, _cmd)
{
    self._isFirstResponder = YES;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setSelectionHighlightStyle:", objj_msgSend(self, "selectionHighlightStyle"));
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPTableView__resignFirstResponder(self, _cmd)
{
    self._isFirstResponder = NO;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setSelectionHighlightStyle:", objj_msgSend(self, "selectionHighlightStyle"));
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPTableView__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("needsPanelToBecomeKey"), function $CPTableView__needsPanelToBecomeKey(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("hitTest:"), function $CPTableView__hitTest_(self, _cmd, aPoint)
{
    var hit = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "hitTest:", aPoint);
    if (objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "type") == CPLeftMouseDown && objj_msgSend(hit, "acceptsFirstResponder") && !objj_msgSend(self, "isRowSelected:", objj_msgSend(self, "rowForView:", hit)))
        return self;
    return hit;
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("_startObservingFirstResponder"), function $CPTableView___startObservingFirstResponder(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_firstResponderDidChange:"), _CPWindowDidChangeFirstResponderNotification, objj_msgSend(self, "window"));
}
,["void"]), new objj_method(sel_getUid("_stopObservingFirstResponder"), function $CPTableView___stopObservingFirstResponder(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, _CPWindowDidChangeFirstResponderNotification, objj_msgSend(self, "window"));
}
,["void"]), new objj_method(sel_getUid("_firstResponderDidChange:"), function $CPTableView___firstResponderDidChange_(self, _cmd, aNotification)
{
    objj_msgSend(self, "setSelectionHighlightStyle:", objj_msgSend(self, "selectionHighlightStyle"));
    var responder = objj_msgSend(objj_msgSend(self, "window"), "firstResponder");
    if (!objj_msgSend(responder, "isKindOfClass:", objj_msgSend(CPView, "class")) || !objj_msgSend(responder, "isDescendantOf:", self))
    {
        self._editingRow = CPNotFound;
        self._editingColumn = CPNotFound;
        return;
    }
    self._editingRow = objj_msgSend(self, "rowForView:", responder);
    self._editingColumn = objj_msgSend(self, "columnForView:", responder);
    if (self._editingRow !== CPNotFound && objj_msgSend(responder, "isKindOfClass:", objj_msgSend(CPTextField, "class")) && !objj_msgSend(responder, "isBezeled"))
    {
        objj_msgSend(responder, "setBezeled:", YES);
        objj_msgSend(self, "_registerForEndEditingNote:", responder);
    }
}
,["void","CPNotification"]), new objj_method(sel_getUid("_registerForEndEditingNote:"), function $CPTableView___registerForEndEditingNote_(self, _cmd, aTextField)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_textFieldEditingDidEnd:"), CPControlTextDidEndEditingNotification, aTextField);
}
,["void","CPView"]), new objj_method(sel_getUid("_unregisterForEndEditingNote:"), function $CPTableView___unregisterForEndEditingNote_(self, _cmd, aTextField)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPControlTextDidEndEditingNotification, aTextField);
}
,["void","CPView"]), new objj_method(sel_getUid("_textFieldEditingDidEnd:"), function $CPTableView___textFieldEditingDidEnd_(self, _cmd, aNote)
{
    var textField = objj_msgSend(aNote, "object");
    objj_msgSend(self, "_unregisterForEndEditingNote:", textField);
    objj_msgSend(textField, "setBezeled:", NO);
    var action = objj_msgSend(self, "_disableActionIfExists:", textField);
    objj_msgSend(textField, "resignFirstResponder");
    objj_msgSend(textField, "setAction:", action);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_disableActionIfExists:"), function $CPTableView___disableActionIfExists_(self, _cmd, aView)
{
    var action = nil;
    if (objj_msgSend(aView, "respondsToSelector:", sel_getUid("action")) && (action = objj_msgSend(aView, "action")))
        objj_msgSend(aView, "setAction:", nil);
    return action;
}
,["SEL","CPView"]), new objj_method(sel_getUid("keyDown:"), function $CPTableView__keyDown_(self, _cmd, anEvent)
{
    var character = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
        modifierFlags = objj_msgSend(anEvent, "modifierFlags");
    if (character === CPUpArrowFunctionKey || character === CPDownArrowFunctionKey)
    {
        if (objj_msgSend(self, "numberOfRows") !== 0)
        {
            objj_msgSend(self, "_moveSelectionWithEvent:upward:", anEvent, character === CPUpArrowFunctionKey);
            return;
        }
    }
    else if (character === CPDeleteCharacter || character === CPDeleteFunctionKey)
    {
        if (objj_msgSend(self, "_sendDelegateDeleteKeyPressed"))
            return;
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "keyDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_selectionIsBroken"), function $CPTableView___selectionIsBroken(self, _cmd)
{
    return objj_msgSend(self, "selectedRowIndexes")._ranges.length !== 1;
}
,["BOOL"]), new objj_method(sel_getUid("_moveSelectionWithEvent:upward:"), function $CPTableView___moveSelectionWithEvent_upward_(self, _cmd, theEvent, shouldGoUpward)
{
    if (!objj_msgSend(self, "_sendDelegateSelectionShouldChangeInTableView"))
        return;
    var selectedIndexes = objj_msgSend(self, "selectedRowIndexes");
    if (objj_msgSend(selectedIndexes, "count") > 0)
    {
        var extend = objj_msgSend(theEvent, "modifierFlags") & CPShiftKeyMask && self._allowsMultipleSelection,
            i = objj_msgSend(self, "selectedRow");
        if (objj_msgSend(self, "_selectionIsBroken"))
        {
            while (objj_msgSend(selectedIndexes, "containsIndex:", i))
            {
                shouldGoUpward ? i-- : i++;
            }
            self._wasSelectionBroken = true;
        }
        else if (self._wasSelectionBroken && (shouldGoUpward && i !== objj_msgSend(selectedIndexes, "firstIndex") || !shouldGoUpward && i !== objj_msgSend(selectedIndexes, "lastIndex")))
        {
            shouldGoUpward ? i = objj_msgSend(selectedIndexes, "firstIndex") - 1 : i = objj_msgSend(selectedIndexes, "lastIndex");
            self._wasSelectionBroken = false;
        }
        else
        {
            shouldGoUpward ? i-- : i++;
        }
    }
    else
    {
        var extend = NO;
        if (objj_msgSend(self, "numberOfRows") > 0)
            var i = shouldGoUpward ? objj_msgSend(self, "numberOfRows") - 1 : 0;
    }
    if (i >= objj_msgSend(self, "numberOfRows") || i < 0)
        return;
    if (!objj_msgSend(self, "_delegateRespondsToSelectionIndexesForProposedSelection") && objj_msgSend(self, "_delegateRespondsToShouldSelectRow"))
    {
        var shouldSelect = objj_msgSend(self, "_sendDelegateShouldSelectRow:", i);
        while (!shouldSelect && (i < objj_msgSend(self, "numberOfRows") && i > 0))
        {
            shouldGoUpward ? --i : ++i;
            shouldSelect = objj_msgSend(self, "_sendDelegateShouldSelectRow:", i);
        }
        if (!shouldSelect)
            return;
    }
    if (extend && objj_msgSend(selectedIndexes, "containsIndex:", i))
    {
        var differedLastSelectedRow = i;
        shouldGoUpward ? i++ : i--;
        objj_msgSend(selectedIndexes, "removeIndex:", i);
        extend = NO;
    }
    else if (extend)
    {
        if (objj_msgSend(selectedIndexes, "containsIndex:", i))
        {
            i = shouldGoUpward ? objj_msgSend(selectedIndexes, "firstIndex") - 1 : objj_msgSend(selectedIndexes, "lastIndex") + 1;
            i = MIN(MAX(i, 0), objj_msgSend(self, "numberOfRows") - 1);
        }
        objj_msgSend(selectedIndexes, "addIndex:", i);
        var differedLastSelectedRow = i;
    }
    else
    {
        selectedIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", i);
        var differedLastSelectedRow = i;
    }
    selectedIndexes = objj_msgSend(self, "_sendDelegateSelectionIndexesForProposedSelection:", selectedIndexes);
    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", selectedIndexes, extend);
    self._lastSelectedRow = differedLastSelectedRow;
    if (i !== CPNotFound)
        objj_msgSend(self, "scrollRowToVisible:", i);
}
,["void","CPEvent","BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPTableView__defaultThemeClass(self, _cmd)
{
    return "tableview";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPTableView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "alternating-row-colors", objj_msgSend(CPNull, "null"), "grid-color", objj_msgSend(CPNull, "null"), "highlighted-grid-color", objj_msgSend(CPNull, "null"), "selection-color", objj_msgSend(CPNull, "null"), "sourcelist-selection-color", objj_msgSend(CPNull, "null"), "sort-image", objj_msgSend(CPNull, "null"), "sort-image-reversed", objj_msgSend(CPNull, "null"), "selection-radius", objj_msgSend(CPNull, "null"), "image-generic-file", 25.0, "default-row-height");
}
,["CPDictionary"])]);
}{
var the_class = objj_getClass("CPTableView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_dataSourceRespondsToObjectValueForTableColumn"), function $CPTableView___dataSourceRespondsToObjectValueForTableColumn(self, _cmd)
{
    return self._implementedDataSourceMethods & CPTableViewDataSource_tableView_objectValueForTableColumn_row_;
}
,["BOOL"]), new objj_method(sel_getUid("_dataSourceRespondsToWriteRowsWithIndexesToPasteboard"), function $CPTableView___dataSourceRespondsToWriteRowsWithIndexesToPasteboard(self, _cmd)
{
    return self._implementedDataSourceMethods & CPTableViewDataSource_tableView_writeRowsWithIndexes_toPasteboard_;
}
,["BOOL"]), new objj_method(sel_getUid("_dataSourceRespondsToSetObjectValueForTableColumnRow"), function $CPTableView___dataSourceRespondsToSetObjectValueForTableColumnRow(self, _cmd)
{
    return CPTableViewDataSource_tableView_setObjectValue_forTableColumn_row_;
}
,["BOOL"]), new objj_method(sel_getUid("_dataSourceRespondsToValidateDropProposedRowProposedDropOperation"), function $CPTableView___dataSourceRespondsToValidateDropProposedRowProposedDropOperation(self, _cmd)
{
    return self._implementedDataSourceMethods & CPTableViewDataSource_tableView_validateDrop_proposedRow_proposedDropOperation_;
}
,["BOOL"]), new objj_method(sel_getUid("_dataSourceRespondsToNumberOfRowsinTableView"), function $CPTableView___dataSourceRespondsToNumberOfRowsinTableView(self, _cmd)
{
    return self._implementedDataSourceMethods & CPTableViewDataSource_numberOfRowsInTableView_;
}
,["BOOL"]), new objj_method(sel_getUid("_sendDataSourceNumberOfRowsInTableView"), function $CPTableView___sendDataSourceNumberOfRowsInTableView(self, _cmd)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_numberOfRowsInTableView_))
        return 0;
    return objj_msgSend(self._dataSource, "numberOfRowsInTableView:", self);
}
,["int"]), new objj_method(sel_getUid("_sendDataSourceObjectValueForTableColumn:row:"), function $CPTableView___sendDataSourceObjectValueForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_objectValueForTableColumn_row_))
        return nil;
    return objj_msgSend(self._dataSource, "tableView:objectValueForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["id","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDataSourceSetObjectValue:forTableColumn:row:"), function $CPTableView___sendDataSourceSetObjectValue_forTableColumn_row_(self, _cmd, anObject, aTableColumn, aRowIndex)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_setObjectValue_forTableColumn_row_))
        return;
    objj_msgSend(self._dataSource, "tableView:setObjectValue:forTableColumn:row:", self, anObject, aTableColumn, aRowIndex);
}
,["void","id","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDataSourceSortDescriptorsDidChange:"), function $CPTableView___sendDataSourceSortDescriptorsDidChange_(self, _cmd, descriptors)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_sortDescriptorsDidChange_))
        return;
    objj_msgSend(self._dataSource, "tableView:sortDescriptorsDidChange:", self, descriptors);
}
,["void","CPArray"]), new objj_method(sel_getUid("_sendDataSourceAcceptDrop:row:dropOperation:"), function $CPTableView___sendDataSourceAcceptDrop_row_dropOperation_(self, _cmd, info, aRowIndex, operation)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_acceptDrop_row_dropOperation_))
        return NO;
    return objj_msgSend(self._dataSource, "tableView:acceptDrop:row:dropOperation:", self, info, aRowIndex, operation);
}
,["BOOL","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("_sendDataSourceValidateDrop:proposedRow:proposedDropOperation:"), function $CPTableView___sendDataSourceValidateDrop_proposedRow_proposedDropOperation_(self, _cmd, info, aRowIndex, operation)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_validateDrop_proposedRow_proposedDropOperation_))
        return CPDragOperationNone;
    return objj_msgSend(self._dataSource, "tableView:validateDrop:proposedRow:proposedDropOperation:", self, info, aRowIndex, operation);
}
,["CPDragOperation","id","int","CPTableViewDropOperation"]), new objj_method(sel_getUid("_sendDataSourceWriteRowsWithIndexes:toPasteboard:"), function $CPTableView___sendDataSourceWriteRowsWithIndexes_toPasteboard_(self, _cmd, rowIndexes, pboard)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_writeRowsWithIndexes_toPasteboard_))
        return NO;
    return objj_msgSend(self._dataSource, "tableView:writeRowsWithIndexes:toPasteboard:", self, rowIndexes, pboard);
}
,["BOOL","CPIndexSet","CPPasteboard"]), new objj_method(sel_getUid("draggedImage:endedAt:operation:"), function $CPTableView__draggedImage_endedAt_operation_(self, _cmd, anImage, aLocation, anOperation)
{
    if (objj_msgSend(self._dataSource, "respondsToSelector:", sel_getUid("tableView:didEndDraggedImage:atPosition:operation:")))
        objj_msgSend(self._dataSource, "tableView:didEndDraggedImage:atPosition:operation:", self, anImage, aLocation, anOperation);
}
,["void","CPImage","CGPoint","CPDragOperation"]), new objj_method(sel_getUid("_sendDataSourceNamesOfPromisedFilesDroppedAtDestination:forDraggedRowsWithIndexes:"), function $CPTableView___sendDataSourceNamesOfPromisedFilesDroppedAtDestination_forDraggedRowsWithIndexes_(self, _cmd, dropDestination, indexSet)
{
    if (!(self._implementedDataSourceMethods & CPTableViewDataSource_tableView_namesOfPromisedFilesDroppedAtDestination_forDraggedRowsWithIndexes_))
        return [];
    return objj_msgSend(self._dataSource, "tableView:namesOfPromisedFilesDroppedAtDestination:forDraggedRowsWithIndexes:", self, dropDestination, indexSet);
}
,["CPArray","CPURL","CPIndexSet"])]);
}{
var the_class = objj_getClass("CPTableView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_delegateRespondsToDataViewForTableColumn"), function $CPTableView___delegateRespondsToDataViewForTableColumn(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_tableView_dataViewForTableColumn_row_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToViewForTableColumn"), function $CPTableView___delegateRespondsToViewForTableColumn(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_tableView_viewForTableColumn_row_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToShouldSelectRow"), function $CPTableView___delegateRespondsToShouldSelectRow(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldSelectRow_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToSelectionShouldChangeInTableView"), function $CPTableView___delegateRespondsToSelectionShouldChangeInTableView(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_selectionShouldChangeInTableView_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToSelectionIndexesForProposedSelection"), function $CPTableView___delegateRespondsToSelectionIndexesForProposedSelection(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_tableView_selectionIndexesForProposedSelection_;
}
,["BOOL"]), new objj_method(sel_getUid("_delegateRespondsToMenuForTableColumnRow"), function $CPTableView___delegateRespondsToMenuForTableColumnRow(self, _cmd)
{
    return self._implementedDelegateMethods & CPTableViewDelegate_tableViewMenuForTableColumn_row_;
}
,["BOOL"]), new objj_method(sel_getUid("_sendDelegateDidClickTableColumn:"), function $CPTableView___sendDelegateDidClickTableColumn_(self, _cmd, column)
{
    if (self._implementedDelegateMethods & CPTableViewDelegate_tableView_didClickTableColumn_)
        objj_msgSend(self._delegate, "tableView:didClickTableColumn:", self, self._tableColumns[column]);
}
,["void","int"]), new objj_method(sel_getUid("_sendDelegateDidDragTableColumn:"), function $CPTableView___sendDelegateDidDragTableColumn_(self, _cmd, column)
{
    if (self._implementedDelegateMethods & CPTableViewDelegate_tableView_didDragTableColumn_)
        objj_msgSend(self._delegate, "tableView:didDragTableColumn:", self, self._tableColumns[column]);
}
,["void","int"]), new objj_method(sel_getUid("_sendDelegateMouseDownInHeaderOfTableColumn:"), function $CPTableView___sendDelegateMouseDownInHeaderOfTableColumn_(self, _cmd, column)
{
    if (self._implementedDelegateMethods & CPTableViewDelegate_tableView_mouseDownInHeaderOfTableColumn_)
        objj_msgSend(self._delegate, "tableView:mouseDownInHeaderOfTableColumn:", self, self._tableColumns[column]);
}
,["void","int"]), new objj_method(sel_getUid("_sendDelegateDeleteKeyPressed"), function $CPTableView___sendDelegateDeleteKeyPressed(self, _cmd)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tableViewDeleteKeyPressed:")))
    {
        objj_msgSend(self._delegate, "tableViewDeleteKeyPressed:", self);
        return YES;
    }
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("_sendDelegateSelectionShouldChangeInTableView"), function $CPTableView___sendDelegateSelectionShouldChangeInTableView(self, _cmd)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_selectionShouldChangeInTableView_))
        return YES;
    return objj_msgSend(self._delegate, "selectionShouldChangeInTableView:", self);
}
,["BOOL"]), new objj_method(sel_getUid("_sendDelegateIsGroupRow:"), function $CPTableView___sendDelegateIsGroupRow_(self, _cmd, anIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_isGroupRow_))
        return NO;
    return objj_msgSend(self._delegate, "tableView:isGroupRow:", self, anIndex);
}
,["BOOL","int"]), new objj_method(sel_getUid("_sendDelegateShouldSelectRow:"), function $CPTableView___sendDelegateShouldSelectRow_(self, _cmd, anIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldSelectRow_))
        return YES;
    return objj_msgSend(self._delegate, "tableView:shouldSelectRow:", self, anIndex);
}
,["BOOL","int"]), new objj_method(sel_getUid("_sendDelegateWillDisplayView:forTableColumn:row:"), function $CPTableView___sendDelegateWillDisplayView_forTableColumn_row_(self, _cmd, aCell, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_willDisplayView_forTableColumn_row_))
        return;
    objj_msgSend(self._delegate, "tableView:willDisplayView:forTableColumn:row:", self, aCell, aTableColumn, aRowIndex);
}
,["void","id","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateMenuForTableColumn:row:"), function $CPTableView___sendDelegateMenuForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableViewMenuForTableColumn_row_))
        return nil;
    return objj_msgSend(self._delegate, "tableView:menuForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["CPMenu","CPTableColumn",null]), new objj_method(sel_getUid("_sendDelegateShouldReorderColumn:toColumn:"), function $CPTableView___sendDelegateShouldReorderColumn_toColumn_(self, _cmd, columnIndex, newColumnIndex)
{
    if (objj_msgSend(self, "allowsColumnReordering") && self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldReorderColumn_toColumn_)
    {
        return objj_msgSend(self._delegate, "tableView:shouldReorderColumn:toColumn:", self, columnIndex, newColumnIndex);
    }
    return objj_msgSend(self, "allowsColumnReordering");
}
,["BOOL","int","int"]), new objj_method(sel_getUid("_sendDelegateHeightOfRow:"), function $CPTableView___sendDelegateHeightOfRow_(self, _cmd, anIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_heightOfRow_))
        return objj_msgSend(self, "rowHeight");
    return objj_msgSend(self._delegate, "tableView:heightOfRow:", self, anIndex);
}
,["float","int"]), new objj_method(sel_getUid("_sendDelegateShouldEditTableColumn:row:"), function $CPTableView___sendDelegateShouldEditTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldEditTableColumn_row_))
        return YES;
    return objj_msgSend(self._delegate, "tableView:shouldEditTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["BOOL","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateSelectionIndexesForProposedSelection:"), function $CPTableView___sendDelegateSelectionIndexesForProposedSelection_(self, _cmd, anIndexSet)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_selectionIndexesForProposedSelection_))
        return anIndexSet;
    return objj_msgSend(self._delegate, "tableView:selectionIndexesForProposedSelection:", self, anIndexSet);
}
,["CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_sendDelegateViewForTableColumn:row:"), function $CPTableView___sendDelegateViewForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_viewForTableColumn_row_))
        return nil;
    return objj_msgSend(self._delegate, "tableView:viewForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["CPView","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateDataViewForTableColumn:row:"), function $CPTableView___sendDelegateDataViewForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_dataViewForTableColumn_row_))
        return nil;
    return objj_msgSend(self._delegate, "tableView:dataViewForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["CPView","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateShouldSelectTableColumn:"), function $CPTableView___sendDelegateShouldSelectTableColumn_(self, _cmd, aTableColumn)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldSelectTableColumn_))
        return YES;
    return objj_msgSend(self._delegate, "tableView:shouldSelectTableColumn:", self, aTableColumn);
}
,["BOOL","CPTableColumn"]), new objj_method(sel_getUid("_sendDelegateToolTipForView:rect:tableColumn:row:mouseLocation:"), function $CPTableView___sendDelegateToolTipForView_rect_tableColumn_row_mouseLocation_(self, _cmd, aView, aRect, aTableColumn, aRowIndex, aPoint)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_toolTipForView_rect_tableColumn_row_mouseLocation_))
        return nil;
    return objj_msgSend(self._delegate, "tableView:toolTipForView:rect:tableColumn:row:mouseLocation:", self, aView, aRect, aTableColumn, aRowIndex, aPoint);
}
,["CPString","id","CGRect","CPTableColumn","int","CGPoint"]), new objj_method(sel_getUid("_sendDelegateShouldTrackView:forTableColumn:row:"), function $CPTableView___sendDelegateShouldTrackView_forTableColumn_row_(self, _cmd, aView, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldTrackView_forTableColumn_row_))
        return YES;
    return objj_msgSend(self._delegate, "tableView:shouldTrackView:forTableColumn:row:", self, aView, aTableColumn, aRowIndex);
}
,["BOOL","id","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateShouldShowViewExpansionForTableColumn:row:"), function $CPTableView___sendDelegateShouldShowViewExpansionForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldShowViewExpansionForTableColumn_row_))
        return YES;
    return objj_msgSend(self._delegate, "tableView:shouldShowViewExpansionForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["BOOL","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateShouldTypeSelectForEvent:withCurrentSearchString:"), function $CPTableView___sendDelegateShouldTypeSelectForEvent_withCurrentSearchString_(self, _cmd, anEvent, aString)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_shouldTypeSelectForEvent_withCurrentSearchString_))
        return NO;
    return objj_msgSend(self._delegate, "tableView:shouldTypeSelectForEvent:withCurrentSearchString:", self, anEvent, aString);
}
,["BOOL","CPEvent","CPString"]), new objj_method(sel_getUid("_sendDelegateTypeSelectStringForTableColumn:row:"), function $CPTableView___sendDelegateTypeSelectStringForTableColumn_row_(self, _cmd, aTableColumn, aRowIndex)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_typeSelectStringForTableColumn_row_))
        return nil;
    return objj_msgSend(self._delegate, "tableView:typeSelectStringForTableColumn:row:", self, aTableColumn, aRowIndex);
}
,["CPString","CPTableColumn","int"]), new objj_method(sel_getUid("_sendDelegateNextTypeSelectMatchFromRow:toRow:forString:"), function $CPTableView___sendDelegateNextTypeSelectMatchFromRow_toRow_forString_(self, _cmd, aRowIndex, aSecondRowIndex, aString)
{
    if (!(self._implementedDelegateMethods & CPTableViewDelegate_tableView_nextTypeSelectMatchFromRow_toRow_forString_))
        return -1;
    return objj_msgSend(self._delegate, "tableView:nextTypeSelectMatchFromRow:toRow:forString:", self, aRowIndex, aSecondRowIndex, aString);
}
,["int","int","int","CPString"])]);
}{
var the_class = objj_getClass("CPTableView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_replacementKeyPathForBinding:"), function $CPTableView___replacementKeyPathForBinding_(self, _cmd, aBinding)
{
    if (aBinding === "selectionIndexes")
        return "selectedRowIndexes";
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "_replacementKeyPathForBinding:", aBinding);
}
,["CPString","CPString"]), new objj_method(sel_getUid("_establishBindingsIfUnbound:"), function $CPTableView___establishBindingsIfUnbound_(self, _cmd, destination)
{
    if (objj_msgSend(objj_msgSend(self, "infoForBinding:", "content"), "objectForKey:", CPObservedObjectKey) !== destination)
    {
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "bind:toObject:withKeyPath:options:", "content", destination, "arrangedObjects", nil);
        self._contentBindingExplicitlySet = NO;
    }
    if (!self._contentBindingExplicitlySet)
    {
        if (objj_msgSend(objj_msgSend(self, "infoForBinding:", "selectionIndexes"), "objectForKey:", CPObservedObjectKey) !== destination)
            objj_msgSend(self, "bind:toObject:withKeyPath:options:", "selectionIndexes", destination, "selectionIndexes", nil);
        if (objj_msgSend(objj_msgSend(self, "infoForBinding:", "sortDescriptors"), "objectForKey:", CPObservedObjectKey) !== destination)
            objj_msgSend(self, "bind:toObject:withKeyPath:options:", "sortDescriptors", destination, "sortDescriptors", nil);
    }
}
,["void","id"]), new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"), function $CPTableView__bind_toObject_withKeyPath_options_(self, _cmd, aBinding, anObject, aKeyPath, options)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "bind:toObject:withKeyPath:options:", aBinding, anObject, aKeyPath, options);
    if (aBinding == "content")
        self._contentBindingExplicitlySet = YES;
}
,["void","CPString","id","CPString","CPDictionary"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPTableView___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == "content")
        return objj_msgSend(CPTableContentBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPTableView").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "CPTableContentBinder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_content")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("content"), function $CPTableContentBinder__content(self, _cmd)
{
    return self._content;
}
,["id"]), new objj_method(sel_getUid("setContent:"), function $CPTableContentBinder__setContent_(self, _cmd, newValue)
{
    self._content = newValue;
}
,["void","id"]), new objj_method(sel_getUid("setValueFor:"), function $CPTableContentBinder__setValueFor_(self, _cmd, aBinding)
{
    var destination = objj_msgSend(self._info, "objectForKey:", CPObservedObjectKey),
        keyPath = objj_msgSend(self._info, "objectForKey:", CPObservedKeyPathKey);
    self._content = objj_msgSend(destination, "valueForKey:", keyPath);
    objj_msgSend(self._source, "reloadData");
}
,["void","CPString"])]);
}var CPTableViewDataSourceKey = "CPTableViewDataSourceKey",
    CPTableViewDelegateKey = "CPTableViewDelegateKey",
    CPTableViewHeaderViewKey = "CPTableViewHeaderViewKey",
    CPTableViewTableColumnsKey = "CPTableViewTableColumnsKey",
    CPTableViewRowHeightKey = "CPTableViewRowHeightKey",
    CPTableViewIntercellSpacingKey = "CPTableViewIntercellSpacingKey",
    CPTableViewSelectionHighlightStyleKey = "CPTableViewSelectionHighlightStyleKey",
    CPTableViewMultipleSelectionKey = "CPTableViewMultipleSelectionKey",
    CPTableViewEmptySelectionKey = "CPTableViewEmptySelectionKey",
    CPTableViewColumnReorderingKey = "CPTableViewColumnReorderingKey",
    CPTableViewColumnResizingKey = "CPTableViewColumnResizingKey",
    CPTableViewColumnSelectionKey = "CPTableViewColumnSelectionKey",
    CPTableViewColumnAutoresizingStyleKey = "CPTableViewColumnAutoresizingStyleKey",
    CPTableViewGridColorKey = "CPTableViewGridColorKey",
    CPTableViewGridStyleMaskKey = "CPTableViewGridStyleMaskKey",
    CPTableViewUsesAlternatingBackgroundKey = "CPTableViewUsesAlternatingBackgroundKey",
    CPTableViewAlternatingRowColorsKey = "CPTableViewAlternatingRowColorsKey",
    CPTableViewHeaderViewKey = "CPTableViewHeaderViewKey",
    CPTableViewCornerViewKey = "CPTableViewCornerViewKey",
    CPTableViewAutosaveNameKey = "CPTableViewAutosaveNameKey",
    CPTableViewArchivedReusableViewsKey = "CPTableViewArchivedReusableViewsKey";
{
var the_class = objj_getClass("CPTableView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTableView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTableView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._allowsColumnReordering = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableViewColumnReorderingKey);
        self._allowsColumnResizing = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableViewColumnResizingKey);
        self._allowsMultipleSelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableViewMultipleSelectionKey);
        self._allowsEmptySelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableViewEmptySelectionKey);
        self._allowsColumnSelection = objj_msgSend(aCoder, "decodeBoolForKey:", CPTableViewColumnSelectionKey);
        self._selectionHighlightStyle = objj_msgSend(aCoder, "decodeIntForKey:", CPTableViewSelectionHighlightStyleKey);
        self._columnAutoResizingStyle = objj_msgSend(aCoder, "decodeIntForKey:", CPTableViewColumnAutoresizingStyleKey);
        self._tableColumns = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewTableColumnsKey) || [];
        objj_msgSend(self._tableColumns, "makeObjectsPerformSelector:withObject:", sel_getUid("setTableView:"), self);
        self._rowHeight = objj_msgSend(aCoder, "decodeFloatForKey:", CPTableViewRowHeightKey) || objj_msgSend(self, "valueForThemeAttribute:", "default-row-height");
        self._intercellSpacing = objj_msgSend(aCoder, "decodeSizeForKey:", CPTableViewIntercellSpacingKey);
        if (CGSizeEqualToSize(self._intercellSpacing, CGSizeMakeZero()))
            self._intercellSpacing = CGSizeMake(3.0, 2.0);
        objj_msgSend(self, "setGridColor:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewGridColorKey));
        self._gridStyleMask = objj_msgSend(aCoder, "decodeIntForKey:", CPTableViewGridStyleMaskKey);
        self._usesAlternatingRowBackgroundColors = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewUsesAlternatingBackgroundKey);
        objj_msgSend(self, "setAlternatingRowBackgroundColors:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewAlternatingRowColorsKey));
        self._headerView = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewHeaderViewKey);
        self._cornerView = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewCornerViewKey);
        objj_msgSend(self, "setDataSource:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewDataSourceKey));
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewDelegateKey));
        objj_msgSend(self, "_init");
        if (objj_msgSend(aCoder, "containsValueForKey:", CPTableViewArchivedReusableViewsKey))
            self._archivedDataViews = objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewArchivedReusableViewsKey);
        objj_msgSend(self, "_updateIsViewBased");
        objj_msgSend(self, "viewWillMoveToSuperview:", objj_msgSend(self, "superview"));
        objj_msgSend(self, "setAutosaveName:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTableViewAutosaveNameKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTableView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._dataSource, CPTableViewDataSourceKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._delegate, CPTableViewDelegateKey);
    objj_msgSend(aCoder, "encodeFloat:forKey:", self._rowHeight, CPTableViewRowHeightKey);
    objj_msgSend(aCoder, "encodeSize:forKey:", self._intercellSpacing, CPTableViewIntercellSpacingKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._selectionHighlightStyle, CPTableViewSelectionHighlightStyleKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._columnAutoResizingStyle, CPTableViewColumnAutoresizingStyleKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsMultipleSelection, CPTableViewMultipleSelectionKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsEmptySelection, CPTableViewEmptySelectionKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsColumnReordering, CPTableViewColumnReorderingKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsColumnResizing, CPTableViewColumnResizingKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsColumnSelection, CPTableViewColumnSelectionKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._tableColumns, CPTableViewTableColumnsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "gridColor"), CPTableViewGridColorKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._gridStyleMask, CPTableViewGridStyleMaskKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._usesAlternatingRowBackgroundColors, CPTableViewUsesAlternatingBackgroundKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "alternatingRowBackgroundColors"), CPTableViewAlternatingRowColorsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._cornerView, CPTableViewCornerViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._headerView, CPTableViewHeaderViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._autosaveName, CPTableViewAutosaveNameKey);
    if (self._archivedDataViews)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._archivedDataViews, CPTableViewArchivedReusableViewsKey);
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPIndexSet")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPIndexSet\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("removeMatches:"), function $CPIndexSet__removeMatches_(self, _cmd, otherSet)
{
    var firstindex = objj_msgSend(self, "firstIndex"),
        index = MIN(firstindex, objj_msgSend(otherSet, "firstIndex")),
        switchFlag = index == firstindex;
    while (index != CPNotFound)
    {
        var indexSet = switchFlag ? otherSet : self,
            otherIndex = objj_msgSend(indexSet, "indexGreaterThanOrEqualToIndex:", index);
        if (otherIndex == index)
        {
            objj_msgSend(self, "removeIndex:", index);
            objj_msgSend(otherSet, "removeIndex:", index);
        }
        index = otherIndex;
        switchFlag = !switchFlag;
    }
}
,["void","CPIndexSet"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPDropOperationDrawingView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("dropOperation"), new objj_ivar("tableView"), new objj_ivar("currentRow"), new objj_ivar("isBlinking")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("dropOperation"), function $_CPDropOperationDrawingView__dropOperation(self, _cmd)
{
    return self.dropOperation;
}
,["unsigned"]), new objj_method(sel_getUid("setDropOperation:"), function $_CPDropOperationDrawingView__setDropOperation_(self, _cmd, newValue)
{
    self.dropOperation = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("tableView"), function $_CPDropOperationDrawingView__tableView(self, _cmd)
{
    return self.tableView;
}
,["CPTableView"]), new objj_method(sel_getUid("setTableView:"), function $_CPDropOperationDrawingView__setTableView_(self, _cmd, newValue)
{
    self.tableView = newValue;
}
,["void","CPTableView"]), new objj_method(sel_getUid("currentRow"), function $_CPDropOperationDrawingView__currentRow(self, _cmd)
{
    return self.currentRow;
}
,["int"]), new objj_method(sel_getUid("setCurrentRow:"), function $_CPDropOperationDrawingView__setCurrentRow_(self, _cmd, newValue)
{
    self.currentRow = newValue;
}
,["void","int"]), new objj_method(sel_getUid("isBlinking"), function $_CPDropOperationDrawingView__isBlinking(self, _cmd)
{
    return self.isBlinking;
}
,["BOOL"]), new objj_method(sel_getUid("setIsBlinking:"), function $_CPDropOperationDrawingView__setIsBlinking_(self, _cmd, newValue)
{
    self.isBlinking = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("drawRect:"), function $_CPDropOperationDrawingView__drawRect_(self, _cmd, aRect)
{
    if (self.tableView._destinationDragStyle === CPTableViewDraggingDestinationFeedbackStyleNone || self.isBlinking)
        return;
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithHexString:", "4886ca"));
    CGContextSetLineWidth(context, 3);
    if (self.currentRow === -1)
    {
        CGContextStrokeRect(context, objj_msgSend(self, "bounds"));
    }
    else if (self.dropOperation === CPTableViewDropOn)
    {
        var selectedRows = objj_msgSend(self.tableView, "selectedRowIndexes"),
            newRect = CGRectMake(aRect.origin.x + 2, aRect.origin.y + 2, aRect.size.width - 4, aRect.size.height - 5);
        if (objj_msgSend(selectedRows, "containsIndex:", self.currentRow))
        {
            CGContextSetLineWidth(context, 2);
            CGContextSetStrokeColor(context, objj_msgSend(CPColor, "whiteColor"));
        }
        else
        {
            CGContextSetFillColor(context, objj_msgSend(CPColor, "colorWithRed:green:blue:alpha:", 72 / 255, 134 / 255, 202 / 255, 0.25));
            CGContextFillRoundedRectangleInRect(context, newRect, 8, YES, YES, YES, YES);
        }
        CGContextStrokeRoundedRectangleInRect(context, newRect, 8, YES, YES, YES, YES);
    }
    else if (self.dropOperation === CPTableViewDropAbove)
    {
        objj_msgSend(self, "setFrameOrigin:", CGPointMake(self._frame.origin.x, self._frame.origin.y - 8));
        var selectedRows = objj_msgSend(self.tableView, "selectedRowIndexes");
        if (objj_msgSend(selectedRows, "containsIndex:", self.currentRow - 1) || objj_msgSend(selectedRows, "containsIndex:", self.currentRow))
        {
            CGContextSetStrokeColor(context, objj_msgSend(CPColor, "whiteColor"));
            CGContextSetLineWidth(context, 4);
            CGContextStrokeEllipseInRect(context, CGRectMake(aRect.origin.x + 4, aRect.origin.y + 4, 8, 8));
            CGContextBeginPath(context);
            CGContextMoveToPoint(context, 10, aRect.origin.y + 8);
            CGContextAddLineToPoint(context, aRect.size.width - aRect.origin.y - 8, aRect.origin.y + 8);
            CGContextStrokePath(context);
            CGContextSetStrokeColor(context, objj_msgSend(CPColor, "colorWithHexString:", "4886ca"));
            CGContextSetLineWidth(context, 3);
        }
        CGContextStrokeEllipseInRect(context, CGRectMake(aRect.origin.x + 4, aRect.origin.y + 4, 8, 8));
        CGContextBeginPath(context);
        CGContextMoveToPoint(context, 10, aRect.origin.y + 8);
        CGContextAddLineToPoint(context, aRect.size.width - aRect.origin.y - 8, aRect.origin.y + 8);
        CGContextStrokePath(context);
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("blink"), function $_CPDropOperationDrawingView__blink(self, _cmd)
{
    if (self.dropOperation !== CPTableViewDropOn)
        return;
    self.isBlinking = YES;
    var showCallback = function()
    {
        objj_msgSend(self, "setHidden:", NO);
        self.isBlinking = NO;
    };
    var hideCallback = function()
    {
        objj_msgSend(self, "setHidden:", YES);
        self.isBlinking = YES;
    };
    objj_msgSend(self, "setHidden:", YES);
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", 0.1, showCallback, NO);
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", 0.19, hideCallback, NO);
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:callback:repeats:", 0.27, showCallback, NO);
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPColumnDragView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_lineColor")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithLineColor:"), function $_CPColumnDragView__initWithLineColor_(self, _cmd, aColor)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPColumnDragView").super_class }, "initWithFrame:", CGRectMakeZero());
    if (self)
        self._lineColor = aColor;
    return self;
}
,["id","CPColor"]), new objj_method(sel_getUid("drawRect:"), function $_CPColumnDragView__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetStrokeColor(context, self._lineColor);
    var points = [CGPointMake(0.5, 0), CGPointMake(0.5, aRect.size.height)];
    CGContextStrokeLineSegments(context, points, 2);
    points = [CGPointMake(aRect.size.width - 0.5, 0), CGPointMake(aRect.size.width - 0.5, aRect.size.height)];
    CGContextStrokeLineSegments(context, points, 2);
}
,["void","CGRect"])]);
}{var the_class = objj_allocateClassPair(CPView, "CPTableCellView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_objectValue"), new objj_ivar("_textField"), new objj_ivar("_imageView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("objectValue"), function $CPTableCellView__objectValue(self, _cmd)
{
    return self._objectValue;
}
,["id"]), new objj_method(sel_getUid("setObjectValue:"), function $CPTableCellView__setObjectValue_(self, _cmd, newValue)
{
    self._objectValue = newValue;
}
,["void","id"]), new objj_method(sel_getUid("textField"), function $CPTableCellView__textField(self, _cmd)
{
    return self._textField;
}
,["CPTextField"]), new objj_method(sel_getUid("setTextField:"), function $CPTableCellView__setTextField_(self, _cmd, newValue)
{
    self._textField = newValue;
}
,["void","CPTextField"]), new objj_method(sel_getUid("imageView"), function $CPTableCellView__imageView(self, _cmd)
{
    return self._imageView;
}
,["CPImageView"]), new objj_method(sel_getUid("setImageView:"), function $CPTableCellView__setImageView_(self, _cmd, newValue)
{
    self._imageView = newValue;
}
,["void","CPImageView"]), new objj_method(sel_getUid("awakeFromCib"), function $CPTableCellView__awakeFromCib(self, _cmd)
{
    objj_msgSend(self, "setThemeState:", CPThemeStateTableDataView);
}
,["void"]), new objj_method(sel_getUid("setThemeState:"), function $CPTableCellView__setThemeState_(self, _cmd, aState)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableCellView").super_class }, "setThemeState:", aState);
    objj_msgSend(self, "recursivelyPerformSelector:withObject:startingFrom:", sel_getUid("setThemeState:"), aState, self);
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("unsetThemeState:"), function $CPTableCellView__unsetThemeState_(self, _cmd, aState)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTableCellView").super_class }, "unsetThemeState:", aState);
    objj_msgSend(self, "recursivelyPerformSelector:withObject:startingFrom:", sel_getUid("unsetThemeState:"), aState, self);
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("recursivelyPerformSelector:withObject:startingFrom:"), function $CPTableCellView__recursivelyPerformSelector_withObject_startingFrom_(self, _cmd, selector, anObject, aView)
{
    objj_msgSend(objj_msgSend(aView, "subviews"), "enumerateObjectsUsingBlock:", function(view, idx)
    {
        objj_msgSend(view, "performSelector:withObject:", selector, anObject);
        if (!objj_msgSend(view, "isKindOfClass:", objj_msgSend(self, "class")))
            objj_msgSend(self, "recursivelyPerformSelector:withObject:startingFrom:", selector, anObject, view);
    });
}
,["void","SEL","id","id"]), new objj_method(sel_getUid("description"), function $CPTableCellView__description(self, _cmd)
{
    return "<" + objj_msgSend(self, "className") + " 0x" + objj_msgSend(CPString, "stringWithHash:", objj_msgSend(self, "UID")) + " identifier=" + objj_msgSend(self, "identifier") + ">";
}
,["CPString"])]);
}p;11;CPTabView.jt;16151;@STATIC;1.0;i;7;CPBox.ji;20;CPSegmentedControl.ji;15;CPTabViewItem.ji;8;CPView.jt;16063;objj_executeFile("CPBox.j", YES);objj_executeFile("CPSegmentedControl.j", YES);objj_executeFile("CPTabViewItem.j", YES);objj_executeFile("CPView.j", YES);CPTopTabsBezelBorder = 0;
CPBottomTabsBezelBorder = 2;
CPNoTabsBezelBorder = 4;
CPNoTabsLineBorder = 5;
CPNoTabsNoBorder = 6;
var CPTabViewDidSelectTabViewItemSelector = 1,
    CPTabViewShouldSelectTabViewItemSelector = 2,
    CPTabViewWillSelectTabViewItemSelector = 4,
    CPTabViewDidChangeNumberOfTabViewItemsSelector = 8;
{var the_class = objj_allocateClassPair(CPView, "CPTabView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_items"), new objj_ivar("_tabs"), new objj_ivar("_box"), new objj_ivar("_selectedIndex"), new objj_ivar("_type"), new objj_ivar("_font"), new objj_ivar("_delegate"), new objj_ivar("_delegateSelectors")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $CPTabView__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTabView").super_class }, "initWithFrame:", aFrame))
    {
        self._items = objj_msgSend(CPArray, "array");
        objj_msgSend(self, "_init");
        objj_msgSend(self, "setTabViewType:", CPTopTabsBezelBorder);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPTabView___init(self, _cmd)
{
    self._selectedIndex = CPNotFound;
    self._tabs = objj_msgSend(objj_msgSend(CPSegmentedControl, "alloc"), "initWithFrame:", CGRectMake(0, 0, 0, 0));
    objj_msgSend(self._tabs, "setHitTests:", NO);
    var height = objj_msgSend(self._tabs, "valueForThemeAttribute:", "default-height");
    objj_msgSend(self._tabs, "setFrameSize:", CGSizeMake(0, height));
    self._box = objj_msgSend(objj_msgSend(CPBox, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "colorWithCalibratedWhite:alpha:", 0.95, 1.0));
    objj_msgSend(self, "addSubview:", self._box);
    objj_msgSend(self, "addSubview:", self._tabs);
}
,["void"]), new objj_method(sel_getUid("addTabViewItem:"), function $CPTabView__addTabViewItem_(self, _cmd, aTabViewItem)
{
    objj_msgSend(self, "insertTabViewItem:atIndex:", aTabViewItem, objj_msgSend(self._items, "count"));
}
,["void","CPTabViewItem"]), new objj_method(sel_getUid("insertTabViewItem:atIndex:"), function $CPTabView__insertTabViewItem_atIndex_(self, _cmd, aTabViewItem, anIndex)
{
    objj_msgSend(self._items, "insertObject:atIndex:", aTabViewItem, anIndex);
    objj_msgSend(self, "_updateItems");
    objj_msgSend(self, "_repositionTabs");
    objj_msgSend(aTabViewItem, "_setTabView:", self);
    if (self._delegateSelectors & CPTabViewDidChangeNumberOfTabViewItemsSelector)
        objj_msgSend(self._delegate, "tabViewDidChangeNumberOfTabViewItems:", self);
}
,["void","CPTabViewItem","unsigned"]), new objj_method(sel_getUid("removeTabViewItem:"), function $CPTabView__removeTabViewItem_(self, _cmd, aTabViewItem)
{
    var count = objj_msgSend(self._items, "count");
    for (var i = 0; i < count; i++)
    {
        if (objj_msgSend(self._items, "objectAtIndex:", i) === aTabViewItem)
        {
            objj_msgSend(self._items, "removeObjectAtIndex:", i);
            break;
        }
    }
    objj_msgSend(self, "_updateItems");
    objj_msgSend(self, "_repositionTabs");
    objj_msgSend(aTabViewItem, "_setTabView:", nil);
    if (self._delegateSelectors & CPTabViewDidChangeNumberOfTabViewItemsSelector)
        objj_msgSend(self._delegate, "tabViewDidChangeNumberOfTabViewItems:", self);
}
,["void","CPTabViewItem"]), new objj_method(sel_getUid("indexOfTabViewItem:"), function $CPTabView__indexOfTabViewItem_(self, _cmd, aTabViewItem)
{
    return objj_msgSend(self._items, "indexOfObjectIdenticalTo:", aTabViewItem);
}
,["int","CPTabViewItem"]), new objj_method(sel_getUid("indexOfTabViewItemWithIdentifier:"), function $CPTabView__indexOfTabViewItemWithIdentifier_(self, _cmd, anIdentifier)
{
    for (var index = objj_msgSend(self._items, "count"); index >= 0; index--)
        if (objj_msgSend(objj_msgSend(self._items[index], "identifier"), "isEqual:", anIdentifier))
            return index;
    return CPNotFound;
}
,["int","CPString"]), new objj_method(sel_getUid("numberOfTabViewItems"), function $CPTabView__numberOfTabViewItems(self, _cmd)
{
    return objj_msgSend(self._items, "count");
}
,["unsigned"]), new objj_method(sel_getUid("tabViewItemAtIndex:"), function $CPTabView__tabViewItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._items, "objectAtIndex:", anIndex);
}
,["CPTabViewItem","unsigned"]), new objj_method(sel_getUid("tabViewItems"), function $CPTabView__tabViewItems(self, _cmd)
{
    return objj_msgSend(self._items, "copy");
}
,["CPArray"]), new objj_method(sel_getUid("selectFirstTabViewItem:"), function $CPTabView__selectFirstTabViewItem_(self, _cmd, aSender)
{
    if (objj_msgSend(self._items, "count") === 0)
        return;
    objj_msgSend(self, "selectTabViewItemAtIndex:", 0);
}
,["void","id"]), new objj_method(sel_getUid("selectLastTabViewItem:"), function $CPTabView__selectLastTabViewItem_(self, _cmd, aSender)
{
    if (objj_msgSend(self._items, "count") === 0)
        return;
    objj_msgSend(self, "selectTabViewItemAtIndex:", objj_msgSend(self._items, "count") - 1);
}
,["void","id"]), new objj_method(sel_getUid("selectNextTabViewItem:"), function $CPTabView__selectNextTabViewItem_(self, _cmd, aSender)
{
    if (self._selectedIndex === CPNotFound)
        return;
    var nextIndex = self._selectedIndex + 1;
    if (nextIndex === objj_msgSend(self._items, "count"))
        return;
    objj_msgSend(self, "selectTabViewItemAtIndex:", nextIndex);
}
,["void","id"]), new objj_method(sel_getUid("selectPreviousTabViewItem:"), function $CPTabView__selectPreviousTabViewItem_(self, _cmd, aSender)
{
    if (self._selectedIndex === CPNotFound)
        return;
    var previousIndex = self._selectedIndex - 1;
    if (previousIndex < 0)
        return;
    objj_msgSend(self, "selectTabViewItemAtIndex:", previousIndex);
}
,["void","id"]), new objj_method(sel_getUid("selectTabViewItem:"), function $CPTabView__selectTabViewItem_(self, _cmd, aTabViewItem)
{
    objj_msgSend(self, "selectTabViewItemAtIndex:", objj_msgSend(self, "indexOfTabViewItem:", aTabViewItem));
}
,["void","CPTabViewItem"]), new objj_method(sel_getUid("selectTabViewItemAtIndex:"), function $CPTabView__selectTabViewItemAtIndex_(self, _cmd, anIndex)
{
    if (anIndex === self._selectedIndex)
        return;
    var aTabViewItem = objj_msgSend(self, "tabViewItemAtIndex:", anIndex);
    if (self._delegateSelectors & CPTabViewShouldSelectTabViewItemSelector && !objj_msgSend(self._delegate, "tabView:shouldSelectTabViewItem:", self, aTabViewItem))
        return NO;
    if (self._delegateSelectors & CPTabViewWillSelectTabViewItemSelector)
        objj_msgSend(self._delegate, "tabView:willSelectTabViewItem:", self, aTabViewItem);
    objj_msgSend(self._tabs, "selectSegmentWithTag:", anIndex);
    objj_msgSend(self, "_setSelectedIndex:", anIndex);
    if (self._delegateSelectors & CPTabViewDidSelectTabViewItemSelector)
        objj_msgSend(self._delegate, "tabView:didSelectTabViewItem:", self, aTabViewItem);
    return YES;
}
,["BOOL","unsigned"]), new objj_method(sel_getUid("selectedTabViewItem"), function $CPTabView__selectedTabViewItem(self, _cmd)
{
    if (self._selectedIndex != CPNotFound)
        return objj_msgSend(self._items, "objectAtIndex:", self._selectedIndex);
    return nil;
}
,["CPTabViewItem"]), new objj_method(sel_getUid("font"), function $CPTabView__font(self, _cmd)
{
    return self._font;
}
,["CPFont"]), new objj_method(sel_getUid("setFont:"), function $CPTabView__setFont_(self, _cmd, font)
{
    if (objj_msgSend(self._font, "isEqual:", font))
        return;
    self._font = font;
    objj_msgSend(self._tabs, "setFont:", self._font);
}
,["void","CPFont"]), new objj_method(sel_getUid("setTabViewType:"), function $CPTabView__setTabViewType_(self, _cmd, aTabViewType)
{
    if (self._type === aTabViewType)
        return;
    self._type = aTabViewType;
    if (self._type !== CPTopTabsBezelBorder && self._type !== CPBottomTabsBezelBorder)
        objj_msgSend(self._tabs, "removeFromSuperview");
    else
        objj_msgSend(self, "addSubview:", self._tabs);
    switch(self._type) {
    case CPTopTabsBezelBorder:
    case CPBottomTabsBezelBorder:
    case CPNoTabsBezelBorder:
        objj_msgSend(self._box, "setBorderType:", CPBezelBorder);
        break;
    case CPNoTabsLineBorder:
        objj_msgSend(self._box, "setBorderType:", CPLineBorder);
        break;
    case CPNoTabsNoBorder:
        objj_msgSend(self._box, "setBorderType:", CPNoBorder);
        break;
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPTabViewType"]), new objj_method(sel_getUid("layoutSubviews"), function $CPTabView__layoutSubviews(self, _cmd)
{
    if (self._type !== CPTopTabsBezelBorder && self._type !== CPBottomTabsBezelBorder)
    {
        objj_msgSend(self._box, "setFrame:", objj_msgSend(self, "bounds"));
    }
    else
    {
        var aFrame = objj_msgSend(self, "frame"),
            segmentedHeight = CGRectGetHeight(objj_msgSend(self._tabs, "frame")),
            origin = self._type === CPTopTabsBezelBorder ? segmentedHeight / 2 : 0;
        objj_msgSend(self._box, "setFrame:", CGRectMake(0, origin, CGRectGetWidth(aFrame), CGRectGetHeight(aFrame) - segmentedHeight / 2));
        objj_msgSend(self, "_repositionTabs");
    }
}
,["void"]), new objj_method(sel_getUid("tabViewType"), function $CPTabView__tabViewType(self, _cmd)
{
    return self._type;
}
,["CPTabViewType"]), new objj_method(sel_getUid("delegate"), function $CPTabView__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPTabView__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate == aDelegate)
        return;
    self._delegate = aDelegate;
    self._delegateSelectors = 0;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tabView:shouldSelectTabViewItem:")))
        self._delegateSelectors |= CPTabViewShouldSelectTabViewItemSelector;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tabView:willSelectTabViewItem:")))
        self._delegateSelectors |= CPTabViewWillSelectTabViewItemSelector;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tabView:didSelectTabViewItem:")))
        self._delegateSelectors |= CPTabViewDidSelectTabViewItemSelector;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("tabViewDidChangeNumberOfTabViewItems:")))
        self._delegateSelectors |= CPTabViewDidChangeNumberOfTabViewItemsSelector;
}
,["void","id"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPTabView__setBackgroundColor_(self, _cmd, aColor)
{
    objj_msgSend(self._box, "setBackgroundColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("backgroundColor"), function $CPTabView__backgroundColor(self, _cmd)
{
    return objj_msgSend(self._box, "backgroundColor");
}
,["CPColor"]), new objj_method(sel_getUid("mouseDown:"), function $CPTabView__mouseDown_(self, _cmd, anEvent)
{
    var segmentIndex = objj_msgSend(self._tabs, "testSegment:", objj_msgSend(self._tabs, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil));
    if (segmentIndex != CPNotFound && objj_msgSend(self, "selectTabViewItemAtIndex:", segmentIndex))
        objj_msgSend(self._tabs, "trackSegment:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_repositionTabs"), function $CPTabView___repositionTabs(self, _cmd)
{
    var horizontalCenterOfSelf = CGRectGetWidth(objj_msgSend(self, "bounds")) / 2,
        verticalCenterOfTabs = CGRectGetHeight(objj_msgSend(self._tabs, "bounds")) / 2;
    if (self._type === CPBottomTabsBezelBorder)
        objj_msgSend(self._tabs, "setCenter:", CGPointMake(horizontalCenterOfSelf, CGRectGetHeight(objj_msgSend(self, "bounds")) - verticalCenterOfTabs));
    else
        objj_msgSend(self._tabs, "setCenter:", CGPointMake(horizontalCenterOfSelf, verticalCenterOfTabs));
}
,["void"]), new objj_method(sel_getUid("_setSelectedIndex:"), function $CPTabView___setSelectedIndex_(self, _cmd, index)
{
    self._selectedIndex = index;
    objj_msgSend(self, "_setContentViewFromItem:", objj_msgSend(self._items, "objectAtIndex:", self._selectedIndex));
}
,["void","CPNumber"]), new objj_method(sel_getUid("_setContentViewFromItem:"), function $CPTabView___setContentViewFromItem_(self, _cmd, anItem)
{
    objj_msgSend(self._box, "setContentView:", objj_msgSend(anItem, "view"));
}
,["void","CPTabViewItem"]), new objj_method(sel_getUid("_updateItems"), function $CPTabView___updateItems(self, _cmd)
{
    var count = objj_msgSend(self._items, "count");
    objj_msgSend(self._tabs, "setSegmentCount:", count);
    for (var i = 0; i < count; i++)
    {
        objj_msgSend(self._tabs, "setLabel:forSegment:", objj_msgSend(objj_msgSend(self._items, "objectAtIndex:", i), "label"), i);
        objj_msgSend(self._tabs, "setTag:forSegment:", i, i);
    }
    if (self._selectedIndex === CPNotFound)
        objj_msgSend(self, "selectFirstTabViewItem:", self);
}
,["void"])]);
}var CPTabViewItemsKey = "CPTabViewItemsKey",
    CPTabViewSelectedItemKey = "CPTabViewSelectedItemKey",
    CPTabViewTypeKey = "CPTabViewTypeKey",
    CPTabViewFontKey = "CPTabViewFontKey",
    CPTabViewDelegateKey = "CPTabViewDelegateKey";
{
var the_class = objj_getClass("CPTabView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTabView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTabView__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTabView").super_class }, "initWithCoder:", aCoder))
    {
        objj_msgSend(self, "_init");
        self._font = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewFontKey);
        objj_msgSend(self._tabs, "setFont:", self._font);
        self._items = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewItemsKey);
        objj_msgSend(self._items, "makeObjectsPerformSelector:withObject:", sel_getUid("_setTabView:"), self);
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewDelegateKey));
        self.selectOnAwake = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewSelectedItemKey);
        self._type = objj_msgSend(aCoder, "decodeIntForKey:", CPTabViewTypeKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("awakeFromCib"), function $CPTabView__awakeFromCib(self, _cmd)
{
    objj_msgSend(self, "_updateItems");
    if (self.selectOnAwake)
    {
        objj_msgSend(self, "selectTabViewItem:", self.selectOnAwake);
        delete self.selectOnAwake;
    }
    var type = self._type;
    self._type = nil;
    objj_msgSend(self, "setTabViewType:", type);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTabView__encodeWithCoder_(self, _cmd, aCoder)
{
    var subviews = objj_msgSend(self, "subviews");
    objj_msgSend(self._box, "removeFromSuperview");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTabView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(self, "setSubviews:", subviews);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._items, CPTabViewItemsKey);
    var selected = objj_msgSend(self, "selectedTabViewItem");
    if (selected)
        objj_msgSend(aCoder, "encodeObject:forKey:", selected, CPTabViewSelectedItemKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._type, CPTabViewTypeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._font, CPTabViewFontKey);
    objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._delegate, CPTabViewDelegateKey);
}
,["void","CPCoder"])]);
}p;15;CPTabViewItem.jt;4403;@STATIC;1.0;I;21;Foundation/CPObject.ji;8;CPView.jt;4346;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPView.j", YES);CPSelectedTab = 0;
CPBackgroundTab = 1;
CPPressedTab = 2;
{var the_class = objj_allocateClassPair(CPObject, "CPTabViewItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_identifier"), new objj_ivar("_label"), new objj_ivar("_view"), new objj_ivar("_auxiliaryView"), new objj_ivar("_tabView"), new objj_ivar("_tabState")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPTabViewItem__init(self, _cmd)
{
    return objj_msgSend(self, "initWithIdentifier:", "");
}
,["id"]), new objj_method(sel_getUid("initWithIdentifier:"), function $CPTabViewItem__initWithIdentifier_(self, _cmd, anIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTabViewItem").super_class }, "init");
    if (self)
        self._identifier = anIdentifier;
    return self;
}
,["id","id"]), new objj_method(sel_getUid("setLabel:"), function $CPTabViewItem__setLabel_(self, _cmd, aLabel)
{
    self._label = aLabel;
}
,["void","CPString"]), new objj_method(sel_getUid("label"), function $CPTabViewItem__label(self, _cmd)
{
    return self._label;
}
,["CPString"]), new objj_method(sel_getUid("tabState"), function $CPTabViewItem__tabState(self, _cmd)
{
    return self._tabState;
}
,["CPTabState"]), new objj_method(sel_getUid("setIdentifier:"), function $CPTabViewItem__setIdentifier_(self, _cmd, anIdentifier)
{
    self._identifier = anIdentifier;
}
,["void","id"]), new objj_method(sel_getUid("identifier"), function $CPTabViewItem__identifier(self, _cmd)
{
    return self._identifier;
}
,["id"]), new objj_method(sel_getUid("setView:"), function $CPTabViewItem__setView_(self, _cmd, aView)
{
    if (self._view == aView)
        return;
    self._view = aView;
    if (objj_msgSend(self._tabView, "selectedTabViewItem") == self)
        objj_msgSend(self._tabView, "_setContentViewFromItem:", self);
}
,["void","CPView"]), new objj_method(sel_getUid("view"), function $CPTabViewItem__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("setAuxiliaryView:"), function $CPTabViewItem__setAuxiliaryView_(self, _cmd, anAuxiliaryView)
{
    self._auxiliaryView = anAuxiliaryView;
}
,["void","CPView"]), new objj_method(sel_getUid("auxiliaryView"), function $CPTabViewItem__auxiliaryView(self, _cmd)
{
    return self._auxiliaryView;
}
,["CPView"]), new objj_method(sel_getUid("tabView"), function $CPTabViewItem__tabView(self, _cmd)
{
    return self._tabView;
}
,["CPTabView"]), new objj_method(sel_getUid("_setTabView:"), function $CPTabViewItem___setTabView_(self, _cmd, aView)
{
    self._tabView = aView;
}
,["void","CPTabView"])]);
}var CPTabViewItemIdentifierKey = "CPTabViewItemIdentifierKey",
    CPTabViewItemLabelKey = "CPTabViewItemLabelKey",
    CPTabViewItemViewKey = "CPTabViewItemViewKey",
    CPTabViewItemAuxViewKey = "CPTabViewItemAuxViewKey";
{
var the_class = objj_getClass("CPTabViewItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTabViewItem\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTabViewItem__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTabViewItem").super_class }, "init");
    if (self)
    {
        self._identifier = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewItemIdentifierKey);
        self._label = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewItemLabelKey);
        self._view = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewItemViewKey);
        self._auxiliaryView = objj_msgSend(aCoder, "decodeObjectForKey:", CPTabViewItemAuxViewKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTabViewItem__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._identifier, CPTabViewItemIdentifierKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._label, CPTabViewItemLabelKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._view, CPTabViewItemViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._auxiliaryView, CPTabViewItemAuxViewKey);
}
,["void","CPCoder"])]);
}p;8;CPText.jt;269;@STATIC;1.0;t;251;CPEnterCharacter = "\u0003";
CPBackspaceCharacter = "\u0008";
CPTabCharacter = "\u0009";
CPNewlineCharacter = "\u000a";
CPFormFeedCharacter = "\u000c";
CPCarriageReturnCharacter = "\u000d";
CPBackTabCharacter = "\u0019";
CPDeleteCharacter = "\u007f";
p;13;CPTextField.jt;64058;@STATIC;1.0;i;11;CPControl.ji;17;CPStringDrawing.ji;17;CPCompatibility.ji;8;CPText.ji;20;CPWindow_Constants.ji;21;_CPImageAndTextView.jt;63915;objj_executeFile("CPControl.j", YES);objj_executeFile("CPStringDrawing.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("_CPImageAndTextView.j", YES);CPTextFieldSquareBezel = 0;
CPTextFieldRoundedBezel = 1;
CPTextFieldDidFocusNotification = "CPTextFieldDidFocusNotification";
CPTextFieldDidBlurNotification = "CPTextFieldDidBlurNotification";
var CPTextFieldDOMInputElement = nil,
    CPTextFieldDOMPasswordInputElement = nil,
    CPTextFieldDOMStandardInputElement = nil,
    CPTextFieldInputOwner = nil,
    CPTextFieldTextDidChangeValue = nil,
    CPTextFieldInputResigning = NO,
    CPTextFieldInputDidBlur = NO,
    CPTextFieldInputIsActive = NO,
    CPTextFieldCachedSelectStartFunction = nil,
    CPTextFieldCachedDragFunction = nil,
    CPTextFieldBlurHandler = nil,
    CPTextFieldInputFunction = nil;
var CPSecureTextFieldCharacter = "\u2022";
CPTextFieldBlurFunction = function(anEvent, owner, domElement, inputElement, resigning, didBlurRef)
{
    if (owner && domElement != inputElement.parentNode)
        return;
    var ownerWindow = objj_msgSend(owner, "window");
    if (!resigning && objj_msgSend(ownerWindow, "isKeyWindow"))
    {
        if (objj_msgSend(owner, "_isWithinUsablePlatformRect"))
        {
            window.setTimeout(function()
            {
                inputElement.focus();
            }, 0.0);
        }
    }
    CPTextFieldHandleBlur(anEvent, function(__input) { if (arguments.length) return owner = __input; return owner; });
    (didBlurRef)(YES);
    return true;
}
CPTextFieldHandleBlur = function(anEvent, ownerRef)
{
    (ownerRef)(nil);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
{
var the_class = objj_getClass("CPString")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPString\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("string"), function $CPString__string(self, _cmd)
{
    return self;
}
,["CPString"])]);
}CPTextFieldStateRounded = CPThemeState("rounded");
CPTextFieldStatePlaceholder = CPThemeState("placeholder");
{var the_class = objj_allocateClassPair(CPControl, "CPTextField"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isEditing"), new objj_ivar("_isEditable"), new objj_ivar("_isSelectable"), new objj_ivar("_isSecure"), new objj_ivar("_willBecomeFirstResponderByClick"), new objj_ivar("_drawsBackground"), new objj_ivar("_textFieldBackgroundColor"), new objj_ivar("_placeholderString"), new objj_ivar("_stringValue"), new objj_ivar("_delegate"), new objj_ivar("_bezelStyle"), new objj_ivar("_isBordered"), new objj_ivar("_controlSize")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_inputElement"), function $CPTextField___inputElement(self, _cmd)
{
    if (!CPTextFieldDOMInputElement)
    {
        CPTextFieldDOMInputElement = document.createElement("input");
        CPTextFieldDOMInputElement.style.position = "absolute";
        CPTextFieldDOMInputElement.style.border = "0px";
        CPTextFieldDOMInputElement.style.padding = "0px";
        CPTextFieldDOMInputElement.style.margin = "0px";
        CPTextFieldDOMInputElement.style.whiteSpace = "pre";
        CPTextFieldDOMInputElement.style.background = "transparent";
        CPTextFieldDOMInputElement.style.outline = "none";
        CPTextFieldBlurHandler = function(anEvent)
        {
            return CPTextFieldBlurFunction(anEvent, CPTextFieldInputOwner, CPTextFieldInputOwner ? CPTextFieldInputOwner._DOMElement : nil, CPTextFieldDOMInputElement, CPTextFieldInputResigning, function(__input) { if (arguments.length) return CPTextFieldInputDidBlur = __input; return CPTextFieldInputDidBlur; });
        };
        if (CPFeatureIsCompatible(CPInputOnInputEventFeature))
        {
            CPTextFieldInputFunction = function(anEvent)
            {
                if (!CPTextFieldInputOwner)
                    return;
                var cappEvent = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPKeyUp, CGPointMakeZero(), 0, objj_msgSend(CPEvent, "currentTimestamp"), objj_msgSend(objj_msgSend(CPApp, "keyWindow"), "windowNumber"), nil, nil, nil, NO, nil);
                objj_msgSend(CPTextFieldInputOwner, "keyUp:", cappEvent);
                objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
            };
            CPTextFieldDOMInputElement.oninput = CPTextFieldInputFunction;
        }
        CPTextFieldDOMInputElement.onblur = CPTextFieldBlurHandler;
        CPTextFieldDOMStandardInputElement = CPTextFieldDOMInputElement;
    }
    if (CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature))
    {
        if (objj_msgSend(self, "isSecure"))
            CPTextFieldDOMInputElement.type = "password";
        else
            CPTextFieldDOMInputElement.type = "text";
        return CPTextFieldDOMInputElement;
    }
    if (objj_msgSend(self, "isSecure"))
    {
        if (!CPTextFieldDOMPasswordInputElement)
        {
            CPTextFieldDOMPasswordInputElement = document.createElement("input");
            CPTextFieldDOMPasswordInputElement.style.position = "absolute";
            CPTextFieldDOMPasswordInputElement.style.border = "0px";
            CPTextFieldDOMPasswordInputElement.style.padding = "0px";
            CPTextFieldDOMPasswordInputElement.style.margin = "0px";
            CPTextFieldDOMPasswordInputElement.style.whiteSpace = "pre";
            CPTextFieldDOMPasswordInputElement.style.background = "transparent";
            CPTextFieldDOMPasswordInputElement.style.outline = "none";
            CPTextFieldDOMPasswordInputElement.type = "password";
            CPTextFieldDOMPasswordInputElement.onblur = CPTextFieldBlurHandler;
        }
        CPTextFieldDOMInputElement = CPTextFieldDOMPasswordInputElement;
    }
    else
    {
        CPTextFieldDOMInputElement = CPTextFieldDOMStandardInputElement;
    }
    return CPTextFieldDOMInputElement;
}
,["DOMElement"]), new objj_method(sel_getUid("initWithFrame:"), function $CPTextField__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        objj_msgSend(self, "setStringValue:", "");
        objj_msgSend(self, "setPlaceholderString:", "");
        self._sendActionOn = CPKeyUpMask | CPKeyDownMask;
        objj_msgSend(self, "setValue:forThemeAttribute:", CPLeftTextAlignment, "alignment");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setEditable:"), function $CPTextField__setEditable_(self, _cmd, shouldBeEditable)
{
    if (self._isEditable === shouldBeEditable)
        return;
    self._isEditable = shouldBeEditable;
    if (shouldBeEditable)
        self._isSelectable = YES;
    if (self._isEditable)
        objj_msgSend(self, "setThemeState:", CPThemeStateEditable);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateEditable);
    if (!(shouldBeEditable && !objj_msgSend(self, "isSelectable")) && objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", nil);
    if (shouldBeEditable)
        objj_msgSend(self, "setThemeState:", CPThemeStateEditable);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateEditable);
}
,["void","BOOL"]), new objj_method(sel_getUid("isEditable"), function $CPTextField__isEditable(self, _cmd)
{
    return self._isEditable;
}
,["BOOL"]), new objj_method(sel_getUid("setEnabled:"), function $CPTextField__setEnabled_(self, _cmd, shouldBeEnabled)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "setEnabled:", shouldBeEnabled);
    if (!shouldBeEnabled && objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", nil);
}
,["void","BOOL"]), new objj_method(sel_getUid("setSelectable:"), function $CPTextField__setSelectable_(self, _cmd, aFlag)
{
    self._isSelectable = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("isSelectable"), function $CPTextField__isSelectable(self, _cmd)
{
    return self._isSelectable;
}
,["BOOL"]), new objj_method(sel_getUid("setSecure:"), function $CPTextField__setSecure_(self, _cmd, aFlag)
{
    self._isSecure = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("isSecure"), function $CPTextField__isSecure(self, _cmd)
{
    return self._isSecure;
}
,["BOOL"]), new objj_method(sel_getUid("setBezeled:"), function $CPTextField__setBezeled_(self, _cmd, shouldBeBezeled)
{
    if (shouldBeBezeled)
        objj_msgSend(self, "setThemeState:", CPThemeStateBezeled);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBezeled);
}
,["void","BOOL"]), new objj_method(sel_getUid("isBezeled"), function $CPTextField__isBezeled(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBezeled);
}
,["BOOL"]), new objj_method(sel_getUid("setBezelStyle:"), function $CPTextField__setBezelStyle_(self, _cmd, aBezelStyle)
{
    var shouldBeRounded = aBezelStyle === CPTextFieldRoundedBezel;
    if (shouldBeRounded)
        objj_msgSend(self, "setThemeState:", CPTextFieldStateRounded);
    else
        objj_msgSend(self, "unsetThemeState:", CPTextFieldStateRounded);
}
,["void","CPTextFieldBezelStyle"]), new objj_method(sel_getUid("bezelStyle"), function $CPTextField__bezelStyle(self, _cmd)
{
    if (objj_msgSend(self, "hasThemeState:", CPTextFieldStateRounded))
        return CPTextFieldRoundedBezel;
    return CPTextFieldSquareBezel;
}
,["CPTextFieldBezelStyle"]), new objj_method(sel_getUid("setBordered:"), function $CPTextField__setBordered_(self, _cmd, shouldBeBordered)
{
    if (shouldBeBordered)
        objj_msgSend(self, "setThemeState:", CPThemeStateBordered);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBordered);
}
,["void","BOOL"]), new objj_method(sel_getUid("isBordered"), function $CPTextField__isBordered(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBordered);
}
,["BOOL"]), new objj_method(sel_getUid("setDrawsBackground:"), function $CPTextField__setDrawsBackground_(self, _cmd, shouldDrawBackground)
{
    if (self._drawsBackground == shouldDrawBackground)
        return;
    self._drawsBackground = shouldDrawBackground;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","BOOL"]), new objj_method(sel_getUid("drawsBackground"), function $CPTextField__drawsBackground(self, _cmd)
{
    return self._drawsBackground;
}
,["BOOL"]), new objj_method(sel_getUid("setTextFieldBackgroundColor:"), function $CPTextField__setTextFieldBackgroundColor_(self, _cmd, aColor)
{
    if (self._textFieldBackgroundColor == aColor)
        return;
    self._textFieldBackgroundColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPColor"]), new objj_method(sel_getUid("textFieldBackgroundColor"), function $CPTextField__textFieldBackgroundColor(self, _cmd)
{
    return self._textFieldBackgroundColor;
}
,["CPColor"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPTextField__acceptsFirstResponder(self, _cmd)
{
    return (objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable") || objj_msgSend(self, "isSelectable")) && objj_msgSend(self, "_isWithinUsablePlatformRect");
}
,["BOOL"]), new objj_method(sel_getUid("becomeFirstResponder"), function $CPTextField__becomeFirstResponder(self, _cmd)
{
    if (!objj_msgSend(self, "isEnabled"))
        return NO;
    objj_msgSend(self, "_setObserveWindowKeyNotifications:", YES);
    self._isEditing = NO;
    if (objj_msgSend(objj_msgSend(self, "window"), "isKeyWindow") && objj_msgSend(self, "isEditable"))
        return objj_msgSend(self, "_becomeFirstKeyResponder");
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_becomeFirstKeyResponder"), function $CPTextField___becomeFirstKeyResponder(self, _cmd)
{
    if (!objj_msgSend(self, "_isWithinUsablePlatformRect"))
        return NO;
    if (!objj_msgSend(self, "isEditable"))
        return NO;
    objj_msgSend(self, "setThemeState:", CPThemeStateEditing);
    objj_msgSend(self, "_updatePlaceholderState");
    objj_msgSend(self, "setNeedsLayout");
    self._stringValue = objj_msgSend(self, "stringValue");
    var element = objj_msgSend(self, "_inputElement"),
        font = objj_msgSend(self, "currentValueForThemeAttribute:", "font"),
        lineHeight = objj_msgSend(font, "defaultLineHeightForFont");
    element.value = self._stringValue;
    element.style.color = objj_msgSend(objj_msgSend(self, "currentValueForThemeAttribute:", "text-color"), "cssString");
    if (CPFeatureIsCompatible(CPInputSetFontOutsideOfDOM))
        element.style.font = objj_msgSend(font, "cssString");
    element.style.zIndex = 1000;
    switch(objj_msgSend(self, "alignment")) {
    case CPCenterTextAlignment:
        element.style.textAlign = "center";
        break;
    case CPRightTextAlignment:
        element.style.textAlign = "right";
        break;
default:
        element.style.textAlign = "left";
    }
    var contentRect = objj_msgSend(self, "contentRectForBounds:", objj_msgSend(self, "bounds")),
        verticalAlign = objj_msgSend(self, "currentValueForThemeAttribute:", "vertical-alignment");
    switch(verticalAlign) {
    case CPTopVerticalTextAlignment:
        var topPoint = CGRectGetMinY(contentRect) + "px";
        break;
    case CPCenterVerticalTextAlignment:
        var topPoint = CGRectGetMidY(contentRect) - lineHeight / 2 + "px";
        break;
    case CPBottomVerticalTextAlignment:
        var topPoint = CGRectGetMaxY(contentRect) - lineHeight + "px";
        break;
default:
        var topPoint = CGRectGetMinY(contentRect) + "px";
        break;
    }
    element.style.top = topPoint;
    var left = CGRectGetMinX(contentRect);
    if (CPFeatureIsCompatible(CPInput1PxLeftPadding))
        left -= 1;
    element.style.left = left + "px";
    element.style.width = CGRectGetWidth(contentRect) + "px";
    element.style.height = ROUND(lineHeight) + "px";
    element.style.lineHeight = ROUND(lineHeight) + "px";
    element.style.verticalAlign = "top";
    element.style.cursor = "auto";
    self._DOMElement.appendChild(element);
    if (!CPFeatureIsCompatible(CPInputSetFontOutsideOfDOM))
        element.style.font = objj_msgSend(font, "cssString");
    CPTextFieldInputIsActive = YES;
    if (document.attachEvent)
    {
        CPTextFieldCachedSelectStartFunction = objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart;
        CPTextFieldCachedDragFunction = objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag;
        objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag = function()
        {
        };
        objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart = function()
        {
        };
    }
    CPTextFieldInputOwner = self;
    window.setTimeout(function()
    {
        if (CPTextFieldInputOwner !== self)
            return;
        element.focus();
        if (!self._willBecomeFirstResponderByClick)
            objj_msgSend(self, "_selectText:immediately:", self, YES);
        self._willBecomeFirstResponderByClick = NO;
        objj_msgSend(self, "textDidFocus:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPTextFieldDidFocusNotification, self, nil));
    }, 0.0);
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPTextField__resignFirstResponder(self, _cmd)
{
    if (self._isEditing && CPTextFieldInputOwner === self)
    {
        var element = objj_msgSend(self, "_inputElement"),
            newValue = element.value,
            error = "";
        if (newValue !== self._stringValue)
        {
            objj_msgSend(self, "_setStringValue:", newValue);
        }
        if (objj_msgSend(self, "_valueIsValid:", newValue) === NO)
        {
            element.focus();
            return NO;
        }
    }
    objj_msgSend(self, "_setObserveWindowKeyNotifications:", NO);
    objj_msgSend(self, "_resignFirstKeyResponder");
    self._isEditing = NO;
    if (objj_msgSend(self, "isEditable"))
    {
        objj_msgSend(self, "textDidEndEditing:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidEndEditingNotification, self, nil));
        if (objj_msgSend(self, "sendsActionOnEndEditing"))
            objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    objj_msgSend(self, "textDidBlur:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPTextFieldDidBlurNotification, self, nil));
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_resignFirstKeyResponder"), function $CPTextField___resignFirstKeyResponder(self, _cmd)
{
    objj_msgSend(self, "unsetThemeState:", CPThemeStateEditing);
    self._stringValue = objj_msgSend(self, "stringValue");
    self._willBecomeFirstResponderByClick = NO;
    objj_msgSend(self, "_updatePlaceholderState");
    objj_msgSend(self, "setNeedsLayout");
    var element = objj_msgSend(self, "_inputElement");
    CPTextFieldInputResigning = YES;
    if (CPTextFieldInputIsActive)
        element.blur();
    if (!CPTextFieldInputDidBlur)
        CPTextFieldBlurHandler();
    CPTextFieldInputDidBlur = NO;
    CPTextFieldInputResigning = NO;
    if (element.parentNode == self._DOMElement)
        element.parentNode.removeChild(element);
    CPTextFieldInputIsActive = NO;
    if (document.attachEvent)
    {
        objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag = CPTextFieldCachedDragFunction;
        objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart = CPTextFieldCachedSelectStartFunction;
        CPTextFieldCachedSelectStartFunction = nil;
        CPTextFieldCachedDragFunction = nil;
    }
}
,["void"]), new objj_method(sel_getUid("_setObserveWindowKeyNotifications:"), function $CPTextField___setObserveWindowKeyNotifications_(self, _cmd, shouldObserve)
{
    if (shouldObserve)
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_windowDidResignKey:"), CPWindowDidResignKeyNotification, objj_msgSend(self, "window"));
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_windowDidBecomeKey:"), CPWindowDidBecomeKeyNotification, objj_msgSend(self, "window"));
    }
    else
    {
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPWindowDidResignKeyNotification, objj_msgSend(self, "window"));
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, CPWindowDidBecomeKeyNotification, objj_msgSend(self, "window"));
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("_windowDidResignKey:"), function $CPTextField___windowDidResignKey_(self, _cmd, aNotification)
{
    if (!objj_msgSend(objj_msgSend(self, "window"), "isKeyWindow"))
        objj_msgSend(self, "_resignFirstKeyResponder");
}
,["void","CPNotification"]), new objj_method(sel_getUid("_windowDidBecomeKey:"), function $CPTextField___windowDidBecomeKey_(self, _cmd, aNotification)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var wind = objj_msgSend(self, "window");
    if (objj_msgSend(wind, "isKeyWindow") && objj_msgSend(wind, "firstResponder") === self)
        if (!objj_msgSend(self, "_becomeFirstKeyResponder"))
            objj_msgSend(wind, "makeFirstResponder:", nil);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_valueIsValid:"), function $CPTextField___valueIsValid_(self, _cmd, aValue)
{
    var error = "";
    if (objj_msgSend(self, "_setStringValue:isNewValue:errorDescription:", aValue, NO, function(__input) { if (arguments.length) return error = __input; return error; }) === NO)
    {
        var acceptInvalidValue = NO;
        if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("control:didFailToFormatString:errorDescription:")))
            acceptInvalidValue = objj_msgSend(self._delegate, "control:didFailToFormatString:errorDescription:", self, aValue, error);
        if (acceptInvalidValue === NO)
            return NO;
    }
    return YES;
}
,["BOOL","CPString"]), new objj_method(sel_getUid("needsPanelToBecomeKey"), function $CPTextField__needsPanelToBecomeKey(self, _cmd)
{
    return objj_msgSend(self, "acceptsFirstResponder");
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstMouse:"), function $CPTextField__acceptsFirstMouse_(self, _cmd, anEvent)
{
    return objj_msgSend(self, "acceptsFirstResponder");
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("_didEdit"), function $CPTextField___didEdit(self, _cmd)
{
    if (!self._isEditing)
    {
        self._isEditing = YES;
        objj_msgSend(self, "textDidBeginEditing:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidBeginEditingNotification, self, nil));
    }
    objj_msgSend(self, "textDidChange:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidChangeNotification, self, nil));
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $CPTextField__mouseDown_(self, _cmd, anEvent)
{
    if (objj_msgSend(self, "isEditable") && objj_msgSend(self, "isEnabled"))
    {
        self._willBecomeFirstResponderByClick = YES;
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
    }
    else if (objj_msgSend(self, "isSelectable"))
    {
        if (document.attachEvent)
        {
            CPTextFieldCachedSelectStartFunction = objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart;
            CPTextFieldCachedDragFunction = objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag;
            objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag = function()
            {
            };
            objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart = function()
            {
            };
        }
        return objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
    else
        return objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $CPTextField__mouseUp_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled") || !(objj_msgSend(self, "isSelectable") || objj_msgSend(self, "isEditable")))
        objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseUp:", anEvent);
    else if (objj_msgSend(self, "isSelectable"))
    {
        if (document.attachEvent)
        {
            objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.ondrag = CPTextFieldCachedDragFunction;
            objj_msgSend(objj_msgSend(self, "window"), "platformWindow")._DOMBodyElement.onselectstart = CPTextFieldCachedSelectStartFunction;
            CPTextFieldCachedSelectStartFunction = nil;
            CPTextFieldCachedDragFunction = nil;
        }
        if (objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "clickCount") === 3)
        {
            objj_msgSend(self, "selectText:", nil);
            return;
        }
        return objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $CPTextField__mouseDragged_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled") || !(objj_msgSend(self, "isSelectable") || objj_msgSend(self, "isEditable")))
        objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseDragged:", anEvent);
    else if (objj_msgSend(self, "isSelectable"))
        return objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyUp:"), function $CPTextField__keyUp_(self, _cmd, anEvent)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var newValue = objj_msgSend(self, "_inputElement").value;
    if (newValue !== self._stringValue)
    {
        objj_msgSend(self, "_setStringValue:", newValue);
        objj_msgSend(self, "_didEdit");
    }
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyDown:"), function $CPTextField__keyDown_(self, _cmd, anEvent)
{
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    objj_msgSend(self, "interpretKeyEvents:", [anEvent]);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void","CPEvent"]), new objj_method(sel_getUid("doCommandBySelector:"), function $CPTextField__doCommandBySelector_(self, _cmd, aSelector)
{
    if (objj_msgSend(self, "respondsToSelector:", aSelector))
        objj_msgSend(self, "performSelector:", aSelector);
}
,["void","SEL"]), new objj_method(sel_getUid("insertNewline:"), function $CPTextField__insertNewline_(self, _cmd, sender)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var newValue = objj_msgSend(self, "_inputElement").value;
    if (newValue !== self._stringValue)
    {
        objj_msgSend(self, "_setStringValue:", newValue);
        objj_msgSend(self, "_didEdit");
    }
    if (objj_msgSend(self, "_valueIsValid:", self._stringValue))
    {
        if (self._isEditing)
        {
            self._isEditing = NO;
            objj_msgSend(self, "textDidEndEditing:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidEndEditingNotification, self, nil));
        }
        if (!objj_msgSend(self, "action") || objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target")))
        {
            objj_msgSend(self, "selectAll:", nil);
        }
    }
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("insertNewlineIgnoringFieldEditor:"), function $CPTextField__insertNewlineIgnoringFieldEditor_(self, _cmd, sender)
{
    objj_msgSend(self, "_insertCharacterIgnoringFieldEditor:", CPNewlineCharacter);
}
,["void","id"]), new objj_method(sel_getUid("insertTabIgnoringFieldEditor:"), function $CPTextField__insertTabIgnoringFieldEditor_(self, _cmd, sender)
{
    objj_msgSend(self, "_insertCharacterIgnoringFieldEditor:", CPTabCharacter);
}
,["void","id"]), new objj_method(sel_getUid("_insertCharacterIgnoringFieldEditor:"), function $CPTextField___insertCharacterIgnoringFieldEditor_(self, _cmd, aCharacter)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var oldValue = self._stringValue,
        range = objj_msgSend(self, "selectedRange"),
        element = objj_msgSend(self, "_inputElement");
    element.value = objj_msgSend(element.value, "stringByReplacingCharactersInRange:withString:", objj_msgSend(self, "selectedRange"), aCharacter);
    objj_msgSend(self, "_setStringValue:", element.value);
    if (oldValue !== self._stringValue)
    {
        objj_msgSend(self, "_didEdit");
    }
}
,["void","CPString"]), new objj_method(sel_getUid("textDidBlur:"), function $CPTextField__textDidBlur_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") != self)
        return;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotification:", note);
}
,["void","CPNotification"]), new objj_method(sel_getUid("textDidFocus:"), function $CPTextField__textDidFocus_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") != self)
        return;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotification:", note);
}
,["void","CPNotification"]), new objj_method(sel_getUid("textDidChange:"), function $CPTextField__textDidChange_(self, _cmd, note)
{
    if (objj_msgSend(note, "object") !== self)
        return;
    objj_msgSend(self, "_continuouslyReverseSetBinding");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "textDidChange:", note);
}
,["void","CPNotification"]), new objj_method(sel_getUid("objectValue"), function $CPTextField__objectValue(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "objectValue");
}
,["id"]), new objj_method(sel_getUid("_setStringValue:"), function $CPTextField___setStringValue_(self, _cmd, aValue)
{
    return objj_msgSend(self, "_setStringValue:isNewValue:errorDescription:", aValue, YES, nil);
}
,["BOOL","CPString"]), new objj_method(sel_getUid("_setStringValue:isNewValue:errorDescription:"), function $CPTextField___setStringValue_isNewValue_errorDescription_(self, _cmd, aValue, isNewValue, anError)
{
    self._stringValue = aValue;
    var objectValue = aValue,
        formatter = objj_msgSend(self, "formatter"),
        result = YES;
    if (formatter)
    {
        var object = nil;
        if (objj_msgSend(formatter, "getObjectValue:forString:errorDescription:", function(__input) { if (arguments.length) return object = __input; return object; }, aValue, anError))
            objectValue = object;
        else
        {
            objectValue = undefined;
            result = NO;
        }
        isNewValue |= objectValue !== objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "objectValue");
    }
    if (isNewValue)
    {
        objj_msgSend(self, "willChangeValueForKey:", "objectValue");
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "setObjectValue:", objectValue);
        objj_msgSend(self, "_updatePlaceholderState");
        objj_msgSend(self, "didChangeValueForKey:", "objectValue");
    }
    return result;
}
,["BOOL","CPString","BOOL","CPStringRef"]), new objj_method(sel_getUid("setObjectValue:"), function $CPTextField__setObjectValue_(self, _cmd, aValue)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "setObjectValue:", aValue);
    var formatter = objj_msgSend(self, "formatter");
    if (formatter)
    {
        var formattedString = objj_msgSend(self, "hasThemeState:", CPThemeStateEditing) ? objj_msgSend(formatter, "editingStringForObjectValue:", aValue) : objj_msgSend(formatter, "stringForObjectValue:", aValue);
        if (formattedString === nil)
        {
            var value = nil;
            if (objj_msgSend(formatter, "getObjectValue:forString:errorDescription:", function(__input) { if (arguments.length) return value = __input; return value; }, "", nil) === NO)
                value = undefined;
            objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "setObjectValue:", value);
            self._stringValue = value === nil || value === undefined ? "" : String(value);
        }
        else
            self._stringValue = formattedString;
    }
    else
        self._stringValue = objj_msgSend(self, "stringValue");
    if (CPTextFieldInputOwner === self || objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        objj_msgSend(self, "_inputElement").value = self._stringValue;
    objj_msgSend(self, "_updatePlaceholderState");
}
,["void","id"]), new objj_method(sel_getUid("_updatePlaceholderState"), function $CPTextField___updatePlaceholderState(self, _cmd)
{
    if ((!self._stringValue || self._stringValue.length === 0) && !objj_msgSend(self, "hasThemeState:", CPThemeStateEditing))
        objj_msgSend(self, "setThemeState:", CPTextFieldStatePlaceholder);
    else
        objj_msgSend(self, "unsetThemeState:", CPTextFieldStatePlaceholder);
}
,["void"]), new objj_method(sel_getUid("setPlaceholderString:"), function $CPTextField__setPlaceholderString_(self, _cmd, aStringValue)
{
    if (self._placeholderString === aStringValue)
        return;
    self._placeholderString = aStringValue;
    if (objj_msgSend(self, "hasThemeState:", CPTextFieldStatePlaceholder))
    {
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
}
,["void","CPString"]), new objj_method(sel_getUid("placeholderString"), function $CPTextField__placeholderString(self, _cmd)
{
    return self._placeholderString;
}
,["CPString"]), new objj_method(sel_getUid("sizeToFit"), function $CPTextField__sizeToFit(self, _cmd)
{
    objj_msgSend(self, "setFrameSize:", objj_msgSend(self, "_minimumFrameSize"));
}
,["void"]), new objj_method(sel_getUid("_minimumFrameSize"), function $CPTextField___minimumFrameSize(self, _cmd)
{
    var frameSize = objj_msgSend(self, "frameSize"),
        contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset"),
        minSize = objj_msgSend(self, "currentValueForThemeAttribute:", "min-size"),
        maxSize = objj_msgSend(self, "currentValueForThemeAttribute:", "max-size"),
        lineBreakMode = objj_msgSend(self, "lineBreakMode"),
        text = self._stringValue || " ",
        textSize = CGSizeMakeCopy(frameSize),
        font = objj_msgSend(self, "currentValueForThemeAttribute:", "font");
    textSize.width -= contentInset.left + contentInset.right;
    textSize.height -= contentInset.top + contentInset.bottom;
    if (frameSize.width !== 0 && !objj_msgSend(self, "isBezeled") && (lineBreakMode === CPLineBreakByWordWrapping || lineBreakMode === CPLineBreakByCharWrapping))
    {
        textSize = objj_msgSend(text, "sizeWithFont:inWidth:", font, textSize.width);
    }
    else
    {
        textSize = objj_msgSend(text, "sizeWithFont:", font);
        textSize.width += 1;
    }
    textSize.height += 1;
    frameSize.height = textSize.height + contentInset.top + contentInset.bottom;
    if (objj_msgSend(self, "isBezeled"))
    {
        frameSize.height = MAX(frameSize.height, minSize.height);
        if (maxSize.width > 0.0)
            frameSize.width = MIN(frameSize.width, maxSize.width);
        if (maxSize.height > 0.0)
            frameSize.height = MIN(frameSize.height, maxSize.height);
    }
    else
        frameSize.width = textSize.width + contentInset.left + contentInset.right;
    frameSize.width = MAX(frameSize.width, minSize.width);
    return frameSize;
}
,["CGSize"]), new objj_method(sel_getUid("selectText:"), function $CPTextField__selectText_(self, _cmd, sender)
{
    objj_msgSend(self, "_selectText:immediately:", sender, NO);
}
,["void","id"]), new objj_method(sel_getUid("_selectText:immediately:"), function $CPTextField___selectText_immediately_(self, _cmd, sender, immediately)
{
    if (objj_msgSend(self, "isEditable") || objj_msgSend(self, "isSelectable"))
    {
        var wind = objj_msgSend(self, "window");
        if (objj_msgSend(self, "isEditable"))
        {
            var element = objj_msgSend(self, "_inputElement");
            if (objj_msgSend(wind, "firstResponder") === self)
            {
                if (immediately)
                    element.select();
                else
                    window.setTimeout(function()
                    {
                        element.select();
                    }, 0);
            }
            else if (wind !== nil && objj_msgSend(wind, "makeFirstResponder:", self))
                objj_msgSend(self, "_selectText:immediately:", sender, immediately);
        }
        else
        {
            objj_msgSend(self, "setSelectedRange:", CPMakeRange(0, self._stringValue.length));
        }
    }
}
,["void","id","BOOL"]), new objj_method(sel_getUid("copy:"), function $CPTextField__copy_(self, _cmd, sender)
{
    var stringToCopy = nil;
    if (objj_msgSend(self, "isEditable"))
    {
        var selectedRange = objj_msgSend(self, "selectedRange");
        if (selectedRange.length < 1)
            return;
        stringToCopy = objj_msgSend(self._stringValue, "substringWithRange:", selectedRange);
    }
    else
    {
        stringToCopy = objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_selectedText");
    }
    var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard");
    objj_msgSend(pasteboard, "declareTypes:owner:", [CPStringPboardType], nil);
    objj_msgSend(pasteboard, "setString:forType:", stringToCopy, CPStringPboardType);
    if (objj_msgSend(CPPlatform, "isBrowser"))
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("cut:"), function $CPTextField__cut_(self, _cmd, sender)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSend(self, "copy:", sender);
    if (!objj_msgSend(self, "isEditable"))
        return;
    if (!objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "_platformIsEffectingCutOrPaste"))
    {
        objj_msgSend(self, "deleteBackward:", sender);
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
        if (!CPFeatureIsCompatible(CPInputOnInputEventFeature))
            objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("keyUp:"), nil, NO);
    }
}
,["void","id"]), new objj_method(sel_getUid("paste:"), function $CPTextField__paste_(self, _cmd, sender)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    if (!objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "_platformIsEffectingCutOrPaste"))
    {
        var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard");
        if (!objj_msgSend(objj_msgSend(pasteboard, "types"), "containsObject:", CPStringPboardType))
            return;
        objj_msgSend(self, "deleteBackward:", sender);
        var selectedRange = objj_msgSend(self, "selectedRange"),
            pasteString = objj_msgSend(pasteboard, "stringForType:", CPStringPboardType),
            newValue = objj_msgSend(self._stringValue, "stringByReplacingCharactersInRange:withString:", selectedRange, pasteString);
        objj_msgSend(self, "setStringValue:", newValue);
        objj_msgSend(self, "_didEdit");
        objj_msgSend(self, "setSelectedRange:", CPMakeRange(selectedRange.location + pasteString.length, 0));
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
        if (!CPFeatureIsCompatible(CPInputOnInputEventFeature))
            objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("keyUp:"), nil, NO);
    }
}
,["void","id"]), new objj_method(sel_getUid("selectedRange"), function $CPTextField__selectedRange(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") !== self)
        return CPMakeRange(0, 0);
    try    {
        var inputElement = objj_msgSend(self, "_inputElement"),
            selectionStart = inputElement.selectionStart,
            selectionEnd = inputElement.selectionEnd;
        if (objj_msgSend(selectionStart, "isKindOfClass:", CPNumber))
            return CPMakeRange(selectionStart, selectionEnd - selectionStart);
        var theDocument = inputElement.ownerDocument || inputElement.document,
            selectionRange = theDocument.selection.createRange(),
            range = inputElement.createTextRange();
        if (range.inRange(selectionRange))
        {
            range.setEndPoint('EndToStart', selectionRange);
            return CPMakeRange(range.text.length, selectionRange.text.length);
        }
    }
    catch(e)     {
    }    return CPMakeRange(0, 0);
}
,["CPRange"]), new objj_method(sel_getUid("setSelectedRange:"), function $CPTextField__setSelectedRange_(self, _cmd, aRange)
{
    if (!objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        return;
    if (!objj_msgSend(self, "isEditable"))
    {
        var contentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-view", CPWindowAbove, "bezel-view");
        if (contentView)
            objj_msgSend(contentView, "setSelectedRange:", aRange);
    }
    else
    {
        var inputElement = objj_msgSend(self, "_inputElement");
        try        {
            if (objj_msgSend(inputElement.selectionStart, "isKindOfClass:", CPNumber))
            {
                inputElement.selectionStart = aRange.location;
                inputElement.selectionEnd = CPMaxRange(aRange);
            }
            else
            {
                var theDocument = inputElement.ownerDocument || inputElement.document,
                    existingRange = theDocument.selection.createRange(),
                    range = inputElement.createTextRange();
                if (range.inRange(existingRange))
                {
                    range.collapse(true);
                    range.move('character', aRange.location);
                    range.moveEnd('character', aRange.length);
                    range.select();
                }
            }
        }
        catch(e)         {
        }    }
}
,["void","CPRange"]), new objj_method(sel_getUid("selectAll:"), function $CPTextField__selectAll_(self, _cmd, sender)
{
    objj_msgSend(self, "selectText:", sender);
}
,["void","id"]), new objj_method(sel_getUid("deleteBackward:"), function $CPTextField__deleteBackward_(self, _cmd, sender)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var selectedRange = objj_msgSend(self, "selectedRange");
    if (selectedRange.length < 1)
    {
        if (selectedRange.location < 1)
            return;
        selectedRange.location -= 1;
        selectedRange.length += 1;
    }
    var newValue = objj_msgSend(self._stringValue, "stringByReplacingCharactersInRange:withString:", selectedRange, "");
    objj_msgSend(self, "setStringValue:", newValue);
    objj_msgSend(self, "setSelectedRange:", CPMakeRange(selectedRange.location, 0));
    objj_msgSend(self, "_didEdit");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("delete:"), function $CPTextField__delete_(self, _cmd, sender)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var selectedRange = objj_msgSend(self, "selectedRange");
    if (selectedRange.length < 1)
        return;
    var newValue = objj_msgSend(self._stringValue, "stringByReplacingCharactersInRange:withString:", selectedRange, "");
    objj_msgSend(self, "setStringValue:", newValue);
    objj_msgSend(self, "setSelectedRange:", CPMakeRange(selectedRange.location, 0));
    objj_msgSend(self, "_didEdit");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("deleteForward:"), function $CPTextField__deleteForward_(self, _cmd, sender)
{
    if (!(objj_msgSend(self, "isEnabled") && objj_msgSend(self, "isEditable")))
        return;
    var selectedRange = objj_msgSend(self, "selectedRange");
    if (selectedRange.length < 1)
    {
        if (selectedRange.location + 1 >= self._stringValue.length)
            return;
        selectedRange.length += 1;
    }
    var newValue = objj_msgSend(self._stringValue, "stringByReplacingCharactersInRange:withString:", selectedRange, "");
    objj_msgSend(self, "setStringValue:", newValue);
    objj_msgSend(self, "setSelectedRange:", CPMakeRange(selectedRange.location, 0));
    objj_msgSend(self, "_didEdit");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("setDelegate:"), function $CPTextField__setDelegate_(self, _cmd, aDelegate)
{
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._delegate)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPControlTextDidBeginEditingNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPControlTextDidChangeNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPControlTextDidEndEditingNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTextFieldDidFocusNotification, self);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPTextFieldDidBlurNotification, self);
    }
    self._delegate = aDelegate;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("controlTextDidBeginEditing:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("controlTextDidBeginEditing:"), CPControlTextDidBeginEditingNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("controlTextDidChange:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("controlTextDidChange:"), CPControlTextDidChangeNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("controlTextDidEndEditing:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("controlTextDidEndEditing:"), CPControlTextDidEndEditingNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("controlTextDidFocus:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("controlTextDidFocus:"), CPTextFieldDidFocusNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("controlTextDidBlur:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("controlTextDidBlur:"), CPTextFieldDidBlurNotification, self);
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPTextField__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("contentRectForBounds:"), function $CPTextField__contentRectForBounds_(self, _cmd, bounds)
{
    var contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    return CGRectInsetByInset(bounds, contentInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("bezelRectForBounds:"), function $CPTextField__bezelRectForBounds_(self, _cmd, bounds)
{
    var bezelInset = objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-inset");
    return CGRectInsetByInset(bounds, bezelInset);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPTextField__rectForEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "bezel-view")
        return objj_msgSend(self, "bezelRectForBounds:", objj_msgSend(self, "bounds"));
    else if (aName === "content-view")
        return objj_msgSend(self, "contentRectForBounds:", objj_msgSend(self, "bounds"));
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "rectForEphemeralSubviewNamed:", aName);
}
,["CGRect","CPString"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPTextField__createEphemeralSubviewNamed_(self, _cmd, aName)
{
    if (aName === "bezel-view")
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(view, "setHitTests:", NO);
        return view;
    }
    else
    {
        var view = objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(view, "setHitTests:", NO);
        return view;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "createEphemeralSubviewNamed:", aName);
}
,["CPView","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $CPTextField__layoutSubviews(self, _cmd)
{
    var bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bezel-view", CPWindowBelow, "content-view");
    if (bezelView)
        objj_msgSend(bezelView, "setBackgroundColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "bezel-color"));
    var contentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-view", CPWindowAbove, "bezel-view");
    if (contentView)
    {
        objj_msgSend(contentView, "setHidden:", objj_msgSend(self, "hasThemeState:", CPThemeStateEditing));
        var string = "";
        if (objj_msgSend(self, "hasThemeState:", CPTextFieldStatePlaceholder))
            string = objj_msgSend(self, "placeholderString");
        else
        {
            string = self._stringValue;
            if (objj_msgSend(self, "isSecure"))
                string = secureStringForString(string);
        }
        objj_msgSend(contentView, "setText:", string);
        objj_msgSend(contentView, "setTextColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-color"));
        objj_msgSend(contentView, "setFont:", objj_msgSend(self, "currentValueForThemeAttribute:", "font"));
        objj_msgSend(contentView, "setAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "alignment"));
        objj_msgSend(contentView, "setVerticalAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "vertical-alignment"));
        objj_msgSend(contentView, "setLineBreakMode:", objj_msgSend(self, "currentValueForThemeAttribute:", "line-break-mode"));
        objj_msgSend(contentView, "setTextShadowColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-color"));
        objj_msgSend(contentView, "setTextShadowOffset:", objj_msgSend(self, "currentValueForThemeAttribute:", "text-shadow-offset"));
    }
}
,["void"]), new objj_method(sel_getUid("takeValueFromKeyPath:ofObjects:"), function $CPTextField__takeValueFromKeyPath_ofObjects_(self, _cmd, aKeyPath, objects)
{
    var count = objects.length,
        value = objj_msgSend(objects[0], "valueForKeyPath:", aKeyPath);
    objj_msgSend(self, "setStringValue:", value);
    objj_msgSend(self, "setPlaceholderString:", "");
    while (count-- > 1)
        if (value !== objj_msgSend(objects[count], "valueForKeyPath:", aKeyPath))
        {
            objj_msgSend(self, "setPlaceholderString:", "Multiple Values");
            objj_msgSend(self, "setStringValue:", "");
        }
}
,["void","CPString","CPArray"]), new objj_method(sel_getUid("viewDidHide"), function $CPTextField__viewDidHide(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "viewDidHide");
    if (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        objj_msgSend(self, "_resignFirstKeyResponder");
}
,["void"]), new objj_method(sel_getUid("viewDidUnhide"), function $CPTextField__viewDidUnhide(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "viewDidUnhide");
    if (objj_msgSend(self, "isEditable") && objj_msgSend(objj_msgSend(self, "window"), "firstResponder") === self)
        objj_msgSend(self, "_becomeFirstKeyResponder");
}
,["void"]), new objj_method(sel_getUid("validateUserInterfaceItem:"), function $CPTextField__validateUserInterfaceItem_(self, _cmd, anItem)
{
    var theAction = objj_msgSend(anItem, "action");
    if (!objj_msgSend(self, "isEditable") && (theAction == sel_getUid("cut:") || theAction == sel_getUid("paste:") || theAction == sel_getUid("delete:")))
        return NO;
    if (!objj_msgSend(self, "isEditable"))
        return YES;
    if (theAction == sel_getUid("copy:") || theAction == sel_getUid("cut:") || theAction == sel_getUid("delete:"))
        return objj_msgSend(self, "selectedRange").length;
    return YES;
}
,["BOOL","id"]), new objj_method(sel_getUid("_isWithinUsablePlatformRect"), function $CPTextField___isWithinUsablePlatformRect(self, _cmd)
{
    var wind = objj_msgSend(self, "window");
    if (!wind)
        return NO;
    var frame = objj_msgSend(self, "convertRectToBase:", objj_msgSend(self, "bounds")),
        usableRect = objj_msgSend(objj_msgSend(wind, "platformWindow"), "usableContentFrame");
    frame.origin = objj_msgSend(wind, "convertBaseToGlobal:", frame.origin);
    return CGRectGetMinX(frame) >= CGRectGetMinX(usableRect) && CGRectGetMaxX(frame) <= CGRectGetMaxX(usableRect) && CGRectGetMinY(frame) >= CGRectGetMinY(usableRect) && CGRectGetMaxY(frame) <= CGRectGetMaxY(usableRect);
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPTextField___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding === CPValueBinding)
        return objj_msgSend(_CPTextFieldValueBinder, "class");
    else if (objj_msgSend(aBinding, "hasPrefix:", CPDisplayPatternValueBinding))
        return objj_msgSend(_CPTextFieldPatternValueBinder, "class");
    else if (objj_msgSend(aBinding, "hasPrefix:", CPEditableBinding))
        return objj_msgSend(CPMultipleValueAndBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPTextField").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:"), function $CPTextField__textFieldWithStringValue_placeholder_width_(self, _cmd, aStringValue, aPlaceholder, aWidth)
{
    return objj_msgSend(self, "textFieldWithStringValue:placeholder:width:theme:", aStringValue, aPlaceholder, aWidth, objj_msgSend(CPTheme, "defaultTheme"));
}
,["CPTextField","CPString","CPString","float"]), new objj_method(sel_getUid("textFieldWithStringValue:placeholder:width:theme:"), function $CPTextField__textFieldWithStringValue_placeholder_width_theme_(self, _cmd, aStringValue, aPlaceholder, aWidth, aTheme)
{
    var textField = objj_msgSend(objj_msgSend(self, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, aWidth, 29.0));
    objj_msgSend(textField, "setTheme:", aTheme);
    objj_msgSend(textField, "setStringValue:", aStringValue);
    objj_msgSend(textField, "setPlaceholderString:", aPlaceholder);
    objj_msgSend(textField, "setBordered:", YES);
    objj_msgSend(textField, "setBezeled:", YES);
    objj_msgSend(textField, "setEditable:", YES);
    objj_msgSend(textField, "sizeToFit");
    return textField;
}
,["CPTextField","CPString","CPString","float","CPTheme"]), new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:"), function $CPTextField__roundedTextFieldWithStringValue_placeholder_width_(self, _cmd, aStringValue, aPlaceholder, aWidth)
{
    return objj_msgSend(self, "roundedTextFieldWithStringValue:placeholder:width:theme:", aStringValue, aPlaceholder, aWidth, objj_msgSend(CPTheme, "defaultTheme"));
}
,["CPTextField","CPString","CPString","float"]), new objj_method(sel_getUid("roundedTextFieldWithStringValue:placeholder:width:theme:"), function $CPTextField__roundedTextFieldWithStringValue_placeholder_width_theme_(self, _cmd, aStringValue, aPlaceholder, aWidth, aTheme)
{
    var textField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, aWidth, 29.0));
    objj_msgSend(textField, "setTheme:", aTheme);
    objj_msgSend(textField, "setStringValue:", aStringValue);
    objj_msgSend(textField, "setPlaceholderString:", aPlaceholder);
    objj_msgSend(textField, "setBezelStyle:", CPTextFieldRoundedBezel);
    objj_msgSend(textField, "setBordered:", YES);
    objj_msgSend(textField, "setBezeled:", YES);
    objj_msgSend(textField, "setEditable:", YES);
    objj_msgSend(textField, "sizeToFit");
    return textField;
}
,["CPTextField","CPString","CPString","float","CPTheme"]), new objj_method(sel_getUid("labelWithTitle:"), function $CPTextField__labelWithTitle_(self, _cmd, aTitle)
{
    return objj_msgSend(self, "labelWithTitle:theme:", aTitle, objj_msgSend(CPTheme, "defaultTheme"));
}
,["CPTextField","CPString"]), new objj_method(sel_getUid("labelWithTitle:theme:"), function $CPTextField__labelWithTitle_theme_(self, _cmd, aTitle, aTheme)
{
    var textField = objj_msgSend(objj_msgSend(self, "alloc"), "init");
    objj_msgSend(textField, "setStringValue:", aTitle);
    objj_msgSend(textField, "sizeToFit");
    return textField;
}
,["CPTextField","CPString","CPTheme"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPTextField__defaultThemeClass(self, _cmd)
{
    return "textfield";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPTextField__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGInsetMakeZero(), "bezel-inset", CGInsetMake(1.0, 0.0, 0.0, 0.0), "content-inset", objj_msgSend(CPNull, "null"), "bezel-color");
}
,["id"])]);
}var secureStringForString = function(aString)
{
    if (!aString)
        return "";
    return (Array(aString.length + 1)).join(CPSecureTextFieldCharacter);
};
var CPTextFieldIsEditableKey = "CPTextFieldIsEditableKey",
    CPTextFieldIsSelectableKey = "CPTextFieldIsSelectableKey",
    CPTextFieldIsBorderedKey = "CPTextFieldIsBorderedKey",
    CPTextFieldIsBezeledKey = "CPTextFieldIsBezeledKey",
    CPTextFieldBezelStyleKey = "CPTextFieldBezelStyleKey",
    CPTextFieldDrawsBackgroundKey = "CPTextFieldDrawsBackgroundKey",
    CPTextFieldLineBreakModeKey = "CPTextFieldLineBreakModeKey",
    CPTextFieldAlignmentKey = "CPTextFieldAlignmentKey",
    CPTextFieldBackgroundColorKey = "CPTextFieldBackgroundColorKey",
    CPTextFieldPlaceholderStringKey = "CPTextFieldPlaceholderStringKey";
{
var the_class = objj_getClass("CPTextField")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTextField\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTextField__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(self, "setEditable:", objj_msgSend(aCoder, "decodeBoolForKey:", CPTextFieldIsEditableKey));
        objj_msgSend(self, "setSelectable:", objj_msgSend(aCoder, "decodeBoolForKey:", CPTextFieldIsSelectableKey));
        objj_msgSend(self, "setDrawsBackground:", objj_msgSend(aCoder, "decodeBoolForKey:", CPTextFieldDrawsBackgroundKey));
        objj_msgSend(self, "setTextFieldBackgroundColor:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTextFieldBackgroundColorKey));
        objj_msgSend(self, "setLineBreakMode:", objj_msgSend(aCoder, "decodeIntForKey:", CPTextFieldLineBreakModeKey));
        objj_msgSend(self, "setAlignment:", objj_msgSend(aCoder, "decodeIntForKey:", CPTextFieldAlignmentKey));
        objj_msgSend(self, "setPlaceholderString:", objj_msgSend(aCoder, "decodeObjectForKey:", CPTextFieldPlaceholderStringKey));
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTextField__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTextField").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isEditable, CPTextFieldIsEditableKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isSelectable, CPTextFieldIsSelectableKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._drawsBackground, CPTextFieldDrawsBackgroundKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._textFieldBackgroundColor, CPTextFieldBackgroundColorKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", objj_msgSend(self, "lineBreakMode"), CPTextFieldLineBreakModeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", objj_msgSend(self, "alignment"), CPTextFieldAlignmentKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._placeholderString, CPTextFieldPlaceholderStringKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPTextFieldValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_updatePlaceholdersWithOptions:forBinding:"), function $_CPTextFieldValueBinder___updatePlaceholdersWithOptions_forBinding_(self, _cmd, options, aBinding)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTextFieldValueBinder").super_class }, "_updatePlaceholdersWithOptions:", options);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", "Multiple Values", CPMultipleValuesMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", "No Selection", CPNoSelectionMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", "Not Applicable", CPNotApplicableMarker, YES);
    objj_msgSend(self, "_setPlaceholder:forMarker:isDefault:", "", CPNullMarker, YES);
}
,["void","CPDictionary","CPBinder"]), new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPTextFieldValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setPlaceholderString:", aValue);
    objj_msgSend(self._source, "setObjectValue:", nil);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPTextFieldValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    if (!aValue || aValue.isa && objj_msgSend(aValue, "isMemberOfClass:", CPNull))
        objj_msgSend(self._source, "setPlaceholderString:", objj_msgSend(self, "_placeholderForMarker:", CPNullMarker));
    objj_msgSend(self._source, "setObjectValue:", aValue);
}
,["void","id","CPString"])]);
}{var the_class = objj_allocateClassPair(CPValueWithPatternBinding, "_CPTextFieldPatternValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $_CPTextFieldPatternValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "setPlaceholderString:", aValue);
    objj_msgSend(self._source, "setObjectValue:", nil);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $_CPTextFieldPatternValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    if (!aValue || aValue.isa && objj_msgSend(aValue, "isMemberOfClass:", CPNull))
        objj_msgSend(self._source, "setPlaceholderString:", objj_msgSend(self, "_placeholderForMarker:", CPNullMarker));
    objj_msgSend(self._source, "setObjectValue:", aValue);
}
,["void","id","CPString"])]);
}p;9;CPTheme.jt;21086;@STATIC;1.0;I;21;Foundation/CPObject.jI;27;Foundation/CPMutableArray.jI;21;Foundation/CPString.jI;30;Foundation/CPKeyedUnarchiver.jt;20947;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPMutableArray.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("Foundation/CPKeyedUnarchiver.j", NO);var CPThemesByName = {},
    CPThemeDefaultTheme = nil,
    CPThemeDefaultHudTheme = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPTheme"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_name"), new objj_ivar("_attributes")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithName:"), function $CPTheme__initWithName_(self, _cmd, aName)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTheme").super_class }, "init");
    if (self)
    {
        self._name = aName;
        self._attributes = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        CPThemesByName[self._name] = self;
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("name"), function $CPTheme__name(self, _cmd)
{
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("classNames"), function $CPTheme__classNames(self, _cmd)
{
    return objj_msgSend(self._attributes, "allKeys");
}
,["CPArray"]), new objj_method(sel_getUid("attributesForClass:"), function $CPTheme__attributesForClass_(self, _cmd, aClass)
{
    if (!aClass)
        return nil;
    var className = nil;
    if (objj_msgSend(aClass, "isKindOfClass:", objj_msgSend(CPString, "class")))
    {
        var theClass = CPClassFromString(aClass);
        if (theClass)
            aClass = theClass;
        else
            className = aClass;
    }
    if (!className)
    {
        if (objj_msgSend(aClass, "isKindOfClass:", objj_msgSend(CPView, "class")))
        {
            if (objj_msgSend(aClass, "respondsToSelector:", sel_getUid("defaultThemeClass")))
                className = objj_msgSend(aClass, "defaultThemeClass");
            else if (objj_msgSend(aClass, "respondsToSelector:", sel_getUid("themeClass")))
            {
                CPLog.warn("%@ themeClass is deprecated in favor of defaultThemeClass", CPStringFromClass(aClass));
                className = objj_msgSend(aClass, "themeClass");
            }
            else
                return nil;
        }
        else
            objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "aClass must be a class object or a string.");
    }
    return objj_msgSend(self._attributes, "objectForKey:", className);
}
,["CPDictionary","id"]), new objj_method(sel_getUid("attributeNamesForClass:"), function $CPTheme__attributeNamesForClass_(self, _cmd, aClass)
{
    var attributes = objj_msgSend(self, "attributesForClass:", aClass);
    if (attributes)
        return objj_msgSend(attributes, "allKeys");
    else
        return objj_msgSend(CPArray, "array");
}
,["CPDictionary","id"]), new objj_method(sel_getUid("attributeWithName:forClass:"), function $CPTheme__attributeWithName_forClass_(self, _cmd, aName, aClass)
{
    var attributes = objj_msgSend(self, "attributesForClass:", aClass);
    if (!attributes)
        return nil;
    return objj_msgSend(attributes, "objectForKey:", aName);
}
,["_CPThemeAttribute","CPString","id"]), new objj_method(sel_getUid("valueForAttributeWithName:forClass:"), function $CPTheme__valueForAttributeWithName_forClass_(self, _cmd, aName, aClass)
{
    return objj_msgSend(self, "valueForAttributeWithName:inState:forClass:", aName, CPThemeStateNormal, aClass);
}
,["id","CPString","id"]), new objj_method(sel_getUid("valueForAttributeWithName:inState:forClass:"), function $CPTheme__valueForAttributeWithName_inState_forClass_(self, _cmd, aName, aState, aClass)
{
    var attribute = objj_msgSend(self, "attributeWithName:forClass:", aName, aClass);
    if (!attribute)
        return nil;
    return objj_msgSend(attribute, "valueForState:", aState);
}
,["id","CPString","CPThemeState","id"]), new objj_method(sel_getUid("takeThemeFromObject:"), function $CPTheme__takeThemeFromObject_(self, _cmd, anObject)
{
    var attributes = objj_msgSend(anObject, "_themeAttributeDictionary"),
        attributeName = nil,
        attributeNames = objj_msgSend(attributes, "keyEnumerator"),
        objectThemeClass = objj_msgSend(anObject, "themeClass");
    while ((attributeName = objj_msgSend(attributeNames, "nextObject")) !== nil)
        objj_msgSend(self, "_recordAttribute:forClass:", objj_msgSend(attributes, "objectForKey:", attributeName), objectThemeClass);
}
,["void","id"]), new objj_method(sel_getUid("_recordAttribute:forClass:"), function $CPTheme___recordAttribute_forClass_(self, _cmd, anAttribute, aClass)
{
    if (!objj_msgSend(anAttribute, "hasValues"))
        return;
    var attributes = objj_msgSend(self._attributes, "objectForKey:", aClass);
    if (!attributes)
    {
        attributes = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        objj_msgSend(self._attributes, "setObject:forKey:", attributes, aClass);
    }
    var name = objj_msgSend(anAttribute, "name"),
        existingAttribute = objj_msgSend(attributes, "objectForKey:", name);
    if (existingAttribute)
        objj_msgSend(attributes, "setObject:forKey:", objj_msgSend(existingAttribute, "attributeMergedWithAttribute:", anAttribute), name);
    else
        objj_msgSend(attributes, "setObject:forKey:", anAttribute, name);
}
,["void","_CPThemeAttribute","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("setDefaultTheme:"), function $CPTheme__setDefaultTheme_(self, _cmd, aTheme)
{
    CPThemeDefaultTheme = aTheme;
}
,["void","CPTheme"]), new objj_method(sel_getUid("defaultTheme"), function $CPTheme__defaultTheme(self, _cmd)
{
    return CPThemeDefaultTheme;
}
,["CPTheme"]), new objj_method(sel_getUid("setDefaultHudTheme:"), function $CPTheme__setDefaultHudTheme_(self, _cmd, aTheme)
{
    CPThemeDefaultHudTheme = aTheme;
}
,["void","CPTheme"]), new objj_method(sel_getUid("defaultHudTheme"), function $CPTheme__defaultHudTheme(self, _cmd)
{
    if (!CPThemeDefaultHudTheme)
        CPThemeDefaultHudTheme = objj_msgSend(CPTheme, "themeNamed:", objj_msgSend(objj_msgSend(self, "defaultTheme"), "name") + "-HUD");
    return CPThemeDefaultHudTheme;
}
,["CPTheme"]), new objj_method(sel_getUid("themeNamed:"), function $CPTheme__themeNamed_(self, _cmd, aName)
{
    return CPThemesByName[aName];
}
,["CPTheme","CPString"])]);
}var CPThemeNameKey = "CPThemeNameKey",
    CPThemeAttributesKey = "CPThemeAttributesKey";
{
var the_class = objj_getClass("CPTheme")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTheme\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTheme__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTheme").super_class }, "init");
    if (self)
    {
        self._name = objj_msgSend(aCoder, "decodeObjectForKey:", CPThemeNameKey);
        self._attributes = objj_msgSend(aCoder, "decodeObjectForKey:", CPThemeAttributesKey);
        CPThemesByName[self._name] = self;
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTheme__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._name, CPThemeNameKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._attributes, CPThemeAttributesKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPKeyedUnarchiver, "_CPThemeKeyedUnarchiver"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_bundle")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initForReadingWithData:bundle:"), function $_CPThemeKeyedUnarchiver__initForReadingWithData_bundle_(self, _cmd, data, aBundle)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPThemeKeyedUnarchiver").super_class }, "initForReadingWithData:", data);
    if (self)
        self._bundle = aBundle;
    return self;
}
,["id","CPData","CPBundle"]), new objj_method(sel_getUid("bundle"), function $_CPThemeKeyedUnarchiver__bundle(self, _cmd)
{
    return self._bundle;
}
,["CPBundle"]), new objj_method(sel_getUid("awakenCustomResources"), function $_CPThemeKeyedUnarchiver__awakenCustomResources(self, _cmd)
{
    return YES;
}
,["BOOL"])]);
}var CPThemeStates = {},
    CPThemeStateNames = {},
    CPThemeStateCount = 0;
CPThemeState = function(aStateName)
{
    var state = CPThemeStates[aStateName];
    if (state === undefined)
    {
        if (aStateName.indexOf('+') === -1)
            state = 1 << CPThemeStateCount++;
        else
        {
            var state = 0,
                states = aStateName.split('+'),
                count = states.length;
            while (count--)
            {
                var stateName = states[count],
                    individualState = CPThemeStates[stateName];
                if (individualState === undefined)
                {
                    individualState = 1 << CPThemeStateCount++;
                    CPThemeStates[stateName] = individualState;
                    CPThemeStateNames[individualState] = stateName;
                }
                state |= individualState;
            }
        }
        CPThemeStates[aStateName] = state;
        CPThemeStateNames[state] = aStateName;
    }
    return state;
}
CPThemeStateName = function(aState)
{
    var name = CPThemeStateNames[aState];
    if (name !== undefined)
        return name;
    if (!(aState & aState - 1))
        return "";
    var state = 1,
        name = "";
    for (; state < aState; state <<= 1)
        if (aState & state)
            name += (name.length === 0 ? '' : '+') + CPThemeStateNames[state];
    CPThemeStateNames[aState] = name;
    return name;
}
CPThemeStateNames[0] = "normal";
CPThemeStateNormal = CPThemeStates["normal"] = 0;
CPThemeStateDisabled = CPThemeState("disabled");
CPThemeStateHovered = CPThemeState("hovered");
CPThemeStateHighlighted = CPThemeState("highlighted");
CPThemeStateSelected = CPThemeState("selected");
CPThemeStateTableDataView = CPThemeState("tableDataView");
CPThemeStateSelectedDataViewF = CPThemeState("selectedTableDataViewF");
CPThemeStateSelectedDataView = CPThemeState("selectedTableDataView");
CPThemeStateGroupRow = CPThemeState("CPThemeStateGroupRow");
CPThemeStateBezeled = CPThemeState("bezeled");
CPThemeStateBordered = CPThemeState("bordered");
CPThemeStateEditable = CPThemeState("editable");
CPThemeStateEditing = CPThemeState("editing");
CPThemeStateVertical = CPThemeState("vertical");
CPThemeStateDefault = CPThemeState("default");
CPThemeStateCircular = CPThemeState("circular");
CPThemeStateAutocompleting = CPThemeState("autocompleting");
CPThemeStateMainWindow = CPThemeState("mainWindow");
CPThemeStateKeyWindow = CPThemeState("keyWindow");
{var the_class = objj_allocateClassPair(CPObject, "_CPThemeAttribute"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_name"), new objj_ivar("_defaultValue"), new objj_ivar("_values"), new objj_ivar("_cache"), new objj_ivar("_themeDefaultAttribute")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("values"), function $_CPThemeAttribute__values(self, _cmd)
{
    return self._values;
}
,["CPDictionary"]), new objj_method(sel_getUid("initWithName:defaultValue:"), function $_CPThemeAttribute__initWithName_defaultValue_(self, _cmd, aName, aDefaultValue)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPThemeAttribute").super_class }, "init");
    if (self)
    {
        self._cache = {};
        self._name = aName;
        self._defaultValue = aDefaultValue;
        self._values = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    }
    return self;
}
,["id","CPString","id"]), new objj_method(sel_getUid("name"), function $_CPThemeAttribute__name(self, _cmd)
{
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("defaultValue"), function $_CPThemeAttribute__defaultValue(self, _cmd)
{
    return self._defaultValue;
}
,["id"]), new objj_method(sel_getUid("hasValues"), function $_CPThemeAttribute__hasValues(self, _cmd)
{
    return objj_msgSend(self._values, "count") > 0;
}
,["BOOL"]), new objj_method(sel_getUid("isTrivial"), function $_CPThemeAttribute__isTrivial(self, _cmd)
{
    return objj_msgSend(self._values, "count") === 1 && Number(objj_msgSend(self._values, "allKeys")[0]) === CPThemeStateNormal;
}
,["BOOL"]), new objj_method(sel_getUid("setValue:"), function $_CPThemeAttribute__setValue_(self, _cmd, aValue)
{
    self._cache = {};
    if (aValue === undefined || aValue === nil)
        self._values = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    else
        self._values = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", aValue, String(CPThemeStateNormal));
}
,["void","id"]), new objj_method(sel_getUid("setValue:forState:"), function $_CPThemeAttribute__setValue_forState_(self, _cmd, aValue, aState)
{
    self._cache = {};
    if (aValue === undefined || aValue === nil)
        objj_msgSend(self._values, "removeObjectForKey:", String(aState));
    else
        objj_msgSend(self._values, "setObject:forKey:", aValue, String(aState));
}
,["void","id","CPThemeState"]), new objj_method(sel_getUid("value"), function $_CPThemeAttribute__value(self, _cmd)
{
    return objj_msgSend(self, "valueForState:", CPThemeStateNormal);
}
,["id"]), new objj_method(sel_getUid("valueForState:"), function $_CPThemeAttribute__valueForState_(self, _cmd, aState)
{
    var value = self._cache[aState];
    if (value !== undefined)
        return value;
    value = objj_msgSend(self._values, "objectForKey:", String(aState));
    if ((value === undefined || value === nil) && aState !== CPThemeStateNormal)
    {
        if (aState & aState - 1)
        {
            var highestOneCount = 0,
                states = objj_msgSend(self._values, "allKeys"),
                count = states.length;
            while (count--)
            {
                var state = Number(states[count]);
                if ((state & aState) === state)
                {
                    var oneCount = cachedNumberOfOnes[state];
                    if (oneCount === undefined)
                        oneCount = numberOfOnes(state);
                    if (oneCount > highestOneCount)
                    {
                        highestOneCount = oneCount;
                        value = objj_msgSend(self._values, "objectForKey:", String(state));
                    }
                }
            }
        }
        if (value === undefined || value === nil)
            value = objj_msgSend(self._values, "objectForKey:", String(CPThemeStateNormal));
    }
    if (value === undefined || value === nil)
        value = objj_msgSend(self._themeDefaultAttribute, "valueForState:", aState);
    if (value === undefined || value === nil)
    {
        value = self._defaultValue;
        if (value === objj_msgSend(CPNull, "null"))
            value = nil;
    }
    self._cache[aState] = value;
    return value;
}
,["id","CPThemeState"]), new objj_method(sel_getUid("setParentAttribute:"), function $_CPThemeAttribute__setParentAttribute_(self, _cmd, anAttribute)
{
    if (self._themeDefaultAttribute === anAttribute)
        return;
    self._cache = {};
    self._themeDefaultAttribute = anAttribute;
}
,["void","_CPThemeAttribute"]), new objj_method(sel_getUid("attributeMergedWithAttribute:"), function $_CPThemeAttribute__attributeMergedWithAttribute_(self, _cmd, anAttribute)
{
    var mergedAttribute = objj_msgSend(objj_msgSend(_CPThemeAttribute, "alloc"), "initWithName:defaultValue:", self._name, self._defaultValue);
    mergedAttribute._values = objj_msgSend(self._values, "copy");
    objj_msgSend(mergedAttribute._values, "addEntriesFromDictionary:", anAttribute._values);
    return mergedAttribute;
}
,["_CPThemeAttribute","_CPThemeAttribute"])]);
}{
var the_class = objj_getClass("_CPThemeAttribute")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPThemeAttribute\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPThemeAttribute__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPThemeAttribute").super_class }, "init");
    if (self)
    {
        self._cache = {};
        self._name = objj_msgSend(aCoder, "decodeObjectForKey:", "name");
        self._defaultValue = objj_msgSend(aCoder, "decodeObjectForKey:", "defaultValue");
        self._values = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        if (objj_msgSend(aCoder, "containsValueForKey:", "value"))
        {
            var state = CPThemeStateNormal;
            if (objj_msgSend(aCoder, "containsValueForKey:", "state"))
                state = CPThemeState(objj_msgSend(aCoder, "decodeObjectForKey:", "state"));
            objj_msgSend(self._values, "setObject:forKey:", objj_msgSend(aCoder, "decodeObjectForKey:", "value"), state);
        }
        else
        {
            var encodedValues = objj_msgSend(aCoder, "decodeObjectForKey:", "values"),
                keys = objj_msgSend(encodedValues, "allKeys"),
                count = keys.length;
            while (count--)
            {
                var key = keys[count];
                objj_msgSend(self._values, "setObject:forKey:", objj_msgSend(encodedValues, "objectForKey:", key), CPThemeState(key));
            }
        }
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPThemeAttribute__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._name, "name");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._defaultValue, "defaultValue");
    var keys = objj_msgSend(self._values, "allKeys"),
        count = keys.length;
    if (count === 1)
    {
        var onlyKey = keys[0];
        if (Number(onlyKey) !== CPThemeStateNormal)
            objj_msgSend(aCoder, "encodeObject:forKey:", CPThemeStateName(Number(onlyKey)), "state");
        objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self._values, "objectForKey:", onlyKey), "value");
    }
    else
    {
        var encodedValues = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        while (count--)
        {
            var key = keys[count];
            objj_msgSend(encodedValues, "setObject:forKey:", objj_msgSend(self._values, "objectForKey:", key), CPThemeStateName(Number(key)));
        }
        objj_msgSend(aCoder, "encodeObject:forKey:", encodedValues, "values");
    }
}
,["void","CPCoder"])]);
}var cachedNumberOfOnes = [0, 1, 1, 2, 1, 2, 2, 3, 1, 2, 2, 3, 2, 3, 3, 4, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 1, 2, 2, 3, 2, 3, 3, 4, 2, 3, 3, 4, 3, 4, 4, 5, 2, 3, 3, 4, 3, 4, 4, 5, 3, 4, 4, 5, 4, 5, 5, 6];
var numberOfOnes = function(aNumber)
{
    var count = 0,
        slot = aNumber;
    while (aNumber)
    {
        ++count;
        aNumber &= aNumber - 1;
    }
    cachedNumberOfOnes[slot] = count;
    return count;
};
numberOfOnes.displayName = "numberOfOnes";
CPThemeAttributeEncode = function(aCoder, aThemeAttribute)
{
    var values = aThemeAttribute._values,
        count = objj_msgSend(values, "count"),
        key = "$a" + objj_msgSend(aThemeAttribute, "name");
    if (count === 1)
    {
        var state = objj_msgSend(values, "allKeys")[0];
        if (Number(state) === 0)
        {
            objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(values, "objectForKey:", state), key);
            return YES;
        }
    }
    if (count >= 1)
    {
        objj_msgSend(aCoder, "encodeObject:forKey:", aThemeAttribute, key);
        return YES;
    }
    return NO;
}
CPThemeAttributeDecode = function(aCoder, anAttributeName, aDefaultValue, aTheme, aClass)
{
    var key = "$a" + anAttributeName;
    if (!objj_msgSend(aCoder, "containsValueForKey:", key))
        var attribute = objj_msgSend(objj_msgSend(_CPThemeAttribute, "alloc"), "initWithName:defaultValue:", anAttributeName, aDefaultValue);
    else
    {
        var attribute = objj_msgSend(aCoder, "decodeObjectForKey:", key);
        if (!attribute.isa || !objj_msgSend(attribute, "isKindOfClass:", objj_msgSend(_CPThemeAttribute, "class")))
        {
            var themeAttribute = objj_msgSend(objj_msgSend(_CPThemeAttribute, "alloc"), "initWithName:defaultValue:", anAttributeName, aDefaultValue);
            objj_msgSend(themeAttribute, "setValue:", attribute);
            attribute = themeAttribute;
        }
    }
    if (aTheme && aClass)
        objj_msgSend(attribute, "setParentAttribute:", objj_msgSend(aTheme, "attributeWithName:forClass:", anAttributeName, aClass));
    return attribute;
}
p;14;CPThemeBlend.jt;2678;@STATIC;1.0;I;21;Foundation/CPObject.ji;9;CPTheme.ji;22;_CPCibCustomResource.ji;23;_CPCibKeyedUnarchiver.jt;2565;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPTheme.j", YES);objj_executeFile("_CPCibCustomResource.j", YES);objj_executeFile("_CPCibKeyedUnarchiver.j", YES);{var the_class = objj_allocateClassPair(CPObject, "CPThemeBlend"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_bundle"), new objj_ivar("_themes"), new objj_ivar("_loadDelegate")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("bundle"), function $CPThemeBlend__bundle(self, _cmd)
{
    return self._bundle;
}
,["CPBundle"]), new objj_method(sel_getUid("_setBundle:"), function $CPThemeBlend___setBundle_(self, _cmd, newValue)
{
    self._bundle = newValue;
}
,["void","CPBundle"]), new objj_method(sel_getUid("initWithContentsOfURL:"), function $CPThemeBlend__initWithContentsOfURL_(self, _cmd, aURL)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPThemeBlend").super_class }, "init");
    if (self)
    {
        self._bundle = objj_msgSend(objj_msgSend(CPBundle, "alloc"), "initWithPath:", aURL);
    }
    return self;
}
,["id","CPURL"]), new objj_method(sel_getUid("themes"), function $CPThemeBlend__themes(self, _cmd)
{
    return self._themes;
}
,["CPArray"]), new objj_method(sel_getUid("themeNames"), function $CPThemeBlend__themeNames(self, _cmd)
{
    var names = [];
    for (var i = 0; i < self._themes.length; ++i)
        names.push(self._themes[i].substring(0, self._themes[i].indexOf(".keyedtheme")));
    return names;
}
,["CPArray"]), new objj_method(sel_getUid("loadWithDelegate:"), function $CPThemeBlend__loadWithDelegate_(self, _cmd, aDelegate)
{
    self._loadDelegate = aDelegate;
    objj_msgSend(self._bundle, "loadWithDelegate:", self);
}
,["void","id"]), new objj_method(sel_getUid("bundleDidFinishLoading:"), function $CPThemeBlend__bundleDidFinishLoading_(self, _cmd, aBundle)
{
    self._themes = objj_msgSend(self._bundle, "objectForInfoDictionaryKey:", "CPKeyedThemes");
    var count = self._themes.length;
    while (count--)
    {
        var path = objj_msgSend(aBundle, "pathForResource:", self._themes[count]),
            unarchiver = objj_msgSend(objj_msgSend(_CPThemeKeyedUnarchiver, "alloc"), "initForReadingWithData:bundle:", objj_msgSend(objj_msgSend(CPURL, "URLWithString:", path), "staticResourceData"), self._bundle);
        objj_msgSend(unarchiver, "decodeObjectForKey:", "root");
        objj_msgSend(unarchiver, "finishDecoding");
    }
    objj_msgSend(self._loadDelegate, "blendDidFinishLoading:", self);
}
,["void","CPBundle"])]);
}p;14;CPTokenField.jt;58332;@STATIC;1.0;I;27;Foundation/CPCharacterSet.jI;23;Foundation/CPIndexSet.jI;20;Foundation/CPTimer.ji;21;_CPAutocompleteMenu.ji;10;CPButton.ji;15;CPPopUpButton.ji;14;CPScrollView.ji;13;CPTableView.ji;8;CPText.ji;13;CPTextField.ji;20;CPWindow_Constants.jt;58074;objj_executeFile("Foundation/CPCharacterSet.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("Foundation/CPTimer.j", NO);objj_executeFile("_CPAutocompleteMenu.j", YES);objj_executeFile("CPButton.j", YES);objj_executeFile("CPPopUpButton.j", YES);objj_executeFile("CPScrollView.j", YES);objj_executeFile("CPTableView.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPWindow_Constants.j", YES);var CPTokenFieldDOMInputElement = nil,
    CPTokenFieldDOMPasswordInputElement = nil,
    CPTokenFieldDOMStandardInputElement = nil,
    CPTokenFieldInputOwner = nil,
    CPTokenFieldTextDidChangeValue = nil,
    CPTokenFieldInputResigning = NO,
    CPTokenFieldInputDidBlur = NO,
    CPTokenFieldInputIsActive = NO,
    CPTokenFieldCachedSelectStartFunction = nil,
    CPTokenFieldCachedDragFunction = nil,
    CPTokenFieldFocusInput = NO,
    CPTokenFieldBlurHandler = nil;
var CPScrollDestinationNone = 0,
    CPScrollDestinationLeft = 1,
    CPScrollDestinationRight = 2;
CPTokenFieldDisclosureButtonType = 0;
CPTokenFieldDeleteButtonType = 1;
{var the_class = objj_allocateClassPair(CPTextField, "CPTokenField"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_tokenScrollView"), new objj_ivar("_shouldScrollTo"), new objj_ivar("_selectedRange"), new objj_ivar("_autocompleteMenu"), new objj_ivar("_inputFrame"), new objj_ivar("_completionDelay"), new objj_ivar("_tokenizingCharacterSet"), new objj_ivar("_mouseDownEvent"), new objj_ivar("_shouldNotifyTarget"), new objj_ivar("_buttonType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("tokenizingCharacterSet"), function $CPTokenField__tokenizingCharacterSet(self, _cmd)
{
    return self._tokenizingCharacterSet;
}
,["CPCharacterSet"]), new objj_method(sel_getUid("setTokenizingCharacterSet:"), function $CPTokenField__setTokenizingCharacterSet_(self, _cmd, newValue)
{
    self._tokenizingCharacterSet = newValue;
}
,["void","CPCharacterSet"]), new objj_method(sel_getUid("buttonType"), function $CPTokenField__buttonType(self, _cmd)
{
    return self._buttonType;
}
,["int"]), new objj_method(sel_getUid("setButtonType:"), function $CPTokenField__setButtonType_(self, _cmd, newValue)
{
    self._buttonType = newValue;
}
,["void","int"]), new objj_method(sel_getUid("initWithFrame:"), function $CPTokenField__initWithFrame_(self, _cmd, frame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "initWithFrame:", frame))
    {
        self._completionDelay = objj_msgSend(objj_msgSend(self, "class"), "defaultCompletionDelay");
        self._tokenizingCharacterSet = objj_msgSend(objj_msgSend(self, "class"), "defaultTokenizingCharacterSet");
        self._buttonType = CPTokenFieldDisclosureButtonType;
        objj_msgSend(self, "setBezeled:", YES);
        objj_msgSend(self, "_init");
        objj_msgSend(self, "setObjectValue:", []);
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPTokenField___init(self, _cmd)
{
    self._selectedRange = CPMakeRange(0, 0);
    var frame = objj_msgSend(self, "frame");
    self._tokenScrollView = objj_msgSend(objj_msgSend(CPScrollView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(self._tokenScrollView, "setHasHorizontalScroller:", NO);
    objj_msgSend(self._tokenScrollView, "setHasVerticalScroller:", NO);
    objj_msgSend(self._tokenScrollView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    var contentView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(contentView, "setAutoresizingMask:", CPViewWidthSizable);
    objj_msgSend(self._tokenScrollView, "setDocumentView:", contentView);
    objj_msgSend(self, "addSubview:", self._tokenScrollView);
}
,["void"]), new objj_method(sel_getUid("_autocompleteMenu"), function $CPTokenField___autocompleteMenu(self, _cmd)
{
    if (!self._autocompleteMenu)
        self._autocompleteMenu = objj_msgSend(objj_msgSend(_CPAutocompleteMenu, "alloc"), "initWithTextField:", self);
    return self._autocompleteMenu;
}
,["_CPAutocompleteMenu"]), new objj_method(sel_getUid("_complete:"), function $CPTokenField___complete_(self, _cmd, anAutocompleteMenu)
{
    objj_msgSend(self, "_autocompleteWithEvent:", nil);
}
,["void","_CPAutocompleteMenu"]), new objj_method(sel_getUid("_autocompleteWithEvent:"), function $CPTokenField___autocompleteWithEvent_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "_editorValue") && (!objj_msgSend(self._autocompleteMenu, "contentArray") || !objj_msgSend(self, "hasThemeState:", CPThemeStateAutocompleting)))
        return;
    objj_msgSend(self, "_hideCompletions");
    var token = objj_msgSend(self._autocompleteMenu, "selectedItem"),
        shouldRemoveLastObject = token !== "" && objj_msgSend(self, "_editorValue") !== "";
    if (!token)
        token = objj_msgSend(self, "_editorValue");
    if (!token || token === "")
    {
        var character = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
            modifierFlags = objj_msgSend(anEvent, "modifierFlags");
        if (character === CPTabCharacter)
        {
            if (!(modifierFlags & CPShiftKeyMask))
                objj_msgSend(objj_msgSend(self, "window"), "selectNextKeyView:", self);
            else
                objj_msgSend(objj_msgSend(self, "window"), "selectPreviousKeyView:", self);
        }
        else
            objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", nil);
        return;
    }
    var objectValue = objj_msgSend(self, "objectValue");
    if (shouldRemoveLastObject)
        objj_msgSend(objectValue, "removeObjectAtIndex:", self._selectedRange.location);
    token = objj_msgSend(self, "_representedObjectForEditingString:", token);
    var delegateApprovedObjects = objj_msgSend(self, "_shouldAddObjects:atIndex:", objj_msgSend(CPArray, "arrayWithObject:", token), self._selectedRange.location),
        delegateApprovedObjectsCount = objj_msgSend(delegateApprovedObjects, "count");
    if (delegateApprovedObjects)
    {
        for (var i = 0; i < delegateApprovedObjectsCount; i++)
        {
            objj_msgSend(objectValue, "insertObject:atIndex:", objj_msgSend(delegateApprovedObjects, "objectAtIndex:", i), self._selectedRange.location + i);
        }
    }
    var location = self._selectedRange.location;
    objj_msgSend(self, "setObjectValue:", objectValue);
    if (delegateApprovedObjectsCount)
        location += delegateApprovedObjectsCount;
    self._selectedRange = CPMakeRange(location, 0);
    objj_msgSend(self, "_inputElement").value = "";
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "_controlTextDidChange");
}
,["void","CPEvent"]), new objj_method(sel_getUid("_autocomplete"), function $CPTokenField___autocomplete(self, _cmd)
{
    objj_msgSend(self, "_autocompleteWithEvent:", nil);
}
,["void"]), new objj_method(sel_getUid("_selectToken:byExtendingSelection:"), function $CPTokenField___selectToken_byExtendingSelection_(self, _cmd, token, extend)
{
    var indexOfToken = objj_msgSend(objj_msgSend(self, "_tokens"), "indexOfObject:", token);
    if (indexOfToken == CPNotFound)
    {
        if (!extend)
            self._selectedRange = CPMakeRange(objj_msgSend(objj_msgSend(self, "_tokens"), "count"), 0);
    }
    else if (extend)
        self._selectedRange = CPUnionRange(self._selectedRange, CPMakeRange(indexOfToken, 1));
    else
        self._selectedRange = CPMakeRange(indexOfToken, 1);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","_CPTokenFieldToken","BOOL"]), new objj_method(sel_getUid("_deselectToken:"), function $CPTokenField___deselectToken_(self, _cmd, token)
{
    var indexOfToken = objj_msgSend(objj_msgSend(self, "_tokens"), "indexOfObject:", token);
    if (CPLocationInRange(indexOfToken, self._selectedRange))
        self._selectedRange = CPMakeRange(MAX(indexOfToken, self._selectedRange.location), MIN(self._selectedRange.length, indexOfToken - self._selectedRange.location));
    objj_msgSend(self, "setNeedsLayout");
}
,["void","_CPTokenFieldToken"]), new objj_method(sel_getUid("_deleteToken:"), function $CPTokenField___deleteToken_(self, _cmd, token)
{
    var indexOfToken = objj_msgSend(objj_msgSend(self, "_tokens"), "indexOfObject:", token),
        objectValue = objj_msgSend(self, "objectValue");
    if (indexOfToken < self._selectedRange.location)
        self._selectedRange.location--;
    else
        objj_msgSend(self, "_deselectToken:", token);
    var selection = CPMakeRangeCopy(self._selectedRange);
    objj_msgSend(objectValue, "removeObjectAtIndex:", indexOfToken);
    objj_msgSend(self, "setObjectValue:", objectValue);
    self._selectedRange = selection;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "_controlTextDidChange");
}
,["void","_CPTokenFieldToken"]), new objj_method(sel_getUid("_controlTextDidChange"), function $CPTokenField___controlTextDidChange(self, _cmd)
{
    var binderClass = objj_msgSend(objj_msgSend(self, "class"), "_binderClassForBinding:", CPValueBinding),
        theBinding = objj_msgSend(binderClass, "getBinding:forObject:", CPValueBinding, self);
    if (theBinding)
        objj_msgSend(theBinding, "reverseSetValueFor:", "objectValue");
    objj_msgSend(self, "textDidChange:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidChangeNotification, self, nil));
    self._shouldNotifyTarget = YES;
}
,["void"]), new objj_method(sel_getUid("_removeSelectedTokens:"), function $CPTokenField___removeSelectedTokens_(self, _cmd, sender)
{
    var tokens = objj_msgSend(self, "objectValue");
    for (var i = self._selectedRange.length - 1; i >= 0; i--)
        objj_msgSend(tokens, "removeObjectAtIndex:", self._selectedRange.location + i);
    var collapsedSelection = self._selectedRange.location;
    objj_msgSend(self, "setObjectValue:", tokens);
    self._selectedRange = CPMakeRange(collapsedSelection, 0);
    objj_msgSend(self, "_controlTextDidChange");
}
,["void","id"]), new objj_method(sel_getUid("_updatePlaceholderState"), function $CPTokenField___updatePlaceholderState(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "_tokens"), "count") === 0 && !objj_msgSend(self, "hasThemeState:", CPThemeStateEditing))
        objj_msgSend(self, "setThemeState:", CPTextFieldStatePlaceholder);
    else
        objj_msgSend(self, "unsetThemeState:", CPTextFieldStatePlaceholder);
}
,["void"]), new objj_method(sel_getUid("becomeFirstResponder"), function $CPTokenField__becomeFirstResponder(self, _cmd)
{
    if (CPTokenFieldInputOwner && objj_msgSend(CPTokenFieldInputOwner, "window") !== objj_msgSend(self, "window"))
        objj_msgSend(objj_msgSend(CPTokenFieldInputOwner, "window"), "makeFirstResponder:", nil);
    objj_msgSend(self, "_setObserveWindowKeyNotifications:", YES);
    objj_msgSend(self, "scrollRectToVisible:", objj_msgSend(self, "bounds"));
    if (objj_msgSend(objj_msgSend(self, "window"), "isKeyWindow"))
        return objj_msgSend(self, "_becomeFirstKeyResponder");
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_becomeFirstKeyResponder"), function $CPTokenField___becomeFirstKeyResponder(self, _cmd)
{
    if (!objj_msgSend(self, "_isWithinUsablePlatformRect"))
        return NO;
    objj_msgSend(self, "setThemeState:", CPThemeStateEditing);
    objj_msgSend(self, "_updatePlaceholderState");
    objj_msgSend(self, "setNeedsLayout");
    var string = objj_msgSend(self, "stringValue"),
        element = objj_msgSend(self, "_inputElement"),
        font = objj_msgSend(self, "currentValueForThemeAttribute:", "font");
    element.value = nil;
    element.style.color = objj_msgSend(objj_msgSend(self, "currentValueForThemeAttribute:", "text-color"), "cssString");
    element.style.font = objj_msgSend(font, "cssString");
    element.style.zIndex = 1000;
    switch(objj_msgSend(self, "alignment")) {
    case CPCenterTextAlignment:
        element.style.textAlign = "center";
        break;
    case CPRightTextAlignment:
        element.style.textAlign = "right";
        break;
default:
        element.style.textAlign = "left";
    }
    var contentRect = objj_msgSend(self, "contentRectForBounds:", objj_msgSend(self, "bounds"));
    element.style.top = CGRectGetMinY(contentRect) + "px";
    element.style.left = CGRectGetMinX(contentRect) - 1 + "px";
    element.style.width = CGRectGetWidth(contentRect) + "px";
    element.style.height = objj_msgSend(font, "defaultLineHeightForFont") + "px";
    window.setTimeout(function()
    {
        objj_msgSend(self._tokenScrollView, "documentView")._DOMElement.appendChild(element);
        objj_msgSend(self, "textDidBeginEditing:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidBeginEditingNotification, self, nil));
        window.setTimeout(function()
        {
            element.focus();
            CPTokenFieldInputOwner = self;
        }, 0.0);
        objj_msgSend(self, "textDidFocus:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPTextFieldDidFocusNotification, self, nil));
    }, 0.0);
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    CPTokenFieldInputIsActive = YES;
    if (document.attachEvent)
    {
        CPTokenFieldCachedSelectStartFunction = document.body.onselectstart;
        CPTokenFieldCachedDragFunction = document.body.ondrag;
        document.body.ondrag = function()
        {
        };
        document.body.onselectstart = function()
        {
        };
    }
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPTokenField__resignFirstResponder(self, _cmd)
{
    objj_msgSend(self, "_autocomplete");
    objj_msgSend(self, "_setObserveWindowKeyNotifications:", NO);
    objj_msgSend(self, "_resignFirstKeyResponder");
    if (self._shouldNotifyTarget)
    {
        self._shouldNotifyTarget = NO;
        objj_msgSend(self, "textDidEndEditing:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidEndEditingNotification, self, nil));
        if (objj_msgSend(self, "sendsActionOnEndEditing"))
            objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    }
    objj_msgSend(self, "textDidBlur:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPTextFieldDidBlurNotification, self, nil));
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_resignFirstKeyResponder"), function $CPTokenField___resignFirstKeyResponder(self, _cmd)
{
    objj_msgSend(self, "unsetThemeState:", CPThemeStateEditing);
    objj_msgSend(self, "_updatePlaceholderState");
    objj_msgSend(self, "setNeedsLayout");
    var element = objj_msgSend(self, "_inputElement");
    CPTokenFieldInputResigning = YES;
    element.blur();
    if (!CPTokenFieldInputDidBlur)
        CPTokenFieldBlurHandler();
    CPTokenFieldInputDidBlur = NO;
    CPTokenFieldInputResigning = NO;
    if (element.parentNode == objj_msgSend(self._tokenScrollView, "documentView")._DOMElement)
        element.parentNode.removeChild(element);
    CPTokenFieldInputIsActive = NO;
    if (document.attachEvent)
    {
        CPTokenFieldCachedSelectStartFunction = nil;
        CPTokenFieldCachedDragFunction = nil;
        document.body.ondrag = CPTokenFieldCachedDragFunction;
        document.body.onselectstart = CPTokenFieldCachedSelectStartFunction;
    }
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $CPTokenField__mouseDown_(self, _cmd, anEvent)
{
    self._mouseDownEvent = anEvent;
    objj_msgSend(self, "_selectToken:byExtendingSelection:", nil, NO);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $CPTokenField__mouseUp_(self, _cmd, anEvent)
{
    self._mouseDownEvent = nil;
}
,["void","CPEvent"]), new objj_method(sel_getUid("_mouseDownOnToken:withEvent:"), function $CPTokenField___mouseDownOnToken_withEvent_(self, _cmd, aToken, anEvent)
{
    self._mouseDownEvent = anEvent;
}
,["void","_CPTokenFieldToken","CPEvent"]), new objj_method(sel_getUid("_mouseUpOnToken:withEvent:"), function $CPTokenField___mouseUpOnToken_withEvent_(self, _cmd, aToken, anEvent)
{
    if (self._mouseDownEvent && CGPointEqualToPoint(objj_msgSend(self._mouseDownEvent, "locationInWindow"), objj_msgSend(anEvent, "locationInWindow")))
    {
        objj_msgSend(self, "_selectToken:byExtendingSelection:", aToken, objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask);
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self);
        self._shouldScrollTo = aToken;
    }
}
,["void","_CPTokenFieldToken","CPEvent"]), new objj_method(sel_getUid("_tokens"), function $CPTokenField___tokens(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "objectValue");
}
,["CPArray"]), new objj_method(sel_getUid("stringValue"), function $CPTokenField__stringValue(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "objectValue"), "componentsJoinedByString:", ",");
}
,["CPString"]), new objj_method(sel_getUid("objectValue"), function $CPTokenField__objectValue(self, _cmd)
{
    var objectValue = [];
    for (var i = 0, count = objj_msgSend(objj_msgSend(self, "_tokens"), "count"); i < count; i++)
    {
        var token = objj_msgSend(objj_msgSend(self, "_tokens"), "objectAtIndex:", i);
        if (objj_msgSend(token, "isKindOfClass:", objj_msgSend(CPString, "class")))
            continue;
        objj_msgSend(objectValue, "addObject:", objj_msgSend(token, "representedObject"));
    }
    if (objj_msgSend(self, "_editorValue"))
    {
        var token = objj_msgSend(self, "_representedObjectForEditingString:", objj_msgSend(self, "_editorValue"));
        objj_msgSend(objectValue, "insertObject:atIndex:", token, self._selectedRange.location);
    }
    return objectValue;
}
,["id"]), new objj_method(sel_getUid("setObjectValue:"), function $CPTokenField__setObjectValue_(self, _cmd, aValue)
{
    if (aValue !== nil && !objj_msgSend(aValue, "isKindOfClass:", objj_msgSend(CPArray, "class")))
    {
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "setObjectValue:", nil);
        return;
    }
    var superValue = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "objectValue");
    if (aValue === superValue || objj_msgSend(aValue, "isEqualToArray:", superValue))
        return;
    var contentView = objj_msgSend(self._tokenScrollView, "documentView"),
        oldTokens = objj_msgSend(self, "_tokens"),
        newTokens = [];
    if (aValue !== nil)
    {
        for (var i = 0, count = objj_msgSend(aValue, "count"); i < count; i++)
        {
            var tokenObject = aValue[i],
                tokenValue = objj_msgSend(self, "_displayStringForRepresentedObject:", tokenObject),
                newToken = nil;
            for (var j = 0, oldCount = objj_msgSend(oldTokens, "count"); j < oldCount; j++)
            {
                var oldToken = oldTokens[j];
                if (objj_msgSend(oldToken, "representedObject") == tokenObject)
                {
                    objj_msgSend(oldTokens, "removeObjectAtIndex:", j);
                    newToken = oldToken;
                    break;
                }
            }
            if (newToken === nil)
            {
                newToken = objj_msgSend(_CPTokenFieldToken, "new");
                objj_msgSend(newToken, "setTokenField:", self);
                objj_msgSend(newToken, "setRepresentedObject:", tokenObject);
                objj_msgSend(newToken, "setStringValue:", tokenValue);
                objj_msgSend(newToken, "setEditable:", objj_msgSend(self, "isEditable"));
                objj_msgSend(contentView, "addSubview:", newToken);
            }
            newTokens.push(newToken);
        }
    }
    for (var j = 0, oldCount = objj_msgSend(oldTokens, "count"); j < oldCount; j++)
        objj_msgSend(oldTokens[j], "removeFromSuperview");
    self._value = newTokens;
    objj_msgSend(self, "_selectToken:byExtendingSelection:", nil, NO);
    objj_msgSend(self, "_updatePlaceholderState");
    self._shouldScrollTo = CPScrollDestinationRight;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","id"]), new objj_method(sel_getUid("setEnabled:"), function $CPTokenField__setEnabled_(self, _cmd, shouldBeEnabled)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "setEnabled:", shouldBeEnabled);
    for (var i = 0, count = objj_msgSend(objj_msgSend(self, "_tokens"), "count"); i < count; i++)
    {
        var token = objj_msgSend(objj_msgSend(self, "_tokens"), "objectAtIndex:", i);
        if (objj_msgSend(token, "respondsToSelector:", sel_getUid("setEnabled:")))
            objj_msgSend(token, "setEnabled:", shouldBeEnabled);
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("setEditable:"), function $CPTokenField__setEditable_(self, _cmd, shouldBeEditable)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "setEditable:", shouldBeEditable);
    objj_msgSend(objj_msgSend(self, "_tokens"), "makeObjectsPerformSelector:withObject:", sel_getUid("setEditable:"), shouldBeEditable);
}
,["void","BOOL"]), new objj_method(sel_getUid("sendAction:to:"), function $CPTokenField__sendAction_to_(self, _cmd, anAction, anObject)
{
    self._shouldNotifyTarget = NO;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "sendAction:to:", anAction, anObject);
}
,["void","SEL","id"]), new objj_method(sel_getUid("_setStringValue:"), function $CPTokenField___setStringValue_(self, _cmd, aValue)
{
}
,["void","id"]), new objj_method(sel_getUid("_inputElement"), function $CPTokenField___inputElement(self, _cmd)
{
    if (!CPTokenFieldDOMInputElement)
    {
        CPTokenFieldDOMInputElement = document.createElement("input");
        CPTokenFieldDOMInputElement.style.position = "absolute";
        CPTokenFieldDOMInputElement.style.border = "0px";
        CPTokenFieldDOMInputElement.style.padding = "0px";
        CPTokenFieldDOMInputElement.style.margin = "0px";
        CPTokenFieldDOMInputElement.style.whiteSpace = "pre";
        CPTokenFieldDOMInputElement.style.background = "transparent";
        CPTokenFieldDOMInputElement.style.outline = "none";
        CPTokenFieldBlurHandler = function(anEvent)
        {
            return CPTextFieldBlurFunction(anEvent, CPTokenFieldInputOwner, CPTokenFieldInputOwner ? objj_msgSend(CPTokenFieldInputOwner._tokenScrollView, "documentView")._DOMElement : nil, CPTokenFieldDOMInputElement, CPTokenFieldInputResigning, function(__input) { if (arguments.length) return CPTokenFieldInputDidBlur = __input; return CPTokenFieldInputDidBlur; });
        };
        CPTokenFieldDOMInputElement.onblur = CPTokenFieldBlurHandler;
        CPTokenFieldDOMStandardInputElement = CPTokenFieldDOMInputElement;
    }
    if (CPFeatureIsCompatible(CPInputTypeCanBeChangedFeature))
    {
        if (objj_msgSend(CPTokenFieldInputOwner, "isSecure"))
            CPTokenFieldDOMInputElement.type = "password";
        else
            CPTokenFieldDOMInputElement.type = "text";
        return CPTokenFieldDOMInputElement;
    }
    return CPTokenFieldDOMInputElement;
}
,["DOMElement"]), new objj_method(sel_getUid("_editorValue"), function $CPTokenField___editorValue(self, _cmd)
{
    if (!objj_msgSend(self, "hasThemeState:", CPThemeStateEditing))
        return "";
    return objj_msgSend(self, "_inputElement").value;
}
,["CPString"]), new objj_method(sel_getUid("moveUp:"), function $CPTokenField__moveUp_(self, _cmd, sender)
{
    objj_msgSend(objj_msgSend(self, "_autocompleteMenu"), "selectPrevious");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("moveDown:"), function $CPTokenField__moveDown_(self, _cmd, sender)
{
    objj_msgSend(objj_msgSend(self, "_autocompleteMenu"), "selectNext");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
}
,["void","id"]), new objj_method(sel_getUid("insertNewline:"), function $CPTokenField__insertNewline_(self, _cmd, sender)
{
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateAutocompleting))
    {
        objj_msgSend(self, "_autocompleteWithEvent:", objj_msgSend(CPApp, "currentEvent"));
    }
    else
    {
        objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", nil);
    }
}
,["void","id"]), new objj_method(sel_getUid("insertTab:"), function $CPTokenField__insertTab_(self, _cmd, sender)
{
    var anEvent = objj_msgSend(CPApp, "currentEvent");
    if (objj_msgSend(self, "hasThemeState:", CPThemeStateAutocompleting))
    {
        objj_msgSend(self, "_autocompleteWithEvent:", anEvent);
    }
    else
    {
        if (!(objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask))
            objj_msgSend(objj_msgSend(self, "window"), "selectNextKeyView:", self);
        else
            objj_msgSend(objj_msgSend(self, "window"), "selectPreviousKeyView:", self);
    }
}
,["void","id"]), new objj_method(sel_getUid("insertText:"), function $CPTokenField__insertText_(self, _cmd, characters)
{
    if (objj_msgSend(self._tokenizingCharacterSet, "characterIsMember:", objj_msgSend(characters, "substringToIndex:", 1)))
    {
        objj_msgSend(self, "_autocompleteWithEvent:", objj_msgSend(CPApp, "currentEvent"));
    }
    else
    {
        if (self._selectedRange.length)
        {
            objj_msgSend(self, "_removeSelectedTokens:", self);
            objj_msgSend(self, "layoutSubviews");
        }
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","CPString"]), new objj_method(sel_getUid("cancelOperation:"), function $CPTokenField__cancelOperation_(self, _cmd, sender)
{
    objj_msgSend(self, "_hideCompletions");
}
,["void","id"]), new objj_method(sel_getUid("moveLeft:"), function $CPTokenField__moveLeft_(self, _cmd, sender)
{
    if ((self._selectedRange.location > 0 || self._selectedRange.length) && objj_msgSend(self, "_editorValue") == "")
    {
        if (self._selectedRange.length)
            self._selectedRange.length = 0;
        else
            self._selectedRange.location--;
        objj_msgSend(self, "setNeedsLayout");
        self._shouldScrollTo = CPScrollDestinationLeft;
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("moveLeftAndModifySelection:"), function $CPTokenField__moveLeftAndModifySelection_(self, _cmd, sender)
{
    if (self._selectedRange.location > 0 && objj_msgSend(self, "_editorValue") == "")
    {
        self._selectedRange.location--;
        self._selectedRange.length++;
        objj_msgSend(self, "setNeedsLayout");
        self._shouldScrollTo = CPScrollDestinationLeft;
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("moveRight:"), function $CPTokenField__moveRight_(self, _cmd, sender)
{
    if ((self._selectedRange.location < objj_msgSend(objj_msgSend(self, "_tokens"), "count") || self._selectedRange.length) && objj_msgSend(self, "_editorValue") == "")
    {
        if (self._selectedRange.length)
        {
            self._selectedRange.location = CPMaxRange(self._selectedRange);
            self._selectedRange.length = 0;
        }
        else
        {
            self._selectedRange.location = MIN(objj_msgSend(objj_msgSend(self, "_tokens"), "count"), self._selectedRange.location + self._selectedRange.length + 1);
        }
        objj_msgSend(self, "setNeedsLayout");
        self._shouldScrollTo = CPScrollDestinationRight;
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("moveRightAndModifySelection:"), function $CPTokenField__moveRightAndModifySelection_(self, _cmd, sender)
{
    if (CPMaxRange(self._selectedRange) < objj_msgSend(objj_msgSend(self, "_tokens"), "count") && objj_msgSend(self, "_editorValue") == "")
    {
        self._selectedRange.length++;
        objj_msgSend(self, "setNeedsLayout");
        self._shouldScrollTo = CPScrollDestinationRight;
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("deleteBackward:"), function $CPTokenField__deleteBackward_(self, _cmd, sender)
{
    if (objj_msgSend(self, "_editorValue") == "")
    {
        objj_msgSend(self, "_hideCompletions");
        if (CPEmptyRange(self._selectedRange))
        {
            if (self._selectedRange.location > 0)
            {
                var tokenView = objj_msgSend(objj_msgSend(self, "_tokens"), "objectAtIndex:", self._selectedRange.location - 1);
                objj_msgSend(self, "_selectToken:byExtendingSelection:", tokenView, NO);
            }
        }
        else
            objj_msgSend(self, "_removeSelectedTokens:", nil);
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("deleteForward:"), function $CPTokenField__deleteForward_(self, _cmd, sender)
{
    if (objj_msgSend(self, "_editorValue") == "")
    {
        objj_msgSend(self, "_hideCompletions");
        if (CPEmptyRange(self._selectedRange))
        {
            if (self._selectedRange.location < objj_msgSend(objj_msgSend(self, "_tokens"), "count"))
                objj_msgSend(self, "_deleteToken:", objj_msgSend(objj_msgSend(self, "_tokens"), "objectAtIndex:", [self._selectedRange.location]));
        }
        else
            objj_msgSend(self, "_removeSelectedTokens:", nil);
    }
    else
    {
        objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("_selectText:immediately:"), function $CPTokenField___selectText_immediately_(self, _cmd, sender, immediately)
{
    if (objj_msgSend(self, "isEditable") || objj_msgSend(self, "isSelectable"))
    {
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "_selectText:immediately:", sender, immediately);
        objj_msgSend(self, "_autocomplete");
        self._selectedRange = CPMakeRange(0, objj_msgSend(objj_msgSend(self, "_tokens"), "count"));
        objj_msgSend(self, "setNeedsLayout");
    }
}
,["void","id","BOOL"]), new objj_method(sel_getUid("keyDown:"), function $CPTokenField__keyDown_(self, _cmd, anEvent)
{
    CPTokenFieldTextDidChangeValue = objj_msgSend(self, "stringValue");
    objj_msgSend(self, "interpretKeyEvents:", [anEvent]);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyUp:"), function $CPTokenField__keyUp_(self, _cmd, anEvent)
{
    if (objj_msgSend(self, "stringValue") !== CPTokenFieldTextDidChangeValue)
    {
        objj_msgSend(self, "textDidChange:", objj_msgSend(CPNotification, "notificationWithName:object:userInfo:", CPControlTextDidChangeNotification, self, nil));
    }
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("textDidChange:"), function $CPTokenField__textDidChange_(self, _cmd, aNotification)
{
    if (objj_msgSend(aNotification, "object") !== self)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "textDidChange:", aNotification);
    objj_msgSend(self, "_delayedShowCompletions");
    self._selectedRange.length = 0;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPNotification"]), new objj_method(sel_getUid("setCompletionDelay:"), function $CPTokenField__setCompletionDelay_(self, _cmd, delay)
{
    self._completionDelay = delay;
}
,["void","CPTimeInterval"]), new objj_method(sel_getUid("completionDelay"), function $CPTokenField__completionDelay(self, _cmd)
{
    return self._completionDelay;
}
,["CPTimeInterval"]), new objj_method(sel_getUid("layoutSubviews"), function $CPTokenField__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "layoutSubviews");
    objj_msgSend(self._tokenScrollView, "setFrame:", objj_msgSend(self, "rectForEphemeralSubviewNamed:", "content-view"));
    var textFieldContentView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "content-view", CPWindowAbove, "bezel-view");
    if (textFieldContentView)
        objj_msgSend(textFieldContentView, "setHidden:", objj_msgSend(self, "stringValue") !== "");
    var frame = objj_msgSend(self, "frame"),
        contentView = objj_msgSend(self._tokenScrollView, "documentView"),
        tokens = objj_msgSend(self, "_tokens");
    if (!objj_msgSend(tokens, "isKindOfClass:", objj_msgSend(CPArray, "class")))
        return;
    var contentRect = CGRectMakeCopy(objj_msgSend(contentView, "bounds")),
        contentOrigin = contentRect.origin,
        contentSize = contentRect.size,
        offset = CGPointMake(contentOrigin.x, contentOrigin.y),
        spaceBetweenTokens = CGSizeMake(2.0, 2.0),
        isEditing = objj_msgSend(objj_msgSend(self, "window"), "firstResponder") == self,
        tokenToken = objj_msgSend(_CPTokenFieldToken, "new"),
        font = objj_msgSend(self, "currentValueForThemeAttribute:", "font"),
        lineHeight = objj_msgSend(font, "defaultLineHeightForFont"),
        editorInset = objj_msgSend(self, "currentValueForThemeAttribute:", "editor-inset");
    offset.y += CEIL(spaceBetweenTokens.height / 2.0);
    objj_msgSend(tokenToken, "sizeToFit");
    var tokenHeight = CGRectGetHeight(objj_msgSend(tokenToken, "bounds"));
    var fitAndFrame = function(width, height)
    {
        var r = CGRectMake(0, 0, width, height);
        if (offset.x + width >= contentSize.width && offset.x > contentOrigin.x)
        {
            offset.x = contentOrigin.x;
            offset.y += height + spaceBetweenTokens.height;
        }
        r.origin.x = offset.x;
        r.origin.y = offset.y;
        var scrollHeight = offset.y + tokenHeight + CEIL(spaceBetweenTokens.height / 2.0);
        if (CGRectGetHeight(objj_msgSend(contentView, "bounds")) < scrollHeight)
            objj_msgSend(contentView, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self._tokenScrollView, "bounds")), scrollHeight));
        offset.x += width + spaceBetweenTokens.width;
        return r;
    };
    var placeEditor = function(useRemainingWidth)
    {
        var element = objj_msgSend(self, "_inputElement"),
            textWidth = 1;
        if (self._selectedRange.length === 0)
        {
            textWidth = objj_msgSend((element.value || "") + "X", "sizeWithFont:", font).width;
            if (useRemainingWidth)
                textWidth = MAX(contentSize.width - offset.x - 1, textWidth);
        }
        self._inputFrame = fitAndFrame(textWidth, tokenHeight);
        self._inputFrame.size.height = lineHeight;
        element.style.left = self._inputFrame.origin.x + editorInset.left + "px";
        element.style.top = self._inputFrame.origin.y + editorInset.top + "px";
        element.style.width = self._inputFrame.size.width + "px";
        element.style.height = self._inputFrame.size.height + "px";
        if (self._selectedRange.length == 0)
            objj_msgSend(objj_msgSend(self._tokenScrollView, "documentView"), "scrollPoint:", CGPointMake(0, self._inputFrame.origin.y));
    };
    for (var i = 0, count = objj_msgSend(tokens, "count"); i < count; i++)
    {
        if (isEditing && !self._selectedRange.length && i == CPMaxRange(self._selectedRange))
            placeEditor(false);
        var tokenView = objj_msgSend(tokens, "objectAtIndex:", i);
        if (objj_msgSend(tokenView, "isKindOfClass:", objj_msgSend(CPString, "class")))
            continue;
        objj_msgSend(tokenView, "setHighlighted:", CPLocationInRange(i, self._selectedRange));
        objj_msgSend(tokenView, "sizeToFit");
        var size = objj_msgSend(contentView, "bounds").size,
            tokenViewSize = objj_msgSend(tokenView, "bounds").size,
            tokenFrame = fitAndFrame(tokenViewSize.width, tokenViewSize.height);
        objj_msgSend(tokenView, "setFrame:", tokenFrame);
        objj_msgSend(tokenView, "setButtonType:", self._buttonType);
    }
    if (isEditing && !self._selectedRange.length && CPMaxRange(self._selectedRange) >= objj_msgSend(tokens, "count"))
        placeEditor(true);
    if (isEditing && self._selectedRange.length)
    {
        self._inputFrame = nil;
        var inputElement = objj_msgSend(self, "_inputElement");
        inputElement.style.display = "none";
    }
    else if (isEditing)
    {
        var inputElement = objj_msgSend(self, "_inputElement");
        inputElement.style.display = "block";
        if (document.activeElement !== inputElement)
            inputElement.focus();
    }
    var scrollHeight = offset.y + tokenHeight;
    if (CGRectGetHeight(objj_msgSend(contentView, "bounds")) > scrollHeight)
        objj_msgSend(contentView, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self._tokenScrollView, "bounds")), scrollHeight));
    if (self._shouldScrollTo !== CPScrollDestinationNone)
    {
        if (!(isEditing && self._selectedRange.length == 0))
        {
            var scrollToToken = self._shouldScrollTo;
            if (scrollToToken === CPScrollDestinationLeft)
                scrollToToken = tokens[self._selectedRange.location];
            else if (scrollToToken === CPScrollDestinationRight)
                scrollToToken = tokens[MAX(0, CPMaxRange(self._selectedRange) - 1)];
            objj_msgSend(self, "_scrollTokenViewToVisible:", scrollToToken);
        }
        self._shouldScrollTo = CPScrollDestinationNone;
    }
}
,["void"]), new objj_method(sel_getUid("_scrollTokenViewToVisible:"), function $CPTokenField___scrollTokenViewToVisible_(self, _cmd, aToken)
{
    if (!aToken)
        return;
    return objj_msgSend(objj_msgSend(self._tokenScrollView, "documentView"), "scrollPoint:", CGPointMake(0, objj_msgSend(aToken, "frameOrigin").y));
}
,["BOOL","_CPTokenFieldToken"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultTokenizingCharacterSet"), function $CPTokenField__defaultTokenizingCharacterSet(self, _cmd)
{
    return objj_msgSend(CPCharacterSet, "characterSetWithCharactersInString:", ",");
}
,["CPCharacterSet"]), new objj_method(sel_getUid("defaultCompletionDelay"), function $CPTokenField__defaultCompletionDelay(self, _cmd)
{
    return 0.5;
}
,["CPTimeInterval"]), new objj_method(sel_getUid("defaultThemeClass"), function $CPTokenField__defaultThemeClass(self, _cmd)
{
    return "tokenfield";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPTokenField__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", CGInsetMakeZero(), "editor-inset");
}
,["id"])]);
}{
var the_class = objj_getClass("CPTokenField")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTokenField\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_completionsForSubstring:indexOfToken:indexOfSelectedItem:"), function $CPTokenField___completionsForSubstring_indexOfToken_indexOfSelectedItem_(self, _cmd, substring, tokenIndex, selectedIndex)
{
    if (objj_msgSend(objj_msgSend(self, "delegate"), "respondsToSelector:", sel_getUid("tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:")))
    {
        return objj_msgSend(objj_msgSend(self, "delegate"), "tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:", self, substring, tokenIndex, selectedIndex);
    }
    return [];
}
,["CPArray","CPString","int","int"]), new objj_method(sel_getUid("_completionOrigin:"), function $CPTokenField___completionOrigin_(self, _cmd, anAutocompleteMenu)
{
    var relativeFrame = self._inputFrame ? objj_msgSend(objj_msgSend(self._tokenScrollView, "documentView"), "convertRect:toView:", self._inputFrame, self) : objj_msgSend(self, "bounds");
    return CGPointMake(CGRectGetMinX(relativeFrame), CGRectGetMaxY(relativeFrame));
}
,["CGPoint","_CPAutocompleteMenu"]), new objj_method(sel_getUid("_displayStringForRepresentedObject:"), function $CPTokenField___displayStringForRepresentedObject_(self, _cmd, representedObject)
{
    if (objj_msgSend(objj_msgSend(self, "delegate"), "respondsToSelector:", sel_getUid("tokenField:displayStringForRepresentedObject:")))
    {
        var stringForRepresentedObject = objj_msgSend(objj_msgSend(self, "delegate"), "tokenField:displayStringForRepresentedObject:", self, representedObject);
        if (stringForRepresentedObject !== nil)
        {
            return stringForRepresentedObject;
        }
    }
    return representedObject;
}
,["CPString","id"]), new objj_method(sel_getUid("_shouldAddObjects:atIndex:"), function $CPTokenField___shouldAddObjects_atIndex_(self, _cmd, tokens, index)
{
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:shouldAddObjects:atIndex:")))
    {
        var approvedObjects = objj_msgSend(delegate, "tokenField:shouldAddObjects:atIndex:", self, tokens, index);
        if (approvedObjects !== nil)
            return approvedObjects;
    }
    return tokens;
}
,["CPArray","CPArray","int"]), new objj_method(sel_getUid("_representedObjectForEditingString:"), function $CPTokenField___representedObjectForEditingString_(self, _cmd, aString)
{
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:representedObjectForEditingString:")))
    {
        var token = objj_msgSend(delegate, "tokenField:representedObjectForEditingString:", self, aString);
        if (token !== nil && token !== undefined)
            return token;
    }
    return aString;
}
,["id","CPString"]), new objj_method(sel_getUid("_hasMenuForRepresentedObject:"), function $CPTokenField___hasMenuForRepresentedObject_(self, _cmd, aRepresentedObject)
{
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:hasMenuForRepresentedObject:")) && objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:menuForRepresentedObject:")))
        return objj_msgSend(delegate, "tokenField:hasMenuForRepresentedObject:", self, aRepresentedObject);
    return NO;
}
,["BOOL","id"]), new objj_method(sel_getUid("_menuForRepresentedObject:"), function $CPTokenField___menuForRepresentedObject_(self, _cmd, aRepresentedObject)
{
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:hasMenuForRepresentedObject:")) && objj_msgSend(delegate, "respondsToSelector:", sel_getUid("tokenField:menuForRepresentedObject:")))
    {
        var hasMenu = objj_msgSend(delegate, "tokenField:hasMenuForRepresentedObject:", self, aRepresentedObject);
        if (hasMenu)
            return objj_msgSend(delegate, "tokenField:menuForRepresentedObject:", self, aRepresentedObject) || nil;
    }
    return nil;
}
,["CPMenu","id"]), new objj_method(sel_getUid("_delayedShowCompletions"), function $CPTokenField___delayedShowCompletions(self, _cmd)
{
    objj_msgSend(objj_msgSend(self, "_autocompleteMenu"), "_delayedShowCompletions");
}
,["void"]), new objj_method(sel_getUid("_hideCompletions"), function $CPTokenField___hideCompletions(self, _cmd)
{
    objj_msgSend(self._autocompleteMenu, "_hideCompletions");
}
,["void"]), new objj_method(sel_getUid("setButtonType:"), function $CPTokenField__setButtonType_(self, _cmd, aButtonType)
{
    if (self._buttonType === aButtonType)
        return;
    self._buttonType = aButtonType;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","int"])]);
}{var the_class = objj_allocateClassPair(CPTextField, "_CPTokenFieldToken"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_deleteButton"), new objj_ivar("_disclosureButton"), new objj_ivar("_tokenField"), new objj_ivar("_representedObject"), new objj_ivar("_buttonType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPTokenFieldToken__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPTokenFieldToken__initWithFrame_(self, _cmd, frame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldToken").super_class }, "initWithFrame:", frame))
    {
        objj_msgSend(self, "setEditable:", NO);
        objj_msgSend(self, "setHighlighted:", NO);
        objj_msgSend(self, "setBezeled:", YES);
        objj_msgSend(self, "setButtonType:", CPTokenFieldDisclosureButtonType);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("tokenField"), function $_CPTokenFieldToken__tokenField(self, _cmd)
{
    return self._tokenField;
}
,["CPTokenField"]), new objj_method(sel_getUid("setTokenField:"), function $_CPTokenFieldToken__setTokenField_(self, _cmd, tokenField)
{
    self._tokenField = tokenField;
}
,["void","CPTokenField"]), new objj_method(sel_getUid("representedObject"), function $_CPTokenFieldToken__representedObject(self, _cmd)
{
    return self._representedObject;
}
,["id"]), new objj_method(sel_getUid("setRepresentedObject:"), function $_CPTokenFieldToken__setRepresentedObject_(self, _cmd, representedObject)
{
    self._representedObject = representedObject;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","id"]), new objj_method(sel_getUid("setEditable:"), function $_CPTokenFieldToken__setEditable_(self, _cmd, shouldBeEditable)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldToken").super_class }, "setEditable:", shouldBeEditable);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("setThemeState:"), function $_CPTokenFieldToken__setThemeState_(self, _cmd, aState)
{
    var r = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldToken").super_class }, "setThemeState:", aState);
    if (aState & CPThemeStateHovered)
    {
        objj_msgSend(self._disclosureButton, "setThemeState:", CPThemeStateHovered);
        objj_msgSend(self._deleteButton, "setThemeState:", CPThemeStateHovered);
    }
    return r;
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("unsetThemeState:"), function $_CPTokenFieldToken__unsetThemeState_(self, _cmd, aState)
{
    var r = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldToken").super_class }, "unsetThemeState:", aState);
    if (aState & CPThemeStateHovered)
    {
        objj_msgSend(self._disclosureButton, "unsetThemeState:", CPThemeStateHovered);
        objj_msgSend(self._deleteButton, "unsetThemeState:", CPThemeStateHovered);
    }
    return r;
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("_minimumFrameSize"), function $_CPTokenFieldToken___minimumFrameSize(self, _cmd)
{
    var size = CGSizeMakeZero(),
        minSize = objj_msgSend(self, "currentValueForThemeAttribute:", "min-size"),
        contentInset = objj_msgSend(self, "currentValueForThemeAttribute:", "content-inset");
    size.height = minSize.height;
    size.width = MAX(minSize.width, objj_msgSend(objj_msgSend(self, "stringValue") || " ", "sizeWithFont:", objj_msgSend(self, "font")).width + contentInset.left + contentInset.right);
    return size;
}
,["CGSize"]), new objj_method(sel_getUid("setButtonType:"), function $_CPTokenFieldToken__setButtonType_(self, _cmd, aButtonType)
{
    if (self._buttonType === aButtonType)
        return;
    self._buttonType = aButtonType;
    if (self._buttonType === CPTokenFieldDisclosureButtonType)
    {
        if (self._deleteButton)
        {
            objj_msgSend(self._deleteButton, "removeFromSuperview");
            self._deleteButton = nil;
        }
        if (!self._disclosureButton)
        {
            self._disclosureButton = objj_msgSend(objj_msgSend(_CPTokenFieldTokenDisclosureButton, "alloc"), "initWithFrame:", CGRectMakeZero());
            objj_msgSend(self, "addSubview:", self._disclosureButton);
        }
    }
    else
    {
        if (self._disclosureButton)
        {
            objj_msgSend(self._disclosureButton, "removeFromSuperview");
            self._disclosureButton = nil;
        }
        if (!self._deleteButton)
        {
            self._deleteButton = objj_msgSend(objj_msgSend(_CPTokenFieldTokenCloseButton, "alloc"), "initWithFrame:", CGRectMakeZero());
            objj_msgSend(self, "addSubview:", self._deleteButton);
            objj_msgSend(self._deleteButton, "setTarget:", self);
            objj_msgSend(self._deleteButton, "setAction:", sel_getUid("_delete:"));
        }
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void","int"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPTokenFieldToken__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldToken").super_class }, "layoutSubviews");
    var bezelView = objj_msgSend(self, "layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:", "bezel-view", CPWindowBelow, "content-view");
    if (bezelView && self._tokenField)
    {
        switch(self._buttonType) {
        case CPTokenFieldDisclosureButtonType:
            var shouldBeEnabled = objj_msgSend(self, "hasMenu");
            objj_msgSend(self._disclosureButton, "setHidden:", !shouldBeEnabled);
            if (shouldBeEnabled)
                objj_msgSend(self._disclosureButton, "setMenu:", objj_msgSend(self, "menu"));
            var frame = objj_msgSend(bezelView, "frame"),
                buttonOffset = objj_msgSend(self._disclosureButton, "currentValueForThemeAttribute:", "offset"),
                buttonSize = objj_msgSend(self._disclosureButton, "currentValueForThemeAttribute:", "min-size");
            objj_msgSend(self._disclosureButton, "setFrame:", CGRectMake(CGRectGetMaxX(frame) - buttonOffset.x, CGRectGetMinY(frame) + buttonOffset.y, buttonSize.width, buttonSize.height));
            break;
        case CPTokenFieldDeleteButtonType:
            objj_msgSend(self._deleteButton, "setEnabled:", objj_msgSend(self, "isEditable") && objj_msgSend(self, "isEnabled"));
            var frame = objj_msgSend(bezelView, "frame"),
                buttonOffset = objj_msgSend(self._deleteButton, "currentValueForThemeAttribute:", "offset"),
                buttonSize = objj_msgSend(self._deleteButton, "currentValueForThemeAttribute:", "min-size");
            objj_msgSend(self._deleteButton, "setFrame:", CGRectMake(CGRectGetMaxX(frame) - buttonOffset.x, CGRectGetMinY(frame) + buttonOffset.y, buttonSize.width, buttonSize.height));
            break;
        }
    }
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $_CPTokenFieldToken__mouseDown_(self, _cmd, anEvent)
{
    objj_msgSend(self._tokenField, "_mouseDownOnToken:withEvent:", self, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $_CPTokenFieldToken__mouseUp_(self, _cmd, anEvent)
{
    objj_msgSend(self._tokenField, "_mouseUpOnToken:withEvent:", self, anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_delete:"), function $_CPTokenFieldToken___delete_(self, _cmd, sender)
{
    if (objj_msgSend(self, "isEditable"))
        objj_msgSend(self._tokenField, "_deleteToken:", self);
}
,["void","id"]), new objj_method(sel_getUid("hasMenu"), function $_CPTokenFieldToken__hasMenu(self, _cmd)
{
    return objj_msgSend(self._tokenField, "_hasMenuForRepresentedObject:", self._representedObject);
}
,["BOOL"]), new objj_method(sel_getUid("menu"), function $_CPTokenFieldToken__menu(self, _cmd)
{
    return objj_msgSend(self._tokenField, "_menuForRepresentedObject:", self._representedObject);
}
,["CPMenu"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPTokenFieldToken__defaultThemeClass(self, _cmd)
{
    return "tokenfield-token";
}
,["CPString"])]);
}{var the_class = objj_allocateClassPair(CPButton, "_CPTokenFieldTokenCloseButton"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("mouseEntered:"), function $_CPTokenFieldTokenCloseButton__mouseEntered_(self, _cmd, anEvent)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $_CPTokenFieldTokenCloseButton__mouseExited_(self, _cmd, anEvent)
{
}
,["void","CPEvent"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("themeAttributes"), function $_CPTokenFieldTokenCloseButton__themeAttributes(self, _cmd)
{
    var attributes = objj_msgSend(CPButton, "themeAttributes");
    objj_msgSend(attributes, "setObject:forKey:", CGPointMake(15, 5), "offset");
    return attributes;
}
,["id"]), new objj_method(sel_getUid("defaultThemeClass"), function $_CPTokenFieldTokenCloseButton__defaultThemeClass(self, _cmd)
{
    return "tokenfield-token-close-button";
}
,["CPString"])]);
}{var the_class = objj_allocateClassPair(CPPopUpButton, "_CPTokenFieldTokenDisclosureButton"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPTokenFieldTokenDisclosureButton__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSend(self, "initWithFrame:pullsDown:", aFrame, YES))
    {
        objj_msgSend(self, "setBordered:", YES);
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTokenFieldTokenDisclosureButton").super_class }, "setTitle:", "");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setTitle:"), function $_CPTokenFieldTokenDisclosureButton__setTitle_(self, _cmd, aTitle)
{
}
,["void","CPString"]), new objj_method(sel_getUid("synchronizeTitleAndSelectedItem"), function $_CPTokenFieldTokenDisclosureButton__synchronizeTitleAndSelectedItem(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("mouseEntered:"), function $_CPTokenFieldTokenDisclosureButton__mouseEntered_(self, _cmd, anEvent)
{
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseExited:"), function $_CPTokenFieldTokenDisclosureButton__mouseExited_(self, _cmd, anEvent)
{
}
,["void","CPEvent"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("themeAttributes"), function $_CPTokenFieldTokenDisclosureButton__themeAttributes(self, _cmd)
{
    var attributes = objj_msgSend(CPButton, "themeAttributes");
    objj_msgSend(attributes, "setObject:forKey:", CGPointMake(15, 5), "offset");
    return attributes;
}
,["id"]), new objj_method(sel_getUid("defaultThemeClass"), function $_CPTokenFieldTokenDisclosureButton__defaultThemeClass(self, _cmd)
{
    return "tokenfield-token-disclosure-button";
}
,["CPString"])]);
}var CPTokenFieldTokenizingCharacterSetKey = "CPTokenFieldTokenizingCharacterSetKey",
    CPTokenFieldCompletionDelayKey = "CPTokenFieldCompletionDelay",
    CPTokenFieldButtonTypeKey = "CPTokenFieldButtonTypeKey";
{
var the_class = objj_getClass("CPTokenField")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTokenField\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTokenField__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._tokenizingCharacterSet = objj_msgSend(aCoder, "decodeObjectForKey:", CPTokenFieldTokenizingCharacterSetKey) || objj_msgSend(objj_msgSend(self, "class"), "defaultTokenizingCharacterSet");
        self._completionDelay = objj_msgSend(aCoder, "decodeDoubleForKey:", CPTokenFieldCompletionDelayKey) || objj_msgSend(objj_msgSend(self, "class"), "defaultCompletionDelay");
        self._buttonType = objj_msgSend(aCoder, "decodeIntForKey:", CPTokenFieldButtonTypeKey) || CPTokenFieldDisclosureButtonType;
        objj_msgSend(self, "_init");
        objj_msgSend(self, "setNeedsLayout");
        objj_msgSend(self, "setNeedsDisplay:", YES);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTokenField__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTokenField").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._tokenizingCharacterSet, CPTokenFieldTokenizingCharacterSetKey);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._completionDelay, CPTokenFieldCompletionDelayKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._buttonType, CPTokenFieldButtonTypeKey);
}
,["void","CPCoder"])]);
}p;11;CPToolbar.jt;41419;@STATIC;1.0;I;21;Foundation/CPObject.ji;15;CPPopUpButton.ji;15;CPToolbarItem.jt;41333;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPPopUpButton.j", YES);objj_executeFile("CPToolbarItem.j", YES);CPToolbarDisplayModeDefault = 0;
CPToolbarDisplayModeIconAndLabel = 1;
CPToolbarDisplayModeIconOnly = 2;
CPToolbarDisplayModeLabelOnly = 3;
CPToolbarSizeModeDefault = 0;
CPToolbarSizeModeRegular = 1;
CPToolbarSizeModeSmall = 2;
var CPToolbarsByIdentifier = nil,
    CPToolbarConfigurationsByIdentifier = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPToolbar"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_identifier"), new objj_ivar("_displayMode"), new objj_ivar("_showsBaselineSeparator"), new objj_ivar("_allowsUserCustomization"), new objj_ivar("_isVisible"), new objj_ivar("_sizeMode"), new objj_ivar("_desiredHeight"), new objj_ivar("_delegate"), new objj_ivar("_itemIdentifiers"), new objj_ivar("_identifiedItems"), new objj_ivar("_defaultItems"), new objj_ivar("_allowedItems"), new objj_ivar("_selectableItems"), new objj_ivar("_items"), new objj_ivar("_itemsSortedByVisibilityPriority"), new objj_ivar("_toolbarView"), new objj_ivar("_window")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("displayMode"), function $CPToolbar__displayMode(self, _cmd)
{
    return self._displayMode;
}
,["CPToolbarDisplayMode"]), new objj_method(sel_getUid("setDisplayMode:"), function $CPToolbar__setDisplayMode_(self, _cmd, newValue)
{
    self._displayMode = newValue;
}
,["void","CPToolbarDisplayMode"]), new objj_method(sel_getUid("sizeMode"), function $CPToolbar__sizeMode(self, _cmd)
{
    return self._sizeMode;
}
,["int"]), new objj_method(sel_getUid("setSizeMode:"), function $CPToolbar__setSizeMode_(self, _cmd, newValue)
{
    self._sizeMode = newValue;
}
,["void","int"]), new objj_method(sel_getUid("init"), function $CPToolbar__init(self, _cmd)
{
    return objj_msgSend(self, "initWithIdentifier:", "");
}
,["id"]), new objj_method(sel_getUid("initWithIdentifier:"), function $CPToolbar__initWithIdentifier_(self, _cmd, anIdentifier)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPToolbar").super_class }, "init");
    if (self)
    {
        self._items = [];
        self._identifier = anIdentifier;
        self._isVisible = YES;
        self._sizeMode = CPToolbarSizeModeDefault;
        self._desiredHeight = 0;
        objj_msgSend(CPToolbar, "_addToolbar:forIdentifier:", self, self._identifier);
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("identifier"), function $CPToolbar__identifier(self, _cmd)
{
    return self._identifier;
}
,["CPString"]), new objj_method(sel_getUid("delegate"), function $CPToolbar__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("isVisible"), function $CPToolbar__isVisible(self, _cmd)
{
    return self._isVisible;
}
,["BOOL"]), new objj_method(sel_getUid("setVisible:"), function $CPToolbar__setVisible_(self, _cmd, aFlag)
{
    if (self._isVisible === aFlag)
        return;
    self._isVisible = aFlag;
    objj_msgSend(self._window, "_noteToolbarChanged");
}
,["void","BOOL"]), new objj_method(sel_getUid("setSizeMode:"), function $CPToolbar__setSizeMode_(self, _cmd, aSize)
{
    if (aSize === self._sizeMode)
        return;
    self._sizeMode = aSize;
    objj_msgSend(objj_msgSend(self, "_toolbarView"), "setFrame:", objj_msgSend(self, "_toolbarViewFrame"));
    objj_msgSend(self._window, "_noteToolbarChanged");
}
,["void","CPToolbarSizeMode"]), new objj_method(sel_getUid("_window"), function $CPToolbar___window(self, _cmd)
{
    return self._window;
}
,["CPWindow"]), new objj_method(sel_getUid("_setWindow:"), function $CPToolbar___setWindow_(self, _cmd, aWindow)
{
    if (self._window)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:name:object:", self, _CPWindowDidChangeFirstResponderNotification, self._window);
    self._window = aWindow;
    if (self._window)
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_autoValidateVisibleItems"), _CPWindowDidChangeFirstResponderNotification, aWindow);
}
,["void","CPWindow"]), new objj_method(sel_getUid("setDelegate:"), function $CPToolbar__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate === aDelegate)
        return;
    self._delegate = aDelegate;
    objj_msgSend(self, "_reloadToolbarItems");
}
,["void","id"]), new objj_method(sel_getUid("setDisplayMode:"), function $CPToolbar__setDisplayMode_(self, _cmd, aDisplayMode)
{
    if (self._displayMode === aDisplayMode)
        return;
    self._displayMode = aDisplayMode;
    objj_msgSend(self, "_reloadToolbarItems");
}
,["void","CPToolbarDisplayMode"]), new objj_method(sel_getUid("_loadConfiguration"), function $CPToolbar___loadConfiguration(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("_toolbarViewFrame"), function $CPToolbar___toolbarViewFrame(self, _cmd)
{
    var height = self._desiredHeight || (self._sizeMode != CPToolbarSizeModeSmall ? objj_msgSend(self._toolbarView, "valueForThemeAttribute:", "regular-size-height") : objj_msgSend(self._toolbarView, "valueForThemeAttribute:", "small-size-height"));
    return CGRectMake(0.0, 0.0, 1200.0, height);
}
,["CGRect"]), new objj_method(sel_getUid("_toolbarView"), function $CPToolbar___toolbarView(self, _cmd)
{
    if (!self._toolbarView)
    {
        self._toolbarView = objj_msgSend(objj_msgSend(_CPToolbarView, "alloc"), "initWithFrame:", objj_msgSend(self, "_toolbarViewFrame"));
        objj_msgSend(self._toolbarView, "setToolbar:", self);
        objj_msgSend(self._toolbarView, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self._toolbarView, "reloadToolbarItems");
    }
    return self._toolbarView;
}
,["CPView"]), new objj_method(sel_getUid("_reloadToolbarItems"), function $CPToolbar___reloadToolbarItems(self, _cmd)
{
    self._itemIdentifiers = objj_msgSend(self._defaultItems, "valueForKey:", "itemIdentifier") || [];
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("toolbarDefaultItemIdentifiers:")))
    {
        var itemIdentifiersFromDelegate = objj_msgSend(self._delegate, "toolbarDefaultItemIdentifiers:", self);
        if (itemIdentifiersFromDelegate)
            self._itemIdentifiers = objj_msgSend(itemIdentifiersFromDelegate, "arrayByAddingObjectsFromArray:", self._itemIdentifiers);
    }
    var index = 0,
        count = objj_msgSend(self._itemIdentifiers, "count");
    self._items = [];
    for (; index < count; ++index)
    {
        var identifier = self._itemIdentifiers[index],
            item = objj_msgSend(CPToolbarItem, "_standardItemWithItemIdentifier:", identifier);
        if (!item)
            item = objj_msgSend(self._identifiedItems, "objectForKey:", identifier);
        if (!item && self._delegate)
            item = objj_msgSend(self._delegate, "toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:", self, identifier, YES);
        item = objj_msgSend(item, "copy");
        if (item === nil)
            objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Toolbar delegate " + self._delegate + " returned nil toolbar item for identifier \"" + identifier + "\"");
        item._toolbar = self;
        objj_msgSend(self._items, "addObject:", item);
    }
    self._itemsSortedByVisibilityPriority = objj_msgSend(self._items, "sortedArrayUsingFunction:context:", _CPToolbarItemVisibilityPriorityCompare, NULL);
    objj_msgSend(self._toolbarView, "reloadToolbarItems");
}
,["void"]), new objj_method(sel_getUid("items"), function $CPToolbar__items(self, _cmd)
{
    return self._items;
}
,["CPArray"]), new objj_method(sel_getUid("visibleItems"), function $CPToolbar__visibleItems(self, _cmd)
{
    return objj_msgSend(self._toolbarView, "visibleItems");
}
,["CPArray"]), new objj_method(sel_getUid("itemsSortedByVisibilityPriority"), function $CPToolbar__itemsSortedByVisibilityPriority(self, _cmd)
{
    return self._itemsSortedByVisibilityPriority;
}
,["CPArray"]), new objj_method(sel_getUid("validateVisibleItems"), function $CPToolbar__validateVisibleItems(self, _cmd)
{
    objj_msgSend(self, "_validateVisibleItems:", NO);
}
,["void"]), new objj_method(sel_getUid("_autoValidateVisibleItems"), function $CPToolbar___autoValidateVisibleItems(self, _cmd)
{
    objj_msgSend(self, "_validateVisibleItems:", YES);
}
,["void"]), new objj_method(sel_getUid("_validateVisibleItems:"), function $CPToolbar___validateVisibleItems_(self, _cmd, isAutovalidation)
{
    var toolbarItems = objj_msgSend(self, "visibleItems"),
        count = objj_msgSend(toolbarItems, "count");
    while (count--)
    {
        var item = objj_msgSend(toolbarItems, "objectAtIndex:", count);
        if (!isAutovalidation || objj_msgSend(item, "autovalidates"))
            objj_msgSend(item, "validate");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("_itemForItemIdentifier:willBeInsertedIntoToolbar:"), function $CPToolbar___itemForItemIdentifier_willBeInsertedIntoToolbar_(self, _cmd, identifier, toolbar)
{
    var item = objj_msgSend(self._identifiedItems, "objectForKey:", identifier);
    if (!item)
    {
        item = objj_msgSend(CPToolbarItem, "_standardItemWithItemIdentifier:", identifier);
        if (self._delegate && !item)
        {
            item = objj_msgSend(objj_msgSend(self._delegate, "toolbar:itemForItemIdentifier:willBeInsertedIntoToolbar:", self, identifier, toolbar), "copy");
            if (!item)
                objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Toolbar delegate " + self._delegate + " returned nil toolbar item for identifier " + identifier);
        }
        objj_msgSend(self._identifiedItems, "setObject:forKey:", item, identifier);
    }
    return item;
}
,["id","CPString","BOOL"]), new objj_method(sel_getUid("_itemsWithIdentifiers:"), function $CPToolbar___itemsWithIdentifiers_(self, _cmd, identifiers)
{
    var items = [];
    for (var i = 0; i < identifiers.length; i++)
        objj_msgSend(items, "addObject:", objj_msgSend(self, "_itemForItemIdentifier:willBeInsertedIntoToolbar:", identifiers[i], NO));
    return items;
}
,["id","CPArray"]), new objj_method(sel_getUid("_defaultToolbarItems"), function $CPToolbar___defaultToolbarItems(self, _cmd)
{
    if (!self._defaultItems && objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("toolbarDefaultItemIdentifiers:")))
    {
        self._defaultItems = [];
        var identifiers = objj_msgSend(self._delegate, "toolbarDefaultItemIdentifiers:", self),
            index = 0,
            count = objj_msgSend(identifiers, "count");
        for (; index < count; ++index)
            objj_msgSend(self._defaultItems, "addObject:", objj_msgSend(self, "_itemForItemIdentifier:willBeInsertedIntoToolbar:", identifiers[index], NO));
    }
    return self._defaultItems;
}
,["id"]), new objj_method(sel_getUid("toolbarItemDidChange:"), function $CPToolbar__toolbarItemDidChange_(self, _cmd, anItem)
{
    if (objj_msgSend(self._identifiedItems, "objectForKey:", objj_msgSend(anItem, "itemIdentifier")))
        objj_msgSend(self._identifiedItems, "setObject:forKey:", anItem, objj_msgSend(anItem, "itemIdentifier"));
    var index = 0,
        count = objj_msgSend(self._items, "count");
    for (; index <= count; ++index)
    {
        var item = self._items[index];
        if (objj_msgSend(item, "itemIdentifier") === objj_msgSend(anItem, "itemIdentifier"))
        {
            self._items[index] = anItem;
            self._itemsSortedByVisibilityPriority = objj_msgSend(self._items, "sortedArrayUsingFunction:context:", _CPToolbarItemVisibilityPriorityCompare, NULL);
            objj_msgSend(self._toolbarView, "reloadToolbarItems");
        }
    }
}
,["void","CPToolbarItem"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPToolbar__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPToolbar, "class"))
        return;
    CPToolbarsByIdentifier = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    CPToolbarConfigurationsByIdentifier = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
}
,["void"]), new objj_method(sel_getUid("_addToolbar:forIdentifier:"), function $CPToolbar___addToolbar_forIdentifier_(self, _cmd, toolbar, identifier)
{
    var toolbarsSharingIdentifier = objj_msgSend(CPToolbarsByIdentifier, "objectForKey:", identifier);
    if (!toolbarsSharingIdentifier)
    {
        toolbarsSharingIdentifier = [];
        objj_msgSend(CPToolbarsByIdentifier, "setObject:forKey:", toolbarsSharingIdentifier, identifier);
    }
    objj_msgSend(toolbarsSharingIdentifier, "addObject:", toolbar);
}
,["void","CPToolbar","CPString"])]);
}var CPToolbarIdentifierKey = "CPToolbarIdentifierKey",
    CPToolbarDisplayModeKey = "CPToolbarDisplayModeKey",
    CPToolbarShowsBaselineSeparatorKey = "CPToolbarShowsBaselineSeparatorKey",
    CPToolbarAllowsUserCustomizationKey = "CPToolbarAllowsUserCustomizationKey",
    CPToolbarIsVisibleKey = "CPToolbarIsVisibleKey",
    CPToolbarDelegateKey = "CPToolbarDelegateKey",
    CPToolbarIdentifiedItemsKey = "CPToolbarIdentifiedItemsKey",
    CPToolbarDefaultItemsKey = "CPToolbarDefaultItemsKey",
    CPToolbarAllowedItemsKey = "CPToolbarAllowedItemsKey",
    CPToolbarSelectableItemsKey = "CPToolbarSelectableItemsKey",
    CPToolbarSizeModeKey = "CPToolbarSizeModeKey";
{
var the_class = objj_getClass("CPToolbar")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPToolbar\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPToolbar__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPToolbar").super_class }, "init");
    if (self)
    {
        self._identifier = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarIdentifierKey);
        self._displayMode = objj_msgSend(aCoder, "decodeIntForKey:", CPToolbarDisplayModeKey);
        self._showsBaselineSeparator = objj_msgSend(aCoder, "decodeBoolForKey:", CPToolbarShowsBaselineSeparatorKey);
        self._allowsUserCustomization = objj_msgSend(aCoder, "decodeBoolForKey:", CPToolbarAllowsUserCustomizationKey);
        self._isVisible = objj_msgSend(aCoder, "decodeBoolForKey:", CPToolbarIsVisibleKey);
        self._sizeMode = objj_msgSend(aCoder, "decodeIntForKey:", CPToolbarSizeModeKey);
        self._identifiedItems = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarIdentifiedItemsKey);
        self._defaultItems = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarDefaultItemsKey);
        self._allowedItems = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarAllowedItemsKey);
        self._selectableItems = objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarSelectableItemsKey);
        objj_msgSend(objj_msgSend(self._identifiedItems, "allValues"), "makeObjectsPerformSelector:withObject:", sel_getUid("_setToolbar:"), self);
        self._items = [];
        objj_msgSend(CPToolbar, "_addToolbar:forIdentifier:", self, self._identifier);
        objj_msgSend(self, "setDelegate:", objj_msgSend(aCoder, "decodeObjectForKey:", CPToolbarDelegateKey));
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "performSelector:target:argument:order:modes:", sel_getUid("_reloadToolbarItems"), self, nil, 0, [CPDefaultRunLoopMode]);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPToolbar__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._identifier, CPToolbarIdentifierKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._displayMode, CPToolbarDisplayModeKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._showsBaselineSeparator, CPToolbarShowsBaselineSeparatorKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._allowsUserCustomization, CPToolbarAllowsUserCustomizationKey);
    objj_msgSend(aCoder, "encodeBool:forKey:", self._isVisible, CPToolbarIsVisibleKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._sizeMode, CPToolbarSizeModeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._identifiedItems, CPToolbarIdentifiedItemsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._defaultItems, CPToolbarDefaultItemsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._allowedItems, CPToolbarAllowedItemsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._selectableItems, CPToolbarSelectableItemsKey);
    objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._delegate, CPToolbarDelegateKey);
}
,["void","CPCoder"])]);
}var _CPToolbarViewBackgroundColor = nil,
    _CPToolbarViewExtraItemsImage = nil,
    _CPToolbarViewExtraItemsAlternateImage = nil;
var _CPToolbarItemInfoMake = function(anIndex, aView, aLabel, aMinWidth)
{
    return {index: anIndex, view: aView, label: aLabel, minWidth: aMinWidth};
};
{var the_class = objj_allocateClassPair(CPView, "_CPToolbarView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_toolbar"), new objj_ivar("_flexibleWidthIndexes"), new objj_ivar("_visibleFlexibleWidthIndexes"), new objj_ivar("_itemInfos"), new objj_ivar("_viewsForToolbarItems"), new objj_ivar("_visibleItems"), new objj_ivar("_invisibleItems"), new objj_ivar("_additionalItemsButton"), new objj_ivar("_labelColor"), new objj_ivar("_labelShadowColor"), new objj_ivar("_minWidth"), new objj_ivar("_FIXME_isHUD")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("visibleItems"), function $_CPToolbarView__visibleItems(self, _cmd)
{
    return self._visibleItems;
}
,["CPArray"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPToolbarView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._minWidth = 0;
        self._labelColor = objj_msgSend(CPColor, "blackColor");
        self._labelShadowColor = objj_msgSend(CPColor, "colorWithWhite:alpha:", 1.0, 0.75);
        self._additionalItemsButton = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "initWithFrame:pullsDown:", CGRectMake(0.0, 0.0, 10.0, 15.0), YES);
        objj_msgSend(self._additionalItemsButton, "setBordered:", NO);
        objj_msgSend(self._additionalItemsButton, "setImagePosition:", CPImageOnly);
        objj_msgSend(objj_msgSend(self._additionalItemsButton, "menu"), "setShowsStateColumn:", NO);
        objj_msgSend(objj_msgSend(self._additionalItemsButton, "menu"), "setAutoenablesItems:", NO);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setToolbar:"), function $_CPToolbarView__setToolbar_(self, _cmd, aToolbar)
{
    self._toolbar = aToolbar;
}
,["void","CPToolbar"]), new objj_method(sel_getUid("toolbar"), function $_CPToolbarView__toolbar(self, _cmd)
{
    return self._toolbar;
}
,["CPToolbar"]), new objj_method(sel_getUid("FIXME_setIsHUD:"), function $_CPToolbarView__FIXME_setIsHUD_(self, _cmd, shouldBeHUD)
{
    if (self._FIXME_isHUD === shouldBeHUD)
        return;
    self._FIXME_isHUD = shouldBeHUD;
    var items = objj_msgSend(self._toolbar, "items"),
        count = objj_msgSend(items, "count");
    while (count--)
        objj_msgSend(objj_msgSend(self, "viewForItem:", items[count]), "FIXME_setIsHUD:", shouldBeHUD);
}
,["void","BOOL"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $_CPToolbarView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
    objj_msgSend(self, "tile");
}
,["void","CGSize"]), new objj_method(sel_getUid("viewForItem:"), function $_CPToolbarView__viewForItem_(self, _cmd, anItem)
{
    return self._viewsForToolbarItems[objj_msgSend(anItem, "UID")] || nil;
}
,["_CPToolbarItemView","CPToolbarItem"]), new objj_method(sel_getUid("tile"), function $_CPToolbarView__tile(self, _cmd)
{
    var items = objj_msgSend(self._toolbar, "items"),
        itemsWidth = CGRectGetWidth(objj_msgSend(self, "bounds")),
        minWidth = self._minWidth,
        invisibleItemsSortedByPriority = [];
    self._visibleItems = items;
    if (itemsWidth < minWidth)
    {
        itemsWidth -= objj_msgSend(self, "valueForThemeAttribute:", "extra-item-width");
        self._visibleItems = objj_msgSend(self._visibleItems, "copy");
        var itemsSortedByVisibilityPriority = objj_msgSend(self._toolbar, "itemsSortedByVisibilityPriority"),
            count = itemsSortedByVisibilityPriority.length;
        while (minWidth > itemsWidth && count)
        {
            var item = itemsSortedByVisibilityPriority[--count],
                view = objj_msgSend(self, "viewForItem:", item);
            minWidth -= objj_msgSend(view, "minSize").width + objj_msgSend(self, "valueForThemeAttribute:", "item-margin");
            objj_msgSend(self._visibleItems, "removeObjectIdenticalTo:", item);
            objj_msgSend(invisibleItemsSortedByPriority, "addObject:", item);
            objj_msgSend(view, "setHidden:", YES);
            objj_msgSend(view, "FIXME_setIsHUD:", self._FIXME_isHUD);
        }
    }
    var count = objj_msgSend(items, "count"),
        height = 0.0;
    while (count--)
    {
        var view = objj_msgSend(self, "viewForItem:", items[count]),
            minSize = objj_msgSend(view, "minSize");
        if (height < minSize.height)
            height = minSize.height;
    }
    var contentInset = objj_msgSend(self, "valueForThemeAttribute:", "content-inset"),
        newDesiredHeight = height ? height + contentInset.top + contentInset.bottom : 0;
    if (newDesiredHeight != self._toolbar._desiredHeight)
    {
        self._toolbar._desiredHeight = newDesiredHeight;
        objj_msgSend(self, "setFrame:", objj_msgSend(self._toolbar, "_toolbarViewFrame"));
        objj_msgSend(self._toolbar._window, "_noteToolbarChanged");
        return;
    }
    var count = self._visibleItems.length,
        flexibleItemIndexes = objj_msgSend(CPIndexSet, "indexSet");
    while (count--)
    {
        var item = self._visibleItems[count],
            view = objj_msgSend(self, "viewForItem:", item),
            minSize = objj_msgSend(view, "minSize");
        if (minSize.width !== objj_msgSend(view, "maxSize").width)
            objj_msgSend(flexibleItemIndexes, "addIndex:", count);
        else
            objj_msgSend(view, "setFrameSize:", CGSizeMake(minSize.width, height));
        objj_msgSend(view, "setHidden:", NO);
    }
    var remainingSpace = itemsWidth - minWidth,
        proportionate = 0.0;
    while (remainingSpace && objj_msgSend(flexibleItemIndexes, "count"))
    {
        proportionate += remainingSpace / objj_msgSend(flexibleItemIndexes, "count");
        remainingSpace = 0.0;
        var index = CPNotFound;
        while ((index = objj_msgSend(flexibleItemIndexes, "indexGreaterThanIndex:", index)) !== CPNotFound)
        {
            var item = self._visibleItems[index],
                view = objj_msgSend(self, "viewForItem:", item),
                proposedWidth = objj_msgSend(view, "minSize").width + proportionate,
                constrainedWidth = MIN(proposedWidth, objj_msgSend(view, "maxSize").width);
            if (constrainedWidth < proposedWidth)
            {
                objj_msgSend(flexibleItemIndexes, "removeIndex:", index);
                remainingSpace += proposedWidth - constrainedWidth;
            }
            objj_msgSend(view, "setFrameSize:", CGSizeMake(constrainedWidth, height));
        }
    }
    var index = 0,
        count = self._visibleItems.length,
        x = contentInset.left,
        contentInset = objj_msgSend(self, "valueForThemeAttribute:", "content-inset"),
        y = contentInset.top;
    for (; index < count; ++index)
    {
        var view = objj_msgSend(self, "viewForItem:", self._visibleItems[index]),
            viewWidth = CGRectGetWidth(objj_msgSend(view, "frame"));
        objj_msgSend(view, "setFrame:", CGRectMake(x, y, viewWidth, height));
        x += viewWidth + objj_msgSend(self, "valueForThemeAttribute:", "item-margin");
    }
    var needsAdditionalItemsButton = NO;
    if (objj_msgSend(invisibleItemsSortedByPriority, "count"))
    {
        var index = 0,
            count = objj_msgSend(items, "count");
        self._invisibleItems = [];
        for (; index < count; ++index)
        {
            var item = items[index];
            if (objj_msgSend(invisibleItemsSortedByPriority, "indexOfObjectIdenticalTo:", item) !== CPNotFound)
            {
                objj_msgSend(self._invisibleItems, "addObject:", item);
                var identifier = objj_msgSend(item, "itemIdentifier");
                if (identifier !== CPToolbarSpaceItemIdentifier && identifier !== CPToolbarFlexibleSpaceItemIdentifier && identifier !== CPToolbarSeparatorItemIdentifier)
                    needsAdditionalItemsButton = YES;
            }
        }
    }
    if (needsAdditionalItemsButton)
    {
        objj_msgSend(self._additionalItemsButton, "setFrameOrigin:", CGPointMake(itemsWidth + 5.0, (CGRectGetHeight(objj_msgSend(self, "bounds")) - CGRectGetHeight(objj_msgSend(self._additionalItemsButton, "frame"))) / 2.0));
        objj_msgSend(self, "addSubview:", self._additionalItemsButton);
        objj_msgSend(self._additionalItemsButton, "removeAllItems");
        objj_msgSend(self._additionalItemsButton, "addItemWithTitle:", "Additional Items");
        objj_msgSend(objj_msgSend(self._additionalItemsButton, "itemArray")[0], "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "extra-item-extra-image"));
        var index = 0,
            count = objj_msgSend(self._invisibleItems, "count"),
            hasNonSeparatorItem = NO;
        for (; index < count; ++index)
        {
            var item = self._invisibleItems[index],
                identifier = objj_msgSend(item, "itemIdentifier");
            if (identifier === CPToolbarSpaceItemIdentifier || identifier === CPToolbarFlexibleSpaceItemIdentifier)
                continue;
            if (identifier === CPToolbarSeparatorItemIdentifier)
            {
                if (hasNonSeparatorItem)
                    objj_msgSend(self._additionalItemsButton, "addItem:", objj_msgSend(CPMenuItem, "separatorItem"));
                continue;
            }
            hasNonSeparatorItem = YES;
            var menuItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", objj_msgSend(item, "label"), sel_getUid("didSelectMenuItem:"), nil);
            objj_msgSend(menuItem, "setRepresentedObject:", item);
            objj_msgSend(menuItem, "setImage:", objj_msgSend(item, "image"));
            objj_msgSend(menuItem, "setTarget:", self);
            objj_msgSend(menuItem, "setEnabled:", objj_msgSend(item, "isEnabled"));
            objj_msgSend(self._additionalItemsButton, "addItem:", menuItem);
        }
    }
    else
        objj_msgSend(self._additionalItemsButton, "removeFromSuperview");
}
,["void"]), new objj_method(sel_getUid("didSelectMenuItem:"), function $_CPToolbarView__didSelectMenuItem_(self, _cmd, aSender)
{
    var toolbarItem = objj_msgSend(aSender, "representedObject");
    objj_msgSend(CPApp, "sendAction:to:from:", objj_msgSend(toolbarItem, "action"), objj_msgSend(toolbarItem, "target"), toolbarItem);
}
,["void","id"]), new objj_method(sel_getUid("reloadToolbarItems"), function $_CPToolbarView__reloadToolbarItems(self, _cmd)
{
    var subviews = objj_msgSend(self, "subviews"),
        count = subviews.length;
    while (count--)
        objj_msgSend(subviews[count], "removeFromSuperview");
    var items = objj_msgSend(self._toolbar, "items"),
        index = 0;
    count = items.length;
    self._minWidth = objj_msgSend(self, "valueForThemeAttribute:", "item-margin");
    self._viewsForToolbarItems = {};
    for (; index < count; ++index)
    {
        var item = items[index],
            view = objj_msgSend(objj_msgSend(_CPToolbarItemView, "alloc"), "initWithToolbarItem:toolbar:", item, self);
        self._viewsForToolbarItems[objj_msgSend(item, "UID")] = view;
        if (objj_msgSend(item, "toolTip") && objj_msgSend(view, "respondsToSelector:", sel_getUid("setToolTip:")))
            objj_msgSend(view, "setToolTip:", objj_msgSend(item, "toolTip"));
        objj_msgSend(self, "addSubview:", view);
        self._minWidth += objj_msgSend(view, "minSize").width + objj_msgSend(self, "valueForThemeAttribute:", "item-margin");
    }
    objj_msgSend(self, "tile");
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPToolbarView__layoutSubviews(self, _cmd)
{
    objj_msgSend(self._additionalItemsButton, "setAlternateImage:", objj_msgSend(self, "valueForThemeAttribute:", "extra-item-extra-alternate-image"));
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPToolbarView__defaultThemeClass(self, _cmd)
{
    return "toolbar-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPToolbarView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", 10.0, "item-margin", 20.0, "extra-item-width", objj_msgSend(CPNull, "null"), "extra-item-extra-image", objj_msgSend(CPNull, "null"), "extra-item-extra-alternate-image", CGInsetMake(4.0, 4.0, 4.0, 10), "content-inset", 59.0, "regular-size-height", 46.0, "small-size-height", objj_msgSend(CPNull, "null"), "image-item-separator-color", CGRectMake(0.0, 0.0, 2.0, 32.0), "image-item-separator-size");
}
,["id"])]);
}var _CPToolbarItemVisibilityPriorityCompare = function(lhs, rhs)
{
    var lhsVisibilityPriority = objj_msgSend(lhs, "visibilityPriority"),
        rhsVisibilityPriority = objj_msgSend(rhs, "visibilityPriority");
    if (lhsVisibilityPriority == rhsVisibilityPriority)
        return CPOrderedSame;
    if (lhsVisibilityPriority > rhsVisibilityPriority)
        return CPOrderedAscending;
    return CPOrderedDescending;
};
var LABEL_MARGIN = 2.0;
{var the_class = objj_allocateClassPair(CPControl, "_CPToolbarItemView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_minSize"), new objj_ivar("_maxSize"), new objj_ivar("_labelSize"), new objj_ivar("_toolbarItem"), new objj_ivar("_toolbar"), new objj_ivar("_imageView"), new objj_ivar("_view"), new objj_ivar("_labelField"), new objj_ivar("_FIXME_isHUD")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("minSize"), function $_CPToolbarItemView__minSize(self, _cmd)
{
    return self._minSize;
}
,["CGSize"]), new objj_method(sel_getUid("maxSize"), function $_CPToolbarItemView__maxSize(self, _cmd)
{
    return self._maxSize;
}
,["CGSize"]), new objj_method(sel_getUid("initWithToolbarItem:toolbar:"), function $_CPToolbarItemView__initWithToolbarItem_toolbar_(self, _cmd, aToolbarItem, aToolbar)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarItemView").super_class }, "init");
    if (self)
    {
        self._toolbarItem = aToolbarItem;
        self._labelField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._labelField, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", 11.0));
        objj_msgSend(self._labelField, "setTextColor:", objj_msgSend(self, "FIXME_labelColor"));
        objj_msgSend(self._labelField, "setTextShadowColor:", objj_msgSend(self, "FIXME_labelShadowColor"));
        objj_msgSend(self._labelField, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
        objj_msgSend(self._labelField, "setAutoresizingMask:", CPViewWidthSizable | CPViewMinXMargin);
        objj_msgSend(self, "addSubview:", self._labelField);
        objj_msgSend(self, "updateFromItem");
        self._toolbar = aToolbar;
        var keyPaths = ["label", "image", "alternateImage", "minSize", "maxSize", "target", "action", "enabled"],
            index = 0,
            count = objj_msgSend(keyPaths, "count");
        for (; index < count; ++index)
            objj_msgSend(self._toolbarItem, "addObserver:forKeyPath:options:context:", self, keyPaths[index], 0, NULL);
    }
    return self;
}
,["id","CPToolbarItem","CPToolbar"]), new objj_method(sel_getUid("FIXME_setIsHUD:"), function $_CPToolbarItemView__FIXME_setIsHUD_(self, _cmd, shouldBeHUD)
{
    self._FIXME_isHUD = shouldBeHUD;
    objj_msgSend(self._labelField, "setTextColor:", objj_msgSend(self, "FIXME_labelColor"));
    objj_msgSend(self._labelField, "setTextShadowColor:", objj_msgSend(self, "FIXME_labelShadowColor"));
}
,["void","BOOL"]), new objj_method(sel_getUid("updateFromItem"), function $_CPToolbarItemView__updateFromItem(self, _cmd)
{
    var identifier = objj_msgSend(self._toolbarItem, "itemIdentifier");
    if (identifier === CPToolbarSpaceItemIdentifier || identifier === CPToolbarFlexibleSpaceItemIdentifier || identifier === CPToolbarSeparatorItemIdentifier)
    {
        objj_msgSend(self._view, "removeFromSuperview");
        objj_msgSend(self._imageView, "removeFromSuperview");
        self._minSize = objj_msgSend(self._toolbarItem, "minSize");
        self._maxSize = objj_msgSend(self._toolbarItem, "maxSize");
        if (identifier === CPToolbarSeparatorItemIdentifier)
        {
            self._view = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
            objj_msgSend(self, "addSubview:", self._view);
        }
        return;
    }
    objj_msgSend(self, "setTarget:", objj_msgSend(self._toolbarItem, "target"));
    objj_msgSend(self, "setAction:", objj_msgSend(self._toolbarItem, "action"));
    var view = objj_msgSend(self._toolbarItem, "view") || nil;
    if (view !== self._view)
    {
        if (!view)
            objj_msgSend(self._view, "removeFromSuperview");
        else
        {
            objj_msgSend(self, "addSubview:", view);
            objj_msgSend(self._imageView, "removeFromSuperview");
        }
        self._view = view;
    }
    if (!self._view)
    {
        if (!self._imageView)
        {
            self._imageView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
            objj_msgSend(self._imageView, "setImageScaling:", CPImageScaleProportionallyDown);
            objj_msgSend(self, "addSubview:", self._imageView);
        }
        objj_msgSend(self._imageView, "setImage:", objj_msgSend(self._toolbarItem, "image"));
    }
    var minSize = objj_msgSend(self._toolbarItem, "minSize"),
        maxSize = objj_msgSend(self._toolbarItem, "maxSize");
    objj_msgSend(self._labelField, "setStringValue:", objj_msgSend(self._toolbarItem, "label"));
    objj_msgSend(self._labelField, "sizeToFit");
    objj_msgSend(self, "setEnabled:", objj_msgSend(self._toolbarItem, "isEnabled"));
    self._labelSize = objj_msgSend(self._labelField, "frame").size;
    var iconOnly = objj_msgSend(objj_msgSend(self._toolbarItem, "toolbar"), "displayMode") === CPToolbarDisplayModeIconOnly,
        labelOnly = objj_msgSend(objj_msgSend(self._toolbarItem, "toolbar"), "displayMode") === CPToolbarDisplayModeLabelOnly;
    objj_msgSend(self._labelField, "setHidden:", iconOnly);
    objj_msgSend(self._view, "setHidden:", labelOnly);
    self._minSize = CGSizeMake(MAX(self._labelSize.width, minSize.width), (labelOnly ? 0 : minSize.height) + (iconOnly ? 0 : self._labelSize.height + LABEL_MARGIN));
    self._maxSize = CGSizeMake(MAX(self._labelSize.width, maxSize.width), 100000000.0);
    objj_msgSend(self._toolbar, "tile");
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPToolbarItemView__layoutSubviews(self, _cmd)
{
    var identifier = objj_msgSend(self._toolbarItem, "itemIdentifier");
    if (identifier === CPToolbarSpaceItemIdentifier || identifier === CPToolbarFlexibleSpaceItemIdentifier)
        return;
    var bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds);
    if (identifier === CPToolbarSeparatorItemIdentifier)
    {
        var itemSeparatorColor = objj_msgSend(self._toolbar, "valueForThemeAttribute:", "image-item-separator-color"),
            itemSeparatorSize = objj_msgSend(self._toolbar, "valueForThemeAttribute:", "image-item-separator-size");
        objj_msgSend(self._view, "setFrame:", CGRectMake(ROUND((width - itemSeparatorSize.size.width) / 2.0), 0.0, itemSeparatorSize.size.width, CGRectGetHeight(bounds)));
        objj_msgSend(self._view, "setBackgroundColor:", itemSeparatorColor);
        return;
    }
    var view = self._view || self._imageView,
        itemMaxSize = objj_msgSend(self._toolbarItem, "maxSize"),
        iconOnly = objj_msgSend(objj_msgSend(self._toolbarItem, "toolbar"), "displayMode") === CPToolbarDisplayModeIconOnly,
        height = CGRectGetHeight(bounds) - (iconOnly ? 0 : self._labelSize.height),
        viewWidth = MIN(itemMaxSize.width, width),
        viewHeight = MIN(itemMaxSize.height, height);
    objj_msgSend(view, "setFrame:", CGRectMake(ROUND((width - viewWidth) / 2.0), ROUND((height - viewHeight) / 2.0), viewWidth, viewHeight));
    objj_msgSend(self._labelField, "setFrameOrigin:", CGPointMake(ROUND((width - self._labelSize.width) / 2.0), CGRectGetHeight(bounds) - self._labelSize.height));
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $_CPToolbarItemView__mouseDown_(self, _cmd, anEvent)
{
    if (objj_msgSend(self._toolbarItem, "view"))
        return objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseDown:", anEvent);
    var identifier = objj_msgSend(self._toolbarItem, "itemIdentifier");
    if (identifier === CPToolbarSpaceItemIdentifier || identifier === CPToolbarFlexibleSpaceItemIdentifier || identifier === CPToolbarSeparatorItemIdentifier)
        return objj_msgSend(objj_msgSend(self, "nextResponder"), "mouseDown:", anEvent);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarItemView").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setEnabled:"), function $_CPToolbarItemView__setEnabled_(self, _cmd, shouldBeEnabled)
{
    if (objj_msgSend(self, "isEnabled") === shouldBeEnabled)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarItemView").super_class }, "setEnabled:", shouldBeEnabled);
    if (shouldBeEnabled)
    {
        objj_msgSend(self._imageView, "setAlphaValue:", 1.0);
        objj_msgSend(self._labelField, "setAlphaValue:", 1.0);
    }
    else
    {
        objj_msgSend(self._imageView, "setAlphaValue:", 0.5);
        objj_msgSend(self._labelField, "setAlphaValue:", 0.5);
    }
    objj_msgSend(self._toolbar, "tile");
}
,["void","BOOL"]), new objj_method(sel_getUid("FIXME_labelColor"), function $_CPToolbarItemView__FIXME_labelColor(self, _cmd)
{
    if (self._FIXME_isHUD)
        return objj_msgSend(CPColor, "whiteColor");
    return objj_msgSend(CPColor, "blackColor");
}
,["CPColor"]), new objj_method(sel_getUid("FIXME_labelShadowColor"), function $_CPToolbarItemView__FIXME_labelShadowColor(self, _cmd)
{
    if (self._FIXME_isHUD)
        return objj_msgSend(self, "isHighlighted") ? objj_msgSend(CPColor, "colorWithWhite:alpha:", 1.0, 0.5) : objj_msgSend(CPColor, "clearColor");
    return objj_msgSend(self, "isHighlighted") ? objj_msgSend(CPColor, "colorWithWhite:alpha:", 0.0, 0.3) : objj_msgSend(CPColor, "colorWithWhite:alpha:", 1.0, 0.75);
}
,["CPColor"]), new objj_method(sel_getUid("setHighlighted:"), function $_CPToolbarItemView__setHighlighted_(self, _cmd, shouldBeHighlighted)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolbarItemView").super_class }, "setHighlighted:", shouldBeHighlighted);
    if (shouldBeHighlighted)
    {
        var alternateImage = objj_msgSend(self._toolbarItem, "alternateImage");
        if (alternateImage)
            objj_msgSend(self._imageView, "setImage:", alternateImage);
        objj_msgSend(self._labelField, "setTextShadowOffset:", CGSizeMakeZero());
    }
    else
    {
        var image = objj_msgSend(self._toolbarItem, "image");
        if (image)
            objj_msgSend(self._imageView, "setImage:", image);
        objj_msgSend(self._labelField, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
    }
    objj_msgSend(self._labelField, "setTextShadowColor:", objj_msgSend(self, "FIXME_labelShadowColor"));
}
,["void","BOOL"]), new objj_method(sel_getUid("sendAction:to:"), function $_CPToolbarItemView__sendAction_to_(self, _cmd, anAction, aSender)
{
    objj_msgSend(CPApp, "sendAction:to:from:", anAction, aSender, self._toolbarItem);
}
,["void","SEL","id"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $_CPToolbarItemView__observeValueForKeyPath_ofObject_change_context_(self, _cmd, aKeyPath, anObject, aChange, aContext)
{
    if (aKeyPath === "enabled")
        objj_msgSend(self, "setEnabled:", objj_msgSend(anObject, "isEnabled"));
    else if (aKeyPath === "target")
        objj_msgSend(self, "setTarget:", objj_msgSend(anObject, "target"));
    else if (aKeyPath === "action")
        objj_msgSend(self, "setAction:", objj_msgSend(anObject, "action"));
    else
        objj_msgSend(self, "updateFromItem");
}
,["void","CPString","id","CPDictionary","id"])]);
}p;15;CPToolbarItem.jt;407;@STATIC;1.0;i;16;_CPToolbarItem.ji;29;_CPToolbarFlexibleSpaceItem.ji;26;_CPToolbarShowColorsItem.ji;25;_CPToolbarSeparatorItem.ji;21;_CPToolbarSpaceItem.jt;247;objj_executeFile("_CPToolbarItem.j", YES);objj_executeFile("_CPToolbarFlexibleSpaceItem.j", YES);objj_executeFile("_CPToolbarShowColorsItem.j", YES);objj_executeFile("_CPToolbarSeparatorItem.j", YES);objj_executeFile("_CPToolbarSpaceItem.j", YES);p;12;CPTreeNode.jt;5655;@STATIC;1.0;I;21;Foundation/CPObject.jI;24;Foundation/CPIndexPath.jt;5581;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPIndexPath.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPTreeNode"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_representedObject"), new objj_ivar("_parentNode"), new objj_ivar("_childNodes")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("representedObject"), function $CPTreeNode__representedObject(self, _cmd)
{
    return self._representedObject;
}
,["id"]), new objj_method(sel_getUid("parentNode"), function $CPTreeNode__parentNode(self, _cmd)
{
    return self._parentNode;
}
,["CPTreeNode"]), new objj_method(sel_getUid("initWithRepresentedObject:"), function $CPTreeNode__initWithRepresentedObject_(self, _cmd, anObject)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTreeNode").super_class }, "init");
    if (self)
    {
        self._representedObject = anObject;
        self._childNodes = [];
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("isLeaf"), function $CPTreeNode__isLeaf(self, _cmd)
{
    return objj_msgSend(self._childNodes, "count") <= 0;
}
,["BOOL"]), new objj_method(sel_getUid("childNodes"), function $CPTreeNode__childNodes(self, _cmd)
{
    return objj_msgSend(self._childNodes, "copy");
}
,["CPArray"]), new objj_method(sel_getUid("mutableChildNodes"), function $CPTreeNode__mutableChildNodes(self, _cmd)
{
    return objj_msgSend(self, "mutableArrayValueForKey:", "childNodes");
}
,["CPMutableArray"]), new objj_method(sel_getUid("insertObject:inChildNodesAtIndex:"), function $CPTreeNode__insertObject_inChildNodesAtIndex_(self, _cmd, aTreeNode, anIndex)
{
    objj_msgSend(objj_msgSend(aTreeNode._parentNode, "mutableChildNodes"), "removeObjectIdenticalTo:", aTreeNode);
    aTreeNode._parentNode = self;
    objj_msgSend(self._childNodes, "insertObject:atIndex:", aTreeNode, anIndex);
}
,["void","id","CPInteger"]), new objj_method(sel_getUid("removeObjectFromChildNodesAtIndex:"), function $CPTreeNode__removeObjectFromChildNodesAtIndex_(self, _cmd, anIndex)
{
    objj_msgSend(self._childNodes, "objectAtIndex:", anIndex)._parentNode = nil;
    objj_msgSend(self._childNodes, "removeObjectAtIndex:", anIndex);
}
,["void","CPInteger"]), new objj_method(sel_getUid("replaceObjectFromChildNodesAtIndex:withObject:"), function $CPTreeNode__replaceObjectFromChildNodesAtIndex_withObject_(self, _cmd, anIndex, aTreeNode)
{
    var oldTreeNode = objj_msgSend(self._childNodes, "objectAtIndex:", anIndex);
    oldTreeNode._parentNode = nil;
    aTreeNode._parentNode = self;
    objj_msgSend(self._childNodes, "replaceObjectAtIndex:withObject:", anIndex, aTreeNode);
}
,["void","CPInteger","id"]), new objj_method(sel_getUid("objectInChildNodesAtIndex:"), function $CPTreeNode__objectInChildNodesAtIndex_(self, _cmd, anIndex)
{
    return self._childNodes[anIndex];
}
,["id","CPInteger"]), new objj_method(sel_getUid("sortWithSortDescriptors:recursively:"), function $CPTreeNode__sortWithSortDescriptors_recursively_(self, _cmd, sortDescriptors, shouldSortRecursively)
{
    objj_msgSend(self._childNodes, "sortUsingDescriptors:", sortDescriptors);
    if (!shouldSortRecursively)
        return;
    var count = objj_msgSend(self._childNodes, "count");
    while (count--)
        objj_msgSend(self._childNodes[count], "sortWithSortDescriptors:recursively:", sortDescriptors, YES);
}
,["void","CPArray","BOOL"]), new objj_method(sel_getUid("descendantNodeAtIndexPath:"), function $CPTreeNode__descendantNodeAtIndexPath_(self, _cmd, indexPath)
{
    var index = 0,
        count = objj_msgSend(indexPath, "length"),
        node = self;
    for (; index < count; ++index)
        node = objj_msgSend(node, "objectInChildNodesAtIndex:", objj_msgSend(indexPath, "indexAtPosition:", index));
    return node;
}
,["CPTreeNode","CPIndexPath"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("treeNodeWithRepresentedObject:"), function $CPTreeNode__treeNodeWithRepresentedObject_(self, _cmd, anObject)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithRepresentedObject:", anObject);
}
,["id","id"])]);
}var CPTreeNodeRepresentedObjectKey = "CPTreeNodeRepresentedObjectKey",
    CPTreeNodeParentNodeKey = "CPTreeNodeParentNodeKey",
    CPTreeNodeChildNodesKey = "CPTreeNodeChildNodesKey";
{
var the_class = objj_getClass("CPTreeNode")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPTreeNode\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPTreeNode__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPTreeNode").super_class }, "init");
    if (self)
    {
        self._representedObject = objj_msgSend(aCoder, "decodeObjectForKey:", CPTreeNodeRepresentedObjectKey);
        self._parentNode = objj_msgSend(aCoder, "decodeObjectForKey:", CPTreeNodeParentNodeKey);
        self._childNodes = objj_msgSend(aCoder, "decodeObjectForKey:", CPTreeNodeChildNodesKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPTreeNode__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._representedObject, CPTreeNodeRepresentedObjectKey);
    objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._parentNode, CPTreeNodeParentNodeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._childNodes, CPTreeNodeChildNodesKey);
}
,["void","CPCoder"])]);
}p;26;CPUserDefaultsController.jt;10868;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPString.jI;27;Foundation/CPUserDefaults.ji;14;CPController.jt;10703;objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("Foundation/CPUserDefaults.j", NO);objj_executeFile("CPController.j", YES);var SharedUserDefaultsController = nil;
{var the_class = objj_allocateClassPair(CPController, "CPUserDefaultsController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_defaults"), new objj_ivar("_initialValues"), new objj_ivar("_appliesImmediately"), new objj_ivar("_valueProxy")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("defaults"), function $CPUserDefaultsController__defaults(self, _cmd)
{
    return self._defaults;
}
,["CPUserDefaults"]), new objj_method(sel_getUid("initialValues"), function $CPUserDefaultsController__initialValues(self, _cmd)
{
    return self._initialValues;
}
,["CPDictionary"]), new objj_method(sel_getUid("setInitialValues:"), function $CPUserDefaultsController__setInitialValues_(self, _cmd, newValue)
{
    self._initialValues = newValue;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("appliesImmediately"), function $CPUserDefaultsController__appliesImmediately(self, _cmd)
{
    return self._appliesImmediately;
}
,["BOOL"]), new objj_method(sel_getUid("setAppliesImmediately:"), function $CPUserDefaultsController__setAppliesImmediately_(self, _cmd, newValue)
{
    self._appliesImmediately = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithDefaults:initialValues:"), function $CPUserDefaultsController__initWithDefaults_initialValues_(self, _cmd, someDefaults, initialValues)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPUserDefaultsController").super_class }, "init"))
    {
        if (!someDefaults)
            someDefaults = objj_msgSend(CPUserDefaults, "standardUserDefaults");
        self._defaults = someDefaults;
        self._initialValues = objj_msgSend(initialValues, "copy");
        self._appliesImmediately = YES;
        self._valueProxy = objj_msgSend(objj_msgSend(_CPUserDefaultsControllerProxy, "alloc"), "initWithController:", self);
    }
    return self;
}
,["id","CPUserDefaults","CPDictionary"]), new objj_method(sel_getUid("values"), function $CPUserDefaultsController__values(self, _cmd)
{
    return self._valueProxy;
}
,["id"]), new objj_method(sel_getUid("hasUnappliedChanges"), function $CPUserDefaultsController__hasUnappliedChanges(self, _cmd)
{
    return objj_msgSend(self._valueProxy, "hasUnappliedChanges");
}
,["BOOL"]), new objj_method(sel_getUid("save:"), function $CPUserDefaultsController__save_(self, _cmd, sender)
{
    objj_msgSend(self._valueProxy, "save");
}
,["void","id"]), new objj_method(sel_getUid("revert:"), function $CPUserDefaultsController__revert_(self, _cmd, sender)
{
    objj_msgSend(self._valueProxy, "revert");
}
,["void","id"]), new objj_method(sel_getUid("revertToInitialValues:"), function $CPUserDefaultsController__revertToInitialValues_(self, _cmd, sender)
{
    objj_msgSend(self._valueProxy, "revertToInitialValues");
}
,["void","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedUserDefaultsController"), function $CPUserDefaultsController__sharedUserDefaultsController(self, _cmd)
{
    if (!SharedUserDefaultsController)
        SharedUserDefaultsController = objj_msgSend(objj_msgSend(CPUserDefaultsController, "alloc"), "initWithDefaults:initialValues:", nil, nil);
    return SharedUserDefaultsController;
}
,["id"])]);
}var CPUserDefaultsControllerSharedKey = "CPUserDefaultsControllerSharedKey";
{
var the_class = objj_getClass("CPUserDefaultsController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPUserDefaultsController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPUserDefaultsController__initWithCoder_(self, _cmd, aCoder)
{
    if (objj_msgSend(aCoder, "decodeBoolForKey:", CPUserDefaultsControllerSharedKey))
        return objj_msgSend(CPUserDefaultsController, "sharedUserDefaultsController");
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPUserDefaultsController").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "decoding of non-shared CPUserDefaultsController not implemented");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPUserDefaultsController__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPUserDefaultsController").super_class }, "encodeWithCoder:", aCoder);
    if (self === SharedUserDefaultsController)
    {
        objj_msgSend(aCoder, "encodeBool:forKey:", YES, CPUserDefaultsControllerSharedKey);
        return;
    }
    objj_msgSend(CPException, "raise:reason:", CPUnsupportedMethodException, "encoding of non-shared CPUserDefaultsController not implemented");
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPUserDefaultsControllerProxy"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_controller"), new objj_ivar("_cachedValues")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithController:"), function $_CPUserDefaultsControllerProxy__initWithController_(self, _cmd, aController)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPUserDefaultsControllerProxy").super_class }, "init"))
    {
        self._controller = aController;
        self._cachedValues = objj_msgSend(CPMutableDictionary, "dictionary");
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("userDefaultsDidChange:"), CPUserDefaultsDidChangeNotification, objj_msgSend(self._controller, "defaults"));
    }
    return self;
}
,["id","CPUserDefaultsController"]), new objj_method(sel_getUid("dealloc"), function $_CPUserDefaultsControllerProxy__dealloc(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "removeObserver:", self);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPUserDefaultsControllerProxy").super_class }, "dealloc");
}
,["void"]), new objj_method(sel_getUid("valueForKey:"), function $_CPUserDefaultsControllerProxy__valueForKey_(self, _cmd, aKey)
{
    var value = objj_msgSend(self._cachedValues, "objectForKey:", aKey);
    if (value === nil)
    {
        value = objj_msgSend(objj_msgSend(self._controller, "defaults"), "objectForKey:", aKey);
        if (value === nil)
            value = objj_msgSend(objj_msgSend(self._controller, "initialValues"), "objectForKey:", aKey);
        if (value !== nil)
            objj_msgSend(self._cachedValues, "setObject:forKey:", value, aKey);
    }
    return value;
}
,["id","CPString"]), new objj_method(sel_getUid("setValue:forKey:"), function $_CPUserDefaultsControllerProxy__setValue_forKey_(self, _cmd, aValue, aKey)
{
    objj_msgSend(self, "willChangeValueForKey:", aKey);
    objj_msgSend(self._cachedValues, "setObject:forKey:", aValue, aKey);
    if (objj_msgSend(self._controller, "appliesImmediately"))
        objj_msgSend(objj_msgSend(self._controller, "defaults"), "setObject:forKey:", aValue, aKey);
    objj_msgSend(self, "didChangeValueForKey:", aKey);
}
,["void","id","CPString"]), new objj_method(sel_getUid("revert"), function $_CPUserDefaultsControllerProxy__revert(self, _cmd)
{
    var keys = objj_msgSend(self._cachedValues, "allKeys"),
        keysCount = objj_msgSend(keys, "count");
    while (keysCount--)
    {
        var key = keys[keysCount];
        objj_msgSend(self, "willChangeValueForKey:", key);
        objj_msgSend(self._cachedValues, "removeObjectForKey:", key);
        objj_msgSend(self, "didChangeValueForKey:", key);
    }
}
,["void"]), new objj_method(sel_getUid("save"), function $_CPUserDefaultsControllerProxy__save(self, _cmd)
{
    var keys = objj_msgSend(self._cachedValues, "allKeys"),
        keysCount = objj_msgSend(keys, "count");
    while (keysCount--)
    {
        var key = keys[keysCount];
        objj_msgSend(objj_msgSend(self._controller, "defaults"), "setObject:forKey:", objj_msgSend(self._cachedValues, "objectForKey:", key), key);
    }
}
,["void"]), new objj_method(sel_getUid("revertToInitialValues"), function $_CPUserDefaultsControllerProxy__revertToInitialValues(self, _cmd)
{
    var initial = objj_msgSend(self._controller, "initialValues"),
        keys = objj_msgSend(self._cachedValues, "allKeys"),
        keysCount = objj_msgSend(keys, "count");
    while (keysCount--)
    {
        var key = keys[keysCount];
        objj_msgSend(self, "willChangeValueForKey:", key);
        var initialValue = objj_msgSend(initial, "objectForKey:", key);
        if (initialValue !== nil)
            objj_msgSend(self._cachedValues, "setObject:forKey:", initialValue, key);
        else
            objj_msgSend(self._cachedValues, "removeObjectForKey:", key);
        objj_msgSend(self, "didChangeValueForKey:", key);
    }
}
,["void"]), new objj_method(sel_getUid("userDefaultsDidChange:"), function $_CPUserDefaultsControllerProxy__userDefaultsDidChange_(self, _cmd, aNotification)
{
    var defaults = objj_msgSend(self._controller, "defaults"),
        keys = objj_msgSend(self._cachedValues, "allKeys"),
        keysCount = objj_msgSend(keys, "count");
    while (keysCount--)
    {
        var key = keys[keysCount],
            value = objj_msgSend(self._cachedValues, "objectForKey:", key),
            newValue = objj_msgSend(defaults, "objectForKey:", key);
        if (!objj_msgSend(value, "isEqual:", newValue))
        {
            objj_msgSend(self, "willChangeValueForKey:", key);
            objj_msgSend(self._cachedValues, "setObject:forKey:", newValue, key);
            objj_msgSend(self, "didChangeValueForKey:", key);
        }
    }
}
,["void","CPNotification"]), new objj_method(sel_getUid("hasUnappliedChanges"), function $_CPUserDefaultsControllerProxy__hasUnappliedChanges(self, _cmd)
{
    var defaults = objj_msgSend(self._controller, "defaults"),
        keys = objj_msgSend(self._cachedValues, "allKeys"),
        keysCount = objj_msgSend(keys, "count");
    while (keysCount--)
    {
        var key = keys[keysCount],
            value = objj_msgSend(self._cachedValues, "objectForKey:", key),
            newValue = objj_msgSend(defaults, "objectForKey:", key);
        if (!objj_msgSend(value, "isEqual:", newValue))
            return YES;
    }
    return NO;
}
,["BOOL"])]);
}p;8;CPView.jt;101418;@STATIC;1.0;I;20;Foundation/CPArray.jI;26;Foundation/CPObjJRuntime.jI;18;Foundation/CPSet.ji;19;CGAffineTransform.ji;12;CGGeometry.ji;9;CPColor.ji;19;CPGraphicsContext.ji;13;CPResponder.ji;9;CPTheme.ji;20;CPWindow_Constants.ji;18;_CPDisplayServer.jt;101161;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObjJRuntime.j", NO);objj_executeFile("Foundation/CPSet.j", NO);objj_executeFile("CGAffineTransform.j", YES);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPColor.j", YES);objj_executeFile("CPGraphicsContext.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPTheme.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("_CPDisplayServer.j", YES);if (typeof appkit_tag_dom_elements !== "undefined" && appkit_tag_dom_elements)
{
    AppKitTagDOMElement = function(owner, element)
    {
        element.setAttribute("data-cappuccino-view", objj_msgSend(owner, "className"));
        element.setAttribute("data-cappuccino-uid", objj_msgSend(owner, "UID"));
    };
}else
{
    AppKitTagDOMElement = function(owner, element)
    {
    };
}CPViewNotSizable = 0;
CPViewMinXMargin = 1;
CPViewWidthSizable = 2;
CPViewMaxXMargin = 4;
CPViewMinYMargin = 8;
CPViewHeightSizable = 16;
CPViewMaxYMargin = 32;
CPViewBoundsDidChangeNotification = "CPViewBoundsDidChangeNotification";
CPViewFrameDidChangeNotification = "CPViewFrameDidChangeNotification";
var CachedNotificationCenter = nil,
    CachedThemeAttributes = nil;
var DOMElementPrototype = nil,
    BackgroundTrivialColor = 0,
    BackgroundVerticalThreePartImage = 1,
    BackgroundHorizontalThreePartImage = 2,
    BackgroundNinePartImage = 3,
    BackgroundTransparentColor = 4;
var CPViewFlags = {},
    CPViewHasCustomDrawRect = 1 << 0,
    CPViewHasCustomLayoutSubviews = 1 << 1;
{var the_class = objj_allocateClassPair(CPResponder, "CPView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_window"), new objj_ivar("_superview"), new objj_ivar("_subviews"), new objj_ivar("_graphicsContext"), new objj_ivar("_tag"), new objj_ivar("_identifier"), new objj_ivar("_frame"), new objj_ivar("_bounds"), new objj_ivar("_boundsTransform"), new objj_ivar("_inverseBoundsTransform"), new objj_ivar("_registeredDraggedTypes"), new objj_ivar("_registeredDraggedTypesArray"), new objj_ivar("_isHidden"), new objj_ivar("_hitTests"), new objj_ivar("_clipsToBounds"), new objj_ivar("_postsFrameChangedNotifications"), new objj_ivar("_postsBoundsChangedNotifications"), new objj_ivar("_inhibitFrameAndBoundsChangedNotifications"), new objj_ivar("_inLiveResize"), new objj_ivar("_DOMElement"), new objj_ivar("_DOMContentsElement"), new objj_ivar("_DOMImageParts"), new objj_ivar("_DOMImageSizes"), new objj_ivar("_backgroundType"), new objj_ivar("_dirtyRect"), new objj_ivar("_opacity"), new objj_ivar("_backgroundColor"), new objj_ivar("_autoresizesSubviews"), new objj_ivar("_autoresizingMask"), new objj_ivar("_layer"), new objj_ivar("_wantsLayer"), new objj_ivar("_isInFullScreenMode"), new objj_ivar("_fullScreenModeState"), new objj_ivar("_needsLayout"), new objj_ivar("_ephemeralSubviews"), new objj_ivar("_theme"), new objj_ivar("_themeClass"), new objj_ivar("_themeAttributes"), new objj_ivar("_themeState"), new objj_ivar("_ephemeralSubviewsForNames"), new objj_ivar("_ephereralSubviews"), new objj_ivar("_nextKeyView"), new objj_ivar("_previousKeyView"), new objj_ivar("_viewClassFlags"), new objj_ivar("_toolTip"), new objj_ivar("_toolTipFunctionIn"), new objj_ivar("_toolTipFunctionOut"), new objj_ivar("_toolTipInstalled")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("identifier"), function $CPView__identifier(self, _cmd)
{
    return self._identifier;
}
,["CPString"]), new objj_method(sel_getUid("setIdentifier:"), function $CPView__setIdentifier_(self, _cmd, newValue)
{
    self._identifier = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("toolTip"), function $CPView__toolTip(self, _cmd)
{
    return self._toolTip;
}
,["CPString"]), new objj_method(sel_getUid("_setToolTip:"), function $CPView___setToolTip_(self, _cmd, newValue)
{
    self._toolTip = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("_setupViewFlags"), function $CPView___setupViewFlags(self, _cmd)
{
    var theClass = objj_msgSend(self, "class"),
        classUID = objj_msgSend(theClass, "UID");
    if (CPViewFlags[classUID] === undefined)
    {
        var flags = 0;
        if (objj_msgSend(theClass, "instanceMethodForSelector:", sel_getUid("drawRect:")) !== objj_msgSend(CPView, "instanceMethodForSelector:", sel_getUid("drawRect:")))
            flags |= CPViewHasCustomDrawRect;
        if (objj_msgSend(theClass, "instanceMethodForSelector:", sel_getUid("layoutSubviews")) !== objj_msgSend(CPView, "instanceMethodForSelector:", sel_getUid("layoutSubviews")))
            flags |= CPViewHasCustomLayoutSubviews;
        CPViewFlags[classUID] = flags;
    }
    self._viewClassFlags = CPViewFlags[classUID];
}
,["void"]), new objj_method(sel_getUid("_setupToolTipHandlers"), function $CPView___setupToolTipHandlers(self, _cmd)
{
    self._toolTipInstalled = NO;
    self._toolTipFunctionIn = function(e)
    {
        objj_msgSend(_CPToolTip, "scheduleToolTipForView:", self);
    };
    self._toolTipFunctionOut = function(e)
    {
        objj_msgSend(_CPToolTip, "invalidateCurrentToolTipIfNeeded");
    };
}
,["void"]), new objj_method(sel_getUid("init"), function $CPView__init(self, _cmd)
{
    return objj_msgSend(self, "initWithFrame:", CGRectMakeZero());
}
,["id"]), new objj_method(sel_getUid("initWithFrame:"), function $CPView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPView").super_class }, "init");
    if (self)
    {
        var width = CGRectGetWidth(aFrame),
            height = CGRectGetHeight(aFrame);
        self._subviews = [];
        self._registeredDraggedTypes = objj_msgSend(CPSet, "set");
        self._registeredDraggedTypesArray = [];
        self._tag = -1;
        self._frame = CGRectMakeCopy(aFrame);
        self._bounds = CGRectMake(0.0, 0.0, width, height);
        self._autoresizingMask = CPViewNotSizable;
        self._autoresizesSubviews = YES;
        self._clipsToBounds = YES;
        self._opacity = 1.0;
        self._isHidden = NO;
        self._hitTests = YES;
        self._DOMElement = DOMElementPrototype.cloneNode(false);
        AppKitTagDOMElement(self, self._DOMElement);
        if (NULL)
            var ____p = CGPointApplyAffineTransform(CGPointMake(CGRectGetMinX(aFrame), CGRectGetMinY(aFrame)), NULL);
        else
            var ____p = CGPointMake(CGRectGetMinX(aFrame), CGRectGetMinY(aFrame));
        self._DOMElement.style.left = ROUND(____p.x) + "px";
        self._DOMElement.style.top = ROUND(____p.y) + "px";
        self._DOMElement.style.width = MAX(0.0, ROUND(width)) + "px";
        self._DOMElement.style.height = MAX(0.0, ROUND(height)) + "px";
        self._DOMImageParts = [];
        self._DOMImageSizes = [];
        self._theme = objj_msgSend(CPTheme, "defaultTheme");
        self._themeState = CPThemeStateNormal;
        objj_msgSend(self, "_setupToolTipHandlers");
        objj_msgSend(self, "_setupViewFlags");
        objj_msgSend(self, "_loadThemeAttributes");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setToolTip:"), function $CPView__setToolTip_(self, _cmd, aToolTip)
{
    if (self._toolTip == aToolTip)
        return;
    if (aToolTip && !objj_msgSend(aToolTip, "isKindOfClass:", CPString))
        aToolTip = objj_msgSend(aToolTip, "description");
    self._toolTip = aToolTip;
    if (self._toolTip)
        objj_msgSend(self, "_installToolTipEventHandlers");
    else
        objj_msgSend(self, "_uninstallToolTipEventHandlers");
}
,["void","CPString"]), new objj_method(sel_getUid("_installToolTipEventHandlers"), function $CPView___installToolTipEventHandlers(self, _cmd)
{
    if (self._toolTipInstalled)
        return;
    if (self._DOMElement.addEventListener)
    {
        self._DOMElement.addEventListener("mouseover", self._toolTipFunctionIn, YES);
        self._DOMElement.addEventListener("keypress", self._toolTipFunctionOut, YES);
        self._DOMElement.addEventListener("mouseout", self._toolTipFunctionOut, YES);
    }
    else if (self._DOMElement.attachEvent)
    {
        self._DOMElement.attachEvent("onmouseover", self._toolTipFunctionIn);
        self._DOMElement.attachEvent("onkeypress", self._toolTipFunctionOut);
        self._DOMElement.attachEvent("onmouseout", self._toolTipFunctionOut);
    }
    self._toolTipInstalled = YES;
}
,["void"]), new objj_method(sel_getUid("_uninstallToolTipEventHandlers"), function $CPView___uninstallToolTipEventHandlers(self, _cmd)
{
    if (!self._toolTipInstalled)
        return;
    if (self._DOMElement.removeEventListener)
    {
        self._DOMElement.removeEventListener("mouseover", self._toolTipFunctionIn, YES);
        self._DOMElement.removeEventListener("keypress", self._toolTipFunctionOut, YES);
        self._DOMElement.removeEventListener("mouseout", self._toolTipFunctionOut, YES);
    }
    else if (self._DOMElement.detachEvent)
    {
        self._DOMElement.detachEvent("onmouseover", self._toolTipFunctionIn);
        self._DOMElement.detachEvent("onkeypress", self._toolTipFunctionOut);
        self._DOMElement.detachEvent("onmouseout", self._toolTipFunctionOut);
    }
    self._toolTipInstalled = NO;
}
,["void"]), new objj_method(sel_getUid("superview"), function $CPView__superview(self, _cmd)
{
    return self._superview;
}
,["CPView"]), new objj_method(sel_getUid("subviews"), function $CPView__subviews(self, _cmd)
{
    return objj_msgSend(self._subviews, "copy");
}
,["CPArray"]), new objj_method(sel_getUid("window"), function $CPView__window(self, _cmd)
{
    return self._window;
}
,["CPWindow"]), new objj_method(sel_getUid("addSubview:"), function $CPView__addSubview_(self, _cmd, aSubview)
{
    objj_msgSend(self, "_insertSubview:atIndex:", aSubview, CPNotFound);
}
,["void","CPView"]), new objj_method(sel_getUid("addSubview:positioned:relativeTo:"), function $CPView__addSubview_positioned_relativeTo_(self, _cmd, aSubview, anOrderingMode, anotherView)
{
    var index = anotherView ? objj_msgSend(self._subviews, "indexOfObjectIdenticalTo:", anotherView) : CPNotFound;
    if (index === CPNotFound)
        index = anOrderingMode === CPWindowAbove ? objj_msgSend(self._subviews, "count") : 0;
    else if (anOrderingMode === CPWindowAbove)
        ++index;
    objj_msgSend(self, "_insertSubview:atIndex:", aSubview, index);
}
,["void","CPView","CPWindowOrderingMode","CPView"]), new objj_method(sel_getUid("_insertSubview:atIndex:"), function $CPView___insertSubview_atIndex_(self, _cmd, aSubview, anIndex)
{
    if (aSubview === self)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "can't add a view as a subview of itself");
    var count = self._subviews.length;
    objj_msgSend(objj_msgSend(self, "window"), "_dirtyKeyViewLoop");
    if (aSubview._superview == self)
    {
        var index = objj_msgSend(self._subviews, "indexOfObjectIdenticalTo:", aSubview);
        if (index === anIndex || index === count - 1 && anIndex === count)
            return;
        objj_msgSend(self._subviews, "removeObjectAtIndex:", index);
        self._DOMElement.removeChild(aSubview._DOMElement);
        if (anIndex > index)
            --anIndex;
        --count;
    }
    else
    {
        objj_msgSend(aSubview, "removeFromSuperview");
        objj_msgSend(aSubview, "_setWindow:", self._window);
        objj_msgSend(aSubview, "viewWillMoveToSuperview:", self);
        aSubview._superview = self;
    }
    if (anIndex === CPNotFound || anIndex >= count)
    {
        self._subviews.push(aSubview);
        self._DOMElement.appendChild(aSubview._DOMElement);
    }
    else
    {
        self._subviews.splice(anIndex, 0, aSubview);
        self._DOMElement.insertBefore(aSubview._DOMElement, self._subviews[anIndex + 1]._DOMElement);
    }
    objj_msgSend(aSubview, "setNextResponder:", self);
    if (!objj_msgSend(aSubview, "isHidden") && objj_msgSend(self, "isHiddenOrHasHiddenAncestor"))
        objj_msgSend(aSubview, "_notifyViewDidHide");
    objj_msgSend(aSubview, "viewDidMoveToSuperview");
    objj_msgSend(self, "didAddSubview:", aSubview);
}
,["void","CPView","int"]), new objj_method(sel_getUid("didAddSubview:"), function $CPView__didAddSubview_(self, _cmd, aSubview)
{
}
,["void","CPView"]), new objj_method(sel_getUid("removeFromSuperview"), function $CPView__removeFromSuperview(self, _cmd)
{
    if (!self._superview)
        return;
    objj_msgSend(objj_msgSend(self, "window"), "_dirtyKeyViewLoop");
    objj_msgSend(self._superview, "willRemoveSubview:", self);
    objj_msgSend(self._superview._subviews, "removeObjectIdenticalTo:", self);
    self._superview._DOMElement.removeChild(self._DOMElement);
    if (!self._isHidden && objj_msgSend(self._superview, "isHiddenOrHasHiddenAncestor"))
        objj_msgSend(self, "_notifyViewDidUnhide");
    self._superview = nil;
    objj_msgSend(self, "_setWindow:", nil);
}
,["void"]), new objj_method(sel_getUid("replaceSubview:with:"), function $CPView__replaceSubview_with_(self, _cmd, aSubview, aView)
{
    if (aSubview._superview !== self)
        return;
    var index = objj_msgSend(self._subviews, "indexOfObjectIdenticalTo:", aSubview);
    objj_msgSend(aSubview, "removeFromSuperview");
    objj_msgSend(self, "_insertSubview:atIndex:", aView, index);
}
,["void","CPView","CPView"]), new objj_method(sel_getUid("setSubviews:"), function $CPView__setSubviews_(self, _cmd, newSubviews)
{
    if (!newSubviews)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "newSubviews cannot be nil in -[CPView setSubviews:]");
    if (objj_msgSend(self._subviews, "isEqual:", newSubviews))
        return;
    if (objj_msgSend(self._subviews, "count") === 0)
    {
        var index = 0,
            count = objj_msgSend(newSubviews, "count");
        for (; index < count; ++index)
            objj_msgSend(self, "addSubview:", newSubviews[index]);
        return;
    }
    if (objj_msgSend(newSubviews, "count") === 0)
    {
        var count = objj_msgSend(self._subviews, "count");
        while (count--)
            objj_msgSend(self._subviews[count], "removeFromSuperview");
        return;
    }
    var removedSubviews = objj_msgSend(CPMutableSet, "setWithArray:", self._subviews);
    objj_msgSend(removedSubviews, "removeObjectsInArray:", newSubviews);
    objj_msgSend(removedSubviews, "makeObjectsPerformSelector:", sel_getUid("removeFromSuperview"));
    var addedSubviews = objj_msgSend(CPMutableSet, "setWithArray:", newSubviews);
    objj_msgSend(addedSubviews, "removeObjectsInArray:", self._subviews);
    var addedSubview = nil,
        addedSubviewEnumerator = objj_msgSend(addedSubviews, "objectEnumerator");
    while ((addedSubview = objj_msgSend(addedSubviewEnumerator, "nextObject")) !== nil)
        objj_msgSend(self, "addSubview:", addedSubview);
    if (objj_msgSend(self._subviews, "isEqual:", newSubviews))
        return;
    self._subviews = objj_msgSend(newSubviews, "copy");
    var index = 0,
        count = objj_msgSend(self._subviews, "count");
    for (; index < count; ++index)
    {
        var subview = self._subviews[index];
        self._DOMElement.removeChild(subview._DOMElement);
        self._DOMElement.appendChild(subview._DOMElement);
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("_setWindow:"), function $CPView___setWindow_(self, _cmd, aWindow)
{
    if (self._window === aWindow)
        return;
    objj_msgSend(objj_msgSend(self, "window"), "_dirtyKeyViewLoop");
    if (objj_msgSend(self._window, "firstResponder") === self)
        objj_msgSend(self._window, "makeFirstResponder:", nil);
    objj_msgSend(self, "viewWillMoveToWindow:", aWindow);
    if (self._registeredDraggedTypes)
    {
        objj_msgSend(self._window, "_noteUnregisteredDraggedTypes:", self._registeredDraggedTypes);
        objj_msgSend(aWindow, "_noteRegisteredDraggedTypes:", self._registeredDraggedTypes);
    }
    self._window = aWindow;
    var count = objj_msgSend(self._subviews, "count");
    while (count--)
        objj_msgSend(self._subviews[count], "_setWindow:", aWindow);
    objj_msgSend(self, "viewDidMoveToWindow");
    objj_msgSend(objj_msgSend(self, "window"), "_dirtyKeyViewLoop");
}
,["void","CPWindow"]), new objj_method(sel_getUid("isDescendantOf:"), function $CPView__isDescendantOf_(self, _cmd, aView)
{
    var view = self;
    do
    {
        if (view == aView)
            return YES;
    }
    while (view = objj_msgSend(view, "superview"));
    return NO;
}
,["BOOL","CPView"]), new objj_method(sel_getUid("viewDidMoveToSuperview"), function $CPView__viewDidMoveToSuperview(self, _cmd)
{
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("viewDidMoveToWindow"), function $CPView__viewDidMoveToWindow(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("viewWillMoveToSuperview:"), function $CPView__viewWillMoveToSuperview_(self, _cmd, aView)
{
}
,["void","CPView"]), new objj_method(sel_getUid("viewWillMoveToWindow:"), function $CPView__viewWillMoveToWindow_(self, _cmd, aWindow)
{
}
,["void","CPWindow"]), new objj_method(sel_getUid("willRemoveSubview:"), function $CPView__willRemoveSubview_(self, _cmd, aView)
{
}
,["void","CPView"]), new objj_method(sel_getUid("enclosingMenuItem"), function $CPView__enclosingMenuItem(self, _cmd)
{
    var view = self;
    while (view && !objj_msgSend(view, "isKindOfClass:", objj_msgSend(_CPMenuItemView, "class")))
        view = objj_msgSend(view, "superview");
    if (view)
        return view._menuItem;
    return nil;
}
,["CPMenuItem"]), new objj_method(sel_getUid("setTag:"), function $CPView__setTag_(self, _cmd, aTag)
{
    self._tag = aTag;
}
,["void","CPInteger"]), new objj_method(sel_getUid("tag"), function $CPView__tag(self, _cmd)
{
    return self._tag;
}
,["CPInteger"]), new objj_method(sel_getUid("viewWithTag:"), function $CPView__viewWithTag_(self, _cmd, aTag)
{
    if (objj_msgSend(self, "tag") == aTag)
        return self;
    var index = 0,
        count = self._subviews.length;
    for (; index < count; ++index)
    {
        var view = objj_msgSend(self._subviews[index], "viewWithTag:", aTag);
        if (view)
            return view;
    }
    return nil;
}
,["CPView","CPInteger"]), new objj_method(sel_getUid("isFlipped"), function $CPView__isFlipped(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("setFrame:"), function $CPView__setFrame_(self, _cmd, aFrame)
{
    if (CGRectEqualToRect(self._frame, aFrame))
        return;
    self._inhibitFrameAndBoundsChangedNotifications = YES;
    objj_msgSend(self, "setFrameOrigin:", aFrame.origin);
    objj_msgSend(self, "setFrameSize:", aFrame.size);
    self._inhibitFrameAndBoundsChangedNotifications = NO;
    if (self._postsFrameChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewFrameDidChangeNotification, self);
}
,["void","CGRect"]), new objj_method(sel_getUid("frame"), function $CPView__frame(self, _cmd)
{
    return CGRectMakeCopy(self._frame);
}
,["CGRect"]), new objj_method(sel_getUid("frameOrigin"), function $CPView__frameOrigin(self, _cmd)
{
    return CGPointMakeCopy(self._frame.origin);
}
,["CGPoint"]), new objj_method(sel_getUid("frameSize"), function $CPView__frameSize(self, _cmd)
{
    return CGSizeMakeCopy(self._frame.size);
}
,["CGSize"]), new objj_method(sel_getUid("setCenter:"), function $CPView__setCenter_(self, _cmd, aPoint)
{
    objj_msgSend(self, "setFrameOrigin:", CGPointMake(aPoint.x - self._frame.size.width / 2.0, aPoint.y - self._frame.size.height / 2.0));
}
,["void","CGPoint"]), new objj_method(sel_getUid("center"), function $CPView__center(self, _cmd)
{
    return CGPointMake(self._frame.size.width / 2.0 + self._frame.origin.x, self._frame.size.height / 2.0 + self._frame.origin.y);
}
,["CGPoint"]), new objj_method(sel_getUid("setFrameOrigin:"), function $CPView__setFrameOrigin_(self, _cmd, aPoint)
{
    var origin = self._frame.origin;
    if (!aPoint || CGPointEqualToPoint(origin, aPoint))
        return;
    origin.x = aPoint.x;
    origin.y = aPoint.y;
    if (self._postsFrameChangedNotifications && !self._inhibitFrameAndBoundsChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewFrameDidChangeNotification, self);
    var transform = self._superview ? self._superview._boundsTransform : NULL;
    if (transform)
        var ____p = CGPointApplyAffineTransform(CGPointMake(origin.x, origin.y), transform);
    else
        var ____p = CGPointMake(origin.x, origin.y);
    self._DOMElement.style.left = ROUND(____p.x) + "px";
    self._DOMElement.style.top = ROUND(____p.y) + "px";
}
,["void","CGPoint"]), new objj_method(sel_getUid("setFrameSize:"), function $CPView__setFrameSize_(self, _cmd, aSize)
{
    var size = self._frame.size;
    if (!aSize || CGSizeEqualToSize(size, aSize))
        return;
    var oldSize = CGSizeMakeCopy(size);
    size.width = aSize.width;
    size.height = aSize.height;
    if (YES)
    {
        self._bounds.size.width = aSize.width;
        self._bounds.size.height = aSize.height;
    }
    if (self._layer)
        objj_msgSend(self._layer, "_owningViewBoundsChanged");
    if (self._autoresizesSubviews)
        objj_msgSend(self, "resizeSubviewsWithOldSize:", oldSize);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
    self._DOMElement.style.width = MAX(0.0, ROUND(size.width)) + "px";
    self._DOMElement.style.height = MAX(0.0, ROUND(size.height)) + "px";
    if (self._DOMContentsElement)
    {
        self._DOMContentsElement.width = MAX(0.0, ROUND(size.width));
        self._DOMContentsElement.height = MAX(0.0, ROUND(size.height));
        self._DOMContentsElement.style.width = MAX(0.0, ROUND(size.width)) + "px";
        self._DOMContentsElement.style.height = MAX(0.0, ROUND(size.height)) + "px";
    }
    if (self._backgroundType !== BackgroundTrivialColor)
    {
        if (self._backgroundType === BackgroundTransparentColor)
        {
            self._DOMImageParts[0].style.width = MAX(0.0, ROUND(size.width)) + "px";
            self._DOMImageParts[0].style.height = MAX(0.0, ROUND(size.height)) + "px";
        }
        else
        {
            var images = objj_msgSend(objj_msgSend(self._backgroundColor, "patternImage"), "imageSlices"),
                partIndex = 0;
            if (self._backgroundType === BackgroundVerticalThreePartImage)
            {
                var top = self._DOMImageSizes[0] ? self._DOMImageSizes[0].height : 0,
                    bottom = self._DOMImageSizes[2] ? self._DOMImageSizes[2].height : 0;
                if (top)
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(size.width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(top)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[1])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(size.width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(size.height - top - bottom)) + "px";
                    partIndex++;
                }
                if (bottom)
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(size.width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(bottom)) + "px";
                }
            }
            else if (self._backgroundType === BackgroundHorizontalThreePartImage)
            {
                var left = self._DOMImageSizes[0] ? self._DOMImageSizes[0].width : 0,
                    right = self._DOMImageSizes[2] ? self._DOMImageSizes[2].width : 0;
                if (left)
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(left)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(size.height)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[1])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(size.width - left - right)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(size.height)) + "px";
                    partIndex++;
                }
                if (right)
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(right)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(size.height)) + "px";
                }
            }
            else if (self._backgroundType === BackgroundNinePartImage)
            {
                var left = self._DOMImageSizes[0] ? self._DOMImageSizes[0].width : 0,
                    right = self._DOMImageSizes[2] ? self._DOMImageSizes[2].width : 0,
                    top = self._DOMImageSizes[0] ? self._DOMImageSizes[0].height : 0,
                    bottom = self._DOMImageSizes[6] ? self._DOMImageSizes[6].height : 0,
                    width = size.width - left - right,
                    height = size.height - top - bottom;
                if (self._DOMImageSizes[0])
                    partIndex++;
                if (self._DOMImageSizes[1])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(top)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[2])
                    partIndex++;
                if (self._DOMImageSizes[3])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(self._DOMImageSizes[3].width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[4])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[5])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(self._DOMImageSizes[5].width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                    partIndex++;
                }
                if (self._DOMImageSizes[6])
                    partIndex++;
                if (self._DOMImageSizes[7])
                {
                    self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                    self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(self._DOMImageSizes[7].height)) + "px";
                }
            }
        }
    }
    if (self._postsFrameChangedNotifications && !self._inhibitFrameAndBoundsChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewFrameDidChangeNotification, self);
}
,["void","CGSize"]), new objj_method(sel_getUid("setBounds:"), function $CPView__setBounds_(self, _cmd, bounds)
{
    if (CGRectEqualToRect(self._bounds, bounds))
        return;
    self._inhibitFrameAndBoundsChangedNotifications = YES;
    objj_msgSend(self, "setBoundsOrigin:", bounds.origin);
    objj_msgSend(self, "setBoundsSize:", bounds.size);
    self._inhibitFrameAndBoundsChangedNotifications = NO;
    if (self._postsBoundsChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewBoundsDidChangeNotification, self);
}
,["void","CGRect"]), new objj_method(sel_getUid("bounds"), function $CPView__bounds(self, _cmd)
{
    return CGRectMakeCopy(self._bounds);
}
,["CGRect"]), new objj_method(sel_getUid("boundsOrigin"), function $CPView__boundsOrigin(self, _cmd)
{
    return CGPointMakeCopy(self._bounds.origin);
}
,["CGPoint"]), new objj_method(sel_getUid("boundsSize"), function $CPView__boundsSize(self, _cmd)
{
    return CGSizeMakeCopy(self._bounds.size);
}
,["CGSize"]), new objj_method(sel_getUid("setBoundsOrigin:"), function $CPView__setBoundsOrigin_(self, _cmd, aPoint)
{
    var origin = self._bounds.origin;
    if (CGPointEqualToPoint(origin, aPoint))
        return;
    origin.x = aPoint.x;
    origin.y = aPoint.y;
    if (origin.x != 0 || origin.y != 0)
    {
        self._boundsTransform = CGAffineTransformMakeTranslation(-origin.x, -origin.y);
        self._inverseBoundsTransform = CGAffineTransformInvert(self._boundsTransform);
    }
    else
    {
        self._boundsTransform = nil;
        self._inverseBoundsTransform = nil;
    }
    var index = self._subviews.length;
    while (index--)
    {
        var view = self._subviews[index],
            origin = view._frame.origin;
        if (self._boundsTransform)
            var ____p = CGPointApplyAffineTransform(CGPointMake(origin.x, origin.y), self._boundsTransform);
        else
            var ____p = CGPointMake(origin.x, origin.y);
        view._DOMElement.style.left = ROUND(____p.x) + "px";
        view._DOMElement.style.top = ROUND(____p.y) + "px";
    }
    if (self._postsBoundsChangedNotifications && !self._inhibitFrameAndBoundsChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewBoundsDidChangeNotification, self);
}
,["void","CGPoint"]), new objj_method(sel_getUid("setBoundsSize:"), function $CPView__setBoundsSize_(self, _cmd, aSize)
{
    var size = self._bounds.size;
    if (CGSizeEqualToSize(size, aSize))
        return;
    var frameSize = self._frame.size;
    if (!CGSizeEqualToSize(size, frameSize))
    {
        var origin = self._bounds.origin;
        origin.x /= size.width / frameSize.width;
        origin.y /= size.height / frameSize.height;
    }
    size.width = aSize.width;
    size.height = aSize.height;
    if (!CGSizeEqualToSize(size, frameSize))
    {
        var origin = self._bounds.origin;
        origin.x *= size.width / frameSize.width;
        origin.y *= size.height / frameSize.height;
    }
    if (self._postsBoundsChangedNotifications && !self._inhibitFrameAndBoundsChangedNotifications)
        objj_msgSend(CachedNotificationCenter, "postNotificationName:object:", CPViewBoundsDidChangeNotification, self);
}
,["void","CGSize"]), new objj_method(sel_getUid("resizeWithOldSuperviewSize:"), function $CPView__resizeWithOldSuperviewSize_(self, _cmd, aSize)
{
    var mask = objj_msgSend(self, "autoresizingMask");
    if (mask == CPViewNotSizable)
        return;
    var frame = self._superview._frame,
        newFrame = CGRectMakeCopy(self._frame),
        dX = frame.size.width - aSize.width,
        dY = frame.size.height - aSize.height,
        evenFractionX = 1.0 / ((mask & CPViewMinXMargin ? 1 : 0) + (mask & CPViewWidthSizable ? 1 : 0) + (mask & CPViewMaxXMargin ? 1 : 0)),
        evenFractionY = 1.0 / ((mask & CPViewMinYMargin ? 1 : 0) + (mask & CPViewHeightSizable ? 1 : 0) + (mask & CPViewMaxYMargin ? 1 : 0)),
        baseX = (mask & CPViewMinXMargin ? self._frame.origin.x : 0) + (mask & CPViewWidthSizable ? self._frame.size.width : 0) + (mask & CPViewMaxXMargin ? aSize.width - self._frame.size.width - self._frame.origin.x : 0),
        baseY = (mask & CPViewMinYMargin ? self._frame.origin.y : 0) + (mask & CPViewHeightSizable ? self._frame.size.height : 0) + (mask & CPViewMaxYMargin ? aSize.height - self._frame.size.height - self._frame.origin.y : 0);
    if (mask & CPViewMinXMargin)
        newFrame.origin.x += dX * (baseX > 0 ? self._frame.origin.x / baseX : evenFractionX);
    if (mask & CPViewWidthSizable)
        newFrame.size.width += dX * (baseX > 0 ? self._frame.size.width / baseX : evenFractionX);
    if (mask & CPViewMinYMargin)
        newFrame.origin.y += dY * (baseY > 0 ? self._frame.origin.y / baseY : evenFractionY);
    if (mask & CPViewHeightSizable)
        newFrame.size.height += dY * (baseY > 0 ? self._frame.size.height / baseY : evenFractionY);
    objj_msgSend(self, "setFrame:", newFrame);
}
,["void","CGSize"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $CPView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
    var count = self._subviews.length;
    while (count--)
        objj_msgSend(self._subviews[count], "resizeWithOldSuperviewSize:", aSize);
}
,["void","CGSize"]), new objj_method(sel_getUid("setAutoresizesSubviews:"), function $CPView__setAutoresizesSubviews_(self, _cmd, aFlag)
{
    self._autoresizesSubviews = !!aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("autoresizesSubviews"), function $CPView__autoresizesSubviews(self, _cmd)
{
    return self._autoresizesSubviews;
}
,["BOOL"]), new objj_method(sel_getUid("setAutoresizingMask:"), function $CPView__setAutoresizingMask_(self, _cmd, aMask)
{
    self._autoresizingMask = aMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("autoresizingMask"), function $CPView__autoresizingMask(self, _cmd)
{
    return self._autoresizingMask;
}
,["unsigned"]), new objj_method(sel_getUid("enterFullScreenMode"), function $CPView__enterFullScreenMode(self, _cmd)
{
    return objj_msgSend(self, "enterFullScreenMode:withOptions:", nil, nil);
}
,["BOOL"]), new objj_method(sel_getUid("enterFullScreenMode:withOptions:"), function $CPView__enterFullScreenMode_withOptions_(self, _cmd, aScreen, options)
{
    self._fullScreenModeState = _CPViewFullScreenModeStateMake(self);
    var fullScreenWindow = objj_msgSend(objj_msgSend(CPWindow, "alloc"), "initWithContentRect:styleMask:", objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "contentBounds"), CPBorderlessWindowMask);
    objj_msgSend(fullScreenWindow, "setLevel:", CPScreenSaverWindowLevel);
    objj_msgSend(fullScreenWindow, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    var contentView = objj_msgSend(fullScreenWindow, "contentView");
    objj_msgSend(contentView, "setBackgroundColor:", objj_msgSend(CPColor, "blackColor"));
    objj_msgSend(contentView, "addSubview:", self);
    objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    objj_msgSend(self, "setFrame:", CGRectMakeCopy(objj_msgSend(contentView, "bounds")));
    objj_msgSend(fullScreenWindow, "makeKeyAndOrderFront:", self);
    objj_msgSend(fullScreenWindow, "makeFirstResponder:", self);
    self._isInFullScreenMode = YES;
    return YES;
}
,["BOOL","CPScreen","CPDictionary"]), new objj_method(sel_getUid("exitFullScreenMode"), function $CPView__exitFullScreenMode(self, _cmd)
{
    objj_msgSend(self, "exitFullScreenModeWithOptions:", nil);
}
,["void"]), new objj_method(sel_getUid("exitFullScreenModeWithOptions:"), function $CPView__exitFullScreenModeWithOptions_(self, _cmd, options)
{
    if (!self._isInFullScreenMode)
        return;
    self._isInFullScreenMode = NO;
    objj_msgSend(self, "setFrame:", self._fullScreenModeState.frame);
    objj_msgSend(self, "setAutoresizingMask:", self._fullScreenModeState.autoresizingMask);
    objj_msgSend(self._fullScreenModeState.superview, "_insertSubview:atIndex:", self, self._fullScreenModeState.index);
    objj_msgSend(objj_msgSend(self, "window"), "orderOut:", self);
}
,["void","CPDictionary"]), new objj_method(sel_getUid("isInFullScreenMode"), function $CPView__isInFullScreenMode(self, _cmd)
{
    return self._isInFullScreenMode;
}
,["BOOL"]), new objj_method(sel_getUid("setHidden:"), function $CPView__setHidden_(self, _cmd, aFlag)
{
    aFlag = !!aFlag;
    if (self._isHidden === aFlag)
        return;
    self._isHidden = aFlag;
    self._DOMElement.style.display = self._isHidden ? "none" : "block";
    if (aFlag)
    {
        var view = objj_msgSend(self._window, "firstResponder");
        if (objj_msgSend(view, "isKindOfClass:", objj_msgSend(CPView, "class")))
        {
            do
            {
                if (self == view)
                {
                    objj_msgSend(self._window, "makeFirstResponder:", objj_msgSend(self, "nextValidKeyView"));
                    break;
                }
            }
            while (view = objj_msgSend(view, "superview"));
        }
        objj_msgSend(self, "_notifyViewDidHide");
    }
    else
    {
        objj_msgSend(self, "setNeedsDisplay:", YES);
        objj_msgSend(self, "_notifyViewDidUnhide");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("_notifyViewDidHide"), function $CPView___notifyViewDidHide(self, _cmd)
{
    objj_msgSend(self, "viewDidHide");
    var count = objj_msgSend(self._subviews, "count");
    while (count--)
        objj_msgSend(self._subviews[count], "_notifyViewDidHide");
}
,["void"]), new objj_method(sel_getUid("_notifyViewDidUnhide"), function $CPView___notifyViewDidUnhide(self, _cmd)
{
    objj_msgSend(self, "viewDidUnhide");
    var count = objj_msgSend(self._subviews, "count");
    while (count--)
        objj_msgSend(self._subviews[count], "_notifyViewDidUnhide");
}
,["void"]), new objj_method(sel_getUid("isHidden"), function $CPView__isHidden(self, _cmd)
{
    return self._isHidden;
}
,["BOOL"]), new objj_method(sel_getUid("setClipsToBounds:"), function $CPView__setClipsToBounds_(self, _cmd, shouldClip)
{
    if (self._clipsToBounds === shouldClip)
        return;
    self._clipsToBounds = shouldClip;
    self._DOMElement.style.overflow = self._clipsToBounds ? "hidden" : "visible";
}
,["void","BOOL"]), new objj_method(sel_getUid("clipsToBounds"), function $CPView__clipsToBounds(self, _cmd)
{
    return self._clipsToBounds;
}
,["BOOL"]), new objj_method(sel_getUid("setAlphaValue:"), function $CPView__setAlphaValue_(self, _cmd, anAlphaValue)
{
    if (self._opacity == anAlphaValue)
        return;
    self._opacity = anAlphaValue;
    if (CPFeatureIsCompatible(CPOpacityRequiresFilterFeature))
    {
        if (anAlphaValue === 1.0)
            try            {
                self._DOMElement.style.removeAttribute("filter");
            }
            catch(anException)             {
            }        else
            self._DOMElement.style.filter = "alpha(opacity=" + anAlphaValue * 100 + ")";
    }
    else
        self._DOMElement.style.opacity = anAlphaValue;
}
,["void","float"]), new objj_method(sel_getUid("alphaValue"), function $CPView__alphaValue(self, _cmd)
{
    return self._opacity;
}
,["float"]), new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"), function $CPView__isHiddenOrHasHiddenAncestor(self, _cmd)
{
    var view = self;
    while (view && !objj_msgSend(view, "isHidden"))
        view = objj_msgSend(view, "superview");
    return view !== nil;
}
,["BOOL"]), new objj_method(sel_getUid("_isVisible"), function $CPView___isVisible(self, _cmd)
{
    return !objj_msgSend(self, "isHiddenOrHasHiddenAncestor") && objj_msgSend(objj_msgSend(self, "window"), "isVisible");
}
,["BOOL"]), new objj_method(sel_getUid("viewDidHide"), function $CPView__viewDidHide(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("viewDidUnhide"), function $CPView__viewDidUnhide(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("acceptsFirstMouse:"), function $CPView__acceptsFirstMouse_(self, _cmd, anEvent)
{
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("hitTests"), function $CPView__hitTests(self, _cmd)
{
    return self._hitTests;
}
,["BOOL"]), new objj_method(sel_getUid("setHitTests:"), function $CPView__setHitTests_(self, _cmd, shouldHitTest)
{
    self._hitTests = !!shouldHitTest;
}
,["void","BOOL"]), new objj_method(sel_getUid("hitTest:"), function $CPView__hitTest_(self, _cmd, aPoint)
{
    if (self._isHidden || !self._hitTests || !CGRectContainsPoint(self._frame, aPoint))
        return nil;
    var view = nil,
        i = self._subviews.length,
        adjustedPoint = CGPointMake(aPoint.x - CGRectGetMinX(self._frame), aPoint.y - CGRectGetMinY(self._frame));
    if (self._inverseBoundsTransform)
        adjustedPoint = CGPointApplyAffineTransform(adjustedPoint, self._inverseBoundsTransform);
    while (i--)
        if (view = objj_msgSend(self._subviews[i], "hitTest:", adjustedPoint))
            return view;
    return self;
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("needsPanelToBecomeKey"), function $CPView__needsPanelToBecomeKey(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("mouseDownCanMoveWindow"), function $CPView__mouseDownCanMoveWindow(self, _cmd)
{
    return !objj_msgSend(self, "isOpaque");
}
,["BOOL"]), new objj_method(sel_getUid("mouseDown:"), function $CPView__mouseDown_(self, _cmd, anEvent)
{
    if (objj_msgSend(self, "mouseDownCanMoveWindow"))
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPView").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("rightMouseDown:"), function $CPView__rightMouseDown_(self, _cmd, anEvent)
{
    var menu = objj_msgSend(self, "menuForEvent:", anEvent);
    if (menu)
        objj_msgSend(CPMenu, "popUpContextMenu:withEvent:forView:", menu, anEvent, self);
    else if (objj_msgSend(objj_msgSend(self, "nextResponder"), "isKindOfClass:", CPView))
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPView").super_class }, "rightMouseDown:", anEvent);
    else
        objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateContextMenuDOMEvent:", YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("menuForEvent:"), function $CPView__menuForEvent_(self, _cmd, anEvent)
{
    return objj_msgSend(self, "menu") || objj_msgSend(objj_msgSend(self, "class"), "defaultMenu");
}
,["CPMenu","CPEvent"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPView__setBackgroundColor_(self, _cmd, aColor)
{
    if (self._backgroundColor == aColor)
        return;
    if (aColor == objj_msgSend(CPNull, "null"))
        aColor = nil;
    self._backgroundColor = aColor;
    var patternImage = objj_msgSend(self._backgroundColor, "patternImage"),
        colorExists = self._backgroundColor && (objj_msgSend(self._backgroundColor, "patternImage") || objj_msgSend(self._backgroundColor, "alphaComponent") > 0.0),
        colorHasAlpha = colorExists && objj_msgSend(self._backgroundColor, "alphaComponent") < 1.0,
        supportsRGBA = CPFeatureIsCompatible(CPCSSRGBAFeature),
        colorNeedsDOMElement = colorHasAlpha && !supportsRGBA,
        amount = 0,
        slices;
    if (objj_msgSend(patternImage, "isThreePartImage"))
    {
        self._backgroundType = objj_msgSend(patternImage, "isVertical") ? BackgroundVerticalThreePartImage : BackgroundHorizontalThreePartImage;
        amount = 3;
    }
    else if (objj_msgSend(patternImage, "isNinePartImage"))
    {
        self._backgroundType = BackgroundNinePartImage;
        amount = 9;
    }
    else
    {
        self._backgroundType = colorNeedsDOMElement ? BackgroundTransparentColor : BackgroundTrivialColor;
        amount = (colorNeedsDOMElement ? 1 : 0) - self._DOMImageParts.length;
    }
    if (self._backgroundType === BackgroundVerticalThreePartImage || self._backgroundType === BackgroundHorizontalThreePartImage || self._backgroundType === BackgroundNinePartImage)
    {
        slices = objj_msgSend(patternImage, "imageSlices");
        amount = MIN(amount, slices.length);
        for (var i = 0, count = slices.length; i < count; i++)
        {
            var image = slices[i],
                size = objj_msgSend(image, "size");
            if (!size || size.width == 0 && size.height == 0)
                size = nil;
            self._DOMImageSizes[i] = size;
            if (!size)
                amount--;
        }
        amount -= self._DOMImageParts.length;
    }
    if (amount > 0)
    {
        while (amount--)
        {
            var DOMElement = DOMElementPrototype.cloneNode(false);
            DOMElement.style.zIndex = -1000;
            self._DOMImageParts.push(DOMElement);
            self._DOMElement.appendChild(DOMElement);
        }
    }
    else
    {
        amount = -amount;
        while (amount--)
            self._DOMElement.removeChild(self._DOMImageParts.pop());
    }
    if (self._backgroundType === BackgroundTrivialColor || self._backgroundType === BackgroundTransparentColor)
    {
        var colorCSS = colorExists ? objj_msgSend(self._backgroundColor, "cssString") : "";
        if (colorNeedsDOMElement)
        {
            self._DOMElement.style.background = "";
            self._DOMImageParts[0].style.background = objj_msgSend(self._backgroundColor, "cssString");
            if (CPFeatureIsCompatible(CPOpacityRequiresFilterFeature))
                self._DOMImageParts[0].style.filter = "alpha(opacity=" + objj_msgSend(self._backgroundColor, "alphaComponent") * 100 + ")";
            else
                self._DOMImageParts[0].style.opacity = objj_msgSend(self._backgroundColor, "alphaComponent");
            var size = objj_msgSend(self, "bounds").size;
            self._DOMImageParts[0].style.width = MAX(0.0, ROUND(size.width)) + "px";
            self._DOMImageParts[0].style.height = MAX(0.0, ROUND(size.height)) + "px";
        }
        else
            self._DOMElement.style.background = colorCSS;
    }
    else
    {
        var frameSize = self._frame.size,
            partIndex = 0;
        for (var i = 0; i < slices.length; i++)
        {
            var size = self._DOMImageSizes[i];
            if (!size)
                continue;
            var image = slices[i];
            self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(size.width)) + "px";
            self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(size.height)) + "px";
            self._DOMImageParts[partIndex].style.background = "url(\"" + objj_msgSend(image, "filename") + "\")";
            if (!supportsRGBA)
            {
                if (CPFeatureIsCompatible(CPOpacityRequiresFilterFeature))
                    try                    {
                        self._DOMImageParts[partIndex].style.removeAttribute("filter");
                    }
                    catch(anException)                     {
                    }                else
                    self._DOMImageParts[partIndex].style.opacity = 1.0;
            }
            partIndex++;
        }
        if (self._backgroundType == BackgroundNinePartImage)
        {
            var left = self._DOMImageSizes[0] ? self._DOMImageSizes[0].width : 0,
                right = self._DOMImageSizes[2] ? self._DOMImageSizes[2].width : 0,
                top = self._DOMImageSizes[0] ? self._DOMImageSizes[0].height : 0,
                bottom = self._DOMImageSizes[6] ? self._DOMImageSizes[6].height : 0,
                width = frameSize.width - left - right,
                height = frameSize.height - top - bottom;
            partIndex = 0;
            if (self._DOMImageSizes[0])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[1])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(left, 0.0), NULL);
                else
                    var ____p = CGPointMake(left, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(self._DOMImageSizes[1].height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[2])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.right = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[3])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, top), NULL);
                else
                    var ____p = CGPointMake(0.0, top);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(self._DOMImageSizes[3].width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[4])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(left, top), NULL);
                else
                    var ____p = CGPointMake(left, top);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[5])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, top), NULL);
                else
                    var ____p = CGPointMake(0.0, top);
                self._DOMImageParts[partIndex].style.right = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(self._DOMImageSizes[5].width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[6])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.bottom = ROUND(____p.y) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[7])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(left, 0.0), NULL);
                else
                    var ____p = CGPointMake(left, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.bottom = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(self._DOMImageSizes[7].height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[8])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.right = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.bottom = ROUND(____p.y) + "px";
            }
        }
        else if (self._backgroundType == BackgroundVerticalThreePartImage)
        {
            var top = self._DOMImageSizes[0] ? self._DOMImageSizes[0].height : 0,
                bottom = self._DOMImageSizes[2] ? self._DOMImageSizes[2].height : 0;
            partIndex = 0;
            if (top)
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(frameSize.width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(top)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[1])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, top), NULL);
                else
                    var ____p = CGPointMake(0.0, top);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(frameSize.width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(frameSize.height - top - bottom)) + "px";
                partIndex++;
            }
            if (bottom)
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.bottom = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(frameSize.width)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(bottom)) + "px";
            }
        }
        else if (self._backgroundType == BackgroundHorizontalThreePartImage)
        {
            var left = self._DOMImageSizes[0] ? self._DOMImageSizes[0].width : 0,
                right = self._DOMImageSizes[2] ? self._DOMImageSizes[2].width : 0;
            partIndex = 0;
            if (left)
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(left)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(frameSize.height)) + "px";
                partIndex++;
            }
            if (self._DOMImageSizes[1])
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(left, 0.0), NULL);
                else
                    var ____p = CGPointMake(left, 0.0);
                self._DOMImageParts[partIndex].style.left = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(frameSize.width - left - right)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(frameSize.height)) + "px";
                partIndex++;
            }
            if (right)
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
                else
                    var ____p = CGPointMake(0.0, 0.0);
                self._DOMImageParts[partIndex].style.right = ROUND(____p.x) + "px";
                self._DOMImageParts[partIndex].style.top = ROUND(____p.y) + "px";
                self._DOMImageParts[partIndex].style.width = MAX(0.0, ROUND(right)) + "px";
                self._DOMImageParts[partIndex].style.height = MAX(0.0, ROUND(frameSize.height)) + "px";
            }
        }
    }
}
,["void","CPColor"]), new objj_method(sel_getUid("backgroundColor"), function $CPView__backgroundColor(self, _cmd)
{
    return self._backgroundColor;
}
,["CPColor"]), new objj_method(sel_getUid("convertPoint:fromView:"), function $CPView__convertPoint_fromView_(self, _cmd, aPoint, aView)
{
    return CGPointApplyAffineTransform(aPoint, _CPViewGetTransform(aView, self));
}
,["CGPoint","CGPoint","CPView"]), new objj_method(sel_getUid("convertPointFromBase:"), function $CPView__convertPointFromBase_(self, _cmd, aPoint)
{
    return CGPointApplyAffineTransform(aPoint, _CPViewGetTransform(nil, self));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertPoint:toView:"), function $CPView__convertPoint_toView_(self, _cmd, aPoint, aView)
{
    return CGPointApplyAffineTransform(aPoint, _CPViewGetTransform(self, aView));
}
,["CGPoint","CGPoint","CPView"]), new objj_method(sel_getUid("convertPointToBase:"), function $CPView__convertPointToBase_(self, _cmd, aPoint)
{
    return CGPointApplyAffineTransform(aPoint, _CPViewGetTransform(self, nil));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertSize:fromView:"), function $CPView__convertSize_fromView_(self, _cmd, aSize, aView)
{
    return CGSizeApplyAffineTransform(aSize, _CPViewGetTransform(aView, self));
}
,["CGSize","CGSize","CPView"]), new objj_method(sel_getUid("convertSize:toView:"), function $CPView__convertSize_toView_(self, _cmd, aSize, aView)
{
    return CGSizeApplyAffineTransform(aSize, _CPViewGetTransform(self, aView));
}
,["CGSize","CGSize","CPView"]), new objj_method(sel_getUid("convertRect:fromView:"), function $CPView__convertRect_fromView_(self, _cmd, aRect, aView)
{
    return CGRectApplyAffineTransform(aRect, _CPViewGetTransform(aView, self));
}
,["CGRect","CGRect","CPView"]), new objj_method(sel_getUid("convertRectFromBase:"), function $CPView__convertRectFromBase_(self, _cmd, aRect)
{
    return CGRectApplyAffineTransform(aRect, _CPViewGetTransform(nil, self));
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("convertRect:toView:"), function $CPView__convertRect_toView_(self, _cmd, aRect, aView)
{
    return CGRectApplyAffineTransform(aRect, _CPViewGetTransform(self, aView));
}
,["CGRect","CGRect","CPView"]), new objj_method(sel_getUid("convertRectToBase:"), function $CPView__convertRectToBase_(self, _cmd, aRect)
{
    return CGRectApplyAffineTransform(aRect, _CPViewGetTransform(self, nil));
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("setPostsFrameChangedNotifications:"), function $CPView__setPostsFrameChangedNotifications_(self, _cmd, shouldPostFrameChangedNotifications)
{
    shouldPostFrameChangedNotifications = !!shouldPostFrameChangedNotifications;
    if (self._postsFrameChangedNotifications === shouldPostFrameChangedNotifications)
        return;
    self._postsFrameChangedNotifications = shouldPostFrameChangedNotifications;
}
,["void","BOOL"]), new objj_method(sel_getUid("postsFrameChangedNotifications"), function $CPView__postsFrameChangedNotifications(self, _cmd)
{
    return self._postsFrameChangedNotifications;
}
,["BOOL"]), new objj_method(sel_getUid("setPostsBoundsChangedNotifications:"), function $CPView__setPostsBoundsChangedNotifications_(self, _cmd, shouldPostBoundsChangedNotifications)
{
    shouldPostBoundsChangedNotifications = !!shouldPostBoundsChangedNotifications;
    if (self._postsBoundsChangedNotifications === shouldPostBoundsChangedNotifications)
        return;
    self._postsBoundsChangedNotifications = shouldPostBoundsChangedNotifications;
}
,["void","BOOL"]), new objj_method(sel_getUid("postsBoundsChangedNotifications"), function $CPView__postsBoundsChangedNotifications(self, _cmd)
{
    return self._postsBoundsChangedNotifications;
}
,["BOOL"]), new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"), function $CPView__dragImage_at_offset_event_pasteboard_source_slideBack_(self, _cmd, anImage, aLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack)
{
    objj_msgSend(self._window, "dragImage:at:offset:event:pasteboard:source:slideBack:", anImage, objj_msgSend(self, "convertPoint:toView:", aLocation, nil), mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack);
}
,["void","CPImage","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"), function $CPView__dragView_at_offset_event_pasteboard_source_slideBack_(self, _cmd, aView, aLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack)
{
    objj_msgSend(self._window, "dragView:at:offset:event:pasteboard:source:slideBack:", aView, objj_msgSend(self, "convertPoint:toView:", aLocation, nil), mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack);
}
,["void","CPView","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("registerForDraggedTypes:"), function $CPView__registerForDraggedTypes_(self, _cmd, pasteboardTypes)
{
    if (!pasteboardTypes || !objj_msgSend(pasteboardTypes, "count"))
        return;
    var theWindow = objj_msgSend(self, "window");
    objj_msgSend(theWindow, "_noteUnregisteredDraggedTypes:", self._registeredDraggedTypes);
    objj_msgSend(self._registeredDraggedTypes, "addObjectsFromArray:", pasteboardTypes);
    objj_msgSend(theWindow, "_noteRegisteredDraggedTypes:", self._registeredDraggedTypes);
    self._registeredDraggedTypesArray = nil;
}
,["void","CPArray"]), new objj_method(sel_getUid("registeredDraggedTypes"), function $CPView__registeredDraggedTypes(self, _cmd)
{
    if (!self._registeredDraggedTypesArray)
        self._registeredDraggedTypesArray = objj_msgSend(self._registeredDraggedTypes, "allObjects");
    return self._registeredDraggedTypesArray;
}
,["CPArray"]), new objj_method(sel_getUid("unregisterDraggedTypes"), function $CPView__unregisterDraggedTypes(self, _cmd)
{
    objj_msgSend(objj_msgSend(self, "window"), "_noteUnregisteredDraggedTypes:", self._registeredDraggedTypes);
    self._registeredDraggedTypes = objj_msgSend(CPSet, "set");
    self._registeredDraggedTypesArray = [];
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $CPView__drawRect_(self, _cmd, aRect)
{
}
,["void","CGRect"]), new objj_method(sel_getUid("setNeedsDisplay:"), function $CPView__setNeedsDisplay_(self, _cmd, aFlag)
{
    if (aFlag)
        objj_msgSend(self, "setNeedsDisplayInRect:", objj_msgSend(self, "bounds"));
}
,["void","BOOL"]), new objj_method(sel_getUid("setNeedsDisplayInRect:"), function $CPView__setNeedsDisplayInRect_(self, _cmd, aRect)
{
    if (!(self._viewClassFlags & CPViewHasCustomDrawRect))
        return;
    if (CGRectIsEmpty(aRect))
        return;
    if (self._dirtyRect && !CGRectIsEmpty(self._dirtyRect))
        self._dirtyRect = CGRectUnion(aRect, self._dirtyRect);
    else
        self._dirtyRect = CGRectMakeCopy(aRect);
    _CPDisplayServerAddDisplayObject(self);
}
,["void","CGRect"]), new objj_method(sel_getUid("needsDisplay"), function $CPView__needsDisplay(self, _cmd)
{
    return self._dirtyRect && !CGRectIsEmpty(self._dirtyRect);
}
,["BOOL"]), new objj_method(sel_getUid("displayIfNeeded"), function $CPView__displayIfNeeded(self, _cmd)
{
    if (objj_msgSend(self, "needsDisplay"))
        objj_msgSend(self, "displayRect:", self._dirtyRect);
}
,["void"]), new objj_method(sel_getUid("display"), function $CPView__display(self, _cmd)
{
    objj_msgSend(self, "displayRect:", objj_msgSend(self, "visibleRect"));
}
,["void"]), new objj_method(sel_getUid("displayIfNeededInRect:"), function $CPView__displayIfNeededInRect_(self, _cmd, aRect)
{
    if (objj_msgSend(self, "needsDisplay"))
        objj_msgSend(self, "displayRect:", aRect);
}
,["void","CGRect"]), new objj_method(sel_getUid("displayRect:"), function $CPView__displayRect_(self, _cmd, aRect)
{
    objj_msgSend(self, "viewWillDraw");
    objj_msgSend(self, "displayRectIgnoringOpacity:inContext:", aRect, nil);
    self._dirtyRect = NULL;
}
,["void","CGRect"]), new objj_method(sel_getUid("displayRectIgnoringOpacity:inContext:"), function $CPView__displayRectIgnoringOpacity_inContext_(self, _cmd, aRect, aGraphicsContext)
{
    if (objj_msgSend(self, "isHidden"))
        return;
    objj_msgSend(self, "lockFocus");
    CGContextClearRect(objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"), aRect);
    objj_msgSend(self, "drawRect:", aRect);
    objj_msgSend(self, "unlockFocus");
}
,["void","CGRect","CPGraphicsContext"]), new objj_method(sel_getUid("viewWillDraw"), function $CPView__viewWillDraw(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("lockFocus"), function $CPView__lockFocus(self, _cmd)
{
    if (!self._graphicsContext)
    {
        var graphicsPort = CGBitmapGraphicsContextCreate();
        var width = CGRectGetWidth(self._frame),
            height = CGRectGetHeight(self._frame);
        self._DOMContentsElement = graphicsPort.DOMElement;
        self._DOMContentsElement.style.zIndex = -100;
        self._DOMContentsElement.style.overflow = "hidden";
        self._DOMContentsElement.style.position = "absolute";
        self._DOMContentsElement.style.visibility = "visible";
        self._DOMContentsElement.width = MAX(0.0, ROUND(width));
        self._DOMContentsElement.height = MAX(0.0, ROUND(height));
        if (NULL)
            var ____p = CGPointApplyAffineTransform(CGPointMake(0.0, 0.0), NULL);
        else
            var ____p = CGPointMake(0.0, 0.0);
        self._DOMContentsElement.style.left = ROUND(____p.x) + "px";
        self._DOMContentsElement.style.top = ROUND(____p.y) + "px";
        self._DOMContentsElement.style.width = MAX(0.0, ROUND(width)) + "px";
        self._DOMContentsElement.style.height = MAX(0.0, ROUND(height)) + "px";
        if (CPPlatformHasBug(CPCanvasParentDrawErrorsOnMovementBug))
            self._DOMElement.style.webkitTransform = 'translateX(0)';
        self._DOMElement.appendChild(self._DOMContentsElement);
        self._graphicsContext = objj_msgSend(CPGraphicsContext, "graphicsContextWithGraphicsPort:flipped:", graphicsPort, YES);
    }
    objj_msgSend(CPGraphicsContext, "setCurrentContext:", self._graphicsContext);
    CGContextSaveGState(objj_msgSend(self._graphicsContext, "graphicsPort"));
}
,["void"]), new objj_method(sel_getUid("unlockFocus"), function $CPView__unlockFocus(self, _cmd)
{
    CGContextRestoreGState(objj_msgSend(self._graphicsContext, "graphicsPort"));
    objj_msgSend(CPGraphicsContext, "setCurrentContext:", nil);
}
,["void"]), new objj_method(sel_getUid("setNeedsLayout"), function $CPView__setNeedsLayout(self, _cmd)
{
    if (!(self._viewClassFlags & CPViewHasCustomLayoutSubviews))
        return;
    self._needsLayout = YES;
    _CPDisplayServerAddLayoutObject(self);
}
,["void"]), new objj_method(sel_getUid("layoutIfNeeded"), function $CPView__layoutIfNeeded(self, _cmd)
{
    if (self._needsLayout)
    {
        self._needsLayout = NO;
        objj_msgSend(self, "layoutSubviews");
    }
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $CPView__layoutSubviews(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("isOpaque"), function $CPView__isOpaque(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("visibleRect"), function $CPView__visibleRect(self, _cmd)
{
    if (!self._superview)
        return self._bounds;
    return CGRectIntersection(objj_msgSend(self, "convertRect:fromView:", objj_msgSend(self._superview, "visibleRect"), self._superview), self._bounds);
}
,["CGRect"]), new objj_method(sel_getUid("_enclosingClipView"), function $CPView___enclosingClipView(self, _cmd)
{
    var superview = self._superview,
        clipViewClass = objj_msgSend(CPClipView, "class");
    while (superview && !objj_msgSend(superview, "isKindOfClass:", clipViewClass))
        superview = superview._superview;
    return superview;
}
,["CPScrollView"]), new objj_method(sel_getUid("scrollPoint:"), function $CPView__scrollPoint_(self, _cmd, aPoint)
{
    var clipView = objj_msgSend(self, "_enclosingClipView");
    if (!clipView)
        return;
    objj_msgSend(clipView, "scrollToPoint:", objj_msgSend(self, "convertPoint:toView:", aPoint, clipView));
}
,["void","CGPoint"]), new objj_method(sel_getUid("scrollRectToVisible:"), function $CPView__scrollRectToVisible_(self, _cmd, aRect)
{
    aRect = CGRectIntersection(aRect, self._bounds);
    if (CGRectIsEmpty(aRect))
        return NO;
    var enclosingClipView = objj_msgSend(self, "_enclosingClipView");
    if (!enclosingClipView)
        return NO;
    var documentView = objj_msgSend(enclosingClipView, "documentView");
    if (!documentView)
        return NO;
    var documentViewVisibleRect = objj_msgSend(documentView, "visibleRect"),
        rectInDocumentView = objj_msgSend(self, "convertRect:toView:", aRect, documentView);
    if (CGRectContainsRect(documentViewVisibleRect, rectInDocumentView))
        return NO;
    var scrollPoint = CGPointMakeCopy(documentViewVisibleRect.origin);
    if (CGRectGetMinX(rectInDocumentView) < CGRectGetMinX(documentViewVisibleRect))
        scrollPoint.x = CGRectGetMinX(rectInDocumentView);
    else if (CGRectGetMaxX(rectInDocumentView) > CGRectGetMaxX(documentViewVisibleRect))
        scrollPoint.x += CGRectGetMaxX(rectInDocumentView) - CGRectGetMaxX(documentViewVisibleRect);
    if (CGRectGetMinY(rectInDocumentView) < CGRectGetMinY(documentViewVisibleRect))
        scrollPoint.y = CGRectGetMinY(rectInDocumentView);
    else if (CGRectGetMaxY(rectInDocumentView) > CGRectGetMaxY(documentViewVisibleRect))
        scrollPoint.y += CGRectGetMaxY(rectInDocumentView) - CGRectGetMaxY(documentViewVisibleRect);
    objj_msgSend(enclosingClipView, "scrollToPoint:", scrollPoint);
    return YES;
}
,["BOOL","CGRect"]), new objj_method(sel_getUid("autoscroll:"), function $CPView__autoscroll_(self, _cmd, anEvent)
{
    return objj_msgSend(objj_msgSend(self, "superview"), "autoscroll:", anEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("adjustScroll:"), function $CPView__adjustScroll_(self, _cmd, proposedVisibleRect)
{
    return proposedVisibleRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("scrollRect:by:"), function $CPView__scrollRect_by_(self, _cmd, aRect, anAmount)
{
}
,["void","CGRect","float"]), new objj_method(sel_getUid("enclosingScrollView"), function $CPView__enclosingScrollView(self, _cmd)
{
    var superview = self._superview,
        scrollViewClass = objj_msgSend(CPScrollView, "class");
    while (superview && !objj_msgSend(superview, "isKindOfClass:", scrollViewClass))
        superview = superview._superview;
    return superview;
}
,["CPScrollView"]), new objj_method(sel_getUid("scrollClipView:toPoint:"), function $CPView__scrollClipView_toPoint_(self, _cmd, aClipView, aPoint)
{
    objj_msgSend(aClipView, "scrollToPoint:", aPoint);
}
,["void","CPClipView","CGPoint"]), new objj_method(sel_getUid("reflectScrolledClipView:"), function $CPView__reflectScrolledClipView_(self, _cmd, aClipView)
{
}
,["void","CPClipView"]), new objj_method(sel_getUid("inLiveResize"), function $CPView__inLiveResize(self, _cmd)
{
    return self._inLiveResize;
}
,["BOOL"]), new objj_method(sel_getUid("viewWillStartLiveResize"), function $CPView__viewWillStartLiveResize(self, _cmd)
{
    self._inLiveResize = YES;
}
,["void"]), new objj_method(sel_getUid("viewDidEndLiveResize"), function $CPView__viewDidEndLiveResize(self, _cmd)
{
    self._inLiveResize = NO;
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPView__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPView, "class"))
        return;
    DOMElementPrototype = document.createElement("div");
    var style = DOMElementPrototype.style;
    style.overflow = "hidden";
    style.position = "absolute";
    style.visibility = "visible";
    style.zIndex = 0;
    CachedNotificationCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
}
,["void"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPView___binderClassForBinding_(self, _cmd, aBinding)
{
    if (objj_msgSend(aBinding, "hasPrefix:", CPHiddenBinding))
        return objj_msgSend(CPMultipleValueOrBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPView").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("keyPathsForValuesAffectingFrame"), function $CPView__keyPathsForValuesAffectingFrame(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "frameOrigin", "frameSize");
}
,["CPSet"]), new objj_method(sel_getUid("keyPathsForValuesAffectingBounds"), function $CPView__keyPathsForValuesAffectingBounds(self, _cmd)
{
    return objj_msgSend(CPSet, "setWithObjects:", "boundsOrigin", "boundsSize");
}
,["CPSet"]), new objj_method(sel_getUid("defaultMenu"), function $CPView__defaultMenu(self, _cmd)
{
    return nil;
}
,["CPMenu"])]);
}{
var the_class = objj_getClass("CPView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("performKeyEquivalent:"), function $CPView__performKeyEquivalent_(self, _cmd, anEvent)
{
    var count = objj_msgSend(self._subviews, "count");
    while (count--)
        if (objj_msgSend(self._subviews[count], "performKeyEquivalent:", anEvent))
            return YES;
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("canBecomeKeyView"), function $CPView__canBecomeKeyView(self, _cmd)
{
    return objj_msgSend(self, "acceptsFirstResponder") && !objj_msgSend(self, "isHiddenOrHasHiddenAncestor");
}
,["BOOL"]), new objj_method(sel_getUid("nextKeyView"), function $CPView__nextKeyView(self, _cmd)
{
    return self._nextKeyView;
}
,["CPView"]), new objj_method(sel_getUid("nextValidKeyView"), function $CPView__nextValidKeyView(self, _cmd)
{
    var result = objj_msgSend(self, "nextKeyView"),
        resultUID = objj_msgSend(result, "UID"),
        unsuitableResults = {};
    while (result && !objj_msgSend(result, "canBecomeKeyView"))
    {
        unsuitableResults[resultUID] = 1;
        result = objj_msgSend(result, "nextKeyView");
        resultUID = objj_msgSend(result, "UID");
        if (unsuitableResults[resultUID])
            return nil;
    }
    return result;
}
,["CPView"]), new objj_method(sel_getUid("previousKeyView"), function $CPView__previousKeyView(self, _cmd)
{
    return self._previousKeyView;
}
,["CPView"]), new objj_method(sel_getUid("previousValidKeyView"), function $CPView__previousValidKeyView(self, _cmd)
{
    var result = objj_msgSend(self, "previousKeyView"),
        firstResult = result;
    while (result && !objj_msgSend(result, "canBecomeKeyView"))
    {
        result = objj_msgSend(result, "previousKeyView");
        if (result === firstResult)
            return nil;
    }
    return result;
}
,["CPView"]), new objj_method(sel_getUid("_setPreviousKeyView:"), function $CPView___setPreviousKeyView_(self, _cmd, previous)
{
    if (!objj_msgSend(previous, "isEqual:", self))
    {
        var previousWindow = objj_msgSend(previous, "window");
        if (!previousWindow || previousWindow === self._window)
        {
            self._previousKeyView = previous;
            return;
        }
    }
    self._previousKeyView = nil;
}
,["void","CPView"]), new objj_method(sel_getUid("setNextKeyView:"), function $CPView__setNextKeyView_(self, _cmd, next)
{
    if (!objj_msgSend(next, "isEqual:", self))
    {
        var nextWindow = objj_msgSend(next, "window");
        if (!nextWindow || nextWindow === self._window)
        {
            self._nextKeyView = next;
            objj_msgSend(self._nextKeyView, "_setPreviousKeyView:", self);
            return;
        }
    }
    self._nextKeyView = nil;
}
,["void","CPView"])]);
}{
var the_class = objj_getClass("CPView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setLayer:"), function $CPView__setLayer_(self, _cmd, aLayer)
{
    if (self._layer == aLayer)
        return;
    if (self._layer)
    {
        self._layer._owningView = nil;
        self._DOMElement.removeChild(self._layer._DOMElement);
    }
    self._layer = aLayer;
    if (self._layer)
    {
        var bounds = CGRectMakeCopy(objj_msgSend(self, "bounds"));
        objj_msgSend(self._layer, "_setOwningView:", self);
        self._layer._DOMElement.style.zIndex = 100;
        self._DOMElement.appendChild(self._layer._DOMElement);
    }
}
,["void","CALayer"]), new objj_method(sel_getUid("layer"), function $CPView__layer(self, _cmd)
{
    return self._layer;
}
,["CALayer"]), new objj_method(sel_getUid("setWantsLayer:"), function $CPView__setWantsLayer_(self, _cmd, aFlag)
{
    self._wantsLayer = !!aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("wantsLayer"), function $CPView__wantsLayer(self, _cmd)
{
    return self._wantsLayer;
}
,["BOOL"])]);
}{
var the_class = objj_getClass("CPView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("themeState"), function $CPView__themeState(self, _cmd)
{
    return self._themeState;
}
,["unsigned"]), new objj_method(sel_getUid("hasThemeState:"), function $CPView__hasThemeState_(self, _cmd, aState)
{
    if (aState === CPThemeStateNormal && self._themeState === CPThemeStateNormal)
        return YES;
    return !!(self._themeState & (typeof aState === "string" ? CPThemeState(aState) : aState));
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("setThemeState:"), function $CPView__setThemeState_(self, _cmd, aState)
{
    var newState = typeof aState === "string" ? CPThemeState(aState) : aState;
    if (self._themeState & newState)
        return NO;
    self._themeState |= newState;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
    return YES;
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("unsetThemeState:"), function $CPView__unsetThemeState_(self, _cmd, aState)
{
    var newState = typeof aState === "string" ? CPThemeState(aState) : aState;
    if (!(self._themeState & newState))
        return NO;
    self._themeState &= ~newState;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
    return YES;
}
,["BOOL","CPThemeState"]), new objj_method(sel_getUid("themeClass"), function $CPView__themeClass(self, _cmd)
{
    if (self._themeClass)
        return self._themeClass;
    return objj_msgSend(objj_msgSend(self, "class"), "defaultThemeClass");
}
,["CPString"]), new objj_method(sel_getUid("setThemeClass:"), function $CPView__setThemeClass_(self, _cmd, theClass)
{
    self._themeClass = theClass;
    objj_msgSend(self, "_loadThemeAttributes");
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPString"]), new objj_method(sel_getUid("_loadThemeAttributes"), function $CPView___loadThemeAttributes(self, _cmd)
{
    var theClass = objj_msgSend(self, "class"),
        attributes = objj_msgSend(theClass, "_themeAttributes"),
        count = attributes.length;
    if (!count)
        return;
    var theme = objj_msgSend(self, "theme"),
        themeClass = objj_msgSend(self, "themeClass");
    self._themeAttributes = {};
    while (count--)
    {
        var attributeName = attributes[count--],
            attribute = objj_msgSend(objj_msgSend(_CPThemeAttribute, "alloc"), "initWithName:defaultValue:", attributeName, attributes[count]);
        objj_msgSend(attribute, "setParentAttribute:", objj_msgSend(theme, "attributeWithName:forClass:", attributeName, themeClass));
        self._themeAttributes[attributeName] = attribute;
    }
}
,["void"]), new objj_method(sel_getUid("setTheme:"), function $CPView__setTheme_(self, _cmd, aTheme)
{
    if (self._theme === aTheme)
        return;
    self._theme = aTheme;
    objj_msgSend(self, "viewDidChangeTheme");
}
,["void","CPTheme"]), new objj_method(sel_getUid("_setThemeIncludingDescendants:"), function $CPView___setThemeIncludingDescendants_(self, _cmd, aTheme)
{
    objj_msgSend(self, "setTheme:", aTheme);
    objj_msgSend(objj_msgSend(self, "subviews"), "makeObjectsPerformSelector:withObject:", sel_getUid("_setThemeIncludingDescendants:"), aTheme);
}
,["void","CPTheme"]), new objj_method(sel_getUid("theme"), function $CPView__theme(self, _cmd)
{
    return self._theme;
}
,["CPTheme"]), new objj_method(sel_getUid("viewDidChangeTheme"), function $CPView__viewDidChangeTheme(self, _cmd)
{
    if (!self._themeAttributes)
        return;
    var theme = objj_msgSend(self, "theme"),
        themeClass = objj_msgSend(self, "themeClass");
    for (var attributeName in self._themeAttributes)
        if (self._themeAttributes.hasOwnProperty(attributeName))
            objj_msgSend(self._themeAttributes[attributeName], "setParentAttribute:", objj_msgSend(theme, "attributeWithName:forClass:", attributeName, themeClass));
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("_themeAttributeDictionary"), function $CPView___themeAttributeDictionary(self, _cmd)
{
    var dictionary = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
    if (self._themeAttributes)
    {
        var theme = objj_msgSend(self, "theme");
        for (var attributeName in self._themeAttributes)
            if (self._themeAttributes.hasOwnProperty(attributeName))
                objj_msgSend(dictionary, "setObject:forKey:", self._themeAttributes[attributeName], attributeName);
    }
    return dictionary;
}
,["CPDictionary"]), new objj_method(sel_getUid("setValue:forThemeAttribute:inState:"), function $CPView__setValue_forThemeAttribute_inState_(self, _cmd, aValue, aName, aState)
{
    if (!self._themeAttributes || !self._themeAttributes[aName])
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, objj_msgSend(self, "className") + " does not contain theme attribute '" + aName + "'");
    var currentValue = objj_msgSend(self, "currentValueForThemeAttribute:", aName);
    objj_msgSend(self._themeAttributes[aName], "setValue:forState:", aValue, aState);
    if (objj_msgSend(self, "currentValueForThemeAttribute:", aName) === currentValue)
        return;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","id","CPString","CPThemeState"]), new objj_method(sel_getUid("setValue:forThemeAttribute:"), function $CPView__setValue_forThemeAttribute_(self, _cmd, aValue, aName)
{
    if (!self._themeAttributes || !self._themeAttributes[aName])
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, objj_msgSend(self, "className") + " does not contain theme attribute '" + aName + "'");
    var currentValue = objj_msgSend(self, "currentValueForThemeAttribute:", aName);
    objj_msgSend(self._themeAttributes[aName], "setValue:", aValue);
    if (objj_msgSend(self, "currentValueForThemeAttribute:", aName) === currentValue)
        return;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","id","CPString"]), new objj_method(sel_getUid("valueForThemeAttribute:inState:"), function $CPView__valueForThemeAttribute_inState_(self, _cmd, aName, aState)
{
    if (!self._themeAttributes || !self._themeAttributes[aName])
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, objj_msgSend(self, "className") + " does not contain theme attribute '" + aName + "'");
    return objj_msgSend(self._themeAttributes[aName], "valueForState:", aState);
}
,["id","CPString","CPThemeState"]), new objj_method(sel_getUid("valueForThemeAttribute:"), function $CPView__valueForThemeAttribute_(self, _cmd, aName)
{
    if (!self._themeAttributes || !self._themeAttributes[aName])
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, objj_msgSend(self, "className") + " does not contain theme attribute '" + aName + "'");
    return objj_msgSend(self._themeAttributes[aName], "value");
}
,["id","CPString"]), new objj_method(sel_getUid("currentValueForThemeAttribute:"), function $CPView__currentValueForThemeAttribute_(self, _cmd, aName)
{
    if (!self._themeAttributes || !self._themeAttributes[aName])
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, objj_msgSend(self, "className") + " does not contain theme attribute '" + aName + "'");
    return objj_msgSend(self._themeAttributes[aName], "valueForState:", self._themeState);
}
,["id","CPString"]), new objj_method(sel_getUid("hasThemeAttribute:"), function $CPView__hasThemeAttribute_(self, _cmd, aName)
{
    return self._themeAttributes && self._themeAttributes[aName] !== undefined;
}
,["BOOL","CPString"]), new objj_method(sel_getUid("registerThemeValues:"), function $CPView__registerThemeValues_(self, _cmd, themeValues)
{
    for (var i = 0; i < themeValues.length; ++i)
    {
        var attributeValueState = themeValues[i],
            attribute = attributeValueState[0],
            value = attributeValueState[1],
            state = attributeValueState[2];
        if (state)
            objj_msgSend(self, "setValue:forThemeAttribute:inState:", value, attribute, state);
        else
            objj_msgSend(self, "setValue:forThemeAttribute:", value, attribute);
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("registerThemeValues:inherit:"), function $CPView__registerThemeValues_inherit_(self, _cmd, themeValues, inheritedValues)
{
    if (inheritedValues)
        objj_msgSend(self, "registerThemeValues:", inheritedValues);
    if (themeValues)
        objj_msgSend(self, "registerThemeValues:", themeValues);
}
,["void","CPArray","CPArray"]), new objj_method(sel_getUid("createEphemeralSubviewNamed:"), function $CPView__createEphemeralSubviewNamed_(self, _cmd, aViewName)
{
    return nil;
}
,["CPView","CPString"]), new objj_method(sel_getUid("rectForEphemeralSubviewNamed:"), function $CPView__rectForEphemeralSubviewNamed_(self, _cmd, aViewName)
{
    return CGRectMakeZero();
}
,["CGRect","CPString"]), new objj_method(sel_getUid("layoutEphemeralSubviewNamed:positioned:relativeToEphemeralSubviewNamed:"), function $CPView__layoutEphemeralSubviewNamed_positioned_relativeToEphemeralSubviewNamed_(self, _cmd, aViewName, anOrderingMode, relativeToViewName)
{
    if (!self._ephemeralSubviewsForNames)
    {
        self._ephemeralSubviewsForNames = {};
        self._ephemeralSubviews = objj_msgSend(CPSet, "set");
    }
    var frame = objj_msgSend(self, "rectForEphemeralSubviewNamed:", aViewName);
    if (frame)
    {
        if (!self._ephemeralSubviewsForNames[aViewName])
        {
            self._ephemeralSubviewsForNames[aViewName] = objj_msgSend(self, "createEphemeralSubviewNamed:", aViewName);
            objj_msgSend(self._ephemeralSubviews, "addObject:", self._ephemeralSubviewsForNames[aViewName]);
            if (self._ephemeralSubviewsForNames[aViewName])
                objj_msgSend(self, "addSubview:positioned:relativeTo:", self._ephemeralSubviewsForNames[aViewName], anOrderingMode, self._ephemeralSubviewsForNames[relativeToViewName]);
        }
        if (self._ephemeralSubviewsForNames[aViewName])
            objj_msgSend(self._ephemeralSubviewsForNames[aViewName], "setFrame:", frame);
    }
    else if (self._ephemeralSubviewsForNames[aViewName])
    {
        objj_msgSend(self._ephemeralSubviewsForNames[aViewName], "removeFromSuperview");
        objj_msgSend(self._ephemeralSubviews, "removeObject:", self._ephemeralSubviewsForNames[aViewName]);
        delete self._ephemeralSubviewsForNames[aViewName];
    }
    return self._ephemeralSubviewsForNames[aViewName];
}
,["CPView","CPString","CPWindowOrderingMode","CPString"]), new objj_method(sel_getUid("ephemeralSubviewNamed:"), function $CPView__ephemeralSubviewNamed_(self, _cmd, aViewName)
{
    if (!self._ephemeralSubviewsForNames)
        return nil;
    return self._ephemeralSubviewsForNames[aViewName] || nil;
}
,["CPView","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPView__defaultThemeClass(self, _cmd)
{
    return nil;
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPView__themeAttributes(self, _cmd)
{
    return nil;
}
,["CPDictionary"]), new objj_method(sel_getUid("_themeAttributes"), function $CPView___themeAttributes(self, _cmd)
{
    if (!CachedThemeAttributes)
        CachedThemeAttributes = {};
    var theClass = objj_msgSend(self, "class"),
        CPViewClass = objj_msgSend(CPView, "class"),
        attributes = [],
        nullValue = objj_msgSend(CPNull, "null");
    for (; theClass && theClass !== CPViewClass; theClass = objj_msgSend(theClass, "superclass"))
    {
        var cachedAttributes = CachedThemeAttributes[class_getName(theClass)];
        if (cachedAttributes)
        {
            attributes = attributes.length ? attributes.concat(cachedAttributes) : attributes;
            CachedThemeAttributes[objj_msgSend(self, "className")] = attributes;
            break;
        }
        var attributeDictionary = objj_msgSend(theClass, "themeAttributes");
        if (!attributeDictionary)
            continue;
        var attributeKeys = objj_msgSend(attributeDictionary, "allKeys"),
            attributeCount = attributeKeys.length;
        while (attributeCount--)
        {
            var attributeName = attributeKeys[attributeCount],
                attributeValue = objj_msgSend(attributeDictionary, "objectForKey:", attributeName);
            attributes.push(attributeValue === nullValue ? nil : attributeValue);
            attributes.push(attributeName);
        }
    }
    return attributes;
}
,["CPArray"])]);
}var CPViewAutoresizingMaskKey = "CPViewAutoresizingMask",
    CPViewAutoresizesSubviewsKey = "CPViewAutoresizesSubviews",
    CPViewBackgroundColorKey = "CPViewBackgroundColor",
    CPViewBoundsKey = "CPViewBoundsKey",
    CPViewFrameKey = "CPViewFrameKey",
    CPViewHitTestsKey = "CPViewHitTestsKey",
    CPViewToolTipKey = "CPViewToolTipKey",
    CPViewIsHiddenKey = "CPViewIsHiddenKey",
    CPViewOpacityKey = "CPViewOpacityKey",
    CPViewSubviewsKey = "CPViewSubviewsKey",
    CPViewSuperviewKey = "CPViewSuperviewKey",
    CPViewTagKey = "CPViewTagKey",
    CPViewThemeClassKey = "CPViewThemeClassKey",
    CPViewThemeStateKey = "CPViewThemeStateKey",
    CPViewWindowKey = "CPViewWindowKey",
    CPViewNextKeyViewKey = "CPViewNextKeyViewKey",
    CPViewPreviousKeyViewKey = "CPViewPreviousKeyViewKey",
    CPReuseIdentifierKey = "CPReuseIdentifierKey";
{
var the_class = objj_getClass("CPView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPView__initWithCoder_(self, _cmd, aCoder)
{
    self._DOMElement = DOMElementPrototype.cloneNode(false);
    AppKitTagDOMElement(self, self._DOMElement);
    self._frame = objj_msgSend(aCoder, "decodeRectForKey:", CPViewFrameKey);
    self._bounds = objj_msgSend(aCoder, "decodeRectForKey:", CPViewBoundsKey);
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._tag = objj_msgSend(aCoder, "containsValueForKey:", CPViewTagKey) ? objj_msgSend(aCoder, "decodeIntForKey:", CPViewTagKey) : -1;
        self._identifier = objj_msgSend(aCoder, "decodeObjectForKey:", CPReuseIdentifierKey);
        self._window = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewWindowKey);
        self._superview = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewSuperviewKey);
        self._subviews = [];
        var subviews = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewSubviewsKey) || [];
        for (var i = 0, count = objj_msgSend(subviews, "count"); i < count; ++i)
        {
            subviews[i]._superview = nil;
            objj_msgSend(self, "addSubview:", subviews[i]);
        }
        self._registeredDraggedTypes = objj_msgSend(CPSet, "set");
        self._registeredDraggedTypesArray = [];
        if (self._autoresizingMask === nil)
            self._autoresizingMask = objj_msgSend(aCoder, "decodeIntForKey:", CPViewAutoresizingMaskKey) || CPViewNotSizable;
        self._autoresizesSubviews = !objj_msgSend(aCoder, "containsValueForKey:", CPViewAutoresizesSubviewsKey) || objj_msgSend(aCoder, "decodeBoolForKey:", CPViewAutoresizesSubviewsKey);
        self._hitTests = !objj_msgSend(aCoder, "containsValueForKey:", CPViewHitTestsKey) || objj_msgSend(aCoder, "decodeBoolForKey:", CPViewHitTestsKey);
        objj_msgSend(self, "_setupToolTipHandlers");
        self._toolTip = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewToolTipKey);
        if (self._toolTip)
            objj_msgSend(self, "_installToolTipEventHandlers");
        self._DOMImageParts = [];
        self._DOMImageSizes = [];
        if (NULL)
            var ____p = CGPointApplyAffineTransform(CGPointMake(CGRectGetMinX(self._frame), CGRectGetMinY(self._frame)), NULL);
        else
            var ____p = CGPointMake(CGRectGetMinX(self._frame), CGRectGetMinY(self._frame));
        self._DOMElement.style.left = ROUND(____p.x) + "px";
        self._DOMElement.style.top = ROUND(____p.y) + "px";
        self._DOMElement.style.width = MAX(0.0, ROUND(CGRectGetWidth(self._frame))) + "px";
        self._DOMElement.style.height = MAX(0.0, ROUND(CGRectGetHeight(self._frame))) + "px";
        var index = 0,
            count = self._subviews.length;
        for (; index < count; ++index)
        {
            self._DOMElement.appendChild(self._subviews[index]._DOMElement);
        }
        objj_msgSend(self, "setHidden:", objj_msgSend(aCoder, "decodeBoolForKey:", CPViewIsHiddenKey));
        if (objj_msgSend(aCoder, "containsValueForKey:", CPViewOpacityKey))
            objj_msgSend(self, "setAlphaValue:", objj_msgSend(aCoder, "decodeIntForKey:", CPViewOpacityKey));
        else
            self._opacity = 1.0;
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(aCoder, "decodeObjectForKey:", CPViewBackgroundColorKey));
        objj_msgSend(self, "_setupViewFlags");
        self._theme = objj_msgSend(CPTheme, "defaultTheme");
        self._themeClass = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewThemeClassKey);
        self._themeState = CPThemeState(objj_msgSend(aCoder, "decodeIntForKey:", CPViewThemeStateKey));
        self._themeAttributes = {};
        var theClass = objj_msgSend(self, "class"),
            themeClass = objj_msgSend(self, "themeClass"),
            attributes = objj_msgSend(theClass, "_themeAttributes"),
            count = attributes.length;
        while (count--)
        {
            var attributeName = attributes[count--];
            self._themeAttributes[attributeName] = CPThemeAttributeDecode(aCoder, attributeName, attributes[count], self._theme, themeClass);
        }
        objj_msgSend(self, "setNeedsDisplay:", YES);
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPView").super_class }, "encodeWithCoder:", aCoder);
    if (self._tag !== -1)
        objj_msgSend(aCoder, "encodeInt:forKey:", self._tag, CPViewTagKey);
    objj_msgSend(aCoder, "encodeRect:forKey:", self._frame, CPViewFrameKey);
    objj_msgSend(aCoder, "encodeRect:forKey:", self._bounds, CPViewBoundsKey);
    if (self._window !== nil)
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._window, CPViewWindowKey);
    var count = objj_msgSend(self._subviews, "count"),
        encodedSubviews = self._subviews;
    if (count > 0 && objj_msgSend(self._ephemeralSubviews, "count") > 0)
    {
        encodedSubviews = objj_msgSend(encodedSubviews, "copy");
        while (count--)
            if (objj_msgSend(self._ephemeralSubviews, "containsObject:", encodedSubviews[count]))
                encodedSubviews.splice(count, 1);
    }
    if (encodedSubviews.length > 0)
        objj_msgSend(aCoder, "encodeObject:forKey:", encodedSubviews, CPViewSubviewsKey);
    if (self._superview !== nil)
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", self._superview, CPViewSuperviewKey);
    if (self._autoresizingMask !== CPViewNotSizable)
        objj_msgSend(aCoder, "encodeInt:forKey:", self._autoresizingMask, CPViewAutoresizingMaskKey);
    if (!self._autoresizesSubviews)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._autoresizesSubviews, CPViewAutoresizesSubviewsKey);
    if (self._backgroundColor !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._backgroundColor, CPViewBackgroundColorKey);
    if (self._hitTests !== YES)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._hitTests, CPViewHitTestsKey);
    if (self._opacity !== 1.0)
        objj_msgSend(aCoder, "encodeFloat:forKey:", self._opacity, CPViewOpacityKey);
    if (self._isHidden)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._isHidden, CPViewIsHiddenKey);
    if (self._toolTip)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._toolTip, CPViewToolTipKey);
    var nextKeyView = objj_msgSend(self, "nextKeyView");
    if (nextKeyView !== nil && !objj_msgSend(nextKeyView, "isEqual:", self))
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", nextKeyView, CPViewNextKeyViewKey);
    var previousKeyView = objj_msgSend(self, "previousKeyView");
    if (previousKeyView !== nil && !objj_msgSend(previousKeyView, "isEqual:", self))
        objj_msgSend(aCoder, "encodeConditionalObject:forKey:", previousKeyView, CPViewPreviousKeyViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self, "themeClass"), CPViewThemeClassKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", CPThemeStateName(self._themeState), CPViewThemeStateKey);
    for (var attributeName in self._themeAttributes)
        if (self._themeAttributes.hasOwnProperty(attributeName))
            CPThemeAttributeEncode(aCoder, self._themeAttributes[attributeName]);
    if (self._identifier)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._identifier, CPReuseIdentifierKey);
}
,["void","CPCoder"])]);
}var _CPViewFullScreenModeStateMake = function(aView)
{
    var superview = aView._superview;
    return {autoresizingMask: aView._autoresizingMask, frame: CGRectMakeCopy(aView._frame), index: superview ? objj_msgSend(superview._subviews, "indexOfObjectIdenticalTo:", aView) : 0, superview: superview};
};
var _CPViewGetTransform = function(fromView, toView)
{
    var transform = CGAffineTransformMakeIdentity(),
        sameWindow = YES,
        fromWindow = nil,
        toWindow = nil;
    if (fromView)
    {
        var view = fromView;
        while (view && view != toView)
        {
            var frame = view._frame;
            transform.tx += CGRectGetMinX(frame);
            transform.ty += CGRectGetMinY(frame);
            if (view._boundsTransform)
            {
                CGAffineTransformConcatTo(transform, view._boundsTransform, transform);
            }
            view = view._superview;
        }
        if (view === toView)
            return transform;
        else if (fromView && toView)
        {
            fromWindow = objj_msgSend(fromView, "window");
            toWindow = objj_msgSend(toView, "window");
            if (fromWindow && toWindow && fromWindow !== toWindow)
            {
                sameWindow = NO;
                var frame = objj_msgSend(fromWindow, "frame");
                transform.tx += CGRectGetMinX(frame);
                transform.ty += CGRectGetMinY(frame);
            }
        }
    }
    var view = toView;
    while (view)
    {
        var frame = view._frame;
        transform.tx -= CGRectGetMinX(frame);
        transform.ty -= CGRectGetMinY(frame);
        if (view._boundsTransform)
        {
            CGAffineTransformConcatTo(transform, view._inverseBoundsTransform, transform);
        }
        view = view._superview;
    }
    if (!sameWindow)
    {
        var frame = objj_msgSend(toWindow, "frame");
        transform.tx -= CGRectGetMinX(frame);
        transform.ty -= CGRectGetMinY(frame);
    }
    return transform;
};
p;17;CPViewAnimation.jt;7673;@STATIC;1.0;i;13;CPAnimation.jt;7636;objj_executeFile("CPAnimation.j", YES);CPViewAnimationTargetKey = "CPViewAnimationTargetKey";
CPViewAnimationStartFrameKey = "CPViewAnimationStartFrameKey";
CPViewAnimationEndFrameKey = "CPViewAnimationEndFrameKey";
CPViewAnimationEffectKey = "CPViewAnimationEffectKey";
CPViewAnimationFadeInEffect = "CPViewAnimationFadeInEffect";
CPViewAnimationFadeOutEffect = "CPViewAnimationFadeOutEffect";
{var the_class = objj_allocateClassPair(CPAnimation, "CPViewAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_viewAnimations")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithViewAnimations:"), function $CPViewAnimation__initWithViewAnimations_(self, _cmd, viewAnimations)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewAnimation").super_class }, "initWithDuration:animationCurve:", 0.5, CPAnimationLinear))
    {
        objj_msgSend(self, "setViewAnimations:", viewAnimations);
    }
    return self;
}
,["id","CPArray"]), new objj_method(sel_getUid("startAnimation"), function $CPViewAnimation__startAnimation(self, _cmd)
{
    var animationIndex = objj_msgSend(self._viewAnimations, "count");
    while (animationIndex--)
    {
        var dictionary = objj_msgSend(self._viewAnimations, "objectAtIndex:", animationIndex),
            view = objj_msgSend(self, "_targetView:", dictionary),
            startFrame = objj_msgSend(self, "_startFrame:", dictionary);
        objj_msgSend(view, "setFrame:", startFrame);
        var effect = objj_msgSend(self, "_effect:", dictionary);
        if (effect === CPViewAnimationFadeInEffect)
        {
            objj_msgSend(view, "setAlphaValue:", 0.0);
            objj_msgSend(self, "_targetView:setHidden:", view, NO);
        }
        else if (effect === CPViewAnimationFadeOutEffect)
            objj_msgSend(view, "setAlphaValue:", 1.0);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewAnimation").super_class }, "startAnimation");
}
,["void"]), new objj_method(sel_getUid("setCurrentProgress:"), function $CPViewAnimation__setCurrentProgress_(self, _cmd, progress)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewAnimation").super_class }, "setCurrentProgress:", progress);
    var animationIndex = objj_msgSend(self._viewAnimations, "count");
    while (animationIndex--)
    {
        var dictionary = objj_msgSend(self._viewAnimations, "objectAtIndex:", animationIndex),
            view = objj_msgSend(self, "_targetView:", dictionary),
            startFrame = objj_msgSend(self, "_startFrame:", dictionary),
            endFrame = objj_msgSend(self, "_endFrame:", dictionary),
            differenceFrame = CGRectMakeZero(),
            value = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewAnimation").super_class }, "currentValue");
        differenceFrame.origin.x = endFrame.origin.x - startFrame.origin.x;
        differenceFrame.origin.y = endFrame.origin.y - startFrame.origin.y;
        differenceFrame.size.width = endFrame.size.width - startFrame.size.width;
        differenceFrame.size.height = endFrame.size.height - startFrame.size.height;
        var intermediateFrame = CGRectMakeZero();
        intermediateFrame.origin.x = startFrame.origin.x + differenceFrame.origin.x * value;
        intermediateFrame.origin.y = startFrame.origin.y + differenceFrame.origin.y * value;
        intermediateFrame.size.width = startFrame.size.width + differenceFrame.size.width * value;
        intermediateFrame.size.height = startFrame.size.height + differenceFrame.size.height * value;
        objj_msgSend(view, "setFrame:", intermediateFrame);
        var effect = objj_msgSend(self, "_effect:", dictionary);
        if (effect === CPViewAnimationFadeInEffect)
            objj_msgSend(view, "setAlphaValue:", 1.0 * value);
        else if (effect === CPViewAnimationFadeOutEffect)
            objj_msgSend(view, "setAlphaValue:", 1.0 + (0.0 - 1.0) * value);
        if (progress === 1.0)
            objj_msgSend(self, "_targetView:setHidden:", view, CGRectIsEmpty(endFrame) || objj_msgSend(view, "alphaValue") === 0.0);
    }
}
,["void","CPAnimationProgress"]), new objj_method(sel_getUid("stopAnimation"), function $CPViewAnimation__stopAnimation(self, _cmd)
{
    var animationIndex = objj_msgSend(self._viewAnimations, "count");
    while (animationIndex--)
    {
        var dictionary = objj_msgSend(self._viewAnimations, "objectAtIndex:", animationIndex),
            view = objj_msgSend(self, "_targetView:", dictionary),
            endFrame = objj_msgSend(self, "_endFrame:", dictionary);
        objj_msgSend(view, "setFrame:", endFrame);
        var effect = objj_msgSend(self, "_effect:", dictionary);
        if (effect === CPViewAnimationFadeInEffect)
            objj_msgSend(view, "setAlphaValue:", 1.0);
        else if (effect === CPViewAnimationFadeOutEffect)
            objj_msgSend(view, "setAlphaValue:", 0.0);
        objj_msgSend(self, "_targetView:setHidden:", view, CGRectIsEmpty(endFrame) || objj_msgSend(view, "alphaValue") === 0.0);
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewAnimation").super_class }, "stopAnimation");
}
,["void"]), new objj_method(sel_getUid("_targetView:setHidden:"), function $CPViewAnimation___targetView_setHidden_(self, _cmd, theView, isHidden)
{
    if (objj_msgSend(theView, "isKindOfClass:", objj_msgSend(CPWindow, "class")))
    {
        if (isHidden)
            objj_msgSend(theView, "orderOut:", self);
        else
            objj_msgSend(theView, "orderFront:", self);
    }
    else
        objj_msgSend(theView, "setHidden:", isHidden);
}
,["void","id","BOOL"]), new objj_method(sel_getUid("_targetView:"), function $CPViewAnimation___targetView_(self, _cmd, dictionary)
{
    var targetView = objj_msgSend(dictionary, "valueForKey:", CPViewAnimationTargetKey);
    if (!targetView)
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, objj_msgSend(CPString, "stringWithFormat:", "view animation: %@ does not have a target view", objj_msgSend(dictionary, "description")));
    return targetView;
}
,["id","CPDictionary"]), new objj_method(sel_getUid("_startFrame:"), function $CPViewAnimation___startFrame_(self, _cmd, dictionary)
{
    var startFrame = objj_msgSend(dictionary, "valueForKey:", CPViewAnimationStartFrameKey);
    if (!startFrame)
        return objj_msgSend(objj_msgSend(self, "_targetView:", dictionary), "frame");
    return startFrame;
}
,["CGRect","CPDictionary"]), new objj_method(sel_getUid("_endFrame:"), function $CPViewAnimation___endFrame_(self, _cmd, dictionary)
{
    var endFrame = objj_msgSend(dictionary, "valueForKey:", CPViewAnimationEndFrameKey);
    if (!endFrame)
        return objj_msgSend(objj_msgSend(self, "_targetView:", dictionary), "frame");
    return endFrame;
}
,["CGRect","CPDictionary"]), new objj_method(sel_getUid("_effect:"), function $CPViewAnimation___effect_(self, _cmd, dictionary)
{
    return objj_msgSend(dictionary, "valueForKey:", CPViewAnimationEffectKey);
}
,["CPString","CPDictionary"]), new objj_method(sel_getUid("viewAnimations"), function $CPViewAnimation__viewAnimations(self, _cmd)
{
    return self._viewAnimations;
}
,["CPArray"]), new objj_method(sel_getUid("setViewAnimations:"), function $CPViewAnimation__setViewAnimations_(self, _cmd, viewAnimations)
{
    if (viewAnimations != self._viewAnimations)
    {
        objj_msgSend(self, "stopAnimation");
        self._viewAnimations = objj_msgSend(viewAnimations, "copy");
    }
}
,["void","CPArray"])]);
}p;18;CPViewController.jt;9576;@STATIC;1.0;I;20;Foundation/CPArray.ji;7;CPCib.ji;13;CPResponder.jt;9503;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("CPCib.j", YES);objj_executeFile("CPResponder.j", YES);var CPViewControllerCachedCibs;
{var the_class = objj_allocateClassPair(CPResponder, "CPViewController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_view"), new objj_ivar("_isLoading"), new objj_ivar("_isLazy"), new objj_ivar("_isViewLoaded"), new objj_ivar("_representedObject"), new objj_ivar("_title"), new objj_ivar("_cibName"), new objj_ivar("_cibBundle"), new objj_ivar("_cibExternalNameTable")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("view"), function $CPViewController__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("setView:"), function $CPViewController__setView_(self, _cmd, newValue)
{
    self._view = newValue;
}
,["void","CPView"]), new objj_method(sel_getUid("isViewLoaded"), function $CPViewController__isViewLoaded(self, _cmd)
{
    return self._isViewLoaded;
}
,["BOOL"]), new objj_method(sel_getUid("_setIsViewLoaded:"), function $CPViewController___setIsViewLoaded_(self, _cmd, newValue)
{
    self._isViewLoaded = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("representedObject"), function $CPViewController__representedObject(self, _cmd)
{
    return self._representedObject;
}
,["id"]), new objj_method(sel_getUid("setRepresentedObject:"), function $CPViewController__setRepresentedObject_(self, _cmd, newValue)
{
    self._representedObject = newValue;
}
,["void","id"]), new objj_method(sel_getUid("title"), function $CPViewController__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setTitle:"), function $CPViewController__setTitle_(self, _cmd, newValue)
{
    self._title = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("cibName"), function $CPViewController__cibName(self, _cmd)
{
    return self._cibName;
}
,["CPString"]), new objj_method(sel_getUid("cibBundle"), function $CPViewController__cibBundle(self, _cmd)
{
    return self._cibBundle;
}
,["CPBundle"]), new objj_method(sel_getUid("cibExternalNameTable"), function $CPViewController__cibExternalNameTable(self, _cmd)
{
    return self._cibExternalNameTable;
}
,["CPDictionary"]), new objj_method(sel_getUid("init"), function $CPViewController__init(self, _cmd)
{
    return objj_msgSend(self, "initWithCibName:bundle:", nil, nil);
}
,["id"]), new objj_method(sel_getUid("initWithCibName:bundle:"), function $CPViewController__initWithCibName_bundle_(self, _cmd, aCibNameOrNil, aCibBundleOrNil)
{
    return objj_msgSend(self, "initWithCibName:bundle:externalNameTable:", aCibNameOrNil, aCibBundleOrNil, nil);
}
,["id","CPString","CPBundle"]), new objj_method(sel_getUid("initWithCibName:bundle:owner:"), function $CPViewController__initWithCibName_bundle_owner_(self, _cmd, aCibNameOrNil, aCibBundleOrNil, anOwner)
{
    return objj_msgSend(self, "initWithCibName:bundle:externalNameTable:", aCibNameOrNil, aCibBundleOrNil, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", anOwner, CPCibOwner));
}
,["id","CPString","CPBundle","id"]), new objj_method(sel_getUid("initWithCibName:bundle:externalNameTable:"), function $CPViewController__initWithCibName_bundle_externalNameTable_(self, _cmd, aCibNameOrNil, aCibBundleOrNil, anExternalNameTable)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewController").super_class }, "init");
    if (self)
    {
        self._cibName = aCibNameOrNil;
        self._cibBundle = aCibBundleOrNil || objj_msgSend(CPBundle, "mainBundle");
        self._cibExternalNameTable = anExternalNameTable || objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self, CPCibOwner);
        self._isLoading = NO;
        self._isLazy = NO;
    }
    return self;
}
,["id","CPString","CPBundle","CPDictionary"]), new objj_method(sel_getUid("loadView"), function $CPViewController__loadView(self, _cmd)
{
    if (self._view)
        return;
    if (self._cibName)
    {
        var cib = objj_msgSend(CPViewControllerCachedCibs, "objectForKey:", self._cibName);
        if (!cib)
        {
            cib = objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithCibNamed:bundle:", self._cibName, self._cibBundle);
            objj_msgSend(CPViewControllerCachedCibs, "setObject:forKey:", cib, self._cibName);
        }
        objj_msgSend(cib, "instantiateCibWithExternalNameTable:", self._cibExternalNameTable);
    }
    else
        self._view = objj_msgSend(CPView, "new");
}
,["void"]), new objj_method(sel_getUid("view"), function $CPViewController__view(self, _cmd)
{
    if (!self._view)
    {
        self._isLoading = YES;
        var cibOwner = objj_msgSend(self._cibExternalNameTable, "objectForKey:", CPCibOwner);
        if (objj_msgSend(cibOwner, "respondsToSelector:", sel_getUid("viewControllerWillLoadCib:")))
            objj_msgSend(cibOwner, "viewControllerWillLoadCib:", self);
        objj_msgSend(self, "loadView");
        if (self._view === nil && objj_msgSend(cibOwner, "isKindOfClass:", objj_msgSend(CPDocument, "class")))
            objj_msgSend(self, "setView:", objj_msgSend(cibOwner, "valueForKey:", "view"));
        if (!self._view)
        {
            var reason = objj_msgSend(CPString, "stringWithFormat:", "View for %@ could not be loaded from Cib or no view specified. Override loadView to load the view manually.", self);
            objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, reason);
        }
        if (objj_msgSend(cibOwner, "respondsToSelector:", sel_getUid("viewControllerDidLoadCib:")))
            objj_msgSend(cibOwner, "viewControllerDidLoadCib:", self);
        self._isLoading = NO;
        objj_msgSend(self, "_viewDidLoad");
    }
    else if (self._isLazy)
    {
        self._isLazy = NO;
        objj_msgSend(self, "_viewDidLoad");
    }
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("_viewDidLoad"), function $CPViewController___viewDidLoad(self, _cmd)
{
    objj_msgSend(self, "willChangeValueForKey:", "isViewLoaded");
    objj_msgSend(self, "viewDidLoad");
    self._isViewLoaded = YES;
    objj_msgSend(self, "didChangeValueForKey:", "isViewLoaded");
}
,["void"]), new objj_method(sel_getUid("viewDidLoad"), function $CPViewController__viewDidLoad(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("setView:"), function $CPViewController__setView_(self, _cmd, aView)
{
    var willChangeIsViewLoaded = self._isViewLoaded == NO && aView != nil || self._isViewLoaded == YES && aView == nil;
    if (willChangeIsViewLoaded)
        objj_msgSend(self, "willChangeValueForKey:", "isViewLoaded");
    self._view = aView;
    self._isViewLoaded = aView !== nil;
    if (willChangeIsViewLoaded)
        objj_msgSend(self, "didChangeValueForKey:", "isViewLoaded");
}
,["void","CPView"]), new objj_method(sel_getUid("automaticallyNotifiesObserversOfIsViewLoaded"), function $CPViewController__automaticallyNotifiesObserversOfIsViewLoaded(self, _cmd)
{
    return NO;
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPViewController__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPViewController, "class"))
        return;
    CPViewControllerCachedCibs = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
}
,["void"])]);
}var CPViewControllerViewKey = "CPViewControllerViewKey",
    CPViewControllerTitleKey = "CPViewControllerTitleKey",
    CPViewControllerCibNameKey = "CPViewControllerCibNameKey",
    CPViewControllerBundleKey = "CPViewControllerBundleKey";
{
var the_class = objj_getClass("CPViewController")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPViewController\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPViewController__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewController").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._view = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewControllerViewKey);
        self._title = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewControllerTitleKey);
        self._cibName = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewControllerCibNameKey);
        var bundlePath = objj_msgSend(aCoder, "decodeObjectForKey:", CPViewControllerBundleKey);
        self._cibBundle = bundlePath ? objj_msgSend(CPBundle, "bundleWithPath:", bundlePath) : objj_msgSend(CPBundle, "mainBundle");
        self._cibExternalNameTable = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self, CPCibOwner);
        self._isLazy = YES;
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPViewController__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPViewController").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._view, CPViewControllerViewKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._title, CPViewControllerTitleKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._cibName, CPViewControllerCibNameKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self._cibBundle, "bundlePath"), CPViewControllerBundleKey);
}
,["void","CPCoder"])]);
}p;11;CPWebView.jt;25607;@STATIC;1.0;i;8;CPView.ji;14;CPScrollView.jt;25556;objj_executeFile("CPView.j", YES);objj_executeFile("CPScrollView.j", YES);CPWebViewProgressStartedNotification = "CPWebViewProgressStartedNotification";
CPWebViewProgressFinishedNotification = "CPWebViewProgressFinishedNotification";
CPWebViewScrollAuto = 0;
CPWebViewScrollAppKit = 1;
CPWebViewScrollNative = 2;
CPWebViewScrollNone = 3;
CPWebViewAppKitScrollPollInterval = 1.0;
CPWebViewAppKitScrollMaxPollCount = 3;
{var the_class = objj_allocateClassPair(CPView, "CPWebView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_scrollView"), new objj_ivar("_frameView"), new objj_ivar("_iframe"), new objj_ivar("_mainFrameURL"), new objj_ivar("_backwardStack"), new objj_ivar("_forwardStack"), new objj_ivar("_ignoreLoadStart"), new objj_ivar("_ignoreLoadEnd"), new objj_ivar("_isLoading"), new objj_ivar("_downloadDelegate"), new objj_ivar("_frameLoadDelegate"), new objj_ivar("_policyDelegate"), new objj_ivar("_resourceLoadDelegate"), new objj_ivar("_UIDelegate"), new objj_ivar("_wso"), new objj_ivar("_url"), new objj_ivar("_html"), new objj_ivar("_loadCallback"), new objj_ivar("_scrollMode"), new objj_ivar("_effectiveScrollMode"), new objj_ivar("_contentIsAccessible"), new objj_ivar("_contentSizeCheckTimer"), new objj_ivar("_contentSizePollCount"), new objj_ivar("_loadHTMLStringTimer"), new objj_ivar("_drawsBackground")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:frameName:groupName:"), function $CPWebView__initWithFrame_frameName_groupName_(self, _cmd, frameRect, frameName, groupName)
{
    if (self = objj_msgSend(self, "initWithFrame:", frameRect))
    {
        self._iframe.name = frameName;
    }
    return self;
}
,["id","CGRect","CPString","CPString"]), new objj_method(sel_getUid("initWithFrame:"), function $CPWebView__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebView").super_class }, "initWithFrame:", aFrame))
    {
        self._mainFrameURL = nil;
        self._backwardStack = [];
        self._forwardStack = [];
        self._scrollMode = CPWebViewScrollAuto;
        self._contentIsAccessible = YES;
        self._isLoading = NO;
        self._drawsBackground = YES;
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
        objj_msgSend(self, "_initDOMWithFrame:", aFrame);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_initDOMWithFrame:"), function $CPWebView___initDOMWithFrame_(self, _cmd, aFrame)
{
    self._ignoreLoadStart = YES;
    self._ignoreLoadEnd = YES;
    self._iframe = document.createElement("iframe");
    self._iframe.name = "iframe_" + FLOOR(RAND() * 10000);
    self._iframe.style.width = "100%";
    self._iframe.style.height = "100%";
    self._iframe.style.borderWidth = "0px";
    self._iframe.frameBorder = "0";
    objj_msgSend(self, "_applyBackgroundColor");
    self._loadCallback = function()
    {
        if (!self._ignoreLoadStart)
        {
            objj_msgSend(self, "_startedLoading");
            if (self._mainFrameURL)
                objj_msgSend(self._backwardStack, "addObject:", self._mainFrameURL);
            self._mainFrameURL = self._iframe.src;
            objj_msgSend(self._forwardStack, "removeAllObjects");
        }
        else
            self._ignoreLoadStart = NO;
        if (!self._ignoreLoadEnd)
        {
            objj_msgSend(self, "_finishedLoading");
        }
        else
            self._ignoreLoadEnd = NO;
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    };
    if (self._iframe.addEventListener)
        self._iframe.addEventListener("load", self._loadCallback, false);
    else if (self._iframe.attachEvent)
        self._iframe.attachEvent("onload", self._loadCallback);
    self._frameView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
    objj_msgSend(self._frameView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    self._scrollView = objj_msgSend(objj_msgSend(CPScrollView, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
    objj_msgSend(self._scrollView, "setAutohidesScrollers:", YES);
    objj_msgSend(self._scrollView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    objj_msgSend(self._scrollView, "setDocumentView:", self._frameView);
    self._frameView._DOMElement.appendChild(self._iframe);
    objj_msgSend(self, "_updateEffectiveScrollMode");
    objj_msgSend(self, "addSubview:", self._scrollView);
}
,["id","CGRect"]), new objj_method(sel_getUid("setFrameSize:"), function $CPWebView__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebView").super_class }, "setFrameSize:", aSize);
    objj_msgSend(self, "_resizeWebFrame");
}
,["void","CGSize"]), new objj_method(sel_getUid("viewDidUnhide"), function $CPWebView__viewDidUnhide(self, _cmd)
{
    objj_msgSend(self._frameView, "setFrameSize:", objj_msgSend(self._scrollView, "contentSize"));
    objj_msgSend(self, "_resizeWebFrame");
    objj_msgSend(self, "_scheduleContentSizeCheck");
}
,["void"]), new objj_method(sel_getUid("_attachScrollEventIfNecessary"), function $CPWebView___attachScrollEventIfNecessary(self, _cmd)
{
    if (self._effectiveScrollMode !== CPWebViewScrollAppKit)
        return;
    var win = objj_msgSend(self, "DOMWindow");
    if (win && win.addEventListener)
    {
        var scrollEventHandler = function(anEvent)
        {
            var frameBounds = objj_msgSend(self, "bounds"),
                frameCenter = CGPointMake(CGRectGetMidX(frameBounds), CGRectGetMidY(frameBounds)),
                windowOrigin = objj_msgSend(self, "convertPoint:toView:", frameCenter, nil),
                globalOrigin = objj_msgSend(objj_msgSend(self, "window"), "convertBaseToBridge:", windowOrigin);
            anEvent._overrideLocation = globalOrigin;
            objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "platformWindow"), "scrollEvent:", anEvent);
        };
        win.addEventListener("DOMMouseScroll", scrollEventHandler, false);
        win.addEventListener("wheel", scrollEventHandler, false);
    }
}
,["void"]), new objj_method(sel_getUid("_resizeWebFrame"), function $CPWebView___resizeWebFrame(self, _cmd)
{
    if (!objj_msgSend(self, "_isVisible"))
    {
        return;
    }
    if (self._effectiveScrollMode === CPWebViewScrollAppKit)
    {
        var visibleRect = objj_msgSend(self._frameView, "visibleRect");
        objj_msgSend(self._frameView, "setFrameSize:", CGSizeMake(CGRectGetMaxX(visibleRect), CGRectGetMaxY(visibleRect)));
        var win = objj_msgSend(self, "DOMWindow");
        if (win && win.document && win.document.body)
        {
            var width = win.document.body.scrollWidth,
                height = win.document.body.scrollHeight;
            self._iframe.setAttribute("width", width);
            self._iframe.setAttribute("height", height);
            objj_msgSend(self._frameView, "setFrameSize:", CGSizeMake(width, height));
        }
        else
        {
            if (!win || !win.document)
            {
                CPLog.warn("using default size 800*1600");
                objj_msgSend(self._frameView, "setFrameSize:", CGSizeMake(800, 1600));
            }
        }
        objj_msgSend(self._frameView, "scrollRectToVisible:", visibleRect);
    }
}
,["void"]), new objj_method(sel_getUid("setScrollMode:"), function $CPWebView__setScrollMode_(self, _cmd, aScrollMode)
{
    if (self._scrollMode == aScrollMode)
        return;
    self._scrollMode = aScrollMode;
    objj_msgSend(self, "_updateEffectiveScrollMode");
}
,["void","int"]), new objj_method(sel_getUid("effectiveScrollMode"), function $CPWebView__effectiveScrollMode(self, _cmd)
{
    return self._effectiveScrollMode;
}
,["int"]), new objj_method(sel_getUid("_updateEffectiveScrollMode"), function $CPWebView___updateEffectiveScrollMode(self, _cmd)
{
    var _newScrollMode = CPWebViewScrollAppKit;
    if (self._scrollMode == CPWebViewScrollNative || self._scrollMode == CPWebViewScrollAuto && !self._contentIsAccessible || CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
    {
        _newScrollMode = CPWebViewScrollNative;
    }
    else if (self._scrollMode == CPWebViewScrollAppKit && !self._contentIsAccessible)
    {
        CPLog.warn(self + " unable to use CPWebViewScrollAppKit scroll mode due to same origin policy.");
        _newScrollMode = CPWebViewScrollNative;
    }
    if (_newScrollMode !== self._effectiveScrollMode)
        objj_msgSend(self, "_setEffectiveScrollMode:", _newScrollMode);
}
,["void"]), new objj_method(sel_getUid("_setEffectiveScrollMode:"), function $CPWebView___setEffectiveScrollMode_(self, _cmd, aScrollMode)
{
    self._effectiveScrollMode = aScrollMode;
    self._ignoreLoadStart = YES;
    self._ignoreLoadEnd = YES;
    var parent = self._iframe.parentNode;
    parent.removeChild(self._iframe);
    if (self._effectiveScrollMode === CPWebViewScrollAppKit)
    {
        objj_msgSend(self._scrollView, "setHasHorizontalScroller:", YES);
        objj_msgSend(self._scrollView, "setHasVerticalScroller:", YES);
        self._iframe.setAttribute("scrolling", "no");
    }
    else if (self._effectiveScrollMode === CPWebViewScrollNone)
    {
        objj_msgSend(self._scrollView, "setHasHorizontalScroller:", NO);
        objj_msgSend(self._scrollView, "setHasVerticalScroller:", NO);
        self._iframe.setAttribute("scrolling", "no");
    }
    else
    {
        objj_msgSend(self._scrollView, "setHasHorizontalScroller:", NO);
        objj_msgSend(self._scrollView, "setHasVerticalScroller:", NO);
        self._iframe.setAttribute("scrolling", "auto");
        objj_msgSend(self._frameView, "setFrameSize:", objj_msgSend(self._scrollView, "bounds").size);
    }
    parent.appendChild(self._iframe);
    objj_msgSend(self, "_applyBackgroundColor");
    objj_msgSend(self, "_resizeWebFrame");
}
,["void","int"]), new objj_method(sel_getUid("_maybePollWebFrameSize"), function $CPWebView___maybePollWebFrameSize(self, _cmd)
{
    if (CPWebViewAppKitScrollMaxPollCount == 0 || self._contentSizePollCount++ < CPWebViewAppKitScrollMaxPollCount)
        objj_msgSend(self, "_resizeWebFrame");
    else
        objj_msgSend(self._contentSizeCheckTimer, "invalidate");
}
,["void"]), new objj_method(sel_getUid("loadHTMLString:"), function $CPWebView__loadHTMLString_(self, _cmd, aString)
{
    objj_msgSend(self, "loadHTMLString:baseURL:", aString, nil);
}
,["void","CPString"]), new objj_method(sel_getUid("loadHTMLString:baseURL:"), function $CPWebView__loadHTMLString_baseURL_(self, _cmd, aString, URL)
{
    objj_msgSend(self._frameView, "setFrameSize:", objj_msgSend(self._scrollView, "contentSize"));
    objj_msgSend(self, "_startedLoading");
    self._ignoreLoadStart = YES;
    self._url = nil;
    self._html = aString;
    objj_msgSend(self, "_load");
}
,["void","CPString","CPURL"]), new objj_method(sel_getUid("_loadMainFrameURL"), function $CPWebView___loadMainFrameURL(self, _cmd)
{
    objj_msgSend(self, "_startedLoading");
    self._ignoreLoadStart = YES;
    self._url = self._mainFrameURL;
    self._html = nil;
    objj_msgSend(self, "_load");
}
,["void"]), new objj_method(sel_getUid("_load"), function $CPWebView___load(self, _cmd)
{
    if (self._url)
    {
        var cpurl = objj_msgSend(CPURL, "URLWithString:", self._url);
        self._contentIsAccessible = objj_msgSend(cpurl, "_passesSameOriginPolicy");
        objj_msgSend(self, "_updateEffectiveScrollMode");
        self._ignoreLoadEnd = NO;
        self._iframe.src = self._url;
    }
    else if (self._html !== nil)
    {
        self._iframe.src = "";
        self._contentIsAccessible = YES;
        objj_msgSend(self, "_updateEffectiveScrollMode");
        self._ignoreLoadEnd = NO;
        if (self._loadHTMLStringTimer !== nil)
        {
            window.clearTimeout(self._loadHTMLStringTimer);
            self._loadHTMLStringTimer = nil;
        }
        self._loadHTMLStringTimer = window.setTimeout(function()
        {
            var win = objj_msgSend(self, "DOMWindow");
            if (win)
                win.document.write(self._html || "<html><body></body></html>");
            window.setTimeout(self._loadCallback, 1);
        }, 0);
    }
}
,["void"]), new objj_method(sel_getUid("_startedLoading"), function $CPWebView___startedLoading(self, _cmd)
{
    self._isLoading = YES;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWebViewProgressStartedNotification, self);
    if (objj_msgSend(self._frameLoadDelegate, "respondsToSelector:", sel_getUid("webView:didStartProvisionalLoadForFrame:")))
        objj_msgSend(self._frameLoadDelegate, "webView:didStartProvisionalLoadForFrame:", self, nil);
}
,["void"]), new objj_method(sel_getUid("_finishedLoading"), function $CPWebView___finishedLoading(self, _cmd)
{
    self._isLoading = NO;
    objj_msgSend(self, "_resizeWebFrame");
    objj_msgSend(self, "_attachScrollEventIfNecessary");
    objj_msgSend(self, "_scheduleContentSizeCheck");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWebViewProgressFinishedNotification, self);
    if (objj_msgSend(self._frameLoadDelegate, "respondsToSelector:", sel_getUid("webView:didFinishLoadForFrame:")))
        objj_msgSend(self._frameLoadDelegate, "webView:didFinishLoadForFrame:", self, nil);
}
,["void"]), new objj_method(sel_getUid("_scheduleContentSizeCheck"), function $CPWebView___scheduleContentSizeCheck(self, _cmd)
{
    objj_msgSend(self._contentSizeCheckTimer, "invalidate");
    if (self._effectiveScrollMode == CPWebViewScrollAppKit)
    {
        self._contentSizePollCount = 0;
        self._contentSizeCheckTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", CPWebViewAppKitScrollPollInterval, self, sel_getUid("_maybePollWebFrameSize"), nil, YES);
    }
}
,["void"]), new objj_method(sel_getUid("isLoading"), function $CPWebView__isLoading(self, _cmd)
{
    return self._isLoading;
}
,["BOOL"]), new objj_method(sel_getUid("mainFrameURL"), function $CPWebView__mainFrameURL(self, _cmd)
{
    return self._mainFrameURL;
}
,["CPString"]), new objj_method(sel_getUid("setMainFrameURL:"), function $CPWebView__setMainFrameURL_(self, _cmd, URLString)
{
    if (self._mainFrameURL)
        objj_msgSend(self._backwardStack, "addObject:", self._mainFrameURL);
    self._mainFrameURL = URLString;
    objj_msgSend(self._forwardStack, "removeAllObjects");
    objj_msgSend(self, "_loadMainFrameURL");
}
,["void","CPString"]), new objj_method(sel_getUid("goBack"), function $CPWebView__goBack(self, _cmd)
{
    if (self._backwardStack.length > 0)
    {
        if (self._mainFrameURL)
            objj_msgSend(self._forwardStack, "addObject:", self._mainFrameURL);
        self._mainFrameURL = objj_msgSend(self._backwardStack, "lastObject");
        objj_msgSend(self._backwardStack, "removeLastObject");
        objj_msgSend(self, "_loadMainFrameURL");
        return YES;
    }
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("goForward"), function $CPWebView__goForward(self, _cmd)
{
    if (self._forwardStack.length > 0)
    {
        if (self._mainFrameURL)
            objj_msgSend(self._backwardStack, "addObject:", self._mainFrameURL);
        self._mainFrameURL = objj_msgSend(self._forwardStack, "lastObject");
        objj_msgSend(self._forwardStack, "removeLastObject");
        objj_msgSend(self, "_loadMainFrameURL");
        return YES;
    }
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("canGoBack"), function $CPWebView__canGoBack(self, _cmd)
{
    return self._backwardStack.length > 0;
}
,["BOOL"]), new objj_method(sel_getUid("canGoForward"), function $CPWebView__canGoForward(self, _cmd)
{
    return self._forwardStack.length > 0;
}
,["BOOL"]), new objj_method(sel_getUid("backForwardList"), function $CPWebView__backForwardList(self, _cmd)
{
    return {back: self._backwardStack, forward: self._forwardStack};
}
,["WebBackForwardList"]), new objj_method(sel_getUid("close"), function $CPWebView__close(self, _cmd)
{
    self._iframe.parentNode.removeChild(self._iframe);
}
,["void"]), new objj_method(sel_getUid("DOMWindow"), function $CPWebView__DOMWindow(self, _cmd)
{
    try    {
        return self._iframe.contentDocument && self._iframe.contentDocument.defaultView || self._iframe.contentWindow;
    }
    catch(e)     {
        return nil;
    }}
,["DOMWindow"]), new objj_method(sel_getUid("windowScriptObject"), function $CPWebView__windowScriptObject(self, _cmd)
{
    var win = objj_msgSend(self, "DOMWindow");
    if (!self._wso || win != objj_msgSend(self._wso, "window"))
    {
        if (win)
            self._wso = objj_msgSend(objj_msgSend(CPWebScriptObject, "alloc"), "initWithWindow:", win);
        else
            self._wso = nil;
    }
    return self._wso;
}
,["CPWebScriptObject"]), new objj_method(sel_getUid("stringByEvaluatingJavaScriptFromString:"), function $CPWebView__stringByEvaluatingJavaScriptFromString_(self, _cmd, script)
{
    var result = objj_msgSend(self, "objectByEvaluatingJavaScriptFromString:", script);
    return result ? String(result) : nil;
}
,["CPString","CPString"]), new objj_method(sel_getUid("objectByEvaluatingJavaScriptFromString:"), function $CPWebView__objectByEvaluatingJavaScriptFromString_(self, _cmd, script)
{
    return objj_msgSend(objj_msgSend(self, "windowScriptObject"), "evaluateWebScript:", script);
}
,["JSObject","CPString"]), new objj_method(sel_getUid("computedStyleForElement:pseudoElement:"), function $CPWebView__computedStyleForElement_pseudoElement_(self, _cmd, element, pseudoElement)
{
    var win = objj_msgSend(objj_msgSend(self, "windowScriptObject"), "window");
    if (win)
    {
        return win.document.defaultView.getComputedStyle(element, pseudoElement);
    }
    return nil;
}
,["DOMCSSStyleDeclaration","DOMElement","CPString"]), new objj_method(sel_getUid("drawsBackground"), function $CPWebView__drawsBackground(self, _cmd)
{
    return self._drawsBackground;
}
,["BOOL"]), new objj_method(sel_getUid("setDrawsBackground:"), function $CPWebView__setDrawsBackground_(self, _cmd, drawsBackground)
{
    if (drawsBackground == self._drawsBackground)
        return;
    self._drawsBackground = drawsBackground;
    objj_msgSend(self, "_applyBackgroundColor");
}
,["void","BOOL"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPWebView__setBackgroundColor_(self, _cmd, aColor)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebView").super_class }, "setBackgroundColor:", aColor);
    objj_msgSend(self, "_applyBackgroundColor");
}
,["void","CPColor"]), new objj_method(sel_getUid("_applyBackgroundColor"), function $CPWebView___applyBackgroundColor(self, _cmd)
{
    if (self._iframe)
    {
        var bgColor = objj_msgSend(self, "backgroundColor") || objj_msgSend(CPColor, "whiteColor");
        self._iframe.allowtransparency = !self._drawsBackground;
        self._iframe.style.backgroundColor = self._drawsBackground ? objj_msgSend(bgColor, "cssString") : "transparent";
    }
}
,["void"]), new objj_method(sel_getUid("takeStringURLFrom:"), function $CPWebView__takeStringURLFrom_(self, _cmd, sender)
{
    objj_msgSend(self, "setMainFrameURL:", objj_msgSend(sender, "stringValue"));
}
,["id","id"]), new objj_method(sel_getUid("goBack:"), function $CPWebView__goBack_(self, _cmd, sender)
{
    objj_msgSend(self, "goBack");
}
,["id","id"]), new objj_method(sel_getUid("goForward:"), function $CPWebView__goForward_(self, _cmd, sender)
{
    objj_msgSend(self, "goForward");
}
,["id","id"]), new objj_method(sel_getUid("stopLoading:"), function $CPWebView__stopLoading_(self, _cmd, sender)
{
}
,["id","id"]), new objj_method(sel_getUid("reload:"), function $CPWebView__reload_(self, _cmd, sender)
{
    if (!self._url && self._html !== nil)
        objj_msgSend(self, "loadHTMLString:", self._html);
    else
        objj_msgSend(self, "_loadMainFrameURL");
}
,["id","id"]), new objj_method(sel_getUid("print:"), function $CPWebView__print_(self, _cmd, sender)
{
    try    {
        objj_msgSend(self, "DOMWindow").print();
    }
    catch(e)     {
        alert('Please click the webpage and select "Print" from the "File" menu');
    }}
,["id","id"]), new objj_method(sel_getUid("downloadDelegate"), function $CPWebView__downloadDelegate(self, _cmd)
{
    return self._downloadDelegate;
}
,["id"]), new objj_method(sel_getUid("setDownloadDelegate:"), function $CPWebView__setDownloadDelegate_(self, _cmd, anObject)
{
    self._downloadDelegate = anObject;
}
,["void","id"]), new objj_method(sel_getUid("frameLoadDelegate"), function $CPWebView__frameLoadDelegate(self, _cmd)
{
    return self._frameLoadDelegate;
}
,["id"]), new objj_method(sel_getUid("setFrameLoadDelegate:"), function $CPWebView__setFrameLoadDelegate_(self, _cmd, anObject)
{
    self._frameLoadDelegate = anObject;
}
,["void","id"]), new objj_method(sel_getUid("policyDelegate"), function $CPWebView__policyDelegate(self, _cmd)
{
    return self._policyDelegate;
}
,["id"]), new objj_method(sel_getUid("setPolicyDelegate:"), function $CPWebView__setPolicyDelegate_(self, _cmd, anObject)
{
    self._policyDelegate = anObject;
}
,["void","id"]), new objj_method(sel_getUid("resourceLoadDelegate"), function $CPWebView__resourceLoadDelegate(self, _cmd)
{
    return self._resourceLoadDelegate;
}
,["id"]), new objj_method(sel_getUid("setResourceLoadDelegate:"), function $CPWebView__setResourceLoadDelegate_(self, _cmd, anObject)
{
    self._resourceLoadDelegate = anObject;
}
,["void","id"]), new objj_method(sel_getUid("UIDelegate"), function $CPWebView__UIDelegate(self, _cmd)
{
    return self._UIDelegate;
}
,["id"]), new objj_method(sel_getUid("setUIDelegate:"), function $CPWebView__setUIDelegate_(self, _cmd, anObject)
{
    self._UIDelegate = anObject;
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "CPWebScriptObject"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_window")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithWindow:"), function $CPWebScriptObject__initWithWindow_(self, _cmd, aWindow)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebScriptObject").super_class }, "init"))
    {
        self._window = aWindow;
    }
    return self;
}
,["id","Window"]), new objj_method(sel_getUid("callWebScriptMethod:withArguments:"), function $CPWebScriptObject__callWebScriptMethod_withArguments_(self, _cmd, methodName, args)
{
    if (typeof self._window[methodName] == "function")
    {
        try        {
            return self._window[methodName].apply(self._window, args);
        }
        catch(e)         {
        }    }
    return undefined;
}
,["id","CPString","CPArray"]), new objj_method(sel_getUid("evaluateWebScript:"), function $CPWebScriptObject__evaluateWebScript_(self, _cmd, script)
{
    try    {
        return self._window.eval(script);
    }
    catch(e)     {
    }    return undefined;
}
,["id","CPString"]), new objj_method(sel_getUid("window"), function $CPWebScriptObject__window(self, _cmd)
{
    return self._window;
}
,["Window"])]);
}{
var the_class = objj_getClass("CPWebView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPWebView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPWebView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebView").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._mainFrameURL = nil;
        self._backwardStack = [];
        self._forwardStack = [];
        self._scrollMode = CPWebViewScrollAuto;
        objj_msgSend(self, "_initDOMWithFrame:", objj_msgSend(self, "frame"));
        if (!objj_msgSend(self, "backgroundColor"))
            objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "whiteColor"));
        objj_msgSend(self, "_updateEffectiveScrollMode");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPWebView__encodeWithCoder_(self, _cmd, aCoder)
{
    var actualSubviews = self._subviews;
    self._subviews = [];
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWebView").super_class }, "encodeWithCoder:", aCoder);
    self._subviews = actualSubviews;
}
,["void","CPCoder"])]);
}{
var the_class = objj_getClass("CPURL")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPURL\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_passesSameOriginPolicy"), function $CPURL___passesSameOriginPolicy(self, _cmd)
{
    var documentURL = objj_msgSend(CPURL, "URLWithString:", window.location.href);
    if (objj_msgSend(documentURL, "isFileURL") && CPFeatureIsCompatible(CPSOPDisabledFromFileURLs))
        return YES;
    if (!objj_msgSend(self, "scheme") && !objj_msgSend(self, "host") && !objj_msgSend(self, "port"))
        return YES;
    return objj_msgSend(documentURL, "scheme") == objj_msgSend(self, "scheme") && objj_msgSend(documentURL, "host") == objj_msgSend(self, "host") && objj_msgSend(documentURL, "port") == objj_msgSend(self, "port");
}
,["BOOL"])]);
}p;20;CPWindowController.jt;15773;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;7;CPCib.ji;13;CPResponder.ji;10;CPWindow.jt;15657;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPCib.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPWindow.j", YES);{var the_class = objj_allocateClassPair(CPResponder, "CPWindowController"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_window"), new objj_ivar("_documents"), new objj_ivar("_document"), new objj_ivar("_shouldCloseDocument"), new objj_ivar("_supportsMultipleDocuments"), new objj_ivar("_cibOwner"), new objj_ivar("_windowCibName"), new objj_ivar("_windowCibPath"), new objj_ivar("_viewController"), new objj_ivar("_viewControllerContainerView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPWindowController__init(self, _cmd)
{
    return objj_msgSend(self, "initWithWindow:", nil);
}
,["id"]), new objj_method(sel_getUid("initWithWindow:"), function $CPWindowController__initWithWindow_(self, _cmd, aWindow)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWindowController").super_class }, "init");
    if (self)
    {
        objj_msgSend(self, "setWindow:", aWindow);
        objj_msgSend(self, "setShouldCloseDocument:", NO);
        objj_msgSend(self, "setNextResponder:", CPApp);
        self._documents = [];
    }
    return self;
}
,["id","CPWindow"]), new objj_method(sel_getUid("initWithWindowCibName:"), function $CPWindowController__initWithWindowCibName_(self, _cmd, aWindowCibName)
{
    return objj_msgSend(self, "initWithWindowCibName:owner:", aWindowCibName, self);
}
,["id","CPString"]), new objj_method(sel_getUid("initWithWindowCibName:owner:"), function $CPWindowController__initWithWindowCibName_owner_(self, _cmd, aWindowCibName, anOwner)
{
    self = objj_msgSend(self, "initWithWindow:", nil);
    if (self)
    {
        self._cibOwner = anOwner;
        self._windowCibName = aWindowCibName;
    }
    return self;
}
,["id","CPString","id"]), new objj_method(sel_getUid("initWithWindowCibPath:owner:"), function $CPWindowController__initWithWindowCibPath_owner_(self, _cmd, aWindowCibPath, anOwner)
{
    self = objj_msgSend(self, "initWithWindow:", nil);
    if (self)
    {
        self._cibOwner = anOwner;
        self._windowCibPath = aWindowCibPath;
    }
    return self;
}
,["id","CPString","id"]), new objj_method(sel_getUid("loadWindow"), function $CPWindowController__loadWindow(self, _cmd)
{
    if (self._window)
        return;
    objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "loadCibFile:externalNameTable:", objj_msgSend(self, "windowCibPath"), objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", self._cibOwner, CPCibOwner));
}
,["void"]), new objj_method(sel_getUid("showWindow:"), function $CPWindowController__showWindow_(self, _cmd, aSender)
{
    var theWindow = objj_msgSend(self, "window");
    if (objj_msgSend(theWindow, "respondsToSelector:", sel_getUid("becomesKeyOnlyIfNeeded")) && objj_msgSend(theWindow, "becomesKeyOnlyIfNeeded"))
        objj_msgSend(theWindow, "orderFront:", aSender);
    else
        objj_msgSend(theWindow, "makeKeyAndOrderFront:", aSender);
}
,["id","id"]), new objj_method(sel_getUid("isWindowLoaded"), function $CPWindowController__isWindowLoaded(self, _cmd)
{
    return self._window !== nil;
}
,["BOOL"]), new objj_method(sel_getUid("window"), function $CPWindowController__window(self, _cmd)
{
    if (!self._window)
    {
        objj_msgSend(self, "windowWillLoad");
        objj_msgSend(self._document, "windowControllerWillLoadCib:", self);
        objj_msgSend(self, "loadWindow");
        if (self._window === nil && objj_msgSend(self._cibOwner, "isKindOfClass:", objj_msgSend(CPDocument, "class")))
            objj_msgSend(self, "setWindow:", objj_msgSend(self._cibOwner, "valueForKey:", "window"));
        if (!self._window)
        {
            var reason = objj_msgSend(CPString, "stringWithFormat:", "Window for %@ could not be loaded from Cib or no window specified. Override loadWindow to load the window manually.", self);
            objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, reason);
        }
        objj_msgSend(self, "windowDidLoad");
        objj_msgSend(self._document, "windowControllerDidLoadCib:", self);
        objj_msgSend(self, "synchronizeWindowTitleWithDocumentName");
    }
    return self._window;
}
,["CPWindow"]), new objj_method(sel_getUid("setWindow:"), function $CPWindowController__setWindow_(self, _cmd, aWindow)
{
    objj_msgSend(self._window, "setWindowController:", nil);
    self._window = aWindow;
    objj_msgSend(self._window, "setWindowController:", self);
    objj_msgSend(self._window, "setNextResponder:", self);
}
,["void","CPWindow"]), new objj_method(sel_getUid("windowDidLoad"), function $CPWindowController__windowDidLoad(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("windowWillLoad"), function $CPWindowController__windowWillLoad(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("setDocument:"), function $CPWindowController__setDocument_(self, _cmd, aDocument)
{
    if (self._document === aDocument)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._document)
    {
        if (!objj_msgSend(self, "supportsMultipleDocuments"))
            objj_msgSend(self, "removeDocument:", self._document);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPDocumentWillSaveNotification, self._document);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPDocumentDidSaveNotification, self._document);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPDocumentDidFailToSaveNotification, self._document);
    }
    self._document = aDocument;
    if (self._document)
    {
        objj_msgSend(self, "addDocument:", self._document);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_documentWillSave:"), CPDocumentWillSaveNotification, self._document);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_documentDidSave:"), CPDocumentDidSaveNotification, self._document);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("_documentDidFailToSave:"), CPDocumentDidFailToSaveNotification, self._document);
        objj_msgSend(self, "setDocumentEdited:", objj_msgSend(self._document, "isDocumentEdited"));
    }
    var viewController = objj_msgSend(self._document, "viewControllerForWindowController:", self);
    if (viewController)
        objj_msgSend(self, "setViewController:", viewController);
    objj_msgSend(self, "synchronizeWindowTitleWithDocumentName");
    objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "toolbar"), "_autoValidateVisibleItems");
}
,["void","CPDocument"]), new objj_method(sel_getUid("setSupportsMultipleDocuments:"), function $CPWindowController__setSupportsMultipleDocuments_(self, _cmd, shouldSupportMultipleDocuments)
{
    self._supportsMultipleDocuments = shouldSupportMultipleDocuments;
}
,["void","BOOL"]), new objj_method(sel_getUid("supportsMultipleDocuments"), function $CPWindowController__supportsMultipleDocuments(self, _cmd)
{
    return self._supportsMultipleDocuments;
}
,["BOOL"]), new objj_method(sel_getUid("addDocument:"), function $CPWindowController__addDocument_(self, _cmd, aDocument)
{
    if (aDocument && !objj_msgSend(self._documents, "containsObject:", aDocument))
        objj_msgSend(self._documents, "addObject:", aDocument);
}
,["void","CPDocument"]), new objj_method(sel_getUid("removeDocument:"), function $CPWindowController__removeDocument_(self, _cmd, aDocument)
{
    var index = objj_msgSend(self._documents, "indexOfObjectIdenticalTo:", aDocument);
    if (index === CPNotFound)
        return;
    objj_msgSend(self._documents, "removeObjectAtIndex:", index);
    if (self._document === aDocument && objj_msgSend(self._documents, "count"))
        objj_msgSend(self, "setDocument:", objj_msgSend(self._documents, "objectAtIndex:", MIN(index, objj_msgSend(self._documents, "count") - 1)));
}
,["void","CPDocument"]), new objj_method(sel_getUid("removeDocumentAndCloseIfNecessary:"), function $CPWindowController__removeDocumentAndCloseIfNecessary_(self, _cmd, aDocument)
{
    objj_msgSend(self, "removeDocument:", aDocument);
    if (!objj_msgSend(self._documents, "count"))
        objj_msgSend(self, "close");
}
,["void","CPDocument"]), new objj_method(sel_getUid("documents"), function $CPWindowController__documents(self, _cmd)
{
    return self._documents;
}
,["CPArray"]), new objj_method(sel_getUid("setViewControllerContainerView:"), function $CPWindowController__setViewControllerContainerView_(self, _cmd, aView)
{
    if (!self._viewControllerContainerView && !aView)
        return;
    var viewController = objj_msgSend(self, "viewController"),
        viewControllerView = objj_msgSend(viewController, "isViewLoaded") ? objj_msgSend(viewController, "view") : nil,
        contentView = objj_msgSend(objj_msgSend(self, "window"), "contentView");
    if (aView)
    {
        objj_msgSend(aView, "setFrame:", objj_msgSend(contentView, "frame"));
        objj_msgSend(aView, "setAutoresizingMask:", objj_msgSend(contentView, "autoresizingMask"));
        if (viewControllerView)
        {
            objj_msgSend(viewControllerView, "removeFromSuperview");
            objj_msgSend(aView, "addSubview:", viewControllerView);
        }
        objj_msgSend(objj_msgSend(self, "window"), "setContentView:", aView);
    }
    else if (viewControllerView)
    {
        objj_msgSend(viewControllerView, "removeFromSuperview");
        objj_msgSend(viewControllerView, "setFrame:", objj_msgSend(contentView, "frame"));
        objj_msgSend(viewControllerView, "setAutoresizingMask:", objj_msgSend(contentView, "autoresizingMask"));
        objj_msgSend(objj_msgSend(self, "window"), "setContentView:", viewControllerView);
    }
    else
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "init");
        objj_msgSend(view, "setFrame:", objj_msgSend(contentView, "frame"));
        objj_msgSend(view, "setAutoresizingMask:", objj_msgSend(contentView, "autoresizingMask"));
        objj_msgSend(objj_msgSend(self, "window"), "setContentView:", view);
    }
    self._viewControllerContainerView = aView;
}
,["void","CPView"]), new objj_method(sel_getUid("viewControllerContainerView"), function $CPWindowController__viewControllerContainerView(self, _cmd)
{
    return self._viewControllerContainerView;
}
,["void"]), new objj_method(sel_getUid("setViewController:"), function $CPWindowController__setViewController_(self, _cmd, aViewController)
{
    if (!self._viewController && !aViewController)
        return;
    var containerView = objj_msgSend(self, "viewControllerContainerView"),
        newView = objj_msgSend(aViewController, "isViewLoaded") ? objj_msgSend(aViewController, "view") : nil;
    if (containerView)
    {
        var oldView = objj_msgSend(self._viewController, "isViewLoaded") ? objj_msgSend(self._viewController, "view") : nil;
        if (oldView)
        {
            objj_msgSend(newView, "setFrame:", objj_msgSend(oldView, "frame"));
            objj_msgSend(newView, "setAutoresizingMask:", objj_msgSend(oldView, "autoresizingMask"));
        }
        if (oldView && newView)
            objj_msgSend(containerView, "replaceSubview:with:", oldView, newView);
        else if (oldView)
            objj_msgSend(oldView, "removeFromSuperview");
        else if (newView)
            objj_msgSend(containerView, "addSubview:", newView);
    }
    else if (newView)
    {
        var contentView = objj_msgSend(objj_msgSend(self, "window"), "contentView");
        objj_msgSend(newView, "setFrame:", objj_msgSend(contentView, "frame"));
        objj_msgSend(newView, "setAutoresizingMask:", objj_msgSend(contentView, "autoresizingMask"));
        objj_msgSend(objj_msgSend(self, "window"), "setContentView:", newView);
    }
    else
    {
        var view = objj_msgSend(objj_msgSend(CPView, "alloc"), "init"),
            contentView = objj_msgSend(objj_msgSend(self, "window"), "contentView");
        objj_msgSend(view, "setFrame:", objj_msgSend(contentView, "frame"));
        objj_msgSend(view, "setAutoresizingMask:", objj_msgSend(contentView, "autoresizingMask"));
        objj_msgSend(objj_msgSend(self, "window"), "setContentView:", view);
    }
    self._viewController = aViewController;
}
,["void","CPViewController"]), new objj_method(sel_getUid("viewController"), function $CPWindowController__viewController(self, _cmd)
{
    return self._viewController;
}
,["CPViewController"]), new objj_method(sel_getUid("_documentWillSave:"), function $CPWindowController___documentWillSave_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(self, "window"), "setDocumentSaving:", YES);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_documentDidSave:"), function $CPWindowController___documentDidSave_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(self, "window"), "setDocumentSaving:", NO);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_documentDidFailToSave:"), function $CPWindowController___documentDidFailToSave_(self, _cmd, aNotification)
{
    objj_msgSend(objj_msgSend(self, "window"), "setDocumentSaving:", NO);
}
,["void","CPNotification"]), new objj_method(sel_getUid("document"), function $CPWindowController__document(self, _cmd)
{
    return self._document;
}
,["CPDocument"]), new objj_method(sel_getUid("setDocumentEdited:"), function $CPWindowController__setDocumentEdited_(self, _cmd, isEdited)
{
    objj_msgSend(objj_msgSend(self, "window"), "setDocumentEdited:", isEdited);
}
,["void","BOOL"]), new objj_method(sel_getUid("close"), function $CPWindowController__close(self, _cmd)
{
    objj_msgSend(objj_msgSend(self, "window"), "close");
}
,["void"]), new objj_method(sel_getUid("setShouldCloseDocument:"), function $CPWindowController__setShouldCloseDocument_(self, _cmd, shouldCloseDocument)
{
    self._shouldCloseDocument = shouldCloseDocument;
}
,["void","BOOL"]), new objj_method(sel_getUid("shouldCloseDocument"), function $CPWindowController__shouldCloseDocument(self, _cmd)
{
    return self._shouldCloseDocument;
}
,["BOOL"]), new objj_method(sel_getUid("owner"), function $CPWindowController__owner(self, _cmd)
{
    return self._cibOwner;
}
,["id"]), new objj_method(sel_getUid("windowCibName"), function $CPWindowController__windowCibName(self, _cmd)
{
    if (self._windowCibName)
        return self._windowCibName;
    return objj_msgSend(objj_msgSend(self._windowCibPath, "lastPathComponent"), "stringByDeletingPathExtension");
}
,["CPString"]), new objj_method(sel_getUid("windowCibPath"), function $CPWindowController__windowCibPath(self, _cmd)
{
    if (self._windowCibPath)
        return self._windowCibPath;
    return objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "pathForResource:", self._windowCibName + ".cib");
}
,["CPString"]), new objj_method(sel_getUid("synchronizeWindowTitleWithDocumentName"), function $CPWindowController__synchronizeWindowTitleWithDocumentName(self, _cmd)
{
    if (!self._document || !self._window)
        return;
    objj_msgSend(self._window, "setTitle:", objj_msgSend(self, "windowTitleForDocumentDisplayName:", objj_msgSend(self._document, "displayName")));
}
,["void"]), new objj_method(sel_getUid("windowTitleForDocumentDisplayName:"), function $CPWindowController__windowTitleForDocumentDisplayName_(self, _cmd, aDisplayName)
{
    return aDisplayName;
}
,["CPString","CPString"])]);
}p;13;CPWorkspace.jt;1028;@STATIC;1.0;I;21;Foundation/CPString.jt;984;objj_executeFile("Foundation/CPString.j", NO);var SharedWorkspace = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPWorkspace"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("openFile:"), function $CPWorkspace__openFile_(self, _cmd, fullPath)
{
    var url = objj_msgSend(CPURL, "URLWithString:", fullPath);
    return objj_msgSend(self, "openURL:", url);
}
,["BOOL","CPString"]), new objj_method(sel_getUid("openURL:"), function $CPWorkspace__openURL_(self, _cmd, url)
{
    if (!url || !objj_msgSend(url, "absoluteURL"))
        return NO;
    window.open(objj_msgSend(url, "absoluteURL"));
    return YES;
}
,["BOOL","CPURL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedWorkspace"), function $CPWorkspace__sharedWorkspace(self, _cmd)
{
    if (!SharedWorkspace)
        SharedWorkspace = objj_msgSend(CPWorkspace, "new");
    return SharedWorkspace;
}
,["CPWorkspace"])]);
}p;20;_CPCibClassSwapper.jt;2135;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;2064;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);var _CPCibClassSwapperClassNameKey = "_CPCibClassSwapperClassNameKey",
    _CPCibClassSwapperOriginalClassNameKey = "_CPCibClassSwapperOriginalClassNameKey";
{var the_class = objj_allocateClassPair(CPObject, "_CPCibClassSwapper"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("allocObjectWithCoder:className:"), function $_CPCibClassSwapper__allocObjectWithCoder_className_(self, _cmd, aCoder, aClassName)
{
    var theClass = objj_msgSend(aCoder, "classForClassName:", aClassName);
    if (!theClass)
    {
        theClass = objj_lookUpClass(aClassName);
        if (!theClass)
            return nil;
    }
    return objj_msgSend(theClass, "alloc");
}
,["void","CPCoder","CPString"]), new objj_method(sel_getUid("allocWithCoder:"), function $_CPCibClassSwapper__allocWithCoder_(self, _cmd, aCoder)
{
    if (objj_msgSend(aCoder, "respondsToSelector:", sel_getUid("usesOriginalClasses")) && objj_msgSend(aCoder, "usesOriginalClasses"))
    {
        var theClassName = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibClassSwapperOriginalClassNameKey),
            object = objj_msgSend(self, "allocObjectWithCoder:className:", aCoder, theClassName);
    }
    else
    {
        var theClassName = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibClassSwapperClassNameKey),
            object = objj_msgSend(self, "allocObjectWithCoder:className:", aCoder, theClassName);
        if (!object)
        {
            CPLog.error("Unable to find class " + theClassName + " referenced in cib file.");
            object = objj_msgSend(self, "allocObjectWithCoder:className:", aCoder, objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibClassSwapperOriginalClassNameKey));
        }
    }
    if (!object)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Unable to find class " + theClassName + " referenced in cib file.");
    return object;
}
,["id","CPCoder"])]);
}p;20;_CPCibCustomObject.jt;2506;@STATIC;1.0;I;21;Foundation/CPObject.jI;26;Foundation/CPObjJRuntime.jt;2430;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPObjJRuntime.j", NO);var _CPCibCustomObjectClassName = "_CPCibCustomObjectClassName";
{var the_class = objj_allocateClassPair(CPObject, "_CPCibCustomObject"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_className")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("customClassName"), function $_CPCibCustomObject__customClassName(self, _cmd)
{
    return self._className;
}
,["CPString"]), new objj_method(sel_getUid("setCustomClassName:"), function $_CPCibCustomObject__setCustomClassName_(self, _cmd, aClassName)
{
    self._className = aClassName;
}
,["void","CPString"]), new objj_method(sel_getUid("description"), function $_CPCibCustomObject__description(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomObject").super_class }, "description") + " (" + objj_msgSend(self, "customClassName") + ')';
}
,["CPString"])]);
}{
var the_class = objj_getClass("_CPCibCustomObject")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomObject\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPCibCustomObject__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomObject").super_class }, "init");
    if (self)
        self._className = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibCustomObjectClassName);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibCustomObject__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._className, _CPCibCustomObjectClassName);
}
,["void","CPCoder"]), new objj_method(sel_getUid("_cibInstantiate"), function $_CPCibCustomObject___cibInstantiate(self, _cmd)
{
    var theClass = CPClassFromString(self._className);
    if (theClass === objj_msgSend(self, "class"))
    {
        self._className = "CPObject";
        return self;
    }
    if (!theClass)
    {
        theClass = objj_msgSend(CPObject, "class");
    }
    if (theClass === objj_msgSend(CPApplication, "class"))
        return objj_msgSend(CPApplication, "sharedApplication");
    return objj_msgSend(objj_msgSend(theClass, "alloc"), "init");
}
,["id"])]);
}p;22;_CPCibCustomResource.jt;8179;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;17;CPCompatibility.ji;9;CPImage.ji;9;CPTheme.jt;8060;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPImage.j", YES);objj_executeFile("CPTheme.j", YES);var _CPCibCustomResourceClassNameKey = "_CPCibCustomResourceClassNameKey",
    _CPCibCustomResourceResourceNameKey = "_CPCibCustomResourceResourceNameKey",
    _CPCibCustomResourcePropertiesKey = "_CPCibCustomResourcePropertiesKey",
    _CPCibCustomResourceTemplateImageMap = nil;
{var the_class = objj_allocateClassPair(CPObject, "_CPCibCustomResource"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_className"), new objj_ivar("_resourceName"), new objj_ivar("_properties"), new objj_ivar("_bundle")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithClassName:resourceName:properties:"), function $_CPCibCustomResource__initWithClassName_resourceName_properties_(self, _cmd, aClassName, aResourceName, properties)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomResource").super_class }, "init");
    if (self)
    {
        self._className = aClassName;
        self._resourceName = aResourceName;
        self._properties = properties;
        self._bundle = nil;
    }
    return self;
}
,["id","CPString","CPString","CPDictionary"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPCibCustomResource__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomResource").super_class }, "init");
    if (self)
    {
        self._className = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibCustomResourceClassNameKey);
        self._resourceName = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibCustomResourceResourceNameKey);
        self._properties = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibCustomResourcePropertiesKey);
        self._bundle = nil;
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibCustomResource__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._className, _CPCibCustomResourceClassNameKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._resourceName, _CPCibCustomResourceResourceNameKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._properties, _CPCibCustomResourcePropertiesKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("awakeAfterUsingCoder:"), function $_CPCibCustomResource__awakeAfterUsingCoder_(self, _cmd, aCoder)
{
    if (objj_msgSend(aCoder, "respondsToSelector:", sel_getUid("bundle")) && (!objj_msgSend(aCoder, "respondsToSelector:", sel_getUid("awakenCustomResources")) || objj_msgSend(aCoder, "awakenCustomResources")))
        if (self._className === "CPImage")
        {
            var templateImage = objj_msgSend(_CPCibCustomResourceTemplateImageMap, "objectForKey:", self._resourceName);
            if (templateImage)
                return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", templateImage, objj_msgSend(CPButtonBar, "class"));
            else
                return objj_msgSend(self, "imageFromCoder:", aCoder);
        }
    return self;
}
,["id","CPCoder"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $_CPCibCustomResource__initialize(self, _cmd)
{
    if (self !== objj_msgSend(_CPCibCustomResource, "class"))
        return;
    _CPCibCustomResourceTemplateImageMap = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", "button-image-plus", "CPAddTemplate", "button-image-minus", "CPRemoveTemplate");
}
,["void"]), new objj_method(sel_getUid("imageResourceWithName:size:"), function $_CPCibCustomResource__imageResourceWithName_size_(self, _cmd, aResourceName, aSize)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithClassName:resourceName:properties:", "CPImage", aResourceName, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", aSize, "size"));
}
,["id","CPString","CGSize"]), new objj_method(sel_getUid("imageResourceWithName:size:bundleClass:"), function $_CPCibCustomResource__imageResourceWithName_size_bundleClass_(self, _cmd, aResourceName, aSize, aBundleClass)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithClassName:resourceName:properties:", "CPImage", aResourceName, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", aSize, "size", aBundleClass, "bundleClass"));
}
,["id","CPString","CGSize","CPString"])]);
}{
var the_class = objj_getClass("_CPCibCustomResource")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomResource\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("imageBundleWithCoder:"), function $_CPCibCustomResource__imageBundleWithCoder_(self, _cmd, aCoder)
{
    if (self._bundle)
        return self._bundle;
    var bundleIdentifier = objj_msgSend(self._properties, "valueForKey:", "bundleIdentifier");
    if (bundleIdentifier)
        self._bundle = objj_msgSend(CPBundle, "bundleWithIdentifier:", bundleIdentifier);
    else
    {
        var bundleClass = objj_msgSend(self._properties, "valueForKey:", "bundleClass");
        if (bundleClass)
        {
            bundleClass = CPClassFromString(bundleClass);
            if (bundleClass)
                self._bundle = objj_msgSend(CPBundle, "bundleForClass:", bundleClass);
        }
    }
    if (!self._bundle)
    {
        var framework = objj_msgSend(self._properties, "valueForKey:", "framework");
        if (framework)
        {
            var appKit = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class")),
                url = objj_msgSend(objj_msgSend(appKit, "bundleURL"), "URLByDeletingLastPathComponent");
            url = objj_msgSend(CPURL, "URLWithString:relativeToURL:", framework, url);
            self._bundle = objj_msgSend(CPBundle, "bundleWithURL:", url);
        }
    }
    if (!self._bundle)
    {
        if (aCoder)
            self._bundle = objj_msgSend(aCoder, "bundle");
        else
            self._bundle = objj_msgSend(CPBundle, "mainBundle");
    }
    return self._bundle;
}
,["CPBundle","CPCoder"]), new objj_method(sel_getUid("imageFromCoder:"), function $_CPCibCustomResource__imageFromCoder_(self, _cmd, aCoder)
{
    return objj_msgSend(objj_msgSend(CPImage, "alloc"), "initWithContentsOfFile:size:", objj_msgSend(objj_msgSend(self, "imageBundleWithCoder:", aCoder), "pathForResource:", self._resourceName), objj_msgSend(self._properties, "valueForKey:", "size"));
}
,["CPImage","CPCoder"]), new objj_method(sel_getUid("filename"), function $_CPCibCustomResource__filename(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "imageBundleWithCoder:", nil), "pathForResource:", self._resourceName);
}
,["CPString"]), new objj_method(sel_getUid("size"), function $_CPCibCustomResource__size(self, _cmd)
{
    return objj_msgSend(self._properties, "objectForKey:", "size");
}
,["CGSize"]), new objj_method(sel_getUid("isSingleImage"), function $_CPCibCustomResource__isSingleImage(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("isThreePartImage"), function $_CPCibCustomResource__isThreePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("isNinePartImage"), function $_CPCibCustomResource__isNinePartImage(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("loadStatus"), function $_CPCibCustomResource__loadStatus(self, _cmd)
{
    return CPImageLoadStatusCompleted;
}
,["unsigned"]), new objj_method(sel_getUid("delegate"), function $_CPCibCustomResource__delegate(self, _cmd)
{
    return nil;
}
,["id"]), new objj_method(sel_getUid("description"), function $_CPCibCustomResource__description(self, _cmd)
{
    var image = objj_msgSend(self, "imageFromCoder:", nil);
    return objj_msgSend(image, "description");
}
,["CPString"])]);
}p;18;_CPCibCustomView.jt;3445;@STATIC;1.0;i;8;CPView.jt;3414;objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPCibCustomView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_className")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("customClassName"), function $_CPCibCustomView__customClassName(self, _cmd)
{
    return self._className;
}
,["CPString"]), new objj_method(sel_getUid("setCustomClassName:"), function $_CPCibCustomView__setCustomClassName_(self, _cmd, aClassName)
{
    if (self._className === aClassName)
        return;
    self._className = aClassName;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPString"])]);
}var _CPCibCustomViewClassNameKey = "_CPCibCustomViewClassNameKey";
{
var the_class = objj_getClass("_CPCibCustomView")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibCustomView\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPCibCustomView__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomView").super_class }, "initWithCoder:", aCoder);
    if (self)
        self._className = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibCustomViewClassNameKey);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibCustomView__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibCustomView").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._className, _CPCibCustomViewClassNameKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("customClassName"), function $_CPCibCustomView__customClassName(self, _cmd)
{
    return self._className;
}
,["CPString"]), new objj_method(sel_getUid("_cibInstantiate"), function $_CPCibCustomView___cibInstantiate(self, _cmd)
{
    var theClass = CPClassFromString(self._className);
    if (!theClass)
    {
        theClass = objj_msgSend(CPView, "class");
    }
    if (theClass === objj_msgSend(self, "class"))
    {
        self._className = "CPView";
        return self;
    }
    var view = objj_msgSend(objj_msgSend(theClass, "alloc"), "initWithFrame:", objj_msgSend(self, "frame"));
    if (view)
    {
        objj_msgSend(view, "setBounds:", objj_msgSend(self, "bounds"));
        var subviews = objj_msgSend(self, "subviews"),
            index = 0,
            count = subviews.length;
        for (; index < count; ++index)
            objj_msgSend(view, "addSubview:", subviews[index]);
        objj_msgSend(view, "setAutoresizingMask:", objj_msgSend(self, "autoresizingMask"));
        objj_msgSend(view, "setAutoresizesSubviews:", objj_msgSend(self, "autoresizesSubviews"));
        objj_msgSend(view, "setHitTests:", objj_msgSend(self, "hitTests"));
        objj_msgSend(view, "setHidden:", objj_msgSend(self, "isHidden"));
        objj_msgSend(view, "setAlphaValue:", objj_msgSend(self, "alphaValue"));
        objj_msgSend(view, "setIdentifier:", objj_msgSend(self, "identifier"));
        objj_msgSend(self._superview, "replaceSubview:with:", self, view);
        objj_msgSend(view, "setBackgroundColor:", objj_msgSend(self, "backgroundColor"));
    }
    return view;
}
,["id"])]);
}p;23;_CPCibKeyedUnarchiver.jt;2315;@STATIC;1.0;I;30;Foundation/CPKeyedUnarchiver.jt;2261;objj_executeFile("Foundation/CPKeyedUnarchiver.j", NO);{var the_class = objj_allocateClassPair(CPKeyedUnarchiver, "_CPCibKeyedUnarchiver"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_bundle"), new objj_ivar("_awakenCustomResources"), new objj_ivar("_externalObjectsForProxyIdentifiers")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initForReadingWithData:bundle:awakenCustomResources:"), function $_CPCibKeyedUnarchiver__initForReadingWithData_bundle_awakenCustomResources_(self, _cmd, data, aBundle, shouldAwakenCustomResources)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibKeyedUnarchiver").super_class }, "initForReadingWithData:", data);
    if (self)
    {
        self._bundle = aBundle;
        self._awakenCustomResources = shouldAwakenCustomResources;
        objj_msgSend(self, "setDelegate:", self);
    }
    return self;
}
,["id","CPData","CPBundle","BOOL"]), new objj_method(sel_getUid("bundle"), function $_CPCibKeyedUnarchiver__bundle(self, _cmd)
{
    return self._bundle;
}
,["CPBundle"]), new objj_method(sel_getUid("awakenCustomResources"), function $_CPCibKeyedUnarchiver__awakenCustomResources(self, _cmd)
{
    return self._awakenCustomResources;
}
,["BOOL"]), new objj_method(sel_getUid("setExternalObjectsForProxyIdentifiers:"), function $_CPCibKeyedUnarchiver__setExternalObjectsForProxyIdentifiers_(self, _cmd, externalObjectsForProxyIdentifiers)
{
    self._externalObjectsForProxyIdentifiers = externalObjectsForProxyIdentifiers;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("externalObjectForProxyIdentifier:"), function $_CPCibKeyedUnarchiver__externalObjectForProxyIdentifier_(self, _cmd, anIdentifier)
{
    return objj_msgSend(self._externalObjectsForProxyIdentifiers, "objectForKey:", anIdentifier);
}
,["id","CPString"]), new objj_method(sel_getUid("replaceObjectAtUID:withObject:"), function $_CPCibKeyedUnarchiver__replaceObjectAtUID_withObject_(self, _cmd, aUID, anObject)
{
    self._objects[aUID] = anObject;
}
,["void","int","id"]), new objj_method(sel_getUid("objectAtUID:"), function $_CPCibKeyedUnarchiver__objectAtUID_(self, _cmd, aUID)
{
    return self._objects[aUID];
}
,["id","int"])]);
}p;18;_CPCibObjectData.jt;10075;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;23;CPCibBindingConnector.ji;16;CPCibConnector.ji;23;CPCibControlConnector.ji;20;CPCibHelpConnector.ji;22;CPCibOutletConnector.ji;33;CPCibRuntimeAttributesConnector.ji;12;CPClipView.jt;9795;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPCibBindingConnector.j", YES);objj_executeFile("CPCibConnector.j", YES);objj_executeFile("CPCibControlConnector.j", YES);objj_executeFile("CPCibHelpConnector.j", YES);objj_executeFile("CPCibOutletConnector.j", YES);objj_executeFile("CPCibRuntimeAttributesConnector.j", YES);objj_executeFile("CPClipView.j", YES);{var the_class = objj_allocateClassPair(CPObject, "_CPCibObjectData"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_namesKeys"), new objj_ivar("_namesValues"), new objj_ivar("_accessibilityConnectors"), new objj_ivar("_accessibilityOidsKeys"), new objj_ivar("_accessibilityOidsValues"), new objj_ivar("_classesKeys"), new objj_ivar("_classesValues"), new objj_ivar("_connections"), new objj_ivar("_fontManager"), new objj_ivar("_framework"), new objj_ivar("_nextOid"), new objj_ivar("_objectsKeys"), new objj_ivar("_objectsValues"), new objj_ivar("_oidKeys"), new objj_ivar("_oidValues"), new objj_ivar("_fileOwner"), new objj_ivar("_visibleWindows"), new objj_ivar("_replacementObjects")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $_CPCibObjectData__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibObjectData").super_class }, "init");
    if (self)
    {
        self._namesKeys = [];
        self._namesValues = [];
        self._classesKeys = [];
        self._classesValues = [];
        self._connections = [];
        self._framework = "";
        self._nextOid = [];
        self._objectsKeys = [];
        self._objectsValues = [];
        self._oidKeys = [];
        self._oidValues = [];
        self._fileOwner = nil;
        self._visibleWindows = objj_msgSend(CPSet, "set");
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("displayVisibleWindows"), function $_CPCibObjectData__displayVisibleWindows(self, _cmd)
{
    var object = nil,
        objectEnumerator = objj_msgSend(self._visibleWindows, "objectEnumerator");
    while ((object = objj_msgSend(objectEnumerator, "nextObject")) !== nil)
        objj_msgSend(self._replacementObjects[objj_msgSend(object, "UID")], "makeKeyAndOrderFront:", self);
}
,["void"])]);
}var _CPCibObjectDataNamesKeysKey = "_CPCibObjectDataNamesKeysKey",
    _CPCibObjectDataNamesValuesKey = "_CPCibObjectDataNamesValuesKey",
    _CPCibObjectDataAccessibilityConnectorsKey = "_CPCibObjectDataAccessibilityConnectors",
    _CPCibObjectDataAccessibilityOidsKeysKey = "_CPCibObjectDataAccessibilityOidsKeys",
    _CPCibObjectDataAccessibilityOidsValuesKey = "_CPCibObjectDataAccessibilityOidsValues",
    _CPCibObjectDataClassesKeysKey = "_CPCibObjectDataClassesKeysKey",
    _CPCibObjectDataClassesValuesKey = "_CPCibObjectDataClassesValuesKey",
    _CPCibObjectDataConnectionsKey = "_CPCibObjectDataConnectionsKey",
    _CPCibObjectDataFontManagerKey = "_CPCibObjectDataFontManagerKey",
    _CPCibObjectDataFrameworkKey = "_CPCibObjectDataFrameworkKey",
    _CPCibObjectDataNextOidKey = "_CPCibObjectDataNextOidKey",
    _CPCibObjectDataObjectsKeysKey = "_CPCibObjectDataObjectsKeysKey",
    _CPCibObjectDataObjectsValuesKey = "_CPCibObjectDataObjectsValuesKey",
    _CPCibObjectDataOidKeysKey = "_CPCibObjectDataOidKeysKey",
    _CPCibObjectDataOidValuesKey = "_CPCibObjectDataOidValuesKey",
    _CPCibObjectDataFileOwnerKey = "_CPCibObjectDataFileOwnerKey",
    _CPCibObjectDataVisibleWindowsKey = "_CPCibObjectDataVisibleWindowsKey";
{
var the_class = objj_getClass("_CPCibObjectData")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibObjectData\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPCibObjectData__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibObjectData").super_class }, "init");
    if (self)
    {
        self._replacementObjects = {};
        self._namesKeys = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataNamesKeysKey);
        self._namesValues = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataNamesValuesKey);
        self._classesKeys = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataClassesKeysKey);
        self._classesValues = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataClassesValuesKey);
        self._connections = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataConnectionsKey);
        self._framework = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataFrameworkKey);
        self._nextOid = objj_msgSend(aCoder, "decodeIntForKey:", _CPCibObjectDataNextOidKey);
        self._objectsKeys = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataObjectsKeysKey);
        self._objectsValues = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataObjectsValuesKey);
        self._oidKeys = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataOidKeysKey);
        self._oidValues = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataOidValuesKey);
        self._fileOwner = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataFileOwnerKey);
        self._visibleWindows = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibObjectDataVisibleWindowsKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibObjectData__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._namesKeys, _CPCibObjectDataNamesKeysKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._namesValues, _CPCibObjectDataNamesValuesKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._classesKeys, _CPCibObjectDataClassesKeysKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._classesValues, _CPCibObjectDataClassesValuesKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._connections, _CPCibObjectDataConnectionsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._framework, _CPCibObjectDataFrameworkKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._nextOid, _CPCibObjectDataNextOidKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._objectsKeys, _CPCibObjectDataObjectsKeysKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._objectsValues, _CPCibObjectDataObjectsValuesKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._oidKeys, _CPCibObjectDataOidKeysKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._oidValues, _CPCibObjectDataOidValuesKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._fileOwner, _CPCibObjectDataFileOwnerKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._visibleWindows, _CPCibObjectDataVisibleWindowsKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("instantiateWithOwner:topLevelObjects:"), function $_CPCibObjectData__instantiateWithOwner_topLevelObjects_(self, _cmd, anOwner, topLevelObjects)
{
    var count = objj_msgSend(self._objectsKeys, "count");
    while (count--)
    {
        var object = self._objectsKeys[count],
            parent = self._objectsValues[count],
            instantiatedObject = object;
        if (objj_msgSend(object, "respondsToSelector:", sel_getUid("_cibInstantiate")))
        {
            var instantiatedObject = objj_msgSend(object, "_cibInstantiate");
            if (instantiatedObject !== object)
            {
                self._replacementObjects[objj_msgSend(object, "UID")] = instantiatedObject;
                if (objj_msgSend(instantiatedObject, "isKindOfClass:", CPView))
                {
                    var clipView = objj_msgSend(instantiatedObject, "superview");
                    if (objj_msgSend(clipView, "isKindOfClass:", CPClipView))
                    {
                        var scrollView = objj_msgSend(clipView, "superview");
                        if (objj_msgSend(scrollView, "isKindOfClass:", CPScrollView))
                            objj_msgSend(scrollView, "setDocumentView:", instantiatedObject);
                    }
                }
            }
        }
        if (topLevelObjects && parent === self._fileOwner && object !== self._fileOwner)
            topLevelObjects.push(instantiatedObject);
    }
}
,["void","id","CPMutableArray"]), new objj_method(sel_getUid("establishConnectionsWithOwner:topLevelObjects:"), function $_CPCibObjectData__establishConnectionsWithOwner_topLevelObjects_(self, _cmd, anOwner, topLevelObjects)
{
    self._replacementObjects[objj_msgSend(self._fileOwner, "UID")] = anOwner;
    for (var i = 0, count = self._connections.length; i < count; ++i)
    {
        var connection = self._connections[i];
        objj_msgSend(connection, "replaceObjects:", self._replacementObjects);
        objj_msgSend(connection, "establishConnection");
    }
}
,["void","id","CPMutableArray"]), new objj_method(sel_getUid("awakeWithOwner:topLevelObjects:"), function $_CPCibObjectData__awakeWithOwner_topLevelObjects_(self, _cmd, anOwner, topLevelObjects)
{
    var count = objj_msgSend(self._objectsKeys, "count");
    while (count--)
    {
        var object = self._objectsKeys[count],
            instantiatedObject = self._replacementObjects[objj_msgSend(object, "UID")];
        if (instantiatedObject)
            object = instantiatedObject;
        if (object !== anOwner && objj_msgSend(object, "respondsToSelector:", sel_getUid("awakeFromCib")))
            objj_msgSend(object, "awakeFromCib");
    }
    if (objj_msgSend(anOwner, "respondsToSelector:", sel_getUid("awakeFromCib")))
        objj_msgSend(anOwner, "awakeFromCib");
}
,["void","id","CPMutableArray"])]);
}p;19;_CPCibProxyObject.jt;1376;@STATIC;1.0;I;21;Foundation/CPObject.jt;1331;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "_CPCibProxyObject"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_identifier")]);objj_registerClassPair(the_class);
}var _CPCibProxyObjectIdentifierKey = "CPIdentifier";
{
var the_class = objj_getClass("_CPCibProxyObject")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibProxyObject\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPCibProxyObject__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibProxyObject").super_class }, "init");
    if (self)
        self._identifier = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibProxyObjectIdentifierKey);
    if (objj_msgSend(aCoder, "respondsToSelector:", sel_getUid("externalObjectForProxyIdentifier:")))
        return objj_msgSend(aCoder, "externalObjectForProxyIdentifier:", self._identifier);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibProxyObject__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._identifier, _CPCibProxyObjectIdentifierKey);
}
,["void","CPCoder"])]);
}p;22;_CPCibWindowTemplate.jt;8477;@STATIC;1.0;I;21;Foundation/CPObject.jI;26;Foundation/CPObjJRuntime.ji;12;CGGeometry.ji;11;CPToolbar.ji;8;CPView.ji;20;CPWindow_Constants.ji;12;_CPToolTip.jt;8314;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPObjJRuntime.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPToolbar.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("_CPToolTip.j", YES);{var the_class = objj_allocateClassPair(CPObject, "_CPCibWindowTemplate"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_minSize"), new objj_ivar("_maxSize"), new objj_ivar("_screenRect"), new objj_ivar("_viewClass"), new objj_ivar("_wtFlags"), new objj_ivar("_windowClass"), new objj_ivar("_windowRect"), new objj_ivar("_windowStyleMask"), new objj_ivar("_windowTitle"), new objj_ivar("_windowView"), new objj_ivar("_windowAutorecalculatesKeyViewLoop"), new objj_ivar("_windowIsFullPlatformWindow")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $_CPCibWindowTemplate__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibWindowTemplate").super_class }, "init");
    if (self)
    {
        self._windowClass = "CPWindow";
        self._windowRect = CGRectMake(0.0, 0.0, 400.0, 200.0);
        self._windowStyleMask = CPTitledWindowMask | CPClosableWindowMask | CPMiniaturizableWindowMask | CPResizableWindowMask;
        self._windowTitle = "Window";
        self._windowView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 400.0, 200.0));
        self._windowIsFullPlatformWindow = NO;
        self._wtFlags = CPWindowPositionFlexibleLeft | CPWindowPositionFlexibleRight | CPWindowPositionFlexibleTop | CPWindowPositionFlexibleBottom;
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("customClassName"), function $_CPCibWindowTemplate__customClassName(self, _cmd)
{
    return self._windowClass;
}
,["CPString"]), new objj_method(sel_getUid("setCustomClassName:"), function $_CPCibWindowTemplate__setCustomClassName_(self, _cmd, aClassName)
{
    self._windowClass = aClassName;
}
,["void","CPString"]), new objj_method(sel_getUid("windowClass"), function $_CPCibWindowTemplate__windowClass(self, _cmd)
{
    return self._windowClass;
}
,["CPString"]), new objj_method(sel_getUid("_cibInstantiate"), function $_CPCibWindowTemplate___cibInstantiate(self, _cmd)
{
    var windowClass = CPClassFromString(objj_msgSend(self, "windowClass"));
    if (!windowClass)
    {
        windowClass = objj_msgSend(CPWindow, "class");
    }
    var theWindow = objj_msgSend(objj_msgSend(windowClass, "alloc"), "initWithContentRect:styleMask:", self._windowRect, self._windowStyleMask);
    if (self._minSize)
        objj_msgSend(theWindow, "setMinSize:", self._minSize);
    if (self._maxSize)
        objj_msgSend(theWindow, "setMaxSize:", self._maxSize);
    objj_msgSend(theWindow, "setTitle:", self._windowTitle);
    var contentViewAutoresizesSubviews = objj_msgSend(self._windowView, "autoresizesSubviews");
    objj_msgSend(self._windowView, "setAutoresizesSubviews:", NO);
    objj_msgSend(theWindow, "setContentView:", self._windowView);
    objj_msgSend(self._windowView, "setAutoresizesSubviews:", contentViewAutoresizesSubviews);
    if (objj_msgSend(self._viewClass, "isKindOfClass:", objj_msgSend(CPToolbar, "class")))
        objj_msgSend(theWindow, "setToolbar:", self._viewClass);
    objj_msgSend(theWindow, "setAutorecalculatesKeyViewLoop:", self._windowAutorecalculatesKeyViewLoop);
    objj_msgSend(theWindow, "setFullPlatformWindow:", self._windowIsFullPlatformWindow);
    theWindow._positioningMask = self._wtFlags;
    theWindow._positioningScreenRect = self._screenRect;
    return theWindow;
}
,["id"])]);
}var _CPCibWindowTemplateMinSizeKey = "_CPCibWindowTemplateMinSizeKey",
    _CPCibWindowTemplateMaxSizeKey = "_CPCibWindowTemplateMaxSizeKey",
    _CPCibWindowTemplateViewClassKey = "_CPCibWindowTemplateViewClassKey",
    _CPCibWindowTemplateWTFlagsKey = "_CPCibWindowTemplateWTFlagsKey",
    _CPCibWindowTemplateWindowClassKey = "_CPCibWindowTemplateWindowClassKey",
    _CPCibWindowTemplateWindowRectKey = "_CPCibWindowTemplateWindowRectKey",
    _CPCibWindowTemplateScreenRectKey = "_CPCibWindowTemplateScreenRectKey",
    _CPCibWindowTemplateWindowStyleMaskKey = "_CPCibWindowTempatStyleMaskKey",
    _CPCibWindowTemplateWindowTitleKey = "_CPCibWindowTemplateWindowTitleKey",
    _CPCibWindowTemplateWindowViewKey = "_CPCibWindowTemplateWindowViewKey",
    _CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop = "_CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop",
    _CPCibWindowTemplateWindowIsFullPlatformWindowKey = "_CPCibWindowTemplateWindowIsFullPlatformWindowKey";
{
var the_class = objj_getClass("_CPCibWindowTemplate")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPCibWindowTemplate\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $_CPCibWindowTemplate__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPCibWindowTemplate").super_class }, "init");
    if (self)
    {
        if (objj_msgSend(aCoder, "containsValueForKey:", _CPCibWindowTemplateMinSizeKey))
            self._minSize = objj_msgSend(aCoder, "decodeSizeForKey:", _CPCibWindowTemplateMinSizeKey);
        if (objj_msgSend(aCoder, "containsValueForKey:", _CPCibWindowTemplateMaxSizeKey))
            self._maxSize = objj_msgSend(aCoder, "decodeSizeForKey:", _CPCibWindowTemplateMaxSizeKey);
        self._viewClass = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibWindowTemplateViewClassKey);
        self._windowClass = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibWindowTemplateWindowClassKey);
        self._wtFlags = objj_msgSend(aCoder, "decodeIntForKey:", _CPCibWindowTemplateWTFlagsKey);
        self._windowRect = objj_msgSend(aCoder, "decodeRectForKey:", _CPCibWindowTemplateWindowRectKey);
        self._screenRect = objj_msgSend(aCoder, "decodeRectForKey:", _CPCibWindowTemplateScreenRectKey);
        self._windowStyleMask = objj_msgSend(aCoder, "decodeIntForKey:", _CPCibWindowTemplateWindowStyleMaskKey);
        self._windowTitle = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibWindowTemplateWindowTitleKey);
        self._windowView = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibWindowTemplateWindowViewKey);
        self._windowAutorecalculatesKeyViewLoop = objj_msgSend(aCoder, "decodeBoolForKey:", _CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop);
        self._windowIsFullPlatformWindow = objj_msgSend(aCoder, "decodeBoolForKey:", _CPCibWindowTemplateWindowIsFullPlatformWindowKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPCibWindowTemplate__encodeWithCoder_(self, _cmd, aCoder)
{
    if (self._minSize)
        objj_msgSend(aCoder, "encodeSize:forKey:", self._minSize, _CPCibWindowTemplateMinSizeKey);
    if (self._maxSize)
        objj_msgSend(aCoder, "encodeSize:forKey:", self._maxSize, _CPCibWindowTemplateMaxSizeKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._viewClass, _CPCibWindowTemplateViewClassKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._windowClass, _CPCibWindowTemplateWindowClassKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._wtFlags, _CPCibWindowTemplateWTFlagsKey);
    objj_msgSend(aCoder, "encodeRect:forKey:", self._windowRect, _CPCibWindowTemplateWindowRectKey);
    objj_msgSend(aCoder, "encodeRect:forKey:", self._screenRect, _CPCibWindowTemplateScreenRectKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._windowStyleMask, _CPCibWindowTemplateWindowStyleMaskKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._windowTitle, _CPCibWindowTemplateWindowTitleKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._windowView, _CPCibWindowTemplateWindowViewKey);
    if (self._windowAutorecalculatesKeyViewLoop)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._windowAutorecalculatesKeyViewLoop, _CPCibWindowTemplateWindowAutorecalculatesKeyViewLoop);
    if (self._windowIsFullPlatformWindow)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._windowIsFullPlatformWindow, _CPCibWindowTemplateWindowIsFullPlatformWindowKey);
}
,["void","CPCoder"])]);
}p;7;CPCib.jt;8476;@STATIC;1.0;I;21;Foundation/CPObject.jI;28;Foundation/CPURLConnection.jI;25;Foundation/CPURLRequest.ji;20;_CPCibClassSwapper.ji;20;_CPCibCustomObject.ji;22;_CPCibCustomResource.ji;18;_CPCibCustomView.ji;23;_CPCibKeyedUnarchiver.ji;18;_CPCibObjectData.ji;19;_CPCibProxyObject.ji;22;_CPCibWindowTemplate.jt;8166;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPURLConnection.j", NO);objj_executeFile("Foundation/CPURLRequest.j", NO);objj_executeFile("_CPCibClassSwapper.j", YES);objj_executeFile("_CPCibCustomObject.j", YES);objj_executeFile("_CPCibCustomResource.j", YES);objj_executeFile("_CPCibCustomView.j", YES);objj_executeFile("_CPCibKeyedUnarchiver.j", YES);objj_executeFile("_CPCibObjectData.j", YES);objj_executeFile("_CPCibProxyObject.j", YES);objj_executeFile("_CPCibWindowTemplate.j", YES);CPCibOwner = "CPCibOwner";
CPCibTopLevelObjects = "CPCibTopLevelObjects";
CPCibReplacementClasses = "CPCibReplacementClasses";
CPCibExternalObjects = "CPCibExternalObjects";
var CPCibObjectDataKey = "CPCibObjectDataKey";
{var the_class = objj_allocateClassPair(CPObject, "CPCib"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_data"), new objj_ivar("_bundle"), new objj_ivar("_awakenCustomResources"), new objj_ivar("_loadDelegate")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithContentsOfURL:"), function $CPCib__initWithContentsOfURL_(self, _cmd, aURL)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCib").super_class }, "init");
    if (self)
    {
        self._data = objj_msgSend(CPURLConnection, "sendSynchronousRequest:returningResponse:", objj_msgSend(CPURLRequest, "requestWithURL:", aURL), nil);
        if (!self._data)
            return nil;
        self._awakenCustomResources = YES;
    }
    return self;
}
,["id","CPURL"]), new objj_method(sel_getUid("initWithContentsOfURL:loadDelegate:"), function $CPCib__initWithContentsOfURL_loadDelegate_(self, _cmd, aURL, aLoadDelegate)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCib").super_class }, "init");
    if (self)
    {
        objj_msgSend(CPURLConnection, "connectionWithRequest:delegate:", objj_msgSend(CPURLRequest, "requestWithURL:", aURL), self);
        self._awakenCustomResources = YES;
        self._loadDelegate = aLoadDelegate;
    }
    return self;
}
,["id","CPURL","id"]), new objj_method(sel_getUid("initWithCibNamed:bundle:"), function $CPCib__initWithCibNamed_bundle_(self, _cmd, aName, aBundle)
{
    if (!objj_msgSend(aName, "hasSuffix:", ".cib"))
        aName = objj_msgSend(aName, "stringByAppendingString:", ".cib");
    self = objj_msgSend(self, "initWithContentsOfURL:", objj_msgSend(aBundle || objj_msgSend(CPBundle, "mainBundle"), "pathForResource:", aName));
    if (self)
        self._bundle = aBundle;
    return self;
}
,["id","CPString","CPBundle"]), new objj_method(sel_getUid("initWithCibNamed:bundle:loadDelegate:"), function $CPCib__initWithCibNamed_bundle_loadDelegate_(self, _cmd, aName, aBundle, aLoadDelegate)
{
    if (!objj_msgSend(aName, "hasSuffix:", ".cib"))
        aName = objj_msgSend(aName, "stringByAppendingString:", ".cib");
    self = objj_msgSend(self, "initWithContentsOfURL:loadDelegate:", objj_msgSend(aBundle || objj_msgSend(CPBundle, "mainBundle"), "pathForResource:", aName), aLoadDelegate);
    if (self)
        self._bundle = aBundle;
    return self;
}
,["id","CPString","CPBundle","id"]), new objj_method(sel_getUid("_setAwakenCustomResources:"), function $CPCib___setAwakenCustomResources_(self, _cmd, shouldAwakenCustomResources)
{
    self._awakenCustomResources = shouldAwakenCustomResources;
}
,["void","BOOL"]), new objj_method(sel_getUid("_awakenCustomResources"), function $CPCib___awakenCustomResources(self, _cmd)
{
    return self._awakenCustomResources;
}
,["BOOL"]), new objj_method(sel_getUid("instantiateCibWithExternalNameTable:"), function $CPCib__instantiateCibWithExternalNameTable_(self, _cmd, anExternalNameTable)
{
    var bundle = self._bundle,
        owner = objj_msgSend(anExternalNameTable, "objectForKey:", CPCibOwner);
    if (!bundle && owner)
        bundle = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(owner, "class"));
    var unarchiver = objj_msgSend(objj_msgSend(_CPCibKeyedUnarchiver, "alloc"), "initForReadingWithData:bundle:awakenCustomResources:", self._data, bundle, self._awakenCustomResources),
        replacementClasses = objj_msgSend(anExternalNameTable, "objectForKey:", CPCibReplacementClasses);
    if (replacementClasses)
    {
        var key = nil,
            keyEnumerator = objj_msgSend(replacementClasses, "keyEnumerator");
        while ((key = objj_msgSend(keyEnumerator, "nextObject")) !== nil)
            objj_msgSend(unarchiver, "setClass:forClassName:", objj_msgSend(replacementClasses, "objectForKey:", key), key);
    }
    objj_msgSend(unarchiver, "setExternalObjectsForProxyIdentifiers:", objj_msgSend(anExternalNameTable, "objectForKey:", CPCibExternalObjects));
    var objectData = objj_msgSend(unarchiver, "decodeObjectForKey:", CPCibObjectDataKey);
    if (!objectData || !objj_msgSend(objectData, "isKindOfClass:", objj_msgSend(_CPCibObjectData, "class")))
        return NO;
    var topLevelObjects = objj_msgSend(anExternalNameTable, "objectForKey:", CPCibTopLevelObjects);
    objj_msgSend(objectData, "instantiateWithOwner:topLevelObjects:", owner, topLevelObjects);
    objj_msgSend(objectData, "establishConnectionsWithOwner:topLevelObjects:", owner, topLevelObjects);
    objj_msgSend(objectData, "awakeWithOwner:topLevelObjects:", owner, topLevelObjects);
    objj_msgSend(objectData, "displayVisibleWindows");
    return YES;
}
,["BOOL","CPDictionary"]), new objj_method(sel_getUid("instantiateCibWithOwner:topLevelObjects:"), function $CPCib__instantiateCibWithOwner_topLevelObjects_(self, _cmd, anOwner, topLevelObjects)
{
    var nameTable = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", topLevelObjects, CPCibTopLevelObjects);
    if (anOwner)
        objj_msgSend(nameTable, "setObject:forKey:", anOwner, CPCibOwner);
    return objj_msgSend(self, "instantiateCibWithExternalNameTable:", nameTable);
}
,["BOOL","id","CPArray"])]);
}{
var the_class = objj_getClass("CPCib")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCib\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("connection:didReceiveData:"), function $CPCib__connection_didReceiveData_(self, _cmd, aConnection, data)
{
    if (!data)
        return objj_msgSend(self, "connection:didFailWithError:", aConnection, nil);
    self._data = objj_msgSend(CPData, "dataWithRawString:", data);
}
,["void","CPURLConnection","CPString"]), new objj_method(sel_getUid("connection:didFailWithError:"), function $CPCib__connection_didFailWithError_(self, _cmd, aConnection, anError)
{
    if (objj_msgSend(self._loadDelegate, "respondsToSelector:", sel_getUid("cibDidFailToLoad:")))
        objj_msgSend(self._loadDelegate, "cibDidFailToLoad:", self);
    self._loadDelegate = nil;
}
,["void","CPURLConnection","CPError"]), new objj_method(sel_getUid("connectionDidFinishLoading:"), function $CPCib__connectionDidFinishLoading_(self, _cmd, aConnection)
{
    if (objj_msgSend(self._loadDelegate, "respondsToSelector:", sel_getUid("cibDidFinishLoading:")))
        objj_msgSend(self._loadDelegate, "cibDidFinishLoading:", self);
    self._loadDelegate = nil;
}
,["void","CPURLConnection"])]);
}var CPCibDataFileKey = "CPCibDataFileKey",
    CPCibBundleIdentifierKey = "CPCibBundleIdentifierKey";
{
var the_class = objj_getClass("CPCib")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCib\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCib__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCib").super_class }, "init");
    var base64 = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibDataFileKey);
    self._data = objj_msgSend(CPData, "dataWithBase64:", base64);
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCib__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", objj_msgSend(self._data, "base64"), CPCibDataFileKey);
}
,["void","CPCoder"])]);
}p;23;CPCibBindingConnector.jt;2040;@STATIC;1.0;i;16;CPCibConnector.jt;2000;objj_executeFile("CPCibConnector.j", YES);var CPCibBindingConnectorBindingKey = "CPCibBindingConnectorBindingKey",
    CPCibBindingConnectorKeyPathKey = "CPCibBindingConnectorKeyPathKey",
    CPCibBindingConnectorOptionsKey = "CPCibBindingConnectorOptionsKey";
{var the_class = objj_allocateClassPair(CPCibConnector, "CPCibBindingConnector"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_binding"), new objj_ivar("_keyPath"), new objj_ivar("_options")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCibBindingConnector__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibBindingConnector").super_class }, "initWithCoder:", aCoder))
    {
        self._binding = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibBindingConnectorBindingKey);
        self._keyPath = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibBindingConnectorKeyPathKey);
        self._options = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibBindingConnectorOptionsKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCibBindingConnector__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibBindingConnector").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._binding, CPCibBindingConnectorBindingKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._keyPath, CPCibBindingConnectorKeyPathKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._options, CPCibBindingConnectorOptionsKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("establishConnection"), function $CPCibBindingConnector__establishConnection(self, _cmd)
{
    objj_msgSend(self._source, "bind:toObject:withKeyPath:options:", self._binding, self._destination, self._keyPath, self._options);
}
,["void"])]);
}p;16;CPCibConnector.jt;3613;@STATIC;1.0;I;21;Foundation/CPObject.jI;29;Foundation/CPKeyValueCoding.jt;3534;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPKeyValueCoding.j", NO);var _CPCibConnectorSourceKey = "_CPCibConnectorSourceKey",
    _CPCibConnectorDestinationKey = "_CPCibConnectorDestinationKey",
    _CPCibConnectorLabelKey = "_CPCibConnectorLabelKey";
{var the_class = objj_allocateClassPair(CPObject, "CPCibConnector"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_source"), new objj_ivar("_destination"), new objj_ivar("_label")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("source"), function $CPCibConnector__source(self, _cmd)
{
    return self._source;
}
,["id"]), new objj_method(sel_getUid("setSource:"), function $CPCibConnector__setSource_(self, _cmd, newValue)
{
    self._source = newValue;
}
,["void","id"]), new objj_method(sel_getUid("destination"), function $CPCibConnector__destination(self, _cmd)
{
    return self._destination;
}
,["id"]), new objj_method(sel_getUid("setDestination:"), function $CPCibConnector__setDestination_(self, _cmd, newValue)
{
    self._destination = newValue;
}
,["void","id"]), new objj_method(sel_getUid("label"), function $CPCibConnector__label(self, _cmd)
{
    return self._label;
}
,["CPString"]), new objj_method(sel_getUid("setLabel:"), function $CPCibConnector__setLabel_(self, _cmd, newValue)
{
    self._label = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("replaceObject:withObject:"), function $CPCibConnector__replaceObject_withObject_(self, _cmd, anObject, anotherObject)
{
    if (self._source === anObject)
        self._source = anotherObject;
    if (self._destination === anObject)
        self._destination = anotherObject;
}
,["void","id","id"]), new objj_method(sel_getUid("replaceObjects:"), function $CPCibConnector__replaceObjects_(self, _cmd, replacementObjects)
{
    var replacement = replacementObjects[objj_msgSend(self._source, "UID")];
    if (replacement !== undefined)
        self._source = replacement;
    replacement = replacementObjects[objj_msgSend(self._destination, "UID")];
    if (replacement !== undefined)
        self._destination = replacement;
}
,["void","Object"])]);
}{
var the_class = objj_getClass("CPCibConnector")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPCibConnector\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCibConnector__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibConnector").super_class }, "init");
    if (self)
    {
        self._source = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibConnectorSourceKey);
        self._destination = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibConnectorDestinationKey);
        self._label = objj_msgSend(aCoder, "decodeObjectForKey:", _CPCibConnectorLabelKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCibConnector__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._source, _CPCibConnectorSourceKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._destination, _CPCibConnectorDestinationKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._label, _CPCibConnectorLabelKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPCibConnector, "_CPCibConnector"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
}p;23;CPCibControlConnector.jt;2042;@STATIC;1.0;i;16;CPCibConnector.jt;2002;objj_executeFile("CPCibConnector.j", YES);{var the_class = objj_allocateClassPair(CPCibConnector, "CPCibControlConnector"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("establishConnection"), function $CPCibControlConnector__establishConnection(self, _cmd)
{
    var selectorName = self._label,
        selectorNameLength = objj_msgSend(selectorName, "length");
    if (selectorNameLength && selectorName.charAt(selectorNameLength - 1) !== ':')
        selectorName += ':';
    var selector = CPSelectorFromString(selectorName);
    if (!selector)
    {
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "-[" + objj_msgSend(self, "className") + ' ' + _cmd + "] selector " + selectorName + " does not exist.");
    }
    if (self._destination && !objj_msgSend(self._destination, "respondsToSelector:", selector))
        CPLog.warn("Could not connect the action " + selector + " to target of class " + objj_msgSend(self._destination, "className"));
    if (objj_msgSend(self._source, "respondsToSelector:", sel_getUid("setAction:")))
        objj_msgSend(self._source, sel_getUid("setAction:"), selector);
    else
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "-[" + objj_msgSend(self, "className") + ' ' + _cmd + "] " + objj_msgSend(self._source, "description") + " does not respond to setAction:");
    if (objj_msgSend(self._source, "respondsToSelector:", sel_getUid("setTarget:")))
        objj_msgSend(self._source, sel_getUid("setTarget:"), self._destination);
    else
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "-[" + objj_msgSend(self, "className") + ' ' + _cmd + "] " + objj_msgSend(self._source, "description") + " does not respond to setTarget:");
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPCibControlConnector, "_CPCibControlConnector"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
}p;20;CPCibHelpConnector.jt;1609;@STATIC;1.0;i;16;CPCibConnector.jt;1569;objj_executeFile("CPCibConnector.j", YES);{var the_class = objj_allocateClassPair(CPCibConnector, "CPCibHelpConnector"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_destination"), new objj_ivar("_file"), new objj_ivar("_marker")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCibHelpConnector__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibHelpConnector").super_class }, "initWithCoder:", aCoder))
    {
        self._destination = objj_msgSend(aCoder, "decodeObjectForKey:", "_destination");
        self._file = objj_msgSend(aCoder, "decodeObjectForKey:", "_file");
        self._marker = objj_msgSend(aCoder, "decodeObjectForKey:", "_marker");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCibHelpConnector__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibHelpConnector").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._destination, "_destination");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._file, "_file");
    objj_msgSend(aCoder, "encodeObject:forKey:", self._marker, "_marker");
}
,["void","CPCoder"]), new objj_method(sel_getUid("establishConnection"), function $CPCibHelpConnector__establishConnection(self, _cmd)
{
    objj_msgSend(self._destination, "setToolTip:", self._marker);
}
,["void"])]);
}p;14;CPCibLoading.jt;5039;@STATIC;1.0;I;21;Foundation/CPBundle.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.ji;7;CPCib.jt;4927;objj_executeFile("Foundation/CPBundle.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPCib.j", YES);var CPCibOwner = "CPCibOwner";
{
var the_class = objj_getClass("CPObject")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("awakeFromCib"), function $CPObject__awakeFromCib(self, _cmd)
{
}
,["void"])]);
}{
var the_class = objj_getClass("CPBundle")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPBundle\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("loadCibFile:externalNameTable:"), function $CPBundle__loadCibFile_externalNameTable_(self, _cmd, aFileName, aNameTable)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithContentsOfURL:", aFileName), "instantiateCibWithExternalNameTable:", aNameTable);
}
,["CPCib","CPString","CPDictionary"]), new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"), function $CPBundle__loadCibFile_externalNameTable_loadDelegate_(self, _cmd, aFileName, aNameTable, aDelegate)
{
    return objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithCibNamed:bundle:loadDelegate:", aFileName, self, objj_msgSend(objj_msgSend(_CPCibLoadDelegate, "alloc"), "initWithLoadDelegate:externalNameTable:", aDelegate, aNameTable));
}
,["CPCib","CPString","CPDictionary","id"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("loadCibFile:externalNameTable:"), function $CPBundle__loadCibFile_externalNameTable_(self, _cmd, anAbsolutePath, aNameTable)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithContentsOfURL:", anAbsolutePath), "instantiateCibWithExternalNameTable:", aNameTable);
}
,["CPCib","CPString","CPDictionary"]), new objj_method(sel_getUid("loadCibNamed:owner:"), function $CPBundle__loadCibNamed_owner_(self, _cmd, aName, anOwner)
{
    if (!objj_msgSend(aName, "hasSuffix:", ".cib"))
        aName = objj_msgSend(aName, "stringByAppendingString:", ".cib");
    var bundle = anOwner ? objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(anOwner, "class")) : objj_msgSend(CPBundle, "mainBundle"),
        path = objj_msgSend(bundle, "pathForResource:", aName);
    return objj_msgSend(self, "loadCibFile:externalNameTable:", path, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", anOwner, CPCibOwner));
}
,["CPCib","CPString","id"]), new objj_method(sel_getUid("loadCibFile:externalNameTable:loadDelegate:"), function $CPBundle__loadCibFile_externalNameTable_loadDelegate_(self, _cmd, anAbsolutePath, aNameTable, aDelegate)
{
    return objj_msgSend(objj_msgSend(CPCib, "alloc"), "initWithContentsOfURL:loadDelegate:", anAbsolutePath, objj_msgSend(objj_msgSend(_CPCibLoadDelegate, "alloc"), "initWithLoadDelegate:externalNameTable:", aDelegate, aNameTable));
}
,["CPCib","CPString","CPDictionary",null]), new objj_method(sel_getUid("loadCibNamed:owner:loadDelegate:"), function $CPBundle__loadCibNamed_owner_loadDelegate_(self, _cmd, aName, anOwner, aDelegate)
{
    if (!objj_msgSend(aName, "hasSuffix:", ".cib"))
        aName = objj_msgSend(aName, "stringByAppendingString:", ".cib");
    var bundle = anOwner ? objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(anOwner, "class")) : objj_msgSend(CPBundle, "mainBundle"),
        path = objj_msgSend(bundle, "pathForResource:", aName);
    return objj_msgSend(self, "loadCibFile:externalNameTable:loadDelegate:", path, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", anOwner, CPCibOwner), aDelegate);
}
,["CPCib","CPString","id","id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPCibLoadDelegate"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_loadDelegate"), new objj_ivar("_externalNameTable")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithLoadDelegate:externalNameTable:"), function $_CPCibLoadDelegate__initWithLoadDelegate_externalNameTable_(self, _cmd, aLoadDelegate, anExternalNameTable)
{
    self = objj_msgSend(self, "init");
    if (self)
    {
        self._loadDelegate = aLoadDelegate;
        self._externalNameTable = anExternalNameTable;
    }
    return self;
}
,["id","id","id"]), new objj_method(sel_getUid("cibDidFinishLoading:"), function $_CPCibLoadDelegate__cibDidFinishLoading_(self, _cmd, aCib)
{
    objj_msgSend(aCib, "instantiateCibWithExternalNameTable:", self._externalNameTable);
    objj_msgSend(self._loadDelegate, "cibDidFinishLoading:", aCib);
}
,["void","CPCib"]), new objj_method(sel_getUid("cibDidFailToLoad:"), function $_CPCibLoadDelegate__cibDidFailToLoad_(self, _cmd, aCib)
{
    objj_msgSend(self._loadDelegate, "cibDidFailToLoad:", aCib);
}
,["void","CPCib"])]);
}p;22;CPCibOutletConnector.jt;936;@STATIC;1.0;i;16;CPCibConnector.jt;897;objj_executeFile("CPCibConnector.j", YES);{var the_class = objj_allocateClassPair(CPCibConnector, "CPCibOutletConnector"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("establishConnection"), function $CPCibOutletConnector__establishConnection(self, _cmd)
{
    try    {
        objj_msgSend(self._source, "setValue:forKey:", self._destination, self._label);
    }
    catch(anException)     {
        if (objj_msgSend(anException, "name") === CPUndefinedKeyException)
            CPLog.warn("Could not connect the outlet " + self._label + " of target of class " + objj_msgSend(self._source, "className"));
        else
            throw anException;
    }}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPCibOutletConnector, "_CPCibOutletConnector"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
}p;33;CPCibRuntimeAttributesConnector.jt;2232;@STATIC;1.0;i;16;CPCibConnector.jt;2192;objj_executeFile("CPCibConnector.j", YES);var CPCibRuntimeAttributesConnectorObjectKey = "CPCibRuntimeAttributesConnectorObjectKey",
    CPCibRuntimeAttributesConnectorKeyPathsKey = "CPCibRuntimeAttributesConnectorKeyPathsKey",
    CPCibRuntimeAttributesConnectorValuesKey = "CPCibRuntimeAttributesConnectorValuesKey";
{var the_class = objj_allocateClassPair(CPCibConnector, "CPCibRuntimeAttributesConnector"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_keyPaths"), new objj_ivar("_values")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPCibRuntimeAttributesConnector__initWithCoder_(self, _cmd, aCoder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibRuntimeAttributesConnector").super_class }, "initWithCoder:", aCoder))
    {
        self._source = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibRuntimeAttributesConnectorObjectKey);
        self._keyPaths = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibRuntimeAttributesConnectorKeyPathsKey);
        self._values = objj_msgSend(aCoder, "decodeObjectForKey:", CPCibRuntimeAttributesConnectorValuesKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPCibRuntimeAttributesConnector__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPCibRuntimeAttributesConnector").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._source, CPCibRuntimeAttributesConnectorObjectKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._keyPaths, CPCibRuntimeAttributesConnectorKeyPathsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._values, CPCibRuntimeAttributesConnectorValuesKey);
}
,["void","CPCoder"]), new objj_method(sel_getUid("establishConnection"), function $CPCibRuntimeAttributesConnector__establishConnection(self, _cmd)
{
    var count = objj_msgSend(self._keyPaths, "count");
    while (count--)
        objj_msgSend(self._source, "setValue:forKeyPath:", self._values[count], self._keyPaths[count]);
}
,["void"])]);
}p;13;CAAnimation.jt;5486;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;23;CAMediaTimingFunction.jt;5387;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CAMediaTimingFunction.j", YES);{var the_class = objj_allocateClassPair(CPObject, "CAAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isRemovedOnCompletion"), new objj_ivar("_delegate")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CAAnimation__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CAAnimation").super_class }, "init");
    if (self)
        self._isRemovedOnCompletion = YES;
    return self;
}
,["id"]), new objj_method(sel_getUid("shouldArchiveValueForKey:"), function $CAAnimation__shouldArchiveValueForKey_(self, _cmd, aKey)
{
    return YES;
}
,["void","CPString"]), new objj_method(sel_getUid("setRemovedOnCompletion:"), function $CAAnimation__setRemovedOnCompletion_(self, _cmd, isRemovedOnCompletion)
{
    self._isRemovedOnCompletion = isRemovedOnCompletion;
}
,["void","BOOL"]), new objj_method(sel_getUid("removedOnCompletion"), function $CAAnimation__removedOnCompletion(self, _cmd)
{
    return self._isRemovedOnCompletion;
}
,["BOOL"]), new objj_method(sel_getUid("isRemovedOnCompletion"), function $CAAnimation__isRemovedOnCompletion(self, _cmd)
{
    return self._isRemovedOnCompletion;
}
,["BOOL"]), new objj_method(sel_getUid("timingFunction"), function $CAAnimation__timingFunction(self, _cmd)
{
    return nil;
}
,["CAMediaTimingFunction"]), new objj_method(sel_getUid("setDelegate:"), function $CAAnimation__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CAAnimation__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("runActionForKey:object:arguments:"), function $CAAnimation__runActionForKey_object_arguments_(self, _cmd, aKey, anObject, arguments)
{
    objj_msgSend(anObject, "addAnimation:forKey:", self, aKey);
}
,["void","CPString","id","CPDictionary"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("animation"), function $CAAnimation__animation(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "init");
}
,["id"]), new objj_method(sel_getUid("defaultValueForKey:"), function $CAAnimation__defaultValueForKey_(self, _cmd, aKey)
{
    return nil;
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(CAAnimation, "CAPropertyAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_keyPath"), new objj_ivar("_isCumulative"), new objj_ivar("_isAdditive")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setKeyPath:"), function $CAPropertyAnimation__setKeyPath_(self, _cmd, aKeyPath)
{
    self._keyPath = aKeyPath;
}
,["void","CPString"]), new objj_method(sel_getUid("keyPath"), function $CAPropertyAnimation__keyPath(self, _cmd)
{
    return self._keyPath;
}
,["CPString"]), new objj_method(sel_getUid("setCumulative:"), function $CAPropertyAnimation__setCumulative_(self, _cmd, isCumulative)
{
    self._isCumulative = isCumulative;
}
,["void","BOOL"]), new objj_method(sel_getUid("cumulative"), function $CAPropertyAnimation__cumulative(self, _cmd)
{
    return self._isCumulative;
}
,["BOOL"]), new objj_method(sel_getUid("isCumulative"), function $CAPropertyAnimation__isCumulative(self, _cmd)
{
    return self._isCumulative;
}
,["BOOL"]), new objj_method(sel_getUid("setAdditive:"), function $CAPropertyAnimation__setAdditive_(self, _cmd, isAdditive)
{
    self._isAdditive = isAdditive;
}
,["void","BOOL"]), new objj_method(sel_getUid("additive"), function $CAPropertyAnimation__additive(self, _cmd)
{
    return self._isAdditive;
}
,["BOOL"]), new objj_method(sel_getUid("isAdditive"), function $CAPropertyAnimation__isAdditive(self, _cmd)
{
    return self._isAdditive;
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("animationWithKeyPath:"), function $CAPropertyAnimation__animationWithKeyPath_(self, _cmd, aKeyPath)
{
    var animation = objj_msgSend(self, "animation");
    objj_msgSend(animation, "setKeyPath:", aKeyPath);
    return animation;
}
,["id","CPString"])]);
}{var the_class = objj_allocateClassPair(CAPropertyAnimation, "CABasicAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_fromValue"), new objj_ivar("_toValue"), new objj_ivar("_byValue")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setFromValue:"), function $CABasicAnimation__setFromValue_(self, _cmd, aValue)
{
    self._fromValue = aValue;
}
,["void","id"]), new objj_method(sel_getUid("fromValue"), function $CABasicAnimation__fromValue(self, _cmd)
{
    return self._fromValue;
}
,["id"]), new objj_method(sel_getUid("setToValue:"), function $CABasicAnimation__setToValue_(self, _cmd, aValue)
{
    self._toValue = aValue;
}
,["void","id"]), new objj_method(sel_getUid("toValue"), function $CABasicAnimation__toValue(self, _cmd)
{
    return self._toValue;
}
,["id"]), new objj_method(sel_getUid("setByValue:"), function $CABasicAnimation__setByValue_(self, _cmd, aValue)
{
    self._byValue = aValue;
}
,["void","id"]), new objj_method(sel_getUid("byValue"), function $CABasicAnimation__byValue(self, _cmd)
{
    return self._byValue;
}
,["id"])]);
}p;16;CABackingStore.jt;1071;@STATIC;1.0;i;12;CGGeometry.ji;17;CPCompatibility.jt;1013;objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPCompatibility.j", YES);CABackingStoreGetContext = function(aBackingStore)
{
    return aBackingStore.context;
}
if (CPFeatureIsCompatible(CPHTMLCanvasFeature))
{
    CABackingStoreCreate = function()
    {
        var DOMElement = document.createElement("canvas");
        DOMElement.style.position = "absolute";
        return {context: DOMElement.getContext("2d"), buffer: DOMElement, _image: DOMElement};
    };
    CABackingStoreSetSize = function(aBackingStore, aSize)
    {
        var buffer = aBackingStore.buffer;
        buffer.width = aSize.width;
        buffer.height = aSize.height;
        buffer.style.width = aSize.width + "px";
        buffer.style.height = aSize.height + "px";
    };
}else
{
    CABackingStoreCreate = function()
    {
        var context = CGBitmapGraphicsContextCreate();
        context.buffer = "";
        return {context: context};
    };
    CABackingStoreSetSize = function(aBackingStore, aSize)
    {
    };
}p;14;CAFlashLayer.jt;1094;@STATIC;1.0;i;9;CALayer.ji;14;CPFlashMovie.jt;1043;objj_executeFile("CALayer.j", YES);objj_executeFile("CPFlashMovie.j", YES);{var the_class = objj_allocateClassPair(CALayer, "CAFlashLayer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_flashMovie")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setFlashMovie:"), function $CAFlashLayer__setFlashMovie_(self, _cmd, aFlashMovie)
{
    if (self._flashMovie == aFlashMovie)
        return;
    self._flashMovie = aFlashMovie;
    self._DOMElement.innerHTML = "<object width = \"100%\" height = \"100%\"><param name = \"movie\" value = \"" + aFlashMovie._fileName + "\"></param><param name = \"wmode\" value = \"transparent\"></param><embed src = \"" + aFlashMovie._fileName + "\" type = \"application/x-shockwave-flash\" wmode = \"transparent\" width = \"100%\" height = \"100%\"></embed></object>";
}
,["void","CPFlashMovie"]), new objj_method(sel_getUid("flashMovie"), function $CAFlashLayer__flashMovie(self, _cmd)
{
    return self._flashMovie;
}
,["CPFlashMovie"])]);
}p;9;CALayer.jt;30056;@STATIC;1.0;I;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.ji;16;CABackingStore.ji;11;CGContext.ji;12;CGGeometry.jt;29929;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPRunLoop.j", NO);objj_executeFile("CABackingStore.j", YES);objj_executeFile("CGContext.j", YES);objj_executeFile("CGGeometry.j", YES);var CALayerGeometryBoundsMask = 1,
    CALayerGeometryPositionMask = 2,
    CALayerGeometryAnchorPointMask = 4,
    CALayerGeometryAffineTransformMask = 8,
    CALayerGeometryParentSublayerTransformMask = 16;
var USE_BUFFER = NO;
var CALayerFrameOriginUpdateMask = 1,
    CALayerFrameSizeUpdateMask = 2,
    CALayerZPositionUpdateMask = 4,
    CALayerDisplayUpdateMask = 8,
    CALayerCompositeUpdateMask = 16,
    CALayerDOMUpdateMask = CALayerZPositionUpdateMask | CALayerFrameOriginUpdateMask | CALayerFrameSizeUpdateMask;
var CALayerRegisteredRunLoopUpdates = nil;
{var the_class = objj_allocateClassPair(CPObject, "CALayer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_frame"), new objj_ivar("_bounds"), new objj_ivar("_position"), new objj_ivar("_zPosition"), new objj_ivar("_anchorPoint"), new objj_ivar("_affineTransform"), new objj_ivar("_sublayerTransform"), new objj_ivar("_sublayerTransformForSublayers"), new objj_ivar("_backingStoreFrame"), new objj_ivar("_standardBackingStoreFrame"), new objj_ivar("_hasSublayerTransform"), new objj_ivar("_hasCustomBackingStoreFrame"), new objj_ivar("_opacity"), new objj_ivar("_isHidden"), new objj_ivar("_masksToBounds"), new objj_ivar("_backgroundColor"), new objj_ivar("_superlayer"), new objj_ivar("_sublayers"), new objj_ivar("_runLoopUpdateMask"), new objj_ivar("_needsDisplayOnBoundsChange"), new objj_ivar("_delegate"), new objj_ivar("_delegateRespondsToDisplayLayerSelector"), new objj_ivar("_delegateRespondsToDrawLayerInContextSelector"), new objj_ivar("_DOMElement"), new objj_ivar("_DOMContentsElement"), new objj_ivar("_contents"), new objj_ivar("_context"), new objj_ivar("_owningView"), new objj_ivar("_transformToLayer"), new objj_ivar("_transformFromLayer")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CALayer__init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CALayer").super_class }, "init");
    if (self)
    {
        self._frame = CGRectMakeZero();
        self._backingStoreFrame = CGRectMakeZero();
        self._standardBackingStoreFrame = CGRectMakeZero();
        self._bounds = CGRectMakeZero();
        self._position = CGPointMakeZero();
        self._zPosition = 0.0;
        self._anchorPoint = CGPointMake(0.5, 0.5);
        self._affineTransform = CGAffineTransformMakeIdentity();
        self._sublayerTransform = CGAffineTransformMakeIdentity();
        self._transformToLayer = CGAffineTransformMakeIdentity();
        self._transformFromLayer = CGAffineTransformMakeIdentity();
        self._opacity = 1.0;
        self._isHidden = NO;
        self._masksToBounds = NO;
        self._sublayers = [];
        self._DOMElement = document.createElement("div");
        self._DOMElement.style.overflow = "visible";
        self._DOMElement.style.position = "absolute";
        self._DOMElement.style.visibility = "visible";
        self._DOMElement.style.top = "0px";
        self._DOMElement.style.left = "0px";
        self._DOMElement.style.zIndex = 0;
        self._DOMElement.style.width = "0px";
        self._DOMElement.style.height = "0px";
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("setBounds:"), function $CALayer__setBounds_(self, _cmd, aBounds)
{
    if (CGRectEqualToRect(self._bounds, aBounds))
        return;
    var oldOrigin = self._bounds.origin;
    self._bounds = CGRectMakeCopy(aBounds);
    if (self._hasSublayerTransform)
        _CALayerUpdateSublayerTransformForSublayers(self);
    _CALayerRecalculateGeometry(self, CALayerGeometryBoundsMask);
}
,["void","CGRect"]), new objj_method(sel_getUid("bounds"), function $CALayer__bounds(self, _cmd)
{
    return self._bounds;
}
,["CGRect"]), new objj_method(sel_getUid("setPosition:"), function $CALayer__setPosition_(self, _cmd, aPosition)
{
    if (CGPointEqualToPoint(self._position, aPosition))
        return;
    self._position = CGPointMakeCopy(aPosition);
    _CALayerRecalculateGeometry(self, CALayerGeometryPositionMask);
}
,["void","CGPoint"]), new objj_method(sel_getUid("position"), function $CALayer__position(self, _cmd)
{
    return self._position;
}
,["CGPoint"]), new objj_method(sel_getUid("setZPosition:"), function $CALayer__setZPosition_(self, _cmd, aZPosition)
{
    if (self._zPosition == aZPosition)
        return;
    self._zPosition = aZPosition;
    objj_msgSend(self, "registerRunLoopUpdateWithMask:", CALayerZPositionUpdateMask);
}
,["void","int"]), new objj_method(sel_getUid("setAnchorPoint:"), function $CALayer__setAnchorPoint_(self, _cmd, anAnchorPoint)
{
    anAnchorPoint = CGPointMakeCopy(anAnchorPoint);
    anAnchorPoint.x = MIN(1.0, MAX(0.0, anAnchorPoint.x));
    anAnchorPoint.y = MIN(1.0, MAX(0.0, anAnchorPoint.y));
    if (CGPointEqualToPoint(self._anchorPoint, anAnchorPoint))
        return;
    self._anchorPoint = anAnchorPoint;
    if (self._hasSublayerTransform)
        _CALayerUpdateSublayerTransformForSublayers(self);
    if (self._owningView)
        self._position = CGPointMake(CGRectGetWidth(self._bounds) * self._anchorPoint.x, CGRectGetHeight(self._bounds) * self._anchorPoint.y);
    _CALayerRecalculateGeometry(self, CALayerGeometryAnchorPointMask);
}
,["void","CGPoint"]), new objj_method(sel_getUid("anchorPoint"), function $CALayer__anchorPoint(self, _cmd)
{
    return self._anchorPoint;
}
,["CGPoint"]), new objj_method(sel_getUid("setAffineTransform:"), function $CALayer__setAffineTransform_(self, _cmd, anAffineTransform)
{
    if (CGAffineTransformEqualToTransform(self._affineTransform, anAffineTransform))
        return;
    self._affineTransform = CGAffineTransformMakeCopy(anAffineTransform);
    _CALayerRecalculateGeometry(self, CALayerGeometryAffineTransformMask);
}
,["void","CGAffineTransform"]), new objj_method(sel_getUid("affineTransform"), function $CALayer__affineTransform(self, _cmd)
{
    return self._affineTransform;
}
,["CGAffineTransform"]), new objj_method(sel_getUid("setSublayerTransform:"), function $CALayer__setSublayerTransform_(self, _cmd, anAffineTransform)
{
    if (CGAffineTransformEqualToTransform(self._sublayerTransform, anAffineTransform))
        return;
    var hadSublayerTransform = self._hasSublayerTransform;
    self._sublayerTransform = CGAffineTransformMakeCopy(anAffineTransform);
    self._hasSublayerTransform = !CGAffineTransformIsIdentity(self._sublayerTransform);
    if (self._hasSublayerTransform)
    {
        _CALayerUpdateSublayerTransformForSublayers(self);
        var index = self._sublayers.length;
        while (index--)
            _CALayerRecalculateGeometry(self._sublayers[index], CALayerGeometryParentSublayerTransformMask);
    }
}
,["void","CGAffineTransform"]), new objj_method(sel_getUid("sublayerTransform"), function $CALayer__sublayerTransform(self, _cmd)
{
    return self._sublayerTransform;
}
,["CGAffineTransform"]), new objj_method(sel_getUid("transformToLayer"), function $CALayer__transformToLayer(self, _cmd)
{
    return self._transformToLayer;
}
,["CGAffineTransform"]), new objj_method(sel_getUid("setFrame:"), function $CALayer__setFrame_(self, _cmd, aFrame)
{
}
,["void","CGRect"]), new objj_method(sel_getUid("frame"), function $CALayer__frame(self, _cmd)
{
    if (!self._frame)
        self._frame = objj_msgSend(self, "convertRect:toLayer:", self._bounds, self._superlayer);
    return self._frame;
}
,["CGRect"]), new objj_method(sel_getUid("backingStoreFrame"), function $CALayer__backingStoreFrame(self, _cmd)
{
    return self._backingStoreFrame;
}
,["CGRect"]), new objj_method(sel_getUid("setBackingStoreFrame:"), function $CALayer__setBackingStoreFrame_(self, _cmd, aFrame)
{
    self._hasCustomBackingStoreFrame = aFrame != nil;
    if (aFrame == nil)
        aFrame = CGRectMakeCopy(self._standardBackingStoreFrame);
    else
    {
        if (self._superlayer)
        {
            aFrame = objj_msgSend(self._superlayer, "convertRect:toLayer:", aFrame, nil);
            var bounds = objj_msgSend(self._superlayer, "bounds"),
                frame = objj_msgSend(self._superlayer, "convertRect:toLayer:", bounds, nil);
            aFrame.origin.x -= CGRectGetMinX(frame);
            aFrame.origin.y -= CGRectGetMinY(frame);
        }
        else
            aFrame = CGRectMakeCopy(aFrame);
    }
    if (!CGPointEqualToPoint(self._backingStoreFrame.origin, aFrame.origin))
        objj_msgSend(self, "registerRunLoopUpdateWithMask:", CALayerFrameOriginUpdateMask);
    if (!CGSizeEqualToSize(self._backingStoreFrame.size, aFrame.size))
        objj_msgSend(self, "registerRunLoopUpdateWithMask:", CALayerFrameSizeUpdateMask);
    self._backingStoreFrame = aFrame;
}
,["void","CGRect"]), new objj_method(sel_getUid("contents"), function $CALayer__contents(self, _cmd)
{
    return self._contents;
}
,["CGImage"]), new objj_method(sel_getUid("setContents:"), function $CALayer__setContents_(self, _cmd, contents)
{
    if (self._contents == contents)
        return;
    self._contents = contents;
    objj_msgSend(self, "composite");
}
,["void","CGImage"]), new objj_method(sel_getUid("composite"), function $CALayer__composite(self, _cmd)
{
    if (USE_BUFFER && !self._contents || !self._context)
        return;
    CGContextClearRect(self._context, CGRectMake(0.0, 0.0, CGRectGetWidth(self._backingStoreFrame), CGRectGetHeight(self._backingStoreFrame)));
    var transform;
    if (self._superlayer)
    {
        var superlayerTransform = _CALayerGetTransform(self._superlayer, nil),
            superlayerOrigin = CGPointApplyAffineTransform(self._superlayer._bounds.origin, superlayerTransform);
        transform = CGAffineTransformConcat(self._transformFromLayer, superlayerTransform);
        transform.tx -= superlayerOrigin.x;
        transform.ty -= superlayerOrigin.y;
    }
    else
        transform = CGAffineTransformCreateCopy(self._transformFromLayer);
    transform.tx -= CGRectGetMinX(self._backingStoreFrame);
    transform.ty -= CGRectGetMinY(self._backingStoreFrame);
    CGContextSaveGState(self._context);
    CGContextConcatCTM(self._context, transform);
    if (USE_BUFFER)
    {
        self._context.drawImage(self._contents.buffer, CGRectGetMinX(self._bounds), CGRectGetMinY(self._bounds));
    }
    else
        objj_msgSend(self, "drawInContext:", self._context);
    CGContextRestoreGState(self._context);
}
,["void"]), new objj_method(sel_getUid("display"), function $CALayer__display(self, _cmd)
{
    if (!self._context)
    {
        self._context = CGBitmapGraphicsContextCreate();
        self._DOMContentsElement = self._context.DOMElement;
        self._DOMContentsElement.style.zIndex = -100;
        self._DOMContentsElement.style.overflow = "hidden";
        self._DOMContentsElement.style.position = "absolute";
        self._DOMContentsElement.style.visibility = "visible";
        self._DOMContentsElement.width = ROUND(CGRectGetWidth(self._backingStoreFrame));
        self._DOMContentsElement.height = ROUND(CGRectGetHeight(self._backingStoreFrame));
        self._DOMContentsElement.style.top = "0px";
        self._DOMContentsElement.style.left = "0px";
        self._DOMContentsElement.style.width = ROUND(CGRectGetWidth(self._backingStoreFrame)) + "px";
        self._DOMContentsElement.style.height = ROUND(CGRectGetHeight(self._backingStoreFrame)) + "px";
        self._DOMElement.appendChild(self._DOMContentsElement);
    }
    if (USE_BUFFER)
    {
        if (self._delegateRespondsToDisplayLayerSelector)
            return objj_msgSend(self._delegate, "displayInLayer:", self);
        if (CGRectGetWidth(self._backingStoreFrame) == 0.0 || CGRectGetHeight(self._backingStoreFrame) == 0.0)
            return;
        if (!self._contents)
            self._contents = CABackingStoreCreate();
        CABackingStoreSetSize(self._contents, self._bounds.size);
        objj_msgSend(self, "drawInContext:", CABackingStoreGetContext(self._contents));
    }
    objj_msgSend(self, "composite");
}
,["void"]), new objj_method(sel_getUid("drawInContext:"), function $CALayer__drawInContext_(self, _cmd, aContext)
{
    if (self._backgroundColor)
    {
        CGContextSetFillColor(aContext, self._backgroundColor);
        CGContextFillRect(aContext, self._bounds);
    }
    if (self._delegateRespondsToDrawLayerInContextSelector)
        objj_msgSend(self._delegate, "drawLayer:inContext:", self, aContext);
}
,["void","CGContext"]), new objj_method(sel_getUid("opacity"), function $CALayer__opacity(self, _cmd)
{
    return self._opacity;
}
,["float"]), new objj_method(sel_getUid("setOpacity:"), function $CALayer__setOpacity_(self, _cmd, anOpacity)
{
    if (self._opacity == anOpacity)
        return;
    self._opacity = anOpacity;
    self._DOMElement.style.opacity = anOpacity;
    self._DOMElement.style.filter = "alpha(opacity=" + anOpacity * 100 + ")";
}
,["void","float"]), new objj_method(sel_getUid("setHidden:"), function $CALayer__setHidden_(self, _cmd, isHidden)
{
    self._isHidden = isHidden;
    self._DOMElement.style.display = isHidden ? "none" : "block";
}
,["void","BOOL"]), new objj_method(sel_getUid("hidden"), function $CALayer__hidden(self, _cmd)
{
    return self._isHidden;
}
,["BOOL"]), new objj_method(sel_getUid("isHidden"), function $CALayer__isHidden(self, _cmd)
{
    return self._isHidden;
}
,["BOOL"]), new objj_method(sel_getUid("setMasksToBounds:"), function $CALayer__setMasksToBounds_(self, _cmd, masksToBounds)
{
    if (self._masksToBounds == masksToBounds)
        return;
    self._masksToBounds = masksToBounds;
    self._DOMElement.style.overflow = self._masksToBounds ? "hidden" : "visible";
}
,["void","BOOL"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CALayer__setBackgroundColor_(self, _cmd, aColor)
{
    self._backgroundColor = aColor;
    objj_msgSend(self, "setNeedsDisplay");
}
,["void","CPColor"]), new objj_method(sel_getUid("backgroundColor"), function $CALayer__backgroundColor(self, _cmd)
{
    return self._backgroundColor;
}
,["CPColor"]), new objj_method(sel_getUid("sublayers"), function $CALayer__sublayers(self, _cmd)
{
    return self._sublayers;
}
,["CPArray"]), new objj_method(sel_getUid("superlayer"), function $CALayer__superlayer(self, _cmd)
{
    return self._superlayer;
}
,["CALayer"]), new objj_method(sel_getUid("addSublayer:"), function $CALayer__addSublayer_(self, _cmd, aLayer)
{
    objj_msgSend(self, "insertSublayer:atIndex:", aLayer, self._sublayers.length);
}
,["void","CALayer"]), new objj_method(sel_getUid("removeFromSuperlayer"), function $CALayer__removeFromSuperlayer(self, _cmd)
{
    if (self._owningView)
        objj_msgSend(self._owningView, "setLayer:", nil);
    if (!self._superlayer)
        return;
    self._superlayer._DOMElement.removeChild(self._DOMElement);
    objj_msgSend(self._superlayer._sublayers, "removeObject:", self);
    self._superlayer = nil;
}
,["void"]), new objj_method(sel_getUid("insertSublayer:atIndex:"), function $CALayer__insertSublayer_atIndex_(self, _cmd, aLayer, anIndex)
{
    if (!aLayer)
        return;
    var superlayer = objj_msgSend(aLayer, "superlayer");
    if (superlayer == self)
    {
        var index = objj_msgSend(self._sublayers, "indexOfObjectIdenticalTo:", aLayer);
        if (index == anIndex)
            return;
        objj_msgSend(self._sublayers, "removeObjectAtIndex:", index);
        if (index < anIndex)
            --anIndex;
    }
    else if (superlayer != nil)
        objj_msgSend(aLayer, "removeFromSuperlayer");
    if (self._DOMContentsElement && aLayer._zPosition > self._DOMContentsElement.style.zIndex)
        self._DOMContentsElement.style.zIndex -= 100.0;
    objj_msgSend(self._sublayers, "insertObject:atIndex:", aLayer, anIndex);
    if (anIndex >= self._sublayers.length - 1)
        self._DOMElement.appendChild(aLayer._DOMElement);
    else
        self._DOMElement.insertBefore(aLayer._DOMElement, self._sublayers[anIndex + 1]._DOMElement);
    aLayer._superlayer = self;
    if (self != superlayer)
        _CALayerRecalculateGeometry(aLayer, 0xFFFFFFF);
}
,["void","CALayer","unsigned"]), new objj_method(sel_getUid("insertSublayer:below:"), function $CALayer__insertSublayer_below_(self, _cmd, aLayer, aSublayer)
{
    var index = aSublayer ? objj_msgSend(self._sublayers, "indexOfObjectIdenticalTo:", aSublayer) : 0;
    objj_msgSend(self, "insertSublayer:atIndex:", aLayer, index == CPNotFound ? self._sublayers.length : index);
}
,["void","CALayer","CALayer"]), new objj_method(sel_getUid("insertSublayer:above:"), function $CALayer__insertSublayer_above_(self, _cmd, aLayer, aSublayer)
{
    var index = aSublayer ? objj_msgSend(self._sublayers, "indexOfObjectIdenticalTo:", aSublayer) : self._sublayers.length;
    if (index == CPNotFound)
        objj_msgSend(CPException, "raise:reason:", "CALayerNotFoundException", "aSublayer is not a sublayer of this layer");
    objj_msgSend(self._sublayers, "insertObject:atIndex:", aLayer, index == CPNotFound ? self._sublayers.length : index + 1);
}
,["void","CALayer","CALayer"]), new objj_method(sel_getUid("replaceSublayer:with:"), function $CALayer__replaceSublayer_with_(self, _cmd, aSublayer, aLayer)
{
    if (aSublayer == aLayer)
        return;
    if (aSublayer._superlayer != self)
    {
        CPLog.warn("Attempt to replace a sublayer (%s) which is not in the sublayers of the receiver (%s).", objj_msgSend(aSublayer, "description"), objj_msgSend(self, "description"));
        return;
    }
    if (self._DOMContentsElement && aLayer._zPosition > self._DOMContentsElement.style.zIndex)
        self._DOMContentsElement.style.zIndex -= 100.0;
    objj_msgSend(self._sublayers, "replaceObjectAtIndex:withObject:", objj_msgSend(self._sublayers, "indexOfObjectIdenticalTo:", aSublayer), aLayer);
    self._DOMElement.replaceChild(aSublayer._DOMElement, aLayer._DOMElement);
}
,["void","CALayer","CALayer"]), new objj_method(sel_getUid("registerRunLoopUpdateWithMask:"), function $CALayer__registerRunLoopUpdateWithMask_(self, _cmd, anUpdateMask)
{
    if (CALayerRegisteredRunLoopUpdates == nil)
    {
        CALayerRegisteredRunLoopUpdates = {};
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "performSelector:target:argument:order:modes:", sel_getUid("runLoopUpdateLayers"), CALayer, nil, 0, [CPDefaultRunLoopMode]);
    }
    self._runLoopUpdateMask |= anUpdateMask;
    CALayerRegisteredRunLoopUpdates[objj_msgSend(self, "UID")] = self;
}
,["void","unsigned"]), new objj_method(sel_getUid("setNeedsComposite"), function $CALayer__setNeedsComposite(self, _cmd)
{
    objj_msgSend(self, "registerRunLoopUpdateWithMask:", CALayerCompositeUpdateMask);
}
,["void"]), new objj_method(sel_getUid("setNeedsDisplay"), function $CALayer__setNeedsDisplay(self, _cmd)
{
    objj_msgSend(self, "registerRunLoopUpdateWithMask:", CALayerDisplayUpdateMask);
}
,["void"]), new objj_method(sel_getUid("setNeedsDisplayOnBoundsChange:"), function $CALayer__setNeedsDisplayOnBoundsChange_(self, _cmd, needsDisplayOnBoundsChange)
{
    self._needsDisplayOnBoundsChange = needsDisplayOnBoundsChange;
}
,["void","BOOL"]), new objj_method(sel_getUid("needsDisplayOnBoundsChange"), function $CALayer__needsDisplayOnBoundsChange(self, _cmd)
{
    return self._needsDisplayOnBoundsChange;
}
,["BOOL"]), new objj_method(sel_getUid("setNeedsDisplayInRect:"), function $CALayer__setNeedsDisplayInRect_(self, _cmd, aRect)
{
    objj_msgSend(self, "display");
}
,["void","CGRect"]), new objj_method(sel_getUid("convertPoint:fromLayer:"), function $CALayer__convertPoint_fromLayer_(self, _cmd, aPoint, aLayer)
{
    return CGPointApplyAffineTransform(aPoint, _CALayerGetTransform(aLayer, self));
}
,["CGPoint","CGPoint","CALayer"]), new objj_method(sel_getUid("convertPoint:toLayer:"), function $CALayer__convertPoint_toLayer_(self, _cmd, aPoint, aLayer)
{
    return CGPointApplyAffineTransform(aPoint, _CALayerGetTransform(self, aLayer));
}
,["CGPoint","CGPoint","CALayer"]), new objj_method(sel_getUid("convertRect:fromLayer:"), function $CALayer__convertRect_fromLayer_(self, _cmd, aRect, aLayer)
{
    return CGRectApplyAffineTransform(aRect, _CALayerGetTransform(aLayer, self));
}
,["CGRect","CGRect","CALayer"]), new objj_method(sel_getUid("convertRect:toLayer:"), function $CALayer__convertRect_toLayer_(self, _cmd, aRect, aLayer)
{
    return CGRectApplyAffineTransform(aRect, _CALayerGetTransform(self, aLayer));
}
,["CGRect","CGRect","CALayer"]), new objj_method(sel_getUid("containsPoint:"), function $CALayer__containsPoint_(self, _cmd, aPoint)
{
    return CGRectContainsPoint(self._bounds, aPoint);
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("hitTest:"), function $CALayer__hitTest_(self, _cmd, aPoint)
{
    if (self._isHidden)
        return nil;
    var point = CGPointApplyAffineTransform(aPoint, self._transformToLayer);
    if (!CGRectContainsPoint(self._bounds, point))
        return nil;
    var layer = nil,
        index = self._sublayers.length;
    while (index--)
        if (layer = objj_msgSend(self._sublayers[index], "hitTest:", point))
            return layer;
    return self;
}
,["CALayer","CGPoint"]), new objj_method(sel_getUid("setDelegate:"), function $CALayer__setDelegate_(self, _cmd, aDelegate)
{
    if (self._delegate == aDelegate)
        return;
    self._delegate = aDelegate;
    self._delegateRespondsToDisplayLayerSelector = objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("displayLayer:"));
    self._delegateRespondsToDrawLayerInContextSelector = objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("drawLayer:inContext:"));
    if (self._delegateRespondsToDisplayLayerSelector || self._delegateRespondsToDrawLayerInContextSelector)
        objj_msgSend(self, "setNeedsDisplay");
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CALayer__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("_setOwningView:"), function $CALayer___setOwningView_(self, _cmd, anOwningView)
{
    self._owningView = anOwningView;
    if (self._owningView)
    {
        self._owningView = anOwningView;
        self._bounds.size = CGSizeMakeCopy(objj_msgSend(self._owningView, "bounds").size);
        self._position = CGPointMake(CGRectGetWidth(self._bounds) * self._anchorPoint.x, CGRectGetHeight(self._bounds) * self._anchorPoint.y);
    }
    _CALayerRecalculateGeometry(self, CALayerGeometryPositionMask | CALayerGeometryBoundsMask);
}
,["void","CPView"]), new objj_method(sel_getUid("_owningViewBoundsChanged"), function $CALayer___owningViewBoundsChanged(self, _cmd)
{
    self._bounds.size = CGSizeMakeCopy(objj_msgSend(self._owningView, "bounds").size);
    self._position = CGPointMake(CGRectGetWidth(self._bounds) * self._anchorPoint.x, CGRectGetHeight(self._bounds) * self._anchorPoint.y);
    _CALayerRecalculateGeometry(self, CALayerGeometryPositionMask | CALayerGeometryBoundsMask);
}
,["void"]), new objj_method(sel_getUid("_update"), function $CALayer___update(self, _cmd)
{
    window.loop = true;
    var mask = self._runLoopUpdateMask;
    if (mask & CALayerDOMUpdateMask)
        _CALayerUpdateDOM(self, mask);
    if (mask & CALayerDisplayUpdateMask)
        objj_msgSend(self, "display");
    else if (mask & CALayerFrameSizeUpdateMask || mask & CALayerCompositeUpdateMask)
        objj_msgSend(self, "composite");
    self._runLoopUpdateMask = 0;
    window.loop = false;
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("layer"), function $CALayer__layer(self, _cmd)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "class"), "alloc"), "init");
}
,["CALayer"]), new objj_method(sel_getUid("runLoopUpdateLayers"), function $CALayer__runLoopUpdateLayers(self, _cmd)
{
    for (UID in CALayerRegisteredRunLoopUpdates)
    {
        var layer = CALayerRegisteredRunLoopUpdates[UID],
            mask = layer._runLoopUpdateMask;
        if (mask & CALayerDOMUpdateMask)
            _CALayerUpdateDOM(layer, mask);
        if (mask & CALayerDisplayUpdateMask)
            objj_msgSend(layer, "display");
        else if (mask & CALayerFrameSizeUpdateMask || mask & CALayerCompositeUpdateMask)
            objj_msgSend(layer, "composite");
        layer._runLoopUpdateMask = 0;
    }
    window.loop = false;
    CALayerRegisteredRunLoopUpdates = nil;
}
,["void"])]);
}_CALayerUpdateSublayerTransformForSublayers = function(aLayer)
{
    var bounds = aLayer._bounds,
        anchorPoint = aLayer._anchorPoint,
        translateX = CGRectGetWidth(bounds) * anchorPoint.x,
        translateY = CGRectGetHeight(bounds) * anchorPoint.y;
    aLayer._sublayerTransformForSublayers = CGAffineTransformConcat(CGAffineTransformMakeTranslation(-translateX, -translateY), CGAffineTransformConcat(aLayer._sublayerTransform, CGAffineTransformMakeTranslation(translateX, translateY)));
}
_CALayerUpdateDOM = function(aLayer, aMask)
{
    var DOMElementStyle = aLayer._DOMElement.style;
    if (aMask & CALayerZPositionUpdateMask)
        DOMElementStyle.zIndex = aLayer._zPosition;
    var frame = aLayer._backingStoreFrame;
    if (aMask & CALayerFrameOriginUpdateMask)
    {
        DOMElementStyle.top = ROUND(CGRectGetMinY(frame)) + "px";
        DOMElementStyle.left = ROUND(CGRectGetMinX(frame)) + "px";
    }
    if (aMask & CALayerFrameSizeUpdateMask)
    {
        var width = MAX(0.0, ROUND(CGRectGetWidth(frame))),
            height = MAX(0.0, ROUND(CGRectGetHeight(frame))),
            DOMContentsElement = aLayer._DOMContentsElement;
        DOMElementStyle.width = width + "px";
        DOMElementStyle.height = height + "px";
        if (DOMContentsElement)
        {
            DOMContentsElement.width = width;
            DOMContentsElement.height = height;
            DOMContentsElement.style.width = width + "px";
            DOMContentsElement.style.height = height + "px";
        }
    }
}
_CALayerRecalculateGeometry = function(aLayer, aGeometryChange)
{
    var bounds = aLayer._bounds,
        superlayer = aLayer._superlayer,
        width = CGRectGetWidth(bounds),
        height = CGRectGetHeight(bounds),
        position = aLayer._position,
        anchorPoint = aLayer._anchorPoint,
        affineTransform = aLayer._affineTransform,
        backingStoreFrameSize = CGSizeMakeCopy(aLayer._backingStoreFrame),
        hasCustomBackingStoreFrame = aLayer._hasCustomBackingStoreFrame;
    aLayer._transformFromLayer = CGAffineTransformConcat(CGAffineTransformMakeTranslation(-width * anchorPoint.x - CGRectGetMinX(aLayer._bounds), -height * anchorPoint.y - CGRectGetMinY(aLayer._bounds)), CGAffineTransformConcat(affineTransform, CGAffineTransformMakeTranslation(position.x, position.y)));
    if (superlayer && superlayer._hasSublayerTransform)
    {
        CGAffineTransformConcatTo(aLayer._transformFromLayer, superlayer._sublayerTransformForSublayers, aLayer._transformFromLayer);
    }
    aLayer._transformToLayer = CGAffineTransformInvert(aLayer._transformFromLayer);
    aLayer._frame = nil;
    aLayer._standardBackingStoreFrame = objj_msgSend(aLayer, "convertRect:toLayer:", bounds, nil);
    if (superlayer)
    {
        var bounds = objj_msgSend(superlayer, "bounds"),
            frame = objj_msgSend(superlayer, "convertRect:toLayer:", bounds, nil);
        aLayer._standardBackingStoreFrame.origin.x -= CGRectGetMinX(frame);
        aLayer._standardBackingStoreFrame.origin.y -= CGRectGetMinY(frame);
    }
    var origin = aLayer._standardBackingStoreFrame.origin,
        size = aLayer._standardBackingStoreFrame.size;
    origin.x = FLOOR(origin.x);
    origin.y = FLOOR(origin.y);
    size.width = CEIL(size.width) + 1.0;
    size.height = CEIL(size.height) + 1.0;
    if (!hasCustomBackingStoreFrame)
    {
        var backingStoreFrame = CGRectMakeCopy(aLayer._standardBackingStoreFrame);
        if (ROUND(CGRectGetMinX(backingStoreFrame)) != ROUND(CGRectGetMinX(aLayer._backingStoreFrame)) || ROUND(CGRectGetMinY(backingStoreFrame)) != ROUND(CGRectGetMinY(aLayer._backingStoreFrame)))
            objj_msgSend(aLayer, "registerRunLoopUpdateWithMask:", CALayerFrameOriginUpdateMask);
        if (CGRectGetWidth(backingStoreFrame) != ROUND(CGRectGetWidth(aLayer._backingStoreFrame)) || CGRectGetHeight(backingStoreFrame) != ROUND(CGRectGetHeight(aLayer._backingStoreFrame)))
            objj_msgSend(aLayer, "registerRunLoopUpdateWithMask:", CALayerFrameSizeUpdateMask);
        aLayer._backingStoreFrame = backingStoreFrame;
    }
    if (aGeometryChange & CALayerGeometryBoundsMask && aLayer._needsDisplayOnBoundsChange)
        objj_msgSend(aLayer, "setNeedsDisplay");
    else if (hasCustomBackingStoreFrame || aGeometryChange & ~(CALayerGeometryPositionMask | CALayerGeometryAnchorPointMask))
        objj_msgSend(aLayer, "setNeedsComposite");
    var sublayers = aLayer._sublayers,
        index = 0,
        count = sublayers.length;
    for (; index < count; ++index)
        _CALayerRecalculateGeometry(sublayers[index], aGeometryChange);
}
_CALayerGetTransform = function(fromLayer, toLayer)
{
    var transform = CGAffineTransformMakeIdentity();
    if (fromLayer)
    {
        var layer = fromLayer;
        while (layer && layer != toLayer)
        {
            var transformFromLayer = layer._transformFromLayer;
            CGAffineTransformConcatTo(transform, transformFromLayer, transform);
            layer = layer._superlayer;
        }
        if (layer == toLayer)
            return transform;
    }
    var layers = [],
        layer = toLayer;
    while (layer)
    {
        layers.push(layer);
        layer = layer._superlayer;
    }
    var index = layers.length;
    while (index--)
    {
        var transformToLayer = layers[index]._transformToLayer;
        CGAffineTransformConcatTo(transform, transformToLayer, transform);
    }
    return transform;
}
p;23;CAMediaTimingFunction.jt;3354;@STATIC;1.0;I;21;Foundation/CPObject.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jt;3253;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPString.j", NO);kCAMediaTimingFunctionLinear = "kCAMediaTimingFunctionLinear";
kCAMediaTimingFunctionEaseIn = "kCAMediaTimingFunctionEaseIn";
kCAMediaTimingFunctionEaseOut = "kCAMediaTimingFunctionEaseOut";
kCAMediaTimingFunctionEaseInEaseOut = "kCAMediaTimingFunctionEaseInEaseOut";
var CAMediaNamedTimingFunctions = nil;
{var the_class = objj_allocateClassPair(CPObject, "CAMediaTimingFunction"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_c1x"), new objj_ivar("_c1y"), new objj_ivar("_c2x"), new objj_ivar("_c2y")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithControlPoints::::"), function $CAMediaTimingFunction__initWithControlPoints____(self, _cmd, c1x, c1y, c2x, c2y)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CAMediaTimingFunction").super_class }, "init");
    if (self)
    {
        self._c1x = c1x;
        self._c1y = c1y;
        self._c2x = c2x;
        self._c2y = c2y;
    }
    return self;
}
,["id","float","float","float","float"]), new objj_method(sel_getUid("getControlPointAtIndex:values:"), function $CAMediaTimingFunction__getControlPointAtIndex_values_(self, _cmd, anIndex, reference)
{
    if (anIndex == 0)
    {
        reference[0] = 0;
        reference[1] = 0;
    }
    else if (anIndex == 1)
    {
        reference[0] = self._c1x;
        reference[1] = self._c1y;
    }
    else if (anIndex == 2)
    {
        reference[0] = self._c2x;
        reference[1] = self._c2y;
    }
    else
    {
        reference[0] = 1.0;
        reference[1] = 1.0;
    }
}
,["void","unsigned","float"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("functionWithName:"), function $CAMediaTimingFunction__functionWithName_(self, _cmd, aName)
{
    if (!CAMediaNamedTimingFunctions)
    {
        CAMediaNamedTimingFunctions = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        objj_msgSend(CAMediaNamedTimingFunctions, "setObject:forKey:", objj_msgSend(CAMediaTimingFunction, "functionWithControlPoints::::", 0.0, 0.0, 1.0, 1.0), kCAMediaTimingFunctionLinear);
        objj_msgSend(CAMediaNamedTimingFunctions, "setObject:forKey:", objj_msgSend(CAMediaTimingFunction, "functionWithControlPoints::::", 0.42, 0.0, 1.0, 1.0), kCAMediaTimingFunctionEaseIn);
        objj_msgSend(CAMediaNamedTimingFunctions, "setObject:forKey:", objj_msgSend(CAMediaTimingFunction, "functionWithControlPoints::::", 0.0, 0.0, 0.58, 1.0), kCAMediaTimingFunctionEaseOut);
        objj_msgSend(CAMediaNamedTimingFunctions, "setObject:forKey:", objj_msgSend(CAMediaTimingFunction, "functionWithControlPoints::::", 0.42, 0.0, 0.58, 1.0), kCAMediaTimingFunctionEaseInEaseOut);
    }
    return objj_msgSend(CAMediaNamedTimingFunctions, "objectForKey:", aName);
}
,["id","CPString"]), new objj_method(sel_getUid("functionWithControlPoints::::"), function $CAMediaTimingFunction__functionWithControlPoints____(self, _cmd, c1x, c1y, c2x, c2y)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithControlPoints::::", c1x, c1y, c2x, c2y);
}
,["id","float","float","float","float"])]);
}p;19;CGAffineTransform.jt;5149;@STATIC;1.0;i;12;CGGeometry.jt;5113;objj_executeFile("CGGeometry.j", YES);CGAffineTransformMake = function(a, b, c, d, tx, ty)
{
    return {a: a, b: b, c: c, d: d, tx: tx, ty: ty};
}
CGAffineTransformMakeIdentity = function()
{
    return {a: 1.0, b: 0.0, c: 0.0, d: 1.0, tx: 0.0, ty: 0.0};
}
CGAffineTransformMakeCopy = function(anAffineTransform)
{
    return {a: anAffineTransform.a, b: anAffineTransform.b, c: anAffineTransform.c, d: anAffineTransform.d, tx: anAffineTransform.tx, ty: anAffineTransform.ty};
}
CGAffineTransformMakeScale = function(sx, sy)
{
    return {a: sx, b: 0.0, c: 0.0, d: sy, tx: 0.0, ty: 0.0};
}
CGAffineTransformMakeTranslation = function(tx, ty)
{
    return {a: 1.0, b: 0.0, c: 0.0, d: 1.0, tx: tx, ty: ty};
}
CGAffineTransformTranslate = function(aTransform, tx, ty)
{
    return CGAffineTransformMake(aTransform.a, aTransform.b, aTransform.c, aTransform.d, aTransform.tx + aTransform.a * tx + aTransform.c * ty, aTransform.ty + aTransform.b * tx + aTransform.d * ty);
}
CGAffineTransformScale = function(aTransform, sx, sy)
{
    return CGAffineTransformMake(aTransform.a * sx, aTransform.b * sx, aTransform.c * sy, aTransform.d * sy, aTransform.tx, aTransform.ty);
}
CGAffineTransformConcat = function(lhs, rhs)
{
    return CGAffineTransformMake(lhs.a * rhs.a + lhs.b * rhs.c, lhs.a * rhs.b + lhs.b * rhs.d, lhs.c * rhs.a + lhs.d * rhs.c, lhs.c * rhs.b + lhs.d * rhs.d, lhs.tx * rhs.a + lhs.ty * rhs.c + rhs.tx, lhs.tx * rhs.b + lhs.ty * rhs.d + rhs.ty);
}
CGAffineTransformConcatTo = function(lhs, rhs, to)
{
    var tx = lhs.tx * rhs.a + lhs.ty * rhs.c + rhs.tx;
    to.ty = lhs.tx * rhs.b + lhs.ty * rhs.d + rhs.ty;
    to.tx = tx;
    var a = lhs.a * rhs.a + lhs.b * rhs.c,
        b = lhs.a * rhs.b + lhs.b * rhs.d,
        c = lhs.c * rhs.a + lhs.d * rhs.c;
    to.d = lhs.c * rhs.b + lhs.d * rhs.d;
    to.a = a;
    to.b = b;
    to.c = c;
}
CGPointApplyAffineTransform = function(aPoint, aTransform)
{
    return {x: aPoint.x * aTransform.a + aPoint.y * aTransform.c + aTransform.tx, y: aPoint.x * aTransform.b + aPoint.y * aTransform.d + aTransform.ty};
}
CGSizeApplyAffineTransform = function(aSize, aTransform)
{
    return {width: aSize.width * aTransform.a + aSize.height * aTransform.c, height: aSize.width * aTransform.b + aSize.height * aTransform.d};
}
CGAffineTransformIsIdentity = function(aTransform)
{
    return aTransform.a === 1.0 && aTransform.b === 0.0 && aTransform.c === 0.0 && aTransform.d === 1.0 && aTransform.tx === 0.0 && aTransform.ty === 0.0;
}
CGAffineTransformEqualToTransform = function(lhs, rhs)
{
    return lhs.a === rhs.a && lhs.b === rhs.b && lhs.c === rhs.c && lhs.d === rhs.d && lhs.tx === rhs.tx && lhs.ty === rhs.ty;
}
CGStringCreateWithCGAffineTransform = function(aTransform)
{
    return " [[ " + aTransform.a + ", " + aTransform.b + ", 0 ], [ " + aTransform.c + ", " + aTransform.d + ", 0 ], [ " + aTransform.tx + ", " + aTransform.ty + ", 1]]";
}
CGAffineTransformCreateCopy = CGAffineTransformMakeCopy;
CGAffineTransformMakeRotation = function(anAngle)
{
    var sin = SIN(anAngle),
        cos = COS(anAngle);
    return CGAffineTransformMake(cos, sin, -sin, cos, 0.0, 0.0);
}
CGAffineTransformRotate = function(aTransform, anAngle)
{
    var sin = SIN(anAngle),
        cos = COS(anAngle);
    return {a: aTransform.a * cos + aTransform.c * sin, b: aTransform.b * cos + aTransform.d * sin, c: aTransform.c * cos - aTransform.a * sin, d: aTransform.d * cos - aTransform.b * sin, tx: aTransform.tx, ty: aTransform.ty};
}
CGAffineTransformInvert = function(aTransform)
{
    var determinant = 1 / (aTransform.a * aTransform.d - aTransform.b * aTransform.c);
    return {a: determinant * aTransform.d, b: -determinant * aTransform.b, c: -determinant * aTransform.c, d: determinant * aTransform.a, tx: determinant * (aTransform.c * aTransform.ty - aTransform.d * aTransform.tx), ty: determinant * (aTransform.b * aTransform.tx - aTransform.a * aTransform.ty)};
}
CGRectApplyAffineTransform = function(aRect, anAffineTransform)
{
    var top = CGRectGetMinY(aRect),
        left = CGRectGetMinX(aRect),
        right = CGRectGetMaxX(aRect),
        bottom = CGRectGetMaxY(aRect),
        topLeft = CGPointApplyAffineTransform(CGPointMake(left, top), anAffineTransform),
        topRight = CGPointApplyAffineTransform(CGPointMake(right, top), anAffineTransform),
        bottomLeft = CGPointApplyAffineTransform(CGPointMake(left, bottom), anAffineTransform),
        bottomRight = CGPointApplyAffineTransform(CGPointMake(right, bottom), anAffineTransform),
        minX = MIN(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x),
        maxX = MAX(topLeft.x, topRight.x, bottomLeft.x, bottomRight.x),
        minY = MIN(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y),
        maxY = MAX(topLeft.y, topRight.y, bottomLeft.y, bottomRight.y);
    return CGRectMake(minX, minY, maxX - minX, maxY - minY);
}
CPStringFromCGAffineTransform = function(anAffineTransform)
{
    return '{' + anAffineTransform.a + ", " + anAffineTransform.b + ", " + anAffineTransform.c + ", " + anAffineTransform.d + ", " + anAffineTransform.tx + ", " + anAffineTransform.ty + '}';
}
p;9;CGColor.jt;3229;@STATIC;1.0;i;14;CGColorSpace.jt;3191;objj_executeFile("CGColorSpace.j", YES);var CFTypeGlobalCount = 0;
CFHashCode = function(aCFObject)
{
    if (!aCFObject.hash)
        aCFObject.hash = ++CFTypeGlobalCount;
    return aCFObject;
}
kCGColorWhite = "kCGColorWhite";
kCGColorBlack = "kCGColorBlack";
kCGColorClear = "kCGColorClear";
var _CGColorMap = {};
CGColorGetConstantColor = function(aColorName)
{
    alert("FIX ME");
}
CGColorRetain = function(aColor)
{
    return aColor;
}
CGColorRelease = function()
{
}
CGColorCreate = function(aColorSpace, components)
{
    if (!aColorSpace || !components)
        return NULL;
    var components = components.slice();
    CGColorSpaceStandardizeComponents(aColorSpace, components);
    var UID = CFHashCode(aColorSpace) + components.join("");
    if (_CGColorMap[UID])
        return _CGColorMap[UID];
    return _CGColorMap[UID] = {colorspace: aColorSpace, pattern: NULL, components: components};
}
CGColorCreateCopy = function(aColor)
{
    return aColor;
}
CGColorCreateGenericGray = function(gray, alpha)
{
    return CGColorCreate(CGColorSpaceCreateDeviceRGB(), [gray, gray, gray, alpha]);
}
CGColorCreateGenericRGB = function(red, green, blue, alpha)
{
    return CGColorCreate(CGColorSpaceCreateDeviceRGB(), [red, green, blue, alpha]);
}
CGColorCreateGenericCMYK = function(cyan, magenta, yellow, black, alpha)
{
    return CGColorCreate(CGColorSpaceCreateDeviceCMYK(), [cyan, magenta, yellow, black, alpha]);
}
CGColorCreateCopyWithAlpha = function(aColor, anAlpha)
{
    if (!aColor)
        return aColor;
    var components = aColor.components.slice();
    if (anAlpha == components[components.length - 1])
        return aColor;
    components[components.length - 1] = anAlpha;
    if (aColor.pattern)
        return CGColorCreateWithPattern(aColor.colorspace, aColor.pattern, components);
    else
        return CGColorCreate(aColor.colorspace, components);
}
CGColorCreateWithPattern = function(aColorSpace, aPattern, components)
{
    if (!aColorSpace || !aPattern || !components)
        return NULL;
    return {colorspace: aColorSpace, pattern: aPattern, components: components.slice()};
}
CGColorEqualToColor = function(lhs, rhs)
{
    if (lhs == rhs)
        return true;
    if (!lhs || !rhs)
        return false;
    var lhsComponents = lhs.components,
        rhsComponents = rhs.components,
        lhsComponentCount = lhsComponents.length;
    if (lhsComponentCount != rhsComponents.length)
        return false;
    while (lhsComponentCount--)
        if (lhsComponents[lhsComponentCount] != rhsComponents[lhsComponentCount])
            return false;
    if (lhs.pattern != rhs.pattern)
        return false;
    if (CGColorSpaceEqualToColorSpace(lhs.colorspace, rhs.colorspace))
        return false;
    return true;
}
CGColorGetAlpha = function(aColor)
{
    var components = aColor.components;
    return components[components.length - 1];
}
CGColorGetColorSpace = function(aColor)
{
    return aColor.colorspace;
}
CGColorGetComponents = function(aColor)
{
    return aColor.components;
}
CGColorGetNumberOfComponents = function(aColor)
{
    return aColor.components.length;
}
CGColorGetPattern = function(aColor)
{
    return aColor.pattern;
}
p;14;CGColorSpace.jt;4886;@STATIC;1.0;t;4867;kCGColorSpaceModelUnknown = -1;
kCGColorSpaceModelMonochrome = 0;
kCGColorSpaceModelRGB = 1;
kCGColorSpaceModelCMYK = 2;
kCGColorSpaceModelLab = 3;
kCGColorSpaceModelDeviceN = 4;
kCGColorSpaceModelIndexed = 5;
kCGColorSpaceModelPattern = 6;
kCGColorSpaceGenericGray = "CGColorSpaceGenericGray";
kCGColorSpaceGenericRGB = "CGColorSpaceGenericRGB";
kCGColorSpaceGenericCMYK = "CGColorSpaceGenericCMYK";
kCGColorSpaceGenericRGBLinear = "CGColorSpaceGenericRGBLinear";
kCGColorSpaceGenericRGBHDR = "CGColorSpaceGenericRGBHDR";
kCGColorSpaceAdobeRGB1998 = "CGColorSpaceAdobeRGB1998";
kCGColorSpaceSRGB = "CGColorSpaceSRGB";
var _CGNamedColorSpaces = {};
CGColorSpaceCreateCalibratedGray = function(aWhitePoint, aBlackPoint, gamma)
{
    return {model: kCGColorSpaceModelMonochrome, count: 1, base: NULL};
}
CGColorSpaceCreateCalibratedRGB = function(aWhitePoint, aBlackPoint, gamma)
{
    return {model: kCGColorSpaceModelRGB, count: 1, base: NULL};
}
CGColorSpaceCreateICCBased = function(aComponentCount, range, profile, alternate)
{
    return NULL;
}
CGColorSpaceCreateLab = function(aWhitePoint, aBlackPoint, aRange)
{
    return NULL;
}
CGColorSpaceCreateDeviceCMYK = function()
{
    return CGColorSpaceCreateWithName(kCGColorSpaceGenericCMYK);
}
CGColorSpaceCreateDeviceGray = function()
{
    return CGColorSpaceCreateWithName(kCGColorSpaceGenericGray);
}
CGColorSpaceCreateDeviceRGB = function()
{
    return CGColorSpaceCreateWithName(kCGColorSpaceGenericRGB);
}
CGColorSpaceCreateWithPlatformColorSpace = function()
{
    return NULL;
}
CGColorSpaceCreateIndexed = function(aBaseColorSpace, lastIndex, colorTable)
{
    return NULL;
}
CGColorSpaceCreatePattern = function(aBaseColorSpace)
{
    if (aBaseColorSpace)
        return {model: kCGColorSpaceModelPattern, count: aBaseColorSpace.count, base: aBaseColorSpace};
    return {model: kCGColorSpaceModelPattern, count: 0, base: NULL};
}
CGColorSpaceCreateWithName = function(aName)
{
    var colorSpace = _CGNamedColorSpaces[aName];
    if (colorSpace)
        return colorSpace;
    switch(aName) {
    case kCGColorSpaceGenericGray:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelMonochrome, count: 1, base: NULL};
    case kCGColorSpaceGenericRGB:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelRGB, count: 3, base: NULL};
    case kCGColorSpaceGenericCMYK:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelCMYK, count: 4, base: NULL};
    case kCGColorSpaceGenericRGBLinear:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelRGB, count: 3, base: NULL};
    case kCGColorSpaceGenericRGBHDR:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelRGB, count: 3, base: NULL};
    case kCGColorSpaceAdobeRGB1998:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelRGB, count: 3, base: NULL};
    case kCGColorSpaceSRGB:
        return _CGNamedColorSpaces[aName] = {model: kCGColorSpaceModelRGB, count: 3, base: NULL};
    }
    return NULL;
}
CGColorSpaceCopyICCProfile = function(aColorSpace)
{
    return NULL;
}
CGColorSpaceGetNumberOfComponents = function(aColorSpace)
{
    return aColorSpace.count;
}
CGColorSpaceGetTypeID = function(aColorSpace)
{
}
CGColorSpaceGetModel = function(aColorSpace)
{
    return aColorSpace.model;
}
CGColorSpaceGetBaseColorSpace = function(aColorSpace)
{
}
CGColorSpaceGetColorTableCount = function(aColorSpace)
{
}
CGColorSpaceGetColorTable = function(aColorSpace)
{
}
CGColorSpaceRelease = function(aColorSpace)
{
}
CGColorSpaceRetain = function(aColorSpace)
{
    return aColorSpace;
}
CGColorSpaceStandardizeComponents = function(aColorSpace, components)
{
    var count = aColorSpace.count;
{
    if (count > components.length)
    {
        components[count] = 1;
        return;
    }
    var component = components[count];
    if (component < 0)
        components[count] = 0;
    else if (component > 1)
        components[count] = 1;
    else
        components[count] = ROUND(component * 1000) / 1000;
}
    if (aColorSpace.base)
        aColorSpace = aColorSpace.base;
    switch(aColorSpace.model) {
    case kCGColorSpaceModelMonochrome:
    case kCGColorSpaceModelRGB:
    case kCGColorSpaceModelCMYK:
    case kCGColorSpaceModelDeviceN:
        while (count--)
        {
            if (count > components.length)
            {
                components[count] = 1;
                return;
            }
            var component = components[count];
            if (component < 0)
                components[count] = 0;
            else if (component > 1)
                components[count] = 1;
            else
                components[count] = ROUND(component * 255) / 255;
        }
        break;
    case kCGColorSpaceModelIndexed:
    case kCGColorSpaceModelLab:
    case kCGColorSpaceModelPattern:
        break;
    }
}
p;11;CGContext.jt;37039;@STATIC;1.0;i;19;CGAffineTransform.ji;17;CPCompatibility.ji;12;CGGeometry.ji;8;CGPath.jt;36944;objj_executeFile("CGAffineTransform.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CGPath.j", YES);kCGLineCapButt = 0;
kCGLineCapRound = 1;
kCGLineCapSquare = 2;
kCGLineJoinMiter = 0;
kCGLineJoinRound = 1;
kCGLineJoinBevel = 2;
kCGPathFill = 0;
kCGPathEOFill = 1;
kCGPathStroke = 2;
kCGPathFillStroke = 3;
kCGPathEOFillStroke = 4;
kCGBlendModeNormal = 0;
kCGBlendModeMultiply = 1;
kCGBlendModeScreen = 2;
kCGBlendModeOverlay = 3;
kCGBlendModeDarken = 4;
kCGBlendModeLighten = 5;
kCGBlendModeColorDodge = 6;
kCGBlendModeColorBurn = 7;
kCGBlendModeSoftLight = 8;
kCGBlendModeHardLight = 9;
kCGBlendModeDifference = 10;
kCGBlendModeExclusion = 11;
kCGBlendModeHue = 12;
kCGBlendModeSaturation = 13;
kCGBlendModeColor = 14;
kCGBlendModeLuminosity = 15;
kCGBlendModeClear = 16;
kCGBlendModeCopy = 17;
kCGBlendModeSourceIn = 18;
kCGBlendModeSourceOut = 19;
kCGBlendModeSourceAtop = 20;
kCGBlendModeDestinationOver = 21;
kCGBlendModeDestinationIn = 22;
kCGBlendModeDestinationOut = 23;
kCGBlendModeDestinationAtop = 24;
kCGBlendModeXOR = 25;
kCGBlendModePlusDarker = 26;
kCGBlendModePlusLighter = 27;
CGContextRelease = function()
{
}
CGContextRetain = function(aContext)
{
    return aContext;
}
if (!CPFeatureIsCompatible(CPHTMLCanvasFeature))
{
CGGStateCreate = function()
    {
        return {alpha: 1.0, strokeStyle: "#000", fillStyle: "#ccc", lineWidth: 1.0, lineJoin: kCGLineJoinMiter, lineCap: kCGLineCapButt, miterLimit: 10.0, globalAlpha: 1.0, blendMode: kCGBlendModeNormal, shadowOffset: CGSizeMakeZero(), shadowBlur: 0.0, shadowColor: NULL, CTM: CGAffineTransformMakeIdentity()};
    }
CGGStateCreateCopy = function(aGState)
    {
        return {alpha: aGState.alpha, strokeStyle: aGState.strokeStyle, fillStyle: aGState.fillStyle, lineWidth: aGState.lineWidth, lineJoin: aGState.lineJoin, lineCap: aGState.lineCap, miterLimit: aGState.miterLimit, globalAlpha: aGState.globalAlpha, blendMode: aGState.blendMode, shadowOffset: CGSizeMakeCopy(aGState.shadowOffset), shadowBlur: aGState.shadowBlur, shadowColor: aGState.shadowColor, CTM: CGAffineTransformMakeCopy(aGState.CTM)};
    }
CGBitmapGraphicsContextCreate = function()
    {
        return {DOMElement: document.createElement("div"), path: NULL, gState: CGGStateCreate(), gStateStack: []};
    }
CGContextSaveGState = function(aContext)
    {
        aContext.gStateStack.push(CGGStateCreateCopy(aContext.gState));
    }
CGContextRestoreGState = function(aContext)
    {
        aContext.gState = aContext.gStateStack.pop();
    }
CGContextSetLineCap = function(aContext, aLineCap)
    {
        aContext.gState.lineCap = aLineCap;
    }
CGContextSetLineDash = function(aContext, aPhase, someDashes)
    {
        aContext.gState.lineDashes = someDashes;
        aContext.gState.lineDashesPhase = aPhase;
    }
CGContextSetLineJoin = function(aContext, aLineJoin)
    {
        aContext.gState.lineJoin = aLineJoin;
    }
CGContextSetLineWidth = function(aContext, aLineWidth)
    {
        aContext.gState.lineWidth = aLineWidth;
    }
CGContextSetMiterLimit = function(aContext, aMiterLimit)
    {
        aContext.gState.miterLimit = aMiterLimit;
    }
CGContextSetBlendMode = function(aContext, aBlendMode)
    {
        aContext.gState.blendMode = aBlendMode;
    }
CGContextAddArc = function(aContext, x, y, radius, startAngle, endAngle, clockwise)
    {
        CGPathAddArc(aContext.path, aContext.gState.CTM, x, y, radius, startAngle, endAngle, clockwise);
    }
CGContextAddArcToPoint = function(aContext, x1, y1, x2, y2, radius)
    {
        CGPathAddArcToPoint(aContext.path, aContext.gState.CTM, x1, y1, x2, y2, radius);
    }
CGContextAddCurveToPoint = function(aContext, cp1x, cp1y, cp2x, cp2y, x, y)
    {
        CGPathAddCurveToPoint(aContext.path, aContext.gState.CTM, cp1x, cp1y, cp2x, cp2y, x, y);
    }
CGContextAddLines = function(aContext, points, count)
    {
        CGPathAddLines(aContext.path, aContext.gState.CTM, points, count);
    }
CGContextAddLineToPoint = function(aContext, x, y)
    {
        CGPathAddLineToPoint(aContext.path, aContext.gState.CTM, x, y);
    }
CGContextAddPath = function(aContext, aPath)
    {
        if (!aContext || CGPathIsEmpty(aPath))
            return;
        if (!aContext.path)
            aContext.path = CGPathCreateMutable();
        CGPathAddPath(aContext.path, aContext.gState.CTM, aPath);
    }
CGContextAddQuadCurveToPoint = function(aContext, cpx, cpy, x, y)
    {
        CGPathAddQuadCurveToPoint(aContext.path, aContext.gState.CTM, cpx, cpy, x, y);
    }
CGContextAddRect = function(aContext, aRect)
    {
        CGPathAddRect(aContext.path, aContext.gState.CTM, aRect);
    }
CGContextAddRects = function(aContext, rects, count)
    {
        CGPathAddRects(aContext.path, aContext.gState.CTM, rects, count);
    }
CGContextBeginPath = function(aContext)
    {
        aContext.path = CGPathCreateMutable();
    }
CGContextClosePath = function(aContext)
    {
        CGPathCloseSubpath(aContext.path);
    }
CGContextIsPathEmpty = function(aContext)
    {
        return !aContext.path || CGPathIsEmpty(aContext.path);
    }
CGContextMoveToPoint = function(aContext, x, y)
    {
        if (!aContext.path)
            aContext.path = CGPathCreateMutable();
        CGPathMoveToPoint(aContext.path, aContext.gState.CTM, x, y);
    }
CGContextFillRect = function(aContext, aRect)
    {
        CGContextFillRects(aContext, [aRect], 1);
    }
CGContextFillRects = function(aContext, rects, count)
    {
        if (arguments[2] === undefined)
            var count = rects.length;
        CGContextBeginPath(aContext);
        CGContextAddRects(aContext, rects, count);
        CGContextClosePath(aContext);
        CGContextDrawPath(aContext, kCGPathFill);
    }
CGContextStrokeRect = function(aContext, aRect)
    {
        CGContextBeginPath(aContext);
        CGContextAddRect(aContext, aRect);
        CGContextClosePath(aContext);
        CGContextDrawPath(aContext, kCGPathStroke);
    }
CGContextStrokeRectWithWidth = function(aContext, aRect, aWidth)
    {
        CGContextSaveGState(aContext);
        CGContextSetLineWidth(aContext, aWidth);
        CGContextStrokeRect(aContext, aRect);
        CGContextRestoreGState(aContext);
    }
CGContextConcatCTM = function(aContext, aTransform)
    {
        var CTM = aContext.gState.CTM;
        CGAffineTransformConcatTo(CTM, aTransform, CTM);
    }
CGContextGetCTM = function(aContext)
    {
        return aContext.gState.CTM;
    }
CGContextRotateCTM = function(aContext, anAngle)
    {
        var gState = aContext.gState;
        gState.CTM = CGAffineTransformRotate(gState.CTM, anAngle);
    }
CGContextScaleCTM = function(aContext, sx, sy)
    {
        var gState = aContext.gState;
        gState.CTM = CGAffineTransformScale(gState.CTM, sx, sy);
    }
CGContextTranslateCTM = function(aContext, tx, ty)
    {
        var gState = aContext.gState;
        gState.CTM = CGAffineTransformTranslate(gState.CTM, tx, ty);
    }
CGContextSetShadow = function(aContext, aSize, aBlur)
    {
        var gState = aContext.gState;
        gState.shadowOffset = CGSizeMakeCopy(aSize);
        gState.shadowBlur = aBlur;
        gState.shadowColor = objj_msgSend(CPColor, "shadowColor");
    }
CGContextSetShadowWithColor = function(aContext, aSize, aBlur, aColor)
    {
        var gState = aContext.gState;
        gState.shadowOffset = CGSizeMakeCopy(aSize);
        gState.shadowBlur = aBlur;
        gState.shadowColor = aColor;
    }
CGContextSetAlpha = function(aContext, anAlpha)
    {
        aContext.gState.alpha = MAX(MIN(anAlpha, 1.0), 0.0);
    }
}CGContextEOFillPath = function(aContext)
{
    CGContextDrawPath(aContext, kCGPathEOFill);
}
CGContextFillPath = function(aContext)
{
    CGContextDrawPath(aContext, kCGPathFill);
    CGContextClosePath(aContext);
}
CGContextStrokeRectWithWidth = function(aContext, aRect, aWidth)
{
    CGContextSaveGState(aContext);
    CGContextSetLineWidth(aContext, aWidth);
    CGContextStrokeRect(aContext, aRect);
    CGContextRestoreGState(aContext);
}
var KAPPA = 4.0 * ((SQRT2 - 1.0) / 3.0);
CGContextAddEllipseInRect = function(aContext, aRect)
{
    CGContextBeginPath(aContext);
    CGContextAddPath(aContext, CGPathWithEllipseInRect(aRect));
    CGContextClosePath(aContext);
}
CGContextFillEllipseInRect = function(aContext, aRect)
{
    CGContextBeginPath(aContext);
    CGContextAddEllipseInRect(aContext, aRect);
    CGContextClosePath(aContext);
    CGContextFillPath(aContext);
}
CGContextStrokeEllipseInRect = function(aContext, aRect)
{
    CGContextBeginPath(aContext);
    CGContextAddEllipseInRect(aContext, aRect);
    CGContextClosePath(aContext);
    CGContextStrokePath(aContext);
}
CGContextStrokePath = function(aContext)
{
    CGContextDrawPath(aContext, kCGPathStroke);
    CGContextClosePath(aContext);
}
CGContextStrokeLineSegments = function(aContext, points, count)
{
    var i = 0;
    if (count === NULL)
        var count = points.length;
    CGContextBeginPath(aContext);
    for (; i < count; i += 2)
    {
        CGContextMoveToPoint(aContext, points[i].x, points[i].y);
        CGContextAddLineToPoint(aContext, points[i + 1].x, points[i + 1].y);
    }
    CGContextStrokePath(aContext);
}
CGContextSetFillColor = function(aContext, aColor)
{
    if (aColor)
        aContext.gState.fillStyle = objj_msgSend(aColor, "cssString");
}
CGContextSetStrokeColor = function(aContext, aColor)
{
    if (aColor)
        aContext.gState.strokeStyle = objj_msgSend(aColor, "cssString");
}
CGContextFillRoundedRectangleInRect = function(aContext, aRect, aRadius, ne, se, sw, nw)
{
    CGContextBeginPath(aContext);
    CGContextAddPath(aContext, CGPathWithRoundedRectangleInRect(aRect, aRadius, aRadius, ne, se, sw, nw));
    CGContextClosePath(aContext);
    CGContextFillPath(aContext);
}
CGContextStrokeRoundedRectangleInRect = function(aContext, aRect, aRadius, ne, se, sw, nw)
{
    CGContextBeginPath(aContext);
    CGContextAddPath(aContext, CGPathWithRoundedRectangleInRect(aRect, aRadius, aRadius, ne, se, sw, nw));
    CGContextClosePath(aContext);
    CGContextStrokePath(aContext);
}
if (CPFeatureIsCompatible(CPHTMLCanvasFeature))
{
    var CANVAS_LINECAP_TABLE = ["butt", "round", "square"],
        CANVAS_LINEJOIN_TABLE = ["miter", "round", "bevel"],
        CANVAS_COMPOSITE_TABLE = ["source-over", "source-over", "source-over", "source-over", "darker", "lighter", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "source-over", "copy", "source-in", "source-out", "source-atop", "destination-over", "destination-in", "destination-out", "destination-atop", "xor", "source-over", "source-over"];
    var hasPath = function(aContext, methodName)
    {
        if (!aContext.hasPath)
            CPLog.error(methodName + ": no current point");
        return aContext.hasPath;
    };
CGContextSaveGState = function(aContext)
    {
        aContext.save();
    }
CGContextRestoreGState = function(aContext)
    {
        aContext.restore();
    }
CGContextSetLineCap = function(aContext, aLineCap)
    {
        aContext.lineCap = CANVAS_LINECAP_TABLE[aLineCap];
    }
CGContextSetLineDash = function(aContext, aPhase, someDashes)
    {
        if (aContext.setLineDash)
        {
            aContext.setLineDash(someDashes);
            aContext.lineDashOffset = aPhase;
        }
        else if (typeof aContext['webkitLineDash'] !== 'undefined')
        {
            aContext.webkitLineDash = someDashes;
            aContext.webkitLineDashOffset = aPhase;
        }
        else if (typeof aContext['mozDash'] !== 'undefined')
        {
            aContext.mozDash = someDashes;
            aContext.mozDashOffset = aPhase;
        }
        else if (someDashes)
        {
            CPLog.warn("CGContextSetLineDash not implemented in this environment.");
        }
    }
CGContextSetLineJoin = function(aContext, aLineJoin)
    {
        aContext.lineJoin = CANVAS_LINEJOIN_TABLE[aLineJoin];
    }
CGContextSetLineWidth = function(aContext, aLineWidth)
    {
        aContext.lineWidth = aLineWidth;
    }
CGContextSetMiterLimit = function(aContext, aMiterLimit)
    {
        aContext.miterLimit = aMiterLimit;
    }
CGContextSetBlendMode = function(aContext, aBlendMode)
    {
        aContext.globalCompositeOperation = CANVAS_COMPOSITE_TABLE[aBlendMode];
    }
CGContextAddArc = function(aContext, x, y, radius, startAngle, endAngle, clockwise)
    {
        aContext.arc(x, y, radius, startAngle, endAngle, !clockwise);
        aContext.hasPath = YES;
    }
CGContextAddArcToPoint = function(aContext, x1, y1, x2, y2, radius)
    {
        if (!hasPath(aContext, "CGContextAddArcToPoint"))
            return;
        aContext.arcTo(x1, y1, x2, y2, radius);
    }
CGContextAddCurveToPoint = function(aContext, cp1x, cp1y, cp2x, cp2y, x, y)
    {
        if (!hasPath(aContext, "CGContextAddCurveToPoint"))
            return;
        aContext.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);
    }
CGContextAddLines = function(aContext, points, count)
    {
        if (count === null || count === undefined)
            count = points.length;
        if (count < 1)
            return;
        aContext.moveTo(points[0].x, points[0].y);
        for (var i = 1; i < count; ++i)
            aContext.lineTo(points[i].x, points[i].y);
        aContext.hasPath = YES;
    }
CGContextAddLineToPoint = function(aContext, x, y)
    {
        if (!hasPath(aContext, "CGContextAddLineToPoint"))
            return;
        aContext.lineTo(x, y);
    }
CGContextAddPath = function(aContext, aPath)
    {
        if (!aContext || CGPathIsEmpty(aPath))
            return;
        if (!aContext.hasPath)
            aContext.beginPath();
        aContext.moveTo(aPath.start.x, aPath.start.y);
        var elements = aPath.elements,
            i = 0,
            count = aPath.count;
        for (; i < count; ++i)
        {
            var element = elements[i],
                type = element.type;
            switch(type) {
            case kCGPathElementMoveToPoint:
                aContext.moveTo(element.x, element.y);
                break;
            case kCGPathElementAddLineToPoint:
                aContext.lineTo(element.x, element.y);
                break;
            case kCGPathElementAddQuadCurveToPoint:
                aContext.quadraticCurveTo(element.cpx, element.cpy, element.x, element.y);
                break;
            case kCGPathElementAddCurveToPoint:
                aContext.bezierCurveTo(element.cp1x, element.cp1y, element.cp2x, element.cp2y, element.x, element.y);
                break;
            case kCGPathElementCloseSubpath:
                aContext.closePath();
                break;
            case kCGPathElementAddArc:
                aContext.arc(element.x, element.y, element.radius, element.startAngle, element.endAngle, element.clockwise);
                break;
            case kCGPathElementAddArcToPoint:
                aContext.arcTo(element.p1x, element.p1y, element.p2x, element.p2y, element.radius);
                break;
            }
        }
        aContext.hasPath = YES;
    }
CGContextAddRect = function(aContext, aRect)
    {
        aContext.rect(CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.hasPath = YES;
    }
CGContextAddQuadCurveToPoint = function(aContext, cpx, cpy, x, y)
    {
        if (!hasPath(aContext, "CGContextAddQuadCurveToPoint"))
            return;
        aContext.quadraticCurveTo(cpx, cpy, x, y);
    }
CGContextAddRects = function(aContext, rects, count)
    {
        if (count === null || count === undefined)
            count = rects.length;
        for (var i = 0; i < count; ++i)
        {
            var rect = rects[i];
            aContext.rect(CGRectGetMinX(rect), CGRectGetMinY(rect), CGRectGetWidth(rect), CGRectGetHeight(rect));
        }
        aContext.hasPath = YES;
    }
CGContextBeginPath = function(aContext)
    {
        aContext.beginPath();
        aContext.hasPath = NO;
    }
CGContextClosePath = function(aContext)
    {
        aContext.closePath();
    }
CGContextIsPathEmpty = function(aContext)
    {
        return !aContext.hasPath;
    }
CGContextMoveToPoint = function(aContext, x, y)
    {
        aContext.moveTo(x, y);
        aContext.hasPath = YES;
    }
CGContextClearRect = function(aContext, aRect)
    {
        aContext.clearRect(CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.hasPath = NO;
    }
CGContextDrawPath = function(aContext, aMode)
    {
        if (!aContext.hasPath)
            return;
        if (aMode === kCGPathFill || aMode === kCGPathFillStroke)
            aContext.fill();
        else if (aMode === kCGPathStroke || aMode === kCGPathFillStroke || aMode === kCGPathEOFillStroke)
            aContext.stroke();
        else if (aMode === kCGPathEOFill || aMode === kCGPathEOFillStroke)
            CPLog.warn("Unimplemented fill mode in CGContextDrawPath: %d", aMode);
        aContext.hasPath = NO;
    }
CGContextFillRect = function(aContext, aRect)
    {
        aContext.fillRect(CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.hasPath = NO;
    }
CGContextFillRects = function(aContext, rects, count)
    {
        if (count === null || count === undefined)
            count = rects.length;
        for (var i = 0; i < count; ++i)
        {
            var rect = rects[i];
            aContext.fillRect(CGRectGetMinX(rect), CGRectGetMinY(rect), CGRectGetWidth(rect), CGRectGetHeight(rect));
        }
        aContext.hasPath = NO;
    }
CGContextStrokeRect = function(aContext, aRect)
    {
        aContext.strokeRect(CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.hasPath = NO;
    }
CGContextClip = function(aContext)
    {
        aContext.clip();
        aContext.hasPath = NO;
    }
CGContextClipToRect = function(aContext, aRect)
    {
        aContext.beginPath();
        aContext.rect(CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.closePath();
        aContext.clip();
        aContext.hasPath = NO;
    }
CGContextClipToRects = function(aContext, rects, count)
    {
        if (count === null || count === undefined)
            count = rects.length;
        aContext.beginPath();
        CGContextAddRects(aContext, rects, count);
        aContext.clip();
        aContext.hasPath = NO;
    }
CGContextSetAlpha = function(aContext, anAlpha)
    {
        aContext.globalAlpha = anAlpha;
    }
CGContextSetFillColor = function(aContext, aColor)
    {
        var patternImage = objj_msgSend(aColor, "patternImage");
        if (objj_msgSend(patternImage, "isSingleImage"))
        {
            var pattern = aContext.createPattern(objj_msgSend(patternImage, "image"), "repeat");
            aContext.fillStyle = pattern;
        }
        else
            aContext.fillStyle = objj_msgSend(aColor, "cssString");
    }
CGContextCreatePatternContext = function(aContext, aSize)
    {
        var pattern = document.createElement("canvas");
        pattern.width = aSize.width;
        pattern.height = aSize.height;
        return pattern.getContext("2d");
    }
CGContextSetFillPattern = function(aContext, aPatternContext)
    {
        var pattern = aContext.createPattern(aPatternContext.canvas, "repeat");
        aContext.fillStyle = pattern;
    }
CGContextSetStrokePattern = function(aContext, aPatternContext)
    {
        var pattern = aContext.createPattern(aPatternContext.canvas, "repeat");
        aContext.strokeStyle = pattern;
    }
CGContextSetStrokeColor = function(aContext, aColor)
    {
        var patternImage = objj_msgSend(aColor, "patternImage");
        if (objj_msgSend(patternImage, "isSingleImage"))
        {
            var pattern = aContext.createPattern(objj_msgSend(patternImage, "image"), "repeat");
            aContext.strokeStyle = pattern;
        }
        else
            aContext.strokeStyle = objj_msgSend(aColor, "cssString");
    }
CGContextSetShadow = function(aContext, aSize, aBlur)
    {
        aContext.shadowOffsetX = aSize.width;
        aContext.shadowOffsetY = aSize.height;
        aContext.shadowBlur = aBlur;
    }
CGContextSetShadowWithColor = function(aContext, aSize, aBlur, aColor)
    {
        aContext.shadowOffsetX = aSize.width;
        aContext.shadowOffsetY = aSize.height;
        aContext.shadowBlur = aBlur;
        aContext.shadowColor = objj_msgSend(aColor, "cssString");
    }
CGContextRotateCTM = function(aContext, anAngle)
    {
        aContext.rotate(anAngle);
    }
CGContextScaleCTM = function(aContext, sx, sy)
    {
        aContext.scale(sx, sy);
    }
CGContextTranslateCTM = function(aContext, tx, ty)
    {
        aContext.translate(tx, ty);
    }
    var scale_rotate = function(a, b, c, d)
    {
        var sign = a * d < 0.0 || b * c > 0.0 ? -1.0 : 1.0,
            a2 = (ATAN2(b, d) + ATAN2(-sign * c, sign * a)) / 2.0,
            cos = COS(a2),
            sin = SIN(a2);
        if (cos === 0)
        {
            sx = -c / sin;
            sy = b / sin;
        }
        else if (sin === 0)
        {
            sx = a / cos;
            sy = d / cos;
        }
        else
        {
            abs_cos = ABS(cos);
            abs_sin = ABS(sin);
            sx = (abs_cos * a / cos + abs_sin * -c / sin) / (abs_cos + abs_sin);
            sy = (abs_cos * d / cos + abs_sin * b / sin) / (abs_cos + abs_sin);
        }
    };
    var rotate_scale = function(a, b, c, d)
    {
        var sign = a * d < 0.0 || b * c > 0.0 ? -1.0 : 1.0,
            a1 = (ATAN2(sign * b, sign * a) + ATAN2(-c, d)) / 2.0,
            cos = COS(a1),
            sin = SIN(a1);
        if (cos === 0)
        {
            sx = b / sin;
            sy = -c / sin;
        }
        else if (sin === 0)
        {
            sx = a / cos;
            sy = d / cos;
        }
        else
        {
            abs_cos = ABS(cos);
            abs_sin = ABS(sin);
            sx = (abs_cos * a / cos + abs_sin * b / sin) / (abs_cos + abs_sin);
            sy = (abs_cos * d / cos + abs_sin * -c / sin) / (abs_cos + abs_sin);
        }
    };
eigen = function(anAffineTransform)
    {
        CPLog.warn("Unimplemented function: eigen");
    }
    if (CPFeatureIsCompatible(CPJavaScriptCanvasTransformFeature))
    {
        CGContextConcatCTM = function(aContext, anAffineTransform)
        {
            aContext.transform(anAffineTransform.a, anAffineTransform.b, anAffineTransform.c, anAffineTransform.d, anAffineTransform.tx, anAffineTransform.ty);
        };
    }
    else
    {
        CGContextConcatCTM = function(aContext, anAffineTransform)
        {
            var a = anAffineTransform.a,
                b = anAffineTransform.b,
                c = anAffineTransform.c,
                d = anAffineTransform.d,
                tx = anAffineTransform.tx,
                ty = anAffineTransform.ty,
                sx = 1.0,
                sy = 1.0,
                a1 = 0.0,
                a2 = 0.0;
            if (b === 0.0 && c === 0.0)
            {
                sx = a;
                sy = d;
            }
            else if (a * b === -c * d)
            {
                scale_rotate(a, b, c, d);
            }
            else if (a * c === -b * d)
            {
                rotate_scale(a, b, c, d);
            }
            else
            {
                var transpose = CGAffineTransformMake(a, c, b, d, 0.0, 0.0),
                    u = eigen(CGAffineTransformConcat(anAffineTransform, transpose)),
                    v = eigen(CGAffineTransformConcat(transpose, anAffineTransform)),
                    U = CGAffineTransformMake(u.vector_1.x, u.vector_2.x, u.vector_1.y, u.vector_2.y, 0.0, 0.0),
                    VT = CGAffineTransformMake(v.vector_1.x, v.vector_1.y, v.vector_2.x, v.vector_2.y, 0.0, 0.0),
                    S = CGAffineTransformConcat(CGAffineTransformConcat(CGAffineTransformInvert(U), anAffineTransform), CGAffineTransformInvert(VT));
                a = VT.a;
                b = VT.b;
                c = VT.c;
                d = VT.d;
                scale_rotate(a, b, c, d);
                S.a *= sx;
                S.d *= sy;
                a = U.a;
                b = U.b;
                c = U.c;
                d = U.d;
                rotate_scale(a, b, c, d);
                sx = S.a * sx;
                sy = S.d * sy;
            }
            if (tx != 0 || ty != 0)
                CGContextTranslateCTM(aContext, tx, ty);
            if (a1 != 0.0)
                CGContextRotateCTM(aContext, a1);
            if (sx != 1.0 || sy != 1.0)
                CGContextScaleCTM(aContext, sx, sy);
            if (a2 != 0.0)
                CGContextRotateCTM(aContext, a2);
        };
    }
CGContextDrawImage = function(aContext, aRect, anImage)
    {
        aContext.drawImage(anImage._image, CGRectGetMinX(aRect), CGRectGetMinY(aRect), CGRectGetWidth(aRect), CGRectGetHeight(aRect));
        aContext.hasPath = NO;
    }
to_string = function(aColor)
    {
        return "rgba(" + ROUND(aColor.components[0] * 255) + ", " + ROUND(aColor.components[1] * 255) + ", " + ROUND(255 * aColor.components[2]) + ", " + aColor.components[3] + ")";
    }
CGContextDrawLinearGradient = function(aContext, aGradient, aStartPoint, anEndPoint, options)
    {
        var colors = aGradient.colors,
            count = colors.length,
            linearGradient = aContext.createLinearGradient(aStartPoint.x, aStartPoint.y, anEndPoint.x, anEndPoint.y);
        while (count--)
            linearGradient.addColorStop(aGradient.locations[count], to_string(colors[count]));
        aContext.fillStyle = linearGradient;
        aContext.fill();
        aContext.hasPath = NO;
    }
CGContextDrawRadialGradient = function(aContext, aGradient, aStartCenter, aStartRadius, anEndCenter, anEndRadius, options)
    {
        var colors = aGradient.colors,
            count = colors.length,
            linearGradient = aContext.createRadialGradient(aStartCenter.x, aStartCenter.y, aStartRadius, anEndCenter.x, anEndCenter.y, anEndRadius);
        while (count--)
            linearGradient.addColorStop(aGradient.locations[count], to_string(colors[count]));
        aContext.fillStyle = linearGradient;
        aContext.fill();
        aContext.hasPath = NO;
    }
CGBitmapGraphicsContextCreate = function()
    {
        var DOMElement = document.createElement("canvas"),
            context = DOMElement.getContext("2d");
        context.DOMElement = DOMElement;
        context.hasPath = NO;
        return context;
    }
}else if (CPFeatureIsCompatible(CPVMLFeature))
{
    var VML_TRUTH_TABLE = ["f", "t"],
        VML_LINECAP_TABLE = ["flat", "round", "square"],
        VML_LINEJOIN_TABLE = ["miter", "round", "bevel"],
        VML_ELEMENT_TABLE = [" m ", " l ", "qb", " c ", " x ", [" at ", " wa "]];
    var _CGBitmapGraphicsContextCreate = CGBitmapGraphicsContextCreate;
CGBitmapGraphicsContextCreate = function()
    {
        document.namespaces.add("cg_vml_", "urn:schemas-microsoft-com:vml");
        (document.createStyleSheet()).cssText = "cg_vml_\\:*{behavior:url(#default#VML)}";
        CGBitmapGraphicsContextCreate = _CGBitmapGraphicsContextCreate;
        return _CGBitmapGraphicsContextCreate();
    }
CGContextSetFillColor = function(aContext, aColor)
    {
        if (objj_msgSend(aColor, "patternImage"))
            aContext.gState.fillStyle = "!" + objj_msgSend(objj_msgSend(aColor, "patternImage"), "filename");
        else
            aContext.gState.fillStyle = objj_msgSend(aColor, "cssString");
    }
CGContextClearRect = function(aContext, aRect)
    {
        if (aContext.buffer != nil)
            aContext.buffer = "";
        else
            aContext.DOMElement.innerHTML = "";
        aContext.path = NULL;
    }
    var W = 10.0,
        H = 10.0,
        Z = 10.0,
        Z_2 = Z / 2.0;
CGContextDrawImage = function(aContext, aRect, anImage)
    {
        var string = "";
        if (anImage.buffer != nil)
            string = anImage.buffer;
        else
        {
            var ctm = aContext.gState.CTM,
                origin = CGPointApplyAffineTransform(aRect.origin, ctm),
                similarity = ctm.a == ctm.d && ctm.b == -ctm.c,
                vml = ["<cg_vml_:group coordsize=\"1,1\" coordorigin=\"0,0\" style=\"width:1;height:1;position:absolute"];
        {
            var transformedRect = CGRectApplyAffineTransform(aRect, ctm);
            vml.push(";padding:0 ", ROUND(CGRectGetMaxX(transformedRect)), "px ", ROUND(CGRectGetMaxY(transformedRect)), "px 0;filter:progid:DXImageTransform.Microsoft.Matrix(", "M11='", ctm.a, "',M12='", ctm.c, "',M21='", ctm.b, "',M22='", ctm.d, "',", "Dx='", ROUND(origin.x), "', Dy='", ROUND(origin.y), "', sizingmethod='clip');");
        }
            vml.push("\"><cg_vml_:image src=\"", anImage._image.src, "\" style=\"width:", CGRectGetWidth(aRect), "px;height:", CGRectGetHeight(aRect), "px;\"/></g_vml_:group>");
            string = vml.join("");
        }
        if (aContext.buffer != nil)
            aContext.buffer += string;
        else
            aContext.DOMElement.insertAdjacentHTML("BeforeEnd", string);
    }
CGContextDrawPath = function(aContext, aMode)
    {
        if (!aContext || CGPathIsEmpty(aContext.path))
            return;
        var elements = aContext.path.elements,
            i = 0,
            count = aContext.path.count,
            gState = aContext.gState,
            fill = aMode == kCGPathFill || aMode == kCGPathFillStroke ? 1 : 0,
            stroke = aMode == kCGPathStroke || aMode == kCGPathFillStroke ? 1 : 0,
            opacity = gState.alpha,
            vml = ["<cg_vml_:shape"];
        if (gState.fillStyle.charAt(0) !== "!")
            vml.push(" fillcolor=\"", gState.fillStyle, "\"");
        vml.push(" filled=\"", VML_TRUTH_TABLE[fill], "\" style=\"position:absolute;width:", W, ";height:", H, ";\" coordorigin=\"0 0\" coordsize=\"", Z * W, " ", Z * H, "\" stroked=\"", VML_TRUTH_TABLE[stroke], "\" strokeweight=\"", gState.lineWidth, "\" strokecolor=\"", gState.strokeStyle, "\" path=\"");
        for (; i < count; ++i)
        {
            var element = elements[i],
                type = element.type;
            switch(type) {
            case kCGPathElementMoveToPoint:
            case kCGPathElementAddLineToPoint:
                vml.push(VML_ELEMENT_TABLE[type], element.x === 0.0 ? 0 : ROUND(Z * element.x - Z_2), ',', element.y === 0.0 ? 0 : ROUND(Z * element.y - Z_2));
                break;
            case kCGPathElementAddQuadCurveToPoint:
                vml.push(VML_ELEMENT_TABLE[type], element.cpx === 0.0 ? 0 : ROUND(Z * element.cpx - Z_2), ',', element.cpy === 0.0 ? 0 : ROUND(Z * element.cpy - Z_2), ',', element.x === 0.0 ? 0 : ROUND(Z * element.x - Z_2), ',', element.y === 0.0 ? 0 : ROUND(Z * element.y - Z_2));
                break;
            case kCGPathElementAddCurveToPoint:
                vml.push(VML_ELEMENT_TABLE[type], element.cp1x === 0.0 ? 0 : ROUND(Z * element.cp1x - Z_2), ',', element.cp1y === 0.0 ? 0 : ROUND(Z * element.cp1y - Z_2), ',', element.cp2x === 0.0 ? 0 : ROUND(Z * element.cp2x - Z_2), ',', element.cp2y === 0.0 ? 0 : ROUND(Z * element.cp2y - Z_2), ',', element.x === 0.0 ? 0 : ROUND(Z * element.x - Z_2), ',', element.y === 0.0 ? 0 : ROUND(Z * element.y - Z_2));
                break;
            case kCGPathElementCloseSubpath:
                vml.push(VML_ELEMENT_TABLE[type]);
                break;
            case kCGPathElementAddArc:
                var x = element.x,
                    y = element.y,
                    radius = element.radius,
                    clockwise = element.clockwise ? 1 : 0,
                    endAngle = element.endAngle,
                    startAngle = element.startAngle,
                    start = CGPointMake(x + radius * COS(startAngle), y + radius * SIN(startAngle));
                if (startAngle == endAngle && !clockwise)
                {
                    vml.push(VML_ELEMENT_TABLE[kCGPathElementMoveToPoint], start.x === 0.0 ? 0 : ROUND(Z * start.x - Z_2), ',', start.y === 0.0 ? 0 : ROUND(Z * start.y - Z_2));
                    continue;
                }
                var end = CGPointMake(x + radius * COS(endAngle), y + radius * SIN(endAngle));
                if (clockwise && startAngle != endAngle && CGPointEqualToPoint(start, end))
                    if (start.x >= x)
                    {
                        if (start.y < y)
                            start.x += 0.125;
                        else
                            start.y += 0.125;
                    }
                    else
                    {
                        if (end.y <= y)
                            end.x += 0.125;
                        else
                            end.y += 0.125;
                    }
                vml.push(VML_ELEMENT_TABLE[type][clockwise], x - radius === 0.0 ? 0 : ROUND(Z * (x - radius) - Z_2), ',', y - radius === 0.0 ? 0 : ROUND(Z * (y - radius) - Z_2), " ", x + radius === 0.0 ? 0 : ROUND(Z * (x + radius) - Z_2), ',', y + radius === 0.0 ? 0 : ROUND(Z * (y + radius) - Z_2), " ", start.x === 0.0 ? 0 : ROUND(Z * start.x - Z_2), ',', start.y === 0.0 ? 0 : ROUND(Z * start.y - Z_2), " ", end.x === 0.0 ? 0 : ROUND(Z * end.x - Z_2), ',', end.y === 0.0 ? 0 : ROUND(Z * end.y - Z_2));
                break;
            case kCGPathElementAddArcToPoint:
                break;
            }
        }
        vml.push("\">");
        if (gState.gradient)
            vml.push(gState.gradient);
        else if (fill)
        {
            if (gState.fillStyle.charAt(0) === "!")
                vml.push("<cg_vml_:fill type=\"tile\" src=\"", gState.fillStyle.substring(1), "\" opacity=\"", opacity, "\" />");
            else
                vml.push("<cg_vml_:fill color=\"", gState.fillStyle, "\" opacity=\"", opacity, "\" />");
        }
        if (stroke)
            vml.push("<cg_vml_:stroke opacity=\"", opacity, "\" joinstyle=\"", VML_LINEJOIN_TABLE[gState.lineJoin], "\" miterlimit=\"", gState.miterLimit, "\" endcap=\"", VML_LINECAP_TABLE[gState.lineCap], "\" weight=\"", gState.lineWidth, "", "px\" color=\"", gState.strokeStyle, "\" />");
        var shadowColor = gState.shadowColor;
        if (shadowColor)
        {
            var shadowOffset = gState.shadowOffset;
            vml.push("<cg_vml_:shadow on=\"t\" offset=\"", shadowOffset.width, "pt ", shadowOffset.height, "pt\" opacity=\"", objj_msgSend(shadowColor, "alphaComponent"), "\" color=black />");
        }
        vml.push("</cg_vml_:shape>");
        if (aContext.buffer != nil)
            aContext.buffer += vml.join("");
        else
            aContext.DOMElement.insertAdjacentHTML("BeforeEnd", vml.join(""));
    }
to_string = function(aColor)
    {
        return "rgb(" + ROUND(aColor.components[0] * 255) + ", " + ROUND(aColor.components[1] * 255) + ", " + ROUND(255 * aColor.components[2]) + ")";
    }
CGContextDrawLinearGradient = function(aContext, aGradient, aStartPoint, anEndPoint, options)
    {
        if (!aContext || !aGradient)
            return;
        var vml = nil;
        if (aGradient.vml_gradient)
        {
            var stops = objj_msgSend(objj_msgSend(aGradient.vml_gradient, "stops"), "sortedArrayUsingSelector:", sel_getUid("comparePosition:")),
                count = objj_msgSend(stops, "count");
            vml = ["<cg_vml_:fill type=\"gradient\" method=\"linear sigma\" "];
            vml.push("angle=\"" + (objj_msgSend(aGradient.vml_gradient, "angle") + 90) + "\" ");
            vml.push("colors=\"");
            for (var i = 0; i < count; i++)
            {
                vml.push((objj_msgSend(stops[i], "position") * 100).toFixed(0) + "% ");
                vml.push(objj_msgSend(objj_msgSend(objj_msgSend(stops[i], "color"), "colorForSlideBase:", nil), "cssString"));
                if (i < count - 1)
                    vml.push(",");
            }
            vml.push("\" />");
        }
        else
        {
            var colors = aGradient.colors,
                count = colors.length;
            vml = ["<cg_vml_:fill type=\"gradient\" "];
            vml.push("colors=\"");
            for (var i = 0; i < count; i++)
                vml.push((aGradient.locations[i] * 100).toFixed(0) + "% " + to_string(colors[i]) + (i < count - 1 ? "," : ""));
            vml.push("\" />");
        }
        aContext.gState.gradient = vml.join("");
    }
}else
{
    CGContextClearRect = CGContextDrawLinearGradient = CGContextClip = CGContextClipToRect = function()
    {
        throw new Error("function is not declared in this environment");
    };
}p;12;CGGeometry.jt;95;@STATIC;1.0;I;24;Foundation/_CGGeometry.jt;49;objj_executeFile("Foundation/_CGGeometry.j", NO);p;12;CGGradient.jt;1141;@STATIC;1.0;i;9;CGColor.ji;14;CGColorSpace.jt;1090;objj_executeFile("CGColor.j", YES);objj_executeFile("CGColorSpace.j", YES);kCGGradientDrawsBeforeStartLocation = 1 << 0;
kCGGradientDrawsAfterEndLocation = 1 << 1;
CGGradientCreateWithColorComponents = function(aColorSpace, components, locations, count)
{
    if (locations === undefined || locations === NULL)
    {
        var num_of_colors = components.length / 4,
            locations = [];
        for (var idx = 0; idx < num_of_colors; idx++)
            locations.push(idx / (num_of_colors - 1));
    }
    if (count === undefined || count === NULL)
        count = locations.length;
    var colors = [];
    while (count--)
    {
        var offset = count * 4;
        colors[count] = CGColorCreate(aColorSpace, components.slice(offset, offset + 4));
    }
    return CGGradientCreateWithColors(aColorSpace, colors, locations);
}
CGGradientCreateWithColors = function(aColorSpace, colors, locations)
{
    return {colorspace: aColorSpace, colors: colors, locations: locations};
}
CGGradientRelease = function()
{
}
CGGradientRetain = function(aGradient)
{
    return aGradient;
}
p;8;CGPath.jt;16042;@STATIC;1.0;i;19;CGAffineTransform.ji;12;CGGeometry.jt;15981;objj_executeFile("CGAffineTransform.j", YES);objj_executeFile("CGGeometry.j", YES);kCGPathElementMoveToPoint = 0;
kCGPathElementAddLineToPoint = 1;
kCGPathElementAddQuadCurveToPoint = 2;
kCGPathElementAddCurveToPoint = 3;
kCGPathElementCloseSubpath = 4;
kCGPathElementAddArc = 5;
kCGPathElementAddArcToPoint = 6;
CGPathCreateMutable = function()
{
    return {count: 0, start: CGPointMake(0, 0), current: CGPointMake(0, 0), elements: []};
}
CGPathCreateMutableCopy = function(aPath)
{
    var path = CGPathCreateMutable();
    CGPathAddPath(path, aPath);
    return path;
}
CGPathCreateCopy = function(aPath)
{
    return CGPathCreateMutableCopy(aPath);
}
CGPathRelease = function(aPath)
{
}
CGPathRetain = function(aPath)
{
    return aPath;
}
CGPathAddArc = function(aPath, aTransform, x, y, aRadius, aStartAngle, anEndAngle, isClockwise)
{
    if (aTransform && !CGAffineTransformIsIdentity(aTransform))
    {
        var center = CGPointMake(x, y),
            end = CGPointMake(COS(anEndAngle), SIN(anEndAngle)),
            start = CGPointMake(COS(aStartAngle), SIN(aStartAngle));
        end = CGPointApplyAffineTransform(end, aTransform);
        start = CGPointApplyAffineTransform(start, aTransform);
        center = CGPointApplyAffineTransform(center, aTransform);
        x = center.x;
        y = center.y;
        var oldEndAngle = anEndAngle,
            oldStartAngle = aStartAngle;
        anEndAngle = ATAN2(end.y - aTransform.ty, end.x - aTransform.tx);
        aStartAngle = ATAN2(start.y - aTransform.ty, start.x - aTransform.tx);
        if (anEndAngle === aStartAngle && oldEndAngle !== oldStartAngle)
            if (oldStartAngle > oldEndAngle)
                anEndAngle = anEndAngle - PI2;
            else
                aStartAngle = aStartAngle - PI2;
        aRadius = CGSizeMake(aRadius, 0);
        aRadius = CGSizeApplyAffineTransform(aRadius, aTransform);
        aRadius = SQRT(aRadius.width * aRadius.width + aRadius.height * aRadius.height);
    }
    var arcEndX = x + aRadius * COS(anEndAngle),
        arcEndY = y + aRadius * SIN(anEndAngle),
        arcStartX = x + aRadius * COS(aStartAngle),
        arcStartY = y + aRadius * SIN(aStartAngle);
    if (aPath.count)
    {
        if (aPath.current.x !== x || aPath.current.y !== y)
            CGPathAddLineToPoint(aPath, aTransform, arcStartX, arcStartY);
    }
    else
    {
        var arcStartX = x + aRadius * COS(aStartAngle),
            arcStartY = y + aRadius * SIN(aStartAngle);
        aPath.start = CGPointMake(arcStartX, arcStartY);
    }
    aPath.current = CGPointMake(arcEndX, arcEndY);
    aPath.elements[aPath.count++] = {type: kCGPathElementAddArc, x: x, y: y, radius: aRadius, startAngle: aStartAngle, endAngle: anEndAngle, isClockwise: isClockwise};
}
CGPathAddArcToPoint = function(aPath, aTransform, x1, y1, x2, y2, aRadius)
{
    var p1 = CGPointMake(x1, y1),
        p2 = CGPointMake(x2, y2);
    if (aTransform)
    {
        p1 = CGPointApplyAffineTransform(p1, aTransform);
        p2 = CGPointApplyAffineTransform(p2, aTransform);
    }
    if (aPath.count)
    {
        if (aPath.current.x !== p1.x || aPath.current.y !== p1.y)
            CGPathAddLineToPoint(aPath, aTransform, p1.x, p1.y);
    }
    else
        aPath.start = p1;
    aPath.current = p2;
    aPath.elements[aPath.count++] = {type: kCGPathElementAddArcToPoint, p1x: p1.x, p1y: p1.y, p2x: p2.x, p2y: p2.y, radius: aRadius};
}
CGPathAddCurveToPoint = function(aPath, aTransform, cp1x, cp1y, cp2x, cp2y, x, y)
{
    var cp1 = CGPointMake(cp1x, cp1y),
        cp2 = CGPointMake(cp2x, cp2y),
        end = CGPointMake(x, y);
    if (aTransform)
    {
        cp1 = CGPointApplyAffineTransform(cp1, aTransform);
        cp2 = CGPointApplyAffineTransform(cp2, aTransform);
        end = CGPointApplyAffineTransform(end, aTransform);
    }
    aPath.current = end;
    aPath.elements[aPath.count++] = {type: kCGPathElementAddCurveToPoint, cp1x: cp1.x, cp1y: cp1.y, cp2x: cp2.x, cp2y: cp2.y, x: end.x, y: end.y};
}
CGPathAddLines = function(aPath, aTransform, points, count)
{
    if (count === null || count === undefined)
        count = points.length;
    if (!aPath || count < 1)
        return;
    CGPathMoveToPoint(aPath, aTransform, points[0].x, points[0].y);
    for (var i = 1; i < count; ++i)
        CGPathAddLineToPoint(aPath, aTransform, points[i].x, points[i].y);
}
CGPathAddLineToPoint = function(aPath, aTransform, x, y)
{
    var point = CGPointMake(x, y);
    if (aTransform !== NULL)
        point = CGPointApplyAffineTransform(point, aTransform);
    aPath.elements[aPath.count++] = {type: kCGPathElementAddLineToPoint, x: point.x, y: point.y};
    aPath.current = point;
}
CGPathAddPath = function(aPath, aTransform, anotherPath)
{
    for (var i = 0, count = anotherPath.count; i < count; ++i)
    {
        var element = anotherPath.elements[i];
        switch(element.type) {
        case kCGPathElementAddLineToPoint:
            CGPathAddLineToPoint(aPath, aTransform, element.x, element.y);
            break;
        case kCGPathElementAddCurveToPoint:
            CGPathAddCurveToPoint(aPath, aTransform, element.cp1x, element.cp1y, element.cp2x, element.cp2y, element.x, element.y);
            break;
        case kCGPathElementAddArc:
            CGPathAddArc(aPath, aTransform, element.x, element.y, element.radius, element.startAngle, element.endAngle, element.isClockwise);
            break;
        case kCGPathElementAddArcToPoint:
            CGPathAddArcToPoint(aPath, aTransform, element.p1x, element.p1y, element.p2x, element.p2y, element.radius);
            break;
        case kCGPathElementAddQuadCurveToPoint:
            CGPathAddQuadCurveToPoint(aPath, aTransform, element.cpx, element.cpy, element.x, element.y);
            break;
        case kCGPathElementMoveToPoint:
            CGPathMoveToPoint(aPath, aTransform, element.x, element.y);
            break;
        case kCGPathElementCloseSubpath:
            CGPathCloseSubpath(aPath);
            break;
        }
    }
}
CGPathAddQuadCurveToPoint = function(aPath, aTransform, cpx, cpy, x, y)
{
    var cp = CGPointMake(cpx, cpy),
        end = CGPointMake(x, y);
    if (aTransform)
    {
        cp = CGPointApplyAffineTransform(cp, aTransform);
        end = CGPointApplyAffineTransform(end, aTransform);
    }
    aPath.elements[aPath.count++] = {type: kCGPathElementAddQuadCurveToPoint, cpx: cp.x, cpy: cp.y, x: end.x, y: end.y};
    aPath.current = end;
}
CGPathAddRect = function(aPath, aTransform, aRect)
{
    CGPathAddRects(aPath, aTransform, [aRect], 1);
}
CGPathAddRects = function(aPath, aTransform, rects, count)
{
    var i = 0;
    if (count === NULL)
        var count = rects.length;
    for (; i < count; ++i)
    {
        var rect = rects[i];
        CGPathMoveToPoint(aPath, aTransform, CGRectGetMinX(rect), CGRectGetMinY(rect));
        CGPathAddLineToPoint(aPath, aTransform, CGRectGetMaxX(rect), CGRectGetMinY(rect));
        CGPathAddLineToPoint(aPath, aTransform, CGRectGetMaxX(rect), CGRectGetMaxY(rect));
        CGPathAddLineToPoint(aPath, aTransform, CGRectGetMinX(rect), CGRectGetMaxY(rect));
        CGPathCloseSubpath(aPath);
    }
}
CGPathMoveToPoint = function(aPath, aTransform, x, y)
{
    var point = CGPointMake(x, y);
    if (aTransform !== NULL)
        point = CGPointApplyAffineTransform(point, aTransform);
    aPath.start = aPath.current = point;
    if (aPath.count)
    {
        var previous = aPath.elements[aPath.count - 1];
        if (previous.type === kCGPathElementMoveToPoint)
        {
            previous.x = point.x;
            previous.y = point.y;
            return;
        }
    }
    aPath.elements[aPath.count++] = {type: kCGPathElementMoveToPoint, x: point.x, y: point.y};
}
var KAPPA = 4.0 * ((SQRT2 - 1.0) / 3.0);
CGPathWithEllipseInRect = function(aRect)
{
    var path = CGPathCreateMutable();
    if (CGRectGetWidth(aRect) === CGRectGetHeight(aRect))
        CGPathAddArc(path, nil, CGRectGetMidX(aRect), CGRectGetMidY(aRect), CGRectGetWidth(aRect) / 2.0, 0.0, 2 * PI, YES);
    else
    {
        var axis = CGSizeMake(CGRectGetWidth(aRect) / 2.0, CGRectGetHeight(aRect) / 2.0),
            center = CGPointMake(CGRectGetMinX(aRect) + axis.width, CGRectGetMinY(aRect) + axis.height);
        CGPathMoveToPoint(path, nil, center.x, center.y - axis.height);
        CGPathAddCurveToPoint(path, nil, center.x + KAPPA * axis.width, center.y - axis.height, center.x + axis.width, center.y - KAPPA * axis.height, center.x + axis.width, center.y);
        CGPathAddCurveToPoint(path, nil, center.x + axis.width, center.y + KAPPA * axis.height, center.x + KAPPA * axis.width, center.y + axis.height, center.x, center.y + axis.height);
        CGPathAddCurveToPoint(path, nil, center.x - KAPPA * axis.width, center.y + axis.height, center.x - axis.width, center.y + KAPPA * axis.height, center.x - axis.width, center.y);
        CGPathAddCurveToPoint(path, nil, center.x - axis.width, center.y - KAPPA * axis.height, center.x - KAPPA * axis.width, center.y - axis.height, center.x, center.y - axis.height);
    }
    CGPathCloseSubpath(path);
    return path;
}
CGPathWithRoundedRectangleInRect = function(aRect, xRadius, yRadius, ne, se, sw, nw)
{
    var path = CGPathCreateMutable(),
        xMin = CGRectGetMinX(aRect),
        xMax = CGRectGetMaxX(aRect),
        yMin = CGRectGetMinY(aRect),
        yMax = CGRectGetMaxY(aRect);
    CGPathMoveToPoint(path, nil, xMin + xRadius, yMin);
    if (ne)
    {
        CGPathAddLineToPoint(path, nil, xMax - xRadius, yMin);
        CGPathAddCurveToPoint(path, nil, xMax - xRadius, yMin, xMax, yMin, xMax, yMin + xRadius);
    }
    else
        CGPathAddLineToPoint(path, nil, xMax, yMin);
    if (se)
    {
        CGPathAddLineToPoint(path, nil, xMax, yMax - xRadius);
        CGPathAddCurveToPoint(path, nil, xMax, yMax - xRadius, xMax, yMax, xMax - xRadius, yMax);
    }
    else
        CGPathAddLineToPoint(path, nil, xMax, yMax);
    if (sw)
    {
        CGPathAddLineToPoint(path, nil, xMin + xRadius, yMax);
        CGPathAddCurveToPoint(path, nil, xMin + xRadius, yMax, xMin, yMax, xMin, yMax - xRadius);
    }
    else
        CGPathAddLineToPoint(path, nil, xMin, yMax);
    if (nw)
    {
        CGPathAddLineToPoint(path, nil, xMin, yMin + xRadius);
        CGPathAddCurveToPoint(path, nil, xMin, yMin + xRadius, xMin, yMin, xMin + xRadius, yMin);
    }
    else
        CGPathAddLineToPoint(path, nil, xMin, yMin);
    CGPathCloseSubpath(path);
    return path;
}
CGPathCloseSubpath = function(aPath)
{
    var count = aPath.count;
    if (count === 0 || aPath.elements[count - 1].type === kCGPathElementCloseSubpath)
        return;
    aPath.current = CGPointCreateCopy(aPath.start);
    aPath.elements[aPath.count++] = {type: kCGPathElementCloseSubpath, start: aPath.start};
}
CGPathEqualToPath = function(aPath, anotherPath)
{
    if (aPath === anotherPath)
        return YES;
    if (aPath.count !== anotherPath.count || !CGPointEqualToPoint(aPath.start, anotherPath.start) || !CGPointEqualToPoint(aPath.current, anotherPath.current))
        return NO;
    var i = 0,
        count = aPath.count;
    for (; i < count; ++i)
    {
        var element = aPath[i],
            anotherElement = anotherPath[i];
        if (element.type !== anotherElement.type)
            return NO;
        switch(element.type) {
        case kCGPathElementAddArc:
            if (element.x !== anotherElement.x || element.y !== anotherElement.y || element.radius !== anotherElement.radius || element.startAngle !== anotherElement.startAngle || element.endAngle !== anotherElement.endAngle || element.isClockwise !== anotherElement.isClockwise)
            {
                return NO;
            }
            break;
        case kCGPathElementAddArcToPoint:
            if (element.p1x !== anotherElement.p1x || element.p1y !== anotherElement.p1y || element.p2x !== anotherElement.p2x || element.p2y !== anotherElement.p2y || element.radius !== anotherElement.radius)
            {
                return NO;
            }
            break;
        case kCGPathElementAddCurveToPoint:
            if (element.cp1x !== anotherElement.cp1x || element.cp1y !== anotherElement.cp1y || element.cp2x !== anotherElement.cp2x || element.cp2y !== anotherElement.cp2y || element.x !== anotherElement.x || element.y !== anotherElement.y)
            {
                return NO;
            }
            break;
        case kCGPathElementAddLineToPoint:
        case kCGPathElementMoveToPoint:
            if (element.x !== anotherElement.x || element.y !== anotherElement.y)
            {
                return NO;
            }
            break;
        case kCGPathElementAddQuadCurveToPoint:
            if (element.cpx !== anotherElement.cpx || element.cpy !== anotherElement.cpy || element.x !== anotherElement.x || element.y !== anotherElement.y)
            {
                return NO;
            }
            break;
        case kCGPathElementCloseSubpath:
            if (!CGPointEqualToPoint(element.start, anotherElement.start))
                return NO;
            break;
        }
    }
    return YES;
}
CGPathGetCurrentPoint = function(aPath)
{
    return CGPointCreateCopy(aPath.current);
}
CGPathIsEmpty = function(aPath)
{
    return !aPath || aPath.count === 0;
}
CGPathGetBoundingBox = function(aPath)
{
    if (!aPath || !aPath.count)
        return CGRectMakeZero();
    var ox = 0,
        oy = 0,
        rx = 0,
        ry = 0,
        movePoint = nil;
addPoint = function(x, y)
    {
        ox = MIN(ox, x);
        oy = MIN(oy, y);
        rx = MAX(rx, x);
        ry = MAX(ry, y);
    }
    for (var i = 0, count = aPath.count; i < count; ++i)
    {
        var element = aPath.elements[i];
        switch(element.type) {
        case kCGPathElementAddLineToPoint:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            addPoint(element.x, element.y);
            break;
        case kCGPathElementAddCurveToPoint:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            addPoint(element.cp1x, element.cp1y);
            addPoint(element.cp2x, element.cp2y);
            addPoint(element.x, element.y);
            break;
        case kCGPathElementAddArc:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            addPoint(element.x, element.y);
            break;
        case kCGPathElementAddArcToPoint:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            addPoint(element.p1x, element.p1y);
            addPoint(element.p2x, element.p2y);
            break;
        case kCGPathElementAddQuadCurveToPoint:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            addPoint(element.cpx, element.cpy);
            addPoint(element.x, element.y);
            break;
        case kCGPathElementMoveToPoint:
            movePoint = CGPointMake(element.x, element.y);
            break;
        case kCGPathElementCloseSubpath:
            if (movePoint)
            {
                addPoint(movePoint.x, movePoint.y);
                movePoint = nil;
            }
            break;
        }
    }
    return CGRectMake(ox, oy, rx - ox, ry - oy);
}
CGPathContainsPoint = function(aPath, aTransform, point, eoFill)
{
    if (!aPath.count)
        return NO;
    if (aTransform)
        point = CGPointApplyAffineTransform(point, aTransform);
    var context = CGBitmapGraphicsContextCreate();
    CGContextBeginPath(context);
    CGContextAddPath(context, aPath);
    CGContextClosePath(context);
    return context.isPointInPath(point.x, point.y);
}
p;23;_CPDatePickerCalendar.jt;54242;@STATIC;1.0;i;11;CPControl.ji;13;CPTextField.ji;10;CPButton.ji;8;CPView.ji;14;CPBezierPath.ji;20;_CPDatePickerClock.jI;23;Foundation/Foundation.jt;54089;objj_executeFile("CPControl.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPButton.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPBezierPath.j", YES);objj_executeFile("_CPDatePickerClock.j", YES);objj_executeFile("Foundation/Foundation.j", NO);var CPShortWeekDayNameArrayEn = ["Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
    CPShortWeekDayNameArrayUS = ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa"],
    CPShortWeekDayNameArrayFr = ["L", "M", "M", "J", "V", "S", "D"],
    CPShortWeekDayNameArrayDe = ["M", "D", "M", "D", "F", "S", "S"],
    CPShortWeekDayNameArrayEs = ["L", "M", "X", "J", "V", "S", "D"],
    CPShortMonthNameArrayEn = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
    CPShortMonthNameArrayFr = ["janv.", String.fromCharCode(102, 233, 118, 46), "mars", "apr.", "mai", "juin", "juil.", String.fromCharCode(97, 111, 251, 116), "sept.", "oct.", "nov.", String.fromCharCode(100, 233, 99, 46)],
    CPShortMonthNameArrayDe = ["Jan", "Feb", String.fromCharCode(77, 228, 114), "Apr", "Mai", "Jun", "Jul", "Aug", "Sep", "Okt", "Nov", "Dez"],
    CPShortMonthNameArrayEs = ["ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"];
{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerCalendar"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_monthView"), new objj_ivar("_headerView"), new objj_ivar("_datePickerClock"), new objj_ivar("_box"), new objj_ivar("_datePicker"), new objj_ivar("_startSelectionIndex"), new objj_ivar("_currentSelectionIndex")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:withDatePicker:"), function $_CPDatePickerCalendar__initWithFrame_withDatePicker_(self, _cmd, aFrame, aDatePicker)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerCalendar").super_class }, "initWithFrame:", aFrame))
    {
        self._datePicker = aDatePicker;
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect","CPDatePicker"]), new objj_method(sel_getUid("_init"), function $_CPDatePickerCalendar___init(self, _cmd)
{
    var sizeHeader = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-header"),
        sizeCalendar = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-calendar"),
        sizeClock = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-clock");
    self._box = objj_msgSend(objj_msgSend(_DatePickerBox, "alloc"), "initWithFrame:", CGRectMake(0, 0, sizeCalendar.width, sizeHeader.height + sizeCalendar.height));
    objj_msgSend(self._box, "setDatePicker:", self._datePicker);
    self._headerView = objj_msgSend(objj_msgSend(_CPDatePickerHeaderView, "alloc"), "initWithFrame:datePicker:delegate:", CGRectMake(0, 0, sizeHeader.width, sizeHeader.height), self._datePicker, self);
    objj_msgSend(self._box, "addSubview:", self._headerView);
    self._monthView = objj_msgSend(objj_msgSend(_CPDatePickerMonthView, "alloc"), "initWithFrame:datePicker:delegate:", CGRectMake(0, sizeHeader.height, sizeCalendar.width, sizeCalendar.height), self._datePicker, self);
    objj_msgSend(self._box, "addSubview:", self._monthView);
    self._datePickerClock = objj_msgSend(objj_msgSend(_CPDatePickerClock, "alloc"), "initWithFrame:datePicker:", CGRectMake(sizeCalendar.width + 10, sizeHeader.height + sizeCalendar.height / 2 - sizeClock.height / 2, sizeClock.width, sizeClock.height), self._datePicker);
    objj_msgSend(self._datePickerClock, "setHidden:", YES);
    objj_msgSend(self, "addSubview:", self._datePickerClock);
    objj_msgSend(self, "addSubview:", self._box);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("becomeFirstResponder"), function $_CPDatePickerCalendar__becomeFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPDatePickerCalendar__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("setDateValue:"), function $_CPDatePickerCalendar__setDateValue_(self, _cmd, aDateValue)
{
    var dateValue = objj_msgSend(aDateValue, "copy");
    objj_msgSend(dateValue, "_dateWithTimeZone:", objj_msgSend(self._datePicker, "timeZone"));
    objj_msgSend(self._monthView, "setMonthForDate:", dateValue);
    objj_msgSend(self._headerView, "setMonthForDate:", objj_msgSend(self._monthView, "monthDate"));
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerCalendar__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerCalendar").super_class }, "setEnabled:", aBoolean);
    objj_msgSend(self._datePickerClock, "setEnabled:", aBoolean);
    objj_msgSend(self._headerView, "setEnabled:", aBoolean);
    objj_msgSend(self._monthView, "setEnabled:", aBoolean);
}
,["void","BOOL"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerCalendar__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    var minSize = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-calendar"),
        sizeHeader = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-header"),
        sizeCalendar = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-calendar"),
        sizeClock = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-clock");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerCalendar").super_class }, "layoutSubviews");
    if (objj_msgSend(self._datePicker, "datePickerElements") & CPHourMinuteSecondDatePickerElementFlag || objj_msgSend(self._datePicker, "datePickerElements") & CPHourMinuteDatePickerElementFlag)
    {
        objj_msgSend(self._datePickerClock, "setHidden:", NO);
        objj_msgSend(self._datePickerClock, "setNeedsLayout");
        if (objj_msgSend(self._datePicker, "datePickerElements") & CPYearMonthDatePickerElementFlag || objj_msgSend(self._datePicker, "datePickerElements") & CPYearMonthDayDatePickerElementFlag)
        {
            var frameSize = CGSizeMakeCopy(minSize);
            frameSize.width += sizeClock.width + 10;
            objj_msgSend(self._datePicker, "setFrameSize:", frameSize);
            objj_msgSend(self._datePickerClock, "setFrameOrigin:", CGPointMake(sizeCalendar.width + 10, objj_msgSend(self, "bounds").size.height / 2 - sizeClock.height / 2));
        }
        else
        {
            objj_msgSend(self._datePicker, "setFrameSize:", sizeClock);
            objj_msgSend(self._datePickerClock, "setFrameOrigin:", CGPointMake(0, 0));
        }
    }
    else
    {
        objj_msgSend(self._datePicker, "setFrameSize:", minSize);
        objj_msgSend(self._datePickerClock, "setHidden:", YES);
    }
    if (objj_msgSend(self._datePicker, "datePickerElements") & CPYearMonthDatePickerElementFlag || objj_msgSend(self._datePicker, "datePickerElements") & CPYearMonthDayDatePickerElementFlag)
    {
        objj_msgSend(self._box, "setHidden:", NO);
        objj_msgSend(self._headerView, "setHidden:", NO);
        objj_msgSend(self._monthView, "setHidden:", NO);
        objj_msgSend(self._box, "setNeedsLayout");
        objj_msgSend(self._box, "setNeedsDisplay:", YES);
        objj_msgSend(self._headerView, "setNeedsLayout");
        objj_msgSend(self._monthView, "setNeedsLayout");
        objj_msgSend(self._monthView, "setNeedsDisplay:", YES);
    }
    else
    {
        objj_msgSend(self._box, "setHidden:", YES);
        objj_msgSend(self._headerView, "setHidden:", YES);
        objj_msgSend(self._monthView, "setHidden:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("_nextMonth:"), function $_CPDatePickerCalendar___nextMonth_(self, _cmd, sender)
{
    objj_msgSend(self, "setDateValue:", objj_msgSend(self._monthView, "nextMonth"));
}
,["void","id"]), new objj_method(sel_getUid("_previousMonth:"), function $_CPDatePickerCalendar___previousMonth_(self, _cmd, sender)
{
    objj_msgSend(self, "setDateValue:", objj_msgSend(self._monthView, "previousMonth"));
}
,["void","id"]), new objj_method(sel_getUid("_currentMonth:"), function $_CPDatePickerCalendar___currentMonth_(self, _cmd, sender)
{
    objj_msgSend(self, "setDateValue:", objj_msgSend(self._datePicker, "dateValue"));
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerHeaderView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dayLabels"), new objj_ivar("_monthNames"), new objj_ivar("_nextButton"), new objj_ivar("_previousButton"), new objj_ivar("_currentButton"), new objj_ivar("_datePicker"), new objj_ivar("_date"), new objj_ivar("_title")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:datePicker:delegate:"), function $_CPDatePickerHeaderView__initWithFrame_datePicker_delegate_(self, _cmd, aFrame, aDatePicker, aDelegate)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerHeaderView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._datePicker = aDatePicker;
        self._title = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-font", CPThemeStateNormal), "font", CPThemeStateNormal);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-color", CPThemeStateNormal), "text-color", CPThemeStateNormal);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-font", CPThemeStateDisabled), "font", CPThemeStateDisabled);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
        objj_msgSend(self._title, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "title-text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
        objj_msgSend(self, "addSubview:", self._title);
        self._dayLabels = objj_msgSend(CPArray, "array");
        for (var i = 0; i < objj_msgSend(objj_msgSend(self, "_dayNames"), "count"); i++)
        {
            var label = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
            objj_msgSend(label, "setValue:forThemeAttribute:", CPCenterTextAlignment, "alignment");
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-font", CPThemeStateNormal), "font", CPThemeStateNormal);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-color", CPThemeStateNormal), "text-color", CPThemeStateNormal);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-font", CPThemeStateDisabled), "font", CPThemeStateDisabled);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
            objj_msgSend(label, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "weekday-text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
            objj_msgSend(self._dayLabels, "addObject:", label);
            objj_msgSend(self, "addSubview:", label);
        }
        self._previousButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._previousButton, "setButtonType:", CPMomentaryChangeButton);
        objj_msgSend(self._previousButton, "setBordered:", NO);
        objj_msgSend(self._previousButton, "setImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-left"));
        objj_msgSend(self._previousButton, "setAlternateImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-left-highlighted"));
        objj_msgSend(self, "addSubview:", self._previousButton);
        self._nextButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._nextButton, "setButtonType:", CPMomentaryChangeButton);
        objj_msgSend(self._nextButton, "setBordered:", NO);
        objj_msgSend(self._nextButton, "setImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-right"));
        objj_msgSend(self._nextButton, "setAlternateImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-right-highlighted"));
        objj_msgSend(self, "addSubview:", self._nextButton);
        self._currentButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._currentButton, "setButtonType:", CPMomentaryChangeButton);
        objj_msgSend(self._currentButton, "setBordered:", NO);
        objj_msgSend(self._currentButton, "setImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "circle-image"));
        objj_msgSend(self._currentButton, "setAlternateImage:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "circle-image-highlighted"));
        objj_msgSend(self, "addSubview:", self._currentButton);
        objj_msgSend(self._previousButton, "setTarget:", aDelegate);
        objj_msgSend(self._previousButton, "setAction:", sel_getUid("_previousMonth:"));
        objj_msgSend(self._nextButton, "setTarget:", aDelegate);
        objj_msgSend(self._nextButton, "setAction:", sel_getUid("_nextMonth:"));
        objj_msgSend(self._currentButton, "setTarget:", aDelegate);
        objj_msgSend(self._currentButton, "setAction:", sel_getUid("_currentMonth:"));
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect","CPDatePicker","id"]), new objj_method(sel_getUid("_dayNames"), function $_CPDatePickerHeaderView___dayNames(self, _cmd)
{
    switch(objj_msgSend(objj_msgSend(self._datePicker, "locale"), "objectForKey:", CPLocaleLanguageCode)) {
    case "en":
        if (objj_msgSend(self._datePicker, "_isAmericanFormat"))
            return CPShortWeekDayNameArrayUS;
        else
            return CPShortWeekDayNameArrayEn;
        break;
    case "es":
        return CPShortWeekDayNameArrayEs;
        break;
    case "de":
        return CPShortWeekDayNameArrayDe;
        break;
    case "fr":
        return CPShortWeekDayNameArrayFr;
        break;
default:
        return CPShortWeekDayNameArrayEn;
        break;
    }
}
,["CPArray"]), new objj_method(sel_getUid("_monthNames"), function $_CPDatePickerHeaderView___monthNames(self, _cmd)
{
    switch(objj_msgSend(objj_msgSend(self._datePicker, "locale"), "objectForKey:", CPLocaleLanguageCode)) {
    case "en":
        return CPShortMonthNameArrayEn;
        break;
    case "es":
        return CPShortMonthNameArrayEs;
        break;
    case "de":
        return CPShortMonthNameArrayDe;
        break;
    case "fr":
        return CPShortMonthNameArrayFr;
        break;
default:
        return CPShortMonthNameArrayEn;
        break;
    }
}
,["CPArray"]), new objj_method(sel_getUid("setMonthForDate:"), function $_CPDatePickerHeaderView__setMonthForDate_(self, _cmd, aMonthDate)
{
    self._date = aMonthDate;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerHeaderView__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSend(self._previousButton, "setEnabled:", aBoolean);
    objj_msgSend(self._nextButton, "setEnabled:", aBoolean);
    objj_msgSend(self._currentButton, "setEnabled:", aBoolean);
    objj_msgSend(self._dayLabels, "makeObjectsPerformSelector:withObject:", sel_getUid("setEnabled:"), aBoolean);
    objj_msgSend(self._title, "setEnabled:", aBoolean);
}
,["void","BOOL"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerHeaderView__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    var bounds = objj_msgSend(self, "bounds"),
        dayNames = objj_msgSend(self, "_dayNames"),
        width = CGRectGetWidth(bounds),
        buttonInset = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-inset"),
        numberOfLabels = objj_msgSend(self._dayLabels, "count"),
        labelWidth = width / numberOfLabels,
        sizeButtonLeft = objj_msgSend(objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-left"), "size"),
        sizeButtonRight = objj_msgSend(objj_msgSend(self._datePicker, "valueForThemeAttribute:", "arrow-image-right"), "size"),
        sizeButtonCircle = objj_msgSend(objj_msgSend(self._datePicker, "valueForThemeAttribute:", "circle-image"), "size"),
        sizeTileWidth = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-tile").width;
    objj_msgSend(self._nextButton, "setFrame:", CGRectMake(width - objj_msgSend(self._nextButton, "frameSize").width - buttonInset.right, buttonInset.top, sizeButtonRight.width, sizeButtonRight.height));
    objj_msgSend(self._currentButton, "setFrame:", CGRectMake(CGRectGetMinX(objj_msgSend(self._nextButton, "frame")) - sizeButtonCircle.width - buttonInset.left - buttonInset.right, buttonInset.top, sizeButtonCircle.width, sizeButtonCircle.height));
    objj_msgSend(self._previousButton, "setFrame:", CGRectMake(CGRectGetMinX(objj_msgSend(self._currentButton, "frame")) - sizeButtonLeft.width - buttonInset.left - buttonInset.right, buttonInset.top, sizeButtonLeft.width, sizeButtonLeft.height));
    var firstDayTileX;
    for (var i = 0; i < numberOfLabels; i++)
    {
        var dayLabel = self._dayLabels[i];
        objj_msgSend(dayLabel, "setStringValue:", dayNames[i]);
        objj_msgSend(dayLabel, "sizeToFit");
        objj_msgSend(dayLabel, "setFrameOrigin:", CGPointMake(sizeTileWidth * (i + 1) - sizeTileWidth / 2 - objj_msgSend(dayLabel, "frameSize").width / 2, 23));
        if (i == 0)
            firstDayTileX = sizeTileWidth * (i + 1) - sizeTileWidth / 2 - objj_msgSend(dayLabel, "frameSize").width / 2;
    }
    objj_msgSend(self._title, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%s %i", objj_msgSend(self, "_monthNames")[self._date.getMonth()], self._date.getFullYear()));
    objj_msgSend(self._title, "sizeToFit");
    objj_msgSend(self._title, "setFrameOrigin:", CGPointMake(firstDayTileX, 6));
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerMonthView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isMonthJustChanged"), new objj_ivar("_dayTiles"), new objj_ivar("_clickDate"), new objj_ivar("_dragDate"), new objj_ivar("_date"), new objj_ivar("_previousMonth"), new objj_ivar("_nextMonth"), new objj_ivar("_datePicker"), new objj_ivar("_eventDragged"), new objj_ivar("_timerMonth"), new objj_ivar("_delegate"), new objj_ivar("_indexDayTile")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("previousMonth"), function $_CPDatePickerMonthView__previousMonth(self, _cmd)
{
    return self._previousMonth;
}
,["CPDate"]), new objj_method(sel_getUid("setPreviousMonth:"), function $_CPDatePickerMonthView__setPreviousMonth_(self, _cmd, newValue)
{
    self._previousMonth = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("nextMonth"), function $_CPDatePickerMonthView__nextMonth(self, _cmd)
{
    return self._nextMonth;
}
,["CPDate"]), new objj_method(sel_getUid("setNextMonth:"), function $_CPDatePickerMonthView__setNextMonth_(self, _cmd, newValue)
{
    self._nextMonth = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("initWithFrame:datePicker:delegate:"), function $_CPDatePickerMonthView__initWithFrame_datePicker_delegate_(self, _cmd, aFrame, aDatePicker, aDelegate)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerMonthView").super_class }, "initWithFrame:", aFrame))
    {
        self._delegate = aDelegate;
        self._isMonthJustChanged = NO;
        self._indexDayTile = -1;
        self._datePicker = aDatePicker;
        self._dayTiles = objj_msgSend(CPArray, "array");
        for (var i = 0; i < 42; i++)
        {
            var dayView = objj_msgSend(objj_msgSend(_CPDatePickerDayView, "alloc"), "initWithFrame:withDatePicker:", CGRectMakeZero(), self._datePicker);
            objj_msgSend(self, "addSubview:", dayView);
            objj_msgSend(self._dayTiles, "addObject:", dayView);
        }
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect","CPDatePicker","id"]), new objj_method(sel_getUid("setMonthForDate:"), function $_CPDatePickerMonthView__setMonthForDate_(self, _cmd, aDate)
{
    if (self._dragDate)
    {
        if (self._dragDate.getMonth() != self._date.getMonth())
            self._isMonthJustChanged = YES;
        self._date = objj_msgSend(self._dragDate, "copy");
    }
    else
    {
        self._date = objj_msgSend(aDate, "copy");
    }
    if (!objj_msgSend(aDate, "isEqualToDate:", objj_msgSend(CPDate, "distantFuture")))
    {
        self._date.setDate(1);
        objj_msgSend(self._date, "_resetToMidnight");
        var firstDay = objj_msgSend(self._date, "copy");
        firstDay.setDate(1);
        self._previousMonth = new Date(firstDay.getTime() - 86400000);
        self._previousMonth.setDate(1);
        self._nextMonth = new Date(firstDay.getTime() + (objj_msgSend(self._date, "_daysInMonth") + 1) * 86400000);
        self._nextMonth.setDate(1);
    }
    objj_msgSend(self, "reloadData");
    if (self._isMonthJustChanged)
    {
        var dayTile = objj_msgSend(self._dayTiles, "objectAtIndex:", self._indexDayTile);
        if (objj_msgSend(dayTile, "date").getMonth() == self._date.getMonth())
        {
            objj_msgSend(self, "mouseDragged:", self._eventDragged);
        }
        else
        {
            if (objj_msgSend(dayTile, "date").getMonth() - self._date.getMonth() == 1 || objj_msgSend(dayTile, "date").getFullYear() - self._date.getFullYear() == 1)
                self._timerMonth = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 1.5, self, sel_getUid("_timerNextMonthEvent:"), nil, NO);
            else
                self._timerMonth = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 1.5, self, sel_getUid("_timerPreviousMonthEvent:"), nil, NO);
        }
    }
}
,["void","CPDate"]), new objj_method(sel_getUid("monthDate"), function $_CPDatePickerMonthView__monthDate(self, _cmd)
{
    return self._date;
}
,["void"]), new objj_method(sel_getUid("tileSize"), function $_CPDatePickerMonthView__tileSize(self, _cmd)
{
    return objj_msgSend(self._datePicker, "valueForThemeAttribute:", "size-tile");
}
,["CGSize"]), new objj_method(sel_getUid("startOfWeekForDate:"), function $_CPDatePickerMonthView__startOfWeekForDate_(self, _cmd, aDate)
{
    var day = aDate.getDay();
    if (!objj_msgSend(self._datePicker, "_isAmericanFormat"))
        return (day + 6) % 7;
    return day;
}
,["int","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerMonthView__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerMonthView").super_class }, "setEnabled:", aBoolean);
    objj_msgSend(self, "reloadData");
}
,["void","BOOL"]), new objj_method(sel_getUid("indexOfTileForEvent:"), function $_CPDatePickerMonthView__indexOfTileForEvent_(self, _cmd, anEvent)
{
    var locationInView = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil),
        tileSize = objj_msgSend(self, "tileSize");
    var rowIndex = FLOOR(locationInView.y / tileSize.height),
        columnIndex = FLOOR(locationInView.x / tileSize.width);
    columnIndex = MIN(MAX(columnIndex, 0), 6);
    rowIndex = MIN(MAX(rowIndex, 0), 5);
    var tileIndex = rowIndex * 7 + columnIndex;
    return tileIndex;
}
,["CPInteger","CPEvent"]), new objj_method(sel_getUid("reloadData"), function $_CPDatePickerMonthView__reloadData(self, _cmd)
{
    if (!self._date)
        return;
    var currentMonth = self._date,
        startOfMonthDay = objj_msgSend(self, "startOfWeekForDate:", currentMonth),
        daysInPreviousMonth = objj_msgSend(self._previousMonth, "_daysInMonth"),
        firstDayToShowInPreviousMonth = daysInPreviousMonth - startOfMonthDay,
        currentDate = new Date(self._previousMonth.getFullYear(), self._previousMonth.getMonth(), firstDayToShowInPreviousMonth),
        now = objj_msgSend(CPDate, "date"),
        dateValue = objj_msgSend(self._datePicker, "dateValue");
    for (var i = 0; i < objj_msgSend(self._dayTiles, "count"); i++)
    {
        var dayTile = self._dayTiles[i];
        currentDate.setTime(currentDate.getTime() + 90000000);
        objj_msgSend(currentDate, "_resetToMidnight");
        var isPresentMonth = now.getMonth() == currentDate.getMonth() && now.getFullYear() == currentDate.getFullYear();
        objj_msgSend(dayTile, "setDate:", objj_msgSend(currentDate, "copy"));
        objj_msgSend(dayTile, "setStringValue:", currentDate.getDate());
        objj_msgSend(dayTile, "setDisabled:", !objj_msgSend(self, "isEnabled") || currentDate.getMonth() !== currentMonth.getMonth());
        objj_msgSend(dayTile, "setHighlighted:", isPresentMonth && currentDate.getDate() == now.getDate());
    }
    objj_msgSend(self, "_selectDate:timeInterval:", objj_msgSend(self._datePicker, "dateValue"), objj_msgSend(self._datePicker, "timeInterval"));
}
,["void"]), new objj_method(sel_getUid("_selectDate:timeInterval:"), function $_CPDatePickerMonthView___selectDate_timeInterval_(self, _cmd, aStartDate, anInterval)
{
    var endDate = objj_msgSend(objj_msgSend(CPDate, "alloc"), "initWithTimeInterval:sinceDate:", anInterval, aStartDate),
        tilesCount = objj_msgSend(self._dayTiles, "count");
    aStartDate = objj_msgSend(aStartDate, "copy");
    objj_msgSend(aStartDate, "_resetToMidnight");
    objj_msgSend(endDate, "_resetToMidnight");
    for (var i = 0; i < tilesCount; i++)
    {
        var tile = self._dayTiles[i],
            tileDate = objj_msgSend(objj_msgSend(tile, "date"), "copy"),
            selected = NO;
        objj_msgSend(tileDate, "_resetToMidnight");
        if (aStartDate)
            selected = tileDate >= aStartDate && tileDate <= endDate;
        objj_msgSend(tile, "setSelected:", selected);
    }
}
,["void","CPDate","CPInteger"]), new objj_method(sel_getUid("tile"), function $_CPDatePickerMonthView__tile(self, _cmd)
{
    var tileSize = objj_msgSend(self, "tileSize"),
        width = tileSize.width,
        height = tileSize.height,
        tilesCount = objj_msgSend(self._dayTiles, "count"),
        borderWidth = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"),
        tileIndex;
    for (tileIndex = 0; tileIndex < tilesCount; tileIndex++)
    {
        var dayInWeek = tileIndex % 7,
            weekInMonth = (tileIndex - dayInWeek) / 7,
            tileFrame = CGRectMake(dayInWeek * width, weekInMonth * height, width + borderWidth, height + borderWidth);
        objj_msgSend(self._dayTiles[tileIndex], "setFrame:", tileFrame);
    }
    objj_msgSend(self, "reloadData");
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerMonthView__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerMonthView").super_class }, "layoutSubviews");
    objj_msgSend(self, "tile");
    objj_msgSend(self._dayTiles, "makeObjectsPerformSelector:", sel_getUid("setNeedsLayout"));
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPDatePickerMonthView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerMonthView").super_class }, "drawRect:", aRect);
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        width = objj_msgSend(self, "tileSize").width,
        height = objj_msgSend(self, "tileSize").height,
        isBorderPair = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width") % 2 == 0;
    CGContextBeginPath(context);
    CGContextSetStrokeColor(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "border-color", objj_msgSend(self._datePicker, "themeState")));
    CGContextSetLineWidth(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"));
    if (objj_msgSend(self._datePicker, "isBordered"))
    {
        for (var i = 0; i < 6; i++)
        {
            var y = i * height;
            if (!isBorderPair)
                y += 0.5;
            CGContextMoveToPoint(context, 0, y);
            CGContextAddLineToPoint(context, objj_msgSend(self, "bounds").size.width, y);
        }
        for (var i = 0; i < 7; i++)
        {
            var x = i * width;
            if (!isBorderPair)
                x += 0.5;
            CGContextMoveToPoint(context, x, 0);
            CGContextAddLineToPoint(context, x, objj_msgSend(self, "bounds").size.height);
        }
    }
    else
    {
        var y = 0;
        if (!isBorderPair)
            y += 0.5;
        CGContextMoveToPoint(context, 0, y);
        CGContextAddLineToPoint(context, objj_msgSend(self, "bounds").size.width, y);
    }
    CGContextStrokePath(context);
    CGContextClosePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("mouseDown:"), function $_CPDatePickerMonthView__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    var dayTile = objj_msgSend(self._dayTiles, "objectAtIndex:", objj_msgSend(self, "indexOfTileForEvent:", anEvent)),
        dateTile = objj_msgSend(objj_msgSend(dayTile, "date"), "copy"),
        dateValue = objj_msgSend(self._datePicker, "dateValue");
    self._clickDate = objj_msgSend(dateTile, "copy");
    self._dragDate = nil;
    self._indexDayTile = -1;
    self._eventDragged = nil;
    if (objj_msgSend(dayTile, "date").getMonth() == self._date.getMonth())
    {
        var minDate = objj_msgSend(objj_msgSend(self._datePicker, "minDate"), "copy"),
            maxDate = objj_msgSend(objj_msgSend(self._datePicker, "maxDate"), "copy");
        objj_msgSend(minDate, "_resetToMidnight");
        objj_msgSend(maxDate, "_resetToLastSeconds");
        if (dateTile >= minDate && dateTile <= maxDate)
            objj_msgSend(self._datePicker, "_setDateValue:timeInterval:", objj_msgSend(self, "_hoursMinutesSecondsFromDatePickerForDate:", dateTile), 0);
    }
    else
    {
        if (self._date.getMonth() - objj_msgSend(dayTile, "date").getMonth() == 1 || self._date.getFullYear() - objj_msgSend(dayTile, "date").getFullYear() == 1)
            objj_msgSend(self._delegate, "_previousMonth:", self);
        else
            objj_msgSend(self._delegate, "_nextMonth:", self);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseDragged:"), function $_CPDatePickerMonthView__mouseDragged_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled") || !CGRectContainsPoint(objj_msgSend(self, "bounds"), objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil)))
        return;
    var dayTile = objj_msgSend(self._dayTiles, "objectAtIndex:", objj_msgSend(self, "indexOfTileForEvent:", anEvent)),
        dateTile = objj_msgSend(objj_msgSend(dayTile, "date"), "copy"),
        dateValue = objj_msgSend(self._datePicker, "dateValue");
    self._dragDate = objj_msgSend(dateTile, "copy");
    self._indexDayTile = objj_msgSend(self, "indexOfTileForEvent:", anEvent);
    self._eventDragged = anEvent;
    if (objj_msgSend(self._datePicker, "datePickerMode") == CPSingleDateMode)
    {
        if (objj_msgSend(dayTile, "date").getMonth() == self._date.getMonth())
        {
            objj_msgSend(self._timerMonth, "invalidate");
            self._isMonthJustChanged = NO;
            objj_msgSend(self._datePicker, "_setDateValue:timeInterval:", objj_msgSend(self, "_hoursMinutesSecondsFromDatePickerForDate:", dateTile), 0);
        }
        else if (!self._isMonthJustChanged)
        {
            objj_msgSend(self._timerMonth, "invalidate");
            self._isMonthJustChanged = NO;
            if (self._date.getMonth() - objj_msgSend(dayTile, "date").getMonth() == 1 || self._date.getFullYear() - objj_msgSend(dayTile, "date").getFullYear() == 1)
                objj_msgSend(self._delegate, "_previousMonth:", self);
            else
                objj_msgSend(self._delegate, "_nextMonth:", self);
        }
    }
    else
    {
        if (dateTile.getMonth() == self._date.getMonth() || !self._isMonthJustChanged)
        {
            objj_msgSend(self._timerMonth, "invalidate");
            self._isMonthJustChanged = NO;
            var dateValueAtMidnight = objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "copy");
            objj_msgSend(dateValueAtMidnight, "_resetToMidnight");
            if (dateTile < self._clickDate)
                objj_msgSend(self._datePicker, "_setDateValue:timeInterval:", objj_msgSend(self, "_hoursMinutesSecondsFromDatePickerForDate:", dateTile), objj_msgSend(self._clickDate, "timeIntervalSinceDate:", dateTile));
            else if (objj_msgSend(objj_msgSend(dayTile, "date"), "isEqualToDate:", self._clickDate))
                objj_msgSend(self._datePicker, "_setDateValue:timeInterval:", objj_msgSend(self, "_hoursMinutesSecondsFromDatePickerForDate:", dateTile), 0);
            else
                objj_msgSend(self._datePicker, "_setDateValue:timeInterval:", objj_msgSend(self, "_hoursMinutesSecondsFromDatePickerForDate:", self._clickDate), objj_msgSend(dateTile, "timeIntervalSinceDate:", dateValueAtMidnight));
        }
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $_CPDatePickerMonthView__mouseUp_(self, _cmd, anEvent)
{
    objj_msgSend(self._timerMonth, "invalidate");
    self._dragDate = nil;
    self._clickDate = nil;
    self._isMonthJustChanged = NO;
    self._indexDayTile = -1;
    self._eventDragged = nil;
}
,["void","CPEvent"]), new objj_method(sel_getUid("_timerNextMonthEvent:"), function $_CPDatePickerMonthView___timerNextMonthEvent_(self, _cmd, anEvent)
{
    if (self._isMonthJustChanged)
    {
        self._dragDate.setMonth(self._date.getMonth() + 1);
        objj_msgSend(self._delegate, "_nextMonth:", self);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("_timerPreviousMonthEvent:"), function $_CPDatePickerMonthView___timerPreviousMonthEvent_(self, _cmd, anEvent)
{
    if (self._isMonthJustChanged)
    {
        self._dragDate.setMonth(self._date.getMonth() - 1);
        objj_msgSend(self._delegate, "_previousMonth:", self);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("_hoursMinutesSecondsFromDatePickerForDate:"), function $_CPDatePickerMonthView___hoursMinutesSecondsFromDatePickerForDate_(self, _cmd, aDate)
{
    var dateValue = objj_msgSend(self._datePicker, "dateValue");
    aDate.setHours(dateValue.getHours());
    aDate.setMinutes(dateValue.getMinutes());
    aDate.setSeconds(dateValue.getSeconds());
    return aDate;
}
,["CPDate","CPDate"])]);
}{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerDayView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_date"), new objj_ivar("_isDisabled"), new objj_ivar("_isHighlighted"), new objj_ivar("_isSelected"), new objj_ivar("_datePicker"), new objj_ivar("_textField")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("date"), function $_CPDatePickerDayView__date(self, _cmd)
{
    return self._date;
}
,["CPDate"]), new objj_method(sel_getUid("setDate:"), function $_CPDatePickerDayView__setDate_(self, _cmd, newValue)
{
    self._date = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("initWithFrame:withDatePicker:"), function $_CPDatePickerDayView__initWithFrame_withDatePicker_(self, _cmd, aFrame, aDatePicker)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerDayView").super_class }, "initWithFrame:", aFrame))
    {
        objj_msgSend(self, "setHitTests:", NO);
        self._datePicker = aDatePicker;
        self._textField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateNormal), "font", CPThemeStateNormal);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateNormal), "text-color", CPThemeStateNormal);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateSelected), "font", CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateDisabled), "font", CPThemeStateDisabled);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateDisabled | CPThemeStateSelected), "font", CPThemeStateDisabled | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateDisabled | CPThemeStateSelected), "text-color", CPThemeStateDisabled | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateDisabled | CPThemeStateSelected), "text-shadow-color", CPThemeStateDisabled | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateDisabled | CPThemeStateSelected), "text-shadow-offset", CPThemeStateDisabled | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateHighlighted), "font", CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateHighlighted), "text-color", CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateHighlighted), "text-shadow-color", CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateHighlighted), "text-shadow-offset", CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateHighlighted | CPThemeStateSelected), "font", CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateHighlighted | CPThemeStateSelected), "text-color", CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateHighlighted | CPThemeStateSelected), "text-shadow-color", CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateHighlighted | CPThemeStateSelected), "text-shadow-offset", CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected), "font", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected), "text-color", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected), "text-shadow-color", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected), "text-shadow-offset", CPThemeStateDisabled | CPThemeStateHighlighted | CPThemeStateSelected);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-font", CPThemeStateDisabled | CPThemeStateHighlighted), "font", CPThemeStateDisabled | CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-color", CPThemeStateDisabled | CPThemeStateHighlighted), "text-color", CPThemeStateDisabled | CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-color", CPThemeStateDisabled | CPThemeStateHighlighted), "text-shadow-color", CPThemeStateDisabled | CPThemeStateHighlighted);
        objj_msgSend(self._textField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "tile-text-shadow-offset", CPThemeStateDisabled | CPThemeStateHighlighted), "text-shadow-offset", CPThemeStateDisabled | CPThemeStateHighlighted);
        objj_msgSend(self, "addSubview:", self._textField);
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect","CPDatePicker"]), new objj_method(sel_getUid("setThemeState:"), function $_CPDatePickerDayView__setThemeState_(self, _cmd, aState)
{
    objj_msgSend(self._textField, "setThemeState:", aState);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerDayView").super_class }, "setThemeState:", aState);
}
,["void","CPThemeState"]), new objj_method(sel_getUid("unsetThemeState:"), function $_CPDatePickerDayView__unsetThemeState_(self, _cmd, aState)
{
    objj_msgSend(self._textField, "unsetThemeState:", aState);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerDayView").super_class }, "unsetThemeState:", aState);
}
,["void","CPThemeState"]), new objj_method(sel_getUid("setSelected:"), function $_CPDatePickerDayView__setSelected_(self, _cmd, shouldBeSelected)
{
    if (self._isSelected === shouldBeSelected)
        return;
    self._isSelected = shouldBeSelected;
    if (self._isSelected)
        objj_msgSend(self, "setThemeState:", CPThemeStateSelected);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateSelected);
}
,["void","BOOL"]), new objj_method(sel_getUid("setDisabled:"), function $_CPDatePickerDayView__setDisabled_(self, _cmd, shouldBeDisabled)
{
    if (self._isDisabled === shouldBeDisabled)
        return;
    self._isDisabled = shouldBeDisabled;
    if (self._isDisabled)
        objj_msgSend(self, "setThemeState:", CPThemeStateDisabled);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateDisabled);
}
,["void","BOOL"]), new objj_method(sel_getUid("setHighlighted:"), function $_CPDatePickerDayView__setHighlighted_(self, _cmd, shouldBeHighlighted)
{
    if (self._isHighlighted === shouldBeHighlighted)
        return;
    self._isHighlighted = shouldBeHighlighted;
    if (self._isHighlighted)
        objj_msgSend(self, "setThemeState:", CPThemeStateHighlighted);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateHighlighted);
}
,["void","BOOL"]), new objj_method(sel_getUid("setStringValue:"), function $_CPDatePickerDayView__setStringValue_(self, _cmd, aStringValue)
{
    objj_msgSend(self._textField, "setStringValue:", aStringValue);
    objj_msgSend(self._textField, "sizeToFit");
}
,["void","CPString"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerDayView__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    var bounds = objj_msgSend(self, "bounds");
    objj_msgSend(self._textField, "sizeToFit");
    objj_msgSend(self._textField, "setFrameOrigin:", CGPointMake(bounds.size.width / 2 - objj_msgSend(self._textField, "frameSize").width / 2 + objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"), bounds.size.height / 2 - objj_msgSend(self._textField, "frameSize").height / 2));
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPDatePickerDayView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerDayView").super_class }, "drawRect:", aRect);
    var themeState = objj_msgSend(self, "themeState"),
        context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    if (themeState & CPThemeStateSelected)
    {
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "bezel-color-calendar", themeState));
        CGContextSetLineWidth(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"));
        CGContextSetStrokeColor(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "border-color", themeState));
        CGContextAddRect(context, objj_msgSend(self, "bounds"));
        CGContextStrokeRect(context, objj_msgSend(self, "bounds"));
    }
    else
    {
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "clearColor"));
    }
}
,["void","CGRect"])]);
}{var the_class = objj_allocateClassPair(CPView, "_DatePickerBox"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_datePicker")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("datePicker"), function $_DatePickerBox__datePicker(self, _cmd)
{
    return self._datePicker;
}
,["CPDatePicker"]), new objj_method(sel_getUid("setDatePicker:"), function $_DatePickerBox__setDatePicker_(self, _cmd, newValue)
{
    self._datePicker = newValue;
}
,["void","CPDatePicker"]), new objj_method(sel_getUid("init"), function $_DatePickerBox__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_DatePickerBox").super_class }, "init"))
    {
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("drawRect:"), function $_DatePickerBox__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_DatePickerBox").super_class }, "drawRect:", aRect);
    if (objj_msgSend(self._datePicker, "isBordered"))
    {
        var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
            borderWidth = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width") / 2;
        CGContextBeginPath(context);
        CGContextSetStrokeColor(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "border-color", objj_msgSend(self._datePicker, "themeState")));
        CGContextSetLineWidth(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"));
        CGContextMoveToPoint(context, borderWidth, borderWidth);
        CGContextAddLineToPoint(context, aRect.size.width - borderWidth, borderWidth);
        CGContextAddLineToPoint(context, aRect.size.width - borderWidth, aRect.size.height - borderWidth);
        CGContextAddLineToPoint(context, borderWidth, aRect.size.height - borderWidth);
        CGContextAddLineToPoint(context, borderWidth, borderWidth);
        CGContextStrokePath(context);
        CGContextClosePath(context);
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $_DatePickerBox__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    if (objj_msgSend(self._datePicker, "drawsBackground"))
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._datePicker, "backgroundColor"));
    else
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "clearColor"));
}
,["void"])]);
}p;20;_CPDatePickerClock.jt;13436;@STATIC;1.0;i;8;CPView.ji;13;CPTextField.ji;13;CPImageView.ji;9;CALayer.jt;13355;objj_executeFile("CPView.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CALayer.j", YES);var RADIANS = Math.PI / 180;
{var the_class = objj_allocateClassPair(CPView, "_CPDatePickerClock"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isEnabled"), new objj_ivar("_rootLayer"), new objj_ivar("_hourHandLayer"), new objj_ivar("_minuteHandLayer"), new objj_ivar("_secondHandLayer"), new objj_ivar("_middleHandLayer"), new objj_ivar("_datePicker"), new objj_ivar("_PMAMTextField")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:datePicker:"), function $_CPDatePickerClock__initWithFrame_datePicker_(self, _cmd, aFrame, aDatePicker)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerClock").super_class }, "initWithFrame:", aFrame))
    {
        self._datePicker = aDatePicker;
        self._PMAMTextField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-font", CPThemeStateNormal), "font", CPThemeStateNormal);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-color", CPThemeStateNormal), "text-color", CPThemeStateNormal);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-font", CPThemeStateDisabled), "font", CPThemeStateDisabled);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
        objj_msgSend(self._PMAMTextField, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "clock-text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
        objj_msgSend(self, "addSubview:", self._PMAMTextField);
        var middleHandSize = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "middle-hand-size"),
            minuteHandSize = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "minute-hand-size"),
            hourHandSize = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "hour-hand-size"),
            secondHandSize = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "second-hand-size");
        self._hourHandLayer = objj_msgSend(objj_msgSend(HandLayer, "alloc"), "initWithSize:", hourHandSize);
        objj_msgSend(self._hourHandLayer, "setBounds:", CGRectMake(0, 0, aFrame.size.width, aFrame.size.height));
        objj_msgSend(self._hourHandLayer, "setAnchorPoint:", CGPointMakeZero());
        objj_msgSend(self._hourHandLayer, "setPosition:", CGPointMake(0.0, 0.0));
        self._minuteHandLayer = objj_msgSend(objj_msgSend(HandLayer, "alloc"), "initWithSize:", minuteHandSize);
        objj_msgSend(self._minuteHandLayer, "setBounds:", CGRectMake(0, 0, aFrame.size.width, aFrame.size.height));
        objj_msgSend(self._minuteHandLayer, "setAnchorPoint:", CGPointMakeZero());
        objj_msgSend(self._minuteHandLayer, "setPosition:", CGPointMake(0.0, 0.0));
        self._secondHandLayer = objj_msgSend(objj_msgSend(HandLayer, "alloc"), "initWithSize:", secondHandSize);
        objj_msgSend(self._secondHandLayer, "setBounds:", CGRectMake(0, 0, aFrame.size.width, aFrame.size.height));
        objj_msgSend(self._secondHandLayer, "setAnchorPoint:", CGPointMakeZero());
        objj_msgSend(self._secondHandLayer, "setPosition:", CGPointMake(0.0, 0.0));
        self._middleHandLayer = objj_msgSend(objj_msgSend(HandLayer, "alloc"), "initWithSize:", middleHandSize);
        objj_msgSend(self._middleHandLayer, "setBounds:", CGRectMake(0, 0, aFrame.size.width, aFrame.size.height));
        objj_msgSend(self._middleHandLayer, "setAnchorPoint:", CGPointMakeZero());
        objj_msgSend(self._middleHandLayer, "setPosition:", CGPointMake(0.0, 0.0));
        self._rootLayer = objj_msgSend(CALayer, "layer");
        objj_msgSend(self, "setWantsLayer:", YES);
        objj_msgSend(self, "setLayer:", self._rootLayer);
        objj_msgSend(self._hourHandLayer, "setNeedsDisplay");
        objj_msgSend(self._middleHandLayer, "setNeedsDisplay");
        objj_msgSend(self._secondHandLayer, "setNeedsDisplay");
        objj_msgSend(self._minuteHandLayer, "setNeedsDisplay");
        objj_msgSend(self._rootLayer, "addSublayer:", self._hourHandLayer);
        objj_msgSend(self._rootLayer, "addSublayer:", self._minuteHandLayer);
        objj_msgSend(self._rootLayer, "addSublayer:", self._secondHandLayer);
        objj_msgSend(self._rootLayer, "addSublayer:", self._middleHandLayer);
        objj_msgSend(self._rootLayer, "setNeedsDisplay");
    }
    return self;
}
,["id","CGRect","CPDatePicker"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerClock__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle || objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerClock").super_class }, "layoutSubviews");
    var bounds = objj_msgSend(self, "bounds"),
        dateValue = objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "copy");
    objj_msgSend(dateValue, "_dateWithTimeZone:", objj_msgSend(self._datePicker, "timeZone"));
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._datePicker, "currentValueForThemeAttribute:", "bezel-color-clock"));
    objj_msgSend(self._middleHandLayer, "setImage:", objj_msgSend(self._datePicker, "currentValueForThemeAttribute:", "middle-hand-image"));
    objj_msgSend(self._hourHandLayer, "setImage:", objj_msgSend(self._datePicker, "currentValueForThemeAttribute:", "hour-hand-image"));
    objj_msgSend(self._minuteHandLayer, "setImage:", objj_msgSend(self._datePicker, "currentValueForThemeAttribute:", "minute-hand-image"));
    objj_msgSend(self._secondHandLayer, "setImage:", objj_msgSend(self._datePicker, "currentValueForThemeAttribute:", "second-hand-image"));
    if (objj_msgSend(self._datePicker, "_isEnglishFormat"))
    {
        if (dateValue.getHours() > 11)
            objj_msgSend(self._PMAMTextField, "setStringValue:", "PM");
        else
            objj_msgSend(self._PMAMTextField, "setStringValue:", "AM");
        objj_msgSend(self._PMAMTextField, "sizeToFit");
        objj_msgSend(self._PMAMTextField, "setFrameOrigin:", CGPointMake(bounds.size.width / 2 - objj_msgSend(self._PMAMTextField, "frameSize").width / 2, bounds.size.height / 2 + 15));
        objj_msgSend(self._PMAMTextField, "setHidden:", NO);
    }
    else
    {
        objj_msgSend(self._PMAMTextField, "setHidden:", YES);
    }
    objj_msgSend(self._hourHandLayer, "setRotationRadians:", objj_msgSend(self, "_hourPositionRadianForDate:", dateValue));
    objj_msgSend(self._minuteHandLayer, "setRotationRadians:", objj_msgSend(self, "_minutePositionRadianForDate:", dateValue));
    objj_msgSend(self._secondHandLayer, "setRotationRadians:", objj_msgSend(self, "_secondPositionRadianForDate:", dateValue));
    objj_msgSend(self._PMAMTextField, "setEnabled:", self._isEnabled);
    objj_msgSend(self._hourHandLayer, "setEnabled:", self._isEnabled);
    objj_msgSend(self._middleHandLayer, "setEnabled:", self._isEnabled);
    objj_msgSend(self._secondHandLayer, "setEnabled:", self._isEnabled);
    objj_msgSend(self._minuteHandLayer, "setEnabled:", self._isEnabled);
    if ((objj_msgSend(self._datePicker, "datePickerElements") & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        objj_msgSend(self._secondHandLayer, "setHidden:", NO);
    else
        objj_msgSend(self._secondHandLayer, "setHidden:", YES);
    objj_msgSend(self._rootLayer, "setNeedsDisplay");
}
,["void"]), new objj_method(sel_getUid("_hourPositionRadianForDate:"), function $_CPDatePickerClock___hourPositionRadianForDate_(self, _cmd, aDate)
{
    var hours = aDate.getHours() + aDate.getMinutes() / 60;
    return 360 * hours / 12 * RADIANS;
}
,["float","CPDate"]), new objj_method(sel_getUid("_secondPositionRadianForDate:"), function $_CPDatePickerClock___secondPositionRadianForDate_(self, _cmd, aDate)
{
    return 360 * aDate.getSeconds() / 60 * RADIANS;
}
,["float","CPDate"]), new objj_method(sel_getUid("_minutePositionRadianForDate:"), function $_CPDatePickerClock___minutePositionRadianForDate_(self, _cmd, aDate)
{
    var minutes = aDate.getMinutes() + aDate.getSeconds() / 60;
    return 360 * minutes / 60 * RADIANS;
}
,["float","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerClock__setEnabled_(self, _cmd, shouldEnable)
{
    shouldEnable = !!shouldEnable;
    if (shouldEnable === self._isEnabled)
        return;
    self._isEnabled = shouldEnable;
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void","BOOL"])]);
}{var the_class = objj_allocateClassPair(CALayer, "HandLayer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isEnabled"), new objj_ivar("_image"), new objj_ivar("_imageLayer"), new objj_ivar("_rotationRadians")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isEnabled"), function $HandLayer__isEnabled(self, _cmd)
{
    return self._isEnabled;
}
,["BOOL"]), new objj_method(sel_getUid("setEnabled:"), function $HandLayer__setEnabled_(self, _cmd, newValue)
{
    self._isEnabled = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithSize:"), function $HandLayer__initWithSize_(self, _cmd, aSize)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("HandLayer").super_class }, "init"))
    {
        self._isEnabled = YES;
        self._imageLayer = objj_msgSend(CALayer, "layer");
        self._rotationRadians = 0;
        objj_msgSend(self._imageLayer, "setDelegate:", self);
        objj_msgSend(self._imageLayer, "setBounds:", CGRectMake(0.0, 0.0, aSize.width, aSize.height));
        objj_msgSend(self, "addSublayer:", self._imageLayer);
    }
    return self;
}
,["id","CGSize"]), new objj_method(sel_getUid("setBounds:"), function $HandLayer__setBounds_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("HandLayer").super_class }, "setBounds:", aRect);
    objj_msgSend(self._imageLayer, "setPosition:", CGPointMake(CGRectGetMidX(aRect), CGRectGetMidY(aRect)));
}
,["void","CGRect"]), new objj_method(sel_getUid("setImage:"), function $HandLayer__setImage_(self, _cmd, anImage)
{
    if (self._image === anImage)
        return;
    if (objj_msgSend(anImage, "isKindOfClass:", objj_msgSend(_CPCibCustomResource, "class")))
        self._image = objj_msgSend(anImage, "imageFromCoder:", nil);
    else
        self._image = anImage;
    objj_msgSend(self._imageLayer, "setNeedsDisplay");
}
,["void","CPImage"]), new objj_method(sel_getUid("setRotationRadians:"), function $HandLayer__setRotationRadians_(self, _cmd, radians)
{
    if (self._rotationRadians === radians)
        return;
    self._rotationRadians = radians;
    objj_msgSend(self._imageLayer, "setAffineTransform:", CGAffineTransformScale(CGAffineTransformMakeRotation(self._rotationRadians), 1.0, 1.0));
}
,["void","float"]), new objj_method(sel_getUid("setEnabled:"), function $HandLayer__setEnabled_(self, _cmd, shouldEnable)
{
    shouldEnable = !!shouldEnable;
    if (self._isEnabled === shouldEnable)
        return;
    self._isEnabled = shouldEnable;
    objj_msgSend(self, "setNeedsDisplay");
    objj_msgSend(self._imageLayer, "setNeedsDisplay");
}
,["void","BOOL"]), new objj_method(sel_getUid("imageDidLoad:"), function $HandLayer__imageDidLoad_(self, _cmd, anImage)
{
    objj_msgSend(self._imageLayer, "setNeedsDisplay");
}
,["void","CPImage"]), new objj_method(sel_getUid("drawLayer:inContext:"), function $HandLayer__drawLayer_inContext_(self, _cmd, aLayer, aContext)
{
    if (objj_msgSend(self._image, "loadStatus") != CPImageLoadStatusCompleted)
        objj_msgSend(self._image, "setDelegate:", self);
    else
        CGContextDrawImage(aContext, objj_msgSend(aLayer, "bounds"), self._image);
}
,["void","CALayer","CGContext"])]);
}p;24;_CPDatePickerTextField.jt;91216;@STATIC;1.0;i;11;CPControl.ji;8;CPFont.ji;13;CPTextField.ji;11;CPStepper.jI;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;19;Foundation/CPDate.jI;28;Foundation/CPDateFormatter.jI;21;Foundation/CPLocale.jt;91000;objj_executeFile("CPControl.j", YES);objj_executeFile("CPFont.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPStepper.j", YES);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPDate.j", NO);objj_executeFile("Foundation/CPDateFormatter.j", NO);objj_executeFile("Foundation/CPLocale.j", NO);var CPDatePickerElementTextFieldBecomeFirstResponder = "CPDatePickerElementTextFieldBecomeFirstResponder",
    CPDatePickerElementTextFieldAMPMChangedNotification = "CPDatePickerElementTextFieldAMPMChangedNotification";
var CPZeroKeyCode = 48,
    CPNineKeyCode = 57,
    CPMajAKeyCode = 65,
    CPMajPKeyCode = 80,
    CPAKeyCode = 97,
    CPPKeyCode = 112;
{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerTextField"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_firstTextField"), new objj_ivar("_lastTextField"), new objj_ivar("_currentTextField"), new objj_ivar("_datePickerElementView"), new objj_ivar("_datePicker"), new objj_ivar("_stepper"), new objj_ivar("_timerEdition")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("firstTextField"), function $_CPDatePickerTextField__firstTextField(self, _cmd)
{
    return self._firstTextField;
}
,["_CPDatePickerElementTextField"]), new objj_method(sel_getUid("setFirstTextField:"), function $_CPDatePickerTextField__setFirstTextField_(self, _cmd, newValue)
{
    self._firstTextField = newValue;
}
,["void","_CPDatePickerElementTextField"]), new objj_method(sel_getUid("lastTextField"), function $_CPDatePickerTextField__lastTextField(self, _cmd)
{
    return self._lastTextField;
}
,["_CPDatePickerElementTextField"]), new objj_method(sel_getUid("setLastTextField:"), function $_CPDatePickerTextField__setLastTextField_(self, _cmd, newValue)
{
    self._lastTextField = newValue;
}
,["void","_CPDatePickerElementTextField"]), new objj_method(sel_getUid("initWithFrame:withDatePicker:"), function $_CPDatePickerTextField__initWithFrame_withDatePicker_(self, _cmd, aFrame, aDatePicker)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerTextField").super_class }, "initWithFrame:", aFrame))
    {
        self._datePicker = aDatePicker;
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect","CPDatePicker"]), new objj_method(sel_getUid("_init"), function $_CPDatePickerTextField___init(self, _cmd)
{
    self._datePickerElementView = objj_msgSend(objj_msgSend(_CPDatePickerElementView, "alloc"), "initWithFrame:withDatePicker:", CGRectMakeZero(), self._datePicker);
    objj_msgSend(self, "addSubview:", self._datePickerElementView);
    self._stepper = objj_msgSend(CPStepper, "stepper");
    objj_msgSend(self._stepper, "setTarget:", self);
    objj_msgSend(self._stepper, "setAction:", sel_getUid("_clickStepper:"));
    objj_msgSend(self, "addSubview:", self._stepper);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_datePickerElementTextFieldBecomeFirstResponder:"), CPDatePickerElementTextFieldBecomeFirstResponder, self);
    objj_msgSend(self, "setNeedsLayout");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("becomeFirstResponder"), function $_CPDatePickerTextField__becomeFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $_CPDatePickerTextField__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $_CPDatePickerTextField__resignFirstResponder(self, _cmd)
{
    objj_msgSend(self, "_endTimer");
    objj_msgSend(self._currentTextField, "unbind:", "objectValue");
    objj_msgSend(self._currentTextField, "makeDeselectable");
    self._currentTextField = nil;
    objj_msgSend(self._stepper, "setObjectValue:", 0);
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("setDateValue:"), function $_CPDatePickerTextField__setDateValue_(self, _cmd, aDateValue)
{
    var dateValue = objj_msgSend(aDateValue, "copy");
    objj_msgSend(dateValue, "_dateWithTimeZone:", objj_msgSend(self._datePicker, "timeZone"));
    objj_msgSend(self._datePickerElementView, "setDateValue:", dateValue);
}
,["void","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerTextField__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerTextField").super_class }, "setEnabled:", aBoolean);
    objj_msgSend(self._stepper, "setEnabled:", aBoolean);
    objj_msgSend(self._datePickerElementView, "setEnabled:", aBoolean);
}
,["void","BOOL"]), new objj_method(sel_getUid("_datePickerElementTextFieldBecomeFirstResponder:"), function $_CPDatePickerTextField___datePickerElementTextFieldBecomeFirstResponder_(self, _cmd, aNotification)
{
    if (objj_msgSend(objj_msgSend(aNotification, "userInfo"), "objectForKey:", "textField") == self._currentTextField)
        return;
    objj_msgSend(self, "_selectTextField:", objj_msgSend(objj_msgSend(aNotification, "userInfo"), "objectForKey:", "textField"));
    if (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") != self._datePicker)
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self._datePicker);
}
,["void","CPNotification"]), new objj_method(sel_getUid("_selecteTextFieldWithFlags:"), function $_CPDatePickerTextField___selecteTextFieldWithFlags_(self, _cmd, flags)
{
    objj_msgSend(self._datePickerElementView, "_updateResponderTextField");
    if (!self._currentTextField)
    {
        if (flags & CPShiftKeyMask)
            objj_msgSend(self, "_selectTextField:", self._lastTextField);
        else
            objj_msgSend(self, "_selectTextField:", self._firstTextField);
    }
}
,["void","unsigned"]), new objj_method(sel_getUid("_selectTextField:"), function $_CPDatePickerTextField___selectTextField_(self, _cmd, aDatePickerElementTextField)
{
    if (self._currentTextField == aDatePickerElementTextField)
        return;
    objj_msgSend(self, "_endTimer");
    objj_msgSend(self._currentTextField, "unbind:", "objectValue");
    objj_msgSend(self._currentTextField, "makeDeselectable");
    self._currentTextField = aDatePickerElementTextField;
    objj_msgSend(self._currentTextField, "makeSelectable");
    if (objj_msgSend(self._currentTextField, "dateType") != CPAMPMDateType)
    {
        objj_msgSend(self._stepper, "setObjectValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")));
        objj_msgSend(self._stepper, "setMaxValue:", objj_msgSend(self._currentTextField, "maxNumber"));
        objj_msgSend(self._stepper, "setMinValue:", objj_msgSend(self._currentTextField, "minNumber"));
        objj_msgSend(self._currentTextField, "bind:toObject:withKeyPath:options:", "objectValue", self._stepper, "objectValue", nil);
    }
}
,["void","_CPDatePickerElementTextField"]), new objj_method(sel_getUid("_clickStepper:"), function $_CPDatePickerTextField___clickStepper_(self, _cmd, sender)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "firstResponder") != self._datePicker || !self._currentTextField)
    {
        var isUp = NO;
        if (objj_msgSend(sender, "objectValue") == 1)
            isUp = YES;
        objj_msgSend(self, "_selectTextField:", self._firstTextField);
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", self._datePicker);
        if (isUp)
            objj_msgSend(self._stepper, "setDoubleValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")) + 1);
        else
            objj_msgSend(self._stepper, "setDoubleValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")) - 1);
        return;
    }
    if (objj_msgSend(self._currentTextField, "dateType") != CPAMPMDateType)
    {
        objj_msgSend(sender, "setDoubleValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")));
    }
    else
    {
        if (objj_msgSend(objj_msgSend(self._currentTextField, "stringValue"), "isEqualToString:", "PM"))
            objj_msgSend(self._currentTextField, "setStringValue:", "AM");
        else
            objj_msgSend(self._currentTextField, "setStringValue:", "PM");
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPDatePickerElementTextFieldAMPMChangedNotification, self._currentTextField, nil);
    }
}
,["void","id"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $_CPDatePickerTextField__performKeyEquivalent_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled") || !self._currentTextField || objj_msgSend(objj_msgSend(self, "window"), "firstResponder") != self._datePicker)
        return NO;
    var key = objj_msgSend(anEvent, "charactersIgnoringModifiers");
    if (key == CPUpArrowFunctionKey)
    {
        objj_msgSend(self, "_endTimer");
        objj_msgSend(self._stepper, "setDoubleValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")));
        objj_msgSend(self._stepper, "performClickUp:", self);
        return YES;
    }
    if (key == CPDownArrowFunctionKey)
    {
        objj_msgSend(self, "_endTimer");
        objj_msgSend(self._stepper, "setDoubleValue:", parseInt(objj_msgSend(self._currentTextField, "objectValue")));
        objj_msgSend(self._stepper, "performClickDown:", self);
        return YES;
    }
    if (key == CPLeftArrowFunctionKey || objj_msgSend(anEvent, "keyCode") == CPTabKeyCode && objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask)
    {
        if (self._currentTextField == self._firstTextField && objj_msgSend(anEvent, "keyCode") == CPTabKeyCode)
        {
            if (objj_msgSend(self._datePicker, "previousKeyView"))
                objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", objj_msgSend(self._datePicker, "previousKeyView"));
            return YES;
        }
        objj_msgSend(self, "_selectTextField:", objj_msgSend(self._currentTextField, "previousTextField"));
        return YES;
    }
    if (key == CPRightArrowFunctionKey || objj_msgSend(anEvent, "keyCode") == CPTabKeyCode)
    {
        if (self._currentTextField == self._lastTextField && objj_msgSend(anEvent, "keyCode") == CPTabKeyCode)
        {
            if (objj_msgSend(self._datePicker, "nextKeyView"))
                objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", objj_msgSend(self._datePicker, "nextKeyView"));
            return YES;
        }
        objj_msgSend(self, "_selectTextField:", objj_msgSend(self._currentTextField, "nextTextField"));
        return YES;
    }
    if (objj_msgSend(anEvent, "keyCode") == CPReturnKeyCode && self._timerEdition)
    {
        objj_msgSend(self._timerEdition, "fire");
        return YES;
    }
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("keyDown:"), function $_CPDatePickerTextField__keyDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    if (objj_msgSend(self._datePicker, "_isEnglishFormat") && objj_msgSend(self._currentTextField, "dateType") == CPAMPMDateType && (objj_msgSend(anEvent, "keyCode") == CPAKeyCode || objj_msgSend(anEvent, "keyCode") == CPPKeyCode || objj_msgSend(anEvent, "keyCode") == CPMajAKeyCode || objj_msgSend(anEvent, "keyCode") == CPMajPKeyCode))
    {
        if (objj_msgSend(anEvent, "keyCode") == CPAKeyCode || objj_msgSend(anEvent, "keyCode") == CPMajAKeyCode)
            objj_msgSend(self._currentTextField, "setStringValue:", "AM");
        else
            objj_msgSend(self._currentTextField, "setStringValue:", "PM");
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPDatePickerElementTextFieldAMPMChangedNotification, self._currentTextField, nil);
        return;
    }
    if (objj_msgSend(anEvent, "keyCode") != CPDeleteKeyCode && objj_msgSend(anEvent, "keyCode") != CPDeleteForwardKeyCode && objj_msgSend(anEvent, "keyCode") < CPZeroKeyCode || objj_msgSend(anEvent, "keyCode") > CPNineKeyCode)
        return;
    if (!self._timerEdition)
    {
        self._timerEdition = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 2, self, sel_getUid("_timerKeyEvent:"), nil, NO);
        if (objj_msgSend(anEvent, "keyCode") == CPDeleteKeyCode || objj_msgSend(anEvent, "keyCode") == CPDeleteForwardKeyCode)
            objj_msgSend(self._currentTextField, "setStringKeyValue:", "");
        else
            objj_msgSend(self._currentTextField, "setStringKeyValue:", objj_msgSend(anEvent, "characters"));
    }
    else
    {
        var newFireDate = objj_msgSend(CPDate, "date"),
            key;
        newFireDate.setSeconds(newFireDate.getSeconds() + 2);
        objj_msgSend(self._timerEdition, "setFireDate:", newFireDate);
        if (objj_msgSend(anEvent, "keyCode") == CPDeleteKeyCode || objj_msgSend(anEvent, "keyCode") == CPDeleteForwardKeyCode)
            key = objj_msgSend(objj_msgSend(self._currentTextField, "stringValue"), "substringToIndex:", objj_msgSend(objj_msgSend(self._currentTextField, "stringValue"), "length") - 1);
        else
            key = objj_msgSend(CPString, "stringWithFormat:", "%i%i", parseInt(objj_msgSend(self._currentTextField, "stringValue")), parseInt(objj_msgSend(anEvent, "characters")));
        objj_msgSend(self._currentTextField, "setStringKeyValue:", key);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("_timerKeyEvent:"), function $_CPDatePickerTextField___timerKeyEvent_(self, _cmd, sender)
{
    self._timerEdition = nil;
    if (!objj_msgSend(objj_msgSend(self._currentTextField, "stringValue"), "isEqualToString:", "  ") && !objj_msgSend(objj_msgSend(self._currentTextField, "stringValue"), "isEqualToString:", "    "))
    {
        var value = objj_msgSend(self._currentTextField, "stringValue");
        if (objj_msgSend(self._datePicker, "_isEnglishFormat") && objj_msgSend(self._currentTextField, "dateType") == CPHourDateType)
        {
            if (!objj_msgSend(self._datePickerElementView, "_isAMHour") && value != 12)
                value = parseInt(value) + 12;
            if (value == 12 && !objj_msgSend(self._datePickerElementView, "_isAMHour"))
                value = 12;
            else if (value == 12)
                value = 0;
        }
        objj_msgSend(self._currentTextField, "setObjectValue:", value);
    }
    else
    {
        objj_msgSend(self._currentTextField, "setObjectValue:", "0");
    }
}
,["void","id"]), new objj_method(sel_getUid("_endTimer"), function $_CPDatePickerTextField___endTimer(self, _cmd)
{
    if (self._timerEdition)
    {
        objj_msgSend(self._timerEdition, "invalidate");
        objj_msgSend(self, "_timerKeyEvent:", self._timerEdition);
        self._timerEdition = nil;
    }
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerTextField__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPClockAndCalendarDatePickerStyle)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerTextField").super_class }, "layoutSubviews");
    var frameSize = CGSizeMakeZero(),
        bezelInset = objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "bezel-inset", objj_msgSend(self._datePicker, "themeState"));
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldAndStepperDatePickerStyle)
    {
        frameSize = CGSizeMake(CGRectGetWidth(objj_msgSend(self._datePicker, "frame")) - CGRectGetWidth(objj_msgSend(self._stepper, "frame")) - objj_msgSend(self._datePicker, "valueForThemeAttribute:", "stepper-margin"), CGRectGetHeight(objj_msgSend(self._datePicker, "frame")));
        frameSize.width -= bezelInset.left;
        frameSize.height -= bezelInset.top + bezelInset.bottom;
        objj_msgSend(self._datePickerElementView, "setFrameSize:", frameSize);
        objj_msgSend(self._datePickerElementView, "setFrameOrigin:", CGPointMake(bezelInset.left, bezelInset.top));
        objj_msgSend(self._stepper, "setHidden:", NO);
    }
    else if (objj_msgSend(self._datePicker, "datePickerStyle") == CPTextFieldDatePickerStyle)
    {
        frameSize = CGSizeMake(CGRectGetWidth(objj_msgSend(self._datePicker, "frame")), CGRectGetHeight(objj_msgSend(self._datePicker, "frame")));
        frameSize.width -= bezelInset.left + bezelInset.right;
        frameSize.height -= bezelInset.top + bezelInset.bottom;
        objj_msgSend(self._datePickerElementView, "setFrameSize:", frameSize);
        objj_msgSend(self._datePickerElementView, "setFrameOrigin:", CGPointMake(bezelInset.left, bezelInset.top));
        objj_msgSend(self._stepper, "setHidden:", YES);
    }
    objj_msgSend(self._stepper, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._datePickerElementView, "frame")) + objj_msgSend(self._datePicker, "valueForThemeAttribute:", "stepper-margin"), bezelInset.top + CGRectGetHeight(objj_msgSend(self._datePickerElementView, "frame")) / 2 - CGRectGetHeight(objj_msgSend(self._stepper, "frame")) / 2));
    objj_msgSend(self._datePickerElementView, "setNeedsLayout");
}
,["void"])]);
}{var the_class = objj_allocateClassPair(CPControl, "_CPDatePickerElementView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_textFieldDay"), new objj_ivar("_textFieldMonth"), new objj_ivar("_textFieldYear"), new objj_ivar("_textFieldHour"), new objj_ivar("_textFieldMinute"), new objj_ivar("_textFieldSecond"), new objj_ivar("_textFieldPMAM"), new objj_ivar("_datePicker"), new objj_ivar("_textFieldSeparatorOne"), new objj_ivar("_textFieldSeparatorTwo"), new objj_ivar("_textFieldSeparatorThree"), new objj_ivar("_textFieldSeparatorFour")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:withDatePicker:"), function $_CPDatePickerElementView__initWithFrame_withDatePicker_(self, _cmd, aFrame, aDatePicker)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementView").super_class }, "init"))
    {
        self._datePicker = aDatePicker;
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect","CPDatePicker"]), new objj_method(sel_getUid("_init"), function $_CPDatePickerElementView___init(self, _cmd)
{
    self._textFieldDay = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldDay, "setBezeled:", NO);
    objj_msgSend(self._textFieldDay, "setBordered:", NO);
    objj_msgSend(self._textFieldDay, "setDateType:", CPDayDateType);
    objj_msgSend(self._textFieldDay, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldDay, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldDay);
    self._textFieldMonth = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldMonth, "setBezeled:", NO);
    objj_msgSend(self._textFieldMonth, "setBordered:", NO);
    objj_msgSend(self._textFieldMonth, "setDateType:", CPMonthDateType);
    objj_msgSend(self._textFieldMonth, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldMonth, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldMonth);
    self._textFieldYear = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldYear, "setBezeled:", NO);
    objj_msgSend(self._textFieldYear, "setBordered:", NO);
    objj_msgSend(self._textFieldYear, "setDateType:", CPYearDateType);
    objj_msgSend(self._textFieldYear, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldYear, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldYear);
    self._textFieldHour = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldHour, "setBezeled:", NO);
    objj_msgSend(self._textFieldHour, "setBordered:", NO);
    objj_msgSend(self._textFieldHour, "setDateType:", CPHourDateType);
    objj_msgSend(self._textFieldHour, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldHour, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldHour);
    self._textFieldMinute = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldMinute, "setBezeled:", NO);
    objj_msgSend(self._textFieldMinute, "setBordered:", NO);
    objj_msgSend(self._textFieldMinute, "setDateType:", CPMinuteDateType);
    objj_msgSend(self._textFieldMinute, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldMinute, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldMinute);
    self._textFieldSecond = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldSecond, "setBezeled:", NO);
    objj_msgSend(self._textFieldSecond, "setBordered:", NO);
    objj_msgSend(self._textFieldSecond, "setDateType:", CPSecondDateType);
    objj_msgSend(self._textFieldSecond, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldSecond, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldSecond);
    self._textFieldPMAM = objj_msgSend(_CPDatePickerElementTextField, "new");
    objj_msgSend(self._textFieldPMAM, "setBezeled:", NO);
    objj_msgSend(self._textFieldPMAM, "setBordered:", NO);
    objj_msgSend(self._textFieldPMAM, "setDateType:", CPAMPMDateType);
    objj_msgSend(self._textFieldPMAM, "setDatePicker:", self._datePicker);
    objj_msgSend(self._textFieldPMAM, "setAlignment:", CPRightTextAlignment);
    objj_msgSend(self, "addSubview:", self._textFieldPMAM);
    self._textFieldSeparatorOne = objj_msgSend(CPTextField, "labelWithTitle:", "/");
    self._textFieldSeparatorTwo = objj_msgSend(CPTextField, "labelWithTitle:", "/");
    self._textFieldSeparatorThree = objj_msgSend(CPTextField, "labelWithTitle:", ":");
    self._textFieldSeparatorFour = objj_msgSend(CPTextField, "labelWithTitle:", ":");
    objj_msgSend(self, "addSubview:", self._textFieldSeparatorOne);
    objj_msgSend(self, "addSubview:", self._textFieldSeparatorTwo);
    objj_msgSend(self, "addSubview:", self._textFieldSeparatorThree);
    objj_msgSend(self, "addSubview:", self._textFieldSeparatorFour);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_datePickerElementTextFieldAMPMChangedNotification:"), CPDatePickerElementTextFieldAMPMChangedNotification, self._textFieldPMAM);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("acceptFirstResponder"), function $_CPDatePickerElementView__acceptFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("setDateValue:"), function $_CPDatePickerElementView__setDateValue_(self, _cmd, aDateValue)
{
    objj_msgSend(self._textFieldDay, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getDate()));
    objj_msgSend(self._textFieldMonth, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getMonth() + 1));
    objj_msgSend(self._textFieldYear, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getFullYear()));
    objj_msgSend(self._textFieldHour, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getHours()));
    objj_msgSend(self._textFieldMinute, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getMinutes()));
    objj_msgSend(self._textFieldSecond, "setStringValue:", objj_msgSend(CPString, "stringWithFormat:", "%i", aDateValue.getSeconds()));
    if (aDateValue.getHours() > 11)
        objj_msgSend(self._textFieldPMAM, "setStringValue:", "PM");
    else
        objj_msgSend(self._textFieldPMAM, "setStringValue:", "AM");
}
,["void","CPDate"]), new objj_method(sel_getUid("setEnabled:"), function $_CPDatePickerElementView__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementView").super_class }, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldDay, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldMonth, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldYear, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldHour, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldMinute, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldSecond, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldSeparatorOne, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldSeparatorTwo, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldSeparatorThree, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldSeparatorFour, "setEnabled:", aBoolean);
    objj_msgSend(self._textFieldPMAM, "setEnabled:", aBoolean);
}
,["void","BOOL"]), new objj_method(sel_getUid("_isAMHour"), function $_CPDatePickerElementView___isAMHour(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._textFieldPMAM, "stringValue"), "isEqualToString:", "AM");
}
,["BOOL"]), new objj_method(sel_getUid("_datePickerElementTextFieldAMPMChangedNotification:"), function $_CPDatePickerElementView___datePickerElementTextFieldAMPMChangedNotification_(self, _cmd, aNotification)
{
    var value = objj_msgSend(objj_msgSend(aNotification, "object"), "stringValue"),
        dateValue = objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "copy"),
        d = objj_msgSend(dateValue, "copy");
    objj_msgSend(d, "_dateWithTimeZone:", objj_msgSend(self._datePicker, "timeZone"));
    if (objj_msgSend(value, "isEqualToString:", "PM"))
    {
        if (d.getHours() <= 11)
            dateValue.setHours(dateValue.getHours() + 12);
    }
    else
    {
        if (d.getHours() > 11)
            dateValue.setHours(dateValue.getHours() - 12);
    }
    objj_msgSend(self._datePicker, "setDateValue:", dateValue);
}
,["void","CPNotification"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDatePickerElementView__layoutSubviews(self, _cmd)
{
    if (objj_msgSend(self._datePicker, "datePickerStyle") == CPClockAndCalendarDatePickerStyle)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementView").super_class }, "layoutSubviews");
    var themeState = objj_msgSend(self._datePicker, "themeState");
    if (objj_msgSend(self._datePicker, "isBezeled") && objj_msgSend(self._datePicker, "drawsBackground") || objj_msgSend(self._datePicker, "isBordered") && objj_msgSend(self._datePicker, "drawsBackground"))
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "bezel-color", themeState));
    else if (objj_msgSend(self._datePicker, "drawsBackground"))
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._datePicker, "backgroundColor"));
    else
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(CPColor, "clearColor"));
    objj_msgSend(self, "_themeTextFields");
    objj_msgSend(self, "_updateResponderTextField");
    objj_msgSend(self, "_updateHiddenTextFields");
    objj_msgSend(self, "_sizeToFit");
    objj_msgSend(self, "_updatePositions");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPDatePickerElementView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementView").super_class }, "drawRect:", aRect);
    if ((objj_msgSend(self._datePicker, "isBordered") || objj_msgSend(self._datePicker, "isBezeled")) && !objj_msgSend(self._datePicker, "drawsBackground"))
    {
        var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
            borderWidth = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width") / 2,
            bezelInset = objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "bezel-inset", objj_msgSend(self._datePicker, "themeState"));
        CGContextBeginPath(context);
        CGContextSetStrokeColor(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "border-color", objj_msgSend(self._datePicker, "themeState")));
        CGContextSetLineWidth(context, objj_msgSend(self._datePicker, "valueForThemeAttribute:", "border-width"));
        CGContextMoveToPoint(context, borderWidth - bezelInset.left, borderWidth);
        CGContextAddLineToPoint(context, objj_msgSend(self, "bounds").size.width + bezelInset.left - borderWidth, borderWidth);
        CGContextAddLineToPoint(context, objj_msgSend(self, "bounds").size.width + bezelInset.left - borderWidth, objj_msgSend(self, "bounds").size.height - borderWidth);
        CGContextAddLineToPoint(context, borderWidth - bezelInset.left, objj_msgSend(self, "bounds").size.height - borderWidth);
        CGContextAddLineToPoint(context, borderWidth - bezelInset.left, borderWidth);
        CGContextStrokePath(context);
        CGContextClosePath(context);
    }
}
,["void","CGRect"]), new objj_method(sel_getUid("_themeTextFields"), function $_CPDatePickerElementView___themeTextFields(self, _cmd)
{
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldDay, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMonth, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldYear, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldHour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldMinute, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSecond, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:", objj_msgSend(self._datePicker, "valueForThemeAttribute:", "min-size-datepicker-textfield"), "min-size");
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateSelected), "bezel-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateSelected), "text-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateSelected), "text-shadow-color", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateSelected), "text-shadow-offset", CPThemeStateSelected);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateNormal), "bezel-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "datepicker-textfield-bezel-color", CPThemeStateDisabled), "bezel-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldPMAM, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorOne, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorTwo, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorThree, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateNormal), "content-inset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset-datepicker-textfield-separator", CPThemeStateSelected), "content-inset", CPThemeStateSelected);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textColor"), "text-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateNormal), "text-shadow-color", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateNormal), "text-shadow-offset", CPThemeStateNormal);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "textFont"), "font", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-color", CPThemeStateDisabled), "text-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-color", CPThemeStateDisabled), "text-shadow-color", CPThemeStateDisabled);
    objj_msgSend(self._textFieldSeparatorFour, "setValue:forThemeAttribute:inState:", objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "text-shadow-offset", CPThemeStateDisabled), "text-shadow-offset", CPThemeStateDisabled);
}
,["void"]), new objj_method(sel_getUid("_updateHiddenTextFields"), function $_CPDatePickerElementView___updateHiddenTextFields(self, _cmd)
{
    var datePickerElements = objj_msgSend(self._datePicker, "datePickerElements"),
        isEnglishFormat = objj_msgSend(self._datePicker, "_isEnglishFormat");
    if (datePickerElements & CPYearMonthDatePickerElementFlag)
    {
        objj_msgSend(self._textFieldDay, "setHidden:", YES);
        objj_msgSend(self._textFieldMonth, "setHidden:", NO);
        objj_msgSend(self._textFieldYear, "setHidden:", NO);
        objj_msgSend(self._textFieldSeparatorTwo, "setHidden:", NO);
        objj_msgSend(self._textFieldSeparatorOne, "setHidden:", YES);
        if ([datePickerElements & CPYearMonthDayDatePickerElementFlag] == CPYearMonthDayDatePickerElementFlag)
        {
            objj_msgSend(self._textFieldDay, "setHidden:", NO);
            objj_msgSend(self._textFieldSeparatorOne, "setHidden:", NO);
        }
    }
    else
    {
        objj_msgSend(self._textFieldMonth, "setHidden:", YES);
        objj_msgSend(self._textFieldYear, "setHidden:", YES);
        objj_msgSend(self._textFieldDay, "setHidden:", YES);
        objj_msgSend(self._textFieldSeparatorTwo, "setHidden:", YES);
        objj_msgSend(self._textFieldSeparatorOne, "setHidden:", YES);
    }
    if (datePickerElements & CPHourMinuteDatePickerElementFlag)
    {
        objj_msgSend(self._textFieldHour, "setHidden:", NO);
        objj_msgSend(self._textFieldMinute, "setHidden:", NO);
        objj_msgSend(self._textFieldSecond, "setHidden:", YES);
        objj_msgSend(self._textFieldSeparatorThree, "setHidden:", NO);
        objj_msgSend(self._textFieldSeparatorFour, "setHidden:", YES);
        if (isEnglishFormat)
            objj_msgSend(self._textFieldPMAM, "setHidden:", NO);
        else
            objj_msgSend(self._textFieldPMAM, "setHidden:", YES);
        if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        {
            objj_msgSend(self._textFieldSecond, "setHidden:", NO);
            objj_msgSend(self._textFieldSeparatorFour, "setHidden:", NO);
        }
    }
    else
    {
        objj_msgSend(self._textFieldHour, "setHidden:", YES);
        objj_msgSend(self._textFieldMinute, "setHidden:", YES);
        objj_msgSend(self._textFieldSecond, "setHidden:", YES);
        objj_msgSend(self._textFieldSeparatorThree, "setHidden:", YES);
        objj_msgSend(self._textFieldSeparatorFour, "setHidden:", YES);
        objj_msgSend(self._textFieldPMAM, "setHidden:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("_updatePositions"), function $_CPDatePickerElementView___updatePositions(self, _cmd)
{
    var contentInset = objj_msgSend(self._datePicker, "valueForThemeAttribute:inState:", "content-inset", objj_msgSend(self._datePicker, "themeState")),
        separatorContentInset = objj_msgSend(self._datePicker, "valueForThemeAttribute:", "separator-content-inset"),
        horizontalInset = contentInset.left - contentInset.right,
        verticalInset = contentInset.top - contentInset.bottom,
        firstTexField = self._textFieldMonth,
        secondTextField = self._textFieldDay,
        isEnglishFormat = objj_msgSend(self._datePicker, "_isEnglishFormat");
    if (!isEnglishFormat)
    {
        firstTexField = self._textFieldDay;
        secondTextField = self._textFieldMonth;
    }
    objj_msgSend(firstTexField, "setFrameOrigin:", CGPointMake(horizontalInset, verticalInset));
    objj_msgSend(self._textFieldSeparatorOne, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(firstTexField, "frame")) + separatorContentInset.left, verticalInset));
    if (objj_msgSend(firstTexField, "isHidden"))
        objj_msgSend(secondTextField, "setFrameOrigin:", CGPointMake(horizontalInset, verticalInset));
    else
        objj_msgSend(secondTextField, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldSeparatorOne, "frame")) + separatorContentInset.right, verticalInset));
    if (isEnglishFormat && objj_msgSend(secondTextField, "isHidden"))
        objj_msgSend(self._textFieldSeparatorTwo, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(firstTexField, "frame")) + separatorContentInset.left, verticalInset));
    else
        objj_msgSend(self._textFieldSeparatorTwo, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(secondTextField, "frame")) + separatorContentInset.left, verticalInset));
    objj_msgSend(self._textFieldYear, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldSeparatorTwo, "frame")) + separatorContentInset.right, verticalInset));
    if (objj_msgSend(self._textFieldMonth, "isHidden"))
        objj_msgSend(self._textFieldHour, "setFrameOrigin:", CGPointMake(horizontalInset, verticalInset));
    else
        objj_msgSend(self._textFieldHour, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldYear, "frame")) + objj_msgSend(self._datePicker, "valueForThemeAttribute:", "date-hour-margin"), verticalInset));
    objj_msgSend(self._textFieldSeparatorThree, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldHour, "frame")) + separatorContentInset.left, verticalInset));
    objj_msgSend(self._textFieldMinute, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldSeparatorThree, "frame")) + separatorContentInset.right, verticalInset));
    objj_msgSend(self._textFieldSeparatorFour, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldMinute, "frame")) + separatorContentInset.left, verticalInset));
    objj_msgSend(self._textFieldSecond, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldSeparatorFour, "frame")) + separatorContentInset.right, verticalInset));
    if (objj_msgSend(self._textFieldSecond, "isHidden"))
        objj_msgSend(self._textFieldPMAM, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldMinute, "frame")) + 2, verticalInset));
    else
        objj_msgSend(self._textFieldPMAM, "setFrameOrigin:", CGPointMake(CGRectGetMaxX(objj_msgSend(self._textFieldSecond, "frame")) + 2, verticalInset));
}
,["void"]), new objj_method(sel_getUid("_sizeToFit"), function $_CPDatePickerElementView___sizeToFit(self, _cmd)
{
    objj_msgSend(self._textFieldDay, "sizeToFit");
    objj_msgSend(self._textFieldMonth, "sizeToFit");
    objj_msgSend(self._textFieldYear, "sizeToFit");
    objj_msgSend(self._textFieldHour, "sizeToFit");
    objj_msgSend(self._textFieldMinute, "sizeToFit");
    objj_msgSend(self._textFieldSecond, "sizeToFit");
    objj_msgSend(self._textFieldSeparatorOne, "sizeToFit");
    objj_msgSend(self._textFieldSeparatorTwo, "sizeToFit");
    objj_msgSend(self._textFieldSeparatorThree, "sizeToFit");
    objj_msgSend(self._textFieldSeparatorFour, "sizeToFit");
    objj_msgSend(self._textFieldPMAM, "sizeToFit");
}
,["void"]), new objj_method(sel_getUid("_updateResponderTextField"), function $_CPDatePickerElementView___updateResponderTextField(self, _cmd)
{
    objj_msgSend(self, "_updateFirstLastTextField");
    objj_msgSend(self, "_updateKeyView");
}
,["void"]), new objj_method(sel_getUid("_updateFirstLastTextField"), function $_CPDatePickerElementView___updateFirstLastTextField(self, _cmd)
{
    var datePickerElements = objj_msgSend(self._datePicker, "datePickerElements");
    if (objj_msgSend(self._datePicker, "_isEnglishFormat"))
    {
        if (datePickerElements & CPYearMonthDayDatePickerElementFlag || datePickerElements & CPYearMonthDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setFirstTextField:", self._textFieldMonth);
        else
            objj_msgSend(objj_msgSend(self, "superview"), "setFirstTextField:", self._textFieldHour);
        if (datePickerElements & CPHourMinuteSecondDatePickerElementFlag || datePickerElements & CPHourMinuteDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setLastTextField:", self._textFieldPMAM);
        else
            objj_msgSend(objj_msgSend(self, "superview"), "setLastTextField:", self._textFieldYear);
    }
    else
    {
        if ((datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setFirstTextField:", self._textFieldDay);
        else if (datePickerElements & CPYearMonthDayDatePickerElementFlag || datePickerElements & CPYearMonthDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setFirstTextField:", self._textFieldMonth);
        else
            objj_msgSend(objj_msgSend(self, "superview"), "setFirstTextField:", self._textFieldHour);
        if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setLastTextField:", self._textFieldSecond);
        else if (datePickerElements & CPHourMinuteSecondDatePickerElementFlag || datePickerElements & CPHourMinuteDatePickerElementFlag)
            objj_msgSend(objj_msgSend(self, "superview"), "setLastTextField:", self._textFieldMinute);
        else
            objj_msgSend(objj_msgSend(self, "superview"), "setLastTextField:", self._textFieldYear);
    }
}
,["void"]), new objj_method(sel_getUid("_updateKeyView"), function $_CPDatePickerElementView___updateKeyView(self, _cmd)
{
    objj_msgSend(self, "_updateNextTextField");
    objj_msgSend(self, "_updatePreviousTextField");
}
,["void"]), new objj_method(sel_getUid("_updateNextTextField"), function $_CPDatePickerElementView___updateNextTextField(self, _cmd)
{
    var datePickerElements = objj_msgSend(self._datePicker, "datePickerElements"),
        firstTexField = self._textFieldMonth,
        secondTextField = self._textFieldDay,
        isEnglishFormat = objj_msgSend(self._datePicker, "_isEnglishFormat");
    if (!isEnglishFormat)
    {
        firstTexField = self._textFieldDay;
        secondTextField = self._textFieldMonth;
    }
    if ((datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(firstTexField, "setNextTextField:", secondTextField);
    else
        objj_msgSend(firstTexField, "setNextTextField:", self._textFieldYear);
    objj_msgSend(secondTextField, "setNextTextField:", self._textFieldYear);
    if (datePickerElements & CPHourMinuteSecondDatePickerElementFlag || datePickerElements & CPHourMinuteDatePickerElementFlag)
        objj_msgSend(self._textFieldYear, "setNextTextField:", self._textFieldHour);
    else if (isEnglishFormat || (datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(self._textFieldYear, "setNextTextField:", firstTexField);
    else
        objj_msgSend(self._textFieldYear, "setNextTextField:", secondTextField);
    objj_msgSend(self._textFieldHour, "setNextTextField:", self._textFieldMinute);
    if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        objj_msgSend(self._textFieldMinute, "setNextTextField:", self._textFieldSecond);
    else if (isEnglishFormat)
        objj_msgSend(self._textFieldMinute, "setNextTextField:", self._textFieldPMAM);
    else if ((datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(self._textFieldMinute, "setNextTextField:", firstTexField);
    else if (datePickerElements & CPYearMonthDatePickerElementFlag)
        objj_msgSend(self._textFieldMinute, "setNextTextField:", secondTextField);
    else
        objj_msgSend(self._textFieldMinute, "setNextTextField:", self._textFieldHour);
    if (isEnglishFormat)
        objj_msgSend(self._textFieldSecond, "setNextTextField:", self._textFieldPMAM);
    else if ((datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(self._textFieldSecond, "setNextTextField:", firstTexField);
    else if (datePickerElements & CPYearMonthDatePickerElementFlag)
        objj_msgSend(self._textFieldSecond, "setNextTextField:", secondTextField);
    else
        objj_msgSend(self._textFieldSecond, "setNextTextField:", self._textFieldHour);
    if (datePickerElements & CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(self._textFieldPMAM, "setNextTextField:", self._textFieldMonth);
    else
        objj_msgSend(self._textFieldPMAM, "setNextTextField:", self._textFieldHour);
}
,["void"]), new objj_method(sel_getUid("_updatePreviousTextField"), function $_CPDatePickerElementView___updatePreviousTextField(self, _cmd)
{
    var datePickerElements = objj_msgSend(self._datePicker, "datePickerElements"),
        firstTexField = self._textFieldMonth,
        secondTextField = self._textFieldDay,
        isEnglishFormat = objj_msgSend(self._datePicker, "_isEnglishFormat");
    if (!isEnglishFormat)
    {
        firstTexField = self._textFieldDay;
        secondTextField = self._textFieldMonth;
    }
    if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        objj_msgSend(self._textFieldPMAM, "setPreviousTextField:", self._textFieldSecond);
    else if (datePickerElements & CPHourMinuteDatePickerElementFlag)
        objj_msgSend(self._textFieldPMAM, "setPreviousTextField:", self._textFieldMinute);
    objj_msgSend(self._textFieldSecond, "setPreviousTextField:", self._textFieldMinute);
    objj_msgSend(self._textFieldMinute, "setPreviousTextField:", self._textFieldHour);
    if (datePickerElements & CPYearMonthDatePickerElementFlag)
        objj_msgSend(self._textFieldHour, "setPreviousTextField:", self._textFieldYear);
    else if (isEnglishFormat)
        objj_msgSend(self._textFieldHour, "setPreviousTextField:", self._textFieldPMAM);
    else if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        objj_msgSend(self._textFieldHour, "setPreviousTextField:", self._textFieldSecond);
    else
        objj_msgSend(self._textFieldHour, "setPreviousTextField:", self._textFieldMinute);
    if (!isEnglishFormat)
        objj_msgSend(self._textFieldYear, "setPreviousTextField:", self._textFieldMonth);
    else if ((datePickerElements & CPYearMonthDayDatePickerElementFlag) == CPYearMonthDayDatePickerElementFlag)
        objj_msgSend(self._textFieldYear, "setPreviousTextField:", self._textFieldDay);
    else
        objj_msgSend(self._textFieldYear, "setPreviousTextField:", self._textFieldMonth);
    objj_msgSend(secondTextField, "setPreviousTextField:", firstTexField);
    if (isEnglishFormat && datePickerElements & CPHourMinuteDatePickerElementFlag)
        objj_msgSend(firstTexField, "setPreviousTextField:", self._textFieldPMAM);
    else if ((datePickerElements & CPHourMinuteSecondDatePickerElementFlag) == CPHourMinuteSecondDatePickerElementFlag)
        objj_msgSend(firstTexField, "setPreviousTextField:", self._textFieldSecond);
    else if (datePickerElements & CPHourMinuteDatePickerElementFlag)
        objj_msgSend(firstTexField, "setPreviousTextField:", self._textFieldMinute);
    else
        objj_msgSend(firstTexField, "setPreviousTextField:", self._textFieldYear);
}
,["void"])]);
}var CPMonthDateType = 0,
    CPDayDateType = 1,
    CPYearDateType = 2,
    CPHourDateType = 3,
    CPSecondDateType = 4,
    CPMinuteDateType = 5,
    CPAMPMDateType = 6;
{var the_class = objj_allocateClassPair(CPTextField, "_CPDatePickerElementTextField"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_nextTextField"), new objj_ivar("_previousTextField"), new objj_ivar("_datePicker"), new objj_ivar("_dateType"), new objj_ivar("_maxNumber"), new objj_ivar("_minNumber")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("nextTextField"), function $_CPDatePickerElementTextField__nextTextField(self, _cmd)
{
    return self._nextTextField;
}
,["_CPDatePickerElementTextField"]), new objj_method(sel_getUid("setNextTextField:"), function $_CPDatePickerElementTextField__setNextTextField_(self, _cmd, newValue)
{
    self._nextTextField = newValue;
}
,["void","_CPDatePickerElementTextField"]), new objj_method(sel_getUid("previousTextField"), function $_CPDatePickerElementTextField__previousTextField(self, _cmd)
{
    return self._previousTextField;
}
,["_CPDatePickerElementTextField"]), new objj_method(sel_getUid("setPreviousTextField:"), function $_CPDatePickerElementTextField__setPreviousTextField_(self, _cmd, newValue)
{
    self._previousTextField = newValue;
}
,["void","_CPDatePickerElementTextField"]), new objj_method(sel_getUid("_datePicker"), function $_CPDatePickerElementTextField___datePicker(self, _cmd)
{
    return self._datePicker;
}
,["CPDatePicker"]), new objj_method(sel_getUid("setDatePicker:"), function $_CPDatePickerElementTextField__setDatePicker_(self, _cmd, newValue)
{
    self._datePicker = newValue;
}
,["void","CPDatePicker"]), new objj_method(sel_getUid("dateType"), function $_CPDatePickerElementTextField__dateType(self, _cmd)
{
    return self._dateType;
}
,["int"]), new objj_method(sel_getUid("_setDateType:"), function $_CPDatePickerElementTextField___setDateType_(self, _cmd, newValue)
{
    self._dateType = newValue;
}
,["void","int"]), new objj_method(sel_getUid("maxNumber"), function $_CPDatePickerElementTextField__maxNumber(self, _cmd)
{
    return self._maxNumber;
}
,["int"]), new objj_method(sel_getUid("_setMaxNumber:"), function $_CPDatePickerElementTextField___setMaxNumber_(self, _cmd, newValue)
{
    self._maxNumber = newValue;
}
,["void","int"]), new objj_method(sel_getUid("minNumber"), function $_CPDatePickerElementTextField__minNumber(self, _cmd)
{
    return self._minNumber;
}
,["int"]), new objj_method(sel_getUid("_setMinNumber:"), function $_CPDatePickerElementTextField___setMinNumber_(self, _cmd, newValue)
{
    self._minNumber = newValue;
}
,["void","int"]), new objj_method(sel_getUid("acceptFirstResponder"), function $_CPDatePickerElementTextField__acceptFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("setDateType:"), function $_CPDatePickerElementTextField__setDateType_(self, _cmd, aDateType)
{
    self._dateType = aDateType;
    switch(aDateType) {
    case CPMonthDateType:
        self._minNumber = 1;
        self._maxNumber = 12;
        break;
    case CPDayDateType:
        self._minNumber = 1;
        self._maxNumber = 31;
        break;
    case CPYearDateType:
        self._minNumber = 0;
        self._maxNumber = 9999;
        break;
    case CPHourDateType:
        self._minNumber = 0;
        self._maxNumber = 23;
        break;
    case CPSecondDateType:
        self._minNumber = 0;
        self._maxNumber = 59;
        break;
    case CPMinuteDateType:
        self._minNumber = 0;
        self._maxNumber = 59;
        break;
    }
}
,["void","int"]), new objj_method(sel_getUid("maxNumber"), function $_CPDatePickerElementTextField__maxNumber(self, _cmd)
{
    if (self._dateType == CPDayDateType)
        return objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "_daysInMonth");
    return self._maxNumber;
}
,["int"]), new objj_method(sel_getUid("_maxNumberWithMaxDate"), function $_CPDatePickerElementTextField___maxNumberWithMaxDate(self, _cmd)
{
    var maxDate = objj_msgSend(self._datePicker, "maxDate"),
        date = objj_msgSend(self._datePicker, "dateValue");
    if (maxDate)
    {
        switch(self._dateType) {
        case CPMonthDateType:
            if (maxDate.getFullYear() == date.getFullYear())
                return maxDate.getMonth();
            break;
        case CPDayDateType:
            if (maxDate.getFullYear() == date.getFullYear() && maxDate.getMonth() == date.getMonth())
                return maxDate.getDate();
            break;
        case CPYearDateType:
            return maxDate.getFullYear();
        case CPHourDateType:
            if (maxDate.getFullYear() == date.getFullYear() && maxDate.getMonth() == date.getMonth() && maxDate.getDate() == date.getDate())
                return maxDate.getHours();
            break;
        case CPSecondDateType:
            if (maxDate.getFullYear() == date.getFullYear() && maxDate.getMonth() == date.getMonth() && maxDate.getDate() == date.getDate() && maxDate.getHours() == date.getHours() && maxDate.getMinutes() == date.getMinutes())
                return maxDate.getSeconds();
            break;
        case CPMinuteDateType:
            if (maxDate.getFullYear() == date.getFullYear() && maxDate.getMonth() == date.getMonth() && maxDate.getDate() == date.getDate() && maxDate.getHours() == date.getHours())
                return maxDate.getMinutes();
            break;
        }
    }
    return self._maxNumber;
}
,["int"]), new objj_method(sel_getUid("setStringKeyValue:"), function $_CPDatePickerElementTextField__setStringKeyValue_(self, _cmd, anObjectValue)
{
    if (self._dateType == CPYearDateType)
    {
        if (objj_msgSend(anObjectValue, "length") > 4)
            return;
        while (objj_msgSend(anObjectValue, "length") < 4)
            anObjectValue = " " + anObjectValue;
    }
    else
    {
        if (objj_msgSend(anObjectValue, "length") > 2)
            return;
        while (objj_msgSend(anObjectValue, "length") < 2)
            anObjectValue = " " + anObjectValue;
    }
    if (parseInt(anObjectValue) > objj_msgSend(self, "_maxNumberWithMaxDate"))
        return;
    if (objj_msgSend(self._datePicker, "_isEnglishFormat") && self._dateType == CPHourDateType && parseInt(anObjectValue) > 12)
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementTextField").super_class }, "setObjectValue:", anObjectValue);
}
,["void","id"]), new objj_method(sel_getUid("setStringValue:"), function $_CPDatePickerElementTextField__setStringValue_(self, _cmd, aStringValue)
{
    if (self._dateType == CPYearDateType)
    {
        while (objj_msgSend(aStringValue, "length") < 4)
            aStringValue = "0" + aStringValue;
    }
    else if (self._dateType != CPAMPMDateType)
    {
        if (self._dateType == CPHourDateType && objj_msgSend(self._datePicker, "_isEnglishFormat"))
        {
            var value = parseInt(aStringValue);
            if (value == 0)
                value = 12;
            else if (value > 12)
                value = value - 12;
            aStringValue = value.toString();
        }
        while (objj_msgSend(aStringValue, "length") < 2)
            aStringValue = "0" + aStringValue;
    }
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementTextField").super_class }, "setObjectValue:", aStringValue);
}
,["void","id"]), new objj_method(sel_getUid("setObjectValue:"), function $_CPDatePickerElementTextField__setObjectValue_(self, _cmd, anObjectValue)
{
    var dateValue = objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "copy");
    switch(self._dateType) {
    case CPMonthDateType:
        var dateNextMonth = objj_msgSend(dateValue, "copy");
        dateNextMonth.setDate(1);
        dateNextMonth.setMonth(parseInt(anObjectValue) - 1);
        var numberDayNextMonth = objj_msgSend(dateNextMonth, "_daysInMonth");
        if (numberDayNextMonth < objj_msgSend(dateValue, "_daysInMonth") && dateValue.getDate() > numberDayNextMonth)
            dateValue.setDate(numberDayNextMonth);
        dateValue.setMonth(parseInt(anObjectValue) - 1);
        break;
    case CPDayDateType:
        dateValue.setDate(parseInt(anObjectValue));
        break;
    case CPYearDateType:
        dateValue.setFullYear(parseInt(anObjectValue));
        break;
    case CPHourDateType:
        dateValue.setHours(parseInt(anObjectValue));
        break;
    case CPSecondDateType:
        dateValue.setSeconds(parseInt(anObjectValue));
        break;
    case CPMinuteDateType:
        dateValue.setMinutes(parseInt(anObjectValue));
        break;
    }
    objj_msgSend(self._datePicker, "setDateValue:", dateValue);
}
,["void","id"]), new objj_method(sel_getUid("objectValue"), function $_CPDatePickerElementTextField__objectValue(self, _cmd)
{
    var dateValue = objj_msgSend(objj_msgSend(self._datePicker, "dateValue"), "copy");
    switch(self._dateType) {
    case CPMonthDateType:
        return dateValue.getMonth() + 1;
        break;
    case CPDayDateType:
        return dateValue.getDate();
        break;
    case CPYearDateType:
        return dateValue.getFullYear();
        break;
    case CPHourDateType:
        return dateValue.getHours();
        break;
    case CPSecondDateType:
        return dateValue.getSeconds();
        break;
    case CPMinuteDateType:
        return dateValue.getMinutes();
        break;
default:
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementTextField").super_class }, "objectValue");
        break;
    }
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementTextField").super_class }, "objectValue");
}
,["void"]), new objj_method(sel_getUid("mouseDown:"), function $_CPDatePickerElementTextField__mouseDown_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self, "isEnabled"))
        return;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDatePickerElementTextField").super_class }, "mouseDown:", anEvent);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPDatePickerElementTextFieldBecomeFirstResponder, objj_msgSend(objj_msgSend(self, "superview"), "superview"), objj_msgSend(CPDictionary, "dictionaryWithObject:forKey:", self, "textField"));
}
,["void","CPEvent"]), new objj_method(sel_getUid("makeSelectable"), function $_CPDatePickerElementTextField__makeSelectable(self, _cmd)
{
    objj_msgSend(self, "setThemeState:", CPThemeStateSelected);
}
,["void"]), new objj_method(sel_getUid("makeDeselectable"), function $_CPDatePickerElementTextField__makeDeselectable(self, _cmd)
{
    objj_msgSend(self, "unsetThemeState:", CPThemeStateSelected);
}
,["void"])]);
}p;14;CPDatePicker.jt;27631;@STATIC;1.0;i;11;CPControl.ji;8;CPFont.ji;13;CPTextField.ji;24;_CPDatePickerTextField.ji;23;_CPDatePickerCalendar.jI;20;Foundation/CPArray.jI;21;Foundation/CPObject.jI;19;Foundation/CPDate.jI;28;Foundation/CPDateFormatter.jI;21;Foundation/CPLocale.jI;23;Foundation/CPTimeZone.jt;27346;objj_executeFile("CPControl.j", YES);objj_executeFile("CPFont.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("_CPDatePickerTextField.j", YES);objj_executeFile("_CPDatePickerCalendar.j", YES);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPDate.j", NO);objj_executeFile("Foundation/CPDateFormatter.j", NO);objj_executeFile("Foundation/CPLocale.j", NO);objj_executeFile("Foundation/CPTimeZone.j", NO);var CPDatePicker_validateProposedDateValue_timeInterval = 1 << 1;
CPSingleDateMode = 0;
CPRangeDateMode = 1;
CPTextFieldAndStepperDatePickerStyle = 0;
CPClockAndCalendarDatePickerStyle = 1;
CPTextFieldDatePickerStyle = 2;
CPHourMinuteDatePickerElementFlag = 0x000c;
CPHourMinuteSecondDatePickerElementFlag = 0x000e;
CPTimeZoneDatePickerElementFlag = 0x0010;
CPYearMonthDatePickerElementFlag = 0x00c0;
CPYearMonthDayDatePickerElementFlag = 0x00e0;
CPEraDatePickerElementFlag = 0x0100;
{var the_class = objj_allocateClassPair(CPControl, "CPDatePicker"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isBordered"), new objj_ivar("_isBezeled"), new objj_ivar("_drawsBackground"), new objj_ivar("_dateValue"), new objj_ivar("_minDate"), new objj_ivar("_maxDate"), new objj_ivar("_textFont"), new objj_ivar("_locale"), new objj_ivar("_timeZone"), new objj_ivar("_delegate"), new objj_ivar("_datePickerElements"), new objj_ivar("_datePickerMode"), new objj_ivar("_datePickerStyle"), new objj_ivar("_timeInterval"), new objj_ivar("_datePickerTextfield"), new objj_ivar("_datePickerCalendar"), new objj_ivar("_implementedCDatePickerDelegateMethods")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isBordered"), function $CPDatePicker__isBordered(self, _cmd)
{
    return self._isBordered;
}
,["BOOL"]), new objj_method(sel_getUid("setBordered:"), function $CPDatePicker__setBordered_(self, _cmd, newValue)
{
    self._isBordered = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("isBezeled"), function $CPDatePicker__isBezeled(self, _cmd)
{
    return self._isBezeled;
}
,["BOOL"]), new objj_method(sel_getUid("setBezeled:"), function $CPDatePicker__setBezeled_(self, _cmd, newValue)
{
    self._isBezeled = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("drawsBackground"), function $CPDatePicker__drawsBackground(self, _cmd)
{
    return self._drawsBackground;
}
,["BOOL"]), new objj_method(sel_getUid("setDrawsBackground:"), function $CPDatePicker__setDrawsBackground_(self, _cmd, newValue)
{
    self._drawsBackground = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("dateValue"), function $CPDatePicker__dateValue(self, _cmd)
{
    return self._dateValue;
}
,["CPDate"]), new objj_method(sel_getUid("setDateValue:"), function $CPDatePicker__setDateValue_(self, _cmd, newValue)
{
    self._dateValue = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("minDate"), function $CPDatePicker__minDate(self, _cmd)
{
    return self._minDate;
}
,["CPDate"]), new objj_method(sel_getUid("setMinDate:"), function $CPDatePicker__setMinDate_(self, _cmd, newValue)
{
    self._minDate = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("maxDate"), function $CPDatePicker__maxDate(self, _cmd)
{
    return self._maxDate;
}
,["CPDate"]), new objj_method(sel_getUid("setMaxDate:"), function $CPDatePicker__setMaxDate_(self, _cmd, newValue)
{
    self._maxDate = newValue;
}
,["void","CPDate"]), new objj_method(sel_getUid("textFont"), function $CPDatePicker__textFont(self, _cmd)
{
    return self._textFont;
}
,["CPFont"]), new objj_method(sel_getUid("setTextFont:"), function $CPDatePicker__setTextFont_(self, _cmd, newValue)
{
    self._textFont = newValue;
}
,["void","CPFont"]), new objj_method(sel_getUid("locale"), function $CPDatePicker__locale(self, _cmd)
{
    return self._locale;
}
,["CPLocale"]), new objj_method(sel_getUid("setLocale:"), function $CPDatePicker__setLocale_(self, _cmd, newValue)
{
    self._locale = newValue;
}
,["void","CPLocale"]), new objj_method(sel_getUid("timeZone"), function $CPDatePicker__timeZone(self, _cmd)
{
    return self._timeZone;
}
,["CPTimeZone"]), new objj_method(sel_getUid("setTimeZone:"), function $CPDatePicker__setTimeZone_(self, _cmd, newValue)
{
    self._timeZone = newValue;
}
,["void","CPTimeZone"]), new objj_method(sel_getUid("delegate"), function $CPDatePicker__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPDatePicker__setDelegate_(self, _cmd, newValue)
{
    self._delegate = newValue;
}
,["void","id"]), new objj_method(sel_getUid("datePickerElements"), function $CPDatePicker__datePickerElements(self, _cmd)
{
    return self._datePickerElements;
}
,["unsigned"]), new objj_method(sel_getUid("setDatePickerElements:"), function $CPDatePicker__setDatePickerElements_(self, _cmd, newValue)
{
    self._datePickerElements = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("datePickerMode"), function $CPDatePicker__datePickerMode(self, _cmd)
{
    return self._datePickerMode;
}
,["CPInteger"]), new objj_method(sel_getUid("setDatePickerMode:"), function $CPDatePicker__setDatePickerMode_(self, _cmd, newValue)
{
    self._datePickerMode = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("datePickerStyle"), function $CPDatePicker__datePickerStyle(self, _cmd)
{
    return self._datePickerStyle;
}
,["CPInteger"]), new objj_method(sel_getUid("setDatePickerStyle:"), function $CPDatePicker__setDatePickerStyle_(self, _cmd, newValue)
{
    self._datePickerStyle = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("timeInterval"), function $CPDatePicker__timeInterval(self, _cmd)
{
    return self._timeInterval;
}
,["CPInteger"]), new objj_method(sel_getUid("setTimeInterval:"), function $CPDatePicker__setTimeInterval_(self, _cmd, newValue)
{
    self._timeInterval = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("_replacementKeyPathForBinding:"), function $CPDatePicker___replacementKeyPathForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return "dateValue";
    if (aBinding == CPMinValueBinding)
        return "minDate";
    if (aBinding == CPMaxValueBinding)
        return "maxDate";
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "_replacementKeyPathForBinding:", aBinding);
}
,["id","CPString"]), new objj_method(sel_getUid("initWithFrame:"), function $CPDatePicker__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "initWithFrame:", aFrame))
    {
        self._drawsBackground = YES;
        self._datePickerStyle = CPTextFieldAndStepperDatePickerStyle;
        self._datePickerMode = CPSingleDateMode;
        self._datePickerElements = CPYearMonthDayDatePickerElementFlag | CPHourMinuteSecondDatePickerElementFlag;
        self._timeInterval = 0;
        self._implementedCDatePickerDelegateMethods = 0;
        objj_msgSend(self, "setObjectValue:", objj_msgSend(CPDate, "date"));
        self._minDate = objj_msgSend(CPDate, "distantPast");
        self._maxDate = objj_msgSend(CPDate, "distantFuture");
        objj_msgSend(self, "setBezeled:", YES);
        objj_msgSend(self, "setBordered:", YES);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_init"), function $CPDatePicker___init(self, _cmd)
{
    if (!self._locale)
        self._locale = objj_msgSend(CPLocale, "currentLocale");
    if (!self._timeZone)
        self._timeZone = objj_msgSend(CPTimeZone, "systemTimeZone");
    self._datePickerTextfield = objj_msgSend(objj_msgSend(_CPDatePickerTextField, "alloc"), "initWithFrame:withDatePicker:", objj_msgSend(self, "bounds"), self);
    objj_msgSend(self._datePickerTextfield, "setDateValue:", self._dateValue);
    objj_msgSend(self, "addSubview:", self._datePickerTextfield);
    self._datePickerCalendar = objj_msgSend(objj_msgSend(_CPDatePickerCalendar, "alloc"), "initWithFrame:withDatePicker:", objj_msgSend(self, "bounds"), self);
    objj_msgSend(self._datePickerCalendar, "setDateValue:", self._dateValue);
    objj_msgSend(self._datePickerCalendar, "setHidden:", YES);
    objj_msgSend(self, "addSubview:", self._datePickerCalendar);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("setDelegate:"), function $CPDatePicker__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
    self._implementedCDatePickerDelegateMethods = 0;
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("datePicker:validateProposedDateValue:timeInterval:")))
        self._implementedCDatePickerDelegateMethods |= CPDatePicker_validateProposedDateValue_timeInterval;
}
,["void","id"]), new objj_method(sel_getUid("layoutSubviews"), function $CPDatePicker__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "layoutSubviews");
    if (self._datePickerStyle == CPTextFieldAndStepperDatePickerStyle || self._datePickerStyle == CPTextFieldDatePickerStyle)
    {
        objj_msgSend(self._datePickerTextfield, "setHidden:", NO);
        objj_msgSend(self._datePickerCalendar, "setHidden:", YES);
        objj_msgSend(self._datePickerTextfield, "setNeedsLayout");
    }
    else
    {
        objj_msgSend(self._datePickerCalendar, "setHidden:", NO);
        objj_msgSend(self._datePickerTextfield, "setHidden:", YES);
        objj_msgSend(self._datePickerCalendar, "setNeedsLayout");
    }
}
,["void"]), new objj_method(sel_getUid("objectValue"), function $CPDatePicker__objectValue(self, _cmd)
{
    return self._dateValue;
}
,["void"]), new objj_method(sel_getUid("setObjectValue:"), function $CPDatePicker__setObjectValue_(self, _cmd, aValue)
{
    objj_msgSend(self, "setDateValue:", aValue);
}
,["void","CPDate"]), new objj_method(sel_getUid("setDateValue:"), function $CPDatePicker__setDateValue_(self, _cmd, aDateValue)
{
    if (aDateValue == nil)
        return;
    objj_msgSend(self, "_setDateValue:timeInterval:", aDateValue, self._timeInterval);
}
,["void","CPDate"]), new objj_method(sel_getUid("_setDateValue:timeInterval:"), function $CPDatePicker___setDateValue_timeInterval_(self, _cmd, aDateValue, aTimeInterval)
{
    if (self._minDate)
        aDateValue = new Date(MAX(aDateValue, self._minDate));
    if (self._maxDate)
        aDateValue = new Date(MIN(aDateValue, self._maxDate));
    aTimeInterval = MAX(MIN(aTimeInterval, objj_msgSend(self._maxDate, "timeIntervalSinceDate:", aDateValue)), objj_msgSend(self._minDate, "timeIntervalSinceDate:", aDateValue));
    if (objj_msgSend(aDateValue, "isEqualToDate:", self._dateValue) && aTimeInterval == self._timeInterval)
        return;
    if (self._implementedCDatePickerDelegateMethods & CPDatePicker_validateProposedDateValue_timeInterval)
    {
        var aStartDateRef = function(x)
        {
            if (typeof x == 'undefined')
                return aDateValue;
            aDateValue = x;
        };
        var aTimeIntervalRef = function(x)
        {
            if (typeof x == 'undefined')
                return aTimeInterval;
            aTimeInterval = x;
        };
        objj_msgSend(self._delegate, "datePicker:validateProposedDateValue:timeInterval:", self, aStartDateRef, aTimeIntervalRef);
    }
    objj_msgSend(self, "willChangeValueForKey:", "objectValue");
    objj_msgSend(self, "willChangeValueForKey:", "dateValue");
    self._dateValue = aDateValue;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "setObjectValue:", self._dateValue);
    objj_msgSend(self, "didChangeValueForKey:", "objectValue");
    objj_msgSend(self, "didChangeValueForKey:", "dateValue");
    objj_msgSend(self, "willChangeValueForKey:", "timeInterval");
    self._timeInterval = self._datePickerMode == CPSingleDateMode ? 0 : aTimeInterval;
    objj_msgSend(self, "didChangeValueForKey:", "timeInterval");
    objj_msgSend(self, "sendAction:to:", objj_msgSend(self, "action"), objj_msgSend(self, "target"));
    if (self._datePickerStyle == CPTextFieldAndStepperDatePickerStyle || self._datePickerStyle == CPTextFieldDatePickerStyle)
        objj_msgSend(self._datePickerTextfield, "setDateValue:", self._dateValue);
    else
        objj_msgSend(self._datePickerCalendar, "setDateValue:", self._dateValue);
}
,["void","CPDate","CPTimeInterval"]), new objj_method(sel_getUid("setMinDate:"), function $CPDatePicker__setMinDate_(self, _cmd, aMinDate)
{
    objj_msgSend(self, "willChangeValueForKey:", "minDate");
    self._minDate = aMinDate;
    objj_msgSend(self, "didChangeValueForKey:", "minDate");
    objj_msgSend(self, "_setDateValue:timeInterval:", self._dateValue, self._timeInterval);
}
,["void","CPDate"]), new objj_method(sel_getUid("setMaxDate:"), function $CPDatePicker__setMaxDate_(self, _cmd, aMaxDate)
{
    objj_msgSend(self, "willChangeValueForKey:", "maxDate");
    self._maxDate = aMaxDate;
    objj_msgSend(self, "didChangeValueForKey:", "maxDate");
    objj_msgSend(self, "_setDateValue:timeInterval:", self._dateValue, self._timeInterval);
}
,["void","CPDate"]), new objj_method(sel_getUid("setDatePickerStyle:"), function $CPDatePicker__setDatePickerStyle_(self, _cmd, aDatePickerStyle)
{
    self._datePickerStyle = aDatePickerStyle;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPDate"]), new objj_method(sel_getUid("setDatePickerElements:"), function $CPDatePicker__setDatePickerElements_(self, _cmd, aDatePickerElements)
{
    self._datePickerElements = aDatePickerElements;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPDate"]), new objj_method(sel_getUid("setDatePickerMode:"), function $CPDatePicker__setDatePickerMode_(self, _cmd, aDatePickerMode)
{
    self._datePickerMode = aDatePickerMode;
    if (self._datePickerMode == CPSingleDateMode)
        objj_msgSend(self, "_setDateValue:timeInterval:", objj_msgSend(self, "dateValue"), 0);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPDate"]), new objj_method(sel_getUid("setTimeInterval:"), function $CPDatePicker__setTimeInterval_(self, _cmd, aTimeInterval)
{
    if (self._datePickerMode == CPSingleDateMode)
        return;
    objj_msgSend(self, "_setDateValue:timeInterval:", objj_msgSend(self, "dateValue"), aTimeInterval);
}
,["void","CPInteger"]), new objj_method(sel_getUid("setLocale:"), function $CPDatePicker__setLocale_(self, _cmd, aLocale)
{
    self._locale = aLocale;
    if (self._formatter)
    {
        objj_msgSend(self, "willChangeValueForKey:", "locale");
        objj_msgSend(self._formatter, "setLocale:", self._locale);
        objj_msgSend(self, "didChangeValueForKey:", "locale");
    }
    objj_msgSend(self._datePickerTextfield, "setDateValue:", self._dateValue);
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPLocale"]), new objj_method(sel_getUid("setBezeled:"), function $CPDatePicker__setBezeled_(self, _cmd, shouldBeBezeled)
{
    self._isBezeled = shouldBeBezeled;
    if (shouldBeBezeled)
        objj_msgSend(self, "setThemeState:", CPThemeStateBezeled);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBezeled);
}
,["void","BOOL"]), new objj_method(sel_getUid("setBordered:"), function $CPDatePicker__setBordered_(self, _cmd, shouldBeBordered)
{
    self._isBordered = shouldBeBordered;
    if (shouldBeBordered)
        objj_msgSend(self, "setThemeState:", CPThemeStateBordered);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateBordered);
}
,["void","BOOL"]), new objj_method(sel_getUid("setTextFont:"), function $CPDatePicker__setTextFont_(self, _cmd, aFont)
{
    objj_msgSend(self, "setFont:", aFont);
}
,["void","CPFont"]), new objj_method(sel_getUid("setEnabled:"), function $CPDatePicker__setEnabled_(self, _cmd, aBoolean)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "setEnabled:", aBoolean);
    objj_msgSend(self._datePickerTextfield, "setEnabled:", aBoolean);
    objj_msgSend(self._datePickerCalendar, "setEnabled:", aBoolean);
}
,["void","BOOL"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPDatePicker__setBackgroundColor_(self, _cmd, aColor)
{
    self._backgroundColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPColor"]), new objj_method(sel_getUid("setDrawsBackground:"), function $CPDatePicker__setDrawsBackground_(self, _cmd, aBoolean)
{
    objj_msgSend(self, "willChangeValueForKey:", "drawsBackground");
    self._drawsBackground = aBoolean;
    objj_msgSend(self, "didChangeValueForKey:", "drawsBackground");
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("setTimeZone:"), function $CPDatePicker__setTimeZone_(self, _cmd, aTimeZone)
{
    objj_msgSend(self, "willChangeValueForKey:", "timeZone");
    self._timeZone = aTimeZone;
    objj_msgSend(self, "didChangeValueForKey:", "timeZone");
    objj_msgSend(self, "setNeedsLayout");
}
,["void","CPTimeZone"]), new objj_method(sel_getUid("becomeFirstResponder"), function $CPDatePicker__becomeFirstResponder(self, _cmd)
{
    if (self._datePickerStyle == CPTextFieldAndStepperDatePickerStyle || self._datePickerStyle == CPTextFieldDatePickerStyle)
        objj_msgSend(self._datePickerTextfield, "_selecteTextFieldWithFlags:", objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "modifierFlags"));
    else
        return NO;
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPDatePicker__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("resignFirstResponder"), function $CPDatePicker__resignFirstResponder(self, _cmd)
{
    if (self._datePickerStyle == CPTextFieldAndStepperDatePickerStyle || self._datePickerStyle == CPTextFieldDatePickerStyle)
        objj_msgSend(self._datePickerTextfield, "resignFirstResponder");
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("isBezeled"), function $CPDatePicker__isBezeled(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBezeled);
}
,["BOOL"]), new objj_method(sel_getUid("isBordered"), function $CPDatePicker__isBordered(self, _cmd)
{
    return objj_msgSend(self, "hasThemeState:", CPThemeStateBordered);
}
,["BOOL"]), new objj_method(sel_getUid("textFont"), function $CPDatePicker__textFont(self, _cmd)
{
    return objj_msgSend(self, "font");
}
,["CPFont"]), new objj_method(sel_getUid("_isAmericanFormat"), function $CPDatePicker___isAmericanFormat(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._locale, "objectForKey:", CPLocaleCountryCode), "isEqualToString:", "US");
}
,["BOOL"]), new objj_method(sel_getUid("_isEnglishFormat"), function $CPDatePicker___isEnglishFormat(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._locale, "objectForKey:", CPLocaleLanguageCode), "isEqualToString:", "en");
}
,["BOOL"]), new objj_method(sel_getUid("keyDown:"), function $CPDatePicker__keyDown_(self, _cmd, anEvent)
{
    if (self._datePickerStyle == CPTextFieldAndStepperDatePickerStyle || self._datePickerStyle == CPTextFieldDatePickerStyle)
        objj_msgSend(self._datePickerTextfield, "keyDown:", anEvent);
}
,["void","CPEvent"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPDatePicker__defaultThemeClass(self, _cmd)
{
    return "datePicker";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPDatePicker__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPColor, "clearColor"), "bezel-color", 1.0, "border-width", objj_msgSend(CPColor, "clearColor"), "border-color", CGInsetMakeZero(), "content-inset", CGInsetMakeZero(), "bezel-inset", objj_msgSend(CPColor, "clearColor"), "datepicker-textfield-bezel-color", CGSizeMakeZero(), "min-size-datepicker-textfield", CGInsetMakeZero(), "content-inset-datepicker-textfield", CGInsetMakeZero(), "content-inset-datepicker-textfield-separator", CGInsetMakeZero(), "separator-content-inset", 5.0, "date-hour-margin", 5.0, "stepper-margin", objj_msgSend(CPColor, "clearColor"), "bezel-color-calendar", objj_msgSend(CPColor, "blackColor"), "title-text-color", objj_msgSend(CPColor, "clearColor"), "title-text-shadow-color", CGSizeMakeZero(), "title-text-shadow-offset", objj_msgSend(CPNull, "null"), "title-font", objj_msgSend(CPColor, "blackColor"), "weekday-text-color", objj_msgSend(CPColor, "clearColor"), "weekday-text-shadow-color", CGSizeMakeZero(), "weekday-text-shadow-offset", objj_msgSend(CPNull, "null"), "weekday-font", objj_msgSend(CPNull, "null"), "arrow-image-left", objj_msgSend(CPNull, "null"), "arrow-image-right", objj_msgSend(CPNull, "null"), "arrow-image-left-highlighted", objj_msgSend(CPNull, "null"), "arrow-image-right-highlighted", CGInsetMakeZero(), "arrow-inset", objj_msgSend(CPNull, "null"), "circle-image", objj_msgSend(CPNull, "null"), "circle-image-highlighted", objj_msgSend(CPColor, "blackColor"), "tile-text-color", objj_msgSend(CPColor, "clearColor"), "tile-text-shadow-color", CGSizeMakeZero(), "tile-text-shadow-offset", objj_msgSend(CPNull, "null"), "tile-font", CGSizeMakeZero(), "size-tile", CGSizeMakeZero(), "size-calendar", CGSizeMakeZero(), "size-header", CGSizeMakeZero(), "min-size-calendar", CGSizeMakeZero(), "max-size-calendar", objj_msgSend(CPColor, "clearColor"), "bezel-color-clock", objj_msgSend(CPColor, "blackColor"), "clock-text-color", objj_msgSend(CPColor, "clearColor"), "clock-text-shadow-color", CGSizeMakeZero(), "clock-text-shadow-offset", objj_msgSend(CPNull, "null"), "clock-font", objj_msgSend(CPNull, "null"), "second-hand-image", objj_msgSend(CPNull, "null"), "hour-hand-image", objj_msgSend(CPNull, "null"), "middle-hand-image", objj_msgSend(CPNull, "null"), "minute-hand-image", CGSizeMakeZero(), "size-clock", CGSizeMakeZero(), "second-hand-size", CGSizeMakeZero(), "hour-hand-size", CGSizeMakeZero(), "middle-hand-size", CGSizeMakeZero(), "minute-hand-size");
}
,["id"]), new objj_method(sel_getUid("_binderClassForBinding:"), function $CPDatePicker___binderClassForBinding_(self, _cmd, theBinding)
{
    if (theBinding == CPValueBinding || theBinding == CPMinValueBinding || theBinding == CPMaxValueBinding)
        return objj_msgSend(_CPDatePickerValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPDatePicker").super_class }, "_binderClassForBinding:", theBinding);
}
,["Class","CPString"])]);
}var CPDatePickerModeKey = "CPDatePickerModeKey",
    CPIntervalKey = "CPIntervalKey",
    CPMinDateKey = "CPMinDateKey",
    CPMaxDateKey = "CPMaxDateKey",
    CPBackgroundColorKey = "CPBackgroundColorKey",
    CPDrawsBackgroundKey = "CPDrawsBackgroundKey",
    CPTextFontKey = "CPTextFontKey",
    CPDatePickerElementsKey = "CPDatePickerElementsKey",
    CPDatePickerStyleKey = "CPDatePickerStyleKey",
    CPLocaleKey = "CPLocaleKey",
    CPBorderedKey = "CPBorderedKey",
    CPDateValueKey = "CPDateValueKey";
{
var the_class = objj_getClass("CPDatePicker")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDatePicker\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPDatePicker__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "initWithCoder:", aCoder);
    if (self)
    {
        self._textFont = objj_msgSend(aCoder, "decodeObjectForKey:", CPTextFontKey);
        self._minDate = objj_msgSend(aCoder, "decodeObjectForKey:", CPMinDateKey) || objj_msgSend(CPDate, "distantPast");
        self._maxDate = objj_msgSend(aCoder, "decodeObjectForKey:", CPMaxDateKey) || objj_msgSend(CPDate, "distantFuture");
        self._timeInterval = objj_msgSend(aCoder, "decodeDoubleForKey:", CPIntervalKey);
        self._datePickerMode = objj_msgSend(aCoder, "decodeIntForKey:", CPDatePickerModeKey);
        self._datePickerElements = objj_msgSend(aCoder, "decodeIntForKey:", CPDatePickerElementsKey);
        self._datePickerStyle = objj_msgSend(aCoder, "decodeIntForKey:", CPDatePickerStyleKey);
        self._locale = objj_msgSend(aCoder, "decodeObjectForKey:", CPLocaleKey);
        self._dateValue = objj_msgSend(aCoder, "decodeObjectForKey:", CPDateValueKey);
        self._backgroundColor = objj_msgSend(aCoder, "decodeObjectForKey:", CPBackgroundColorKey);
        self._drawsBackground = objj_msgSend(aCoder, "decodeBoolForKey:", CPDrawsBackgroundKey);
        self._isBordered = objj_msgSend(aCoder, "decodeBoolForKey:", CPBorderedKey);
        objj_msgSend(self, "_init");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPDatePicker__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDatePicker").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeDouble:forKey:", self._timeInterval, CPIntervalKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._datePickerMode, CPDatePickerModeKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._datePickerStyle, CPDatePickerStyleKey);
    objj_msgSend(aCoder, "encodeInt:forKey:", self._datePickerElements, CPDatePickerElementsKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._minDate, CPMinDateKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._maxDate, CPMaxDateKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._dateValue, CPDateValueKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._textFont, CPTextFontKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._locale, CPLocaleKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._backgroundColor, CPBackgroundColorKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._drawsBackground, CPDrawsBackgroundKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._isBordered, CPBorderedKey);
}
,["void","CPCoder"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "_CPDatePickerValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
}{
var the_class = objj_getClass("CPDate")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPDate\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_daysInMonth"), function $CPDate___daysInMonth(self, _cmd)
{
    return 32 - (new Date(self.getFullYear(), self.getMonth(), 32)).getDate();
}
,["int"]), new objj_method(sel_getUid("_resetToMidnight"), function $CPDate___resetToMidnight(self, _cmd)
{
    self.setHours(0);
    self.setMinutes(0);
    self.setSeconds(0);
    self.setMilliseconds(0);
}
,["void"]), new objj_method(sel_getUid("_resetToLastSeconds"), function $CPDate___resetToLastSeconds(self, _cmd)
{
    self.setHours(23);
    self.setMinutes(59);
    self.setSeconds(59);
    self.setMilliseconds(99);
}
,["void"])]);
}p;18;_CPMenuBarWindow.jt;16790;@STATIC;1.0;i;9;CPPanel.ji;16;_CPMenuManager.jt;16736;objj_executeFile("CPPanel.j", YES);objj_executeFile("_CPMenuManager.j", YES);{var the_class = objj_allocateClassPair(CPPanel, "_CPMenuBarWindow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menu"), new objj_ivar("_highlightView"), new objj_ivar("_menuItemViews"), new objj_ivar("_trackingMenuItem"), new objj_ivar("_iconImageView"), new objj_ivar("_titleField"), new objj_ivar("_textColor"), new objj_ivar("_titleColor"), new objj_ivar("_textShadowColor"), new objj_ivar("_titleShadowColor"), new objj_ivar("_highlightColor"), new objj_ivar("_highlightTextColor"), new objj_ivar("_highlightTextShadowColor")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $_CPMenuBarWindow__init(self, _cmd)
{
    var contentRect = objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "contentBounds");
    contentRect.size.height = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-height", _CPMenuView);
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuBarWindow").super_class }, "initWithContentRect:styleMask:", contentRect, CPBorderlessWindowMask);
    if (self)
    {
        self._constrainsToUsableScreen = NO;
        objj_msgSend(self, "setLevel:", CPMainMenuWindowLevel);
        objj_msgSend(self, "setAutoresizingMask:", CPWindowWidthSizable);
        var contentView = objj_msgSend(self, "contentView");
        objj_msgSend(contentView, "setAutoresizesSubviews:", NO);
        objj_msgSend(self, "setBecomesKeyOnlyIfNeeded:", YES);
        self._iconImageView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 16.0, 16.0));
        objj_msgSend(contentView, "addSubview:", self._iconImageView);
        self._titleField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._titleField, "setFont:", objj_msgSend(CPFont, "boldSystemFontOfSize:", objj_msgSend(CPFont, "systemFontSize") + 1));
        objj_msgSend(self._titleField, "setAlignment:", CPCenterTextAlignment);
        objj_msgSend(self._titleField, "setTextShadowOffset:", CGSizeMake(0, 1));
        objj_msgSend(contentView, "addSubview:", self._titleField);
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("setTitle:"), function $_CPMenuBarWindow__setTitle_(self, _cmd, aTitle)
{
    var bundleName = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "objectForInfoDictionaryKey:", "CPBundleName");
    if (!objj_msgSend(bundleName, "length"))
        document.title = aTitle;
    else if (objj_msgSend(aTitle, "length"))
        document.title = aTitle + " - " + bundleName;
    else
        document.title = bundleName;
    objj_msgSend(self._titleField, "setStringValue:", aTitle);
    objj_msgSend(self._titleField, "sizeToFit");
    objj_msgSend(self, "tile");
}
,["void","CPString"]), new objj_method(sel_getUid("setIconImage:"), function $_CPMenuBarWindow__setIconImage_(self, _cmd, anImage)
{
    objj_msgSend(self._iconImageView, "setImage:", anImage);
    objj_msgSend(self._iconImageView, "setHidden:", anImage == nil);
    objj_msgSend(self, "tile");
}
,["void","CPImage"]), new objj_method(sel_getUid("setIconImageAlphaValue:"), function $_CPMenuBarWindow__setIconImageAlphaValue_(self, _cmd, anAlphaValue)
{
    objj_msgSend(self._iconImageView, "setAlphaValue:", anAlphaValue);
}
,["void","float"]), new objj_method(sel_getUid("setColor:"), function $_CPMenuBarWindow__setColor_(self, _cmd, aColor)
{
    if (!aColor)
        objj_msgSend(objj_msgSend(self, "contentView"), "setBackgroundColor:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-background-color", _CPMenuView));
    else
        objj_msgSend(objj_msgSend(self, "contentView"), "setBackgroundColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setTextColor:"), function $_CPMenuBarWindow__setTextColor_(self, _cmd, aColor)
{
    if (self._textColor == aColor)
        return;
    self._textColor = aColor;
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setTextColor:"), self._textColor);
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setParentMenuTextColor:"), self._textColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setTitleColor:"), function $_CPMenuBarWindow__setTitleColor_(self, _cmd, aColor)
{
    if (self._titleColor == aColor)
        return;
    self._titleColor = aColor;
    objj_msgSend(self._titleField, "setTextColor:", aColor ? aColor : objj_msgSend(CPColor, "blackColor"));
}
,["void","CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPMenuBarWindow__setTextShadowColor_(self, _cmd, aColor)
{
    if (self._textShadowColor == aColor)
        return;
    self._textShadowColor = aColor;
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setTextShadowColor:"), self._textShadowColor);
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setParentMenuTextShadowColor:"), self._textShadowColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setTitleShadowColor:"), function $_CPMenuBarWindow__setTitleShadowColor_(self, _cmd, aColor)
{
    if (self._titleShadowColor == aColor)
        return;
    self._titleShadowColor = aColor;
    objj_msgSend(self._titleField, "setTextShadowColor:", aColor ? aColor : objj_msgSend(CPColor, "whiteColor"));
}
,["void","CPColor"]), new objj_method(sel_getUid("setHighlightColor:"), function $_CPMenuBarWindow__setHighlightColor_(self, _cmd, aColor)
{
    if (self._highlightColor == aColor)
        return;
    self._highlightColor = aColor;
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setParentMenuHighlightColor:"), self._highlightColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setHighlightTextColor:"), function $_CPMenuBarWindow__setHighlightTextColor_(self, _cmd, aColor)
{
    if (self._highlightTextColor == aColor)
        return;
    self._highlightTextColor = aColor;
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setParentMenuHighlightTextColor:"), self._highlightTextColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setHighlightTextShadowColor:"), function $_CPMenuBarWindow__setHighlightTextShadowColor_(self, _cmd, aColor)
{
    if (self._highlightTextShadowColor == aColor)
        return;
    self._highlightTextShadowColor = aColor;
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setParentMenuHighlightTextShadowColor:"), self._highlightTextShadowColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setMenu:"), function $_CPMenuBarWindow__setMenu_(self, _cmd, aMenu)
{
    if (self._menu == aMenu)
        return;
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._menu)
    {
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPMenuDidAddItemNotification, self._menu);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPMenuDidChangeItemNotification, self._menu);
        objj_msgSend(defaultCenter, "removeObserver:name:object:", self, CPMenuDidRemoveItemNotification, self._menu);
        var items = objj_msgSend(self._menu, "itemArray"),
            count = items.length;
        while (count--)
            objj_msgSend(objj_msgSend(items[count], "_menuItemView"), "removeFromSuperview");
    }
    self._menu = aMenu;
    if (self._menu)
    {
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("menuDidAddItem:"), CPMenuDidAddItemNotification, self._menu);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("menuDidChangeItem:"), CPMenuDidChangeItemNotification, self._menu);
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self, sel_getUid("menuDidRemoveItem:"), CPMenuDidRemoveItemNotification, self._menu);
    }
    self._menuItemViews = [];
    var contentView = objj_msgSend(self, "contentView"),
        items = objj_msgSend(self._menu, "itemArray"),
        count = items.length;
    for (var index = 0; index < count; ++index)
    {
        var item = items[index],
            menuItemView = objj_msgSend(item, "_menuItemView");
        self._menuItemViews.push(menuItemView);
        objj_msgSend(menuItemView, "setTextColor:", self._textColor);
        objj_msgSend(menuItemView, "setHidden:", objj_msgSend(item, "isHidden"));
        objj_msgSend(menuItemView, "synchronizeWithMenuItem");
        objj_msgSend(contentView, "addSubview:", menuItemView);
    }
    objj_msgSend(self, "tile");
}
,["void","CPMenu"]), new objj_method(sel_getUid("menuDidChangeItem:"), function $_CPMenuBarWindow__menuDidChangeItem_(self, _cmd, aNotification)
{
    var menuItem = objj_msgSend(self._menu, "itemAtIndex:", objj_msgSend(objj_msgSend(aNotification, "userInfo"), "objectForKey:", "CPMenuItemIndex")),
        menuItemView = objj_msgSend(menuItem, "_menuItemView");
    objj_msgSend(menuItemView, "setHidden:", objj_msgSend(menuItem, "isHidden"));
    objj_msgSend(menuItemView, "synchronizeWithMenuItem");
    objj_msgSend(self, "tile");
}
,["void","CPNotification"]), new objj_method(sel_getUid("menuDidAddItem:"), function $_CPMenuBarWindow__menuDidAddItem_(self, _cmd, aNotification)
{
    var index = objj_msgSend(objj_msgSend(aNotification, "userInfo"), "objectForKey:", "CPMenuItemIndex"),
        menuItem = objj_msgSend(self._menu, "itemAtIndex:", index),
        menuItemView = objj_msgSend(menuItem, "_menuItemView");
    objj_msgSend(self._menuItemViews, "insertObject:atIndex:", menuItemView, index);
    objj_msgSend(menuItemView, "setTextColor:", self._textColor);
    objj_msgSend(menuItemView, "setHidden:", objj_msgSend(menuItem, "isHidden"));
    objj_msgSend(menuItemView, "synchronizeWithMenuItem");
    objj_msgSend(objj_msgSend(self, "contentView"), "addSubview:", menuItemView);
    objj_msgSend(self, "tile");
}
,["void","CPNotification"]), new objj_method(sel_getUid("menuDidRemoveItem:"), function $_CPMenuBarWindow__menuDidRemoveItem_(self, _cmd, aNotification)
{
    var index = objj_msgSend(objj_msgSend(aNotification, "userInfo"), "objectForKey:", "CPMenuItemIndex"),
        menuItemView = objj_msgSend(self._menuItemViews, "objectAtIndex:", index);
    objj_msgSend(self._menuItemViews, "removeObjectAtIndex:", index);
    objj_msgSend(menuItemView, "removeFromSuperview");
    objj_msgSend(self, "tile");
}
,["void","CPNotification"]), new objj_method(sel_getUid("acceptsFirstMouse:"), function $_CPMenuBarWindow__acceptsFirstMouse_(self, _cmd, anEvent)
{
    return YES;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $_CPMenuBarWindow__mouseDown_(self, _cmd, anEvent)
{
    var constraintRect = CGRectInset(objj_msgSend(objj_msgSend(self, "platformWindow"), "visibleFrame"), 5.0, 0.0);
    constraintRect.size.height -= 5.0;
    objj_msgSend(objj_msgSend(_CPMenuManager, "sharedMenuManager"), "beginTracking:menuContainer:constraintRect:callback:", anEvent, self, constraintRect, function(aMenuContainer, aMenu)
    {
        objj_msgSend(aMenu, "_performActionOfHighlightedItemChain");
        objj_msgSend(aMenu, "_highlightItemAtIndex:", CPNotFound);
    });
}
,["void","CPEvent"]), new objj_method(sel_getUid("font"), function $_CPMenuBarWindow__font(self, _cmd)
{
    objj_msgSend(CPFont, "systemFontOfSize:", objj_msgSend(CPFont, "systemFontSize"));
}
,["CPFont"]), new objj_method(sel_getUid("tile"), function $_CPMenuBarWindow__tile(self, _cmd)
{
    var items = objj_msgSend(self._menu, "itemArray"),
        index = 0,
        count = items.length,
        x = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-left-margin", _CPMenuView),
        y = 0.0,
        isLeftAligned = YES;
    for (; index < count; ++index)
    {
        var item = items[index];
        if (objj_msgSend(item, "isSeparatorItem"))
        {
            x = CGRectGetWidth(objj_msgSend(self, "frame")) - objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-right-margin", _CPMenuView);
            isLeftAligned = NO;
            continue;
        }
        if (objj_msgSend(item, "isHidden"))
            continue;
        var menuItemView = objj_msgSend(item, "_menuItemView"),
            frame = objj_msgSend(menuItemView, "frame");
        if (isLeftAligned)
        {
            objj_msgSend(menuItemView, "setFrame:", CGRectMake(x, 0.0, CGRectGetWidth(frame), objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-height", _CPMenuView)));
            x += CGRectGetWidth(objj_msgSend(menuItemView, "frame"));
        }
        else
        {
            objj_msgSend(menuItemView, "setFrame:", CGRectMake(x - CGRectGetWidth(frame), 0.0, CGRectGetWidth(frame), objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-height", _CPMenuView)));
            x = CGRectGetMinX(objj_msgSend(menuItemView, "frame"));
        }
    }
    var bounds = objj_msgSend(objj_msgSend(self, "contentView"), "bounds"),
        titleFrame = objj_msgSend(self._titleField, "frame");
    if (objj_msgSend(self._iconImageView, "isHidden"))
        objj_msgSend(self._titleField, "setFrameOrigin:", CGPointMake((CGRectGetWidth(bounds) - CGRectGetWidth(titleFrame)) / 2.0, (CGRectGetHeight(bounds) - CGRectGetHeight(titleFrame)) / 2.0));
    else
    {
        var iconFrame = objj_msgSend(self._iconImageView, "frame"),
            iconWidth = CGRectGetWidth(iconFrame),
            totalWidth = iconWidth + CGRectGetWidth(titleFrame);
        objj_msgSend(self._iconImageView, "setFrameOrigin:", CGPointMake((CGRectGetWidth(bounds) - totalWidth) / 2.0, (CGRectGetHeight(bounds) - CGRectGetHeight(iconFrame)) / 2.0));
        objj_msgSend(self._titleField, "setFrameOrigin:", CGPointMake((CGRectGetWidth(bounds) - totalWidth) / 2.0 + iconWidth, (CGRectGetHeight(bounds) - CGRectGetHeight(titleFrame)) / 2.0));
    }
}
,["void"]), new objj_method(sel_getUid("setFrame:display:animate:"), function $_CPMenuBarWindow__setFrame_display_animate_(self, _cmd, aRect, shouldDisplay, shouldAnimate)
{
    var size = objj_msgSend(self, "frame").size;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuBarWindow").super_class }, "setFrame:display:animate:", aRect, shouldDisplay, shouldAnimate);
    if (!CGSizeEqualToSize(size, aRect.size))
        objj_msgSend(self, "tile");
}
,["void","CGRect","BOOL","BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("font"), function $_CPMenuBarWindow__font(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-font", _CPMenuView);
}
,["CPFont"])]);
}{
var the_class = objj_getClass("_CPMenuBarWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPMenuBarWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("isMenuBar"), function $_CPMenuBarWindow__isMenuBar(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("globalFrame"), function $_CPMenuBarWindow__globalFrame(self, _cmd)
{
    return objj_msgSend(self, "frame");
}
,["CGRect"]), new objj_method(sel_getUid("scrollingStateForPoint:"), function $_CPMenuBarWindow__scrollingStateForPoint_(self, _cmd, aGlobalLocation)
{
    return _CPMenuManagerScrollingStateNone;
}
,["_CPManagerScrollingState","CGPoint"]), new objj_method(sel_getUid("itemIndexAtPoint:"), function $_CPMenuBarWindow__itemIndexAtPoint_(self, _cmd, aPoint)
{
    var items = objj_msgSend(self._menu, "itemArray"),
        index = items.length;
    while (index--)
    {
        var item = items[index];
        if (objj_msgSend(item, "isHidden") || objj_msgSend(item, "isSeparatorItem"))
            continue;
        if (CGRectContainsPoint(objj_msgSend(self, "rectForItemAtIndex:", index), aPoint))
            return index;
    }
    return CPNotFound;
}
,["CPInteger","CGPoint"]), new objj_method(sel_getUid("rectForItemAtIndex:"), function $_CPMenuBarWindow__rectForItemAtIndex_(self, _cmd, anIndex)
{
    var menuItem = objj_msgSend(self._menu, "itemAtIndex:", anIndex === CPNotFound ? 0 : anIndex);
    return objj_msgSend(objj_msgSend(menuItem, "_menuItemView"), "frame");
}
,["CGRect","CPInteger"])]);
}p;16;_CPMenuManager.jt;26431;@STATIC;1.0;I;21;Foundation/CPObject.jI;33;Foundation/CPNotificationCenter.ji;9;CPEvent.ji;14;CPKeyBinding.jt;26315;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPKeyBinding.j", YES);_CPMenuManagerScrollingStateUp = -1;
_CPMenuManagerScrollingStateDown = 1;
_CPMenuManagerScrollingStateNone = 0;
var STICKY_TIME_INTERVAL = 0.4,
    SharedMenuManager = nil;
{var the_class = objj_allocateClassPair(CPObject, "_CPMenuManager"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_startTime"), new objj_ivar("_openEvent"), new objj_ivar("_mouseWasDragged"), new objj_ivar("_scrollingState"), new objj_ivar("_lastGlobalLocation"), new objj_ivar("_lastMouseOverMenuView"), new objj_ivar("_constraintRect"), new objj_ivar("_menuContainerStack"), new objj_ivar("_trackingCallback"), new objj_ivar("_keyBuffer"), new objj_ivar("_previousActiveItem"), new objj_ivar("_showTimerID"), new objj_ivar("_menuBarButtonItemIndex")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $_CPMenuManager__init(self, _cmd)
{
    if (SharedMenuManager)
        return SharedMenuManager;
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuManager").super_class }, "init");
}
,["id"]), new objj_method(sel_getUid("trackingMenuContainer"), function $_CPMenuManager__trackingMenuContainer(self, _cmd)
{
    return self._menuContainerStack[0];
}
,["id"]), new objj_method(sel_getUid("trackingMenu"), function $_CPMenuManager__trackingMenu(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "trackingMenuContainer"), "menu");
}
,["CPMenu"]), new objj_method(sel_getUid("beginTracking:menuContainer:constraintRect:callback:"), function $_CPMenuManager__beginTracking_menuContainer_constraintRect_callback_(self, _cmd, anEvent, aMenuContainer, aRect, aCallback)
{
    var menu = objj_msgSend(aMenuContainer, "menu");
    if (objj_msgSend(menu, "numberOfItems") <= 0)
        return;
    CPApp._activeMenu = menu;
    self._startTime = objj_msgSend(anEvent, "timestamp");
    self._openEvent = anEvent;
    self._scrollingState = _CPMenuManagerScrollingStateNone;
    self._constraintRect = aRect;
    self._menuContainerStack = [aMenuContainer];
    self._trackingCallback = aCallback;
    if (menu === objj_msgSend(CPApp, "mainMenu"))
    {
        var globalLocation = objj_msgSend(anEvent, "globalLocation"),
            menuLocation = objj_msgSend(aMenuContainer, "convertGlobalToBase:", globalLocation),
            activeItemIndex = objj_msgSend(aMenuContainer, "itemIndexAtPoint:", menuLocation),
            activeItem = activeItemIndex !== CPNotFound ? objj_msgSend(menu, "itemAtIndex:", activeItemIndex) : nil;
        self._menuBarButtonItemIndex = activeItemIndex;
        if (objj_msgSend(activeItem, "_isMenuBarButton"))
            return objj_msgSend(self, "trackMenuBarButtonEvent:", anEvent);
    }
    self._mouseWasDragged = NO;
    objj_msgSend(self, "trackEvent:", anEvent);
}
,["void","CPEvent","id","CGRect","Function"]), new objj_method(sel_getUid("_trackAgain"), function $_CPMenuManager___trackAgain(self, _cmd)
{
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackEvent:"), CPKeyDownMask | CPPeriodicMask | CPMouseMovedMask | CPLeftMouseDraggedMask | CPLeftMouseDownMask | CPLeftMouseUpMask | CPRightMouseUpMask | CPAppKitDefinedMask | CPScrollWheelMask, nil, nil, YES);
}
,["void"]), new objj_method(sel_getUid("trackEvent:"), function $_CPMenuManager__trackEvent_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type"),
        trackingMenu = objj_msgSend(self, "trackingMenu");
    if (type === CPAppKitDefined)
        return objj_msgSend(self, "completeTracking");
    if (type === CPKeyDown)
    {
        var menu = trackingMenu,
            submenu = objj_msgSend(objj_msgSend(menu, "highlightedItem"), "submenu");
        while (submenu && objj_msgSend(submenu._menuWindow, "isVisible"))
        {
            menu = submenu;
            submenu = objj_msgSend(objj_msgSend(menu, "highlightedItem"), "submenu");
        }
        if (objj_msgSend(menu, "numberOfItems"))
            objj_msgSend(self, "interpretKeyEvent:forMenu:", anEvent, menu);
        objj_msgSend(self, "_trackAgain");
        return;
    }
    var globalLocation = type === CPPeriodic ? self._lastGlobalLocation : objj_msgSend(anEvent, "globalLocation");
    if (!globalLocation)
    {
        objj_msgSend(self, "_trackAgain");
        return;
    }
    var activeMenuContainer = objj_msgSend(self, "menuContainerForPoint:", globalLocation),
        activeMenu = objj_msgSend(activeMenuContainer, "menu"),
        menuLocation = objj_msgSend(activeMenuContainer, "convertGlobalToBase:", globalLocation),
        activeItemIndex = activeMenuContainer ? objj_msgSend(activeMenuContainer, "itemIndexAtPoint:", menuLocation) : CPNotFound,
        activeItem = activeItemIndex !== CPNotFound ? objj_msgSend(activeMenu, "itemAtIndex:", activeItemIndex) : nil;
    if (type === CPLeftMouseDown && self._openEvent !== anEvent && (!activeMenuContainer || !CGRectContainsPoint(objj_msgSend(activeMenuContainer, "globalFrame"), globalLocation)))
    {
        objj_msgSend(self, "completeTracking");
        objj_msgSend(CPApp, "sendEvent:", anEvent);
        return;
    }
    objj_msgSend(self, "_trackAgain");
    if (self._lastGlobalLocation && CGRectContainsPoint(objj_msgSend(activeMenuContainer, "globalFrame"), self._lastGlobalLocation) && !CGRectContainsPoint(objj_msgSend(activeMenuContainer, "globalFrame"), globalLocation))
        objj_msgSend(activeMenu, "_highlightItemAtIndex:", CPNotFound);
    self._lastGlobalLocation = globalLocation;
    if (!objj_msgSend(activeItem, "isEnabled") || objj_msgSend(activeItem, "_isMenuBarButton"))
    {
        activeItemIndex = CPNotFound;
        activeItem = nil;
    }
    var mouseOverMenuView = objj_msgSend(activeItem, "view");
    if (type === CPScrollWheel && !objj_msgSend(activeMenuContainer, "isMenuBar"))
        objj_msgSend(activeMenuContainer, "scrollByDelta:", objj_msgSend(anEvent, "deltaY"));
    if (type === CPPeriodic)
    {
        if (self._scrollingState === _CPMenuManagerScrollingStateUp)
            objj_msgSend(activeMenuContainer, "scrollUp");
        else if (self._scrollingState === _CPMenuManagerScrollingStateDown)
            objj_msgSend(activeMenuContainer, "scrollDown");
    }
    if (mouseOverMenuView)
    {
        if (!self._lastMouseOverMenuView)
            objj_msgSend(activeMenu, "_highlightItemAtIndex:", CPNotFound);
        if (self._lastMouseOverMenuView != mouseOverMenuView)
        {
            objj_msgSend(self._lastMouseOverMenuView, "mouseExited:", anEvent);
            objj_msgSend(mouseOverMenuView, "mouseEntered:", anEvent);
            self._lastMouseOverMenuView = mouseOverMenuView;
        }
        var menuContainerWindow = activeMenuContainer;
        if (!objj_msgSend(menuContainerWindow, "isKindOfClass:", CPWindow))
            menuContainerWindow = objj_msgSend(menuContainerWindow, "window");
        objj_msgSend(menuContainerWindow, "sendEvent:", objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", type, menuLocation, objj_msgSend(anEvent, "modifierFlags"), objj_msgSend(anEvent, "timestamp"), menuContainerWindow, nil, 0, objj_msgSend(anEvent, "clickCount"), objj_msgSend(anEvent, "pressure")));
    }
    else
    {
        if (self._lastMouseOverMenuView)
        {
            objj_msgSend(self._lastMouseOverMenuView, "mouseExited:", anEvent);
            self._lastMouseOverMenuView = nil;
        }
        if (activeItemIndex !== CPNotFound)
            objj_msgSend(activeMenu, "_highlightItemAtIndex:", activeItemIndex);
        if (type === CPMouseMoved || type === CPLeftMouseDragged || type === CPLeftMouseDown || type === CPPeriodic)
        {
            if (type === CPLeftMouseDragged)
                self._mouseWasDragged = YES;
            var oldScrollingState = self._scrollingState;
            self._scrollingState = objj_msgSend(activeMenuContainer, "scrollingStateForPoint:", globalLocation);
            if (self._scrollingState !== oldScrollingState)
            {
                if (self._scrollingState === _CPMenuManagerScrollingStateNone)
                    objj_msgSend(CPEvent, "stopPeriodicEvents");
                else if (oldScrollingState === _CPMenuManagerScrollingStateNone)
                    objj_msgSend(CPEvent, "startPeriodicEventsAfterDelay:withPeriod:", 0.0, 0.04);
            }
        }
        else if (type === CPLeftMouseUp || type === CPRightMouseUp)
        {
            if (self._mouseWasDragged || objj_msgSend(anEvent, "timestamp") - self._startTime > STICKY_TIME_INTERVAL)
            {
                if (self._mouseWasDragged || objj_msgSend(activeMenuContainer, "isMenuBar") || objj_msgSend(activeItem, "action") !== sel_getUid("submenuAction:"))
                {
                    objj_msgSend(trackingMenu, "cancelTracking");
                }
            }
        }
    }
    if (self._previousActiveItem !== activeItem)
    {
        clearTimeout(self._showTimerID);
        self._showTimerID = undefined;
    }
    if (objj_msgSend(activeItem, "hasSubmenu"))
    {
        var activeItemRect = objj_msgSend(activeMenuContainer, "rectForItemAtIndex:", activeItemIndex),
            newMenuOrigin;
        if (objj_msgSend(activeMenuContainer, "isMenuBar"))
            newMenuOrigin = CGPointMake(CGRectGetMinX(activeItemRect), CGRectGetMaxY(activeItemRect));
        else
            newMenuOrigin = CGPointMake(CGRectGetMaxX(activeItemRect), CGRectGetMinY(activeItemRect));
        newMenuOrigin = objj_msgSend(activeMenuContainer, "convertBaseToGlobal:", newMenuOrigin);
        if (self._showTimerID === undefined)
        {
            objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, activeMenu, CGPointMakeZero());
            if (!objj_msgSend(activeMenuContainer, "isMenuBar"))
            {
                self._showTimerID = setTimeout(function()
                {
                    objj_msgSend(self, "showMenu:fromMenu:atPoint:", objj_msgSend(activeItem, "submenu"), objj_msgSend(activeItem, "menu"), newMenuOrigin);
                }, 250);
            }
            else
                objj_msgSend(self, "showMenu:fromMenu:atPoint:", objj_msgSend(activeItem, "submenu"), objj_msgSend(activeItem, "menu"), newMenuOrigin);
        }
    }
    else
        objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, activeMenu, CGPointMakeZero());
    self._previousActiveItem = activeItem;
}
,["void","CPEvent"]), new objj_method(sel_getUid("trackMenuBarButtonEvent:"), function $_CPMenuManager__trackMenuBarButtonEvent_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type === CPAppKitDefined)
        return objj_msgSend(self, "completeTracking");
    var globalLocation = objj_msgSend(anEvent, "globalLocation"),
        menu = objj_msgSend(self, "trackingMenu"),
        trackingMenuContainer = objj_msgSend(self, "trackingMenuContainer"),
        menuLocation = objj_msgSend(trackingMenuContainer, "convertGlobalToBase:", globalLocation);
    if (objj_msgSend(trackingMenuContainer, "itemIndexAtPoint:", menuLocation) === self._menuBarButtonItemIndex)
        objj_msgSend(menu, "_highlightItemAtIndex:", self._menuBarButtonItemIndex);
    else
        objj_msgSend(menu, "_highlightItemAtIndex:", CPNotFound);
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackMenuBarButtonEvent:"), CPPeriodicMask | CPMouseMovedMask | CPLeftMouseDraggedMask | CPLeftMouseUpMask | CPAppKitDefinedMask, nil, nil, YES);
    if (type === CPLeftMouseUp)
        objj_msgSend(menu, "cancelTracking");
}
,["void","CPEvent"]), new objj_method(sel_getUid("cancelActiveMenu"), function $_CPMenuManager__cancelActiveMenu(self, _cmd)
{
    if (CPApp._activeMenu)
    {
        objj_msgSend(self, "completeTracking");
        self._menuContainerStack = [];
    }
}
,["void"]), new objj_method(sel_getUid("completeTracking"), function $_CPMenuManager__completeTracking(self, _cmd)
{
    var trackingMenu = objj_msgSend(self, "trackingMenu");
    objj_msgSend(CPEvent, "stopPeriodicEvents");
    objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, trackingMenu, nil);
    objj_msgSend(trackingMenu, "_menuDidClose");
    if (self._trackingCallback)
        self._trackingCallback(objj_msgSend(self, "trackingMenuContainer"), trackingMenu);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPMenuDidEndTrackingNotification, trackingMenu);
    CPApp._activeMenu = nil;
}
,["void"]), new objj_method(sel_getUid("menuContainerForPoint:"), function $_CPMenuManager__menuContainerForPoint_(self, _cmd, aGlobalLocation)
{
    var count = objj_msgSend(self._menuContainerStack, "count"),
        firstMenuContainer = self._menuContainerStack[0];
    if (count === 1)
        return firstMenuContainer;
    var firstMenuWindowIndex = 0,
        lastMenuWindowIndex = count - 1;
    if (objj_msgSend(firstMenuContainer, "isMenuBar"))
    {
        if (CGRectContainsPoint(objj_msgSend(firstMenuContainer, "globalFrame"), aGlobalLocation))
            return firstMenuContainer;
        firstMenuWindowIndex = 1;
    }
    var index = count,
        x = aGlobalLocation.x,
        closerDeltaX = Infinity,
        closerMenuContainer = nil;
    while (index-- > firstMenuWindowIndex)
    {
        var menuContainer = self._menuContainerStack[index],
            menuContainerFrame = objj_msgSend(menuContainer, "globalFrame"),
            menuContainerMinX = CGRectGetMinX(menuContainerFrame),
            menuContainerMaxX = CGRectGetMaxX(menuContainerFrame);
        if (x < menuContainerMaxX && x >= menuContainerMinX)
            return menuContainer;
        if (index === firstMenuWindowIndex || index === lastMenuWindowIndex)
        {
            var deltaX = ABS(x < menuContainerMinX ? menuContainerMinX - x : menuContainerMaxX - x);
            if (deltaX < closerDeltaX)
            {
                closerMenuContainer = menuContainer;
                closerDeltaX = deltaX;
            }
        }
    }
    return closerMenuContainer;
}
,["id","float"]), new objj_method(sel_getUid("showMenu:fromMenu:atPoint:"), function $_CPMenuManager__showMenu_fromMenu_atPoint_(self, _cmd, newMenu, baseMenu, aGlobalLocation)
{
    var count = self._menuContainerStack.length,
        index = count;
    objj_msgSend(newMenu, "_menuWillOpen");
    while (index--)
    {
        var menuContainer = self._menuContainerStack[index],
            menu = objj_msgSend(menuContainer, "menu");
        if (menu === baseMenu)
            break;
        if (menu === newMenu)
            return objj_msgSend(newMenu, "_highlightItemAtIndex:", CPNotFound);
        objj_msgSend(menuContainer, "orderOut:", self);
        objj_msgSend(menuContainer, "setMenu:", nil);
        objj_msgSend(_CPMenuWindow, "poolMenuWindow:", menuContainer);
        objj_msgSend(self._menuContainerStack, "removeObjectAtIndex:", index);
        objj_msgSend(menu, "_menuDidClose");
    }
    if (!newMenu)
        return;
    objj_msgSend(newMenu, "_highlightItemAtIndex:", CPNotFound);
    var menuWindow = objj_msgSend(_CPMenuWindow, "menuWindowWithMenu:font:", newMenu, objj_msgSend(self._menuContainerStack[0], "font"));
    objj_msgSend(self._menuContainerStack, "addObject:", menuWindow);
    objj_msgSend(menuWindow, "setConstraintRect:", self._constraintRect);
    if (baseMenu === objj_msgSend(self, "trackingMenu") && objj_msgSend(objj_msgSend(self, "trackingMenuContainer"), "isMenuBar"))
        objj_msgSend(menuWindow, "setBackgroundStyle:", _CPMenuWindowMenuBarBackgroundStyle);
    else
        objj_msgSend(menuWindow, "setBackgroundStyle:", _CPMenuWindowPopUpBackgroundStyle);
    objj_msgSend(menuWindow, "setFrameOrigin:", aGlobalLocation);
    objj_msgSend(menuWindow, "orderFront:", self);
}
,["void","CPMenu","CPMenu","CGPoint"]), new objj_method(sel_getUid("interpretKeyEvent:forMenu:"), function $_CPMenuManager__interpretKeyEvent_forMenu_(self, _cmd, anEvent, menu)
{
    var modifierFlags = objj_msgSend(anEvent, "modifierFlags"),
        character = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
        selectorNames = objj_msgSend(CPKeyBinding, "selectorsForKey:modifierFlags:", character, modifierFlags);
    if (selectorNames)
    {
        var iter = objj_msgSend(selectorNames, "objectEnumerator"),
            obj;
        while ((obj = objj_msgSend(iter, "nextObject")) !== nil)
        {
            var aSelector = CPSelectorFromString(obj);
            if (objj_msgSend(self, "respondsToSelector:", aSelector))
                objj_msgSend(self, "performSelector:withObject:", aSelector, menu);
        }
    }
    else if (!(modifierFlags & (CPCommandKeyMask | CPControlKeyMask)))
    {
        if (objj_msgSend(anEvent, "timestamp") - self._startTime > STICKY_TIME_INTERVAL)
            self._keyBuffer = nil;
        if (!self._keyBuffer)
        {
            self._startTime = objj_msgSend(anEvent, "timestamp");
            self._keyBuffer = character;
            objj_msgSend(CPEvent, "stopPeriodicEvents");
            objj_msgSend(CPEvent, "startPeriodicEventsAfterDelay:withPeriod:", 0.1, 0.1);
        }
        else
            self._keyBuffer += character;
        objj_msgSend(self, "selectNextItemBeginningWith:inMenu:", self._keyBuffer, menu);
        self._lastGlobalLocation = nil;
    }
}
,["void","CPEvent","CPMenu"]), new objj_method(sel_getUid("selectNextItemBeginningWith:inMenu:"), function $_CPMenuManager__selectNextItemBeginningWith_inMenu_(self, _cmd, characters, menu)
{
    var iter = objj_msgSend(objj_msgSend(menu, "itemArray"), "objectEnumerator"),
        obj;
    while ((obj = objj_msgSend(iter, "nextObject")) !== nil)
    {
        if (objj_msgSend(obj, "isHidden") || !objj_msgSend(obj, "isEnabled"))
            continue;
        if (objj_msgSend(objj_msgSend(objj_msgSend(obj, "title"), "commonPrefixWithString:options:", characters, CPCaseInsensitiveSearch), "length") == objj_msgSend(characters, "length"))
        {
            objj_msgSend(menu, "_highlightItemAtIndex:", iter._index);
            break;
        }
    }
    self._startTime = objj_msgSend(CPEvent, "currentTimestamp");
}
,["void","CPString","CPMenu"]), new objj_method(sel_getUid("scrollToBeginningOfDocument:"), function $_CPMenuManager__scrollToBeginningOfDocument_(self, _cmd, menu)
{
    objj_msgSend(menu, "_highlightItemAtIndex:", 0);
}
,["void","CPMenu"]), new objj_method(sel_getUid("scrollToEndOfDocument:"), function $_CPMenuManager__scrollToEndOfDocument_(self, _cmd, menu)
{
    objj_msgSend(menu, "_highlightItemAtIndex:", objj_msgSend(menu, "numberOfItems") - 1);
}
,["void","CPMenu"]), new objj_method(sel_getUid("scrollPageDown:"), function $_CPMenuManager__scrollPageDown_(self, _cmd, menu)
{
    var menuWindow = menu._menuWindow,
        menuClipView = menuWindow._menuClipView,
        bottom = objj_msgSend(menuClipView, "bounds").size.height,
        first = objj_msgSend(menuWindow, "itemIndexAtPoint:", CGPointMake(1, 10)),
        last = objj_msgSend(menuWindow, "itemIndexAtPoint:", CGPointMake(1, bottom)),
        current = objj_msgSend(menu, "indexOfItem:", objj_msgSend(menu, "highlightedItem"));
    if (current == CPNotFound)
    {
        objj_msgSend(menu, "_highlightItemAtIndex:", 0);
        return;
    }
    var next = current + (last - first);
    if (next < objj_msgSend(menu, "numberOfItems"))
        objj_msgSend(menu, "_highlightItemAtIndex:", next);
    else
        objj_msgSend(menu, "_highlightItemAtIndex:", objj_msgSend(menu, "numberOfItems") - 1);
    var item = objj_msgSend(menu, "highlightedItem");
    if (objj_msgSend(item, "isSeparatorItem") || objj_msgSend(item, "isHidden") || !objj_msgSend(item, "isEnabled"))
        objj_msgSend(self, "moveDown:", menu);
}
,["void","CPMenu"]), new objj_method(sel_getUid("scrollPageUp:"), function $_CPMenuManager__scrollPageUp_(self, _cmd, menu)
{
    var menuWindow = menu._menuWindow,
        menuClipView = menuWindow._menuClipView,
        bottom = objj_msgSend(menuClipView, "bounds").size.height,
        first = objj_msgSend(menuWindow, "itemIndexAtPoint:", CGPointMake(1, 10)),
        last = objj_msgSend(menuWindow, "itemIndexAtPoint:", CGPointMake(1, bottom)),
        current = objj_msgSend(menu, "indexOfItem:", objj_msgSend(menu, "highlightedItem"));
    if (current == CPNotFound)
    {
        objj_msgSend(menu, "_highlightItemAtIndex:", 0);
        return;
    }
    var next = current - (last - first);
    if (next < 0)
        objj_msgSend(menu, "_highlightItemAtIndex:", 0);
    else
        objj_msgSend(menu, "_highlightItemAtIndex:", next);
    var item = objj_msgSend(menu, "highlightedItem");
    if (objj_msgSend(item, "isSeparatorItem") || objj_msgSend(item, "isHidden") || !objj_msgSend(item, "isEnabled"))
        objj_msgSend(self, "moveUp:", menu);
}
,["void","CPMenu"]), new objj_method(sel_getUid("moveLeft:"), function $_CPMenuManager__moveLeft_(self, _cmd, menu)
{
    if (objj_msgSend(menu, "supermenu"))
    {
        if (objj_msgSend(menu, "supermenu") == objj_msgSend(CPApp, "mainMenu"))
        {
            objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, objj_msgSend(menu, "supermenu"), CGPointMakeZero());
            objj_msgSend(self, "moveUp:", objj_msgSend(CPApp, "mainMenu"));
            var activeItem = objj_msgSend(objj_msgSend(CPApp, "mainMenu"), "highlightedItem"),
                menuLocation = CGPointMake(objj_msgSend(objj_msgSend(activeItem, "_menuItemView"), "frameOrigin").x, objj_msgSend(objj_msgSend(activeItem, "_menuItemView"), "frameSize").height);
            objj_msgSend(self, "showMenu:fromMenu:atPoint:", objj_msgSend(activeItem, "submenu"), objj_msgSend(activeItem, "menu"), menuLocation);
        }
        else
            objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, objj_msgSend(menu, "supermenu"), CGPointMakeZero());
    }
}
,["void","CPMenu"]), new objj_method(sel_getUid("moveRight:"), function $_CPMenuManager__moveRight_(self, _cmd, menu)
{
    var activeItem = objj_msgSend(menu, "highlightedItem");
    if (objj_msgSend(activeItem, "hasSubmenu"))
    {
        if (objj_msgSend(objj_msgSend(activeItem, "submenu"), "numberOfItems"))
        {
            var activeItemIndex = objj_msgSend(menu, "indexOfItem:", activeItem),
                activeMenuContainer = menu._menuWindow,
                activeItemRect = objj_msgSend(activeMenuContainer, "rectForItemAtIndex:", activeItemIndex),
                newMenuOrigin;
            if (objj_msgSend(activeMenuContainer, "isMenuBar"))
                newMenuOrigin = CGPointMake(CGRectGetMinX(activeItemRect), CGRectGetMaxY(activeItemRect));
            else
                newMenuOrigin = CGPointMake(CGRectGetMaxX(activeItemRect), CGRectGetMinY(activeItemRect));
            newMenuOrigin = objj_msgSend(activeMenuContainer, "convertBaseToGlobal:", newMenuOrigin);
            objj_msgSend(self, "showMenu:fromMenu:atPoint:", objj_msgSend(activeItem, "submenu"), objj_msgSend(activeItem, "menu"), newMenuOrigin);
            objj_msgSend(self, "moveDown:", objj_msgSend(activeItem, "submenu"));
        }
    }
    else if (objj_msgSend(self, "trackingMenu") == objj_msgSend(CPApp, "mainMenu"))
    {
        objj_msgSend(self, "showMenu:fromMenu:atPoint:", nil, menu, CGPointMakeZero());
        objj_msgSend(self, "moveDown:", objj_msgSend(CPApp, "mainMenu"));
        var activeItem = objj_msgSend(objj_msgSend(CPApp, "mainMenu"), "highlightedItem"),
            menuLocation = CGPointMake(objj_msgSend(objj_msgSend(activeItem, "_menuItemView"), "frameOrigin").x, objj_msgSend(objj_msgSend(activeItem, "_menuItemView"), "frameSize").height);
        objj_msgSend(self, "showMenu:fromMenu:atPoint:", objj_msgSend(activeItem, "submenu"), objj_msgSend(activeItem, "menu"), menuLocation);
    }
}
,["void","CPMenu"]), new objj_method(sel_getUid("moveDown:"), function $_CPMenuManager__moveDown_(self, _cmd, menu)
{
    var index = menu._highlightedIndex + 1;
    if (index < objj_msgSend(menu, "numberOfItems"))
    {
        objj_msgSend(menu, "_highlightItemAtIndex:", index);
        var item = objj_msgSend(menu, "highlightedItem");
        if (objj_msgSend(item, "isSeparatorItem") || objj_msgSend(item, "isHidden") || !objj_msgSend(item, "isEnabled"))
            objj_msgSend(self, "moveDown:", menu);
    }
    else if (menu == objj_msgSend(CPApp, "mainMenu"))
        objj_msgSend(menu, "_highlightItemAtIndex:", 0);
}
,["void","CPMenu"]), new objj_method(sel_getUid("moveUp:"), function $_CPMenuManager__moveUp_(self, _cmd, menu)
{
    var index = menu._highlightedIndex - 1;
    if (index < 0)
    {
        if (index != CPNotFound || menu == objj_msgSend(CPApp, "mainMenu"))
            objj_msgSend(menu, "_highlightItemAtIndex:", objj_msgSend(menu, "numberOfItems") - 1);
        return;
    }
    objj_msgSend(menu, "_highlightItemAtIndex:", index);
    var item = objj_msgSend(menu, "highlightedItem");
    if (objj_msgSend(item, "isSeparatorItem") || objj_msgSend(item, "isHidden") || !objj_msgSend(item, "isEnabled"))
        objj_msgSend(self, "moveUp:", menu);
}
,["void","CPMenu"]), new objj_method(sel_getUid("insertNewline:"), function $_CPMenuManager__insertNewline_(self, _cmd, menu)
{
    if (objj_msgSend(objj_msgSend(menu, "highlightedItem"), "hasSubmenu"))
        objj_msgSend(self, "moveRight:", menu);
    else
        objj_msgSend(menu, "cancelTracking");
}
,["void","CPMenu"]), new objj_method(sel_getUid("cancelOperation:"), function $_CPMenuManager__cancelOperation_(self, _cmd, menu)
{
    objj_msgSend(menu, "_highlightItemAtIndex:", CPNotFound);
    objj_msgSend(CPEvent, "stopPeriodicEvents");
    objj_msgSend(objj_msgSend(self, "trackingMenu"), "cancelTracking");
}
,["void","CPMenu"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("sharedMenuManager"), function $_CPMenuManager__sharedMenuManager(self, _cmd)
{
    if (!SharedMenuManager)
        SharedMenuManager = objj_msgSend(objj_msgSend(_CPMenuManager, "alloc"), "init");
    return SharedMenuManager;
}
,["_CPMenuManager"])]);
}p;15;_CPMenuWindow.jt;23145;@STATIC;1.0;i;12;CPClipView.ji;13;CPImageView.ji;10;CPWindow.ji;16;_CPMenuManager.jt;23054;objj_executeFile("CPClipView.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("CPWindow.j", YES);objj_executeFile("_CPMenuManager.j", YES);var _CPMenuWindowPool = [],
    _CPMenuWindowPoolCapacity = 5,
    _CPMenuWindowBackgroundColors = [];
_CPMenuWindowMenuBarBackgroundStyle = 0;
_CPMenuWindowPopUpBackgroundStyle = 1;
_CPMenuWindowAttachedMenuBackgroundStyle = 2;
{var the_class = objj_allocateClassPair(CPWindow, "_CPMenuWindow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menuView"), new objj_ivar("_menuClipView"), new objj_ivar("_moreAboveView"), new objj_ivar("_moreBelowView"), new objj_ivar("_unconstrainedFrame"), new objj_ivar("_constraintRect")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithContentRect:styleMask:"), function $_CPMenuWindow__initWithContentRect_styleMask_(self, _cmd, aRect, aStyleMask)
{
    self._constraintRect = CGRectMakeZero();
    self._unconstrainedFrame = CGRectMakeZero();
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuWindow").super_class }, "initWithContentRect:styleMask:", aRect, CPBorderlessWindowMask);
    if (self)
    {
        self._constrainsToUsableScreen = NO;
        objj_msgSend(self, "setLevel:", CPPopUpMenuWindowLevel);
        objj_msgSend(self, "setHasShadow:", YES);
        objj_msgSend(self, "setShadowStyle:", CPMenuWindowShadowStyle);
        objj_msgSend(self, "setAcceptsMouseMovedEvents:", YES);
        var contentView = objj_msgSend(self, "contentView");
        self._menuView = objj_msgSend(objj_msgSend(_CPMenuView, "alloc"), "initWithFrame:", CGRectMakeZero());
        self._menuClipView = objj_msgSend(objj_msgSend(CPClipView, "alloc"), "initWithFrame:", CGRectMake(objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset").left, objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset").top, 0.0, 0.0));
        objj_msgSend(self._menuClipView, "setDocumentView:", self._menuView);
        objj_msgSend(contentView, "addSubview:", self._menuClipView);
        self._moreAboveView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._moreAboveView, "setImage:", objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-more-above-image"));
        objj_msgSend(self._moreAboveView, "setFrameSize:", objj_msgSend(objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-more-above-image"), "size"));
        objj_msgSend(contentView, "addSubview:", self._moreAboveView);
        self._moreBelowView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._moreBelowView, "setImage:", objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-more-below-image"));
        objj_msgSend(self._moreBelowView, "setFrameSize:", objj_msgSend(objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-more-below-image"), "size"));
        objj_msgSend(contentView, "addSubview:", self._moreBelowView);
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("setFont:"), function $_CPMenuWindow__setFont_(self, _cmd, aFont)
{
    objj_msgSend(self._menuView, "setFont:", aFont);
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $_CPMenuWindow__font(self, _cmd)
{
    return objj_msgSend(self._menuView, "font");
}
,["CPFont"]), new objj_method(sel_getUid("setBackgroundStyle:"), function $_CPMenuWindow__setBackgroundStyle_(self, _cmd, aBackgroundStyle)
{
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(objj_msgSend(self, "class"), "backgroundColorForBackgroundStyle:", aBackgroundStyle));
}
,["void","_CPMenuWindowBackgroundStyle"]), new objj_method(sel_getUid("setMenu:"), function $_CPMenuWindow__setMenu_(self, _cmd, aMenu)
{
    objj_msgSend(aMenu, "_setMenuWindow:", self);
    objj_msgSend(self._menuView, "setMenu:", aMenu);
    var menuViewSize = objj_msgSend(self._menuView, "frame").size,
        marginInset = objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset");
    objj_msgSend(self, "setFrameSize:", CGSizeMake(marginInset.left + menuViewSize.width + marginInset.right, marginInset.top + menuViewSize.height + marginInset.bottom));
    objj_msgSend(self._menuView, "scrollPoint:", CGPointMake(0.0, 0.0));
    objj_msgSend(self._menuClipView, "setFrame:", CGRectMake(marginInset.left, marginInset.top, menuViewSize.width, menuViewSize.height));
}
,["void","CPMenu"]), new objj_method(sel_getUid("setMinWidth:"), function $_CPMenuWindow__setMinWidth_(self, _cmd, aWidth)
{
    var size = objj_msgSend(self, "unconstrainedFrame").size;
    objj_msgSend(self, "setFrameSize:", CGSizeMake(MAX(size.width, aWidth), size.height));
}
,["void","float"]), new objj_method(sel_getUid("menu"), function $_CPMenuWindow__menu(self, _cmd)
{
    return objj_msgSend(self._menuView, "menu");
}
,["CPMenu"]), new objj_method(sel_getUid("_menuView"), function $_CPMenuWindow___menuView(self, _cmd)
{
    return self._menuView;
}
,["_CPMenuView"]), new objj_method(sel_getUid("orderFront:"), function $_CPMenuWindow__orderFront_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(self, "menu"), "update");
    objj_msgSend(self, "setFrame:", self._unconstrainedFrame);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuWindow").super_class }, "orderFront:", aSender);
}
,["void","id"]), new objj_method(sel_getUid("setConstraintRect:"), function $_CPMenuWindow__setConstraintRect_(self, _cmd, aRect)
{
    self._constraintRect = aRect;
    objj_msgSend(self, "setFrame:", self._unconstrainedFrame);
}
,["void","CGRect"]), new objj_method(sel_getUid("unconstrainedFrame"), function $_CPMenuWindow__unconstrainedFrame(self, _cmd)
{
    return CGRectMakeCopy(self._unconstrainedFrame);
}
,["CGRect"]), new objj_method(sel_getUid("setFrameOrigin:"), function $_CPMenuWindow__setFrameOrigin_(self, _cmd, aPoint)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuWindow").super_class }, "setFrame:", CGRectMake(aPoint.x, aPoint.y, CGRectGetWidth(self._unconstrainedFrame), CGRectGetHeight(self._unconstrainedFrame)));
}
,["void","CGPoint"]), new objj_method(sel_getUid("setFrameSize:"), function $_CPMenuWindow__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuWindow").super_class }, "setFrame:", CGRectMake(CGRectGetMinX(self._unconstrainedFrame), CGRectGetMinY(self._unconstrainedFrame), aSize.width, aSize.height));
}
,["void","CGSize"]), new objj_method(sel_getUid("setFrame:display:animate:"), function $_CPMenuWindow__setFrame_display_animate_(self, _cmd, aFrame, shouldDisplay, shouldAnimate)
{
    self._unconstrainedFrame = CGRectMakeCopy(aFrame);
    var constrainedFrame = CGRectIntersection(self._unconstrainedFrame, self._constraintRect),
        marginInset = objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset"),
        scrollIndicatorHeight = objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-scroll-indicator-height");
    constrainedFrame.origin.x = CGRectGetMinX(self._unconstrainedFrame);
    constrainedFrame.size.width = CGRectGetWidth(self._unconstrainedFrame);
    if (CGRectGetWidth(constrainedFrame) > CGRectGetWidth(self._constraintRect))
        constrainedFrame.size.width = CGRectGetWidth(self._constraintRect);
    if (CGRectGetMaxX(constrainedFrame) > CGRectGetMaxX(self._constraintRect))
        constrainedFrame.origin.x -= CGRectGetMaxX(constrainedFrame) - CGRectGetMaxX(self._constraintRect);
    if (CGRectGetMinX(constrainedFrame) < CGRectGetMinX(self._constraintRect))
        constrainedFrame.origin.x = CGRectGetMinX(self._constraintRect);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuWindow").super_class }, "setFrame:display:animate:", constrainedFrame, shouldDisplay, shouldAnimate);
    var menuViewOrigin = CGPointMake(CGRectGetMinX(aFrame) + marginInset.left, CGRectGetMinY(aFrame) + marginInset.top),
        moreAbove = menuViewOrigin.y < CGRectGetMinY(constrainedFrame) + marginInset.top,
        moreBelow = menuViewOrigin.y + CGRectGetHeight(objj_msgSend(self._menuView, "frame")) > CGRectGetMaxY(constrainedFrame) - marginInset.bottom,
        topMargin = marginInset.top,
        bottomMargin = marginInset.bottom,
        contentView = objj_msgSend(self, "contentView"),
        bounds = objj_msgSend(contentView, "bounds");
    if (moreAbove)
    {
        topMargin += scrollIndicatorHeight;
        var frame = objj_msgSend(self._moreAboveView, "frame");
        objj_msgSend(self._moreAboveView, "setFrameOrigin:", CGPointMake((CGRectGetWidth(bounds) - CGRectGetWidth(frame)) / 2.0, (marginInset.top + scrollIndicatorHeight - CGRectGetHeight(frame)) / 2.0));
    }
    objj_msgSend(self._moreAboveView, "setHidden:", !moreAbove);
    if (moreBelow)
    {
        bottomMargin += scrollIndicatorHeight;
        objj_msgSend(self._moreBelowView, "setFrameOrigin:", CGPointMake((CGRectGetWidth(bounds) - CGRectGetWidth(objj_msgSend(self._moreBelowView, "frame"))) / 2.0, CGRectGetHeight(bounds) - scrollIndicatorHeight - marginInset.bottom));
    }
    objj_msgSend(self._moreBelowView, "setHidden:", !moreBelow);
    var clipFrame = CGRectMakeZero();
    clipFrame.origin.x = marginInset.left;
    clipFrame.origin.y = topMargin;
    clipFrame.size.width = CGRectGetWidth(constrainedFrame) - marginInset.left - marginInset.right;
    clipFrame.size.height = CGRectGetHeight(constrainedFrame) - topMargin - bottomMargin;
    objj_msgSend(self._menuClipView, "setFrame:", clipFrame);
    objj_msgSend(self._menuView, "setFrameSize:", CGSizeMake(CGRectGetWidth(clipFrame), CGRectGetHeight(objj_msgSend(self._menuView, "frame"))));
    objj_msgSend(self._menuView, "scrollPoint:", CGPointMake(0.0, objj_msgSend(self, "convertBaseToGlobal:", clipFrame.origin).y - menuViewOrigin.y));
}
,["void","CGRect","BOOL","BOOL"]), new objj_method(sel_getUid("hasMinimumNumberOfVisibleItems"), function $_CPMenuWindow__hasMinimumNumberOfVisibleItems(self, _cmd)
{
    var visibleRect = objj_msgSend(self._menuView, "visibleRect");
    if (CGRectIsEmpty(visibleRect))
        return NO;
    var numberOfUnhiddenItems = objj_msgSend(self._menuView, "numberOfUnhiddenItems"),
        minimumNumberOfVisibleItems = MIN(numberOfUnhiddenItems, 3),
        count = 0,
        index = objj_msgSend(self._menuView, "itemIndexAtPoint:", objj_msgSend(self._menuView, "convertPoint:fromView:", objj_msgSend(self._menuClipView, "frame").origin, nil));
    for (; index < numberOfUnhiddenItems && count < minimumNumberOfVisibleItems; ++index)
    {
        var itemRect = objj_msgSend(self._menuView, "rectForUnhiddenItemAtIndex:", index),
            visibleItemRect = CGRectIntersection(visibleRect, itemRect);
        if (CGRectIsEmpty(visibleItemRect))
            break;
        if (CGRectEqualToRect(visibleItemRect, itemRect))
            ++count;
    }
    return count >= minimumNumberOfVisibleItems;
}
,["BOOL"]), new objj_method(sel_getUid("canScrollUp"), function $_CPMenuWindow__canScrollUp(self, _cmd)
{
    return !objj_msgSend(self._moreAboveView, "isHidden");
}
,["BOOL"]), new objj_method(sel_getUid("canScrollDown"), function $_CPMenuWindow__canScrollDown(self, _cmd)
{
    return !objj_msgSend(self._moreBelowView, "isHidden");
}
,["BOOL"]), new objj_method(sel_getUid("canScroll"), function $_CPMenuWindow__canScroll(self, _cmd)
{
    return objj_msgSend(self, "canScrollUp") || objj_msgSend(self, "canScrollDown");
}
,["BOOL"]), new objj_method(sel_getUid("scrollByDelta:"), function $_CPMenuWindow__scrollByDelta_(self, _cmd, theDelta)
{
    if (theDelta === 0.0)
        return;
    if (theDelta > 0.0 && !objj_msgSend(self, "canScrollDown"))
        return;
    if (theDelta < 0.0 && !objj_msgSend(self, "canScrollUp"))
        return;
    self._unconstrainedFrame.origin.y -= theDelta;
    objj_msgSend(self, "setFrame:", self._unconstrainedFrame);
}
,["void","float"]), new objj_method(sel_getUid("scrollUp"), function $_CPMenuWindow__scrollUp(self, _cmd)
{
    objj_msgSend(self, "scrollByDelta:", -10.0);
}
,["void"]), new objj_method(sel_getUid("scrollDown"), function $_CPMenuWindow__scrollDown(self, _cmd)
{
    objj_msgSend(self, "scrollByDelta:", 10.0);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("menuWindowWithMenu:font:"), function $_CPMenuWindow__menuWindowWithMenu_font_(self, _cmd, aMenu, aFont)
{
    var menuWindow = nil;
    if (_CPMenuWindowPool.length)
    {
        menuWindow = _CPMenuWindowPool.pop();
        objj_msgSend(menuWindow, "setFrameOrigin:", CGPointMakeZero());
    }
    else
        menuWindow = objj_msgSend(objj_msgSend(_CPMenuWindow, "alloc"), "init");
    objj_msgSend(menuWindow, "setFont:", aFont);
    objj_msgSend(menuWindow, "setMenu:", aMenu);
    objj_msgSend(menuWindow, "setMinWidth:", objj_msgSend(aMenu, "minimumWidth"));
    return menuWindow;
}
,["id","CPMenu","CPFont"]), new objj_method(sel_getUid("poolMenuWindow:"), function $_CPMenuWindow__poolMenuWindow_(self, _cmd, aMenuWindow)
{
    if (!aMenuWindow || _CPMenuWindowPool.length >= _CPMenuWindowPoolCapacity || objj_msgSend(_CPMenuWindowPool, "containsObject:", aMenuWindow))
        return;
    _CPMenuWindowPool.push(aMenuWindow);
}
,["void","_CPMenuWindow"]), new objj_method(sel_getUid("_standardLeftMargin"), function $_CPMenuWindow___standardLeftMargin(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-window-margin-inset", _CPMenuView).left;
}
,["float"]), new objj_method(sel_getUid("backgroundColorForBackgroundStyle:"), function $_CPMenuWindow__backgroundColorForBackgroundStyle_(self, _cmd, aBackgroundStyle)
{
    var color = _CPMenuWindowBackgroundColors[aBackgroundStyle];
    if (!color)
    {
        var bundle = objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(self, "class"));
        if (aBackgroundStyle == _CPMenuWindowPopUpBackgroundStyle)
            color = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-window-pop-up-background-style-color", _CPMenuView);
        else if (aBackgroundStyle == _CPMenuWindowMenuBarBackgroundStyle)
            color = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-window-menu-bar-background-style-color", _CPMenuView);
        _CPMenuWindowBackgroundColors[aBackgroundStyle] = color;
    }
    return color;
}
,["CPColor","_CPMenuWindowBackgroundStyle"])]);
}{
var the_class = objj_getClass("_CPMenuWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"_CPMenuWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("globalFrame"), function $_CPMenuWindow__globalFrame(self, _cmd)
{
    return objj_msgSend(self, "frame");
}
,["CGRect"]), new objj_method(sel_getUid("isMenuBar"), function $_CPMenuWindow__isMenuBar(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("scrollingStateForPoint:"), function $_CPMenuWindow__scrollingStateForPoint_(self, _cmd, aGlobalLocation)
{
    var frame = objj_msgSend(self, "frame");
    if (!CGRectContainsPoint(frame, aGlobalLocation) || !objj_msgSend(self, "canScroll"))
        return _CPMenuManagerScrollingStateNone;
    if (aGlobalLocation.y < CGRectGetMinY(frame) + objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset").top + objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-scroll-indicator-height") && !objj_msgSend(self._moreAboveView, "isHidden"))
        return _CPMenuManagerScrollingStateUp;
    if (aGlobalLocation.y > CGRectGetMaxY(frame) - objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset").bottom - objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-scroll-indicator-height") && !objj_msgSend(self._moreBelowView, "isHidden"))
        return _CPMenuManagerScrollingStateDown;
    return _CPMenuManagerScrollingStateNone;
}
,["_CPManagerScrollingState","CGPoint"]), new objj_method(sel_getUid("deltaYForItemAtIndex:"), function $_CPMenuWindow__deltaYForItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._menuView, "valueForThemeAttribute:", "menu-window-margin-inset").top + CGRectGetMinY(objj_msgSend(self._menuView, "rectForItemAtIndex:", anIndex));
}
,["float","int"]), new objj_method(sel_getUid("rectForItemAtIndex:"), function $_CPMenuWindow__rectForItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._menuView, "convertRect:toView:", objj_msgSend(self._menuView, "rectForItemAtIndex:", anIndex), nil);
}
,["CGPoint","int"]), new objj_method(sel_getUid("itemIndexAtPoint:"), function $_CPMenuWindow__itemIndexAtPoint_(self, _cmd, aPoint)
{
    if (!CGRectContainsPoint(objj_msgSend(self._menuClipView, "bounds"), objj_msgSend(self._menuClipView, "convertPoint:fromView:", aPoint, nil)))
        return NO;
    return objj_msgSend(self._menuView, "itemIndexAtPoint:", objj_msgSend(self._menuView, "convertPoint:fromView:", aPoint, nil));
}
,["int","CGPoint"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPMenuView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menuItemViews"), new objj_ivar("_visibleMenuItemInfos"), new objj_ivar("_font")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("font"), function $_CPMenuView__font(self, _cmd)
{
    return self._font;
}
,["CPFont"]), new objj_method(sel_getUid("setFont:"), function $_CPMenuView__setFont_(self, _cmd, newValue)
{
    self._font = newValue;
}
,["void","CPFont"]), new objj_method(sel_getUid("numberOfUnhiddenItems"), function $_CPMenuView__numberOfUnhiddenItems(self, _cmd)
{
    return self._visibleMenuItemInfos.length;
}
,["unsigned"]), new objj_method(sel_getUid("rectForUnhiddenItemAtIndex:"), function $_CPMenuView__rectForUnhiddenItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self, "rectForItemAtIndex:", self._visibleMenuItemInfos[anIndex].index);
}
,["CGRect","int"]), new objj_method(sel_getUid("rectForItemAtIndex:"), function $_CPMenuView__rectForItemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._menuItemViews[anIndex === CPNotFound ? 0 : anIndex], "frame");
}
,["CGRect","int"]), new objj_method(sel_getUid("itemIndexAtPoint:"), function $_CPMenuView__itemIndexAtPoint_(self, _cmd, aPoint)
{
    var x = aPoint.x,
        bounds = objj_msgSend(self, "bounds");
    if (x < CGRectGetMinX(bounds) || x > CGRectGetMaxX(bounds))
        return CPNotFound;
    var y = aPoint.y,
        low = 0,
        high = self._visibleMenuItemInfos.length - 1;
    while (low <= high)
    {
        var middle = FLOOR(low + (high - low) / 2),
            info = self._visibleMenuItemInfos[middle],
            frame = objj_msgSend(info.view, "frame");
        if (y < CGRectGetMinY(frame))
            high = middle - 1;
        else if (y > CGRectGetMaxY(frame))
            low = middle + 1;
        else
            return info.index;
    }
    return CPNotFound;
}
,["int","CGPoint"]), new objj_method(sel_getUid("tile"), function $_CPMenuView__tile(self, _cmd)
{
    objj_msgSend(self._menuItemViews, "makeObjectsPerformSelector:", sel_getUid("removeFromSuperview"));
    self._menuItemViews = [];
    self._visibleMenuItemInfos = [];
    var menu = objj_msgSend(self, "menu");
    if (!menu)
        return;
    var items = objj_msgSend(menu, "itemArray"),
        index = 0,
        count = objj_msgSend(items, "count"),
        maxWidth = 0,
        y = 0,
        showsStateColumn = objj_msgSend(menu, "showsStateColumn");
    for (; index < count; ++index)
    {
        var item = items[index],
            view = objj_msgSend(item, "_menuItemView");
        self._menuItemViews.push(view);
        if (objj_msgSend(item, "isHidden"))
            continue;
        self._visibleMenuItemInfos.push({view: view, index: index});
        objj_msgSend(view, "setFont:", self._font);
        objj_msgSend(view, "setShowsStateColumn:", showsStateColumn);
        objj_msgSend(view, "synchronizeWithMenuItem");
        objj_msgSend(view, "setFrameOrigin:", CGPointMake(0.0, y));
        objj_msgSend(self, "addSubview:", view);
        var size = objj_msgSend(view, "minSize"),
            width = size.width;
        if (maxWidth < width)
            maxWidth = width;
        y += size.height;
    }
    for (index = 0; index < count; ++index)
    {
        var view = self._menuItemViews[index];
        objj_msgSend(view, "setFrameSize:", CGSizeMake(maxWidth, CGRectGetHeight(objj_msgSend(view, "frame"))));
    }
    objj_msgSend(self, "setAutoresizesSubviews:", NO);
    objj_msgSend(self, "setFrameSize:", CGSizeMake(maxWidth, y));
    objj_msgSend(self, "setAutoresizesSubviews:", YES);
}
,["void"]), new objj_method(sel_getUid("setMenu:"), function $_CPMenuView__setMenu_(self, _cmd, aMenu)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuView").super_class }, "setMenu:", aMenu);
    objj_msgSend(self, "tile");
}
,["void","CPMenu"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPMenuView__defaultThemeClass(self, _cmd)
{
    return "menu-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPMenuView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "menu-window-more-above-image", objj_msgSend(CPNull, "null"), "menu-window-more-below-image", objj_msgSend(CPNull, "null"), "menu-window-pop-up-background-style-color", objj_msgSend(CPNull, "null"), "menu-window-menu-bar-background-style-color", CGInsetMake(5.0, 1.0, 1.0, 5.0), "menu-window-margin-inset", 16.0, "menu-window-scroll-indicator-height", objj_msgSend(CPNull, "null"), "menu-bar-window-background-color", objj_msgSend(CPNull, "null"), "menu-bar-window-background-selected-color", objj_msgSend(CPNull, "null"), "menu-bar-window-font", 30.0, "menu-bar-window-height", 10.0, "menu-bar-window-margin", 10.0, "menu-bar-window-left-margin", 10.0, "menu-bar-window-right-margin", objj_msgSend(CPNull, "null"), "menu-bar-text-color", objj_msgSend(CPNull, "null"), "menu-bar-title-color", objj_msgSend(CPNull, "null"), "menu-bar-text-shadow-color", objj_msgSend(CPNull, "null"), "menu-bar-title-shadow-color", objj_msgSend(CPNull, "null"), "menu-bar-highlight-color", objj_msgSend(CPNull, "null"), "menu-bar-highlight-text-color", objj_msgSend(CPNull, "null"), "menu-bar-highlight-text-shadow-color", 28.0, "menu-bar-height", objj_msgSend(CPNull, "null"), "menu-bar-icon-image", 1.0, "menu-bar-icon-image-alpha-value", objj_msgSend(CPNull, "null"), "menu-general-icon-new", objj_msgSend(CPNull, "null"), "menu-general-icon-save", objj_msgSend(CPNull, "null"), "menu-general-icon-open");
}
,["id"])]);
}p;8;CPMenu.jt;40470;@STATIC;1.0;I;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPString.ji;19;CPKeyValueBinding.ji;12;CPMenuItem.ji;18;_CPMenuBarWindow.ji;15;_CPMenuWindow.jt;40247;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPKeyValueBinding.j", YES);objj_executeFile("CPMenuItem.j", YES);CPMenuDidAddItemNotification = "CPMenuDidAddItemNotification";
CPMenuDidChangeItemNotification = "CPMenuDidChangeItemNotification";
CPMenuDidRemoveItemNotification = "CPMenuDidRemoveItemNotification";
CPMenuDidEndTrackingNotification = "CPMenuDidEndTrackingNotification";
var _CPMenuBarVisible = NO,
    _CPMenuBarTitle = "",
    _CPMenuBarAttributes = nil,
    _CPMenuBarSharedWindow = nil;
{var the_class = objj_allocateClassPair(CPObject, "CPMenu"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_supermenu"), new objj_ivar("_title"), new objj_ivar("_name"), new objj_ivar("_font"), new objj_ivar("_minimumWidth"), new objj_ivar("_items"), new objj_ivar("_autoenablesItems"), new objj_ivar("_showsStateColumn"), new objj_ivar("_delegate"), new objj_ivar("_highlightedIndex"), new objj_ivar("_menuWindow"), new objj_ivar("_lastCloseEvent")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("menuBarHeight"), function $CPMenu__menuBarHeight(self, _cmd)
{
    if (self === objj_msgSend(CPApp, "mainMenu"))
        return objj_msgSend(CPMenu, "menuBarHeight");
    return 0.0;
}
,["float"]), new objj_method(sel_getUid("initWithTitle:"), function $CPMenu__initWithTitle_(self, _cmd, aTitle)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMenu").super_class }, "init");
    if (self)
    {
        self._title = aTitle;
        self._items = [];
        self._autoenablesItems = YES;
        self._showsStateColumn = YES;
        objj_msgSend(self, "setMinimumWidth:", 0);
    }
    return self;
}
,["id","CPString"]), new objj_method(sel_getUid("init"), function $CPMenu__init(self, _cmd)
{
    return objj_msgSend(self, "initWithTitle:", "");
}
,["id"]), new objj_method(sel_getUid("insertItem:atIndex:"), function $CPMenu__insertItem_atIndex_(self, _cmd, aMenuItem, anIndex)
{
    objj_msgSend(self, "insertObject:inItemsAtIndex:", aMenuItem, anIndex);
}
,["void","CPMenuItem","unsigned"]), new objj_method(sel_getUid("insertItemWithTitle:action:keyEquivalent:atIndex:"), function $CPMenu__insertItemWithTitle_action_keyEquivalent_atIndex_(self, _cmd, aTitle, anAction, aKeyEquivalent, anIndex)
{
    var item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", aTitle, anAction, aKeyEquivalent);
    objj_msgSend(self, "insertItem:atIndex:", item, anIndex);
    return item;
}
,["CPMenuItem","CPString","SEL","CPString","unsigned"]), new objj_method(sel_getUid("addItem:"), function $CPMenu__addItem_(self, _cmd, aMenuItem)
{
    objj_msgSend(self, "insertItem:atIndex:", aMenuItem, objj_msgSend(self._items, "count"));
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("addItemWithTitle:action:keyEquivalent:"), function $CPMenu__addItemWithTitle_action_keyEquivalent_(self, _cmd, aTitle, anAction, aKeyEquivalent)
{
    return objj_msgSend(self, "insertItemWithTitle:action:keyEquivalent:atIndex:", aTitle, anAction, aKeyEquivalent, objj_msgSend(self._items, "count"));
}
,["CPMenuItem","CPString","SEL","CPString"]), new objj_method(sel_getUid("removeItem:"), function $CPMenu__removeItem_(self, _cmd, aMenuItem)
{
    objj_msgSend(self, "removeItemAtIndex:", objj_msgSend(self._items, "indexOfObjectIdenticalTo:", aMenuItem));
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("removeItemAtIndex:"), function $CPMenu__removeItemAtIndex_(self, _cmd, anIndex)
{
    objj_msgSend(self, "removeObjectFromItemsAtIndex:", anIndex);
}
,["void","unsigned"]), new objj_method(sel_getUid("removeAllItems"), function $CPMenu__removeAllItems(self, _cmd)
{
    var count = objj_msgSend(self._items, "count");
    while (count--)
        objj_msgSend(self._items[count], "setMenu:", nil);
    objj_msgSend(self, "_highlightItemAtIndex:", CPNotFound);
    objj_msgSend(self, "willChangeValueForKey:", "items");
    self._items = objj_msgSend(CPMutableArray, "array");
    objj_msgSend(self, "didChangeValueForKey:", "items");
}
,["void"]), new objj_method(sel_getUid("itemChanged:"), function $CPMenu__itemChanged_(self, _cmd, aMenuItem)
{
    if (objj_msgSend(aMenuItem, "menu") !== self || !self._items)
        return;
    objj_msgSend(aMenuItem, "setValue:forKey:", objj_msgSend(aMenuItem, "valueForKey:", "changeCount") + 1, "changeCount");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPMenuDidChangeItemNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(self._items, "indexOfObjectIdenticalTo:", aMenuItem), "CPMenuItemIndex"));
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("itemWithTag:"), function $CPMenu__itemWithTag_(self, _cmd, aTag)
{
    var index = objj_msgSend(self, "indexOfItemWithTag:", aTag);
    if (index == CPNotFound)
        return nil;
    return self._items[index];
}
,["CPMenuItem","int"]), new objj_method(sel_getUid("itemWithTitle:"), function $CPMenu__itemWithTitle_(self, _cmd, aTitle)
{
    var index = objj_msgSend(self, "indexOfItemWithTitle:", aTitle);
    if (index == CPNotFound)
        return nil;
    return self._items[index];
}
,["CPMenuItem","CPString"]), new objj_method(sel_getUid("itemAtIndex:"), function $CPMenu__itemAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._items, "objectAtIndex:", anIndex);
}
,["CPMenuItem","int"]), new objj_method(sel_getUid("numberOfItems"), function $CPMenu__numberOfItems(self, _cmd)
{
    return objj_msgSend(self._items, "count");
}
,["unsigned"]), new objj_method(sel_getUid("itemArray"), function $CPMenu__itemArray(self, _cmd)
{
    return self._items;
}
,["CPArray"]), new objj_method(sel_getUid("indexOfItem:"), function $CPMenu__indexOfItem_(self, _cmd, aMenuItem)
{
    if (objj_msgSend(aMenuItem, "menu") !== self)
        return CPNotFound;
    return objj_msgSend(self._items, "indexOfObjectIdenticalTo:", aMenuItem);
}
,["int","CPMenuItem"]), new objj_method(sel_getUid("indexOfItemWithTitle:"), function $CPMenu__indexOfItemWithTitle_(self, _cmd, aTitle)
{
    var index = 0,
        count = self._items.length;
    for (; index < count; ++index)
        if (objj_msgSend(self._items[index], "title") === aTitle)
            return index;
    return CPNotFound;
}
,["int","CPString"]), new objj_method(sel_getUid("indexOfItemWithTag:"), function $CPMenu__indexOfItemWithTag_(self, _cmd, aTag)
{
    var index = 0,
        count = self._items.length;
    for (; index < count; ++index)
        if (objj_msgSend(self._items[index], "tag") == aTag)
            return index;
    return CPNotFound;
}
,["int","int"]), new objj_method(sel_getUid("indexOfItemWithTarget:andAction:"), function $CPMenu__indexOfItemWithTarget_andAction_(self, _cmd, aTarget, anAction)
{
    var index = 0,
        count = self._items.length;
    for (; index < count; ++index)
    {
        var item = self._items[index];
        if (objj_msgSend(item, "target") == aTarget && (!anAction || objj_msgSend(item, "action") == anAction))
            return index;
    }
    return CPNotFound;
}
,["int","id","SEL"]), new objj_method(sel_getUid("indexOfItemWithRepresentedObject:"), function $CPMenu__indexOfItemWithRepresentedObject_(self, _cmd, anObject)
{
    var index = 0,
        count = self._items.length;
    for (; index < count; ++index)
        if (objj_msgSend(objj_msgSend(self._items[index], "representedObject"), "isEqual:", anObject))
            return index;
    return CPNotFound;
}
,["int","id"]), new objj_method(sel_getUid("indexOfItemWithSubmenu:"), function $CPMenu__indexOfItemWithSubmenu_(self, _cmd, aMenu)
{
    var index = 0,
        count = self._items.length;
    for (; index < count; ++index)
        if (objj_msgSend(self._items[index], "submenu") == aMenu)
            return index;
    return CPNotFound;
}
,["int","CPMenu"]), new objj_method(sel_getUid("setSubmenu:forItem:"), function $CPMenu__setSubmenu_forItem_(self, _cmd, aMenu, aMenuItem)
{
    objj_msgSend(aMenuItem, "setTarget:", aMenuItem);
    objj_msgSend(aMenuItem, "setAction:", sel_getUid("submenuAction:"));
    objj_msgSend(aMenuItem, "setSubmenu:", aMenu);
}
,["void","CPMenu","CPMenuItem"]), new objj_method(sel_getUid("submenuAction:"), function $CPMenu__submenuAction_(self, _cmd, aSender)
{
}
,["void","id"]), new objj_method(sel_getUid("supermenu"), function $CPMenu__supermenu(self, _cmd)
{
    return self._supermenu;
}
,["CPMenu"]), new objj_method(sel_getUid("setSupermenu:"), function $CPMenu__setSupermenu_(self, _cmd, aMenu)
{
    self._supermenu = aMenu;
}
,["void","CPMenu"]), new objj_method(sel_getUid("isTornOff"), function $CPMenu__isTornOff(self, _cmd)
{
    return !self._supermenu || self == objj_msgSend(CPApp, "mainMenu");
}
,["BOOL"]), new objj_method(sel_getUid("setAutoenablesItems:"), function $CPMenu__setAutoenablesItems_(self, _cmd, aFlag)
{
    self._autoenablesItems = aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("autoenablesItems"), function $CPMenu__autoenablesItems(self, _cmd)
{
    return self._autoenablesItems;
}
,["BOOL"]), new objj_method(sel_getUid("update"), function $CPMenu__update(self, _cmd)
{
    if (!self._autoenablesItems)
        return;
    var items = objj_msgSend(self, "itemArray");
    for (var i = 0; i < objj_msgSend(items, "count"); i++)
    {
        var item = objj_msgSend(items, "objectAtIndex:", i);
        if (objj_msgSend(item, "hasSubmenu"))
            continue;
        var binder = objj_msgSend(CPBinder, "getBinding:forObject:", CPEnabledBinding, item);
        if (binder)
        {
            objj_msgSend(binder, "setValueFor:", CPEnabledBinding);
            return;
        }
        var validator = objj_msgSend(CPApp, "targetForAction:to:from:", objj_msgSend(item, "action"), objj_msgSend(item, "target"), item),
            shouldBeEnabled = YES;
        if (!validator)
        {
            if (objj_msgSend(item, "action") || objj_msgSend(item, "target"))
                shouldBeEnabled = NO;
            else
            {
                var info = objj_msgSend(CPBinder, "infoForBinding:forObject:", CPTargetBinding, item);
                if (info)
                {
                    var object = objj_msgSend(info, "objectForKey:", CPObservedObjectKey),
                        keyPath = objj_msgSend(info, "objectForKey:", CPObservedKeyPathKey),
                        options = objj_msgSend(info, "objectForKey:", CPOptionsKey),
                        target = objj_msgSend(object, "valueForKeyPath:", keyPath),
                        selector = objj_msgSend(options, "valueForKey:", CPSelectorNameBindingOption);
                    if (target && selector && !objj_msgSend(target, "respondsToSelector:", CPSelectorFromString(selector)))
                        shouldBeEnabled = NO;
                }
            }
        }
        else if (!objj_msgSend(validator, "respondsToSelector:", objj_msgSend(item, "action")))
            shouldBeEnabled = NO;
        else if (objj_msgSend(validator, "respondsToSelector:", sel_getUid("validateMenuItem:")))
            shouldBeEnabled = objj_msgSend(validator, "validateMenuItem:", item);
        else if (objj_msgSend(validator, "respondsToSelector:", sel_getUid("validateUserInterfaceItem:")))
            shouldBeEnabled = objj_msgSend(validator, "validateUserInterfaceItem:", item);
        objj_msgSend(item, "setEnabled:", shouldBeEnabled);
    }
    objj_msgSend(objj_msgSend(self._menuWindow, "_menuView"), "tile");
}
,["void"]), new objj_method(sel_getUid("setTitle:"), function $CPMenu__setTitle_(self, _cmd, aTitle)
{
    self._title = aTitle;
}
,["void","CPString"]), new objj_method(sel_getUid("title"), function $CPMenu__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setMinimumWidth:"), function $CPMenu__setMinimumWidth_(self, _cmd, aMinimumWidth)
{
    self._minimumWidth = aMinimumWidth;
}
,["void","float"]), new objj_method(sel_getUid("minimumWidth"), function $CPMenu__minimumWidth(self, _cmd)
{
    return self._minimumWidth;
}
,["float"]), new objj_method(sel_getUid("_performActionOfHighlightedItemChain"), function $CPMenu___performActionOfHighlightedItemChain(self, _cmd)
{
    var highlightedItem = objj_msgSend(self, "highlightedItem");
    while (objj_msgSend(highlightedItem, "submenu") && objj_msgSend(highlightedItem, "action") === sel_getUid("submenuAction:"))
        highlightedItem = objj_msgSend(objj_msgSend(highlightedItem, "submenu"), "highlightedItem");
    if (highlightedItem && objj_msgSend(highlightedItem, "isEnabled"))
    {
        var binding = objj_msgSend(CPBinder, "getBinding:forObject:", CPTargetBinding, highlightedItem);
        objj_msgSend(binding, "invokeAction");
        objj_msgSend(CPApp, "sendAction:to:from:", objj_msgSend(highlightedItem, "action"), objj_msgSend(highlightedItem, "target"), highlightedItem);
    }
}
,["void"]), new objj_method(sel_getUid("popUpMenuPositioningItem:atLocation:inView:callback:"), function $CPMenu__popUpMenuPositioningItem_atLocation_inView_callback_(self, _cmd, anItem, aLocation, aView, aCallback)
{
    objj_msgSend(self, "_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:", anItem, aLocation, aLocation.y, aLocation.y, aView, aCallback);
}
,["void","CPMenuItem","CGPoint","CPView","Function"]), new objj_method(sel_getUid("_popUpMenuPositioningItem:atLocation:topY:bottomY:inView:callback:"), function $CPMenu___popUpMenuPositioningItem_atLocation_topY_bottomY_inView_callback_(self, _cmd, anItem, aLocation, aTopY, aBottomY, aView, aCallback)
{
    var itemIndex = 0;
    if (anItem)
    {
        itemIndex = objj_msgSend(self, "indexOfItem:", anItem);
        if (itemIndex === CPNotFound)
            throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, menu item " + anItem + " is not present in menu " + self;
    }
    var theWindow = objj_msgSend(aView, "window");
    if (aView && !theWindow)
        throw "In call to popUpMenuPositioningItem:atLocation:inView:callback:, view is not in any window.";
    objj_msgSend(self, "_menuWillOpen");
    if (aView)
        aLocation = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(aView, "convertPoint:toView:", aLocation, nil));
    var menuWindow = objj_msgSend(_CPMenuWindow, "menuWindowWithMenu:font:", self, objj_msgSend(self, "font"));
    objj_msgSend(menuWindow, "setBackgroundStyle:", _CPMenuWindowPopUpBackgroundStyle);
    if (anItem)
        aLocation.y -= objj_msgSend(menuWindow, "deltaYForItemAtIndex:", itemIndex);
    var constraintRect = objj_msgSend(CPMenu, "_constraintRectForView:", aView);
    objj_msgSend(menuWindow, "setFrameOrigin:", aLocation);
    objj_msgSend(menuWindow, "setConstraintRect:", constraintRect);
    if (!objj_msgSend(menuWindow, "hasMinimumNumberOfVisibleItems"))
    {
        var unconstrainedFrame = objj_msgSend(menuWindow, "unconstrainedFrame"),
            unconstrainedY = CGRectGetMinY(unconstrainedFrame);
        if (unconstrainedY >= CGRectGetMaxY(constraintRect) || objj_msgSend(menuWindow, "canScrollDown"))
        {
            if (aView)
                aTopY = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(aView, "convertPoint:toView:", CGPointMake(0.0, aTopY), nil)).y;
            unconstrainedFrame.origin.y = MIN(CGRectGetMaxY(constraintRect), aTopY) - CGRectGetHeight(unconstrainedFrame);
        }
        else if (unconstrainedY < CGRectGetMinY(constraintRect) || objj_msgSend(menuWindow, "canScrollUp"))
        {
            if (aView)
                aBottomY = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(aView, "convertPoint:toView:", CGPointMake(0.0, aBottomY), nil)).y;
            unconstrainedFrame.origin.y = MAX(CGRectGetMinY(constraintRect), aBottomY);
        }
        objj_msgSend(menuWindow, "setFrameOrigin:", (CGRectIntersection(unconstrainedFrame, constraintRect)).origin);
    }
    if (objj_msgSend(CPPlatform, "isBrowser"))
        objj_msgSend(menuWindow, "setPlatformWindow:", objj_msgSend(objj_msgSend(aView, "window"), "platformWindow"));
    objj_msgSend(menuWindow, "orderFront:", self);
    objj_msgSend(objj_msgSend(_CPMenuManager, "sharedMenuManager"), "beginTracking:menuContainer:constraintRect:callback:", objj_msgSend(CPApp, "currentEvent"), menuWindow, constraintRect, objj_msgSend(CPMenu, "trackingCallbackWithCallback:", aCallback));
}
,["void","CPMenuItem","CGPoint","float","float","CPView","Function"]), new objj_method(sel_getUid("setShowsStateColumn:"), function $CPMenu__setShowsStateColumn_(self, _cmd, shouldShowStateColumn)
{
    self._showsStateColumn = shouldShowStateColumn;
}
,["void","BOOL"]), new objj_method(sel_getUid("showsStateColumn"), function $CPMenu__showsStateColumn(self, _cmd)
{
    return self._showsStateColumn;
}
,["BOOL"]), new objj_method(sel_getUid("highlightedItem"), function $CPMenu__highlightedItem(self, _cmd)
{
    if (self._highlightedIndex < 0)
        return nil;
    var highlightedItem = self._items[self._highlightedIndex];
    if (objj_msgSend(highlightedItem, "isSeparatorItem"))
        return nil;
    return highlightedItem;
}
,["CPMenuItem"]), new objj_method(sel_getUid("setDelegate:"), function $CPMenu__setDelegate_(self, _cmd, aDelegate)
{
    self._delegate = aDelegate;
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPMenu__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("_menuWillOpen"), function $CPMenu___menuWillOpen(self, _cmd)
{
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("menuWillOpen:")))
        objj_msgSend(delegate, "menuWillOpen:", self);
}
,["void"]), new objj_method(sel_getUid("_menuDidClose"), function $CPMenu___menuDidClose(self, _cmd)
{
    self._lastCloseEvent = objj_msgSend(CPApp, "currentEvent");
    var delegate = objj_msgSend(self, "delegate");
    if (objj_msgSend(delegate, "respondsToSelector:", sel_getUid("menuDidClose:")))
        objj_msgSend(delegate, "menuDidClose:", self);
}
,["void"]), new objj_method(sel_getUid("cancelTracking"), function $CPMenu__cancelTracking(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "performSelector:target:argument:order:modes:", sel_getUid("_fireCancelTrackingEvent"), self, nil, 0, [CPDefaultRunLoopMode]);
}
,["void"]), new objj_method(sel_getUid("_fireCancelTrackingEvent"), function $CPMenu___fireCancelTrackingEvent(self, _cmd)
{
    objj_msgSend(CPApp, "sendEvent:", objj_msgSend(CPEvent, "otherEventWithType:location:modifierFlags:timestamp:windowNumber:context:subtype:data1:data2:", CPAppKitDefined, CGPointMakeZero(), 0, 0, 0, 0, 0, 0, 0));
    objj_msgSend(_CPDisplayServer, "run");
}
,["void"]), new objj_method(sel_getUid("_setMenuWindow:"), function $CPMenu___setMenuWindow_(self, _cmd, aMenuWindow)
{
    self._menuWindow = aMenuWindow;
}
,["void","_CPMenuWindow"]), new objj_method(sel_getUid("setFont:"), function $CPMenu__setFont_(self, _cmd, aFont)
{
    self._font = aFont;
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $CPMenu__font(self, _cmd)
{
    return self._font;
}
,["CPFont"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $CPMenu__performKeyEquivalent_(self, _cmd, anEvent)
{
    if (self._autoenablesItems)
        objj_msgSend(self, "update");
    var index = 0,
        count = self._items.length,
        characters = objj_msgSend(anEvent, "charactersIgnoringModifiers"),
        modifierFlags = objj_msgSend(anEvent, "modifierFlags");
    for (; index < count; ++index)
    {
        var item = self._items[index];
        if (objj_msgSend(anEvent, "_triggersKeyEquivalent:withModifierMask:", objj_msgSend(item, "keyEquivalent"), objj_msgSend(item, "keyEquivalentModifierMask")))
        {
            if (objj_msgSend(item, "isEnabled"))
                objj_msgSend(self, "performActionForItemAtIndex:", index);
            else
            {
            }
            return YES;
        }
        if (objj_msgSend(objj_msgSend(item, "submenu"), "performKeyEquivalent:", anEvent))
            return YES;
    }
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("performActionForItemAtIndex:"), function $CPMenu__performActionForItemAtIndex_(self, _cmd, anIndex)
{
    var item = self._items[anIndex];
    objj_msgSend(CPApp, "sendAction:to:from:", objj_msgSend(item, "action"), objj_msgSend(item, "target"), item);
}
,["void","unsigned"]), new objj_method(sel_getUid("_highlightItemAtIndex:"), function $CPMenu___highlightItemAtIndex_(self, _cmd, anIndex)
{
    if (self._highlightedIndex === anIndex)
        return;
    if (self._highlightedIndex !== CPNotFound)
        objj_msgSend(objj_msgSend(self._items[self._highlightedIndex], "_menuItemView"), "highlight:", NO);
    self._highlightedIndex = anIndex;
    if (self._highlightedIndex !== CPNotFound)
        objj_msgSend(objj_msgSend(self._items[self._highlightedIndex], "_menuItemView"), "highlight:", YES);
    if (self._highlightedIndex !== CPNotFound && self._menuWindow)
        objj_msgSend(self._menuWindow._menuView, "scrollRectToVisible:", objj_msgSend(objj_msgSend(self._items[self._highlightedIndex], "_menuItemView"), "frame"));
}
,["void","int"]), new objj_method(sel_getUid("_setMenuName:"), function $CPMenu___setMenuName_(self, _cmd, aName)
{
    if (self._name === aName)
        return;
    self._name = aName;
    if (self._name === "CPMainMenu")
        objj_msgSend(CPApp, "setMainMenu:", self);
}
,["void","CPString"]), new objj_method(sel_getUid("_menuName"), function $CPMenu___menuName(self, _cmd)
{
    return self._name;
}
,["CPString"]), new objj_method(sel_getUid("awakeFromCib"), function $CPMenu__awakeFromCib(self, _cmd)
{
    if (self._name === "_CPMainMenu")
    {
        objj_msgSend(self, "_setMenuName:", "CPMainMenu");
        objj_msgSend(CPMenu, "setMenuBarVisible:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("_menuWithName:"), function $CPMenu___menuWithName_(self, _cmd, aName)
{
    if (aName === self._name)
        return self;
    for (var i = 0, count = objj_msgSend(self._items, "count"); i < count; i++)
    {
        var menu = objj_msgSend(objj_msgSend(self._items[i], "submenu"), "_menuWithName:", aName);
        if (menu)
            return menu;
    }
    return nil;
}
,["void","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPMenu__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPMenu, "class"))
        return;
    objj_msgSend(objj_msgSend(self, "class"), "setMenuBarAttributes:", objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init"));
}
,["void"]), new objj_method(sel_getUid("menuBarVisible"), function $CPMenu__menuBarVisible(self, _cmd)
{
    return _CPMenuBarVisible;
}
,["BOOL"]), new objj_method(sel_getUid("setMenuBarVisible:"), function $CPMenu__setMenuBarVisible_(self, _cmd, menuBarShouldBeVisible)
{
    if (_CPMenuBarVisible === menuBarShouldBeVisible)
        return;
    _CPMenuBarVisible = menuBarShouldBeVisible;
    if (objj_msgSend(CPPlatform, "supportsNativeMainMenu"))
        return;
    if (menuBarShouldBeVisible)
    {
        if (!_CPMenuBarSharedWindow)
            _CPMenuBarSharedWindow = objj_msgSend(objj_msgSend(_CPMenuBarWindow, "alloc"), "init");
        objj_msgSend(_CPMenuBarSharedWindow, "setMenu:", objj_msgSend(CPApp, "mainMenu"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTitle:", _CPMenuBarTitle);
        objj_msgSend(_CPMenuBarSharedWindow, "setIconImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-icon-image", _CPMenuView));
        objj_msgSend(_CPMenuBarSharedWindow, "setIconImageAlphaValue:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-icon-image-alpha-value", _CPMenuView));
        objj_msgSend(_CPMenuBarSharedWindow, "setColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarBackgroundColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTextColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTextColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTitleColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTitleColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTextShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTextShadowColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTitleShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTitleShadowColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightTextColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightTextColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightTextShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightTextShadowColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "orderFront:", self);
    }
    else
        objj_msgSend(_CPMenuBarSharedWindow, "orderOut:", self);
    objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "resizeEvent:", nil);
}
,["void","BOOL"]), new objj_method(sel_getUid("setMenuBarTitle:"), function $CPMenu__setMenuBarTitle_(self, _cmd, aTitle)
{
    _CPMenuBarTitle = aTitle;
    objj_msgSend(_CPMenuBarSharedWindow, "setTitle:", _CPMenuBarTitle);
}
,["void","CPString"]), new objj_method(sel_getUid("menuBarTitle"), function $CPMenu__menuBarTitle(self, _cmd)
{
    return _CPMenuBarTitle;
}
,["CPString"]), new objj_method(sel_getUid("setMenuBarIconImage:"), function $CPMenu__setMenuBarIconImage_(self, _cmd, anImage)
{
    _CPMenuBarImage = anImage;
    objj_msgSend(_CPMenuBarSharedWindow, "setIconImage:", anImage);
}
,["void","CPImage"]), new objj_method(sel_getUid("menuBarIconImage"), function $CPMenu__menuBarIconImage(self, _cmd)
{
    return _CPMenuBarImage;
}
,["CPImage"]), new objj_method(sel_getUid("_setOrRemoveMenuBarAttribute:forKey:"), function $CPMenu___setOrRemoveMenuBarAttribute_forKey_(self, _cmd, aValue, aKey)
{
    if (aValue === nil)
        objj_msgSend(_CPMenuBarAttributes, "removeObjectForKey:", aKey);
    else
        objj_msgSend(_CPMenuBarAttributes, "setObject:forKey:", aValue, aKey);
}
,["void","id","id"]), new objj_method(sel_getUid("setMenuBarAttributes:"), function $CPMenu__setMenuBarAttributes_(self, _cmd, attributes)
{
    if (_CPMenuBarAttributes == attributes)
        return;
    _CPMenuBarAttributes = objj_msgSend(attributes, "copy");
    var textColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarTextColor"),
        titleColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarTitleColor"),
        textShadowColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarTextShadowColor"),
        titleShadowColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarTitleShadowColor"),
        highlightColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarHighlightColor"),
        highlightTextColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarHighlightTextColor"),
        highlightTextShadowColor = objj_msgSend(attributes, "objectForKey:", "CPMenuBarHighlightTextShadowColor");
    if (!textColor && titleColor)
        objj_msgSend(_CPMenuBarAttributes, "setObject:forKey:", titleColor, "CPMenuBarTextColor");
    else if (textColor && !titleColor)
        objj_msgSend(_CPMenuBarAttributes, "setObject:forKey:", textColor, "CPMenuBarTitleColor");
    else if (!textColor && !titleColor)
    {
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-text-color", _CPMenuView), "CPMenuBarTextColor");
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-title-color", _CPMenuView), "CPMenuBarTitleColor");
    }
    if (!textShadowColor && titleShadowColor)
        objj_msgSend(_CPMenuBarAttributes, "setObject:forKey:", titleShadowColor, "CPMenuBarTextShadowColor");
    else if (textShadowColor && !titleShadowColor)
        objj_msgSend(_CPMenuBarAttributes, "setObject:forKey:", textShadowColor, "CPMenuBarTitleShadowColor");
    else if (!textShadowColor && !titleShadowColor)
    {
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-text-shadow-color", _CPMenuView), "CPMenuBarTextShadowColor");
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-title-shadow-color", _CPMenuView), "CPMenuBarTitleShadowColor");
    }
    if (!highlightColor)
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-highlight-color", _CPMenuView), "CPMenuBarHighlightColor");
    if (!highlightTextColor)
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-highlight-text-color", _CPMenuView), "CPMenuBarHighlightTextColor");
    if (!highlightTextShadowColor)
        objj_msgSend(self, "_setOrRemoveMenuBarAttribute:forKey:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-highlight-text-shadow-color", _CPMenuView), "CPMenuBarHighlightTextShadowColor");
    if (_CPMenuBarSharedWindow)
    {
        objj_msgSend(_CPMenuBarSharedWindow, "setColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarBackgroundColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTextColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTextColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTitleColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTitleColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTextShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTextShadowColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setTitleShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarTitleShadowColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightTextColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightTextColor"));
        objj_msgSend(_CPMenuBarSharedWindow, "setHighlightTextShadowColor:", objj_msgSend(_CPMenuBarAttributes, "objectForKey:", "CPMenuBarHighlightTextShadowColor"));
    }
}
,["void","CPDictionary"]), new objj_method(sel_getUid("menuBarAttributes"), function $CPMenu__menuBarAttributes(self, _cmd)
{
    return _CPMenuBarAttributes;
}
,["CPDictionary"]), new objj_method(sel_getUid("_setMenuBarIconImageAlphaValue:"), function $CPMenu___setMenuBarIconImageAlphaValue_(self, _cmd, anAlphaValue)
{
    _CPMenuBarIconImageAlphaValue = anAlphaValue;
    objj_msgSend(_CPMenuBarSharedWindow, "setIconImageAlphaValue:", anAlphaValue);
}
,["void","float"]), new objj_method(sel_getUid("menuBarHeight"), function $CPMenu__menuBarHeight(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-height", _CPMenuView);
}
,["float"]), new objj_method(sel_getUid("_constraintRectForView:"), function $CPMenu___constraintRectForView_(self, _cmd, aView)
{
    if (objj_msgSend(CPPlatform, "isBrowser"))
        return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(aView, "window"), "platformWindow"), "contentBounds"), 5.0, 5.0);
    return CGRectInset(objj_msgSend(objj_msgSend(objj_msgSend(aView, "window"), "screen"), "visibleFrame"), 5.0, 5.0);
}
,["CGRect","CPView"]), new objj_method(sel_getUid("trackingCallbackWithCallback:"), function $CPMenu__trackingCallbackWithCallback_(self, _cmd, aCallback)
{
    return function(aMenuWindow, aMenu)
    {
        objj_msgSend(aMenuWindow, "setMenu:", nil);
        objj_msgSend(aMenuWindow, "orderOut:", self);
        objj_msgSend(_CPMenuWindow, "poolMenuWindow:", aMenuWindow);
        if (aCallback)
            aCallback(aMenu);
        objj_msgSend(aMenu, "_performActionOfHighlightedItemChain");
    };
}
,["Function","Function"]), new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:"), function $CPMenu__popUpContextMenu_withEvent_forView_(self, _cmd, aMenu, anEvent, aView)
{
    objj_msgSend(self, "popUpContextMenu:withEvent:forView:withFont:", aMenu, anEvent, aView, nil);
}
,["void","CPMenu","CPEvent","CPView"]), new objj_method(sel_getUid("popUpContextMenu:withEvent:forView:withFont:"), function $CPMenu__popUpContextMenu_withEvent_forView_withFont_(self, _cmd, aMenu, anEvent, aView, aFont)
{
    objj_msgSend(objj_msgSend(_CPMenuManager, "sharedMenuManager"), "cancelActiveMenu");
    objj_msgSend(aMenu, "_menuWillOpen");
    if (!aFont)
        aFont = objj_msgSend(CPFont, "systemFontOfSize:", objj_msgSend(CPFont, "systemFontSize"));
    var theWindow = objj_msgSend(aView, "window"),
        menuWindow = objj_msgSend(_CPMenuWindow, "menuWindowWithMenu:font:", aMenu, aFont);
    objj_msgSend(menuWindow, "setBackgroundStyle:", _CPMenuWindowPopUpBackgroundStyle);
    var constraintRect = objj_msgSend(CPMenu, "_constraintRectForView:", aView),
        aLocation = objj_msgSend(objj_msgSend(anEvent, "window"), "convertBaseToGlobal:", objj_msgSend(anEvent, "locationInWindow"));
    objj_msgSend(menuWindow, "setConstraintRect:", constraintRect);
    objj_msgSend(menuWindow, "setFrameOrigin:", aLocation);
    if (!objj_msgSend(menuWindow, "hasMinimumNumberOfVisibleItems"))
    {
        var unconstrainedFrame = objj_msgSend(menuWindow, "unconstrainedFrame"),
            unconstrainedY = CGRectGetMinY(unconstrainedFrame);
        if (unconstrainedY >= CGRectGetMaxY(constraintRect) || objj_msgSend(menuWindow, "canScrollDown"))
            unconstrainedFrame.origin.y = MIN(CGRectGetMaxY(constraintRect), aLocation.y) - CGRectGetHeight(unconstrainedFrame);
        else if (unconstrainedY < CGRectGetMinY(constraintRect) || objj_msgSend(menuWindow, "canScrollUp"))
            unconstrainedFrame.origin.y = MAX(CGRectGetMinY(constraintRect), aLocation.y);
        objj_msgSend(menuWindow, "setFrameOrigin:", (CGRectIntersection(unconstrainedFrame, constraintRect)).origin);
    }
    if (objj_msgSend(CPPlatform, "isBrowser"))
        objj_msgSend(menuWindow, "setPlatformWindow:", objj_msgSend(objj_msgSend(aView, "window"), "platformWindow"));
    objj_msgSend(menuWindow, "orderFront:", self);
    objj_msgSend(objj_msgSend(_CPMenuManager, "sharedMenuManager"), "beginTracking:menuContainer:constraintRect:callback:", anEvent, menuWindow, objj_msgSend(CPMenu, "_constraintRectForView:", aView), objj_msgSend(CPMenu, "trackingCallbackWithCallback:", nil));
}
,["void","CPMenu","CPEvent","CPView","CPFont"])]);
}{
var the_class = objj_getClass("CPMenu")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("countOfItems"), function $CPMenu__countOfItems(self, _cmd)
{
    return objj_msgSend(self._items, "count");
}
,["CPUInteger"]), new objj_method(sel_getUid("objectInItemsAtIndex:"), function $CPMenu__objectInItemsAtIndex_(self, _cmd, anIndex)
{
    return objj_msgSend(self._items, "objectAtIndex:", anIndex);
}
,["CPMenuItem","CPUInteger"]), new objj_method(sel_getUid("itemsAtIndexes:"), function $CPMenu__itemsAtIndexes_(self, _cmd, indexes)
{
    return objj_msgSend(self._items, "objectsAtIndexes:", indexes);
}
,["CPArray","CPIndexSet"])]);
}{
var the_class = objj_getClass("CPMenu")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("insertObject:inItemsAtIndex:"), function $CPMenu__insertObject_inItemsAtIndex_(self, _cmd, aMenuItem, anIndex)
{
    var menu = objj_msgSend(aMenuItem, "menu");
    if (menu)
        if (menu !== self)
            objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "Attempted to insert item into menu that was already in another menu.");
        else
            return;
    objj_msgSend(aMenuItem, "setMenu:", self);
    objj_msgSend(self, "_highlightItemAtIndex:", CPNotFound);
    objj_msgSend(self._items, "insertObject:atIndex:", aMenuItem, anIndex);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPMenuDidAddItemNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", anIndex, "CPMenuItemIndex"));
}
,["void","CPMenuItem","CPUInteger"]), new objj_method(sel_getUid("removeObjectFromItemsAtIndex:"), function $CPMenu__removeObjectFromItemsAtIndex_(self, _cmd, anIndex)
{
    if (anIndex < 0 || anIndex >= objj_msgSend(self._items, "count"))
        return;
    objj_msgSend(objj_msgSend(self._items, "objectAtIndex:", anIndex), "setMenu:", nil);
    objj_msgSend(self, "_highlightItemAtIndex:", CPNotFound);
    objj_msgSend(self._items, "removeObjectAtIndex:", anIndex);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPMenuDidRemoveItemNotification, self, objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", anIndex, "CPMenuItemIndex"));
}
,["void","CPUInteger"])]);
}var CPMenuTitleKey = "CPMenuTitleKey",
    CPMenuNameKey = "CPMenuNameKey",
    CPMenuItemsKey = "CPMenuItemsKey",
    CPMenuShowsStateColumnKey = "CPMenuShowsStateColumnKey",
    CPMenuAutoEnablesItemsKey = "CPMenuAutoEnablesItemsKey";
{
var the_class = objj_getClass("CPMenu")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPMenu\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPMenu__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMenu").super_class }, "init");
    if (self)
    {
        self._title = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuTitleKey);
        self._items = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemsKey);
        objj_msgSend(self, "_setMenuName:", objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuNameKey));
        self._showsStateColumn = !objj_msgSend(aCoder, "containsValueForKey:", CPMenuShowsStateColumnKey) || objj_msgSend(aCoder, "decodeBoolForKey:", CPMenuShowsStateColumnKey);
        self._autoenablesItems = !objj_msgSend(aCoder, "containsValueForKey:", CPMenuAutoEnablesItemsKey) || objj_msgSend(aCoder, "decodeBoolForKey:", CPMenuAutoEnablesItemsKey);
        objj_msgSend(self, "setMinimumWidth:", 0);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPMenu__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSend(aCoder, "encodeObject:forKey:", self._title, CPMenuTitleKey);
    if (self._name)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._name, CPMenuNameKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._items, CPMenuItemsKey);
    if (!self._showsStateColumn)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._showsStateColumn, CPMenuShowsStateColumnKey);
    if (!self._autoenablesItems)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._autoenablesItems, CPMenuAutoEnablesItemsKey);
}
,["void","CPCoder"])]);
}objj_executeFile("_CPMenuBarWindow.j", YES);objj_executeFile("_CPMenuWindow.j", YES);p;24;_CPMenuItemMenuBarView.jt;10298;@STATIC;1.0;i;11;CPControl.ji;21;_CPImageAndTextView.jt;10236;objj_executeFile("CPControl.j", YES);objj_executeFile("_CPImageAndTextView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemMenuBarView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_highlightColor"), new objj_ivar("_textColor"), new objj_ivar("_textShadowColor"), new objj_ivar("_highlightTextColor"), new objj_ivar("_highlightTextShadowColor"), new objj_ivar("_menuItem"), new objj_ivar("_font"), new objj_ivar("_isDirty"), new objj_ivar("_shouldHighlight"), new objj_ivar("_imageAndTextView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("highlightColor"), function $_CPMenuItemMenuBarView__highlightColor(self, _cmd)
{
    return self._highlightColor;
}
,["CPColor"]), new objj_method(sel_getUid("setHighlightColor:"), function $_CPMenuItemMenuBarView__setHighlightColor_(self, _cmd, newValue)
{
    self._highlightColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("textColor"), function $_CPMenuItemMenuBarView__textColor(self, _cmd)
{
    return self._textColor;
}
,["CPColor"]), new objj_method(sel_getUid("setTextColor:"), function $_CPMenuItemMenuBarView__setTextColor_(self, _cmd, newValue)
{
    self._textColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPMenuItemMenuBarView__textShadowColor(self, _cmd)
{
    return self._textShadowColor;
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPMenuItemMenuBarView__setTextShadowColor_(self, _cmd, newValue)
{
    self._textShadowColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("highlightTextColor"), function $_CPMenuItemMenuBarView__highlightTextColor(self, _cmd)
{
    return self._highlightTextColor;
}
,["CPColor"]), new objj_method(sel_getUid("setHighlightTextColor:"), function $_CPMenuItemMenuBarView__setHighlightTextColor_(self, _cmd, newValue)
{
    self._highlightTextColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("highlightTextShadowColor"), function $_CPMenuItemMenuBarView__highlightTextShadowColor(self, _cmd)
{
    return self._highlightTextShadowColor;
}
,["CPColor"]), new objj_method(sel_getUid("setHighlightTextShadowColor:"), function $_CPMenuItemMenuBarView__setHighlightTextShadowColor_(self, _cmd, newValue)
{
    self._highlightTextShadowColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("menuItem"), function $_CPMenuItemMenuBarView__menuItem(self, _cmd)
{
    return self._menuItem;
}
,["CPMenuItem"]), new objj_method(sel_getUid("setMenuItem:"), function $_CPMenuItemMenuBarView__setMenuItem_(self, _cmd, newValue)
{
    self._menuItem = newValue;
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPMenuItemMenuBarView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuItemMenuBarView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._imageAndTextView = objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMake(objj_msgSend(self, "valueForThemeAttribute:", "horizontal-margin"), 0.0, 0.0, 0.0));
        objj_msgSend(self._imageAndTextView, "setImagePosition:", CPImageLeft);
        objj_msgSend(self._imageAndTextView, "setImageOffset:", 3.0);
        objj_msgSend(self._imageAndTextView, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
        objj_msgSend(self._imageAndTextView, "setAutoresizingMask:", CPViewMinYMargin | CPViewMaxYMargin);
        objj_msgSend(self, "addSubview:", self._imageAndTextView);
        objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("setTextColor:"), function $_CPMenuItemMenuBarView__setTextColor_(self, _cmd, aColor)
{
    self._textColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["CPColor","CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPMenuItemMenuBarView__setTextShadowColor_(self, _cmd, aColor)
{
    self._textShadowColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["CPColor","CPColor"]), new objj_method(sel_getUid("setHighlightTextColor:"), function $_CPMenuItemMenuBarView__setHighlightTextColor_(self, _cmd, aColor)
{
    self._highlightTextColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["CPColor","CPColor"]), new objj_method(sel_getUid("setHighlightTextShadowColor:"), function $_CPMenuItemMenuBarView__setHighlightTextShadowColor_(self, _cmd, aColor)
{
    self._highlightTextShadowColor = aColor;
    objj_msgSend(self, "setNeedsLayout");
}
,["CPColor","CPColor"]), new objj_method(sel_getUid("textColor"), function $_CPMenuItemMenuBarView__textColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return objj_msgSend(CPColor, "lightGrayColor");
    return self._textColor || objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-text-color", _CPMenuView);
}
,["CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPMenuItemMenuBarView__textShadowColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return objj_msgSend(CPColor, "clearColor");
    return self._textShadowColor || objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-text-shadow-color", _CPMenuView);
}
,["CPColor"]), new objj_method(sel_getUid("highlightTextColor"), function $_CPMenuItemMenuBarView__highlightTextColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return objj_msgSend(CPColor, "lightGrayColor");
    return self._highlightTextColor || objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-highlight-text-color", _CPMenuView);
}
,["CPColor"]), new objj_method(sel_getUid("highlightTextShadowColor"), function $_CPMenuItemMenuBarView__highlightTextShadowColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return objj_msgSend(CPColor, "clearColor");
    return self._highlightTextShadowColor || objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-highlight-text-shadow-color", _CPMenuView);
}
,["CPColor"]), new objj_method(sel_getUid("highlightColor"), function $_CPMenuItemMenuBarView__highlightColor(self, _cmd)
{
    return self._highlightColor || objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-bar-window-background-selected-color", _CPMenuView);
}
,["CPColor"]), new objj_method(sel_getUid("update"), function $_CPMenuItemMenuBarView__update(self, _cmd)
{
    var x = objj_msgSend(self, "valueForThemeAttribute:", "horizontal-margin"),
        height = 0.0;
    objj_msgSend(self._imageAndTextView, "setText:", objj_msgSend(self._menuItem, "title"));
    objj_msgSend(self._imageAndTextView, "setFont:", objj_msgSend(self._menuItem, "font") || objj_msgSend(_CPMenuBarWindow, "font"));
    objj_msgSend(self._imageAndTextView, "setVerticalAlignment:", CPCenterVerticalTextAlignment);
    objj_msgSend(self._imageAndTextView, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
    objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "image"));
    objj_msgSend(self._imageAndTextView, "sizeToFit");
    var imageAndTextViewFrame = objj_msgSend(self._imageAndTextView, "frame");
    imageAndTextViewFrame.origin.x = x;
    x += CGRectGetWidth(imageAndTextViewFrame);
    height = MAX(height, CGRectGetHeight(imageAndTextViewFrame)) + 2.0 * objj_msgSend(self, "valueForThemeAttribute:", "vertical-margin");
    imageAndTextViewFrame.origin.y = FLOOR((height - CGRectGetHeight(imageAndTextViewFrame)) / 2.0);
    objj_msgSend(self._imageAndTextView, "setFrame:", imageAndTextViewFrame);
    objj_msgSend(self, "setAutoresizesSubviews:", NO);
    objj_msgSend(self, "setFrameSize:", CGSizeMake(x + objj_msgSend(self, "valueForThemeAttribute:", "horizontal-margin"), height));
    objj_msgSend(self, "setAutoresizesSubviews:", YES);
    objj_msgSend(self, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("highlight:"), function $_CPMenuItemMenuBarView__highlight_(self, _cmd, shouldHighlight)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        shouldHighlight = NO;
    self._shouldHighlight = shouldHighlight;
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPMenuItemMenuBarView__layoutSubviews(self, _cmd)
{
    if (self._shouldHighlight)
    {
        if (!objj_msgSend(self._menuItem, "_isMenuBarButton"))
            objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "highlightColor"));
        objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "alternateImage") || objj_msgSend(self._menuItem, "image"));
        objj_msgSend(self._imageAndTextView, "setTextColor:", objj_msgSend(self, "highlightTextColor"));
        objj_msgSend(self._imageAndTextView, "setTextShadowColor:", objj_msgSend(self, "highlightTextShadowColor"));
    }
    else
    {
        objj_msgSend(self, "setBackgroundColor:", nil);
        objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "image"));
        objj_msgSend(self._imageAndTextView, "setTextColor:", objj_msgSend(self, "textColor"));
        objj_msgSend(self._imageAndTextView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
    }
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPMenuItemMenuBarView__defaultThemeClass(self, _cmd)
{
    return "menu-item-bar-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPMenuItemMenuBarView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", 9.0, "horizontal-margin", 3.0, "submenu-indicator-margin", 4.0, "vertical-margin");
}
,["id"]), new objj_method(sel_getUid("view"), function $_CPMenuItemMenuBarView__view(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "init");
}
,["id"])]);
}p;26;_CPMenuItemSeparatorView.jt;1580;@STATIC;1.0;i;8;CPView.jt;1549;objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemSeparatorView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPMenuItemSeparatorView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuItemSeparatorView").super_class }, "initWithFrame:", aFrame);
    if (self)
        objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable);
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("drawRect:"), function $_CPMenuItemSeparatorView__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        bounds = objj_msgSend(self, "bounds");
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, CGRectGetMinX(bounds), FLOOR(CGRectGetMidY(bounds)) - 0.5);
    CGContextAddLineToPoint(context, CGRectGetMaxX(bounds), FLOOR(CGRectGetMidY(bounds)) - 0.5);
    CGContextSetStrokeColor(context, objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "menu-item-separator-color", _CPMenuItemStandardView));
    CGContextStrokePath(context);
}
,["void","CGRect"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("view"), function $_CPMenuItemSeparatorView__view(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 0.0, 10.0));
}
,["id"])]);
}p;25;_CPMenuItemStandardView.jt;15674;@STATIC;1.0;i;11;CPControl.ji;13;CPImageView.ji;21;_CPImageAndTextView.jt;15594;objj_executeFile("CPControl.j", YES);objj_executeFile("CPImageView.j", YES);objj_executeFile("_CPImageAndTextView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemStandardView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menuItem"), new objj_ivar("_font"), new objj_ivar("_minSize"), new objj_ivar("_isDirty"), new objj_ivar("_highlighted"), new objj_ivar("_stateView"), new objj_ivar("_imageAndTextView"), new objj_ivar("_keyEquivalentView"), new objj_ivar("_submenuIndicatorView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("menuItem"), function $_CPMenuItemStandardView__menuItem(self, _cmd)
{
    return self._menuItem;
}
,["CPMenuItem"]), new objj_method(sel_getUid("setMenuItem:"), function $_CPMenuItemStandardView__setMenuItem_(self, _cmd, newValue)
{
    self._menuItem = newValue;
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("minSize"), function $_CPMenuItemStandardView__minSize(self, _cmd)
{
    return self._minSize;
}
,["CGSize"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPMenuItemStandardView__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuItemStandardView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._stateView = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 0.0, 0.0));
        objj_msgSend(self._stateView, "setImageScaling:", CPImageScaleNone);
        objj_msgSend(self, "addSubview:", self._stateView);
        self._imageAndTextView = objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 0.0, 0.0));
        objj_msgSend(self._imageAndTextView, "setImagePosition:", CPImageLeft);
        objj_msgSend(self._imageAndTextView, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
        objj_msgSend(self, "addSubview:", self._imageAndTextView);
        self._keyEquivalentView = objj_msgSend(objj_msgSend(_CPImageAndTextView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 0.0, 0.0));
        objj_msgSend(self._keyEquivalentView, "setImagePosition:", CPNoImage);
        objj_msgSend(self._keyEquivalentView, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
        objj_msgSend(self._keyEquivalentView, "setAutoresizingMask:", CPViewMinXMargin);
        objj_msgSend(self, "addSubview:", self._keyEquivalentView);
        self._submenuIndicatorView = objj_msgSend(objj_msgSend(_CPMenuItemSubmenuIndicatorView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, 8.0, 10.0));
        objj_msgSend(self._submenuIndicatorView, "setColor:", objj_msgSend(self, "valueForThemeAttribute:", "submenu-indicator-color"));
        objj_msgSend(self._submenuIndicatorView, "setAutoresizingMask:", CPViewMinXMargin);
        objj_msgSend(self, "addSubview:", self._submenuIndicatorView);
        objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("textColor"), function $_CPMenuItemStandardView__textColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return objj_msgSend(CPColor, "lightGrayColor");
    if (self._highlighted)
        return objj_msgSend(CPColor, "whiteColor");
    return objj_msgSend(self, "valueForThemeAttribute:", "menu-item-text-color");
}
,["CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPMenuItemStandardView__textShadowColor(self, _cmd)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return nil;
    if (self._highlighted)
        return nil;
    return objj_msgSend(self, "valueForThemeAttribute:", "menu-item-text-shadow-color");
}
,["CPColor"]), new objj_method(sel_getUid("setFont:"), function $_CPMenuItemStandardView__setFont_(self, _cmd, aFont)
{
    self._font = aFont;
}
,["void","CPFont"]), new objj_method(sel_getUid("update"), function $_CPMenuItemStandardView__update(self, _cmd)
{
    var x = objj_msgSend(self, "valueForThemeAttribute:", "left-margin") + objj_msgSend(self._menuItem, "indentationLevel") * objj_msgSend(self, "valueForThemeAttribute:", "indentation-width"),
        height = 0.0,
        hasStateColumn = objj_msgSend(objj_msgSend(self._menuItem, "menu"), "showsStateColumn");
    if (hasStateColumn)
    {
        objj_msgSend(self._stateView, "setHidden:", NO);
        switch(objj_msgSend(self._menuItem, "state")) {
        case CPOnState:
            objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-on-state-image"));
            break;
        case CPOffState:
            objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-off-state-image"));
            break;
        case CPMixedState:
            objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-mixed-state-image"));
            break;
default:
            break;
        }
        x += objj_msgSend(self, "valueForThemeAttribute:", "state-column-width");
    }
    else
        objj_msgSend(self._stateView, "setHidden:", YES);
    objj_msgSend(self._imageAndTextView, "setFont:", objj_msgSend(self._menuItem, "font") || self._font);
    objj_msgSend(self._imageAndTextView, "setVerticalAlignment:", CPCenterVerticalTextAlignment);
    objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "image"));
    objj_msgSend(self._imageAndTextView, "setText:", objj_msgSend(self._menuItem, "title"));
    objj_msgSend(self._imageAndTextView, "setTextColor:", objj_msgSend(self, "textColor"));
    objj_msgSend(self._imageAndTextView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
    objj_msgSend(self._imageAndTextView, "setTextShadowOffset:", CGSizeMake(0.0, 1.0));
    objj_msgSend(self._imageAndTextView, "sizeToFit");
    var imageAndTextViewFrame = objj_msgSend(self._imageAndTextView, "frame");
    imageAndTextViewFrame.origin.x = x;
    x += CGRectGetWidth(imageAndTextViewFrame);
    height = MAX(height, CGRectGetHeight(imageAndTextViewFrame));
    var hasKeyEquivalent = !!objj_msgSend(self._menuItem, "keyEquivalent"),
        hasSubmenu = objj_msgSend(self._menuItem, "hasSubmenu");
    if (hasKeyEquivalent || hasSubmenu)
        x += objj_msgSend(self, "valueForThemeAttribute:", "right-columns-margin");
    if (hasKeyEquivalent)
    {
        objj_msgSend(self._keyEquivalentView, "setFont:", objj_msgSend(self._menuItem, "font") || self._font);
        objj_msgSend(self._keyEquivalentView, "setVerticalAlignment:", CPCenterVerticalTextAlignment);
        objj_msgSend(self._keyEquivalentView, "setImage:", objj_msgSend(self._menuItem, "image"));
        objj_msgSend(self._keyEquivalentView, "setText:", objj_msgSend(self._menuItem, "keyEquivalentStringRepresentation"));
        objj_msgSend(self._keyEquivalentView, "setTextColor:", objj_msgSend(self, "textColor"));
        objj_msgSend(self._keyEquivalentView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
        objj_msgSend(self._keyEquivalentView, "setTextShadowOffset:", CGSizeMake(0, 1));
        objj_msgSend(self._keyEquivalentView, "setFrameOrigin:", CGPointMake(x, objj_msgSend(self, "valueForThemeAttribute:", "vertical-margin")));
        objj_msgSend(self._keyEquivalentView, "sizeToFit");
        var keyEquivalentViewFrame = objj_msgSend(self._keyEquivalentView, "frame");
        keyEquivalentViewFrame.origin.x = x;
        x += CGRectGetWidth(keyEquivalentViewFrame);
        height = MAX(height, CGRectGetHeight(keyEquivalentViewFrame));
        if (hasSubmenu)
            x += objj_msgSend(self, "valueForThemeAttribute:", "right-columns-margin");
    }
    else
        objj_msgSend(self._keyEquivalentView, "setHidden:", YES);
    if (hasSubmenu)
    {
        objj_msgSend(self._submenuIndicatorView, "setHidden:", NO);
        var submenuViewFrame = objj_msgSend(self._submenuIndicatorView, "frame");
        submenuViewFrame.origin.x = x;
        x += CGRectGetWidth(submenuViewFrame);
        height = MAX(height, CGRectGetHeight(submenuViewFrame));
    }
    else
        objj_msgSend(self._submenuIndicatorView, "setHidden:", YES);
    height += 2.0 * objj_msgSend(self, "valueForThemeAttribute:", "vertical-margin");
    imageAndTextViewFrame.origin.y = FLOOR((height - CGRectGetHeight(imageAndTextViewFrame)) / 2.0);
    objj_msgSend(self._imageAndTextView, "setFrame:", imageAndTextViewFrame);
    if (hasStateColumn)
        objj_msgSend(self._stateView, "setFrameSize:", CGSizeMake(objj_msgSend(self, "valueForThemeAttribute:", "state-column-width"), height));
    if (hasKeyEquivalent)
    {
        keyEquivalentViewFrame.origin.y = FLOOR((height - CGRectGetHeight(keyEquivalentViewFrame)) / 2.0);
        objj_msgSend(self._keyEquivalentView, "setFrame:", keyEquivalentViewFrame);
    }
    if (hasSubmenu)
    {
        submenuViewFrame.origin.y = FLOOR((height - CGRectGetHeight(submenuViewFrame)) / 2.0);
        objj_msgSend(self._submenuIndicatorView, "setFrame:", submenuViewFrame);
    }
    self._minSize = CGSizeMake(x + objj_msgSend(self, "valueForThemeAttribute:", "right-margin"), height);
    objj_msgSend(self, "setAutoresizesSubviews:", NO);
    objj_msgSend(self, "setFrameSize:", self._minSize);
    objj_msgSend(self, "setAutoresizesSubviews:", YES);
}
,["void"]), new objj_method(sel_getUid("highlight:"), function $_CPMenuItemStandardView__highlight_(self, _cmd, shouldHighlight)
{
    if (!objj_msgSend(self._menuItem, "isEnabled"))
        return;
    self._highlighted = shouldHighlight;
    objj_msgSend(self._imageAndTextView, "setTextColor:", objj_msgSend(self, "textColor"));
    objj_msgSend(self._keyEquivalentView, "setTextColor:", objj_msgSend(self, "textColor"));
    objj_msgSend(self._imageAndTextView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
    objj_msgSend(self._keyEquivalentView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
    if (shouldHighlight)
    {
        objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-selection-color"));
        objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "alternateImage") || objj_msgSend(self._menuItem, "image"));
        objj_msgSend(self._submenuIndicatorView, "setColor:", objj_msgSend(self, "textColor"));
    }
    else
    {
        objj_msgSend(self, "setBackgroundColor:", nil);
        objj_msgSend(self._imageAndTextView, "setImage:", objj_msgSend(self._menuItem, "image"));
        objj_msgSend(self._submenuIndicatorView, "setColor:", objj_msgSend(self, "valueForThemeAttribute:", "submenu-indicator-color"));
    }
    if (objj_msgSend(objj_msgSend(self._menuItem, "menu"), "showsStateColumn"))
    {
        if (shouldHighlight)
        {
            switch(objj_msgSend(self._menuItem, "state")) {
            case CPOnState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-on-state-highlighted-image"));
                break;
            case CPOffState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-off-state-highlighted-image"));
                break;
            case CPMixedState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-mixed-state-highlighted-image"));
                break;
default:
                break;
            }
        }
        else
        {
            switch(objj_msgSend(self._menuItem, "state")) {
            case CPOnState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-on-state-image"));
                break;
            case CPOffState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-off-state-image"));
                break;
            case CPMixedState:
                objj_msgSend(self._stateView, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "menu-item-default-mixed-state-image"));
                break;
default:
                break;
            }
        }
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("isHighlighted"), function $_CPMenuItemStandardView__isHighlighted(self, _cmd)
{
    return self._highlighted;
}
,["BOOL"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPMenuItemStandardView__defaultThemeClass(self, _cmd)
{
    return "menu-item-standard-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPMenuItemStandardView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "submenu-indicator-color", objj_msgSend(CPNull, "null"), "menu-item-selection-color", objj_msgSend(CPNull, "null"), "menu-item-text-shadow-color", objj_msgSend(CPNull, "null"), "menu-item-text-color", objj_msgSend(CPNull, "null"), "menu-item-default-off-state-image", objj_msgSend(CPNull, "null"), "menu-item-default-off-state-highlighted-image", objj_msgSend(CPNull, "null"), "menu-item-default-on-state-image", objj_msgSend(CPNull, "null"), "menu-item-default-on-state-highlighted-image", objj_msgSend(CPNull, "null"), "menu-item-default-mixed-state-image", objj_msgSend(CPNull, "null"), "menu-item-default-mixed-state-highlighted-image", objj_msgSend(CPNull, "null"), "menu-item-separator-color", 3.0, "left-margin", 17.0, "right-margin", 14.0, "state-column-width", 17.0, "indentation-width", 4.0, "vertical-margin", 30.0, "right-columns-margin");
}
,["id"]), new objj_method(sel_getUid("view"), function $_CPMenuItemStandardView__view(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "alloc"), "init");
}
,["id"]), new objj_method(sel_getUid("_standardLeftMargin"), function $_CPMenuItemStandardView___standardLeftMargin(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "left-margin", objj_msgSend(self, "class")) + objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "state-column-width", objj_msgSend(self, "class"));
}
,["float"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemSubmenuIndicatorView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_color")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setColor:"), function $_CPMenuItemSubmenuIndicatorView__setColor_(self, _cmd, aColor)
{
    if (self._color === aColor)
        return;
    self._color = aColor;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPColor"]), new objj_method(sel_getUid("drawRect:"), function $_CPMenuItemSubmenuIndicatorView__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        bounds = objj_msgSend(self, "bounds");
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, CGRectGetMinX(bounds), CGRectGetMinY(bounds));
    CGContextAddLineToPoint(context, CGRectGetMaxX(bounds), CGRectGetMidY(bounds));
    CGContextAddLineToPoint(context, CGRectGetMinX(bounds), CGRectGetMaxY(bounds));
    CGContextClosePath(context);
    CGContextSetFillColor(context, self._color);
    CGContextFillPath(context);
}
,["void","CGRect"])]);
}p;17;_CPMenuItemView.jt;9439;@STATIC;1.0;i;11;CPControl.ji;26;_CPMenuItemSeparatorView.ji;25;_CPMenuItemStandardView.ji;24;_CPMenuItemMenuBarView.jt;9314;objj_executeFile("CPControl.j", YES);objj_executeFile("_CPMenuItemSeparatorView.j", YES);objj_executeFile("_CPMenuItemStandardView.j", YES);objj_executeFile("_CPMenuItemMenuBarView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_menuItem"), new objj_ivar("_view"), new objj_ivar("_font"), new objj_ivar("_textColor"), new objj_ivar("_textShadowColor"), new objj_ivar("_minSize"), new objj_ivar("_isDirty"), new objj_ivar("_showsStateColumn"), new objj_ivar("_imageAndTextView"), new objj_ivar("_submenuView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("view"), function $_CPMenuItemView__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("initWithFrame:forMenuItem:"), function $_CPMenuItemView__initWithFrame_forMenuItem_(self, _cmd, aFrame, aMenuItem)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPMenuItemView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._menuItem = aMenuItem;
        self._showsStateColumn = YES;
        self._isDirty = YES;
        objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self, "synchronizeWithMenuItem");
    }
    return self;
}
,["id","CGRect","CPMenuItem"]), new objj_method(sel_getUid("minSize"), function $_CPMenuItemView__minSize(self, _cmd)
{
    return self._minSize;
}
,["CGSize"]), new objj_method(sel_getUid("setDirty"), function $_CPMenuItemView__setDirty(self, _cmd)
{
    self._isDirty = YES;
}
,["void"]), new objj_method(sel_getUid("synchronizeWithMenuItem"), function $_CPMenuItemView__synchronizeWithMenuItem(self, _cmd)
{
    var menuItemView = objj_msgSend(self._menuItem, "view");
    if (objj_msgSend(self._menuItem, "isSeparatorItem"))
    {
        if (!objj_msgSend(self._view, "isKindOfClass:", objj_msgSend(_CPMenuItemSeparatorView, "class")))
        {
            objj_msgSend(self._view, "removeFromSuperview");
            self._view = objj_msgSend(_CPMenuItemSeparatorView, "view");
        }
    }
    else if (menuItemView)
    {
        if (self._view !== menuItemView)
        {
            objj_msgSend(self._view, "removeFromSuperview");
            self._view = menuItemView;
        }
    }
    else if (objj_msgSend(self._menuItem, "menu") == objj_msgSend(CPApp, "mainMenu"))
    {
        if (!objj_msgSend(self._view, "isKindOfClass:", objj_msgSend(_CPMenuItemMenuBarView, "class")))
        {
            objj_msgSend(self._view, "removeFromSuperview");
            self._view = objj_msgSend(_CPMenuItemMenuBarView, "view");
        }
        objj_msgSend(self._view, "setMenuItem:", self._menuItem);
    }
    else
    {
        if (!objj_msgSend(self._view, "isKindOfClass:", objj_msgSend(_CPMenuItemStandardView, "class")))
        {
            objj_msgSend(self._view, "removeFromSuperview");
            self._view = objj_msgSend(_CPMenuItemStandardView, "view");
        }
        objj_msgSend(self._view, "setMenuItem:", self._menuItem);
    }
    if (objj_msgSend(self._view, "superview") !== self)
        objj_msgSend(self, "addSubview:", self._view);
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("update")))
        objj_msgSend(self._view, "update");
    self._minSize = objj_msgSend(self._view, "frame").size;
    objj_msgSend(self, "setAutoresizesSubviews:", NO);
    objj_msgSend(self, "setFrameSize:", self._minSize);
    objj_msgSend(self, "setAutoresizesSubviews:", YES);
}
,["void"]), new objj_method(sel_getUid("setShowsStateColumn:"), function $_CPMenuItemView__setShowsStateColumn_(self, _cmd, shouldShowStateColumn)
{
    self._showsStateColumn = shouldShowStateColumn;
}
,["void","BOOL"]), new objj_method(sel_getUid("highlight:"), function $_CPMenuItemView__highlight_(self, _cmd, shouldHighlight)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("highlight:")))
        objj_msgSend(self._view, "highlight:", shouldHighlight);
}
,["void","BOOL"]), new objj_method(sel_getUid("eventOnSubmenu:"), function $_CPMenuItemView__eventOnSubmenu_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self._menuItem, "hasSubmenu"))
        return NO;
    return CGRectContainsPoint(objj_msgSend(self._submenuView, "frame"), objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil));
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("isHidden"), function $_CPMenuItemView__isHidden(self, _cmd)
{
    return objj_msgSend(self._menuItem, "isHidden");
}
,["BOOL"]), new objj_method(sel_getUid("menuItem"), function $_CPMenuItemView__menuItem(self, _cmd)
{
    return self._menuItem;
}
,["CPMenuItem"]), new objj_method(sel_getUid("setFont:"), function $_CPMenuItemView__setFont_(self, _cmd, aFont)
{
    if (objj_msgSend(self._font, "isEqual:", aFont))
        return;
    self._font = aFont;
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setFont:")))
        objj_msgSend(self._view, "setFont:", aFont);
    objj_msgSend(self, "setDirty");
}
,["void","CPFont"]), new objj_method(sel_getUid("setTextColor:"), function $_CPMenuItemView__setTextColor_(self, _cmd, aColor)
{
    if (self._textColor == aColor)
        return;
    self._textColor = aColor;
    objj_msgSend(self._imageAndTextView, "setTextColor:", objj_msgSend(self, "textColor"));
    objj_msgSend(self._submenuView, "setColor:", objj_msgSend(self, "textColor"));
}
,["void","CPColor"]), new objj_method(sel_getUid("textColor"), function $_CPMenuItemView__textColor(self, _cmd)
{
    return nil;
}
,["CPColor"]), new objj_method(sel_getUid("setTextShadowColor:"), function $_CPMenuItemView__setTextShadowColor_(self, _cmd, aColor)
{
    if (self._textShadowColor == aColor)
        return;
    self._textShadowColor = aColor;
    objj_msgSend(self._imageAndTextView, "setTextShadowColor:", objj_msgSend(self, "textShadowColor"));
}
,["void","CPColor"]), new objj_method(sel_getUid("textShadowColor"), function $_CPMenuItemView__textShadowColor(self, _cmd)
{
    return objj_msgSend(self._menuItem, "isEnabled") ? self._textShadowColor ? self._textShadowColor : objj_msgSend(CPColor, "colorWithWhite:alpha:", 1.0, 0.8) : objj_msgSend(CPColor, "colorWithWhite:alpha:", 0.8, 0.8);
}
,["CPColor"]), new objj_method(sel_getUid("setParentMenuHighlightColor:"), function $_CPMenuItemView__setParentMenuHighlightColor_(self, _cmd, aColor)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setHighlightColor:")))
        objj_msgSend(self._view, "setHighlightColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setParentMenuHighlightTextColor:"), function $_CPMenuItemView__setParentMenuHighlightTextColor_(self, _cmd, aColor)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setHighlightTextColor:")))
        objj_msgSend(self._view, "setHighlightTextColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setParentMenuHighlightTextShadowColor:"), function $_CPMenuItemView__setParentMenuHighlightTextShadowColor_(self, _cmd, aColor)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setHighlightTextShadowColor:")))
        objj_msgSend(self._view, "setHighlightTextShadowColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setParentMenuTextColor:"), function $_CPMenuItemView__setParentMenuTextColor_(self, _cmd, aColor)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setTextColor:")))
        objj_msgSend(self._view, "setTextColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("setParentMenuTextShadowColor:"), function $_CPMenuItemView__setParentMenuTextShadowColor_(self, _cmd, aColor)
{
    if (objj_msgSend(self._view, "respondsToSelector:", sel_getUid("setTextShadowColor:")))
        objj_msgSend(self._view, "setTextShadowColor:", aColor);
}
,["void","CPColor"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPMenuItemView__defaultThemeClass(self, _cmd)
{
    return "menu-item-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPMenuItemView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
}
,["id"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPMenuItemArrowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_color")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setColor:"), function $_CPMenuItemArrowView__setColor_(self, _cmd, aColor)
{
    if (self._color == aColor)
        return;
    self._color = aColor;
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","CPColor"]), new objj_method(sel_getUid("drawRect:"), function $_CPMenuItemArrowView__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 1.0, 4.0);
    CGContextAddLineToPoint(context, 9.0, 4.0);
    CGContextAddLineToPoint(context, 5.0, 8.0);
    CGContextClosePath(context);
    CGContextSetFillColor(context, self._color);
    CGContextFillPath(context);
}
,["void","CGRect"])]);
}p;12;CPMenuItem.jt;24826;@STATIC;1.0;I;20;Foundation/CPCoder.jI;21;Foundation/CPObject.jI;21;Foundation/CPString.ji;9;CPImage.ji;8;CPText.ji;8;CPView.ji;17;_CPMenuItemView.jt;24670;objj_executeFile("Foundation/CPCoder.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("CPImage.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("_CPMenuItemView.j", YES);var CPMenuItemStringRepresentationDictionary = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", "\u238B", CPEscapeFunctionKey, "\u21E5", CPTabCharacter, "\u21E4", CPBackTabCharacter, "\u2423", CPSpaceFunctionKey, "\u23CE", CPCarriageReturnCharacter, "\u232B", CPBackspaceCharacter, "\u232B", CPDeleteFunctionKey, "\u2326", CPDeleteCharacter, "\u21F1", CPHomeFunctionKey, "\u21F2", CPEndFunctionKey, "\u21DE", CPPageUpFunctionKey, "\u21DF", CPPageDownFunctionKey, "\u2191", CPUpArrowFunctionKey, "\u2193", CPDownArrowFunctionKey, "\u2190", CPLeftArrowFunctionKey, "\u2192", CPRightArrowFunctionKey, "\u2327", CPClearDisplayFunctionKey);
{var the_class = objj_allocateClassPair(CPObject, "CPMenuItem"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isSeparator"), new objj_ivar("_title"), new objj_ivar("_font"), new objj_ivar("_target"), new objj_ivar("_action"), new objj_ivar("_isEnabled"), new objj_ivar("_isHidden"), new objj_ivar("_tag"), new objj_ivar("_state"), new objj_ivar("_image"), new objj_ivar("_alternateImage"), new objj_ivar("_onStateImage"), new objj_ivar("_offStateImage"), new objj_ivar("_mixedStateImage"), new objj_ivar("_submenu"), new objj_ivar("_menu"), new objj_ivar("_keyEquivalent"), new objj_ivar("_keyEquivalentModifierMask"), new objj_ivar("_mnemonicLocation"), new objj_ivar("_isAlternate"), new objj_ivar("_indentationLevel"), new objj_ivar("_toolTip"), new objj_ivar("_representedObject"), new objj_ivar("_view"), new objj_ivar("_changeCount"), new objj_ivar("_menuItemView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPMenuItem__init(self, _cmd)
{
    return objj_msgSend(self, "initWithTitle:action:keyEquivalent:", "", nil, nil);
}
,["id"]), new objj_method(sel_getUid("initWithTitle:action:keyEquivalent:"), function $CPMenuItem__initWithTitle_action_keyEquivalent_(self, _cmd, aTitle, anAction, aKeyEquivalent)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMenuItem").super_class }, "init");
    if (self)
    {
        self._changeCount = 0;
        self._isSeparator = NO;
        self._title = aTitle;
        self._action = anAction;
        self._isEnabled = YES;
        self._isHidden = NO;
        self._tag = 0;
        self._state = CPOffState;
        self._keyEquivalent = aKeyEquivalent || "";
        self._keyEquivalentModifierMask = CPPlatformActionKeyMask;
        self._indentationLevel = 0;
        self._mnemonicLocation = CPNotFound;
    }
    return self;
}
,["id","CPString","SEL","CPString"]), new objj_method(sel_getUid("setEnabled:"), function $CPMenuItem__setEnabled_(self, _cmd, isEnabled)
{
    if (self._isEnabled === isEnabled)
        return;
    if (!isEnabled && objj_msgSend(self, "isHighlighted"))
        objj_msgSend(self._menu, "_highlightItemAtIndex:", CPNotFound);
    self._isEnabled = !!isEnabled;
    objj_msgSend(self._menuItemView, "setDirty");
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","BOOL"]), new objj_method(sel_getUid("isEnabled"), function $CPMenuItem__isEnabled(self, _cmd)
{
    return self._isEnabled;
}
,["BOOL"]), new objj_method(sel_getUid("setHidden:"), function $CPMenuItem__setHidden_(self, _cmd, isHidden)
{
    if (self._isHidden == isHidden)
        return;
    self._isHidden = isHidden;
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","BOOL"]), new objj_method(sel_getUid("isHidden"), function $CPMenuItem__isHidden(self, _cmd)
{
    return self._isHidden;
}
,["BOOL"]), new objj_method(sel_getUid("isHiddenOrHasHiddenAncestor"), function $CPMenuItem__isHiddenOrHasHiddenAncestor(self, _cmd)
{
    if (self._isHidden)
        return YES;
    var supermenu = objj_msgSend(self._menu, "supermenu");
    if (objj_msgSend(objj_msgSend(supermenu, "itemAtIndex:", objj_msgSend(supermenu, "indexOfItemWithSubmenu:", self._menu)), "isHiddenOrHasHiddenAncestor"))
        return YES;
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("setTarget:"), function $CPMenuItem__setTarget_(self, _cmd, aTarget)
{
    self._target = aTarget;
}
,["void","id"]), new objj_method(sel_getUid("target"), function $CPMenuItem__target(self, _cmd)
{
    return self._target;
}
,["id"]), new objj_method(sel_getUid("setAction:"), function $CPMenuItem__setAction_(self, _cmd, anAction)
{
    self._action = anAction;
}
,["void","SEL"]), new objj_method(sel_getUid("action"), function $CPMenuItem__action(self, _cmd)
{
    return self._action;
}
,["SEL"]), new objj_method(sel_getUid("setTitle:"), function $CPMenuItem__setTitle_(self, _cmd, aTitle)
{
    self._mnemonicLocation = CPNotFound;
    if (self._title == aTitle)
        return;
    self._title = aTitle;
    objj_msgSend(self._menuItemView, "setDirty");
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPString"]), new objj_method(sel_getUid("title"), function $CPMenuItem__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setTextColor:"), function $CPMenuItem__setTextColor_(self, _cmd, aColor)
{
}
,["void","CPString"]), new objj_method(sel_getUid("setFont:"), function $CPMenuItem__setFont_(self, _cmd, aFont)
{
    if (objj_msgSend(self._font, "isEqual:", aFont))
        return;
    self._font = aFont;
    objj_msgSend(self._menu, "itemChanged:", self);
    objj_msgSend(self._menuItemView, "setDirty");
}
,["void","CPFont"]), new objj_method(sel_getUid("font"), function $CPMenuItem__font(self, _cmd)
{
    return self._font;
}
,["CPFont"]), new objj_method(sel_getUid("setTag:"), function $CPMenuItem__setTag_(self, _cmd, aTag)
{
    self._tag = aTag;
}
,["void","int"]), new objj_method(sel_getUid("tag"), function $CPMenuItem__tag(self, _cmd)
{
    return self._tag;
}
,["int"]), new objj_method(sel_getUid("setState:"), function $CPMenuItem__setState_(self, _cmd, aState)
{
    if (self._state == aState)
        return;
    self._state = aState;
    objj_msgSend(self._menu, "itemChanged:", self);
    objj_msgSend(self._menuItemView, "setDirty");
}
,["void","int"]), new objj_method(sel_getUid("state"), function $CPMenuItem__state(self, _cmd)
{
    return self._state;
}
,["int"]), new objj_method(sel_getUid("setImage:"), function $CPMenuItem__setImage_(self, _cmd, anImage)
{
    if (self._image == anImage)
        return;
    self._image = anImage;
    objj_msgSend(self._menuItemView, "setDirty");
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPImage"]), new objj_method(sel_getUid("image"), function $CPMenuItem__image(self, _cmd)
{
    return self._image;
}
,["CPImage"]), new objj_method(sel_getUid("setAlternateImage:"), function $CPMenuItem__setAlternateImage_(self, _cmd, anImage)
{
    self._alternateImage = anImage;
}
,["void","CPImage"]), new objj_method(sel_getUid("alternateImage"), function $CPMenuItem__alternateImage(self, _cmd)
{
    return self._alternateImage;
}
,["CPImage"]), new objj_method(sel_getUid("setOnStateImage:"), function $CPMenuItem__setOnStateImage_(self, _cmd, anImage)
{
    if (self._onStateImage == anImage)
        return;
    self._onStateImage = anImage;
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPImage"]), new objj_method(sel_getUid("onStateImage"), function $CPMenuItem__onStateImage(self, _cmd)
{
    return self._onStateImage;
}
,["CPImage"]), new objj_method(sel_getUid("setOffStateImage:"), function $CPMenuItem__setOffStateImage_(self, _cmd, anImage)
{
    if (self._offStateImage == anImage)
        return;
    self._offStateImage = anImage;
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPImage"]), new objj_method(sel_getUid("offStateImage"), function $CPMenuItem__offStateImage(self, _cmd)
{
    return self._offStateImage;
}
,["CPImage"]), new objj_method(sel_getUid("setMixedStateImage:"), function $CPMenuItem__setMixedStateImage_(self, _cmd, anImage)
{
    if (self._mixedStateImage == anImage)
        return;
    self._mixedStateImage = anImage;
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPImage"]), new objj_method(sel_getUid("mixedStateImage"), function $CPMenuItem__mixedStateImage(self, _cmd)
{
    return self._mixedStateImage;
}
,["CPImage"]), new objj_method(sel_getUid("setSubmenu:"), function $CPMenuItem__setSubmenu_(self, _cmd, aMenu)
{
    if (self._submenu === aMenu)
        return;
    var supermenu = objj_msgSend(self._submenu, "supermenu");
    if (supermenu)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Can't add submenu \"" + objj_msgSend(aMenu, "title") + "\" to item \"" + objj_msgSend(self, "title") + "\", because it is already submenu of \"" + objj_msgSend(objj_msgSend(aMenu, "supermenu"), "title") + "\"");
    self._submenu = aMenu;
    if (self._submenu)
    {
        objj_msgSend(self._submenu, "setSupermenu:", self._menu);
        objj_msgSend(self._submenu, "setTitle:", objj_msgSend(self, "title"));
        objj_msgSend(self, "setTarget:", self._menu);
        objj_msgSend(self, "setAction:", sel_getUid("submenuAction:"));
    }
    else
    {
        objj_msgSend(self, "setTarget:", nil);
        objj_msgSend(self, "setAction:", NULL);
    }
    objj_msgSend(self._menuItemView, "setDirty");
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPMenu"]), new objj_method(sel_getUid("submenu"), function $CPMenuItem__submenu(self, _cmd)
{
    return self._submenu;
}
,["CPMenu"]), new objj_method(sel_getUid("hasSubmenu"), function $CPMenuItem__hasSubmenu(self, _cmd)
{
    return self._submenu ? YES : NO;
}
,["BOOL"]), new objj_method(sel_getUid("isSeparatorItem"), function $CPMenuItem__isSeparatorItem(self, _cmd)
{
    return self._isSeparator;
}
,["BOOL"]), new objj_method(sel_getUid("setMenu:"), function $CPMenuItem__setMenu_(self, _cmd, aMenu)
{
    self._menu = aMenu;
}
,["void","CPMenu"]), new objj_method(sel_getUid("menu"), function $CPMenuItem__menu(self, _cmd)
{
    return self._menu;
}
,["CPMenu"]), new objj_method(sel_getUid("setKeyEquivalent:"), function $CPMenuItem__setKeyEquivalent_(self, _cmd, aString)
{
    self._keyEquivalent = aString || "";
}
,["void","CPString"]), new objj_method(sel_getUid("keyEquivalent"), function $CPMenuItem__keyEquivalent(self, _cmd)
{
    return self._keyEquivalent;
}
,["CPString"]), new objj_method(sel_getUid("setKeyEquivalentModifierMask:"), function $CPMenuItem__setKeyEquivalentModifierMask_(self, _cmd, aMask)
{
    self._keyEquivalentModifierMask = aMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("keyEquivalentModifierMask"), function $CPMenuItem__keyEquivalentModifierMask(self, _cmd)
{
    return self._keyEquivalentModifierMask;
}
,["unsigned"]), new objj_method(sel_getUid("keyEquivalentStringRepresentation"), function $CPMenuItem__keyEquivalentStringRepresentation(self, _cmd)
{
    if (!objj_msgSend(self._keyEquivalent, "length"))
        return "";
    var string = self._keyEquivalent.toUpperCase(),
        needsShift = self._keyEquivalentModifierMask & CPShiftKeyMask || string === self._keyEquivalent && self._keyEquivalent.toLowerCase() !== self._keyEquivalent.toUpperCase();
    if (objj_msgSend(CPMenuItemStringRepresentationDictionary, "objectForKey:", string))
        string = objj_msgSend(CPMenuItemStringRepresentationDictionary, "objectForKey:", string);
    if (CPBrowserIsOperatingSystem(CPMacOperatingSystem))
    {
        if (self._keyEquivalentModifierMask & CPCommandKeyMask)
            string = "\u2318" + string;
        if (needsShift)
            string = "\u21E7" + string;
        if (self._keyEquivalentModifierMask & CPAlternateKeyMask)
            string = "\u2325" + string;
        if (self._keyEquivalentModifierMask & CPControlKeyMask)
            string = "\u2303" + string;
    }
    else
    {
        if (needsShift)
            string = "Shift-" + string;
        if (self._keyEquivalentModifierMask & CPAlternateKeyMask)
            string = "Alt-" + string;
        if (self._keyEquivalentModifierMask & CPControlKeyMask || self._keyEquivalentModifierMask & CPCommandKeyMask)
            string = "Ctrl-" + string;
    }
    return string;
}
,["CPString"]), new objj_method(sel_getUid("setMnemonicLocation:"), function $CPMenuItem__setMnemonicLocation_(self, _cmd, aLocation)
{
    self._mnemonicLocation = aLocation;
}
,["void","unsigned"]), new objj_method(sel_getUid("mnemonicLocation"), function $CPMenuItem__mnemonicLocation(self, _cmd)
{
    return self._mnemonicLocation;
}
,["unsigned"]), new objj_method(sel_getUid("setTitleWithMnemonicLocation:"), function $CPMenuItem__setTitleWithMnemonicLocation_(self, _cmd, aTitle)
{
    var location = objj_msgSend(aTitle, "rangeOfString:", "&").location;
    if (location == CPNotFound)
        objj_msgSend(self, "setTitle:", aTitle);
    else
    {
        objj_msgSend(self, "setTitle:", objj_msgSend(aTitle, "substringToIndex:", location) + objj_msgSend(aTitle, "substringFromIndex:", location + 1));
        objj_msgSend(self, "setMnemonicLocation:", location);
    }
}
,["void","CPString"]), new objj_method(sel_getUid("mnemonic"), function $CPMenuItem__mnemonic(self, _cmd)
{
    return self._mnemonicLocation == CPNotFound ? "" : objj_msgSend(self._title, "characterAtIndex:", self._mnemonicLocation);
}
,["CPString"]), new objj_method(sel_getUid("setAlternate:"), function $CPMenuItem__setAlternate_(self, _cmd, isAlternate)
{
    self._isAlternate = isAlternate;
}
,["void","BOOL"]), new objj_method(sel_getUid("isAlternate"), function $CPMenuItem__isAlternate(self, _cmd)
{
    return self._isAlternate;
}
,["BOOL"]), new objj_method(sel_getUid("setIndentationLevel:"), function $CPMenuItem__setIndentationLevel_(self, _cmd, aLevel)
{
    if (aLevel < 0)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "setIndentationLevel: argument must be greater than or equal to 0.");
    self._indentationLevel = MIN(15, aLevel);
}
,["void","unsigned"]), new objj_method(sel_getUid("indentationLevel"), function $CPMenuItem__indentationLevel(self, _cmd)
{
    return self._indentationLevel;
}
,["unsigned"]), new objj_method(sel_getUid("setToolTip:"), function $CPMenuItem__setToolTip_(self, _cmd, aToolTip)
{
    self._toolTip = aToolTip;
}
,["void","CPString"]), new objj_method(sel_getUid("toolTip"), function $CPMenuItem__toolTip(self, _cmd)
{
    return self._toolTip;
}
,["CPString"]), new objj_method(sel_getUid("setRepresentedObject:"), function $CPMenuItem__setRepresentedObject_(self, _cmd, anObject)
{
    self._representedObject = anObject;
}
,["void","id"]), new objj_method(sel_getUid("representedObject"), function $CPMenuItem__representedObject(self, _cmd)
{
    return self._representedObject;
}
,["id"]), new objj_method(sel_getUid("setView:"), function $CPMenuItem__setView_(self, _cmd, aView)
{
    if (self._view === aView)
        return;
    self._view = aView;
    objj_msgSend(self._menuItemView, "setDirty");
    objj_msgSend(self._menu, "itemChanged:", self);
}
,["void","CPView"]), new objj_method(sel_getUid("view"), function $CPMenuItem__view(self, _cmd)
{
    return self._view;
}
,["CPView"]), new objj_method(sel_getUid("isHighlighted"), function $CPMenuItem__isHighlighted(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self, "menu"), "highlightedItem") == self;
}
,["BOOL"]), new objj_method(sel_getUid("copy"), function $CPMenuItem__copy(self, _cmd)
{
    var item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "init");
    item._isSeparator = self._isSeparator;
    objj_msgSend(item, "setTitle:", self._title);
    objj_msgSend(item, "setFont:", self._font);
    objj_msgSend(item, "setTarget:", self._target);
    objj_msgSend(item, "setAction:", self._action);
    objj_msgSend(item, "setEnabled:", self._isEnabled);
    objj_msgSend(item, "setHidden:", self._isHidden);
    objj_msgSend(item, "setTag:", self._tag);
    objj_msgSend(item, "setState:", self._state);
    objj_msgSend(item, "setImage:", self._image);
    objj_msgSend(item, "setAlternateImage:", self._alternateImage);
    objj_msgSend(item, "setOnStateImage:", self._onStateImage);
    objj_msgSend(item, "setOffStateImage:", self._offStateImage);
    objj_msgSend(item, "setMixedStateImage:", self._mixedStateImage);
    objj_msgSend(item, "setKeyEquivalent:", self._keyEquivalent);
    objj_msgSend(item, "setKeyEquivalentModifierMask:", self._keyEquivalentModifierMask);
    objj_msgSend(item, "setMnemonicLocation:", self._mnemonicLocation);
    objj_msgSend(item, "setAlternate:", self._isAlternate);
    objj_msgSend(item, "setIndentationLevel:", self._indentationLevel);
    objj_msgSend(item, "setToolTip:", self._toolTip);
    objj_msgSend(item, "setRepresentedObject:", self._representedObject);
    return item;
}
,["id"]), new objj_method(sel_getUid("mutableCopy"), function $CPMenuItem__mutableCopy(self, _cmd)
{
    return objj_msgSend(self, "copy");
}
,["id"]), new objj_method(sel_getUid("_menuItemView"), function $CPMenuItem___menuItemView(self, _cmd)
{
    if (!self._menuItemView)
        self._menuItemView = objj_msgSend(objj_msgSend(_CPMenuItemView, "alloc"), "initWithFrame:forMenuItem:", CGRectMakeZero(), self);
    return self._menuItemView;
}
,["id"]), new objj_method(sel_getUid("_isSelectable"), function $CPMenuItem___isSelectable(self, _cmd)
{
    return !objj_msgSend(self, "submenu") || objj_msgSend(self, "action") !== sel_getUid("submenuAction:") || objj_msgSend(self, "target") !== objj_msgSend(self, "menu");
}
,["BOOL"]), new objj_method(sel_getUid("_isMenuBarButton"), function $CPMenuItem___isMenuBarButton(self, _cmd)
{
    return !objj_msgSend(self, "submenu") && objj_msgSend(self, "menu") === objj_msgSend(CPApp, "mainMenu");
}
,["BOOL"]), new objj_method(sel_getUid("description"), function $CPMenuItem__description(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMenuItem").super_class }, "description") + " target: " + objj_msgSend(self, "target") + " action: " + CPStringFromSelector(objj_msgSend(self, "action"));
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPMenuItem___binderClassForBinding_(self, _cmd, aBinding)
{
    if (objj_msgSend(aBinding, "hasPrefix:", CPEnabledBinding))
        return objj_msgSend(CPMultipleValueAndBinding, "class");
    else if (aBinding === CPTargetBinding || objj_msgSend(aBinding, "hasPrefix:", CPArgumentBinding))
        return objj_msgSend(CPActionBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPMenuItem").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("separatorItem"), function $CPMenuItem__separatorItem(self, _cmd)
{
    var separatorItem = objj_msgSend(objj_msgSend(self, "alloc"), "initWithTitle:action:keyEquivalent:", "", nil, nil);
    separatorItem._isSeparator = YES;
    return separatorItem;
}
,["CPMenuItem"])]);
}var CPMenuItemIsSeparatorKey = "CPMenuItemIsSeparatorKey",
    CPMenuItemTitleKey = "CPMenuItemTitleKey",
    CPMenuItemTargetKey = "CPMenuItemTargetKey",
    CPMenuItemActionKey = "CPMenuItemActionKey",
    CPMenuItemIsEnabledKey = "CPMenuItemIsEnabledKey",
    CPMenuItemIsHiddenKey = "CPMenuItemIsHiddenKey",
    CPMenuItemTagKey = "CPMenuItemTagKey",
    CPMenuItemStateKey = "CPMenuItemStateKey",
    CPMenuItemImageKey = "CPMenuItemImageKey",
    CPMenuItemAlternateImageKey = "CPMenuItemAlternateImageKey",
    CPMenuItemSubmenuKey = "CPMenuItemSubmenuKey",
    CPMenuItemMenuKey = "CPMenuItemMenuKey",
    CPMenuItemKeyEquivalentKey = "CPMenuItemKeyEquivalentKey",
    CPMenuItemKeyEquivalentModifierMaskKey = "CPMenuItemKeyEquivalentModifierMaskKey",
    CPMenuItemIndentationLevelKey = "CPMenuItemIndentationLevelKey",
    CPMenuItemRepresentedObjectKey = "CPMenuItemRepresentedObjectKey",
    CPMenuItemViewKey = "CPMenuItemViewKey";
{
var the_class = objj_getClass("CPMenuItem")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPMenuItem\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPMenuItem__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPMenuItem").super_class }, "init");
    if (self)
    {
        self._changeCount = 0;
        self._isSeparator = objj_msgSend(aCoder, "containsValueForKey:", CPMenuItemIsSeparatorKey) && objj_msgSend(aCoder, "decodeBoolForKey:", CPMenuItemIsSeparatorKey);
        self._title = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemTitleKey);
        self._target = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemTargetKey);
        self._action = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemActionKey);
        self._isEnabled = objj_msgSend(aCoder, "containsValueForKey:", CPMenuItemIsEnabledKey) ? objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemIsEnabledKey) : YES;
        self._isHidden = objj_msgSend(aCoder, "decodeBoolForKey:", CPMenuItemIsHiddenKey);
        self._tag = objj_msgSend(aCoder, "decodeIntForKey:", CPMenuItemTagKey);
        self._state = objj_msgSend(aCoder, "decodeIntForKey:", CPMenuItemStateKey);
        self._image = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemImageKey);
        self._alternateImage = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemAlternateImageKey);
        self._menu = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemMenuKey);
        objj_msgSend(self, "setSubmenu:", objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemSubmenuKey));
        self._keyEquivalent = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemKeyEquivalentKey) || "";
        self._keyEquivalentModifierMask = objj_msgSend(aCoder, "decodeIntForKey:", CPMenuItemKeyEquivalentModifierMaskKey);
        objj_msgSend(self, "setIndentationLevel:", objj_msgSend(aCoder, "decodeIntForKey:", CPMenuItemIndentationLevelKey));
        self._representedObject = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemRepresentedObjectKey);
        self._view = objj_msgSend(aCoder, "decodeObjectForKey:", CPMenuItemViewKey);
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPMenuItem__encodeWithCoder_(self, _cmd, aCoder)
{
    if (self._isSeparator)
        objj_msgSend(aCoder, "encodeBool:forKey:", self._isSeparator, CPMenuItemIsSeparatorKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._title, CPMenuItemTitleKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._target, CPMenuItemTargetKey);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._action, CPMenuItemActionKey);
    if (self._isEnabled !== YES)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._isEnabled, CPMenuItemIsEnabledKey);
    if (self._isHidden !== NO)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._isHidden, CPMenuItemIsHiddenKey);
    if (self._tag !== 0)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._tag, CPMenuItemTagKey);
    if (self._state !== CPOffState)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._state, CPMenuItemStateKey);
    if (self._image !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._image, CPMenuItemImageKey);
    if (self._alternateImage !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._alternateImage, CPMenuItemAlternateImageKey);
    if (self._submenu !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._submenu, CPMenuItemSubmenuKey);
    if (self._menu !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._menu, CPMenuItemMenuKey);
    if (self._keyEquivalent && self._keyEquivalent.length)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._keyEquivalent, CPMenuItemKeyEquivalentKey);
    if (self._keyEquivalentModifierMask)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._keyEquivalentModifierMask, CPMenuItemKeyEquivalentModifierMaskKey);
    if (self._indentationLevel > 0)
        objj_msgSend(aCoder, "encodeInt:forKey:", self._indentationLevel, CPMenuItemIndentationLevelKey);
    if (self._representedObject !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._representedObject, CPMenuItemRepresentedObjectKey);
    if (self._view !== nil)
        objj_msgSend(aCoder, "encodeObject:forKey:", self._view, CPMenuItemViewKey);
}
,["void","CPCoder"])]);
}p;27;_CPPredicateEditorRowNode.jt;6541;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;6470;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);{var the_class = objj_allocateClassPair(CPObject, "_CPPredicateEditorRowNode"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("tree"), new objj_ivar("templateViews"), new objj_ivar("copiedTemplateContainer"), new objj_ivar("children")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("tree"), function $_CPPredicateEditorRowNode__tree(self, _cmd)
{
    return self.tree;
}
,["_CPPredicateEditorTree"]), new objj_method(sel_getUid("setTree:"), function $_CPPredicateEditorRowNode__setTree_(self, _cmd, newValue)
{
    self.tree = newValue;
}
,["void","_CPPredicateEditorTree"]), new objj_method(sel_getUid("templateViews"), function $_CPPredicateEditorRowNode__templateViews(self, _cmd)
{
    return self.templateViews;
}
,["CPMutableArray"]), new objj_method(sel_getUid("setTemplateViews:"), function $_CPPredicateEditorRowNode__setTemplateViews_(self, _cmd, newValue)
{
    self.templateViews = newValue;
}
,["void","CPMutableArray"]), new objj_method(sel_getUid("copiedTemplateContainer"), function $_CPPredicateEditorRowNode__copiedTemplateContainer(self, _cmd)
{
    return self.copiedTemplateContainer;
}
,["CPMutableArray"]), new objj_method(sel_getUid("setCopiedTemplateContainer:"), function $_CPPredicateEditorRowNode__setCopiedTemplateContainer_(self, _cmd, newValue)
{
    self.copiedTemplateContainer = newValue;
}
,["void","CPMutableArray"]), new objj_method(sel_getUid("children"), function $_CPPredicateEditorRowNode__children(self, _cmd)
{
    return self.children;
}
,["CPArray"]), new objj_method(sel_getUid("setChildren:"), function $_CPPredicateEditorRowNode__setChildren_(self, _cmd, newValue)
{
    if (self.children !== newValue)
        self.children = objj_msgSend(newValue, "copy");
}
,["void","CPArray"]), new objj_method(sel_getUid("applyTemplate:withViews:forOriginalTemplate:"), function $_CPPredicateEditorRowNode__applyTemplate_withViews_forOriginalTemplate_(self, _cmd, template, views, originalTemplate)
{
    var t = objj_msgSend(self.tree, "template"),
        count = objj_msgSend(self.children, "count");
    if (t !== template)
    {
        objj_msgSend(self.templateViews, "setArray:", views);
        objj_msgSend(self.copiedTemplateContainer, "removeAllObjects");
        objj_msgSend(self.copiedTemplateContainer, "addObject:", template);
    }
    for (var i = 0; i < count; i++)
        objj_msgSend(self.children[i], "applyTemplate:withViews:forOriginalTemplate:", template, views, originalTemplate);
}
,["BOOL","id","id","id"]), new objj_method(sel_getUid("isEqual:"), function $_CPPredicateEditorRowNode__isEqual_(self, _cmd, node)
{
    if (!objj_msgSend(node, "isKindOfClass:", objj_msgSend(_CPPredicateEditorRowNode, "class")))
        return NO;
    return self.tree === objj_msgSend(node, "tree");
}
,["BOOL","id"]), new objj_method(sel_getUid("copyTemplateIfNecessary"), function $_CPPredicateEditorRowNode__copyTemplateIfNecessary(self, _cmd)
{
    if (objj_msgSend(self.copiedTemplateContainer, "count") === 0)
    {
        var copy = objj_msgSend(objj_msgSend(self.tree, "template"), "copy");
        objj_msgSend(self.copiedTemplateContainer, "addObject:", copy);
        objj_msgSend(self.templateViews, "addObjectsFromArray:", objj_msgSend(copy, "templateViews"));
    }
}
,["void"]), new objj_method(sel_getUid("templateView"), function $_CPPredicateEditorRowNode__templateView(self, _cmd)
{
    objj_msgSend(self, "copyTemplateIfNecessary");
    return objj_msgSend(self.templateViews, "objectAtIndex:", objj_msgSend(self.tree, "indexIntoTemplate"));
}
,["CPView"]), new objj_method(sel_getUid("templateForRow"), function $_CPPredicateEditorRowNode__templateForRow(self, _cmd)
{
    objj_msgSend(self, "copyTemplateIfNecessary");
    return objj_msgSend(self.copiedTemplateContainer, "lastObject");
}
,["id"]), new objj_method(sel_getUid("title"), function $_CPPredicateEditorRowNode__title(self, _cmd)
{
    return objj_msgSend(self.tree, "title");
}
,["CPString"]), new objj_method(sel_getUid("displayValue"), function $_CPPredicateEditorRowNode__displayValue(self, _cmd)
{
    var title = objj_msgSend(self, "title");
    if (title !== nil)
        return title;
    return objj_msgSend(self, "templateView");
}
,["id"]), new objj_method(sel_getUid("description"), function $_CPPredicateEditorRowNode__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "<%@ %@ %@ tree:%@ tviews:%@", objj_msgSend(self, "className"), objj_msgSend(self, "UID"), objj_msgSend(self, "title"), objj_msgSend(self.tree, "UID"), objj_msgSend(self.templateViews, "description"));
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("rowNodeFromTree:"), function $_CPPredicateEditorRowNode__rowNodeFromTree_(self, _cmd, aTree)
{
    return objj_msgSend(_CPPredicateEditorRowNode, "_rowNodeFromTree:withTemplateTable:", aTree, {});
}
,["id","id"]), new objj_method(sel_getUid("_rowNodeFromTree:withTemplateTable:"), function $_CPPredicateEditorRowNode___rowNodeFromTree_withTemplateTable_(self, _cmd, aTree, templateTable)
{
    var views,
        copiedContainer;
    var uuid = objj_msgSend(objj_msgSend(aTree, "template"), "UID"),
        cachedNode = templateTable[uuid],
        node = objj_msgSend(objj_msgSend(_CPPredicateEditorRowNode, "alloc"), "init");
    objj_msgSend(node, "setTree:", aTree);
    if (!cachedNode)
    {
        views = objj_msgSend(CPMutableArray, "array");
        copiedContainer = objj_msgSend(CPMutableArray, "array");
        templateTable[uuid] = node;
    }
    else
    {
        views = objj_msgSend(cachedNode, "templateViews");
        copiedContainer = objj_msgSend(cachedNode, "copiedTemplateContainer");
    }
    objj_msgSend(node, "setTemplateViews:", views);
    objj_msgSend(node, "setCopiedTemplateContainer:", copiedContainer);
    var nodeChildren = objj_msgSend(CPMutableArray, "array"),
        treeChildren = objj_msgSend(aTree, "children"),
        count = objj_msgSend(treeChildren, "count");
    for (var i = 0; i < count; i++)
    {
        var treeChild = treeChildren[i],
            child = objj_msgSend(_CPPredicateEditorRowNode, "_rowNodeFromTree:withTemplateTable:", treeChild, templateTable);
        objj_msgSend(nodeChildren, "addObject:", child);
    }
    objj_msgSend(node, "setChildren:", nodeChildren);
    return node;
}
,["id","id","id"])]);
}p;24;_CPPredicateEditorTree.jt;3199;@STATIC;1.0;I;21;Foundation/CPObject.jI;21;Foundation/CPString.jt;3128;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPString.j", NO);{var the_class = objj_allocateClassPair(CPObject, "_CPPredicateEditorTree"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("template"), new objj_ivar("title"), new objj_ivar("children"), new objj_ivar("indexIntoTemplate"), new objj_ivar("menuItemIndex")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("template"), function $_CPPredicateEditorTree__template(self, _cmd)
{
    return self.template;
}
,["CPPredicateEditorRowTemplate"]), new objj_method(sel_getUid("setTemplate:"), function $_CPPredicateEditorTree__setTemplate_(self, _cmd, newValue)
{
    self.template = newValue;
}
,["void","CPPredicateEditorRowTemplate"]), new objj_method(sel_getUid("title"), function $_CPPredicateEditorTree__title(self, _cmd)
{
    return self.title;
}
,["CPString"]), new objj_method(sel_getUid("setTitle:"), function $_CPPredicateEditorTree__setTitle_(self, _cmd, newValue)
{
    if (self.title !== newValue)
        self.title = objj_msgSend(newValue, "copy");
}
,["void","CPString"]), new objj_method(sel_getUid("children"), function $_CPPredicateEditorTree__children(self, _cmd)
{
    return self.children;
}
,["CPArray"]), new objj_method(sel_getUid("setChildren:"), function $_CPPredicateEditorTree__setChildren_(self, _cmd, newValue)
{
    if (self.children !== newValue)
        self.children = objj_msgSend(newValue, "copy");
}
,["void","CPArray"]), new objj_method(sel_getUid("indexIntoTemplate"), function $_CPPredicateEditorTree__indexIntoTemplate(self, _cmd)
{
    return self.indexIntoTemplate;
}
,["CPInteger"]), new objj_method(sel_getUid("setIndexIntoTemplate:"), function $_CPPredicateEditorTree__setIndexIntoTemplate_(self, _cmd, newValue)
{
    self.indexIntoTemplate = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("menuItemIndex"), function $_CPPredicateEditorTree__menuItemIndex(self, _cmd)
{
    return self.menuItemIndex;
}
,["CPInteger"]), new objj_method(sel_getUid("setMenuItemIndex:"), function $_CPPredicateEditorTree__setMenuItemIndex_(self, _cmd, newValue)
{
    self.menuItemIndex = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("copy"), function $_CPPredicateEditorTree__copy(self, _cmd)
{
    var tree = objj_msgSend(objj_msgSend(_CPPredicateEditorTree, "alloc"), "init");
    objj_msgSend(tree, "setTemplate:", self.template);
    objj_msgSend(tree, "setTitle:", self.title);
    objj_msgSend(tree, "setMenuItemIndex:", self.menuItemIndex);
    objj_msgSend(tree, "setIndexIntoTemplate:", self.indexIntoTemplate);
    objj_msgSend(tree, "setChildren:", self.children);
    return tree;
}
,["id"]), new objj_method(sel_getUid("description"), function $_CPPredicateEditorTree__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "<%@: %p (%@) [%d-%d] T:%p at:%d> [\r%@\r]", objj_msgSend(self, "className"), self, self.title, self.indexIntoTemplate, self.menuItemIndex, self.template, objj_msgSend(self.template, "rightExpressionAttributeType"), self.children);
}
,["CPString"])]);
}p;24;_CPRuleEditorLocalizer.jt;3361;@STATIC;1.0;I;21;Foundation/CPObject.jI;25;Foundation/CPDictionary.jI;21;Foundation/CPString.jI;28;Foundation/CPURLConnection.jI;25;Foundation/CPURLRequest.jt;3197;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPString.j", NO);objj_executeFile("Foundation/CPURLConnection.j", NO);objj_executeFile("Foundation/CPURLRequest.j", NO);var LocalizerStringsRegex = new RegExp("\"(.+)\"\\s*=\\s*\"(.+)\"\\s*;\\s*(//.+)?");
{var the_class = objj_allocateClassPair(CPObject, "_CPRuleEditorLocalizer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_dictionary"), new objj_ivar("connection"), new objj_ivar("request")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("dictionary"), function $_CPRuleEditorLocalizer__dictionary(self, _cmd)
{
    return self._dictionary;
}
,["CPDictionary"]), new objj_method(sel_getUid("setDictionary:"), function $_CPRuleEditorLocalizer__setDictionary_(self, _cmd, newValue)
{
    self._dictionary = newValue;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("loadContentOfURL:"), function $_CPRuleEditorLocalizer__loadContentOfURL_(self, _cmd, aURL)
{
    self.request = objj_msgSend(CPURLRequest, "requestWithURL:", aURL);
    self.connection = objj_msgSend(CPURLConnection, "connectionWithRequest:delegate:", self.request, self);
}
,["void","CPURL"]), new objj_method(sel_getUid("reloadIfNeeded"), function $_CPRuleEditorLocalizer__reloadIfNeeded(self, _cmd)
{
    if (self.connection !== nil)
    {
        self.connection = nil;
        var data = objj_msgSend(CPURLConnection, "sendSynchronousRequest:returningResponse:", self.request, NULL);
        objj_msgSend(self, "loadContent:", objj_msgSend(data, "rawString"));
    }
}
,["void"]), new objj_method(sel_getUid("connection:didReceiveData:"), function $_CPRuleEditorLocalizer__connection_didReceiveData_(self, _cmd, aConnection, rawString)
{
    if (self.connection !== nil && rawString !== nil)
        objj_msgSend(self, "loadContent:", rawString);
    self.connection = nil;
}
,["void","CPURLConnection","CPString"]), new objj_method(sel_getUid("loadContent:"), function $_CPRuleEditorLocalizer__loadContent_(self, _cmd, aContent)
{
    var dict = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init"),
        lines = objj_msgSend(aContent, "componentsSeparatedByString:", "\n"),
        count = objj_msgSend(lines, "count");
    for (var i = 0; i < count; i++)
    {
        var line = objj_msgSend(lines, "objectAtIndex:", i);
        if (line.length > 1)
        {
            var match = LocalizerStringsRegex.exec(line);
            if (match && match.length >= 3)
                objj_msgSend(dict, "setObject:forKey:", match[2], match[1]);
        }
    }
    self._dictionary = objj_msgSend(CPDictionary, "dictionaryWithDictionary:", dict);
}
,["void","CPString"]), new objj_method(sel_getUid("localizedStringForString:"), function $_CPRuleEditorLocalizer__localizedStringForString_(self, _cmd, aString)
{
    objj_msgSend(self, "reloadIfNeeded");
    if (self._dictionary !== nil && aString !== nil)
    {
        var localized = objj_msgSend(self._dictionary, "objectForKey:", aString);
        if (localized !== nil)
            return localized;
    }
    return aString;
}
,["CPString","CPString"])]);
}p;26;_CPRuleEditorPopUpButton.jt;7289;@STATIC;1.0;i;14;CPBezierPath.ji;15;CPPopUpButton.jt;7231;objj_executeFile("CPBezierPath.j", YES);objj_executeFile("CPPopUpButton.j", YES);var GRADIENT_START_COLOR = "#fcfcfc",
    GRADIENT_END_COLOR = "#dfdfdf",
    BORDER_COLOR = "#BDBDBD";
var GRADIENT_NORMAL,
    GRADIENT_HIGHLIGHTED,
    GRADIENT_PROPERTY;
if (CPBrowserIsEngine(CPWebKitBrowserEngine))
{
    (GRADIENT_NORMAL = "-webkit-gradient(linear, left top, left bottom, from(" + GRADIENT_START_COLOR + "), to(" + GRADIENT_END_COLOR + "))", GRADIENT_HIGHLIGHTED = "-webkit-gradient(linear, left top, left bottom, from(" + GRADIENT_END_COLOR + "), to(" + GRADIENT_START_COLOR + "))");
    GRADIENT_PROPERTY = "background";
}else if (CPBrowserIsEngine(CPGeckoBrowserEngine))
{
    (GRADIENT_NORMAL = "-moz-linear-gradient(top, " + GRADIENT_START_COLOR + ", " + GRADIENT_END_COLOR + ")", GRADIENT_HIGHLIGHTED = "-moz-linear-gradient(top, " + GRADIENT_END_COLOR + ", " + GRADIENT_START_COLOR + ")");
    GRADIENT_PROPERTY = "background";
}else if (CPBrowserIsEngine(CPInternetExplorerBrowserEngine))
{
    GRADIENT_NORMAL = "progid:DXImageTransform.Microsoft.gradient(startColorstr='" + GRADIENT_START_COLOR + "', endColorstr='" + GRADIENT_END_COLOR + "')";
    GRADIENT_HIGHLIGHTED = "progid:DXImageTransform.Microsoft.gradient(startColorstr='" + GRADIENT_END_COLOR + "', endColorstr='" + GRADIENT_START_COLOR + "')";
    GRADIENT_PROPERTY = "filter";
}else
{
    GRADIENT_NORMAL = GRADIENT_START_COLOR;
    GRADIENT_HIGHLIGHTED = GRADIENT_END_COLOR;
    GRADIENT_PROPERTY = "background";
}{var the_class = objj_allocateClassPair(CPPopUpButton, "_CPRuleEditorPopUpButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("radius")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_sharedInit"), function $_CPRuleEditorPopUpButton___sharedInit(self, _cmd)
{
    objj_msgSend(self, "setBordered:", NO);
    var style = self._DOMElement.style;
    style.border = "1px solid " + BORDER_COLOR;
    style[GRADIENT_PROPERTY] = GRADIENT_NORMAL;
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPRuleEditorPopUpButton__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class }, "initWithFrame:", aFrame))
        objj_msgSend(self, "_sharedInit");
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPRuleEditorPopUpButton__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class }, "initWithCoder:", aCoder);
    objj_msgSend(self, "_sharedInit");
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("hitTest:"), function $_CPRuleEditorPopUpButton__hitTest_(self, _cmd, point)
{
    if (!CGRectContainsPoint(objj_msgSend(self, "frame"), point) || !objj_msgSend(self, "sliceIsEditable"))
        return nil;
    return self;
}
,["id","CGPoint"]), new objj_method(sel_getUid("sliceIsEditable"), function $_CPRuleEditorPopUpButton__sliceIsEditable(self, _cmd)
{
    var superview = objj_msgSend(self, "superview");
    return !objj_msgSend(superview, "isKindOfClass:", [_CPRuleEditorViewSlice]) || objj_msgSend(superview, "isEditable");
}
,["BOOL"]), new objj_method(sel_getUid("trackMouse:"), function $_CPRuleEditorPopUpButton__trackMouse_(self, _cmd, theEvent)
{
    if (!objj_msgSend(self, "sliceIsEditable"))
        return NO;
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class }, "trackMouse:", theEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("contentRectForBounds:"), function $_CPRuleEditorPopUpButton__contentRectForBounds_(self, _cmd, bounds)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class }, "contentRectForBounds:", bounds);
    contentRect.origin.x += self.radius;
    contentRect.size.width -= 2 * self.radius;
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPRuleEditorPopUpButton__layoutSubviews(self, _cmd)
{
    self.radius = FLOOR(CGRectGetHeight(objj_msgSend(self, "bounds")) / 2);
    var style = self._DOMElement.style,
        radiusCSS = self.radius + "px";
    style.borderRadius = radiusCSS;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorPopUpButton").super_class }, "layoutSubviews");
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPRuleEditorPopUpButton__drawRect_(self, _cmd, aRect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        bounds = objj_msgSend(self, "bounds"),
        arrow_width = FLOOR(CGRectGetHeight(bounds) / 3.5);
    CGContextTranslateCTM(context, CGRectGetWidth(bounds) - self.radius - arrow_width, CGRectGetHeight(bounds) / 2);
    var arrowsPath = objj_msgSend(CPBezierPath, "bezierPath");
    objj_msgSend(arrowsPath, "moveToPoint:", CGPointMake(0, 1));
    objj_msgSend(arrowsPath, "lineToPoint:", CGPointMake(arrow_width, 1));
    objj_msgSend(arrowsPath, "lineToPoint:", CGPointMake(arrow_width / 2, arrow_width + 1));
    objj_msgSend(arrowsPath, "closePath");
    CGContextSetFillColor(context, objj_msgSend(CPColor, "colorWithWhite:alpha:", 101 / 255, 1));
    objj_msgSend(arrowsPath, "fill");
    CGContextScaleCTM(context, 1, -1);
    objj_msgSend(arrowsPath, "fill");
}
,["void","CGRect"])]);
}{var the_class = objj_allocateClassPair(CPButton, "_CPRuleEditorButton"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("radius")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_sharedInit"), function $_CPRuleEditorButton___sharedInit(self, _cmd)
{
    objj_msgSend(self, "setBordered:", NO);
    var style = self._DOMElement.style;
    style.border = "1px solid " + BORDER_COLOR;
    style[GRADIENT_PROPERTY] = GRADIENT_NORMAL;
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $_CPRuleEditorButton__initWithFrame_(self, _cmd, aFrame)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorButton").super_class }, "initWithFrame:", aFrame))
        objj_msgSend(self, "_sharedInit");
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPRuleEditorButton__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorButton").super_class }, "initWithCoder:", aCoder);
    objj_msgSend(self, "_sharedInit");
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPRuleEditorButton__layoutSubviews(self, _cmd)
{
    self.radius = FLOOR(CGRectGetHeight(objj_msgSend(self, "bounds")) / 2);
    var style = self._DOMElement.style,
        radiusCSS = self.radius + "px";
    style.borderRadius = radiusCSS;
    style[GRADIENT_PROPERTY] = objj_msgSend(self, "isHighlighted") ? GRADIENT_HIGHLIGHTED : GRADIENT_NORMAL;
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorButton").super_class }, "layoutSubviews");
}
,["void"])]);
}p;24;_CPRuleEditorViewSlice.jt;6273;@STATIC;1.0;i;8;CPView.jt;6242;objj_executeFile("CPView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPRuleEditorViewSlice"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_ruleEditor"), new objj_ivar("_indentation"), new objj_ivar("_rowIndex"), new objj_ivar("_animationTargetRect"), new objj_ivar("_selected"), new objj_ivar("_lastSelected"), new objj_ivar("_backgroundColor"), new objj_ivar("_editable")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("indentation"), function $_CPRuleEditorViewSlice__indentation(self, _cmd)
{
    return self._indentation;
}
,["int"]), new objj_method(sel_getUid("setIndentation:"), function $_CPRuleEditorViewSlice__setIndentation_(self, _cmd, newValue)
{
    self._indentation = newValue;
}
,["void","int"]), new objj_method(sel_getUid("rowIndex"), function $_CPRuleEditorViewSlice__rowIndex(self, _cmd)
{
    return self._rowIndex;
}
,["int"]), new objj_method(sel_getUid("setRowIndex:"), function $_CPRuleEditorViewSlice__setRowIndex_(self, _cmd, newValue)
{
    self._rowIndex = newValue;
}
,["void","int"]), new objj_method(sel_getUid("_animationTargetRect"), function $_CPRuleEditorViewSlice___animationTargetRect(self, _cmd)
{
    return self._animationTargetRect;
}
,["CGRect"]), new objj_method(sel_getUid("_setAnimationTargetRect:"), function $_CPRuleEditorViewSlice___setAnimationTargetRect_(self, _cmd, newValue)
{
    self._animationTargetRect = newValue;
}
,["void","CGRect"]), new objj_method(sel_getUid("_isSelected"), function $_CPRuleEditorViewSlice___isSelected(self, _cmd)
{
    return self._selected;
}
,["BOOL"]), new objj_method(sel_getUid("_setSelected:"), function $_CPRuleEditorViewSlice___setSelected_(self, _cmd, newValue)
{
    self._selected = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("_isLastSelected"), function $_CPRuleEditorViewSlice___isLastSelected(self, _cmd)
{
    return self._lastSelected;
}
,["BOOL"]), new objj_method(sel_getUid("_setLastSelected:"), function $_CPRuleEditorViewSlice___setLastSelected_(self, _cmd, newValue)
{
    self._lastSelected = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("backgroundColor"), function $_CPRuleEditorViewSlice__backgroundColor(self, _cmd)
{
    return self._backgroundColor;
}
,["CPColor"]), new objj_method(sel_getUid("setBackgroundColor:"), function $_CPRuleEditorViewSlice__setBackgroundColor_(self, _cmd, newValue)
{
    self._backgroundColor = newValue;
}
,["void","CPColor"]), new objj_method(sel_getUid("isEditable"), function $_CPRuleEditorViewSlice__isEditable(self, _cmd)
{
    return self._editable;
}
,["BOOL"]), new objj_method(sel_getUid("setEditable:"), function $_CPRuleEditorViewSlice__setEditable_(self, _cmd, newValue)
{
    self._editable = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("removeFromSuperview"), function $_CPRuleEditorViewSlice__removeFromSuperview(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSlice").super_class }, "removeFromSuperview");
}
,["void"]), new objj_method(sel_getUid("initWithFrame:ruleEditorView:"), function $_CPRuleEditorViewSlice__initWithFrame_ruleEditorView_(self, _cmd, frame, editor)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSlice").super_class }, "initWithFrame:", frame))
    {
        self._ruleEditor = editor;
        self._selected = NO;
        self._lastSelected = NO;
    }
    return self;
}
,["id","CGRect","id"]), new objj_method(sel_getUid("_setSelected:"), function $_CPRuleEditorViewSlice___setSelected_(self, _cmd, select)
{
    if (select == self._selected)
        return;
    var selector = select ? sel_getUid("setThemeState:") : sel_getUid("unsetThemeState:");
    objj_msgSend(objj_msgSend(self, "subviews"), "makeObjectsPerformSelector:withObject:", selector, CPThemeStateSelectedDataView);
    self._selected = select;
}
,["void","BOOL"]), new objj_method(sel_getUid("drawRect:"), function $_CPRuleEditorViewSlice__drawRect_(self, _cmd, rect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        bounds = objj_msgSend(self, "bounds"),
        maxX = CGRectGetWidth(bounds),
        maxY = CGRectGetHeight(bounds);
    if (objj_msgSend(self, "_isSelected"))
        self._backgroundColor = objj_msgSend(self._ruleEditor, "_selectedRowColor");
    else
    {
        var colors = objj_msgSend(self._ruleEditor, "_backgroundColors"),
            count = objj_msgSend(colors, "count");
        self._backgroundColor = objj_msgSend(colors, "objectAtIndex:", self._rowIndex % count);
    }
    CGContextSetFillColor(context, self._backgroundColor);
    CGContextFillRect(context, rect);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 0, 0);
    CGContextAddLineToPoint(context, maxX, 0);
    CGContextSetStrokeColor(context, objj_msgSend(self._ruleEditor, "_sliceTopBorderColor"));
    CGContextStrokePath(context);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, 0, maxY);
    CGContextAddLineToPoint(context, maxX, maxY);
    var bottomColor = self._rowIndex == objj_msgSend(self._ruleEditor, "_lastRow") ? objj_msgSend(self._ruleEditor, "_sliceLastBottomBorderColor") : objj_msgSend(self._ruleEditor, "_sliceBottomBorderColor");
    CGContextSetStrokeColor(context, bottomColor);
    CGContextStrokePath(context);
}
,["void","CGRect"]), new objj_method(sel_getUid("mouseDown:"), function $_CPRuleEditorViewSlice__mouseDown_(self, _cmd, theEvent)
{
    if (self._editable)
        objj_msgSend(self._ruleEditor, "_mouseDownOnSlice:withEvent:", self, theEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("mouseUp:"), function $_CPRuleEditorViewSlice__mouseUp_(self, _cmd, theEvent)
{
    if (self._editable)
        objj_msgSend(self._ruleEditor, "_mouseUpOnSlice:withEvent:", self, theEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("description"), function $_CPRuleEditorViewSlice__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "<%@ %p index:%d indentation:%d>", objj_msgSend(self, "className"), self, objj_msgSend(self, "rowIndex"), objj_msgSend(self, "indentation"));
}
,["CPString"])]);
}p;27;_CPRuleEditorViewSliceRow.jt;23269;@STATIC;1.0;i;24;CPRuleEditor_Constants.ji;24;_CPRuleEditorViewSlice.ji;26;_CPRuleEditorPopUpButton.jt;23160;objj_executeFile("CPRuleEditor_Constants.j", YES);objj_executeFile("_CPRuleEditorViewSlice.j", YES);objj_executeFile("_CPRuleEditorPopUpButton.j", YES);var CONTROL_HEIGHT = 16.,
    BUTTON_HEIGHT = 16.;
{var the_class = objj_allocateClassPair(_CPRuleEditorViewSlice, "_CPRuleEditorViewSliceRow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_ruleOptionViews"), new objj_ivar("_ruleOptionFrames"), new objj_ivar("_correspondingRuleItems"), new objj_ivar("_ruleOptionInitialViewFrames"), new objj_ivar("_addButton"), new objj_ivar("_subtractButton"), new objj_ivar("_rowType"), new objj_ivar("_plusButtonRowType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_rowType"), function $_CPRuleEditorViewSliceRow___rowType(self, _cmd)
{
    return self._rowType;
}
,["CPRuleEditorRowType"]), new objj_method(sel_getUid("_setRowType:"), function $_CPRuleEditorViewSliceRow___setRowType_(self, _cmd, newValue)
{
    self._rowType = newValue;
}
,["void","CPRuleEditorRowType"]), new objj_method(sel_getUid("initWithFrame:ruleEditorView:"), function $_CPRuleEditorViewSliceRow__initWithFrame_ruleEditorView_(self, _cmd, frame, editor)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class }, "initWithFrame:ruleEditorView:", frame, editor))
        objj_msgSend(self, "_initShared");
    return self;
}
,["id","CGRect","id"]), new objj_method(sel_getUid("_initShared"), function $_CPRuleEditorViewSliceRow___initShared(self, _cmd)
{
    self._correspondingRuleItems = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
    self._ruleOptionFrames = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
    self._ruleOptionInitialViewFrames = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
    self._ruleOptionViews = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
    self._editable = objj_msgSend(self._ruleEditor, "isEditable");
    self._addButton = objj_msgSend(self, "_createAddRowButton");
    self._subtractButton = objj_msgSend(self, "_createDeleteRowButton");
    objj_msgSend(self._addButton, "setToolTip:", objj_msgSend(self._ruleEditor, "_toolTipForAddSimpleRowButton"));
    objj_msgSend(self._subtractButton, "setToolTip:", objj_msgSend(self._ruleEditor, "_toolTipForDeleteRowButton"));
    objj_msgSend(self._addButton, "setHidden:", !self._editable);
    objj_msgSend(self._subtractButton, "setHidden:", !self._editable);
    objj_msgSend(self, "addSubview:", self._addButton);
    objj_msgSend(self, "addSubview:", self._subtractButton);
    objj_msgSend(self, "setAutoresizingMask:", CPViewWidthSizable);
    var center = objj_msgSend(CPNotificationCenter, "defaultCenter");
    objj_msgSend(center, "addObserver:selector:name:object:", self, sel_getUid("_textDidChange:"), CPControlTextDidChangeNotification, nil);
}
,["void"]), new objj_method(sel_getUid("_createRowButton"), function $_CPRuleEditorViewSliceRow___createRowButton(self, _cmd)
{
    var button = objj_msgSend(objj_msgSend(_CPRuleEditorButton, "alloc"), "initWithFrame:", CGRectMakeZero());
    objj_msgSend(button, "setFont:", objj_msgSend(CPFont, "boldFontWithName:size:", "Apple Symbol", 12.0));
    objj_msgSend(button, "setTextColor:", objj_msgSend(CPColor, "colorWithWhite:alpha:", 150 / 255, 1));
    objj_msgSend(button, "setAlignment:", CPCenterTextAlignment);
    objj_msgSend(button, "setAutoresizingMask:", CPViewMinXMargin);
    objj_msgSend(button, "setImagePosition:", CPImageOnly);
    return button;
}
,["CPButton"]), new objj_method(sel_getUid("_createAddRowButton"), function $_CPRuleEditorViewSliceRow___createAddRowButton(self, _cmd)
{
    var button = objj_msgSend(self, "_createRowButton");
    objj_msgSend(button, "setImage:", objj_msgSend(self._ruleEditor, "_addImage"));
    objj_msgSend(button, "setAction:", sel_getUid("_addOption:"));
    objj_msgSend(button, "setTarget:", self);
    return button;
}
,["CPButton"]), new objj_method(sel_getUid("_createDeleteRowButton"), function $_CPRuleEditorViewSliceRow___createDeleteRowButton(self, _cmd)
{
    var button = objj_msgSend(self, "_createRowButton");
    objj_msgSend(button, "setImage:", objj_msgSend(self._ruleEditor, "_removeImage"));
    objj_msgSend(button, "setAction:", sel_getUid("_deleteOption:"));
    objj_msgSend(button, "setTarget:", self);
    return button;
}
,["CPButton"]), new objj_method(sel_getUid("_createMenuItemWithTitle:"), function $_CPRuleEditorViewSliceRow___createMenuItemWithTitle_(self, _cmd, title)
{
    title = objj_msgSend(objj_msgSend(self._ruleEditor, "standardLocalizer"), "localizedStringForString:", title);
    var mItem = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", title, nil, "");
    return mItem;
}
,["CPMenuItem","CPString"]), new objj_method(sel_getUid("_createPopUpButtonWithItems:selectedItemIndex:"), function $_CPRuleEditorViewSliceRow___createPopUpButtonWithItems_selectedItemIndex_(self, _cmd, itemsArray, index)
{
    var title = objj_msgSend(objj_msgSend(itemsArray, "objectAtIndex:", index), "title"),
        font = objj_msgSend(self._ruleEditor, "font"),
        width = objj_msgSend(title, "sizeWithFont:", font).width + 20,
        rect = CGRectMake(0, 0, width - width % 40 + 80, CONTROL_HEIGHT),
        popup = objj_msgSend(objj_msgSend(_CPRuleEditorPopUpButton, "alloc"), "initWithFrame:", rect);
    objj_msgSend(popup, "setTextColor:", objj_msgSend(CPColor, "colorWithWhite:alpha:", 101 / 255, 1));
    objj_msgSend(popup, "setValue:forThemeAttribute:", font, "font");
    var count = objj_msgSend(itemsArray, "count");
    for (var i = 0; i < count; i++)
        objj_msgSend(popup, "addItem:", objj_msgSend(itemsArray, "objectAtIndex:", i));
    objj_msgSend(popup, "selectItemAtIndex:", index);
    return popup;
}
,["CPPopUpButton","CPArray","int"]), new objj_method(sel_getUid("_createMenuSeparatorItem"), function $_CPRuleEditorViewSliceRow___createMenuSeparatorItem(self, _cmd)
{
    return objj_msgSend(CPMenuItem, "separatorItem");
}
,["CPMenuItem"]), new objj_method(sel_getUid("_createStaticTextFieldWithStringValue:"), function $_CPRuleEditorViewSliceRow___createStaticTextFieldWithStringValue_(self, _cmd, text)
{
    var textField = objj_msgSend(objj_msgSend(_CPRuleEditorTextField, "alloc"), "initWithFrame:", CGRectMakeZero()),
        ruleEditorFont = objj_msgSend(self._ruleEditor, "font"),
        font = objj_msgSend(CPFont, "fontWithName:size:", objj_msgSend(ruleEditorFont, "familyName"), objj_msgSend(ruleEditorFont, "size") + 2),
        localizedText = objj_msgSend(objj_msgSend(self._ruleEditor, "standardLocalizer"), "localizedStringForString:", text),
        size = objj_msgSend(localizedText, "sizeWithFont:", font);
    objj_msgSend(textField, "setFrameSize:", CGSizeMake(size.width + 4, CONTROL_HEIGHT + 2));
    objj_msgSend(textField, "setValue:forThemeAttribute:", font, "font");
    objj_msgSend(textField, "setStringValue:", localizedText);
    return textField;
}
,["_CPRuleEditorTextField","CPString"]), new objj_method(sel_getUid("_addOption:"), function $_CPRuleEditorViewSliceRow___addOption_(self, _cmd, sender)
{
    if (self._rowIndex == objj_msgSend(self._ruleEditor, "numberOfRows") - 1)
        objj_msgSend(self, "setNeedsDisplay:", YES);
    var type = self._plusButtonRowType;
    if (objj_msgSend(self._ruleEditor, "nestingMode") == CPRuleEditorNestingModeCompound && objj_msgSend(objj_msgSend(CPApp, "currentEvent"), "modifierFlags") & CPAlternateKeyMask)
        type = CPRuleEditorRowTypeCompound;
    objj_msgSend(self._ruleEditor, "_addOptionFromSlice:ofRowType:", self, type);
}
,["void","id"]), new objj_method(sel_getUid("_deleteOption:"), function $_CPRuleEditorViewSliceRow___deleteOption_(self, _cmd, sender)
{
    objj_msgSend(self._ruleEditor, "_deleteSlice:", self);
}
,["void","id"]), new objj_method(sel_getUid("_ruleOptionPopupChangedAction:"), function $_CPRuleEditorViewSliceRow___ruleOptionPopupChangedAction_(self, _cmd, sender)
{
    var layoutdict = objj_msgSend(sender, "representedObject"),
        newItem = objj_msgSend(layoutdict, "objectForKey:", "item"),
        indexInCriteria = objj_msgSend(layoutdict, "objectForKey:", "indexInCriteria"),
        oldItem = objj_msgSend(self._correspondingRuleItems, "objectAtIndex:", indexInCriteria);
    if (!objj_msgSend(newItem, "isEqual:", oldItem))
    {
        objj_msgSend(self._correspondingRuleItems, "replaceObjectAtIndex:withObject:", indexInCriteria, newItem);
        objj_msgSend(self._ruleEditor, "_changedItem:toItem:inRow:atCriteriaIndex:", oldItem, newItem, self._rowIndex, indexInCriteria);
    }
}
,["void","CPMenuItem"]), new objj_method(sel_getUid("validateMenuItem:"), function $_CPRuleEditorViewSliceRow__validateMenuItem_(self, _cmd, menuItem)
{
    return objj_msgSend(self._ruleEditor, "_validateItem:value:inRow:", menuItem, objj_msgSend(objj_msgSend(menuItem, "representedObject"), "valueForKey:", "item"), self._rowIndex);
}
,["BOOL","CPMenuItem"]), new objj_method(sel_getUid("_emptyRulePartSubviews"), function $_CPRuleEditorViewSliceRow___emptyRulePartSubviews(self, _cmd)
{
    var count = objj_msgSend(self._ruleOptionViews, "count");
    while (count--)
        objj_msgSend(self._ruleOptionViews[count], "removeFromSuperview");
    objj_msgSend(self._ruleOptionViews, "removeAllObjects");
    objj_msgSend(self._ruleOptionFrames, "removeAllObjects");
    objj_msgSend(self._ruleOptionInitialViewFrames, "removeAllObjects");
}
,["void"]), new objj_method(sel_getUid("_reconfigureSubviews"), function $_CPRuleEditorViewSliceRow___reconfigureSubviews(self, _cmd)
{
    var ruleItems,
        criteria,
        repObject,
        menuItem,
        ruleView,
        criterion,
        parent,
        numberOfCriteria,
        numberOfChildren,
        firstResponderIndex,
        ruleItems = objj_msgSend(CPMutableArray, "array"),
        responder = objj_msgSend(objj_msgSend(self, "window"), "firstResponder");
    objj_msgSend(self, "_emptyRulePartSubviews");
    criteria = objj_msgSend(self._ruleEditor, "criteriaForRow:", self._rowIndex);
    numberOfCriteria = objj_msgSend(criteria, "count");
    firstResponderIndex = numberOfCriteria - 1;
    if (responder)
        firstResponderIndex = objj_msgSend(self._ruleOptionViews, "indexOfObjectIdenticalTo:", responder);
    for (var i = 0; i < numberOfCriteria; i++)
    {
        ruleView = nil;
        parent = nil;
        criterion = objj_msgSend(criteria, "objectAtIndex:", i);
        if (i > 0)
            parent = objj_msgSend(criteria, "objectAtIndex:", i - 1);
        var childItems = [],
            childValues = [];
        objj_msgSend(self._ruleEditor, "_getAllAvailableItems:values:asChildrenOfItem:inRow:", childItems, childValues, parent, self._rowIndex);
        numberOfChildren = objj_msgSend(childItems, "count");
        if (numberOfChildren > 1)
        {
            var menuItems = objj_msgSend(CPMutableArray, "arrayWithCapacity:", numberOfChildren),
                selectedIndex = objj_msgSend(childItems, "indexOfObject:", criterion);
            if (selectedIndex == CPNotFound)
                break;
            for (var j = 0; j < numberOfChildren; ++j)
            {
                var childItem = objj_msgSend(childItems, "objectAtIndex:", j),
                    childValue = objj_msgSend(childValues, "objectAtIndex:", j);
                if (objj_msgSend(childValue, "isKindOfClass:", objj_msgSend(CPMenuItem, "class")))
                {
                    objj_msgSend(objj_msgSend(childValue, "menu"), "removeItem:", childValue);
                    menuItem = childValue;
                }
                else
                {
                    if (objj_msgSend(childValue, "isEqualToString:", ""))
                        menuItem = objj_msgSend(self, "_createMenuSeparatorItem");
                    else
                    {
                        menuItem = objj_msgSend(self, "_createMenuItemWithTitle:", childValue);
                        objj_msgSend(menuItem, "setTarget:", self);
                        objj_msgSend(menuItem, "setAction:", sel_getUid("_ruleOptionPopupChangedAction:"));
                    }
                }
                repObject = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", childItem, "item", childValue, "value", i, "indexInCriteria");
                objj_msgSend(menuItem, "setRepresentedObject:", repObject);
                objj_msgSend(menuItems, "addObject:", menuItem);
            }
            ruleView = objj_msgSend(self, "_createPopUpButtonWithItems:selectedItemIndex:", menuItems, selectedIndex);
        }
        else
        {
            var value = objj_msgSend(childValues, "objectAtIndex:", 0),
                type = objj_msgSend(value, "valueType");
            if (type === 0)
                ruleView = objj_msgSend(self, "_createStaticTextFieldWithStringValue:", value);
            else
            {
                if (type !== 1)
                {
                    objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "Display value must be a string or a menu item");
                    continue;
                }
                ruleView = value;
                objj_msgSend(ruleView, "setTarget:", self);
                objj_msgSend(ruleView, "setAction:", sel_getUid("_sendRuleAction:"));
                if (objj_msgSend(ruleView, "respondsToSelector:", sel_getUid("setDelegate:")))
                    objj_msgSend(ruleView, "setDelegate:", self);
            }
        }
        if (ruleView != nil)
        {
            objj_msgSend(self._ruleOptionViews, "addObject:", ruleView);
            var frame = objj_msgSend(ruleView, "frame");
            objj_msgSend(self._ruleOptionInitialViewFrames, "addObject:", frame);
            objj_msgSend(self._ruleOptionFrames, "addObject:", frame);
            if (!criterion)
                criterion = objj_msgSend(CPNull, "null");
            objj_msgSend(ruleItems, "addObject:", criterion);
        }
    }
    objj_msgSend(self._correspondingRuleItems, "setArray:", ruleItems);
    if (!self._editable)
        objj_msgSend(self, "_updateEnabledStateForSubviews");
    objj_msgSend(self, "_relayoutSubviewsWidthChanged:", YES);
    if (firstResponderIndex != CPNotFound)
    {
        var aView = objj_msgSend(self._ruleOptionViews, "objectAtIndex:", firstResponderIndex);
        objj_msgSend(objj_msgSend(self, "window"), "makeFirstResponder:", aView);
    }
}
,["void"]), new objj_method(sel_getUid("_updateEnabledStateForSubviews"), function $_CPRuleEditorViewSliceRow___updateEnabledStateForSubviews(self, _cmd)
{
    objj_msgSend(self._ruleOptionViews, "makeObjectsPerformSelector:withObject:", sel_getUid("setEnabled:"), NO);
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPRuleEditorViewSliceRow__layoutSubviews(self, _cmd)
{
    objj_msgSend(self, "_relayoutSubviewsWidthChanged:", YES);
}
,["void"]), new objj_method(sel_getUid("_relayoutSubviewsWidthChanged:"), function $_CPRuleEditorViewSliceRow___relayoutSubviewsWidthChanged_(self, _cmd, widthChanged)
{
    var optionViewOriginX,
        leftHorizontalPadding,
        leftButtonMinX,
        rowHeight = objj_msgSend(self._ruleEditor, "rowHeight"),
        count = objj_msgSend(self._ruleOptionViews, "count"),
        sliceFrame = objj_msgSend(self, "frame"),
        buttonFrame = CGRectMake(CGRectGetWidth(sliceFrame) - BUTTON_HEIGHT - objj_msgSend(self, "_rowButtonsRightHorizontalPadding"), (objj_msgSend(self._ruleEditor, "rowHeight") - BUTTON_HEIGHT) / 2 - 2, BUTTON_HEIGHT, BUTTON_HEIGHT);
    objj_msgSend(self._addButton, "setFrame:", buttonFrame);
    buttonFrame.origin.x -= BUTTON_HEIGHT + objj_msgSend(self, "_rowButtonsInterviewHorizontalPadding");
    objj_msgSend(self._subtractButton, "setFrame:", buttonFrame);
    if (widthChanged)
    {
        optionViewOriginX = objj_msgSend(self, "_leftmostViewFixedHorizontalPadding") + objj_msgSend(self, "_indentationHorizontalPadding") * self._indentation;
        leftHorizontalPadding = objj_msgSend(self, "_rowButtonsLeftHorizontalPadding");
        leftButtonMinX = CGRectGetMinX(buttonFrame);
    }
    for (var i = 0; i < count; i++)
    {
        var ruleOptionView = self._ruleOptionViews[i],
            optionFrame = self._ruleOptionFrames[i];
        optionFrame.origin.y = (rowHeight - CGRectGetHeight(optionFrame)) / 2 - 2;
        if (widthChanged)
        {
            optionFrame.origin.x = optionViewOriginX;
            if (i == count - 1 && !objj_msgSend(self, "_isRulePopup:", ruleOptionView))
            {
                var initialFrame = self._ruleOptionInitialViewFrames[i];
                optionFrame.size.width = MIN(CGRectGetWidth(initialFrame), leftButtonMinX - leftHorizontalPadding - optionViewOriginX);
            }
        }
        objj_msgSend(ruleOptionView, "setFrame:", optionFrame);
        objj_msgSend(self, "addSubview:", ruleOptionView);
        if (widthChanged)
            optionViewOriginX += CGRectGetWidth(optionFrame) + objj_msgSend(self, "_interviewHorizontalPadding");
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("_updateButtonVisibilities"), function $_CPRuleEditorViewSliceRow___updateButtonVisibilities(self, _cmd)
{
    objj_msgSend(self._addButton, "setHidden:", objj_msgSend(self._ruleEditor, "_shouldHideAddButtonForSlice:", self));
    objj_msgSend(self._subtractButton, "setHidden:", objj_msgSend(self._ruleEditor, "_shouldHideSubtractButtonForSlice:", self));
}
,["void"]), new objj_method(sel_getUid("_configurePlusButtonByRowType:"), function $_CPRuleEditorViewSliceRow___configurePlusButtonByRowType_(self, _cmd, type)
{
    objj_msgSend(self, "_setRowTypeToAddFromPlusButton:", type);
}
,["void","CPRuleEditorRowType"]), new objj_method(sel_getUid("setEditable:"), function $_CPRuleEditorViewSliceRow__setEditable_(self, _cmd, value)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class }, "setEditable:", value);
    objj_msgSend(self, "_updateButtonVisibilities");
}
,["void","BOOL"]), new objj_method(sel_getUid("_alignmentGridWidth"), function $_CPRuleEditorViewSliceRow___alignmentGridWidth(self, _cmd)
{
    return objj_msgSend(self._ruleEditor, "_alignmentGridWidth");
}
,["float"]), new objj_method(sel_getUid("_indentationHorizontalPadding"), function $_CPRuleEditorViewSliceRow___indentationHorizontalPadding(self, _cmd)
{
    return 30.;
}
,["float"]), new objj_method(sel_getUid("_interviewHorizontalPadding"), function $_CPRuleEditorViewSliceRow___interviewHorizontalPadding(self, _cmd)
{
    return 6.;
}
,["float"]), new objj_method(sel_getUid("_leftmostViewFixedHorizontalPadding"), function $_CPRuleEditorViewSliceRow___leftmostViewFixedHorizontalPadding(self, _cmd)
{
    return 7.;
}
,["float"]), new objj_method(sel_getUid("_minimumVerticalPopupPadding"), function $_CPRuleEditorViewSliceRow___minimumVerticalPopupPadding(self, _cmd)
{
    return 2.;
}
,["float"]), new objj_method(sel_getUid("_rowButtonsInterviewHorizontalPadding"), function $_CPRuleEditorViewSliceRow___rowButtonsInterviewHorizontalPadding(self, _cmd)
{
    return 6.;
}
,["float"]), new objj_method(sel_getUid("_rowButtonsLeftHorizontalPadding"), function $_CPRuleEditorViewSliceRow___rowButtonsLeftHorizontalPadding(self, _cmd)
{
    return 10.;
}
,["float"]), new objj_method(sel_getUid("_rowButtonsRightHorizontalPadding"), function $_CPRuleEditorViewSliceRow___rowButtonsRightHorizontalPadding(self, _cmd)
{
    return objj_msgSend(objj_msgSend(self._ruleEditor, "superview"), "isKindOfClass:", objj_msgSend(CPClipView, "class")) ? 18. : 10.;
}
,["float"]), new objj_method(sel_getUid("_setRowTypeToAddFromPlusButton:"), function $_CPRuleEditorViewSliceRow___setRowTypeToAddFromPlusButton_(self, _cmd, type)
{
    self._plusButtonRowType = type;
}
,["void","int"]), new objj_method(sel_getUid("setNeedsDisplay:"), function $_CPRuleEditorViewSliceRow__setNeedsDisplay_(self, _cmd, flag)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class }, "setNeedsDisplay:", flag);
}
,["void","BOOL"]), new objj_method(sel_getUid("_nestingModeShouldHideAddButton"), function $_CPRuleEditorViewSliceRow___nestingModeShouldHideAddButton(self, _cmd)
{
    return objj_msgSend(self._ruleEditor, "_applicableNestingMode") == CPRuleEditorNestingModeSingle;
}
,["BOOL"]), new objj_method(sel_getUid("_nestingModeShouldHideSubtractButton"), function $_CPRuleEditorViewSliceRow___nestingModeShouldHideSubtractButton(self, _cmd)
{
    return objj_msgSend(self._ruleEditor, "_applicableNestingMode") == CPRuleEditorNestingModeSingle;
}
,["BOOL"]), new objj_method(sel_getUid("containsDisplayValue:"), function $_CPRuleEditorViewSliceRow__containsDisplayValue_(self, _cmd, value)
{
    return objj_msgSend(objj_msgSend(self._ruleEditor, "displayValuesForRow:", self._rowIndex), "containsObject:", value);
}
,["BOOL","id"]), new objj_method(sel_getUid("viewDidMoveToWindow"), function $_CPRuleEditorViewSliceRow__viewDidMoveToWindow(self, _cmd)
{
    objj_msgSend(self, "layoutSubviews");
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPRuleEditorViewSliceRow__drawRect_(self, _cmd, rect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSliceRow").super_class }, "drawRect:", rect);
}
,["void","CGRect"]), new objj_method(sel_getUid("_isRulePopup:"), function $_CPRuleEditorViewSliceRow___isRulePopup_(self, _cmd, view)
{
    if (objj_msgSend(view, "isKindOfClass:", objj_msgSend(_CPRuleEditorPopUpButton, "class")))
        return YES;
    return NO;
}
,["BOOL","CPView"]), new objj_method(sel_getUid("_sendRuleAction:"), function $_CPRuleEditorViewSliceRow___sendRuleAction_(self, _cmd, sender)
{
    objj_msgSend(self._ruleEditor, "_updatePredicate");
    objj_msgSend(self._ruleEditor, "_sendRuleAction");
}
,["void","id"]), new objj_method(sel_getUid("_textDidChange:"), function $_CPRuleEditorViewSliceRow___textDidChange_(self, _cmd, aNotif)
{
    if (objj_msgSend(objj_msgSend(aNotif, "object"), "superview") == self && objj_msgSend(self._ruleEditor, "_sendsActionOnIncompleteTextChange"))
        objj_msgSend(self, "_sendRuleAction:", nil);
}
,["void","CPNotification"])]);
}{var the_class = objj_allocateClassPair(CPTextField, "_CPRuleEditorTextField"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:"), function $_CPRuleEditorTextField__initWithFrame_(self, _cmd, frame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorTextField").super_class }, "initWithFrame:", frame);
    if (self)
    {
        objj_msgSend(self, "setDrawsBackground:", NO);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("hitTest:"), function $_CPRuleEditorTextField__hitTest_(self, _cmd, point)
{
    if (!CGRectContainsPoint(objj_msgSend(self, "frame"), point))
        return nil;
    return objj_msgSend(self, "superview");
}
,["id","CGPoint"])]);
}p;19;CPPredicateEditor.jt;20362;@STATIC;1.0;i;14;CPRuleEditor.ji;24;_CPPredicateEditorTree.ji;27;_CPPredicateEditorRowNode.ji;30;CPPredicateEditorRowTemplate.jt;20227;objj_executeFile("CPRuleEditor.j", YES);objj_executeFile("_CPPredicateEditorTree.j", YES);objj_executeFile("_CPPredicateEditorRowNode.j", YES);objj_executeFile("CPPredicateEditorRowTemplate.j", YES);{var the_class = objj_allocateClassPair(CPRuleEditor, "CPPredicateEditor"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_allTemplates"), new objj_ivar("_rootTrees"), new objj_ivar("_rootHeaderTrees"), new objj_ivar("_predicateTarget"), new objj_ivar("_predicateAction")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("target"), function $CPPredicateEditor__target(self, _cmd)
{
    return self._predicateTarget;
}
,["id"]), new objj_method(sel_getUid("setTarget:"), function $CPPredicateEditor__setTarget_(self, _cmd, newValue)
{
    self._predicateTarget = newValue;
}
,["void","id"]), new objj_method(sel_getUid("action"), function $CPPredicateEditor__action(self, _cmd)
{
    return self._predicateAction;
}
,["SEL"]), new objj_method(sel_getUid("setAction:"), function $CPPredicateEditor__setAction_(self, _cmd, newValue)
{
    self._predicateAction = newValue;
}
,["void","SEL"]), new objj_method(sel_getUid("rowTemplates"), function $CPPredicateEditor__rowTemplates(self, _cmd)
{
    return self._allTemplates;
}
,["CPArray"]), new objj_method(sel_getUid("setRowTemplates:"), function $CPPredicateEditor__setRowTemplates_(self, _cmd, rowTemplates)
{
    if (self._allTemplates == rowTemplates)
        return;
    self._allTemplates = rowTemplates;
    objj_msgSend(self, "_updateItemsByCompoundTemplates");
    objj_msgSend(self, "_updateItemsBySimpleTemplates");
    if (objj_msgSend(self, "numberOfRows") > 0)
    {
        var predicate = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "predicate");
        objj_msgSend(self, "_reflectPredicate:", predicate);
    }
}
,["void","id"]), new objj_method(sel_getUid("_replacementKeyPathForBinding:"), function $CPPredicateEditor___replacementKeyPathForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return "predicate";
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "_replacementKeyPathForBinding:", aBinding);
}
,["CPString","CPString"]), new objj_method(sel_getUid("_initRuleEditorShared"), function $CPPredicateEditor___initRuleEditorShared(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "_initRuleEditorShared");
    self._rootTrees = objj_msgSend(CPArray, "array");
    self._rootHeaderTrees = objj_msgSend(CPArray, "array");
}
,["void"]), new objj_method(sel_getUid("initWithFrame:"), function $CPPredicateEditor__initWithFrame_(self, _cmd, aFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "initWithFrame:", aFrame);
    if (self != nil)
    {
        var initialTemplate = objj_msgSend(objj_msgSend(CPPredicateEditorRowTemplate, "alloc"), "initWithCompoundTypes:", [CPAndPredicateType, CPOrPredicateType]);
        self._allTemplates = objj_msgSend(CPArray, "arrayWithObject:", initialTemplate);
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("objectValue"), function $CPPredicateEditor__objectValue(self, _cmd)
{
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "predicate");
}
,["id"]), new objj_method(sel_getUid("_updateItemsBySimpleTemplates"), function $CPPredicateEditor___updateItemsBySimpleTemplates(self, _cmd)
{
    var templates = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(self._allTemplates, "count"),
        t;
    while (count--)
    {
        var t = self._allTemplates[count];
        if (objj_msgSend(t, "_rowType") == CPRuleEditorRowTypeSimple)
            objj_msgSend(templates, "insertObject:atIndex:", t, 0);
    }
    var trees = objj_msgSend(self, "_constructTreesForTemplates:", templates);
    if (objj_msgSend(trees, "count") > 0)
        self._rootTrees = objj_msgSend(self, "_mergeTree:", trees);
}
,["void"]), new objj_method(sel_getUid("_updateItemsByCompoundTemplates"), function $CPPredicateEditor___updateItemsByCompoundTemplates(self, _cmd)
{
    var templates = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(self._allTemplates, "count"),
        t;
    while (count--)
    {
        var t = self._allTemplates[count];
        if (objj_msgSend(t, "_rowType") == CPRuleEditorRowTypeCompound)
            objj_msgSend(templates, "insertObject:atIndex:", t, 0);
    }
    var trees = objj_msgSend(self, "_constructTreesForTemplates:", templates);
    if (objj_msgSend(trees, "count") > 0)
        self._rootHeaderTrees = objj_msgSend(self, "_mergeTree:", trees);
}
,["void"]), new objj_method(sel_getUid("_constructTreesForTemplates:"), function $CPPredicateEditor___constructTreesForTemplates_(self, _cmd, templates)
{
    var trees = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(templates, "count");
    for (var i = 0; i < count; i++)
    {
        var tree = objj_msgSend(self, "_constructTreeForTemplate:", templates[i]);
        objj_msgSend(trees, "addObjectsFromArray:", tree);
    }
    return trees;
}
,["CPArray","id"]), new objj_method(sel_getUid("_mergeTree:"), function $CPPredicateEditor___mergeTree_(self, _cmd, aTree)
{
    var mergedTree = objj_msgSend(CPMutableArray, "array");
    if (aTree == nil)
        return mergedTree;
    var icount = objj_msgSend(aTree, "count");
    for (var i = 0; i < icount; i++)
    {
        var anode = objj_msgSend(aTree, "objectAtIndex:", i),
            jcount = objj_msgSend(mergedTree, "count"),
            merged = NO;
        for (var j = 0; j < jcount; j++)
        {
            var mergednode = objj_msgSend(mergedTree, "objectAtIndex:", j);
            if (objj_msgSend(objj_msgSend(mergednode, "title"), "isEqualToString:", objj_msgSend(anode, "title")))
            {
                var children1 = objj_msgSend(mergednode, "children"),
                    children2 = objj_msgSend(anode, "children"),
                    children12 = objj_msgSend(children1, "arrayByAddingObjectsFromArray:", children2),
                    mergedChildren = objj_msgSend(self, "_mergeTree:", children12);
                objj_msgSend(mergednode, "setChildren:", mergedChildren);
                merged = YES;
            }
        }
        if (!merged)
            objj_msgSend(mergedTree, "addObject:", anode);
    }
    return mergedTree;
}
,["CPMutableArray","CPArray"]), new objj_method(sel_getUid("_constructTreeForTemplate:"), function $CPPredicateEditor___constructTreeForTemplate_(self, _cmd, aTemplate)
{
    var tree = objj_msgSend(CPArray, "array"),
        templateViews = objj_msgSend(aTemplate, "templateViews"),
        count = objj_msgSend(templateViews, "count");
    while (count--)
    {
        var children = objj_msgSend(CPArray, "array"),
            itemsCount = 0,
            menuIndex = -1,
            itemArray,
            templateView = objj_msgSend(templateViews, "objectAtIndex:", count),
            isPopup = objj_msgSend(templateView, "isKindOfClass:", objj_msgSend(CPPopUpButton, "class"));
        if (isPopup)
        {
            itemArray = objj_msgSend(objj_msgSend(templateView, "itemArray"), "valueForKey:", "title");
            itemsCount = objj_msgSend(itemArray, "count");
            menuIndex = 0;
        }
        for (; menuIndex < itemsCount; menuIndex++)
        {
            var item = objj_msgSend(_CPPredicateEditorTree, "new");
            objj_msgSend(item, "setIndexIntoTemplate:", count);
            objj_msgSend(item, "setTemplate:", aTemplate);
            objj_msgSend(item, "setMenuItemIndex:", menuIndex);
            if (isPopup)
                objj_msgSend(item, "setTitle:", objj_msgSend(itemArray, "objectAtIndex:", menuIndex));
            objj_msgSend(children, "addObject:", item);
        }
        objj_msgSend(children, "makeObjectsPerformSelector:withObject:", sel_getUid("setChildren:"), tree);
        tree = children;
    }
    return tree;
}
,["id","CPPredicateEditorRowTemplate"]), new objj_method(sel_getUid("setObjectValue:"), function $CPPredicateEditor__setObjectValue_(self, _cmd, objectValue)
{
    var ov = objj_msgSend(self, "objectValue");
    if (ov == nil != (objectValue == nil) || !objj_msgSend(ov, "isEqual:", objectValue))
    {
        objj_msgSend(self, "_setPredicate:", objectValue);
        objj_msgSend(self, "_reflectPredicate:", objectValue);
    }
}
,["void","id"]), new objj_method(sel_getUid("_reflectPredicate:"), function $CPPredicateEditor___reflectPredicate_(self, _cmd, predicate)
{
    var animation = self._currentAnimation;
    self._currentAnimation = nil;
    self._sendAction = NO;
    if (predicate != nil)
    {
        if ((self._nestingMode == CPRuleEditorNestingModeSimple || self._nestingMode == CPRuleEditorNestingModeCompound) && objj_msgSend(predicate, "isKindOfClass:", objj_msgSend(CPComparisonPredicate, "class")))
            predicate = objj_msgSend(objj_msgSend(CPCompoundPredicate, "alloc"), "initWithType:subpredicates:", objj_msgSend(self, "_compoundPredicateTypeForRootRows"), objj_msgSend(CPArray, "arrayWithObject:", predicate));
        var row = objj_msgSend(self, "_rowObjectFromPredicate:", predicate);
        if (row != nil)
            objj_msgSend(self._boundArrayOwner, "setValue:forKey:", objj_msgSend(CPArray, "arrayWithObject:", row), self._boundArrayKeyPath);
    }
    objj_msgSend(self, "setAnimation:", animation);
}
,["void","id"]), new objj_method(sel_getUid("_rowObjectFromPredicate:"), function $CPPredicateEditor___rowObjectFromPredicate_(self, _cmd, predicate)
{
    var quality,
        type,
        matchedTemplate = objj_msgSend(CPPredicateEditorRowTemplate, "_bestMatchForPredicate:inTemplates:quality:", predicate, objj_msgSend(self, "rowTemplates"), quality);
    if (matchedTemplate == nil)
        return nil;
    var copyTemplate = objj_msgSend(matchedTemplate, "copy"),
        subpredicates = objj_msgSend(matchedTemplate, "displayableSubpredicatesOfPredicate:", predicate);
    if (subpredicates == nil)
    {
        objj_msgSend(copyTemplate, "_setComparisonPredicate:", predicate);
        type = CPRuleEditorRowTypeSimple;
    }
    else
    {
        objj_msgSend(copyTemplate, "_setCompoundPredicate:", predicate);
        type = CPRuleEditorRowTypeCompound;
    }
    var row = objj_msgSend(self, "_rowFromTemplate:originalTemplate:withRowType:", copyTemplate, matchedTemplate, type);
    if (subpredicates == nil)
        return row;
    var count = objj_msgSend(subpredicates, "count"),
        subrows = objj_msgSend(CPMutableArray, "array");
    for (var i = 0; i < count; i++)
    {
        var subrow = objj_msgSend(self, "_rowObjectFromPredicate:", subpredicates[i]);
        if (subrow != nil)
            objj_msgSend(subrows, "addObject:", subrow);
    }
    objj_msgSend(row, "setValue:forKey:", subrows, objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "subrowsKeyPath"));
    return row;
}
,["id","CPPredicate"]), new objj_method(sel_getUid("_rowFromTemplate:originalTemplate:withRowType:"), function $CPPredicateEditor___rowFromTemplate_originalTemplate_withRowType_(self, _cmd, aTemplate, originalTemplate, rowType)
{
    var criteria = objj_msgSend(CPArray, "array"),
        values = objj_msgSend(CPArray, "array"),
        templateViews = objj_msgSend(aTemplate, "templateViews"),
        rootItems,
        count;
    rootItems = rowType == CPRuleEditorRowTypeSimple ? self._rootTrees : self._rootHeaderTrees;
    while ((count = objj_msgSend(rootItems, "count")) > 0)
    {
        var treeChild;
        for (var i = 0; i < count; i++)
        {
            treeChild = objj_msgSend(rootItems, "objectAtIndex:", i);
            var currentView = objj_msgSend(templateViews, "objectAtIndex:", objj_msgSend(treeChild, "indexIntoTemplate")),
                title = objj_msgSend(treeChild, "title");
            if (title == nil || objj_msgSend(title, "isEqual:", objj_msgSend(currentView, "titleOfSelectedItem")))
            {
                var node = objj_msgSend(_CPPredicateEditorRowNode, "rowNodeFromTree:", treeChild);
                objj_msgSend(node, "applyTemplate:withViews:forOriginalTemplate:", aTemplate, templateViews, originalTemplate);
                objj_msgSend(criteria, "addObject:", node);
                objj_msgSend(values, "addObject:", objj_msgSend(node, "displayValue"));
                break;
            }
        }
        rootItems = objj_msgSend(treeChild, "children");
    }
    var row = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", criteria, "criteria", values, "displayValues", rowType, "rowType");
    return row;
}
,["id","CPPredicateEditorRowTemplate","CPPredicateEditorRowTemplate","CPRuleEditorRowType"]), new objj_method(sel_getUid("_updatePredicate"), function $CPPredicateEditor___updatePredicate(self, _cmd)
{
    objj_msgSend(self, "_updatePredicateFromRows");
}
,["void"]), new objj_method(sel_getUid("_updatePredicateFromRows"), function $CPPredicateEditor___updatePredicateFromRows(self, _cmd)
{
    var rootRowsArray = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "_rootRowsArray"),
        subpredicates = objj_msgSend(CPMutableArray, "array"),
        count,
        count2 = count = objj_msgSend(rootRowsArray, "count"),
        predicate;
    while (count--)
    {
        var item = objj_msgSend(rootRowsArray, "objectAtIndex:", count),
            subpredicate = objj_msgSend(self, "_predicateFromRowItem:", item);
        if (subpredicate != nil)
            objj_msgSend(subpredicates, "insertObject:atIndex:", subpredicate, 0);
    }
    if (self._nestingMode != CPRuleEditorNestingModeList && count2 == 1)
        predicate = objj_msgSend(subpredicates, "lastObject");
    else
        predicate = objj_msgSend(objj_msgSend(CPCompoundPredicate, "alloc"), "initWithType:subpredicates:", objj_msgSend(self, "_compoundPredicateTypeForRootRows"), subpredicates);
    objj_msgSend(self, "_setPredicate:", predicate);
}
,["void"]), new objj_method(sel_getUid("_predicateFromRowItem:"), function $CPPredicateEditor___predicateFromRowItem_(self, _cmd, rowItem)
{
    var subpredicates = objj_msgSend(CPArray, "array"),
        rowType = objj_msgSend(rowItem, "valueForKey:", self._typeKeyPath);
    if (rowType == CPRuleEditorRowTypeCompound)
    {
        var subrows = objj_msgSend(rowItem, "valueForKey:", self._subrowsArrayKeyPath),
            count = objj_msgSend(subrows, "count");
        for (var i = 0; i < count; i++)
        {
            var subrow = objj_msgSend(subrows, "objectAtIndex:", i),
                predicate = objj_msgSend(self, "_predicateFromRowItem:", subrow);
            objj_msgSend(subpredicates, "addObject:", predicate);
        }
    }
    var criteria = objj_msgSend(rowItem, "valueForKey:", self._itemsKeyPath),
        displayValues = objj_msgSend(rowItem, "valueForKey:", self._valuesKeyPath),
        count = objj_msgSend(criteria, "count"),
        lastItem = objj_msgSend(criteria, "lastObject"),
        template = objj_msgSend(lastItem, "templateForRow"),
        templateViews = objj_msgSend(template, "templateViews");
    for (var j = 0; j < count; j++)
    {
        var view = objj_msgSend(templateViews, "objectAtIndex:", j),
            value = objj_msgSend(displayValues, "objectAtIndex:", j);
        objj_msgSend(objj_msgSend(criteria, "objectAtIndex:", j), "setTemplateViews:", templateViews);
        if (objj_msgSend(view, "isKindOfClass:", objj_msgSend(CPPopUpButton, "class")))
            objj_msgSend(view, "selectItemWithTitle:", value);
        else if (objj_msgSend(view, "respondsToSelector:", sel_getUid("setObjectValue:")))
            objj_msgSend(view, "setObjectValue:", objj_msgSend(value, "objectValue"));
    }
    return objj_msgSend(template, "predicateWithSubpredicates:", subpredicates);
}
,["id","id"]), new objj_method(sel_getUid("_compoundPredicateTypeForRootRows"), function $CPPredicateEditor___compoundPredicateTypeForRootRows(self, _cmd)
{
    return CPAndPredicateType;
}
,["CPCompoundPredicateType"]), new objj_method(sel_getUid("_sendRuleAction"), function $CPPredicateEditor___sendRuleAction(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "_sendRuleAction");
}
,["void"]), new objj_method(sel_getUid("_sendsActionOnIncompleteTextChange"), function $CPPredicateEditor___sendsActionOnIncompleteTextChange(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("_queryNumberOfChildrenOfItem:withRowType:"), function $CPPredicateEditor___queryNumberOfChildrenOfItem_withRowType_(self, _cmd, rowItem, type)
{
    if (rowItem == nil)
    {
        var trees = type == CPRuleEditorRowTypeSimple ? self._rootTrees : self._rootHeaderTrees;
        return objj_msgSend(trees, "count");
    }
    return objj_msgSend(objj_msgSend(rowItem, "children"), "count");
}
,["int","id","int"]), new objj_method(sel_getUid("_queryChild:ofItem:withRowType:"), function $CPPredicateEditor___queryChild_ofItem_withRowType_(self, _cmd, childIndex, rowItem, type)
{
    if (rowItem == nil)
    {
        var trees = type == CPRuleEditorRowTypeSimple ? self._rootTrees : self._rootHeaderTrees;
        return objj_msgSend(_CPPredicateEditorRowNode, "rowNodeFromTree:", trees[childIndex]);
    }
    return objj_msgSend(objj_msgSend(rowItem, "children"), "objectAtIndex:", childIndex);
}
,["id","int","id","int"]), new objj_method(sel_getUid("_queryValueForItem:inRow:"), function $CPPredicateEditor___queryValueForItem_inRow_(self, _cmd, rowItem, rowIndex)
{
    return objj_msgSend(rowItem, "displayValue");
}
,["id","id","int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPPredicateEditor___binderClassForBinding_(self, _cmd, aBinding)
{
    if (aBinding == CPValueBinding)
        return objj_msgSend(CPPredicateEditorValueBinder, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPPredicateEditor").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"])]);
}var CPPredicateTemplatesKey = "CPPredicateTemplates";
{
var the_class = objj_getClass("CPPredicateEditor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPredicateEditor\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPPredicateEditor__initWithCoder_(self, _cmd, aCoder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "initWithCoder:", aCoder);
    if (self != nil)
    {
        var nibTemplates = objj_msgSend(aCoder, "decodeObjectForKey:", CPPredicateTemplatesKey);
        if (nibTemplates != nil)
            objj_msgSend(self, "setRowTemplates:", nibTemplates);
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPPredicateEditor__encodeWithCoder_(self, _cmd, aCoder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditor").super_class }, "encodeWithCoder:", aCoder);
    objj_msgSend(aCoder, "encodeObject:forKey:", self._allTemplates, CPPredicateTemplatesKey);
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPBinder, "CPPredicateEditorValueBinder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setPlaceholderValue:withMarker:forBinding:"), function $CPPredicateEditorValueBinder__setPlaceholderValue_withMarker_forBinding_(self, _cmd, aValue, aMarker, aBinding)
{
    objj_msgSend(self._source, "_reflectPredicate:", nil);
}
,["void","id","CPString","CPString"]), new objj_method(sel_getUid("setValue:forBinding:"), function $CPPredicateEditorValueBinder__setValue_forBinding_(self, _cmd, aValue, aBinding)
{
    objj_msgSend(self._source, "_reflectPredicate:", aValue);
}
,["void","id","CPString"])]);
}p;30;CPPredicateEditorRowTemplate.jt;30881;@STATIC;1.0;I;24;Foundation/CPPredicate.ji;12;CPCheckBox.ji;15;CPPopUpButton.ji;12;CPMenuItem.ji;13;CPTextField.jt;30760;objj_executeFile("Foundation/CPPredicate.j", NO);objj_executeFile("CPCheckBox.j", YES);objj_executeFile("CPPopUpButton.j", YES);objj_executeFile("CPMenuItem.j", YES);objj_executeFile("CPTextField.j", YES);CPUndefinedAttributeType = 0;
CPInteger16AttributeType = 100;
CPInteger32AttributeType = 200;
CPInteger64AttributeType = 300;
CPDecimalAttributeType = 400;
CPDoubleAttributeType = 500;
CPFloatAttributeType = 600;
CPStringAttributeType = 700;
CPBooleanAttributeType = 800;
CPDateAttributeType = 900;
CPBinaryDataAttributeType = 1000;
CPTransformableAttributeType = 1800;
{var the_class = objj_allocateClassPair(CPObject, "CPPredicateEditorRowTemplate"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_templateType"), new objj_ivar("_predicateOptions"), new objj_ivar("_predicateModifier"), new objj_ivar("_leftAttributeType"), new objj_ivar("_rightAttributeType"), new objj_ivar("_leftIsWildcard"), new objj_ivar("_rightIsWildcard"), new objj_ivar("_views")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_templateType"), function $CPPredicateEditorRowTemplate___templateType(self, _cmd)
{
    return self._templateType;
}
,["int"]), new objj_method(sel_getUid("_setTemplateType:"), function $CPPredicateEditorRowTemplate___setTemplateType_(self, _cmd, newValue)
{
    self._templateType = newValue;
}
,["void","int"]), new objj_method(sel_getUid("_predicateOptions"), function $CPPredicateEditorRowTemplate___predicateOptions(self, _cmd)
{
    return self._predicateOptions;
}
,["unsigned"]), new objj_method(sel_getUid("_setOptions:"), function $CPPredicateEditorRowTemplate___setOptions_(self, _cmd, newValue)
{
    self._predicateOptions = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("_predicateModifier"), function $CPPredicateEditorRowTemplate___predicateModifier(self, _cmd)
{
    return self._predicateModifier;
}
,["unsigned"]), new objj_method(sel_getUid("_setModifier:"), function $CPPredicateEditorRowTemplate___setModifier_(self, _cmd, newValue)
{
    self._predicateModifier = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("leftAttributeType"), function $CPPredicateEditorRowTemplate__leftAttributeType(self, _cmd)
{
    return self._leftAttributeType;
}
,["unsigned"]), new objj_method(sel_getUid("_setLeftAttributeType:"), function $CPPredicateEditorRowTemplate___setLeftAttributeType_(self, _cmd, newValue)
{
    self._leftAttributeType = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("rightAttributeType"), function $CPPredicateEditorRowTemplate__rightAttributeType(self, _cmd)
{
    return self._rightAttributeType;
}
,["unsigned"]), new objj_method(sel_getUid("_setRightAttributeType:"), function $CPPredicateEditorRowTemplate___setRightAttributeType_(self, _cmd, newValue)
{
    self._rightAttributeType = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("leftIsWildcard"), function $CPPredicateEditorRowTemplate__leftIsWildcard(self, _cmd)
{
    return self._leftIsWildcard;
}
,["BOOL"]), new objj_method(sel_getUid("setLeftIsWildcard:"), function $CPPredicateEditorRowTemplate__setLeftIsWildcard_(self, _cmd, newValue)
{
    self._leftIsWildcard = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("rightIsWildcard"), function $CPPredicateEditorRowTemplate__rightIsWildcard(self, _cmd)
{
    return self._rightIsWildcard;
}
,["BOOL"]), new objj_method(sel_getUid("setRightIsWildcard:"), function $CPPredicateEditorRowTemplate__setRightIsWildcard_(self, _cmd, newValue)
{
    self._rightIsWildcard = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("_views"), function $CPPredicateEditorRowTemplate___views(self, _cmd)
{
    return self._views;
}
,["CPArray"]), new objj_method(sel_getUid("setTemplateViews:"), function $CPPredicateEditorRowTemplate__setTemplateViews_(self, _cmd, newValue)
{
    self._views = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("initWithLeftExpressions:rightExpressions:modifier:operators:options:"), function $CPPredicateEditorRowTemplate__initWithLeftExpressions_rightExpressions_modifier_operators_options_(self, _cmd, leftExpressions, rightExpressions, modifier, operators, options)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class }, "init");
    if (self != nil)
    {
        self._templateType = 1;
        self._leftIsWildcard = NO;
        self._rightIsWildcard = NO;
        self._leftAttributeType = 0;
        self._rightAttributeType = 0;
        self._predicateModifier = modifier;
        self._predicateOptions = options;
        var leftView = objj_msgSend(self, "_viewFromExpressions:", leftExpressions),
            rightView = objj_msgSend(self, "_viewFromExpressions:", rightExpressions),
            middleView = objj_msgSend(self, "_viewFromOperatorTypes:", operators);
        self._views = objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithObjects:", leftView, middleView, rightView);
    }
    return self;
}
,["id","CPArray","CPArray","int","CPArray","int"]), new objj_method(sel_getUid("initWithLeftExpressions:rightExpressionAttributeType:modifier:operators:options:"), function $CPPredicateEditorRowTemplate__initWithLeftExpressions_rightExpressionAttributeType_modifier_operators_options_(self, _cmd, leftExpressions, attributeType, modifier, operators, options)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class }, "init");
    if (self != nil)
    {
        var leftView = objj_msgSend(self, "_viewFromExpressions:", leftExpressions),
            middleView = objj_msgSend(self, "_viewFromOperatorTypes:", operators),
            rightView = objj_msgSend(self, "_viewFromAttributeType:", attributeType);
        self._templateType = 1;
        self._leftIsWildcard = NO;
        self._rightIsWildcard = YES;
        self._leftAttributeType = 0;
        self._rightAttributeType = attributeType;
        self._predicateModifier = modifier;
        self._predicateOptions = options;
        self._views = objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithObjects:", leftView, middleView, rightView);
    }
    return self;
}
,["id","CPArray","CPAttributeType","CPComparisonPredicateModifier","CPArray","int"]), new objj_method(sel_getUid("initWithCompoundTypes:"), function $CPPredicateEditorRowTemplate__initWithCompoundTypes_(self, _cmd, compoundTypes)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class }, "init");
    if (self != nil)
    {
        var leftView = objj_msgSend(self, "_viewFromCompoundTypes:", compoundTypes),
            rightView = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "init");
        objj_msgSend(rightView, "addItemWithTitle:", "of the following are true");
        self._templateType = 2;
        self._leftIsWildcard = NO;
        self._rightIsWildcard = NO;
        self._rightAttributeType = 0;
        self._views = objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithObjects:", leftView, rightView);
    }
    return self;
}
,["id","CPArray"]), new objj_method(sel_getUid("matchForPredicate:"), function $CPPredicateEditorRowTemplate__matchForPredicate_(self, _cmd, predicate)
{
    if (objj_msgSend(self, "_templateType") == 2 && objj_msgSend(predicate, "isKindOfClass:", objj_msgSend(CPCompoundPredicate, "class")))
    {
        if (objj_msgSend(objj_msgSend(self, "compoundTypes"), "containsObject:", objj_msgSend(predicate, "compoundPredicateType")))
            return 1;
    }
    else if (objj_msgSend(self, "_templateType") == 1 && objj_msgSend(predicate, "isKindOfClass:", objj_msgSend(CPComparisonPredicate, "class")))
    {
        if (!self._leftIsWildcard && !objj_msgSend(objj_msgSend(self, "leftExpressions"), "containsObject:", objj_msgSend(predicate, "leftExpression")))
            return 0;
        if (!objj_msgSend(objj_msgSend(self, "operators"), "containsObject:", objj_msgSend(predicate, "predicateOperatorType")))
            return 0;
        if (!self._rightIsWildcard && !objj_msgSend(objj_msgSend(self, "rightExpressions"), "containsObject:", objj_msgSend(predicate, "rightExpression")))
            return 0;
        return 1;
    }
    return 0;
}
,["double","CPPredicate"]), new objj_method(sel_getUid("templateViews"), function $CPPredicateEditorRowTemplate__templateViews(self, _cmd)
{
    return self._views;
}
,["CPArray"]), new objj_method(sel_getUid("setPredicate:"), function $CPPredicateEditorRowTemplate__setPredicate_(self, _cmd, predicate)
{
    if (self._templateType == 2)
        objj_msgSend(self, "_setCompoundPredicate:", predicate);
    else
        objj_msgSend(self, "_setComparisonPredicate:", predicate);
}
,["void","CPPredicate"]), new objj_method(sel_getUid("displayableSubpredicatesOfPredicate:"), function $CPPredicateEditorRowTemplate__displayableSubpredicatesOfPredicate_(self, _cmd, predicate)
{
    if (objj_msgSend(predicate, "isKindOfClass:", objj_msgSend(CPCompoundPredicate, "class")))
    {
        var subpredicates = objj_msgSend(predicate, "subpredicates");
        if (objj_msgSend(subpredicates, "count") == 0)
            return nil;
        return subpredicates;
    }
    return nil;
}
,["CPArray","CPPredicate"]), new objj_method(sel_getUid("predicateWithSubpredicates:"), function $CPPredicateEditorRowTemplate__predicateWithSubpredicates_(self, _cmd, subpredicates)
{
    if (self._templateType == 2)
    {
        var type = objj_msgSend(objj_msgSend(self._views[0], "selectedItem"), "representedObject");
        return objj_msgSend(objj_msgSend(CPCompoundPredicate, "alloc"), "initWithType:subpredicates:", type, subpredicates);
    }
    if (self._templateType == 1)
    {
        var lhs = objj_msgSend(self, "_leftExpression"),
            rhs = objj_msgSend(self, "_rightExpression"),
            operator = objj_msgSend(objj_msgSend(self._views[1], "selectedItem"), "representedObject");
        return objj_msgSend(CPComparisonPredicate, "predicateWithLeftExpression:rightExpression:modifier:type:options:", lhs, rhs, objj_msgSend(self, "modifier"), operator, objj_msgSend(self, "options"));
    }
    return nil;
}
,["CPPredicate","CPArray"]), new objj_method(sel_getUid("leftExpressions"), function $CPPredicateEditorRowTemplate__leftExpressions(self, _cmd)
{
    if (self._templateType == 1 && !self._leftIsWildcard)
    {
        var view = objj_msgSend(self._views, "objectAtIndex:", 0);
        return objj_msgSend(objj_msgSend(view, "itemArray"), "valueForKey:", "representedObject");
    }
    return nil;
}
,["CPArray"]), new objj_method(sel_getUid("rightExpressions"), function $CPPredicateEditorRowTemplate__rightExpressions(self, _cmd)
{
    if (self._templateType == 1 && !self._rightIsWildcard)
    {
        var view = objj_msgSend(self._views, "objectAtIndex:", 2);
        return objj_msgSend(objj_msgSend(view, "itemArray"), "valueForKey:", "representedObject");
    }
    return nil;
}
,["CPArray"]), new objj_method(sel_getUid("compoundTypes"), function $CPPredicateEditorRowTemplate__compoundTypes(self, _cmd)
{
    if (self._templateType == 2)
    {
        var view = objj_msgSend(self._views, "objectAtIndex:", 0);
        return objj_msgSend(objj_msgSend(view, "itemArray"), "valueForKey:", "representedObject");
    }
    return nil;
}
,["CPArray"]), new objj_method(sel_getUid("modifier"), function $CPPredicateEditorRowTemplate__modifier(self, _cmd)
{
    if (self._templateType == 1)
        return self._predicateModifier;
    return nil;
}
,["CPComparisonPredicateModifier"]), new objj_method(sel_getUid("operators"), function $CPPredicateEditorRowTemplate__operators(self, _cmd)
{
    if (self._templateType == 1)
    {
        var view = objj_msgSend(self._views, "objectAtIndex:", 1);
        return objj_msgSend(objj_msgSend(view, "itemArray"), "valueForKey:", "representedObject");
    }
    return nil;
}
,["CPArray"]), new objj_method(sel_getUid("options"), function $CPPredicateEditorRowTemplate__options(self, _cmd)
{
    if (self._templateType == 1)
        return self._predicateOptions;
    return nil;
}
,["int"]), new objj_method(sel_getUid("rightExpressionAttributeType"), function $CPPredicateEditorRowTemplate__rightExpressionAttributeType(self, _cmd)
{
    return self._rightAttributeType;
}
,["CPAttributeType"]), new objj_method(sel_getUid("leftExpressionAttributeType"), function $CPPredicateEditorRowTemplate__leftExpressionAttributeType(self, _cmd)
{
    return self._leftAttributeType;
}
,["CPAttributeType"]), new objj_method(sel_getUid("_setCompoundPredicate:"), function $CPPredicateEditorRowTemplate___setCompoundPredicate_(self, _cmd, predicate)
{
    var left = objj_msgSend(self._views, "objectAtIndex:", 0),
        type = objj_msgSend(predicate, "compoundPredicateType"),
        index = objj_msgSend(left, "indexOfItemWithRepresentedObject:", type);
    objj_msgSend(left, "selectItemAtIndex:", index);
}
,["void","CPCompoundPredicate"]), new objj_method(sel_getUid("_setComparisonPredicate:"), function $CPPredicateEditorRowTemplate___setComparisonPredicate_(self, _cmd, predicate)
{
    var left = objj_msgSend(self._views, "objectAtIndex:", 0),
        middle = objj_msgSend(self._views, "objectAtIndex:", 1),
        right = objj_msgSend(self._views, "objectAtIndex:", 2),
        leftExpression = objj_msgSend(predicate, "leftExpression"),
        rightExpression = objj_msgSend(predicate, "rightExpression"),
        operator = objj_msgSend(predicate, "predicateOperatorType");
    if (self._leftIsWildcard)
        objj_msgSend(left, "setObjectValue:", objj_msgSend(leftExpression, "constantValue"));
    else
    {
        var index = objj_msgSend(left, "indexOfItemWithRepresentedObject:", leftExpression);
        objj_msgSend(left, "selectItemAtIndex:", index);
    }
    var op_index = objj_msgSend(middle, "indexOfItemWithRepresentedObject:", operator);
    objj_msgSend(middle, "selectItemAtIndex:", op_index);
    if (self._rightIsWildcard)
        objj_msgSend(right, "setObjectValue:", objj_msgSend(rightExpression, "constantValue"));
    else
    {
        var index = objj_msgSend(right, "indexOfItemWithRepresentedObject:", rightExpression);
        objj_msgSend(right, "selectItemAtIndex:", index);
    }
}
,["void","CPComparisonPredicate"]), new objj_method(sel_getUid("_leftExpression"), function $CPPredicateEditorRowTemplate___leftExpression(self, _cmd)
{
    return objj_msgSend(self, "_expressionFromView:forAttributeType:", self._views[0], self._leftAttributeType);
}
,["CPExpression"]), new objj_method(sel_getUid("_rightExpression"), function $CPPredicateEditorRowTemplate___rightExpression(self, _cmd)
{
    return objj_msgSend(self, "_expressionFromView:forAttributeType:", self._views[2], self._rightAttributeType);
}
,["CPExpression"]), new objj_method(sel_getUid("_expressionFromView:forAttributeType:"), function $CPPredicateEditorRowTemplate___expressionFromView_forAttributeType_(self, _cmd, aView, attributeType)
{
    if (attributeType == 0)
        return objj_msgSend(objj_msgSend(aView, "selectedItem"), "representedObject");
    var value;
    if (attributeType >= CPInteger16AttributeType && attributeType <= CPFloatAttributeType)
        value = objj_msgSend(aView, "intValue");
    else if (attributeType == CPBooleanAttributeType)
        value = objj_msgSend(aView, "state");
    else
        value = objj_msgSend(aView, "stringValue");
    return objj_msgSend(CPExpression, "expressionForConstantValue:", value);
}
,["CPExpression","CPView","CPAttributeType"]), new objj_method(sel_getUid("_rowType"), function $CPPredicateEditorRowTemplate___rowType(self, _cmd)
{
    return self._templateType - 1;
}
,["int"]), new objj_method(sel_getUid("copy"), function $CPPredicateEditorRowTemplate__copy(self, _cmd)
{
    return objj_msgSend(CPKeyedUnarchiver, "unarchiveObjectWithData:", objj_msgSend(CPKeyedArchiver, "archivedDataWithRootObject:", self));
}
,["id"]), new objj_method(sel_getUid("_templateType"), function $CPPredicateEditorRowTemplate___templateType(self, _cmd)
{
    return self._templateType;
}
,["int"]), new objj_method(sel_getUid("_displayValueForPredicateOperator:"), function $CPPredicateEditorRowTemplate___displayValueForPredicateOperator_(self, _cmd, operator)
{
    var value;
    switch(operator) {
    case CPLessThanPredicateOperatorType:
        value = "is less than";
        break;
    case CPLessThanOrEqualToPredicateOperatorType:
        value = "is less than or equal to";
        break;
    case CPGreaterThanPredicateOperatorType:
        value = "is greater than";
        break;
    case CPGreaterThanOrEqualToPredicateOperatorType:
        value = "is greater than or equal to";
        break;
    case CPEqualToPredicateOperatorType:
        value = "is";
        break;
    case CPNotEqualToPredicateOperatorType:
        value = "is not";
        break;
    case CPMatchesPredicateOperatorType:
        value = "matches";
        break;
    case CPLikePredicateOperatorType:
        value = "is like";
        break;
    case CPBeginsWithPredicateOperatorType:
        value = "begins with";
        break;
    case CPEndsWithPredicateOperatorType:
        value = "ends with";
        break;
    case CPInPredicateOperatorType:
        value = "in";
        break;
    case CPContainsPredicateOperatorType:
        value = "contains";
        break;
    case CPBetweenPredicateOperatorType:
        value = "between";
        break;
default:
        CPLogConsole("unknown predicate operator %d" + operator);
    }
    return value;
}
,["id","int"]), new objj_method(sel_getUid("_displayValueForCompoundPredicateType:"), function $CPPredicateEditorRowTemplate___displayValueForCompoundPredicateType_(self, _cmd, predicateType)
{
    var value;
    switch(predicateType) {
    case CPNotPredicateType:
        value = "None";
        break;
    case CPAndPredicateType:
        value = "All";
        break;
    case CPOrPredicateType:
        value = "Any";
        break;
default:
        value = objj_msgSend(CPString, "stringWithFormat:", "unknown compound predicate type %d", predicateType);
    }
    return value;
}
,["id","unsigned int"]), new objj_method(sel_getUid("_displayValueForConstantValue:"), function $CPPredicateEditorRowTemplate___displayValueForConstantValue_(self, _cmd, value)
{
    return objj_msgSend(value, "description");
}
,["id","id"]), new objj_method(sel_getUid("_displayValueForKeyPath:"), function $CPPredicateEditorRowTemplate___displayValueForKeyPath_(self, _cmd, keyPath)
{
    return keyPath;
}
,["id","CPString"]), new objj_method(sel_getUid("_viewFromExpressions:"), function $CPPredicateEditorRowTemplate___viewFromExpressions_(self, _cmd, expressions)
{
    var popup = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 100, 18)),
        count = objj_msgSend(expressions, "count");
    for (var i = 0; i < count; i++)
    {
        var exp = expressions[i],
            type = objj_msgSend(exp, "expressionType"),
            title;
        switch(type) {
        case CPKeyPathExpressionType:
            title = objj_msgSend(self, "_displayValueForKeyPath:", objj_msgSend(exp, "keyPath"));
            break;
        case CPConstantValueExpressionType:
            title = objj_msgSend(self, "_displayValueForConstantValue:", objj_msgSend(exp, "constantValue"));
            break;
default:
            objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Invalid Expression type " + type);
            break;
        }
        var item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", title, nil, "");
        objj_msgSend(item, "setRepresentedObject:", exp);
        objj_msgSend(popup, "addItem:", item);
    }
    objj_msgSend(popup, "sizeToFit");
    return popup;
}
,["CPPopUpButton","CPArray"]), new objj_method(sel_getUid("_viewFromOperatorTypes:"), function $CPPredicateEditorRowTemplate___viewFromOperatorTypes_(self, _cmd, operators)
{
    var popup = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 100, 18)),
        count = objj_msgSend(operators, "count");
    for (var i = 0; i < count; i++)
    {
        var op = operators[i],
            title = objj_msgSend(self, "_displayValueForPredicateOperator:", op),
            item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", title, nil, "");
        objj_msgSend(item, "setRepresentedObject:", op);
        objj_msgSend(popup, "addItem:", item);
    }
    objj_msgSend(popup, "sizeToFit");
    return popup;
}
,["CPPopUpButton","CPArray"]), new objj_method(sel_getUid("_viewFromCompoundTypes:"), function $CPPredicateEditorRowTemplate___viewFromCompoundTypes_(self, _cmd, compoundTypes)
{
    var popup = objj_msgSend(objj_msgSend(CPPopUpButton, "alloc"), "initWithFrame:", CGRectMake(0, 0, 100, 18)),
        count = objj_msgSend(compoundTypes, "count");
    for (var i = 0; i < count; i++)
    {
        var type = compoundTypes[i],
            title = objj_msgSend(self, "_displayValueForCompoundPredicateType:", type),
            item = objj_msgSend(objj_msgSend(CPMenuItem, "alloc"), "initWithTitle:action:keyEquivalent:", title, nil, "");
        objj_msgSend(item, "setRepresentedObject:", type);
        objj_msgSend(popup, "addItem:", item);
    }
    objj_msgSend(popup, "sizeToFit");
    return popup;
}
,["CPView","CPArray"]), new objj_method(sel_getUid("_viewFromAttributeType:"), function $CPPredicateEditorRowTemplate___viewFromAttributeType_(self, _cmd, attributeType)
{
    var view;
    if (attributeType >= CPInteger16AttributeType && attributeType <= CPFloatAttributeType)
    {
        view = objj_msgSend(self, "_textFieldWithFrame:", CGRectMake(0, 0, 50, 26));
    }
    else if (attributeType == CPStringAttributeType)
    {
        view = objj_msgSend(self, "_textFieldWithFrame:", CGRectMake(0, 0, 150, 26));
    }
    else if (attributeType == CPBooleanAttributeType)
    {
        view = objj_msgSend(objj_msgSend(CPCheckBox, "alloc"), "initWithFrame:", CGRectMake(0, 0, 50, 26));
    }
    else if (attributeType == CPDateAttributeType)
        view = objj_msgSend(objj_msgSend(CPDatePicker, "alloc"), "initWithFrame:", CGRectMake(0, 0, 150, 26));
    else
        return nil;
    objj_msgSend(view, "setTag:", attributeType);
    return view;
}
,["CPView","CPAttributeType"]), new objj_method(sel_getUid("_textFieldWithFrame:"), function $CPPredicateEditorRowTemplate___textFieldWithFrame_(self, _cmd, frame)
{
    var textField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", frame);
    objj_msgSend(textField, "setBezeled:", YES);
    objj_msgSend(textField, "setBezelStyle:", CPTextFieldSquareBezel);
    objj_msgSend(textField, "setBordered:", YES);
    objj_msgSend(textField, "setEditable:", YES);
    objj_msgSend(textField, "setFont:", objj_msgSend(CPFont, "systemFontOfSize:", 10));
    objj_msgSend(textField, "setSendsActionOnEndEditing:", YES);
    return textField;
}
,["CPTextField","CGRect"]), new objj_method(sel_getUid("_setOptions:"), function $CPPredicateEditorRowTemplate___setOptions_(self, _cmd, options)
{
    self._predicateOptions = options;
}
,["void","unsigned int"]), new objj_method(sel_getUid("_setModifier:"), function $CPPredicateEditorRowTemplate___setModifier_(self, _cmd, modifier)
{
    self._predicateModifier = modifier;
}
,["void","unsigned int"]), new objj_method(sel_getUid("description"), function $CPPredicateEditorRowTemplate__description(self, _cmd)
{
    if (self._templateType == 2)
        return objj_msgSend(CPString, "stringWithFormat:", "<%@ %p %@>", objj_msgSend(self, "className"), self, objj_msgSend(objj_msgSend(self, "compoundTypes"), "componentsJoinedByString:", ", "));
    else if (self._templateType == 1 && self._rightIsWildcard)
        return objj_msgSend(CPString, "stringWithFormat:", "<%@ %p [%@] [%@] %d>", objj_msgSend(self, "className"), self, objj_msgSend(objj_msgSend(self, "leftExpressions"), "componentsJoinedByString:", ", "), objj_msgSend(objj_msgSend(self, "operators"), "componentsJoinedByString:", ", "), objj_msgSend(self, "rightExpressionAttributeType"));
    else
        return objj_msgSend(CPString, "stringWithFormat:", "<%@ %p [%@] [%@] [%@]>", objj_msgSend(self, "className"), self, objj_msgSend(objj_msgSend(self, "leftExpressions"), "componentsJoinedByString:", ", "), objj_msgSend(objj_msgSend(self, "operators"), "componentsJoinedByString:", ", "), objj_msgSend(objj_msgSend(self, "rightExpressions"), "componentsJoinedByString:", ", "));
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_bestMatchForPredicate:inTemplates:quality:"), function $CPPredicateEditorRowTemplate___bestMatchForPredicate_inTemplates_quality_(self, _cmd, predicate, templates, quality)
{
    var count = objj_msgSend(templates, "count"),
        match_value = 0,
        templateIndex = CPNotFound,
        i;
    for (i = 0; i < count; i++)
    {
        var template = objj_msgSend(templates, "objectAtIndex:", i),
            amatch = objj_msgSend(template, "matchForPredicate:", predicate);
        if (amatch > match_value)
        {
            templateIndex = i;
            match_value = amatch;
        }
    }
    if (templateIndex == CPNotFound)
    {
        objj_msgSend(CPException, "raise:reason:", CPRangeException, "Unable to find template matching predicate: " + objj_msgSend(predicate, "predicateFormat"));
        return nil;
    }
    return objj_msgSend(templates, "objectAtIndex:", templateIndex);
}
,["id","CPPredicate","CPArray","double"]), new objj_method(sel_getUid("_operatorsForAttributeType:"), function $CPPredicateEditorRowTemplate___operatorsForAttributeType_(self, _cmd, attributeType)
{
    var operators_array = objj_msgSend(CPMutableArray, "array");
    switch(attributeType) {
    case CPInteger16AttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPInteger32AttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPInteger64AttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPDecimalAttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPDoubleAttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPFloatAttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
    case CPStringAttributeType:
        objj_msgSend(operators_array, "addObjects:", 99, 4, 5, 8, 9);
        break;
    case CPBooleanAttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5);
        break;
    case CPDateAttributeType:
        objj_msgSend(operators_array, "addObjects:", 4, 5, 0, 2, 1, 3);
        break;
default:
        CPLogConsole("Cannot create operators for an CPAttributeType " + attributeType);
        break;
    }
    return operators_array;
}
,["id","CPAttributeType"])]);
}var CPPredicateTemplateTypeKey = "CPPredicateTemplateType",
    CPPredicateTemplateOptionsKey = "CPPredicateTemplateOptions",
    CPPredicateTemplateModifierKey = "CPPredicateTemplateModifier",
    CPPredicateTemplateLeftAttributeTypeKey = "CPPredicateTemplateLeftAttributeType",
    CPPredicateTemplateRightAttributeTypeKey = "CPPredicateTemplateRightAttributeType",
    CPPredicateTemplateLeftIsWildcardKey = "CPPredicateTemplateLeftIsWildcard",
    CPPredicateTemplateRightIsWildcardKey = "CPPredicateTemplateRightIsWildcard",
    CPPredicateTemplateViewsKey = "CPPredicateTemplateViews";
{
var the_class = objj_getClass("CPPredicateEditorRowTemplate")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPredicateEditorRowTemplate\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPPredicateEditorRowTemplate__initWithCoder_(self, _cmd, coder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPredicateEditorRowTemplate").super_class }, "init");
    if (self != nil)
    {
        self._templateType = objj_msgSend(coder, "decodeIntForKey:", CPPredicateTemplateTypeKey);
        self._predicateOptions = objj_msgSend(coder, "decodeIntForKey:", CPPredicateTemplateOptionsKey);
        self._predicateModifier = objj_msgSend(coder, "decodeIntForKey:", CPPredicateTemplateModifierKey);
        self._leftAttributeType = objj_msgSend(coder, "decodeIntForKey:", CPPredicateTemplateLeftAttributeTypeKey);
        self._rightAttributeType = objj_msgSend(coder, "decodeIntForKey:", CPPredicateTemplateRightAttributeTypeKey);
        self._leftIsWildcard = objj_msgSend(coder, "decodeBoolForKey:", CPPredicateTemplateLeftIsWildcardKey);
        self._rightIsWildcard = objj_msgSend(coder, "decodeBoolForKey:", CPPredicateTemplateRightIsWildcardKey);
        self._views = objj_msgSend(coder, "decodeObjectForKey:", CPPredicateTemplateViewsKey);
        if (self._templateType == 1 && self._leftIsWildcard == NO)
        {
            var itemArray = objj_msgSend(self._views[0], "itemArray"),
                count = objj_msgSend(itemArray, "count");
            for (var i = 0; i < count; i++)
            {
                var item = itemArray[i];
                if (objj_msgSend(item, "representedObject") == nil)
                {
                    var exp = objj_msgSend(CPExpression, "expressionForKeyPath:", objj_msgSend(item, "title"));
                    objj_msgSend(item, "setRepresentedObject:", exp);
                }
            }
        }
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPPredicateEditorRowTemplate__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSend(coder, "encodeInt:forKey:", self._templateType, CPPredicateTemplateTypeKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._predicateOptions, CPPredicateTemplateOptionsKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._predicateModifier, CPPredicateTemplateModifierKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._leftAttributeType, CPPredicateTemplateLeftAttributeTypeKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._rightAttributeType, CPPredicateTemplateRightAttributeTypeKey);
    objj_msgSend(coder, "encodeBool:forKey:", self._leftIsWildcard, CPPredicateTemplateLeftIsWildcardKey);
    objj_msgSend(coder, "encodeBool:forKey:", self._rightIsWildcard, CPPredicateTemplateRightIsWildcardKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._views, CPPredicateTemplateViewsKey);
}
,["void","CPCoder"])]);
}p;14;CPRuleEditor.jt;96179;@STATIC;1.0;I;24;Foundation/CPPredicate.jI;20;Foundation/CPArray.jI;25;Foundation/CPDictionary.jI;23;Foundation/CPIndexSet.ji;14;CPPasteboard.ji;24;CPRuleEditor_Constants.ji;13;CPTextField.ji;17;CPViewAnimation.ji;8;CPView.ji;27;_CPRuleEditorViewSliceRow.ji;24;_CPRuleEditorLocalizer.jt;95886;objj_executeFile("Foundation/CPPredicate.j", NO);objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPIndexSet.j", NO);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPRuleEditor_Constants.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("CPViewAnimation.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("_CPRuleEditorViewSliceRow.j", YES);objj_executeFile("_CPRuleEditorLocalizer.j", YES);var CPRuleEditorItemPBoardType = "CPRuleEditorItemPBoardType",
    itemsContext = "items",
    valuesContext = "values",
    subrowsContext = "subrows_array",
    boundArrayContext = "bound_array";
{var the_class = objj_allocateClassPair(CPControl, "CPRuleEditor"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_suppressKeyDownHandling"), new objj_ivar("_allowsEmptyCompoundRows"), new objj_ivar("_disallowEmpty"), new objj_ivar("_delegateWantsValidation"), new objj_ivar("_editable"), new objj_ivar("_sendAction"), new objj_ivar("_rowClass"), new objj_ivar("_draggingRows"), new objj_ivar("_subviewIndexOfDropLine"), new objj_ivar("_dropLineView"), new objj_ivar("_rowCache"), new objj_ivar("_slices"), new objj_ivar("_predicate"), new objj_ivar("_itemsKeyPath"), new objj_ivar("_subrowsArrayKeyPath"), new objj_ivar("_typeKeyPath"), new objj_ivar("_valuesKeyPath"), new objj_ivar("_boundArrayKeyPath"), new objj_ivar("_slicesHolder"), new objj_ivar("_currentAnimation"), new objj_ivar("_lastRow"), new objj_ivar("_nestingMode"), new objj_ivar("_alignmentGridWidth"), new objj_ivar("_sliceHeight"), new objj_ivar("_ruleDataSource"), new objj_ivar("_ruleDelegate"), new objj_ivar("_boundArrayOwner"), new objj_ivar("_stringsFilename"), new objj_ivar("_isKeyDown"), new objj_ivar("_nestingModeDidChange"), new objj_ivar("_standardLocalizer"), new objj_ivar("_itemsAndValuesToAddForRowType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("boundArrayKeyPath"), function $CPRuleEditor__boundArrayKeyPath(self, _cmd)
{
    return self._boundArrayKeyPath;
}
,["CPString"]), new objj_method(sel_getUid("setBoundArrayKeyPath:"), function $CPRuleEditor__setBoundArrayKeyPath_(self, _cmd, newValue)
{
    self._boundArrayKeyPath = newValue;
}
,["void","CPString"]), new objj_method(sel_getUid("standardLocalizer"), function $CPRuleEditor__standardLocalizer(self, _cmd)
{
    return self._standardLocalizer;
}
,["_CPRuleEditorLocalizer"]), new objj_method(sel_getUid("setStandardLocalizer:"), function $CPRuleEditor__setStandardLocalizer_(self, _cmd, newValue)
{
    self._standardLocalizer = newValue;
}
,["void","_CPRuleEditorLocalizer"]), new objj_method(sel_getUid("initWithFrame:"), function $CPRuleEditor__initWithFrame_(self, _cmd, frame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "initWithFrame:", frame);
    if (self !== nil)
    {
        self._slices = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
        self._sliceHeight = 26.;
        self._nestingMode = CPRuleEditorNestingModeSimple;
        self._editable = YES;
        self._allowsEmptyCompoundRows = NO;
        self._disallowEmpty = NO;
        objj_msgSend(self, "setFormattingStringsFilename:", nil);
        objj_msgSend(self, "setCriteriaKeyPath:", "criteria");
        objj_msgSend(self, "setSubrowsKeyPath:", "subrows");
        objj_msgSend(self, "setRowTypeKeyPath:", "rowType");
        objj_msgSend(self, "setDisplayValuesKeyPath:", "displayValues");
        objj_msgSend(self, "setBoundArrayKeyPath:", "boundArray");
        self._slicesHolder = objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceHolder, "alloc"), "initWithFrame:", objj_msgSend(self, "bounds"));
        objj_msgSend(self, "addSubview:", self._slicesHolder);
        self._boundArrayOwner = objj_msgSend(objj_msgSend(_CPRuleEditorViewUnboundRowHolder, "alloc"), "init");
        objj_msgSend(self, "_initRuleEditorShared");
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("_initRuleEditorShared"), function $CPRuleEditor___initRuleEditorShared(self, _cmd)
{
    self._rowCache = objj_msgSend(objj_msgSend(CPMutableArray, "alloc"), "init");
    self._rowClass = objj_msgSend(_CPRuleEditorRowObject, "class");
    self._isKeyDown = NO;
    self._subviewIndexOfDropLine = CPNotFound;
    self._lastRow = 0;
    self._delegateWantsValidation = YES;
    self._suppressKeyDownHandling = NO;
    self._nestingModeDidChange = NO;
    self._sendAction = YES;
    self._itemsAndValuesToAddForRowType = {};
    var animation = objj_msgSend(objj_msgSend(CPViewAnimation, "alloc"), "initWithDuration:animationCurve:", 0.5, CPAnimationEaseInOut);
    objj_msgSend(self, "setAnimation:", animation);
    objj_msgSend(self._slicesHolder, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    self._dropLineView = objj_msgSend(self, "_createSliceDropSeparator");
    objj_msgSend(self._slicesHolder, "addSubview:", self._dropLineView);
    objj_msgSend(self, "registerForDraggedTypes:", objj_msgSend(CPArray, "arrayWithObjects:", CPRuleEditorItemPBoardType, nil));
    objj_msgSend(self._boundArrayOwner, "addObserver:forKeyPath:options:context:", self, self._boundArrayKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, boundArrayContext);
}
,["void"]), new objj_method(sel_getUid("delegate"), function $CPRuleEditor__delegate(self, _cmd)
{
    return self._ruleDelegate;
}
,["id"]), new objj_method(sel_getUid("setDelegate:"), function $CPRuleEditor__setDelegate_(self, _cmd, aDelegate)
{
    if (self._ruleDelegate === aDelegate)
        return;
    var nc = objj_msgSend(CPNotificationCenter, "defaultCenter");
    if (self._ruleDelegate)
        objj_msgSend(nc, "removeObserver:name:object:", self._ruleDelegate, nil, self);
    self._ruleDelegate = aDelegate;
    if (objj_msgSend(self._ruleDelegate, "respondsToSelector:", sel_getUid("ruleEditorRowsDidChange:")))
        objj_msgSend(nc, "addObserver:selector:name:object:", self._ruleDelegate, sel_getUid("ruleEditorRowsDidChange:"), CPRuleEditorRowsDidChangeNotification, nil);
}
,["void","id"]), new objj_method(sel_getUid("isEditable"), function $CPRuleEditor__isEditable(self, _cmd)
{
    return self._editable;
}
,["BOOL"]), new objj_method(sel_getUid("setEditable:"), function $CPRuleEditor__setEditable_(self, _cmd, editable)
{
    if (editable === self._editable)
        return;
    self._editable = editable;
    if (!self._editable)
        objj_msgSend(self, "_deselectAll");
    objj_msgSend(self._slices, "makeObjectsPerformSelector:withObject:", sel_getUid("setEditable:"), self._editable);
}
,["void","BOOL"]), new objj_method(sel_getUid("nestingMode"), function $CPRuleEditor__nestingMode(self, _cmd)
{
    return self._nestingMode;
}
,["CPRuleEditorNestingMode"]), new objj_method(sel_getUid("setNestingMode:"), function $CPRuleEditor__setNestingMode_(self, _cmd, mode)
{
    if (mode !== self._nestingMode)
    {
        self._nestingMode = mode;
        if (objj_msgSend(self, "numberOfRows") > 0)
            self._nestingModeDidChange = YES;
    }
}
,["void","CPRuleEditorNestingMode"]), new objj_method(sel_getUid("canRemoveAllRows"), function $CPRuleEditor__canRemoveAllRows(self, _cmd)
{
    return !self._disallowEmpty;
}
,["BOOL"]), new objj_method(sel_getUid("setCanRemoveAllRows:"), function $CPRuleEditor__setCanRemoveAllRows_(self, _cmd, canRemove)
{
    self._disallowEmpty = !canRemove;
    objj_msgSend(self, "_updateButtonVisibilities");
}
,["void","BOOL"]), new objj_method(sel_getUid("allowsEmptyCompoundRows"), function $CPRuleEditor__allowsEmptyCompoundRows(self, _cmd)
{
    return self._allowsEmptyCompoundRows;
}
,["BOOL"]), new objj_method(sel_getUid("setAllowsEmptyCompoundRows:"), function $CPRuleEditor__setAllowsEmptyCompoundRows_(self, _cmd, allows)
{
    self._allowsEmptyCompoundRows = allows;
    objj_msgSend(self, "_updateButtonVisibilities");
}
,["void","BOOL"]), new objj_method(sel_getUid("rowHeight"), function $CPRuleEditor__rowHeight(self, _cmd)
{
    return self._sliceHeight;
}
,["CPInteger"]), new objj_method(sel_getUid("setRowHeight:"), function $CPRuleEditor__setRowHeight_(self, _cmd, height)
{
    if (height === self._sliceHeight)
        return;
    self._sliceHeight = MAX(objj_msgSend(self, "_minimumFrameHeight"), height);
    objj_msgSend(self, "_reconfigureSubviewsAnimate:", NO);
}
,["void","float"]), new objj_method(sel_getUid("formattingDictionary"), function $CPRuleEditor__formattingDictionary(self, _cmd)
{
    return objj_msgSend(self._standardLocalizer, "dictionary");
}
,["CPDictionary"]), new objj_method(sel_getUid("setFormattingDictionary:"), function $CPRuleEditor__setFormattingDictionary_(self, _cmd, dictionary)
{
    objj_msgSend(self._standardLocalizer, "setDictionary:", dictionary);
    self._stringsFilename = nil;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("formattingStringsFilename"), function $CPRuleEditor__formattingStringsFilename(self, _cmd)
{
    return self._stringsFilename;
}
,["CPString"]), new objj_method(sel_getUid("setFormattingStringsFilename:"), function $CPRuleEditor__setFormattingStringsFilename_(self, _cmd, stringsFilename)
{
    if (self._standardLocalizer === nil)
        self._standardLocalizer = objj_msgSend(_CPRuleEditorLocalizer, "new");
    if (self._stringsFilename !== stringsFilename)
    {
        self._stringsFilename = stringsFilename || nil;
        if (stringsFilename !== nil)
        {
            if (!objj_msgSend(stringsFilename, "hasSuffix:", ".strings"))
                stringsFilename = stringsFilename + ".strings";
            var path = objj_msgSend(objj_msgSend(CPBundle, "mainBundle"), "pathForResource:", stringsFilename);
            if (path !== nil)
                objj_msgSend(self._standardLocalizer, "loadContentOfURL:", objj_msgSend(CPURL, "URLWithString:", path));
        }
    }
}
,["void","CPString"]), new objj_method(sel_getUid("reloadCriteria"), function $CPRuleEditor__reloadCriteria(self, _cmd)
{
    var current_rows = objj_msgSend(self._boundArrayOwner, "valueForKey:", self._boundArrayKeyPath);
    objj_msgSend(self, "_stopObservingRowObjectsRecursively:", current_rows);
    objj_msgSend(self._boundArrayOwner, "setValue:forKey:", objj_msgSend(CPArray, "arrayWithArray:", current_rows), self._boundArrayKeyPath);
}
,["void"]), new objj_method(sel_getUid("setCriteria:andDisplayValues:forRowAtIndex:"), function $CPRuleEditor__setCriteria_andDisplayValues_forRowAtIndex_(self, _cmd, criteria, values, rowIndex)
{
    if (criteria === nil || values === nil)
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, _cmd + ". criteria and values parameters must not be nil.");
    if (rowIndex < 0 || rowIndex >= objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, _cmd + ". rowIndex is out of bounds.");
    var rowObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", rowIndex), "rowObject");
    objj_msgSend(rowObject, "setValue:forKey:", criteria, self._itemsKeyPath);
    objj_msgSend(rowObject, "setValue:forKey:", values, self._valuesKeyPath);
    objj_msgSend(self, "reloadCriteria");
}
,["void","CPArray","CPArray","int"]), new objj_method(sel_getUid("criteriaForRow:"), function $CPRuleEditor__criteriaForRow_(self, _cmd, row)
{
    var rowcache = objj_msgSend(self, "_rowCacheForIndex:", row);
    if (rowcache)
        return objj_msgSend(objj_msgSend(rowcache, "rowObject"), "valueForKey:", self._itemsKeyPath);
    return nil;
}
,["id","int"]), new objj_method(sel_getUid("displayValuesForRow:"), function $CPRuleEditor__displayValuesForRow_(self, _cmd, row)
{
    var rowcache = objj_msgSend(self, "_rowCacheForIndex:", row);
    if (rowcache)
        return objj_msgSend(objj_msgSend(rowcache, "rowObject"), "valueForKey:", self._valuesKeyPath);
    return nil;
}
,["CPMutableArray","int"]), new objj_method(sel_getUid("numberOfRows"), function $CPRuleEditor__numberOfRows(self, _cmd)
{
    return objj_msgSend(self._slices, "count");
}
,["int"]), new objj_method(sel_getUid("parentRowForRow:"), function $CPRuleEditor__parentRowForRow_(self, _cmd, rowIndex)
{
    if (rowIndex < 0 || rowIndex >= objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, _cmd + " row " + rowIndex + " is out of range");
    var targetObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", rowIndex), "rowObject");
    for (var current_index = 0; current_index < rowIndex; current_index++)
    {
        if (objj_msgSend(self, "rowTypeForRow:", current_index) === CPRuleEditorRowTypeCompound)
        {
            var candidate = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", current_index), "rowObject"),
                subObjects = objj_msgSend(objj_msgSend(self, "_subrowObjectsOfObject:", candidate), "_representedObject");
            if (objj_msgSend(subObjects, "indexOfObjectIdenticalTo:", targetObject) !== CPNotFound)
                return current_index;
        }
    }
    return -1;
}
,["int","int"]), new objj_method(sel_getUid("rowTypeForRow:"), function $CPRuleEditor__rowTypeForRow_(self, _cmd, rowIndex)
{
    if (rowIndex < 0 || rowIndex > objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, _cmd + "row " + rowIndex + " is out of range");
    var rowcache = objj_msgSend(self, "_rowCacheForIndex:", rowIndex);
    if (rowcache)
    {
        var rowobject = objj_msgSend(rowcache, "rowObject");
        return objj_msgSend(rowobject, "valueForKey:", self._typeKeyPath);
    }
    return CPNotFound;
}
,["CPRuleEditorRowType","int"]), new objj_method(sel_getUid("subrowIndexesForRow:"), function $CPRuleEditor__subrowIndexesForRow_(self, _cmd, rowIndex)
{
    var object;
    if (rowIndex === -1)
        object = self._boundArrayOwner;
    else
        object = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", rowIndex), "rowObject");
    var subobjects = objj_msgSend(self, "_subrowObjectsOfObject:", object),
        objectsCount = objj_msgSend(subobjects, "count"),
        indexes = objj_msgSend(CPMutableIndexSet, "indexSet"),
        count = objj_msgSend(self, "numberOfRows");
    for (var i = rowIndex + 1; i < count; i++)
    {
        var candidate = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", i), "rowObject"),
            indexInSubrows = objj_msgSend(objj_msgSend(subobjects, "_representedObject"), "indexOfObjectIdenticalTo:", candidate);
        if (indexInSubrows !== CPNotFound)
        {
            objj_msgSend(indexes, "addIndex:", i);
            objectsCount--;
            if (objj_msgSend(self, "rowTypeForRow:", i) === CPRuleEditorRowTypeCompound)
                i += objj_msgSend(objj_msgSend(self, "subrowIndexesForRow:", i), "count");
        }
        if (objectsCount === 0)
            break;
    }
    return indexes;
}
,["CPIndexSet","int"]), new objj_method(sel_getUid("selectedRowIndexes"), function $CPRuleEditor__selectedRowIndexes(self, _cmd)
{
    return objj_msgSend(self, "_selectedSliceIndices");
}
,["CPIndexSet"]), new objj_method(sel_getUid("selectRowIndexes:byExtendingSelection:"), function $CPRuleEditor__selectRowIndexes_byExtendingSelection_(self, _cmd, indexes, extend)
{
    var count = objj_msgSend(self._slices, "count"),
        lastSelected = objj_msgSend(indexes, "lastIndex");
    if (lastSelected >= objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, "row indexes " + indexes + " are out of range");
    if (!extend)
        objj_msgSend(self, "_deselectAll");
    while (count--)
    {
        var slice = self._slices[count],
            rowIndex = objj_msgSend(slice, "rowIndex"),
            contains = objj_msgSend(indexes, "containsIndex:", rowIndex),
            shouldSelect = contains && !(extend && objj_msgSend(slice, "_isSelected"));
        if (contains)
            objj_msgSend(slice, "_setSelected:", shouldSelect);
        objj_msgSend(slice, "_setLastSelected:", rowIndex === lastSelected);
        objj_msgSend(slice, "setNeedsDisplay:", YES);
    }
}
,["void","CPIndexSet","BOOL"]), new objj_method(sel_getUid("addRow:"), function $CPRuleEditor__addRow_(self, _cmd, sender)
{
    var parentRowIndex = -1,
        rowtype,
        numberOfRows = objj_msgSend(self, "numberOfRows"),
        hasRows = numberOfRows > 0,
        nestingMode = objj_msgSend(self, "_applicableNestingMode");
    switch(nestingMode) {
    case CPRuleEditorNestingModeSimple:
        rowtype = hasRows ? CPRuleEditorRowTypeSimple : CPRuleEditorRowTypeCompound;
        if (hasRows)
            parentRowIndex = 0;
        break;
    case CPRuleEditorNestingModeSingle:
        if (hasRows)
            return;
    case CPRuleEditorNestingModeList:
        rowtype = CPRuleEditorRowTypeSimple;
        break;
    case CPRuleEditorNestingModeCompound:
        rowtype = CPRuleEditorRowTypeCompound;
        if (hasRows)
            parentRowIndex = 0;
        break;
default:
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, "Not supported CPRuleEditorNestingMode " + nestingMode);
    }
    objj_msgSend(self, "insertRowAtIndex:withType:asSubrowOfRow:animate:", numberOfRows, rowtype, parentRowIndex, YES);
}
,["void","id"]), new objj_method(sel_getUid("insertRowAtIndex:withType:asSubrowOfRow:animate:"), function $CPRuleEditor__insertRowAtIndex_withType_asSubrowOfRow_animate_(self, _cmd, rowIndex, rowType, parentRow, shouldAnimate)
{
    var newObject = objj_msgSend(self, "_insertNewRowAtIndex:ofType:withParentRow:", rowIndex, rowType, parentRow);
    if (rowType === CPRuleEditorRowTypeCompound && !self._allowsEmptyCompoundRows)
    {
        var subrow = objj_msgSend(self, "_insertNewRowAtIndex:ofType:withParentRow:", rowIndex + 1, CPRuleEditorRowTypeSimple, rowIndex);
    }
}
,["void","int","unsigned int","int","BOOL"]), new objj_method(sel_getUid("removeRowAtIndex:"), function $CPRuleEditor__removeRowAtIndex_(self, _cmd, rowIndex)
{
    if (rowIndex < 0 || rowIndex >= objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, "row " + rowIndex + " is out of range");
    objj_msgSend(self, "removeRowsAtIndexes:includeSubrows:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", rowIndex), NO);
}
,["void","int"]), new objj_method(sel_getUid("removeRowsAtIndexes:includeSubrows:"), function $CPRuleEditor__removeRowsAtIndexes_includeSubrows_(self, _cmd, rowIndexes, includeSubrows)
{
    if (objj_msgSend(rowIndexes, "count") === 0)
        return;
    if (objj_msgSend(rowIndexes, "lastIndex") >= objj_msgSend(self, "numberOfRows"))
        objj_msgSend(CPException, "raise:reason:", CPRangeException, "rows indexes " + rowIndexes + " are out of range");
    var current_index = objj_msgSend(rowIndexes, "firstIndex"),
        parentRowIndex = objj_msgSend(self, "parentRowForRow:", current_index),
        childsIndexes = objj_msgSend(CPMutableIndexSet, "indexSet"),
        subrows;
    if (parentRowIndex === -1)
        subrows = objj_msgSend(self, "_rootRowsArray");
    else
    {
        var parentRowObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", parentRowIndex), "rowObject");
        subrows = objj_msgSend(self, "_subrowObjectsOfObject:", parentRowObject);
    }
    while (current_index !== CPNotFound)
    {
        var rowObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", current_index), "rowObject"),
            relativeChildIndex = objj_msgSend(objj_msgSend(subrows, "_representedObject"), "indexOfObjectIdenticalTo:", rowObject);
        if (relativeChildIndex !== CPNotFound)
            objj_msgSend(childsIndexes, "addIndex:", relativeChildIndex);
        if (includeSubrows && objj_msgSend(self, "rowTypeForRow:", current_index) === CPRuleEditorRowTypeCompound)
        {
            var more_childs = objj_msgSend(self, "subrowIndexesForRow:", current_index);
            objj_msgSend(self, "removeRowsAtIndexes:includeSubrows:", more_childs, includeSubrows);
        }
        current_index = objj_msgSend(rowIndexes, "indexGreaterThanIndex:", current_index);
    }
    objj_msgSend(subrows, "removeObjectsAtIndexes:", childsIndexes);
}
,["void","CPIndexSet","BOOL"]), new objj_method(sel_getUid("predicate"), function $CPRuleEditor__predicate(self, _cmd)
{
    return self._predicate;
}
,["CPPredicate"]), new objj_method(sel_getUid("reloadPredicate"), function $CPRuleEditor__reloadPredicate(self, _cmd)
{
    objj_msgSend(self, "_updatePredicate");
}
,["void"]), new objj_method(sel_getUid("predicateForRow:"), function $CPRuleEditor__predicateForRow_(self, _cmd, aRow)
{
    var predicateParts = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init"),
        items = objj_msgSend(self, "criteriaForRow:", aRow),
        count = objj_msgSend(items, "count"),
        predicate,
        i;
    for (i = 0; i < count; i++)
    {
        var item = objj_msgSend(items, "objectAtIndex:", i),
            displayValue = objj_msgSend(objj_msgSend(self, "displayValuesForRow:", aRow), "objectAtIndex:", i),
            predpart = objj_msgSend(self._ruleDelegate, "ruleEditor:predicatePartsForCriterion:withDisplayValue:inRow:", self, item, displayValue, aRow);
        if (predpart)
            objj_msgSend(predicateParts, "addEntriesFromDictionary:", predpart);
    }
    if (objj_msgSend(self, "rowTypeForRow:", aRow) === CPRuleEditorRowTypeCompound)
    {
        var compoundPredicate,
            subpredicates = objj_msgSend(CPMutableArray, "array"),
            subrowsIndexes = objj_msgSend(self, "subrowIndexesForRow:", aRow);
        if (objj_msgSend(subrowsIndexes, "count") === 0)
            return nil;
        var current_index = objj_msgSend(subrowsIndexes, "firstIndex");
        while (current_index !== CPNotFound)
        {
            var subpredicate = objj_msgSend(self, "predicateForRow:", current_index);
            if (subpredicate !== nil)
                objj_msgSend(subpredicates, "addObject:", subpredicate);
            current_index = objj_msgSend(subrowsIndexes, "indexGreaterThanIndex:", current_index);
        }
        var compoundType = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateCompoundType);
        if (objj_msgSend(subpredicates, "count") === 0)
            return nil;
        else
        {
            try            {
                compoundPredicate = objj_msgSend(objj_msgSend(CPCompoundPredicate, "alloc"), "initWithType:subpredicates:", compoundType, subpredicates);
            }
            catch(error)             {
                CPLogConsole("Compound predicate error: [%@]\npredicateType:%i", objj_msgSend(error, "description"), compoundType);
                compoundPredicate = nil;
            }            finally             {
                return compoundPredicate;
            }
        }
    }
    var lhs = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateLeftExpression),
        rhs = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateRightExpression),
        operator = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateOperatorType),
        options = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateOptions),
        modifier = objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateComparisonModifier),
        selector = CPSelectorFromString(objj_msgSend(predicateParts, "objectForKey:", CPRuleEditorPredicateCustomSelector));
    if (lhs === nil)
    {
        CPLogConsole("missing left expression in predicate parts dictionary");
        return NULL;
    }
    if (rhs === nil)
    {
        CPLogConsole("missing right expression in predicate parts dictionary");
        return NULL;
    }
    if (selector === nil && operator === nil)
    {
        CPLogConsole("missing operator and selector in predicate parts dictionary");
        return NULL;
    }
    if (modifier === nil)
        CPLogConsole("missing modifier in predicate parts dictionary. Setting default: CPDirectPredicateModifier");
    if (options === nil)
        CPLogConsole("missing options in predicate parts dictionary. Setting default: CPCaseInsensitivePredicateOption");
    try    {
        if (selector !== nil)
            predicate = objj_msgSend(CPComparisonPredicate, "predicateWithLeftExpression:rightExpression:customSelector:", lhs, rhs, selector);
        else
            predicate = objj_msgSend(CPComparisonPredicate, "predicateWithLeftExpression:rightExpression:modifier:type:options:", lhs, rhs, modifier || CPDirectPredicateModifier, operator, options || CPCaseInsensitivePredicateOption);
    }
    catch(error)     {
        CPLogConsole("Row predicate error: [" + objj_msgSend(error, "description") + "] for row " + aRow);
        predicate = nil;
    }    finally     {
        return predicate;
    }
}
,["CPPredicate","CPInteger"]), new objj_method(sel_getUid("rowClass"), function $CPRuleEditor__rowClass(self, _cmd)
{
    return self._rowClass;
}
,["Class"]), new objj_method(sel_getUid("setRowClass:"), function $CPRuleEditor__setRowClass_(self, _cmd, rowClass)
{
    if (rowClass === objj_msgSend(CPMutableDictionary, "class"))
        rowClass = objj_msgSend(_CPRuleEditorRowObject, "class");
    self._rowClass = rowClass;
}
,["void","Class"]), new objj_method(sel_getUid("rowTypeKeyPath"), function $CPRuleEditor__rowTypeKeyPath(self, _cmd)
{
    return self._typeKeyPath;
}
,["CPString"]), new objj_method(sel_getUid("setRowTypeKeyPath:"), function $CPRuleEditor__setRowTypeKeyPath_(self, _cmd, keyPath)
{
    if (self._typeKeyPath !== keyPath)
        self._typeKeyPath = keyPath;
}
,["void","CPString"]), new objj_method(sel_getUid("subrowsKeyPath"), function $CPRuleEditor__subrowsKeyPath(self, _cmd)
{
    return self._subrowsArrayKeyPath;
}
,["CPString"]), new objj_method(sel_getUid("setSubrowsKeyPath:"), function $CPRuleEditor__setSubrowsKeyPath_(self, _cmd, keyPath)
{
    if (self._subrowsArrayKeyPath !== keyPath)
        self._subrowsArrayKeyPath = keyPath;
}
,["void","CPString"]), new objj_method(sel_getUid("criteriaKeyPath"), function $CPRuleEditor__criteriaKeyPath(self, _cmd)
{
    return self._itemsKeyPath;
}
,["CPString"]), new objj_method(sel_getUid("setCriteriaKeyPath:"), function $CPRuleEditor__setCriteriaKeyPath_(self, _cmd, keyPath)
{
    if (self._itemsKeyPath !== keyPath)
        self._itemsKeyPath = keyPath;
}
,["void","CPString"]), new objj_method(sel_getUid("displayValuesKeyPath"), function $CPRuleEditor__displayValuesKeyPath(self, _cmd)
{
    return self._valuesKeyPath;
}
,["CPString"]), new objj_method(sel_getUid("setDisplayValuesKeyPath:"), function $CPRuleEditor__setDisplayValuesKeyPath_(self, _cmd, keyPath)
{
    if (self._valuesKeyPath !== keyPath)
        self._valuesKeyPath = keyPath;
}
,["void","CPString"]), new objj_method(sel_getUid("animation"), function $CPRuleEditor__animation(self, _cmd)
{
    return self._currentAnimation;
}
,["id"]), new objj_method(sel_getUid("setAnimation:"), function $CPRuleEditor__setAnimation_(self, _cmd, animation)
{
    self._currentAnimation = animation;
    objj_msgSend(self._currentAnimation, "setDelegate:", self);
}
,["void","CPViewAnimation"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPRuleEditor__acceptsFirstResponder(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("keyDown:"), function $CPRuleEditor__keyDown_(self, _cmd, event)
{
    if (!self._suppressKeyDownHandling && objj_msgSend(self, "_applicableNestingMode") === CPRuleEditorNestingModeCompound && !self._isKeyDown && objj_msgSend(event, "modifierFlags") & CPAlternateKeyMask)
    {
        objj_msgSend(self._slices, "makeObjectsPerformSelector:withObject:", sel_getUid("_configurePlusButtonByRowType:"), CPRuleEditorRowTypeCompound);
    }
    self._isKeyDown = YES;
}
,["void","CPEvent"]), new objj_method(sel_getUid("keyUp:"), function $CPRuleEditor__keyUp_(self, _cmd, event)
{
    if (!self._suppressKeyDownHandling)
    {
        objj_msgSend(self._slices, "makeObjectsPerformSelector:withObject:", sel_getUid("_configurePlusButtonByRowType:"), CPRuleEditorRowTypeSimple);
    }
    self._isKeyDown = NO;
}
,["void","CPEvent"]), new objj_method(sel_getUid("_createSliceDropSeparator"), function $CPRuleEditor___createSliceDropSeparator(self, _cmd)
{
    var view = objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceDropSeparator, "alloc"), "initWithFrame:", CGRectMake(0, -10, objj_msgSend(self, "frame").size.width, 2));
    objj_msgSend(view, "setAutoresizingMask:", CPViewWidthSizable);
    return view;
}
,["_CPRuleEditorViewSliceDropSeparator"]), new objj_method(sel_getUid("_suppressKeyDownHandling"), function $CPRuleEditor___suppressKeyDownHandling(self, _cmd)
{
    return self._suppressKeyDownHandling;
}
,["BOOL"]), new objj_method(sel_getUid("_wantsRowAnimations"), function $CPRuleEditor___wantsRowAnimations(self, _cmd)
{
    return self._currentAnimation !== nil;
}
,["BOOL"]), new objj_method(sel_getUid("_updateButtonVisibilities"), function $CPRuleEditor___updateButtonVisibilities(self, _cmd)
{
    objj_msgSend(self._slices, "makeObjectsPerformSelector:", sel_getUid("_updateButtonVisibilities"));
}
,["void"]), new objj_method(sel_getUid("_alignmentGridWidth"), function $CPRuleEditor___alignmentGridWidth(self, _cmd)
{
    return self._alignmentGridWidth;
}
,["float"]), new objj_method(sel_getUid("_minimumFrameHeight"), function $CPRuleEditor___minimumFrameHeight(self, _cmd)
{
    return 26.;
}
,["float"]), new objj_method(sel_getUid("_applicableNestingMode"), function $CPRuleEditor___applicableNestingMode(self, _cmd)
{
    if (!self._nestingModeDidChange)
        return self._nestingMode;
    var a = self._nestingMode === CPRuleEditorNestingModeCompound || self._nestingMode === CPRuleEditorNestingModeSimple,
        b = objj_msgSend(self, "rowTypeForRow:", 0) === CPRuleEditorRowTypeCompound;
    if (a === b)
        return self._nestingMode;
    return a ? CPRuleEditorNestingModeList : CPRuleEditorNestingModeSimple;
}
,["CPRuleEditorNestingMode"]), new objj_method(sel_getUid("_shouldHideAddButtonForSlice:"), function $CPRuleEditor___shouldHideAddButtonForSlice_(self, _cmd, slice)
{
    return !self._editable || objj_msgSend(self, "_applicableNestingMode") === CPRuleEditorNestingModeSingle;
}
,["BOOL","id"]), new objj_method(sel_getUid("_shouldHideSubtractButtonForSlice:"), function $CPRuleEditor___shouldHideSubtractButtonForSlice_(self, _cmd, slice)
{
    if (!self._editable)
        return YES;
    if (!self._disallowEmpty)
        return NO;
    var shouldHide,
        rowIndex = objj_msgSend(slice, "rowIndex"),
        parentIndex = objj_msgSend(self, "parentRowForRow:", rowIndex),
        subrowsIndexes = objj_msgSend(self, "subrowIndexesForRow:", parentIndex),
        nestingMode = objj_msgSend(self, "_applicableNestingMode");
    switch(nestingMode) {
    case CPRuleEditorNestingModeCompound:
    case CPRuleEditorNestingModeSimple:
        shouldHide = objj_msgSend(subrowsIndexes, "count") === 1 && !self._allowsEmptyCompoundRows || parentIndex === -1;
        break;
    case CPRuleEditorNestingModeList:
        shouldHide = objj_msgSend(self, "numberOfRows") === 1;
        break;
    case CPRuleEditorNestingModeSingle:
        shouldHide = YES;
        break;
default:
        shouldHide = NO;
    }
    return shouldHide;
}
,["BOOL","id"]), new objj_method(sel_getUid("_rowCacheForIndex:"), function $CPRuleEditor___rowCacheForIndex_(self, _cmd, index)
{
    return objj_msgSend(self._rowCache, "objectAtIndex:", index);
}
,["id","int"]), new objj_method(sel_getUid("_searchCacheForRowObject:"), function $CPRuleEditor___searchCacheForRowObject_(self, _cmd, rowObject)
{
    var count = objj_msgSend(self._rowCache, "count"),
        i;
    for (i = 0; i < count; i++)
    {
        var cache = self._rowCache[i];
        if (objj_msgSend(cache, "rowObject") === rowObject)
            return cache;
    }
    return nil;
}
,["id","id"]), new objj_method(sel_getUid("_rowIndexForRowObject:"), function $CPRuleEditor___rowIndexForRowObject_(self, _cmd, rowobject)
{
    if (rowobject === self._boundArrayOwner)
        return -1;
    return objj_msgSend(objj_msgSend(self, "_searchCacheForRowObject:", rowobject), "rowIndex");
}
,["int","id"]), new objj_method(sel_getUid("_subrowObjectsOfObject:"), function $CPRuleEditor___subrowObjectsOfObject_(self, _cmd, object)
{
    if (object === self._boundArrayOwner)
        return objj_msgSend(self, "_rootRowsArray");
    return objj_msgSend(object, "mutableArrayValueForKey:", self._subrowsArrayKeyPath);
}
,["CPMutableArray","id"]), new objj_method(sel_getUid("_childlessParentsIfSlicesWereDeletedAtIndexes:"), function $CPRuleEditor___childlessParentsIfSlicesWereDeletedAtIndexes_(self, _cmd, indexes)
{
    var childlessParents = objj_msgSend(CPIndexSet, "indexSet"),
        current_index = objj_msgSend(indexes, "firstIndex");
    while (current_index !== CPNotFound)
    {
        var parentIndex = objj_msgSend(self, "parentRowForRow:", current_index),
            subrowsIndexes = objj_msgSend(self, "subrowIndexesForRow:", parentIndex);
        if (objj_msgSend(subrowsIndexes, "count") === 1)
        {
            if (parentIndex !== -1)
                return objj_msgSend(CPIndexSet, "indexSetWithIndex:", 0);
            var childlessGranPa = objj_msgSend(self, "_childlessParentsIfSlicesWereDeletedAtIndexes:", objj_msgSend(CPIndexSet, "indexSetWithIndex:", parentIndex));
            objj_msgSend(childlessParents, "addIndexes:", childlessGranPa);
        }
        current_index = objj_msgSend(indexes, "indexGreaterThanIndex:", current_index);
    }
    return childlessParents;
}
,["CPIndexSet","id"]), new objj_method(sel_getUid("_includeSubslicesForSlicesAtIndexes:"), function $CPRuleEditor___includeSubslicesForSlicesAtIndexes_(self, _cmd, indexes)
{
    var subindexes = objj_msgSend(indexes, "copy"),
        current_index = objj_msgSend(indexes, "firstIndex");
    while (current_index !== CPNotFound)
    {
        var sub = objj_msgSend(self, "subrowIndexesForRow:", current_index);
        objj_msgSend(subindexes, "addIndexes:", objj_msgSend(self, "_includeSubslicesForSlicesAtIndexes:", sub));
        current_index = objj_msgSend(indexes, "indexGreaterThanIndex:", current_index);
    }
    return subindexes;
}
,["CPIndexSet","CPIndexSet"]), new objj_method(sel_getUid("_deleteSlice:"), function $CPRuleEditor___deleteSlice_(self, _cmd, slice)
{
    var rowindexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(slice, "rowIndex"));
    if (!self._allowsEmptyCompoundRows)
    {
        var childlessIndexes = objj_msgSend(self, "_childlessParentsIfSlicesWereDeletedAtIndexes:", rowindexes);
        if (objj_msgSend(childlessIndexes, "count") > 0)
            rowindexes = childlessIndexes;
    }
    objj_msgSend(self, "removeRowsAtIndexes:includeSubrows:", rowindexes, YES);
    objj_msgSend(self, "_updatePredicate");
    objj_msgSend(self, "_sendRuleAction");
    objj_msgSend(self, "_postRuleOptionChangedNotification");
    objj_msgSend(self, "_postRowCountChangedNotificationOfType:indexes:", CPRuleEditorRowsDidChangeNotification, rowindexes);
}
,["void","id"]), new objj_method(sel_getUid("_rootRowsArray"), function $CPRuleEditor___rootRowsArray(self, _cmd)
{
    return objj_msgSend(self._boundArrayOwner, "mutableArrayValueForKey:", self._boundArrayKeyPath);
}
,["CPArray"]), new objj_method(sel_getUid("_nextUnusedItems:andValues:forRow:forRowType:"), function $CPRuleEditor___nextUnusedItems_andValues_forRow_forRowType_(self, _cmd, items, values, rowIndex, type)
{
    var parentItem = objj_msgSend(items, "lastObject"),
        childrenCount = objj_msgSend(self, "_queryNumberOfChildrenOfItem:withRowType:", parentItem, type),
        foundIndex = CPNotFound;
    if (childrenCount === 0)
        return NO;
    var current_criterions = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(self, "numberOfRows"),
        row;
    for (row = 0; row < count; row++)
    {
        var aCriteria = objj_msgSend(self, "criteriaForRow:", row),
            itemIndex = objj_msgSend(items, "count");
        if (objj_msgSend(self, "rowTypeForRow:", row) === type && itemIndex < objj_msgSend(aCriteria, "count"))
        {
            var crit = objj_msgSend(aCriteria, "objectAtIndex:", itemIndex);
            objj_msgSend(current_criterions, "addObject:", crit);
        }
    }
    while (foundIndex === CPNotFound)
    {
        var buffer = objj_msgSend(CPMutableArray, "arrayWithArray:", current_criterions),
            i;
        for (i = 0; i < childrenCount; i++)
        {
            var child = objj_msgSend(self, "_queryChild:ofItem:withRowType:", i, parentItem, type);
            if (objj_msgSend(current_criterions, "indexOfObject:", child) === CPNotFound)
            {
                foundIndex = i;
                break;
            }
        }
        if (foundIndex === CPNotFound)
        {
            for (var k = 0; k < childrenCount; k++)
            {
                var anobject = objj_msgSend(self, "_queryChild:ofItem:withRowType:", k, parentItem, type),
                    index = objj_msgSend(buffer, "indexOfObject:", anobject);
                if (index !== CPNotFound)
                    objj_msgSend(buffer, "removeObjectAtIndex:", index);
            }
            current_criterions = buffer;
        }
    }
    var foundItem = objj_msgSend(self, "_queryChild:ofItem:withRowType:", foundIndex, parentItem, type),
        foundValue = objj_msgSend(self, "_queryValueForItem:inRow:", foundItem, rowIndex);
    objj_msgSend(items, "addObject:", foundItem);
    objj_msgSend(values, "addObject:", foundValue);
    return YES;
}
,["BOOL","CPArray","CPArray","int","unsigned int"]), new objj_method(sel_getUid("_getItemsAndValuesToAddForRow:ofType:"), function $CPRuleEditor___getItemsAndValuesToAddForRow_ofType_(self, _cmd, rowIndex, type)
{
    var itemsAndValues = objj_msgSend(CPMutableArray, "array"),
        items = objj_msgSend(CPMutableArray, "array"),
        values = objj_msgSend(CPMutableArray, "array"),
        unusedItems = YES;
    while (unusedItems)
        unusedItems = objj_msgSend(self, "_nextUnusedItems:andValues:forRow:forRowType:", items, values, rowIndex, type);
    var count = objj_msgSend(items, "count");
    for (var i = 0; i < count; i++)
    {
        var item = objj_msgSend(items, "objectAtIndex:", i),
            value = objj_msgSend(values, "objectAtIndex:", i),
            itemAndValue = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", item, "item", value, "value");
        objj_msgSend(itemsAndValues, "addObject:", itemAndValue);
    }
    return itemsAndValues;
}
,["CPMutableArray","int","CPRuleEditorRowType"]), new objj_method(sel_getUid("_addOptionFromSlice:ofRowType:"), function $CPRuleEditor___addOptionFromSlice_ofRowType_(self, _cmd, slice, type)
{
    var rowIndexEvent = objj_msgSend(slice, "rowIndex"),
        rowTypeEvent = objj_msgSend(self, "rowTypeForRow:", rowIndexEvent),
        insertIndex = rowIndexEvent + 1,
        parentRowIndex = rowTypeEvent === CPRuleEditorRowTypeCompound ? rowIndexEvent : objj_msgSend(self, "parentRowForRow:", rowIndexEvent);
    objj_msgSend(self, "insertRowAtIndex:withType:asSubrowOfRow:animate:", insertIndex, type, parentRowIndex, YES);
}
,["void","id","unsigned int"]), new objj_method(sel_getUid("_insertNewRowAtIndex:ofType:withParentRow:"), function $CPRuleEditor___insertNewRowAtIndex_ofType_withParentRow_(self, _cmd, insertIndex, rowtype, parentRowIndex)
{
    var row = objj_msgSend(objj_msgSend(objj_msgSend(self, "rowClass"), "alloc"), "init"),
        itemsandvalues = objj_msgSend(self, "_getItemsAndValuesToAddForRow:ofType:", insertIndex, rowtype),
        newitems = objj_msgSend(itemsandvalues, "valueForKey:", "item"),
        newvalues = objj_msgSend(itemsandvalues, "valueForKey:", "value");
    objj_msgSend(row, "setValue:forKey:", newitems, self._itemsKeyPath);
    objj_msgSend(row, "setValue:forKey:", newvalues, self._valuesKeyPath);
    objj_msgSend(row, "setValue:forKey:", rowtype, self._typeKeyPath);
    objj_msgSend(row, "setValue:forKey:", objj_msgSend(CPMutableArray, "array"), self._subrowsArrayKeyPath);
    var subrowsObjects;
    if (parentRowIndex === -1 || objj_msgSend(self, "_applicableNestingMode") === CPRuleEditorNestingModeList)
        subrowsObjects = objj_msgSend(self, "_rootRowsArray");
    else
    {
        var parentRowObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", parentRowIndex), "rowObject");
        subrowsObjects = objj_msgSend(self, "_subrowObjectsOfObject:", parentRowObject);
    }
    var relInsertIndex = insertIndex - parentRowIndex - 1;
    objj_msgSend(subrowsObjects, "insertObject:atIndex:", row, relInsertIndex);
    objj_msgSend(self, "_updatePredicate");
    objj_msgSend(self, "_sendRuleAction");
    objj_msgSend(self, "_postRuleOptionChangedNotification");
    objj_msgSend(self, "_postRowCountChangedNotificationOfType:indexes:", CPRuleEditorRowsDidChangeNotification, objj_msgSend(CPIndexSet, "indexSetWithIndex:", insertIndex));
    return row;
}
,["id","int","CPRuleEditorRowType","int"]), new objj_method(sel_getUid("_startObservingRowObjectsRecursively:"), function $CPRuleEditor___startObservingRowObjectsRecursively_(self, _cmd, rowObjects)
{
    objj_msgSend(self._boundArrayOwner, "addObserver:forKeyPath:options:context:", self, self._boundArrayKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, boundArrayContext);
    var count = objj_msgSend(rowObjects, "count");
    for (var i = 0; i < count; i++)
    {
        var rowObject = objj_msgSend(rowObjects, "objectAtIndex:", i);
        objj_msgSend(rowObject, "addObserver:forKeyPath:options:context:", self, self._itemsKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, itemsContext);
        objj_msgSend(rowObject, "addObserver:forKeyPath:options:context:", self, self._valuesKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, valuesContext);
        objj_msgSend(rowObject, "addObserver:forKeyPath:options:context:", self, self._subrowsArrayKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, subrowsContext);
        var subrows = objj_msgSend(self, "_subrowObjectsOfObject:", rowObject);
        if (objj_msgSend(subrows, "count") > 0)
            objj_msgSend(self, "_startObservingRowObjectsRecursively:", subrows);
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("_stopObservingRowObjectsRecursively:"), function $CPRuleEditor___stopObservingRowObjectsRecursively_(self, _cmd, rowObjects)
{
    objj_msgSend(self._boundArrayOwner, "removeObserver:forKeyPath:", self, self._boundArrayKeyPath);
    var count = objj_msgSend(rowObjects, "count");
    for (var i = 0; i < count; i++)
    {
        var rowObject = objj_msgSend(rowObjects, "objectAtIndex:", i);
        objj_msgSend(rowObject, "removeObserver:forKeyPath:", self, self._itemsKeyPath);
        objj_msgSend(rowObject, "removeObserver:forKeyPath:", self, self._valuesKeyPath);
        objj_msgSend(rowObject, "removeObserver:forKeyPath:", self, self._subrowsArrayKeyPath);
        var subrows = objj_msgSend(rowObject, "valueForKey:", self._subrowsArrayKeyPath);
        if (objj_msgSend(subrows, "count") > 0)
            objj_msgSend(self, "_stopObservingRowObjectsRecursively:", subrows);
    }
}
,["void","CPArray"]), new objj_method(sel_getUid("observeValueForKeyPath:ofObject:change:context:"), function $CPRuleEditor__observeValueForKeyPath_ofObject_change_context_(self, _cmd, keypath, object, change, context)
{
    var changeKind = objj_msgSend(change, "objectForKey:", CPKeyValueChangeKindKey),
        changeNewValue = objj_msgSend(change, "objectForKey:", CPKeyValueChangeNewKey),
        changeOldValue = objj_msgSend(change, "objectForKey:", CPKeyValueChangeOldKey),
        newRows,
        oldRows;
    if (context === boundArrayContext || context === subrowsContext)
    {
        if (changeKind === CPKeyValueChangeSetting)
        {
            newRows = changeNewValue;
            oldRows = changeOldValue;
        }
        else if (changeKind === CPKeyValueChangeInsertion)
        {
            newRows = objj_msgSend(self, "_subrowObjectsOfObject:", object);
            oldRows = objj_msgSend(CPArray, "arrayWithArray:", newRows);
            objj_msgSend(oldRows, "removeObjectsInArray:", changeNewValue);
        }
        objj_msgSend(self, "_changedRowArray:withOldRowArray:forParent:", newRows, oldRows, object);
        objj_msgSend(self, "_reconfigureSubviewsAnimate:", objj_msgSend(self, "_wantsRowAnimations"));
    }
}
,["void","CPString","id","CPDictionary","void"]), new objj_method(sel_getUid("_changedItem:toItem:inRow:atCriteriaIndex:"), function $CPRuleEditor___changedItem_toItem_inRow_atCriteriaIndex_(self, _cmd, fromItem, toItem, aRow, fromItemIndex)
{
    var criteria = objj_msgSend(self, "criteriaForRow:", aRow),
        displayValues = objj_msgSend(self, "displayValuesForRow:", aRow),
        rowType = objj_msgSend(self, "rowTypeForRow:", aRow),
        anItem = toItem,
        items = objj_msgSend(criteria, "subarrayWithRange:", CPMakeRange(0, fromItemIndex)),
        values = objj_msgSend(displayValues, "subarrayWithRange:", CPMakeRange(0, fromItemIndex));
    self._lastRow = aRow;
    while (YES)
    {
        objj_msgSend(items, "addObject:", anItem);
        var value = objj_msgSend(self, "_queryValueForItem:inRow:", anItem, aRow);
        objj_msgSend(values, "addObject:", value);
        if (!objj_msgSend(self, "_queryNumberOfChildrenOfItem:withRowType:", anItem, rowType))
            break;
        anItem = objj_msgSend(self, "_queryChild:ofItem:withRowType:", 0, anItem, rowType);
    }
    var object = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", aRow), "rowObject");
    objj_msgSend(object, "setValue:forKey:", items, self._itemsKeyPath);
    objj_msgSend(object, "setValue:forKey:", values, self._valuesKeyPath);
    var slice = objj_msgSend(self._slices, "objectAtIndex:", aRow);
    objj_msgSend(slice, "_reconfigureSubviews");
    objj_msgSend(self, "_updatePredicate");
    objj_msgSend(self, "_sendRuleAction");
    objj_msgSend(self, "_postRuleOptionChangedNotification");
}
,["void","id","id","int","int"]), new objj_method(sel_getUid("_changedRowArray:withOldRowArray:forParent:"), function $CPRuleEditor___changedRowArray_withOldRowArray_forParent_(self, _cmd, newRows, oldRows, parentRowObject)
{
    var newRowCount = objj_msgSend(newRows, "count"),
        oldRowCount = objj_msgSend(oldRows, "count"),
        deltaCount = newRowCount - oldRowCount,
        minusCount = MIN(newRowCount, oldRowCount),
        maxCount = MAX(newRowCount, oldRowCount),
        insertCacheIndexes = objj_msgSend(CPIndexSet, "indexSet"),
        newCaches = objj_msgSend(CPArray, "array"),
        parentCacheIndentation,
        parentCacheIndex = objj_msgSend(self, "_rowIndexForRowObject:", parentRowObject),
        newRowCacheIndex = 0,
        changeStartIndex = 0;
    objj_msgSend(self, "_stopObservingRowObjectsRecursively:", oldRows);
    objj_msgSend(self, "_startObservingRowObjectsRecursively:", newRows);
    if (parentCacheIndex === -1)
        parentCacheIndentation = -1;
    else
        parentCacheIndentation = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", parentCacheIndex), "indentation");
    for (; newRowCacheIndex < newRowCount; newRowCacheIndex++)
    {
        var newCacheGlobalIndex = parentCacheIndex + 1 + newRowCacheIndex,
            obj = objj_msgSend(newRows, "objectAtIndex:", newRowCacheIndex),
            newRowType = objj_msgSend(obj, "valueForKey:", self._typeKeyPath),
            cache = objj_msgSend(objj_msgSend(_CPRuleEditorCache, "alloc"), "init");
        objj_msgSend(cache, "setRowObject:", obj);
        objj_msgSend(cache, "setRowIndex:", newCacheGlobalIndex);
        objj_msgSend(cache, "setIndentation:", parentCacheIndentation + 1);
        objj_msgSend(insertCacheIndexes, "addIndex:", newCacheGlobalIndex);
        objj_msgSend(newCaches, "addObject:", cache);
    }
    objj_msgSend(self._rowCache, "removeObjectsInRange:", CPMakeRange(parentCacheIndex + 1, objj_msgSend(oldRows, "count")));
    objj_msgSend(self._rowCache, "insertObjects:atIndexes:", newCaches, insertCacheIndexes);
    for (; changeStartIndex < minusCount; changeStartIndex++)
    {
        var oldrow = objj_msgSend(oldRows, "objectAtIndex:", changeStartIndex),
            newrow = objj_msgSend(newRows, "objectAtIndex:", changeStartIndex);
        if (newrow !== oldrow)
            break;
    }
    var replaceCount = deltaCount === 0 ? maxCount : maxCount - minusCount,
        startIndex = parentCacheIndex + changeStartIndex + 1;
    if (deltaCount <= 0)
    {
        var removeIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(startIndex, replaceCount)),
            removeSlices = objj_msgSend(self._slices, "objectsAtIndexes:", removeIndexes);
        objj_msgSend(removeSlices, "makeObjectsPerformSelector:", sel_getUid("removeFromSuperview"));
        objj_msgSend(self._slices, "removeObjectsAtIndexes:", removeIndexes);
    }
    if (deltaCount >= 0)
    {
        var newIndentation = parentCacheIndentation + 1,
            newIndex = startIndex;
        for (; newIndex < startIndex + replaceCount; newIndex++)
        {
            var newslice = objj_msgSend(self, "_newSlice"),
                rowType = objj_msgSend(self, "rowTypeForRow:", newIndex);
            objj_msgSend(newslice, "setRowIndex:", newIndex);
            objj_msgSend(newslice, "setIndentation:", newIndentation);
            objj_msgSend(newslice, "_setRowType:", rowType);
            objj_msgSend(newslice, "_configurePlusButtonByRowType:", CPRuleEditorRowTypeSimple);
            objj_msgSend(self._slices, "insertObject:atIndex:", newslice, newIndex);
        }
    }
    var emptyArray = objj_msgSend(CPArray, "array"),
        count = objj_msgSend(oldRows, "count"),
        n;
    for (n = 0; n < count; n++)
    {
        var oldRow = objj_msgSend(oldRows, "objectAtIndex:", n),
            subOldRows = objj_msgSend(self, "_subrowObjectsOfObject:", oldRow);
        if (objj_msgSend(subOldRows, "count") > 0)
            objj_msgSend(self, "_changedRowArray:withOldRowArray:forParent:", emptyArray, subOldRows, oldRow);
    }
    count = objj_msgSend(newRows, "count");
    for (n = 0; n < count; n++)
    {
        var newRow = objj_msgSend(newRows, "objectAtIndex:", n),
            subnewRows = objj_msgSend(self, "_subrowObjectsOfObject:", newRow);
        if (objj_msgSend(subnewRows, "count") > 0)
            objj_msgSend(self, "_changedRowArray:withOldRowArray:forParent:", subnewRows, emptyArray, newRow);
    }
}
,["void","CPArray","CPArray","id"]), new objj_method(sel_getUid("bind:toObject:withKeyPath:options:"), function $CPRuleEditor__bind_toObject_withKeyPath_options_(self, _cmd, aBinding, observableController, aKeyPath, options)
{
    if (objj_msgSend(aBinding, "isEqualToString:", "rows"))
    {
        objj_msgSend(self, "unbind:", aBinding);
        objj_msgSend(self, "_setBoundDataSource:withKeyPath:options:", observableController, aKeyPath, options);
        objj_msgSend(self._rowCache, "removeAllObjects");
        objj_msgSend(self._slices, "removeAllObjects");
        var newRows = objj_msgSend(CPArray, "array"),
            oldRows = objj_msgSend(self, "_rootRowsArray");
        objj_msgSend(self, "_changedRowArray:withOldRowArray:forParent:", newRows, oldRows, self._boundArrayOwner);
    }
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "bind:toObject:withKeyPath:options:", aBinding, observableController, aKeyPath, options);
}
,["void","CPString","id","CPString","CPDictionary"]), new objj_method(sel_getUid("unbind:"), function $CPRuleEditor__unbind_(self, _cmd, object)
{
    self._rowClass = objj_msgSend(_CPRuleEditorRowObject, "class");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "unbind:", object);
}
,["void","id"]), new objj_method(sel_getUid("_setBoundDataSource:withKeyPath:options:"), function $CPRuleEditor___setBoundDataSource_withKeyPath_options_(self, _cmd, datasource, keyPath, options)
{
    if (objj_msgSend(datasource, "respondsToSelector:", sel_getUid("objectClass")))
        self._rowClass = objj_msgSend(datasource, "objectClass");
    self._boundArrayKeyPath = keyPath;
    self._boundArrayOwner = datasource;
    objj_msgSend(self._boundArrayOwner, "addObserver:forKeyPath:options:context:", self, self._boundArrayKeyPath, CPKeyValueObservingOptionOld | CPKeyValueObservingOptionNew, boundArrayContext);
}
,["void","id","CPString","CPDictionary"]), new objj_method(sel_getUid("_setPredicate:"), function $CPRuleEditor___setPredicate_(self, _cmd, predicate)
{
    if (self._predicate !== predicate)
        self._predicate = predicate;
}
,["void","CPPredicate"]), new objj_method(sel_getUid("_updatePredicate"), function $CPRuleEditor___updatePredicate(self, _cmd)
{
    if (self._delegateWantsValidation)
    {
        var selector = sel_getUid("ruleEditor:predicatePartsForCriterion:withDisplayValue:inRow:");
        if (!objj_msgSend(self._ruleDelegate, "respondsToSelector:", selector))
            return;
        self._delegateWantsValidation = NO;
    }
    var subpredicates = objj_msgSend(CPMutableArray, "array"),
        subindexes = objj_msgSend(self, "subrowIndexesForRow:", -1),
        current_index = objj_msgSend(subindexes, "firstIndex");
    while (current_index !== CPNotFound)
    {
        var subpredicate = objj_msgSend(self, "predicateForRow:", current_index);
        if (subpredicate !== nil)
            objj_msgSend(subpredicates, "addObject:", subpredicate);
        current_index = objj_msgSend(subindexes, "indexGreaterThanIndex:", current_index);
    }
    var new_predicate = objj_msgSend(objj_msgSend(CPCompoundPredicate, "alloc"), "initWithType:subpredicates:", CPOrPredicateType, subpredicates);
    objj_msgSend(self, "_setPredicate:", new_predicate);
}
,["void"]), new objj_method(sel_getUid("_newSlice"), function $CPRuleEditor___newSlice(self, _cmd)
{
    var sliceRect = CGRectMake(0, 0, CGRectGetWidth(objj_msgSend(self, "frame")), 0),
        slice = objj_msgSend(self, "_createNewSliceWithFrame:ruleEditorView:", sliceRect, self);
    return slice;
}
,["_CPRuleEditorViewSliceRow"]), new objj_method(sel_getUid("_createNewSliceWithFrame:ruleEditorView:"), function $CPRuleEditor___createNewSliceWithFrame_ruleEditorView_(self, _cmd, frame, editor)
{
    return objj_msgSend(objj_msgSend(_CPRuleEditorViewSliceRow, "alloc"), "initWithFrame:ruleEditorView:", frame, editor);
}
,["_CPRuleEditorViewSliceRow","CGRect","CPRuleEditor"]), new objj_method(sel_getUid("_reconfigureSubviewsAnimate:"), function $CPRuleEditor___reconfigureSubviewsAnimate_(self, _cmd, animate)
{
    var viewAnimations = objj_msgSend(CPMutableArray, "array"),
        added_slices = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(self._slices, "count");
    objj_msgSend(self, "_updateSliceRows");
    if (objj_msgSend(objj_msgSend(self, "superview"), "isKindOfClass:", objj_msgSend(CPClipView, "class")))
        objj_msgSend(self, "setFrameSize:", CGSizeMake(CGRectGetWidth(objj_msgSend(self, "frame")), count * self._sliceHeight));
    for (var i = 0; i < count; i++)
    {
        var aslice = objj_msgSend(self._slices, "objectAtIndex:", i),
            targetRect = objj_msgSend(aslice, "_animationTargetRect"),
            startRect = objj_msgSend(aslice, "frame"),
            startIndex = objj_msgSend(aslice, "rowIndex") - 1;
        if (objj_msgSend(aslice, "superview") === nil)
        {
            startRect = CGRectMake(0, startIndex * self._sliceHeight, CGRectGetWidth(startRect), self._sliceHeight);
            objj_msgSend(aslice, "_reconfigureSubviews");
            objj_msgSend(added_slices, "addObject:", aslice);
        }
        if (animate)
        {
            var animation = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
            objj_msgSend(animation, "setObject:forKey:", aslice, CPViewAnimationTargetKey);
            objj_msgSend(animation, "setObject:forKey:", startRect, CPViewAnimationStartFrameKey);
            objj_msgSend(animation, "setObject:forKey:", targetRect, CPViewAnimationEndFrameKey);
            objj_msgSend(viewAnimations, "insertObject:atIndex:", animation, 0);
        }
        else
            objj_msgSend(aslice, "setFrame:", targetRect);
    }
    var addcount = objj_msgSend(added_slices, "count");
    for (var i = 0; i < addcount; i++)
        objj_msgSend(self._slicesHolder, "addSubview:positioned:relativeTo:", added_slices[i], CPWindowBelow, nil);
    if (animate)
    {
        objj_msgSend(self._currentAnimation, "setViewAnimations:", viewAnimations);
        objj_msgSend(self._currentAnimation, "startAnimation");
    }
    self._lastRow = objj_msgSend(self, "numberOfRows") - 1;
    if (self._lastRow === -1)
        self._nestingModeDidChange = NO;
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSend(self._slices, "makeObjectsPerformSelector:", sel_getUid("_updateButtonVisibilities"));
}
,["void","BOOL"]), new objj_method(sel_getUid("animationDidEnd:"), function $CPRuleEditor__animationDidEnd_(self, _cmd, animation)
{
}
,["void","CPViewAnimation"]), new objj_method(sel_getUid("_updateSliceRows"), function $CPRuleEditor___updateSliceRows(self, _cmd)
{
    var width = objj_msgSend(self, "frame").size.width,
        count = objj_msgSend(self._slices, "count");
    for (var i = 0; i < count; i++)
    {
        var slice = objj_msgSend(self._slices, "objectAtIndex:", i),
            targetRect = CGRectMake(0, i * self._sliceHeight, width, self._sliceHeight);
        objj_msgSend(slice, "setRowIndex:", i);
        objj_msgSend(slice, "_setAnimationTargetRect:", targetRect);
    }
}
,["void"]), new objj_method(sel_getUid("_backgroundColors"), function $CPRuleEditor___backgroundColors(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "alternating-row-colors");
}
,["CPArray"]), new objj_method(sel_getUid("_selectedRowColor"), function $CPRuleEditor___selectedRowColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "selected-color");
}
,["CPColor"]), new objj_method(sel_getUid("_sliceTopBorderColor"), function $CPRuleEditor___sliceTopBorderColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "slice-top-border-color");
}
,["CPColor"]), new objj_method(sel_getUid("_sliceBottomBorderColor"), function $CPRuleEditor___sliceBottomBorderColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "slice-bottom-border-color");
}
,["CPColor"]), new objj_method(sel_getUid("_sliceLastBottomBorderColor"), function $CPRuleEditor___sliceLastBottomBorderColor(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "slice-last-bottom-border-color");
}
,["CPColor"]), new objj_method(sel_getUid("font"), function $CPRuleEditor__font(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "font");
}
,["CPFont"]), new objj_method(sel_getUid("_addImage"), function $CPRuleEditor___addImage(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "add-image");
}
,["CPImage"]), new objj_method(sel_getUid("_removeImage"), function $CPRuleEditor___removeImage(self, _cmd)
{
    return objj_msgSend(self, "valueForThemeAttribute:", "remove-image");
}
,["CPImage"]), new objj_method(sel_getUid("_toolTipForAddCompoundRowButton"), function $CPRuleEditor___toolTipForAddCompoundRowButton(self, _cmd)
{
    return objj_msgSend(self._standardLocalizer, "localizedStringForString:", "Add compound row");
}
,["CPString"]), new objj_method(sel_getUid("_toolTipForAddSimpleRowButton"), function $CPRuleEditor___toolTipForAddSimpleRowButton(self, _cmd)
{
    return objj_msgSend(self._standardLocalizer, "localizedStringForString:", "Add row");
}
,["CPString"]), new objj_method(sel_getUid("_toolTipForDeleteRowButton"), function $CPRuleEditor___toolTipForDeleteRowButton(self, _cmd)
{
    return objj_msgSend(self._standardLocalizer, "localizedStringForString:", "Delete row");
}
,["CPString"]), new objj_method(sel_getUid("_updateSliceIndentations"), function $CPRuleEditor___updateSliceIndentations(self, _cmd)
{
    objj_msgSend(self, "_updateSliceIndentationAtIndex:toIndentation:withIndexSet:", 0, 0, objj_msgSend(self, "subrowIndexesForRow:", 0));
}
,["void"]), new objj_method(sel_getUid("_updateSliceIndentationAtIndex:toIndentation:withIndexSet:"), function $CPRuleEditor___updateSliceIndentationAtIndex_toIndentation_withIndexSet_(self, _cmd, index, indentation, indexes)
{
    var current_index = objj_msgSend(indexes, "firstIndex");
    while (current_index !== CPNotFound)
    {
        var subindexes = objj_msgSend(self, "subrowIndexesForRow:", index);
        objj_msgSend(self, "_updateSliceIndentationAtIndex:toIndentation:withIndexSet:", current_index, indentation + 1, subindexes);
        current_index = objj_msgSend(indexes, "indexGreaterThanIndex:", current_index);
    }
    objj_msgSend(objj_msgSend(self._slices, "objectAtIndex:", index), "setIndentation:", indentation);
}
,["void","int","int","id"]), new objj_method(sel_getUid("_selectedSlices"), function $CPRuleEditor___selectedSlices(self, _cmd)
{
    var _selectedSlices = objj_msgSend(CPMutableArray, "array"),
        count = objj_msgSend(self._slices, "count"),
        i;
    for (i = 0; i < count; i++)
    {
        var slice = self._slices[i];
        if (objj_msgSend(slice, "_isSelected"))
            objj_msgSend(_selectedSlices, "addObject:", slice);
    }
    return _selectedSlices;
}
,["CPArray"]), new objj_method(sel_getUid("_lastSelectedSliceIndex"), function $CPRuleEditor___lastSelectedSliceIndex(self, _cmd)
{
    var lastIndex = -1,
        count = objj_msgSend(self._slices, "count"),
        i;
    for (i = 0; i < count; i++)
    {
        var slice = self._slices[i];
        if (objj_msgSend(slice, "_isLastSelected"))
            return objj_msgSend(slice, "rowIndex");
    }
    return CPNotFound;
}
,["int"]), new objj_method(sel_getUid("_mouseUpOnSlice:withEvent:"), function $CPRuleEditor___mouseUpOnSlice_withEvent_(self, _cmd, slice, event)
{
    if (objj_msgSend(slice, "_rowType") !== CPRuleEditorRowTypeSimple)
        return;
    var modifierFlags = objj_msgSend(event, "modifierFlags"),
        extend = modifierFlags & CPCommandKeyMask || modifierFlags & CPShiftKeyMask,
        rowIndexes = objj_msgSend(CPIndexSet, "indexSetWithIndex:", objj_msgSend(slice, "rowIndex"));
    objj_msgSend(self, "selectRowIndexes:byExtendingSelection:", rowIndexes, extend);
}
,["void","id","CPEvent"]), new objj_method(sel_getUid("_mouseDownOnSlice:withEvent:"), function $CPRuleEditor___mouseDownOnSlice_withEvent_(self, _cmd, slice, event)
{
}
,["void","id","CPEvent"]), new objj_method(sel_getUid("_rightMouseDownOnSlice:withEvent:"), function $CPRuleEditor___rightMouseDownOnSlice_withEvent_(self, _cmd, slice, event)
{
}
,["void","_CPRuleEditorViewSlice","CPEvent"]), new objj_method(sel_getUid("_performClickOnSlice:withEvent:"), function $CPRuleEditor___performClickOnSlice_withEvent_(self, _cmd, slice, event)
{
}
,["void","id","CPEvent"]), new objj_method(sel_getUid("_setSuppressKeyDownHandling:"), function $CPRuleEditor___setSuppressKeyDownHandling_(self, _cmd, flag)
{
    self._suppressKeyDownHandling = flag;
}
,["void","BOOL"]), new objj_method(sel_getUid("selectAll:"), function $CPRuleEditor__selectAll_(self, _cmd, sender)
{
    var count = objj_msgSend(self._slices, "count");
    while (count--)
    {
        var slice = self._slices[count];
        objj_msgSend(slice, "_setSelected:", YES);
        objj_msgSend(slice, "setNeedsDisplay:", YES);
    }
}
,["void","id"]), new objj_method(sel_getUid("_deselectAll"), function $CPRuleEditor___deselectAll(self, _cmd)
{
    var count = objj_msgSend(self._slices, "count");
    while (count--)
    {
        var slice = self._slices[count];
        objj_msgSend(slice, "_setSelected:", NO);
        objj_msgSend(slice, "_setLastSelected:", NO);
        objj_msgSend(slice, "setNeedsDisplay:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("_queryNumberOfChildrenOfItem:withRowType:"), function $CPRuleEditor___queryNumberOfChildrenOfItem_withRowType_(self, _cmd, item, type)
{
    return objj_msgSend(self._ruleDelegate, "ruleEditor:numberOfChildrenForCriterion:withRowType:", self, item, type);
}
,["int","id","CPRuleEditorRowType"]), new objj_method(sel_getUid("_queryChild:ofItem:withRowType:"), function $CPRuleEditor___queryChild_ofItem_withRowType_(self, _cmd, childIndex, item, type)
{
    return objj_msgSend(self._ruleDelegate, "ruleEditor:child:forCriterion:withRowType:", self, childIndex, item, type);
}
,["id","int","id","CPRuleEditorRowType"]), new objj_method(sel_getUid("_queryValueForItem:inRow:"), function $CPRuleEditor___queryValueForItem_inRow_(self, _cmd, item, row)
{
    return objj_msgSend(self._ruleDelegate, "ruleEditor:displayValueForCriterion:inRow:", self, item, row);
}
,["id","id","int"]), new objj_method(sel_getUid("_lastRow"), function $CPRuleEditor___lastRow(self, _cmd)
{
    return self._lastRow;
}
,["int"]), new objj_method(sel_getUid("_countOfRowsStartingAtObject:"), function $CPRuleEditor___countOfRowsStartingAtObject_(self, _cmd, object)
{
    var index = objj_msgSend(self, "_rowIndexForRowObject:", object);
    return objj_msgSend(self, "numberOfRows") - index;
}
,["int","id"]), new objj_method(sel_getUid("_setAlignmentGridWidth:"), function $CPRuleEditor___setAlignmentGridWidth_(self, _cmd, width)
{
    self._alignmentGridWidth = width;
}
,["void","float"]), new objj_method(sel_getUid("_validateItem:value:inRow:"), function $CPRuleEditor___validateItem_value_inRow_(self, _cmd, item, value, row)
{
    return objj_msgSend(self, "_queryCanSelectItem:displayValue:inRow:", item, value, row);
}
,["BOOL","id","id","int"]), new objj_method(sel_getUid("_queryCanSelectItem:displayValue:inRow:"), function $CPRuleEditor___queryCanSelectItem_displayValue_inRow_(self, _cmd, item, value, row)
{
    return YES;
}
,["BOOL","id","id","int"]), new objj_method(sel_getUid("_windowChangedKeyState"), function $CPRuleEditor___windowChangedKeyState(self, _cmd)
{
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("setNeedsDisplay:"), function $CPRuleEditor__setNeedsDisplay_(self, _cmd, flag)
{
    objj_msgSend(self._slices, "makeObjectsPerformSelector:withObject:", sel_getUid("setNeedsDisplay:"), flag);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "setNeedsDisplay:", flag);
}
,["void","BOOL"]), new objj_method(sel_getUid("setFrameSize:"), function $CPRuleEditor__setFrameSize_(self, _cmd, size)
{
    objj_msgSend(self, "setNeedsDisplay:", YES);
    if (CGRectGetWidth(objj_msgSend(self, "frame")) !== size.width)
        objj_msgSend(self._slices, "makeObjectsPerformSelector:", sel_getUid("setNeedsLayout"));
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "setFrameSize:", size);
}
,["void","CGSize"]), new objj_method(sel_getUid("_selectedSliceIndices"), function $CPRuleEditor___selectedSliceIndices(self, _cmd)
{
    var selectedIndices = objj_msgSend(CPMutableIndexSet, "indexSet"),
        count = objj_msgSend(self._slices, "count"),
        i;
    for (i = 0; i < count; i++)
    {
        var slice = self._slices[i];
        if (objj_msgSend(slice, "_isSelected"))
            objj_msgSend(selectedIndices, "addIndex:", objj_msgSend(slice, "rowIndex"));
    }
    return selectedIndices;
}
,["CPIndexSet"]), new objj_method(sel_getUid("mouseDragged:"), function $CPRuleEditor__mouseDragged_(self, _cmd, event)
{
    if (!self._editable)
        return;
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(event, "locationInWindow"), nil),
        view = objj_msgSend(self._slices, "objectAtIndex:", FLOOR(point.y / self._sliceHeight));
    if (objj_msgSend(self, "_dragShouldBeginFromMouseDown:", view))
        objj_msgSend(self, "_performDragForSlice:withEvent:", view, event);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_dragShouldBeginFromMouseDown:"), function $CPRuleEditor___dragShouldBeginFromMouseDown_(self, _cmd, view)
{
    return (objj_msgSend(self, "nestingMode") === CPRuleEditorNestingModeList || objj_msgSend(view, "rowIndex") !== 0) && self._editable && objj_msgSend(view, "isKindOfClass:", objj_msgSend(_CPRuleEditorViewSliceRow, "class")) && self._draggingRows === nil;
}
,["BOOL","CPView"]), new objj_method(sel_getUid("_performDragForSlice:withEvent:"), function $CPRuleEditor___performDragForSlice_withEvent_(self, _cmd, slice, event)
{
    var dragPoint,
        mainRowIndex = objj_msgSend(slice, "rowIndex"),
        draggingRows = objj_msgSend(CPIndexSet, "indexSetWithIndex:", mainRowIndex),
        selected_indices = objj_msgSend(self, "_selectedSliceIndices"),
        pasteboard = objj_msgSend(CPPasteboard, "pasteboardWithName:", CPDragPboard);
    objj_msgSend(pasteboard, "declareTypes:owner:", objj_msgSend(CPArray, "arrayWithObjects:", CPRuleEditorItemPBoardType, nil), self);
    if (objj_msgSend(selected_indices, "containsIndex:", mainRowIndex))
        objj_msgSend(draggingRows, "addIndexes:", selected_indices);
    self._draggingRows = objj_msgSend(self, "_includeSubslicesForSlicesAtIndexes:", draggingRows);
    var firstIndex = objj_msgSend(self._draggingRows, "firstIndex"),
        firstSlice = objj_msgSend(self._slices, "objectAtIndex:", firstIndex),
        dragview = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", objj_msgSend(firstSlice, "frame"));
    var html = firstSlice._DOMElement.innerHTML;
    dragview._DOMElement.innerHTML = objj_msgSend(html, "copy");
    objj_msgSend(dragview, "setBackgroundColor:", objj_msgSend(firstSlice, "backgroundColor"));
    objj_msgSend(dragview, "setAlphaValue:", 0.7);
    dragPoint = CGPointMake(0, firstIndex * self._sliceHeight);
    objj_msgSend(self, "dragView:at:offset:event:pasteboard:source:slideBack:", dragview, dragPoint, CGSizeMake(0, self._sliceHeight), event, pasteboard, self, YES);
    return YES;
}
,["BOOL","id","CPEvent"]), new objj_method(sel_getUid("draggingEntered:"), function $CPRuleEditor__draggingEntered_(self, _cmd, sender)
{
    if (objj_msgSend(sender, "draggingSource") === self)
    {
        objj_msgSend(self, "_clearDropLine");
        return CPDragOperationMove;
    }
    return CPDragOperationNone;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("draggingExited:"), function $CPRuleEditor__draggingExited_(self, _cmd, sender)
{
    objj_msgSend(self, "_clearDropLine");
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void","id"]), new objj_method(sel_getUid("_clearDropLine"), function $CPRuleEditor___clearDropLine(self, _cmd)
{
    objj_msgSend(self._dropLineView, "setAlphaValue:", 0);
    if (self._subviewIndexOfDropLine !== CPNotFound && self._subviewIndexOfDropLine < self._lastRow)
    {
        var previousBelowSlice = objj_msgSend(self._slices, "objectAtIndex:", self._subviewIndexOfDropLine);
        objj_msgSend(previousBelowSlice, "setFrameOrigin:", CGPointMake(0, objj_msgSend(previousBelowSlice, "rowIndex") * self._sliceHeight));
    }
    self._subviewIndexOfDropLine = CPNotFound;
}
,["void"]), new objj_method(sel_getUid("draggingUpdated:"), function $CPRuleEditor__draggingUpdated_(self, _cmd, sender)
{
    var point = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(sender, "draggingLocation"), nil),
        y = point.y + self._sliceHeight / 2,
        indexOfDropLine = FLOOR(y / self._sliceHeight),
        numberOfRows = objj_msgSend(self, "numberOfRows");
    if (indexOfDropLine < 0 || indexOfDropLine > numberOfRows || indexOfDropLine >= objj_msgSend(self._draggingRows, "firstIndex") && indexOfDropLine <= objj_msgSend(self._draggingRows, "lastIndex") + 1)
    {
        if (self._subviewIndexOfDropLine !== CPNotFound && indexOfDropLine !== self._subviewIndexOfDropLine)
            objj_msgSend(self, "_clearDropLine");
        return CPDragOperationNone;
    }
    if (self._subviewIndexOfDropLine !== indexOfDropLine)
    {
        if (self._subviewIndexOfDropLine !== CPNotFound && self._subviewIndexOfDropLine < numberOfRows)
        {
            var previousBelowSlice = objj_msgSend(self._slices, "objectAtIndex:", self._subviewIndexOfDropLine);
            objj_msgSend(previousBelowSlice, "setFrameOrigin:", CGPointMake(0, objj_msgSend(previousBelowSlice, "rowIndex") * self._sliceHeight));
        }
        if (indexOfDropLine <= self._lastRow && indexOfDropLine < numberOfRows)
        {
            var belowSlice = objj_msgSend(self._slices, "objectAtIndex:", indexOfDropLine);
            objj_msgSend(belowSlice, "setFrameOrigin:", CGPointMake(0, objj_msgSend(belowSlice, "rowIndex") * self._sliceHeight + 2));
        }
        objj_msgSend(self._dropLineView, "setAlphaValue:", 1);
        objj_msgSend(self._dropLineView, "setFrameOrigin:", CGPointMake(CGRectGetMinX(objj_msgSend(self._dropLineView, "frame")), indexOfDropLine * self._sliceHeight));
        self._subviewIndexOfDropLine = indexOfDropLine;
    }
    return CPDragOperationMove;
}
,["CPDragOperation","id"]), new objj_method(sel_getUid("prepareForDragOperation:"), function $CPRuleEditor__prepareForDragOperation_(self, _cmd, sender)
{
    return self._subviewIndexOfDropLine !== CPNotFound;
}
,["BOOL","id"]), new objj_method(sel_getUid("performDragOperation:"), function $CPRuleEditor__performDragOperation_(self, _cmd, info)
{
    var aboveInsertIndexCount = 0,
        object,
        removeIndex;
    var rowObjects = objj_msgSend(self._rowCache, "valueForKey:", "rowObject"),
        index = objj_msgSend(self._draggingRows, "lastIndex");
    var parentRowIndex = objj_msgSend(self, "parentRowForRow:", index),
        parentRowObject = parentRowIndex === -1 ? self._boundArrayOwner : objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", parentRowIndex), "rowObject"),
        insertIndex = self._subviewIndexOfDropLine;
    while (index !== CPNotFound)
    {
        if (index >= insertIndex)
        {
            removeIndex = index + aboveInsertIndexCount;
            aboveInsertIndexCount += 1;
        }
        else
        {
            removeIndex = index;
            insertIndex -= 1;
        }
        object = objj_msgSend(rowObjects, "objectAtIndex:", removeIndex);
        objj_msgSend(self, "removeRowAtIndex:", removeIndex);
        objj_msgSend(objj_msgSend(self, "_subrowObjectsOfObject:", parentRowObject), "insertObject:atIndex:", object, insertIndex - parentRowIndex - 1);
        index = objj_msgSend(self._draggingRows, "indexLessThanIndex:", index);
    }
    objj_msgSend(self, "_clearDropLine");
    self._draggingRows = nil;
    return YES;
}
,["BOOL","id"]), new objj_method(sel_getUid("_draggingTypes"), function $CPRuleEditor___draggingTypes(self, _cmd)
{
    return objj_msgSend(CPIndexSet, "indexSetWithIndex:", CPDragOperationMove);
}
,["CPIndexSet"]), new objj_method(sel_getUid("draggedView:endedAt:operation:"), function $CPRuleEditor__draggedView_endedAt_operation_(self, _cmd, dragView, aPoint, operation)
{
    self._draggingRows = nil;
    objj_msgSend(self, "_updatePredicate");
    objj_msgSend(self, "_sendRuleAction");
    objj_msgSend(self, "_postRuleOptionChangedNotification");
    objj_msgSend(self, "_postRowCountChangedNotificationOfType:indexes:", CPRuleEditorRowsDidChangeNotification, nil);
}
,["void","CPView","CGPoint","CPDragOperation"]), new objj_method(sel_getUid("wantsPeriodicDraggingUpdates"), function $CPRuleEditor__wantsPeriodicDraggingUpdates(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("pasteboard:provideDataForType:"), function $CPRuleEditor__pasteboard_provideDataForType_(self, _cmd, pasteboard, type)
{
}
,["void","CPPasteboard","int"]), new objj_method(sel_getUid("_setWindow:"), function $CPRuleEditor___setWindow_(self, _cmd, window)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "_setWindow:", window);
}
,["void","id"]), new objj_method(sel_getUid("_windowUpdate:"), function $CPRuleEditor___windowUpdate_(self, _cmd, sender)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "_windowUpdate:", sender);
}
,["void","id"]), new objj_method(sel_getUid("_postRuleOptionChangedNotification"), function $CPRuleEditor___postRuleOptionChangedNotification(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPRuleEditorRulesDidChangeNotification, self);
}
,["void"]), new objj_method(sel_getUid("_postRowCountChangedNotificationOfType:indexes:"), function $CPRuleEditor___postRowCountChangedNotificationOfType_indexes_(self, _cmd, notificationName, indexes)
{
    var userInfo = indexes === nil ? objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init") : objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", indexes, "indexes");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", notificationName, self, userInfo);
}
,["void","CPString",null]), new objj_method(sel_getUid("_globalIndexesForSubrowIndexes:ofParentObject:"), function $CPRuleEditor___globalIndexesForSubrowIndexes_ofParentObject_(self, _cmd, indexes, parentRowObject)
{
    var _subrows = objj_msgSend(self, "_subrowObjectsOfObject:", parentRowObject),
        parentRowIndex = objj_msgSend(self, "_rowIndexForRowObject:", parentRowObject),
        globalIndexes = objj_msgSend(CPMutableIndexSet, "indexSet"),
        current_index = objj_msgSend(indexes, "firstIndex"),
        numberOfChildrenOfPreviousBrother = 0;
    while (current_index !== CPNotFound)
    {
        var globalChildIndex = current_index + parentRowIndex + 1 + numberOfChildrenOfPreviousBrother;
        objj_msgSend(globalIndexes, "addIndex:", globalChildIndex);
        if (objj_msgSend(self, "rowTypeForRow:", globalChildIndex) === CPRuleEditorRowTypeCompound)
        {
            var rowObject = objj_msgSend(objj_msgSend(self, "_rowCacheForIndex:", current_index), "rowObject"),
                subrows = objj_msgSend(self, "_subrowObjectsOfObject:", rowObject),
                subIndexes = objj_msgSend(self, "_globalIndexesForSubrowIndexes:ofParentObject:", objj_msgSend(CPIndexSet, "indexSetWithIndexesInRange:", CPMakeRange(0, objj_msgSend(subrows, "count"))), rowObject);
            numberOfChildrenOfPreviousBrother = objj_msgSend(subIndexes, "count");
        }
        current_index = objj_msgSend(indexes, "indexGreaterThanIndex:", current_index);
    }
    return globalIndexes;
}
,["CPIndexSet","CPIndexSet","id"]), new objj_method(sel_getUid("_sendRuleAction"), function $CPRuleEditor___sendRuleAction(self, _cmd)
{
    var action = objj_msgSend(self, "action"),
        target = objj_msgSend(self, "target");
    objj_msgSend(self, "sendAction:to:", action, target);
}
,["void"]), new objj_method(sel_getUid("_sendsActionOnIncompleteTextChange"), function $CPRuleEditor___sendsActionOnIncompleteTextChange(self, _cmd)
{
    return YES;
}
,["BOOL"]), new objj_method(sel_getUid("_getAllAvailableItems:values:asChildrenOfItem:inRow:"), function $CPRuleEditor___getAllAvailableItems_values_asChildrenOfItem_inRow_(self, _cmd, items, values, parentItem, aRow)
{
    var type,
        indexofCriterion,
        numOfChildren;
    var availItems = objj_msgSend(CPMutableArray, "array"),
        availValues = objj_msgSend(CPMutableArray, "array");
    var criterion = nil,
        value = nil;
    self._lastRow = aRow;
    type = objj_msgSend(self, "rowTypeForRow:", aRow);
    numOfChildren = objj_msgSend(self, "_queryNumberOfChildrenOfItem:withRowType:", parentItem, type);
    var criteria = objj_msgSend(self, "criteriaForRow:", aRow);
    indexofCriterion = objj_msgSend(criteria, "indexOfObject:", criterion);
    if (parentItem !== nil && indexofCriterion !== CPNotFound && indexofCriterion < objj_msgSend(criteria, "count") - 1)
    {
        var next = indexofCriterion + 1;
        criterion = objj_msgSend(criteria, "objectAtIndex:", next);
        var values = objj_msgSend(self, "displayValuesForRow:", aRow);
        value = objj_msgSend(values, "objectAtIndex:", next);
    }
    for (var i = 0; i < numOfChildren; ++i)
    {
        var aChild = objj_msgSend(self, "_queryChild:ofItem:withRowType:", i, parentItem, type),
            availChild = aChild,
            availValue = value;
        if (criterion !== aChild)
            availValue = objj_msgSend(self, "_queryValueForItem:inRow:", aChild, aRow);
        if (!availValue)
            availValue = objj_msgSend(self, "_queryValueForItem:inRow:", availChild, aRow);
        objj_msgSend(availItems, "addObject:", availChild);
        objj_msgSend(availValues, "addObject:", availValue);
    }
    objj_msgSend(items, "addObjectsFromArray:", availItems);
    objj_msgSend(values, "addObjectsFromArray:", availValues);
}
,["void","id","id","id","int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $CPRuleEditor__defaultThemeClass(self, _cmd)
{
    return "rule-editor";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $CPRuleEditor__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "alternating-row-colors", objj_msgSend(CPNull, "null"), "selected-color", objj_msgSend(CPNull, "null"), "slice-top-border-color", objj_msgSend(CPNull, "null"), "slice-bottom-border-color", objj_msgSend(CPNull, "null"), "slice-last-bottom-border-color", objj_msgSend(CPNull, "null"), "font", objj_msgSend(CPNull, "null"), "add-image", objj_msgSend(CPNull, "null"), "remove-image");
}
,["id"])]);
}var CPRuleEditorAlignmentGridWidthKey = "CPRuleEditorAlignmentGridWidth",
    CPRuleEditorSliceHeightKey = "CPRuleEditorSliceHeight",
    CPRuleEditorStringsFilenameKey = "CPRuleEditorStringsFilename",
    CPRuleEditorEditableKey = "CPRuleEditorEditable",
    CPRuleEditorAllowsEmptyCompoundRowsKey = "CPRuleEditorAllowsEmptyCompoundRows",
    CPRuleEditorDisallowEmptyKey = "CPRuleEditorDisallowEmpty",
    CPRuleEditorNestingModeKey = "CPRuleEditorNestingMode",
    CPRuleEditorRowTypeKeyPathKey = "CPRuleEditorRowTypeKeyPath",
    CPRuleEditorItemsKeyPathKey = "CPRuleEditorItemsKeyPath",
    CPRuleEditorValuesKeyPathKey = "CPRuleEditorValuesKeyPath",
    CPRuleEditorSubrowsArrayKeyPathKey = "CPRuleEditorSubrowsArrayKeyPath",
    CPRuleEditorBoundArrayKeyPathKey = "CPRuleEditorBoundArrayKeyPath",
    CPRuleEditorRowClassKey = "CPRuleEditorRowClass",
    CPRuleEditorSlicesHolderKey = "CPRuleEditorSlicesHolder",
    CPRuleEditorSlicesKey = "CPRuleEditorSlices",
    CPRuleEditorDelegateKey = "CPRuleEditorDelegate",
    CPRuleEditorBoundArrayOwnerKey = "CPRuleEditorBoundArrayOwner";
{
var the_class = objj_getClass("CPRuleEditor")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPRuleEditor\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("initWithCoder:"), function $CPRuleEditor__initWithCoder_(self, _cmd, coder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "initWithCoder:", coder);
    if (self !== nil)
    {
        objj_msgSend(self, "setFormattingStringsFilename:", objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorStringsFilenameKey));
        self._alignmentGridWidth = objj_msgSend(coder, "decodeFloatForKey:", CPRuleEditorAlignmentGridWidthKey);
        self._sliceHeight = objj_msgSend(coder, "decodeDoubleForKey:", CPRuleEditorSliceHeightKey);
        self._editable = objj_msgSend(coder, "decodeBoolForKey:", CPRuleEditorEditableKey);
        self._allowsEmptyCompoundRows = objj_msgSend(coder, "decodeBoolForKey:", CPRuleEditorAllowsEmptyCompoundRowsKey);
        self._disallowEmpty = objj_msgSend(coder, "decodeBoolForKey:", CPRuleEditorDisallowEmptyKey);
        self._nestingMode = objj_msgSend(coder, "decodeIntForKey:", CPRuleEditorNestingModeKey);
        self._typeKeyPath = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorRowTypeKeyPathKey);
        self._itemsKeyPath = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorItemsKeyPathKey);
        self._valuesKeyPath = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorValuesKeyPathKey);
        self._subrowsArrayKeyPath = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorSubrowsArrayKeyPathKey);
        self._boundArrayKeyPath = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorBoundArrayKeyPathKey);
        self._slicesHolder = objj_msgSend(objj_msgSend(self, "subviews"), "objectAtIndex:", 0);
        self._boundArrayOwner = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorBoundArrayOwnerKey);
        self._slices = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorSlicesKey);
        self._ruleDelegate = objj_msgSend(coder, "decodeObjectForKey:", CPRuleEditorDelegateKey);
        objj_msgSend(self, "_initRuleEditorShared");
    }
    return self;
}
,["id","CPCoder"]), new objj_method(sel_getUid("encodeWithCoder:"), function $CPRuleEditor__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPRuleEditor").super_class }, "encodeWithCoder:", coder);
    objj_msgSend(coder, "encodeBool:forKey:", self._editable, CPRuleEditorEditableKey);
    objj_msgSend(coder, "encodeBool:forKey:", self._allowsEmptyCompoundRows, CPRuleEditorAllowsEmptyCompoundRowsKey);
    objj_msgSend(coder, "encodeBool:forKey:", self._disallowEmpty, CPRuleEditorDisallowEmptyKey);
    objj_msgSend(coder, "encodeFloat:forKey:", self._alignmentGridWidth, CPRuleEditorAlignmentGridWidthKey);
    objj_msgSend(coder, "encodeDouble:forKey:", self._sliceHeight, CPRuleEditorSliceHeightKey);
    objj_msgSend(coder, "encodeInt:forKey:", self._nestingMode, CPRuleEditorNestingModeKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._stringsFilename, CPRuleEditorStringsFilenameKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._typeKeyPath, CPRuleEditorRowTypeKeyPathKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._itemsKeyPath, CPRuleEditorItemsKeyPathKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._valuesKeyPath, CPRuleEditorValuesKeyPathKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._boundArrayKeyPath, CPRuleEditorBoundArrayKeyPathKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._subrowsArrayKeyPath, CPRuleEditorSubrowsArrayKeyPathKey);
    objj_msgSend(coder, "encodeConditionalObject:forKey:", self._slicesHolder, CPRuleEditorSlicesHolderKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._slices, CPRuleEditorSlicesKey);
    objj_msgSend(coder, "encodeObject:forKey:", self._boundArrayOwner, CPRuleEditorBoundArrayOwnerKey);
}
,["void","id"])]);
}var CriteriaKey = "criteria",
    SubrowsKey = "subrows",
    DisplayValuesKey = "displayValues",
    RowTypeKey = "rowType";
{var the_class = objj_allocateClassPair(CPObject, "_CPRuleEditorRowObject"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("subrows"), new objj_ivar("criteria"), new objj_ivar("displayValues"), new objj_ivar("rowType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("subrows"), function $_CPRuleEditorRowObject__subrows(self, _cmd)
{
    return self.subrows;
}
,["CPArray"]), new objj_method(sel_getUid("setSubrows:"), function $_CPRuleEditorRowObject__setSubrows_(self, _cmd, newValue)
{
    self.subrows = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("criteria"), function $_CPRuleEditorRowObject__criteria(self, _cmd)
{
    return self.criteria;
}
,["CPArray"]), new objj_method(sel_getUid("setCriteria:"), function $_CPRuleEditorRowObject__setCriteria_(self, _cmd, newValue)
{
    self.criteria = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("displayValues"), function $_CPRuleEditorRowObject__displayValues(self, _cmd)
{
    return self.displayValues;
}
,["CPArray"]), new objj_method(sel_getUid("setDisplayValues:"), function $_CPRuleEditorRowObject__setDisplayValues_(self, _cmd, newValue)
{
    self.displayValues = newValue;
}
,["void","CPArray"]), new objj_method(sel_getUid("rowType"), function $_CPRuleEditorRowObject__rowType(self, _cmd)
{
    return self.rowType;
}
,["CPInteger"]), new objj_method(sel_getUid("setRowType:"), function $_CPRuleEditorRowObject__setRowType_(self, _cmd, newValue)
{
    self.rowType = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("copy"), function $_CPRuleEditorRowObject__copy(self, _cmd)
{
    var copy = objj_msgSend(objj_msgSend(_CPRuleEditorRowObject, "alloc"), "init");
    objj_msgSend(copy, "setSubrows:", objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithArray:copyItems:", self.subrows, YES));
    objj_msgSend(copy, "setCriteria:", objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithArray:copyItems:", self.criteria, YES));
    objj_msgSend(copy, "setDisplayValues:", objj_msgSend(objj_msgSend(CPArray, "alloc"), "initWithArray:copyItems:", self.displayValues, YES));
    objj_msgSend(copy, "setRowType:", self.rowType);
    return copy;
}
,["id"]), new objj_method(sel_getUid("description"), function $_CPRuleEditorRowObject__description(self, _cmd)
{
    return "<" + objj_msgSend(self, "className") + ">\nsubrows = " + objj_msgSend(self.subrows, "description") + "\ncriteria = " + objj_msgSend(self.criteria, "description") + "\ndisplayValues = " + objj_msgSend(self.displayValues, "description");
}
,["CPString"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPRuleEditorRowObject__initWithCoder_(self, _cmd, coder)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorRowObject").super_class }, "init");
    if (self !== nil)
    {
        self.subrows = objj_msgSend(coder, "decodeObjectForKey:", SubrowsKey);
        self.criteria = objj_msgSend(coder, "decodeObjectForKey:", CriteriaKey);
        self.displayValues = objj_msgSend(coder, "decodeObjectForKey:", DisplayValuesKey);
        self.rowType = objj_msgSend(coder, "decodeIntForKey:", RowTypeKey);
    }
    return self;
}
,["id","id"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPRuleEditorRowObject__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSend(coder, "encodeObject:forKey:", self.subrows, SubrowsKey);
    objj_msgSend(coder, "encodeObject:forKey:", self.criteria, CriteriaKey);
    objj_msgSend(coder, "encodeObject:forKey:", self.displayValues, DisplayValuesKey);
    objj_msgSend(coder, "encodeInt:forKey:", self.rowType, RowTypeKey);
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPObject, "_CPRuleEditorCache"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("rowObject"), new objj_ivar("rowIndex"), new objj_ivar("indentation")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("rowObject"), function $_CPRuleEditorCache__rowObject(self, _cmd)
{
    return self.rowObject;
}
,["CPDictionary"]), new objj_method(sel_getUid("setRowObject:"), function $_CPRuleEditorCache__setRowObject_(self, _cmd, newValue)
{
    self.rowObject = newValue;
}
,["void","CPDictionary"]), new objj_method(sel_getUid("rowIndex"), function $_CPRuleEditorCache__rowIndex(self, _cmd)
{
    return self.rowIndex;
}
,["CPInteger"]), new objj_method(sel_getUid("setRowIndex:"), function $_CPRuleEditorCache__setRowIndex_(self, _cmd, newValue)
{
    self.rowIndex = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("indentation"), function $_CPRuleEditorCache__indentation(self, _cmd)
{
    return self.indentation;
}
,["CPInteger"]), new objj_method(sel_getUid("setIndentation:"), function $_CPRuleEditorCache__setIndentation_(self, _cmd, newValue)
{
    self.indentation = newValue;
}
,["void","CPInteger"]), new objj_method(sel_getUid("description"), function $_CPRuleEditorCache__description(self, _cmd)
{
    return objj_msgSend(CPString, "stringWithFormat:", "<%d object:%d rowIndex:%d indentation:%d>", objj_msgSend(self, "hash"), objj_msgSend(self.rowObject, "hash"), self.rowIndex, self.indentation);
}
,["CPString"])]);
}var CPBoundArrayKey = "CPBoundArray";
{var the_class = objj_allocateClassPair(CPObject, "_CPRuleEditorViewUnboundRowHolder"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("boundArray")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $_CPRuleEditorViewUnboundRowHolder__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewUnboundRowHolder").super_class }, "init"))
        self.boundArray = objj_msgSend(objj_msgSend(CPArray, "alloc"), "init");
    return self;
}
,["id"]), new objj_method(sel_getUid("initWithCoder:"), function $_CPRuleEditorViewUnboundRowHolder__initWithCoder_(self, _cmd, coder)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewUnboundRowHolder").super_class }, "init"))
        self.boundArray = objj_msgSend(coder, "decodeObjectForKey:", CPBoundArrayKey);
    return self;
}
,["id","id"]), new objj_method(sel_getUid("encodeWithCoder:"), function $_CPRuleEditorViewUnboundRowHolder__encodeWithCoder_(self, _cmd, coder)
{
    objj_msgSend(coder, "encodeObject:forKey:", self.boundArray, CPBoundArrayKey);
}
,["void","id"])]);
}{var the_class = objj_allocateClassPair(CPView, "_CPRuleEditorViewSliceHolder"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("addSubview:"), function $_CPRuleEditorViewSliceHolder__addSubview_(self, _cmd, subview)
{
    objj_msgSend(self, "setNeedsDisplay:", YES);
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPRuleEditorViewSliceHolder").super_class }, "addSubview:", subview);
}
,["void","CPView"])]);
}var dropSeparatorColor = objj_msgSend(CPColor, "colorWithHexString:", "4886ca");
{var the_class = objj_allocateClassPair(CPView, "_CPRuleEditorViewSliceDropSeparator"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("drawRect:"), function $_CPRuleEditorViewSliceDropSeparator__drawRect_(self, _cmd, rect)
{
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort");
    CGContextSetFillColor(context, dropSeparatorColor);
    CGContextFillRect(context, objj_msgSend(self, "bounds"));
}
,["void","CGRect"])]);
}{
var the_class = objj_getClass("CPObject")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPObject\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("valueType"), function $CPObject__valueType(self, _cmd)
{
    var result = 0,
        isString = objj_msgSend(self, "isKindOfClass:", CPString);
    if (!isString)
    {
        var isView = objj_msgSend(self, "isKindOfClass:", CPView);
        result = 1;
        if (!isView)
        {
            var ismenuItem = objj_msgSend(self, "isKindOfClass:", CPMenuItem);
            result = 2;
            if (!ismenuItem)
            {
                objj_msgSend(CPException, "raise:reason:", CPGenericException, "Unknown type for " + self);
                result = -1;
            }
        }
    }
    return result;
}
,["int"])]);
}p;24;CPRuleEditor_Constants.jt;913;@STATIC;1.0;t;895;CPRuleEditorPredicateLeftExpression = "CPRuleEditorPredicateLeftExpression";
CPRuleEditorPredicateRightExpression = "CPRuleEditorPredicateRightExpression";
CPRuleEditorPredicateComparisonModifier = "CPRuleEditorPredicateComparisonModifier";
CPRuleEditorPredicateOptions = "CPRuleEditorPredicateOptions";
CPRuleEditorPredicateOperatorType = "CPRuleEditorPredicateOperatorType";
CPRuleEditorPredicateCustomSelector = "CPRuleEditorPredicateCustomSelector";
CPRuleEditorPredicateCompoundType = "CPRuleEditorPredicateCompoundType";
CPRuleEditorRowsDidChangeNotification = "CPRuleEditorRowsDidChangeNotification";
CPRuleEditorRulesDidChangeNotification = "CPRuleEditorRulesDidChangeNotification";
CPRuleEditorNestingModeSingle = 0;
CPRuleEditorNestingModeList = 1;
CPRuleEditorNestingModeCompound = 2;
CPRuleEditorNestingModeSimple = 3;
CPRuleEditorRowTypeSimple = 0;
CPRuleEditorRowTypeCompound = 1;
p;31;_CPBorderlessBridgeWindowView.jt;2596;@STATIC;1.0;i;15;_CPWindowView.jt;2557;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPBorderlessBridgeWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_toolbarBackgroundView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("setShowsResizeIndicator:"), function $_CPBorderlessBridgeWindowView__setShowsResizeIndicator_(self, _cmd, shouldShowResizeIndicator)
{
}
,["void","BOOL"]), new objj_method(sel_getUid("tile"), function $_CPBorderlessBridgeWindowView__tile(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPBorderlessBridgeWindowView").super_class }, "tile");
    var theWindow = objj_msgSend(self, "window"),
        bounds = objj_msgSend(self, "bounds");
    objj_msgSend(objj_msgSend(theWindow, "contentView"), "setFrame:", CGRectMake(0.0, objj_msgSend(self, "toolbarMaxY"), CGRectGetWidth(bounds), CGRectGetHeight(bounds) - objj_msgSend(self, "toolbarMaxY")));
    if (!objj_msgSend(objj_msgSend(theWindow, "toolbar"), "isVisible"))
    {
        objj_msgSend(self._toolbarBackgroundView, "removeFromSuperview");
        self._toolbarBackgroundView = nil;
        return;
    }
    if (!self._toolbarBackgroundView)
    {
        self._toolbarBackgroundView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._toolbarBackgroundView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "toolbar-background-color"));
        objj_msgSend(self._toolbarBackgroundView, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self, "addSubview:positioned:relativeTo:", self._toolbarBackgroundView, CPWindowBelow, nil);
    }
    var frame = CGRectMakeZero(),
        toolbarOffset = objj_msgSend(self, "toolbarOffset");
    frame.origin = CGPointMake(toolbarOffset.width, toolbarOffset.height);
    frame.size = objj_msgSend(self._toolbarView, "frame").size;
    objj_msgSend(self._toolbarBackgroundView, "setFrame:", frame);
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPBorderlessBridgeWindowView__defaultThemeClass(self, _cmd)
{
    return "bordeless-bridge-window-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPBorderlessBridgeWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPColor, "grayColor"), "toolbar-background-color");
}
,["id"])]);
}p;25;_CPBorderlessWindowView.jt;225;@STATIC;1.0;i;15;_CPWindowView.jt;187;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPBorderlessWindowView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
}p;23;_CPDocModalWindowView.jt;3093;@STATIC;1.0;i;15;_CPWindowView.jt;3054;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPDocModalWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_bodyView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPDocModalWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDocModalWindowView").super_class }, "initWithFrame:styleMask:", aFrame, aStyleMask);
    if (self)
    {
        var bounds = objj_msgSend(self, "bounds");
        self._bodyView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0.0, 0.0, CGRectGetWidth(bounds), CGRectGetHeight(bounds)));
        objj_msgSend(self._bodyView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self._bodyView, "setHitTests:", NO);
        objj_msgSend(self, "addSubview:", self._bodyView);
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPDocModalWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    return objj_msgSend(objj_msgSend(self, "class"), "contentRectForFrameRect:", aFrameRect);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPDocModalWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    return objj_msgSend(objj_msgSend(self, "class"), "frameRectForContentRect:", aContentRect);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPDocModalWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPDocModalWindowView").super_class }, "layoutSubviews");
    var bounds = objj_msgSend(self, "bounds");
    objj_msgSend(self._bodyView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "body-color"));
}
,["void"]), new objj_method(sel_getUid("bodyOffset"), function $_CPDocModalWindowView__bodyOffset(self, _cmd)
{
    return objj_msgSend(self._bodyView, "frame").origin.y;
}
,["int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPDocModalWindowView__defaultThemeClass(self, _cmd)
{
    return "doc-modal-window-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPDocModalWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPColor, "whiteColor"), "body-color", 8, "shadow-height");
}
,["id"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPDocModalWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("_CPDocModalWindowView").super_class }, "contentRectForFrameRect:", aFrameRect);
    return CGRectInset(contentRect, 1.0, 1.0);
}
,["CGRect","CGRect"])]);
}p;18;_CPHUDWindowView.jt;6676;@STATIC;1.0;i;10;CPButton.ji;13;CPTextField.ji;24;_CPTitleableWindowView.jt;6595;objj_executeFile("CPButton.j", YES);objj_executeFile("CPTextField.j", YES);objj_executeFile("_CPTitleableWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPTitleableWindowView, "_CPHUDWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_toolbarView"), new objj_ivar("_closeButton")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPHUDWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSend(objj_msgSend(self, "class"), "contentRectForFrameRect:", aFrameRect);
    if (objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "toolbar"), "isVisible"))
    {
        var toolbarHeight = CGRectGetHeight(objj_msgSend(objj_msgSend(self, "toolbarView"), "frame"));
        contentRect.origin.y += toolbarHeight;
        contentRect.size.height -= toolbarHeight;
    }
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPHUDWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    var frameRect = objj_msgSend(objj_msgSend(self, "class"), "frameRectForContentRect:", aContentRect);
    if (objj_msgSend(objj_msgSend(objj_msgSend(self, "window"), "toolbar"), "isVisible"))
    {
        var toolbarHeight = CGRectGetHeight(objj_msgSend(objj_msgSend(self, "toolbarView"), "frame"));
        frameRect.origin.y -= toolbarHeight;
        frameRect.size.height += toolbarHeight;
    }
    return frameRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPHUDWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPHUDWindowView").super_class }, "initWithFrame:styleMask:", aFrame, aStyleMask);
    if (self)
    {
        if (self._styleMask & CPClosableWindowMask)
        {
            self._closeButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMakeZero());
            objj_msgSend(self._closeButton, "setBordered:", NO);
            objj_msgSend(self._closeButton, "setButtonType:", CPMomentaryChangeButton);
            objj_msgSend(self, "addSubview:", self._closeButton);
        }
        objj_msgSend(self, "setResizeIndicatorOffset:", CGSizeMake(5.0, 5.0));
        objj_msgSend(self, "tile");
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("viewDidMoveToWindow"), function $_CPHUDWindowView__viewDidMoveToWindow(self, _cmd)
{
    objj_msgSend(self._closeButton, "setTarget:", objj_msgSend(self, "window"));
    objj_msgSend(self._closeButton, "setAction:", sel_getUid("performClose:"));
}
,["void"]), new objj_method(sel_getUid("toolbarView"), function $_CPHUDWindowView__toolbarView(self, _cmd)
{
    return self._toolbarView;
}
,["_CPToolbarView"]), new objj_method(sel_getUid("toolbarLabelColor"), function $_CPHUDWindowView__toolbarLabelColor(self, _cmd)
{
    return objj_msgSend(CPColor, "whiteColor");
}
,["CPColor"]), new objj_method(sel_getUid("toolbarLabelShadowColor"), function $_CPHUDWindowView__toolbarLabelShadowColor(self, _cmd)
{
    return objj_msgSend(CPColor, "blackColor");
}
,["CPColor"]), new objj_method(sel_getUid("toolbarOffset"), function $_CPHUDWindowView__toolbarOffset(self, _cmd)
{
    return CGSizeMake(0.0, objj_msgSend(objj_msgSend(self, "class"), "titleBarHeight"));
}
,["CGSize"]), new objj_method(sel_getUid("tile"), function $_CPHUDWindowView__tile(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPHUDWindowView").super_class }, "tile");
    var theWindow = objj_msgSend(self, "window"),
        bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds);
    objj_msgSend(self._titleField, "setFrame:", CGRectMake(20.0, 0, width - 40.0, objj_msgSend(self, "toolbarOffset").height));
    var maxY = objj_msgSend(self, "toolbarMaxY");
    if (objj_msgSend(self._titleField, "isHidden"))
        maxY -= objj_msgSend(self, "toolbarOffset").height;
    var contentRect = CGRectMake(0.0, maxY, width, CGRectGetHeight(bounds) - maxY);
    objj_msgSend(objj_msgSend(theWindow, "contentView"), "setFrame:", contentRect);
}
,["void"]), new objj_method(sel_getUid("_enableSheet:inWindow:"), function $_CPHUDWindowView___enableSheet_inWindow_(self, _cmd, enable, parentWindow)
{
    objj_msgSend(self._closeButton, "setHidden:", enable);
    objj_msgSend(self._titleField, "setHidden:", enable);
    var theWindow = objj_msgSend(self, "window"),
        frame = objj_msgSend(theWindow, "frame"),
        dy = objj_msgSend(self, "toolbarOffset").height;
    if (enable)
        dy = -dy;
    var newHeight = CGRectGetMaxY(frame) + dy,
        newWidth = CGRectGetMaxX(frame);
    frame.size.height += dy;
    objj_msgSend(self, "setFrameSize:", CGSizeMake(newWidth, newHeight));
    objj_msgSend(self, "tile");
    objj_msgSend(theWindow, "setFrame:display:animate:", frame, NO, NO);
    objj_msgSend(theWindow, "setMovableByWindowBackground:", !enable);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL","CPWindow"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPHUDWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPHUDWindowView").super_class }, "layoutSubviews");
    if (self._styleMask & CPClosableWindowMask)
    {
        objj_msgSend(self._closeButton, "setFrameOrigin:", objj_msgSend(self, "valueForThemeAttribute:", "close-image-origin"));
        objj_msgSend(self._closeButton, "setFrameSize:", objj_msgSend(self, "valueForThemeAttribute:", "close-image-size"));
        objj_msgSend(self._closeButton, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "close-image"));
        objj_msgSend(self._closeButton, "setAlternateImage:", objj_msgSend(self, "valueForThemeAttribute:", "close-active-image"));
    }
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPHUDWindowView__defaultThemeClass(self, _cmd)
{
    return "hud-window-view";
}
,["CPString"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPHUDWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("_CPHUDWindowView").super_class }, "contentRectForFrameRect:", aFrameRect);
    contentRect.origin.x += 1;
    contentRect.size.width -= 2;
    contentRect.size.height -= 1;
    return contentRect;
}
,["CGRect","CGRect"])]);
}p;20;_CPModalWindowView.jt;793;@STATIC;1.0;i;15;_CPWindowView.jt;755;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPModalWindowView"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("layoutSubviews"), function $_CPModalWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPModalWindowView").super_class }, "layoutSubviews");
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "bezel-color"));
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPModalWindowView__defaultThemeClass(self, _cmd)
{
    return "modal-window-view";
}
,["CPString"])]);
}p;22;_CPPopoverWindowView.jt;13490;@STATIC;1.0;I;23;Foundation/CPGeometry.ji;12;CGGeometry.ji;12;CGGradient.ji;15;_CPWindowView.jt;13388;objj_executeFile("Foundation/CPGeometry.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CGGradient.j", YES);objj_executeFile("_CPWindowView.j", YES);var _CPPopoverWindowViewDefaultCursorSize = CGSizeMake(16, 10);
{var the_class = objj_allocateClassPair(_CPWindowView, "_CPPopoverWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_arrowOffsetX"), new objj_ivar("_arrowOffsetY"), new objj_ivar("_appearance"), new objj_ivar("_preferredEdge"), new objj_ivar("_cursorSize")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("arrowOffsetX"), function $_CPPopoverWindowView__arrowOffsetX(self, _cmd)
{
    return self._arrowOffsetX;
}
,["float"]), new objj_method(sel_getUid("setArrowOffsetX:"), function $_CPPopoverWindowView__setArrowOffsetX_(self, _cmd, newValue)
{
    self._arrowOffsetX = newValue;
}
,["void","float"]), new objj_method(sel_getUid("arrowOffsetY"), function $_CPPopoverWindowView__arrowOffsetY(self, _cmd)
{
    return self._arrowOffsetY;
}
,["float"]), new objj_method(sel_getUid("setArrowOffsetY:"), function $_CPPopoverWindowView__setArrowOffsetY_(self, _cmd, newValue)
{
    self._arrowOffsetY = newValue;
}
,["void","float"]), new objj_method(sel_getUid("appearance"), function $_CPPopoverWindowView__appearance(self, _cmd)
{
    return self._appearance;
}
,["int"]), new objj_method(sel_getUid("setAppearance:"), function $_CPPopoverWindowView__setAppearance_(self, _cmd, newValue)
{
    self._appearance = newValue;
}
,["void","int"]), new objj_method(sel_getUid("preferredEdge"), function $_CPPopoverWindowView__preferredEdge(self, _cmd)
{
    return self._preferredEdge;
}
,["unsigned"]), new objj_method(sel_getUid("setPreferredEdge:"), function $_CPPopoverWindowView__setPreferredEdge_(self, _cmd, newValue)
{
    self._preferredEdge = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPPopoverWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = CGRectMakeCopy(aFrameRect),
        modifierX = 16,
        modifierY = 19;
    contentRect.origin.x += modifierX;
    contentRect.origin.y += modifierY;
    contentRect.size.width -= modifierX * 2;
    contentRect.size.height -= modifierY * 2;
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPPopoverWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindowView").super_class }, "initWithFrame:styleMask:", aFrame, aStyleMask))
    {
        self._arrowOffsetX = 0.0;
        self._arrowOffsetY = 0.0;
        self._appearance = CPPopoverAppearanceMinimal;
        self._cursorSize = CGSizeMakeCopy(_CPPopoverWindowViewDefaultCursorSize);
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("hideCursor"), function $_CPPopoverWindowView__hideCursor(self, _cmd)
{
    self._cursorSize = CGSizeMakeZero();
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("showCursor"), function $_CPPopoverWindowView__showCursor(self, _cmd)
{
    self._cursorSize = CGSizeMakeCopy(_CPPopoverWindowViewDefaultCursorSize);
    objj_msgSend(self, "setNeedsDisplay:", YES);
}
,["void"]), new objj_method(sel_getUid("drawRect:"), function $_CPPopoverWindowView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPPopoverWindowView").super_class }, "drawRect:", aRect);
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        radius = objj_msgSend(self, "valueForThemeAttribute:", "border-radius"),
        arrowWidth = self._cursorSize.width,
        arrowHeight = self._cursorSize.height,
        strokeWidth = objj_msgSend(self, "valueForThemeAttribute:", "stroke-width"),
        halfStrokeWidth = strokeWidth / 2.0,
        strokeColor,
        shadowColor = objj_msgSend(objj_msgSend(CPColor, "blackColor"), "colorWithAlphaComponent:", .2),
        shadowSize = objj_msgSend(self, "valueForThemeAttribute:", "shadow-size"),
        shadowBlur = objj_msgSend(self, "valueForThemeAttribute:", "shadow-blur"),
        gradient,
        frame = objj_msgSend(self, "bounds");
    if (self._appearance == CPPopoverAppearanceMinimal)
    {
        gradient = objj_msgSend(self, "valueForThemeAttribute:", "background-gradient");
        strokeColor = objj_msgSend(self, "valueForThemeAttribute:", "stroke-color");
    }
    else
    {
        gradient = objj_msgSend(self, "valueForThemeAttribute:", "background-gradient-hud");
        strokeColor = objj_msgSend(self, "valueForThemeAttribute:", "stroke-color-hud");
    }
    frame.origin.x += halfStrokeWidth + shadowBlur;
    frame.origin.y += halfStrokeWidth + (shadowBlur + shadowSize.height / 2);
    frame.size.width -= strokeWidth + shadowBlur * 2;
    frame.size.height -= strokeWidth + (shadowBlur * 2 + shadowSize.height);
    CGContextSetStrokeColor(context, strokeColor);
    CGContextSetLineWidth(context, strokeWidth);
    CGContextBeginPath(context);
    CGContextSetShadowWithColor(context, shadowSize, shadowBlur, shadowColor);
    CGContextDrawLinearGradient(context, gradient, CGPointMake(CGRectGetMidX(frame), 0.0), CGPointMake(CGRectGetMidX(frame), frame.size.height), 0);
    var xMin = CGRectGetMinX(frame),
        xMax = CGRectGetMaxX(frame),
        yMin = CGRectGetMinY(frame),
        yMax = CGRectGetMaxY(frame),
        arrowMinX = CGAlignCoordinate(xMin + radius + strokeWidth),
        arrowMaxX = CGAlignCoordinate(xMax - radius - strokeWidth),
        arrowMinY = CGAlignCoordinate(yMin + radius + strokeWidth),
        arrowMaxY = CGAlignCoordinate(yMax - radius + strokeWidth),
        arrowAnchor = CGPointMakeZero(),
        arrowStart = CGPointMakeZero(),
        pt = CGPointMakeZero();
    var path = CGPathCreateMutable();
    switch(self._preferredEdge) {
    case CPMinXEdge:
    case CPMaxXEdge:
        pt.x = CGAlignCoordinate(xMin + radius);
        pt.y = yMin;
        CGPathMoveToPoint(path, NULL, pt.x, pt.y);
        pt.x = CGAlignCoordinate(xMax - radius);
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, xMax, yMin, xMax, CGAlignCoordinate(yMin + radius));
        if (self._preferredEdge === CPMinXEdge)
        {
            arrowAnchor.x = CGAlignStroke(xMax, strokeWidth);
            arrowAnchor.y = CGAlignCoordinate(frame.size.height / 2 + yMin + self._arrowOffsetY);
            pt.y = CGAlignCoordinate(arrowAnchor.y - arrowWidth / 2);
            if (pt.y <= arrowMinY)
                pt.y = arrowMinY;
            else if (pt.y + arrowWidth > arrowMaxY)
                pt.y = arrowMaxY - arrowWidth;
            pt.x = arrowAnchor.x;
            arrowStart = CGPointMakeCopy(pt);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = CGAlignStroke(arrowAnchor.x + arrowHeight, strokeWidth);
            pt.y = arrowAnchor.y;
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = arrowAnchor.x;
            pt.y = CGAlignCoordinate(arrowStart.y + arrowWidth);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        }
        pt.x = xMax;
        pt.y = CGAlignCoordinate(yMax - radius);
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, pt.x, yMax, CGAlignCoordinate(xMax - radius), yMax);
        pt.x = CGAlignCoordinate(xMin + radius);
        pt.y = yMax;
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, xMin, pt.y, xMin, CGAlignCoordinate(yMax - radius));
        if (self._preferredEdge === CPMaxXEdge)
        {
            arrowAnchor.x = CGAlignStroke(xMin, strokeWidth);
            arrowAnchor.y = CGAlignCoordinate(frame.size.height / 2 + yMin + self._arrowOffsetY);
            pt.y = CGAlignCoordinate(arrowAnchor.y + arrowWidth / 2);
            if (pt.y - arrowWidth < arrowMinY)
                pt.y = arrowMinY + arrowWidth;
            else if (pt.y > arrowMaxY)
                pt.y = arrowMaxY;
            pt.x = arrowAnchor.x;
            arrowStart = CGPointMakeCopy(pt);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = CGAlignStroke(arrowAnchor.x - arrowHeight, strokeWidth);
            pt.y = arrowAnchor.y;
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = arrowAnchor.x;
            pt.y = CGAlignCoordinate(arrowStart.y - arrowWidth);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        }
        pt.x = xMin;
        pt.y = CGAlignCoordinate(yMin + radius);
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, pt.x, yMin, CGAlignCoordinate(xMin + radius), yMin);
        break;
    case CPMaxYEdge:
    case CPMinYEdge:
        pt.x = xMin;
        pt.y = CGAlignCoordinate(yMax - radius);
        CGPathMoveToPoint(path, NULL, pt.x, pt.y);
        pt.y = CGAlignCoordinate(yMin + radius);
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, pt.x, yMin, CGAlignCoordinate(xMin + radius), yMin);
        if (self._preferredEdge === CPMaxYEdge)
        {
            arrowAnchor.x = CGAlignCoordinate(frame.size.width / 2 + xMin + self._arrowOffsetX);
            arrowAnchor.y = CGAlignStroke(yMin + self._arrowOffsetY, strokeWidth);
            pt.x = CGAlignCoordinate(arrowAnchor.x - arrowWidth / 2);
            if (pt.x < arrowMinX)
                pt.x = arrowMinX;
            else if (pt.x + arrowWidth > arrowMaxX)
                pt.x = arrowMaxX - arrowWidth;
            pt.y = arrowAnchor.y;
            arrowStart = CGPointMakeCopy(pt);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = arrowAnchor.x;
            pt.y = CGAlignStroke(arrowAnchor.y - arrowHeight, strokeWidth);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = CGAlignCoordinate(arrowStart.x + arrowWidth);
            pt.y = arrowAnchor.y;
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        }
        pt.x = CGAlignCoordinate(xMax - radius);
        pt.y = yMin;
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, xMax, pt.y, xMax, CGAlignCoordinate(yMin + radius));
        pt.x = xMax;
        pt.y = CGAlignCoordinate(yMax - radius);
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, pt.x, yMax, CGAlignCoordinate(xMax - radius), yMax);
        if (self._preferredEdge === CPMinYEdge)
        {
            arrowAnchor.x = CGAlignCoordinate(frame.size.width / 2 + xMin + self._arrowOffsetX);
            arrowAnchor.y = CGAlignStroke(yMax + self._arrowOffsetY, strokeWidth);
            pt.x = CGAlignCoordinate(arrowAnchor.x + arrowWidth / 2);
            if (pt.x - arrowWidth < arrowMinX)
                pt.x = arrowMinX + arrowWidth;
            else if (pt.x > arrowMaxX)
                pt.x = arrowMaxX;
            pt.y = arrowAnchor.y;
            arrowStart = CGPointMakeCopy(pt);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = arrowAnchor.x;
            pt.y = CGAlignStroke(arrowAnchor.y + arrowHeight, strokeWidth);
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
            pt.x = CGAlignCoordinate(arrowStart.x - arrowWidth);
            pt.y = arrowAnchor.y;
            CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        }
        pt.x = CGAlignCoordinate(xMin + radius);
        pt.y = yMax;
        CGPathAddLineToPoint(path, NULL, pt.x, pt.y);
        CGPathAddCurveToPoint(path, NULL, pt.x, pt.y, xMin, pt.y, xMin, CGAlignCoordinate(yMax - radius));
        break;
default:
        CGPathAddPath(path, NULL, CGPathWithRoundedRectangleInRect(frame, radius, radius, YES, YES, YES, YES));
    }
    CGContextAddPath(context, path);
    CGContextStrokePath(context);
    CGContextAddPath(context, path);
    CGContextFillPath(context);
}
,["void","CGRect"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPPopoverWindowView__defaultThemeClass(self, _cmd)
{
    return "popover-window-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPPopoverWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "background-gradient", objj_msgSend(CPNull, "null"), "background-gradient-hud", objj_msgSend(CPNull, "null"), "stroke-color", objj_msgSend(CPNull, "null"), "stroke-color-hud", 5.0, "border-radius", 1.0, "stroke-width", CGSizeMake(0, 6), "shadow-size", 15.0, "shadow-blur");
}
,["id"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPPopoverWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    var frameRect = CGRectMakeCopy(aContentRect),
        modifierX = 16,
        modifierY = 19;
    frameRect.origin.x -= modifierX;
    frameRect.origin.y -= modifierY;
    frameRect.size.width += modifierX * 2;
    frameRect.size.height += modifierY * 2;
    return frameRect;
}
,["CGRect","CGRect"])]);
}p;21;_CPShadowWindowView.jt;2646;@STATIC;1.0;i;15;_CPWindowView.jt;2607;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(CPView, "_CPShadowWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_windowView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_windowView"), function $_CPShadowWindowView___windowView(self, _cmd)
{
    return self._windowView;
}
,["_CPWindowView"]), new objj_method(sel_getUid("setWindowView:"), function $_CPShadowWindowView__setWindowView_(self, _cmd, newValue)
{
    self._windowView = newValue;
}
,["void","_CPWindowView"]), new objj_method(sel_getUid("init"), function $_CPShadowWindowView__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPShadowWindowView").super_class }, "init"))
    {
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPShadowWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPShadowWindowView").super_class }, "layoutSubviews");
    var bounds = objj_msgSend(self._windowView, "bounds"),
        shadowDistance = objj_msgSend(self._windowView, "valueForThemeAttribute:", "shadow-distance"),
        shadowInset = objj_msgSend(self._windowView, "valueForThemeAttribute:", "shadow-inset"),
        size = objj_msgSend(self._windowView, "frameSize"),
        shadowSize = CGSizeMake(size.width, size.height);
    if (size.width >= shadowInset.left + shadowInset.right)
        shadowSize.width += shadowInset.left + shadowInset.right;
    else
        shadowSize.width = shadowInset.left + CGRectGetWidth(bounds) + shadowInset.right;
    if (size.height >= shadowInset.bottom + shadowInset.top + shadowDistance)
        shadowSize.height += shadowInset.bottom + shadowInset.top + shadowDistance;
    else
        shadowSize.height = shadowInset.top + CGRectGetHeight(bounds) + shadowInset.bottom;
    objj_msgSend(self, "setFrame:", CGRectMake(-shadowInset.left, -shadowInset.top + shadowDistance, shadowSize.width, shadowSize.height));
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self._windowView, "valueForThemeAttribute:", "window-shadow-color"));
}
,["void"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPShadowWindowView__defaultThemeClass(self, _cmd)
{
    return "shadow-window-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPShadowWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
}
,["id"])]);
}p;23;_CPStandardWindowView.jt;17139;@STATIC;1.0;i;10;CPButton.ji;24;_CPTitleableWindowView.jt;17075;objj_executeFile("CPButton.j", YES);objj_executeFile("_CPTitleableWindowView.j", YES);var _CPStandardWindowViewDividerViewHeight = 1.0;
{var the_class = objj_allocateClassPair(CPView, "_CPTexturedWindowHeadView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_isSheet"), new objj_ivar("_parentView"), new objj_ivar("_gradientView"), new objj_ivar("_solidView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_isSheet"), function $_CPTexturedWindowHeadView___isSheet(self, _cmd)
{
    return self._isSheet;
}
,["BOOL"]), new objj_method(sel_getUid("setSheet:"), function $_CPTexturedWindowHeadView__setSheet_(self, _cmd, newValue)
{
    self._isSheet = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("initWithFrame:windowView:"), function $_CPTexturedWindowHeadView__initWithFrame_windowView_(self, _cmd, aFrame, parentView)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTexturedWindowHeadView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._parentView = parentView;
        self._gradientView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self, "addSubview:", self._gradientView);
        self._solidView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self, "addSubview:", self._solidView);
    }
    return self;
}
,["id","CGRect","_CPWindowView"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPTexturedWindowHeadView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTexturedWindowHeadView").super_class }, "layoutSubviews");
    var gradientHeight = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "gradient-height", _CPStandardWindowView),
        bounds = objj_msgSend(self, "bounds"),
        bezelHeadColor = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:inState:forClass:", self._isSheet ? "bezel-head-sheet-color" : "bezel-head-color", objj_msgSend(self._parentView, "themeState"), _CPStandardWindowView);
    objj_msgSend(self._gradientView, "setFrame:", CGRectMake(0.0, 0.0, CGRectGetWidth(bounds), gradientHeight));
    objj_msgSend(self._gradientView, "setBackgroundColor:", bezelHeadColor);
    objj_msgSend(self._solidView, "setFrame:", CGRectMake(0.0, gradientHeight, CGRectGetWidth(bounds), CGRectGetHeight(bounds) - gradientHeight));
    objj_msgSend(self._solidView, "setBackgroundColor:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "solid-color", _CPStandardWindowView));
}
,["void"]), new objj_method(sel_getUid("resizeSubviewsWithOldSize:"), function $_CPTexturedWindowHeadView__resizeSubviewsWithOldSize_(self, _cmd, aSize)
{
    var bounds = objj_msgSend(self, "bounds");
    objj_msgSend(self._gradientView, "setFrameSize:", CGSizeMake(CGRectGetWidth(bounds), objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "gradient-height", _CPStandardWindowView)));
    objj_msgSend(self._solidView, "setFrameSize:", CGSizeMake(CGRectGetWidth(bounds), CGRectGetHeight(bounds) - objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "gradient-height", _CPStandardWindowView)));
}
,["void","CGSize"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPTexturedWindowHeadView__defaultThemeClass(self, _cmd)
{
    return "textured-window-head-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPTexturedWindowHeadView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
}
,["id"])]);
}{var the_class = objj_allocateClassPair(_CPTitleableWindowView, "_CPStandardWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_headView"), new objj_ivar("_dividerView"), new objj_ivar("_bodyView"), new objj_ivar("_toolbarView"), new objj_ivar("_closeButton"), new objj_ivar("_minimizeButton"), new objj_ivar("_isDocumentEdited"), new objj_ivar("_isSheet")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPStandardWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "initWithFrame:styleMask:", aFrame, aStyleMask);
    if (self)
    {
        var theClass = objj_msgSend(self, "class"),
            bounds = objj_msgSend(self, "bounds");
        self._headView = objj_msgSend(objj_msgSend(_CPTexturedWindowHeadView, "alloc"), "initWithFrame:windowView:", CGRectMake(0.0, 0.0, CGRectGetWidth(bounds), objj_msgSend(self, "valueForThemeAttribute:", "title-bar-height")), self);
        objj_msgSend(self._headView, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self._headView, "setHitTests:", NO);
        objj_msgSend(self, "addSubview:positioned:relativeTo:", self._headView, CPWindowBelow, self._titleField);
        self._dividerView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0.0, CGRectGetMaxY(objj_msgSend(self._headView, "frame")), CGRectGetWidth(bounds), _CPStandardWindowViewDividerViewHeight));
        objj_msgSend(self._dividerView, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self._dividerView, "setHitTests:", NO);
        objj_msgSend(self, "addSubview:", self._dividerView);
        var y = CGRectGetMinY(objj_msgSend(self._dividerView, "frame"));
        self._bodyView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(0.0, y, CGRectGetWidth(bounds), CGRectGetHeight(bounds) - y));
        objj_msgSend(self._bodyView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self._bodyView, "setHitTests:", NO);
        objj_msgSend(self, "addSubview:", self._bodyView);
        objj_msgSend(self, "setResizeIndicatorOffset:", CGSizeMake(2.0, 2.0));
        if (self._styleMask & CPClosableWindowMask)
        {
            self._closeButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(8.0, 8.0, 16.0, 16.0));
            objj_msgSend(self._closeButton, "setButtonType:", CPMomentaryChangeButton);
            objj_msgSend(self._closeButton, "setBordered:", NO);
            objj_msgSend(self, "_updateCloseButton");
            objj_msgSend(self, "addSubview:", self._closeButton);
        }
        if (self._styleMask & CPMiniaturizableWindowMask && !objj_msgSend(CPPlatform, "isBrowser"))
        {
            self._minimizeButton = objj_msgSend(objj_msgSend(CPButton, "alloc"), "initWithFrame:", CGRectMake(27.0, 7.0, 16.0, 16.0));
            objj_msgSend(self._minimizeButton, "setButtonType:", CPMomentaryChangeButton);
            objj_msgSend(self._minimizeButton, "setBordered:", NO);
            objj_msgSend(self, "addSubview:", self._minimizeButton);
        }
        objj_msgSend(self, "tile");
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("viewDidMoveToWindow"), function $_CPStandardWindowView__viewDidMoveToWindow(self, _cmd)
{
    objj_msgSend(self._closeButton, "setTarget:", objj_msgSend(self, "window"));
    objj_msgSend(self._closeButton, "setAction:", sel_getUid("performClose:"));
    objj_msgSend(self._minimizeButton, "setTarget:", objj_msgSend(self, "window"));
    objj_msgSend(self._minimizeButton, "setAction:", sel_getUid("performMiniaturize:"));
}
,["void"]), new objj_method(sel_getUid("toolbarOffset"), function $_CPStandardWindowView__toolbarOffset(self, _cmd)
{
    return CGSizeMake(0.0, objj_msgSend(self, "valueForThemeAttribute:", "title-bar-height"));
}
,["CGSize"]), new objj_method(sel_getUid("tile"), function $_CPStandardWindowView__tile(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "tile");
    var theWindow = objj_msgSend(self, "window"),
        bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds),
        headHeight = objj_msgSend(self, "toolbarMaxY");
    if (self._isSheet && self._toolbarView && objj_msgSend(self, "showsToolbar"))
    {
        headHeight = objj_msgSend(self._toolbarView, "frameSize").height;
        objj_msgSend(self._toolbarView, "setFrameOrigin:", CGPointMake(0.0, 0.0));
    }
    objj_msgSend(self._headView, "setFrameSize:", CGSizeMake(width, headHeight));
    objj_msgSend(self._dividerView, "setFrame:", CGRectMake(0.0, headHeight, width, _CPStandardWindowViewDividerViewHeight));
    var dividerMinY = 0,
        dividerFrame = objj_msgSend(self._dividerView, "frame");
    if (!objj_msgSend(self._dividerView, "isHidden"))
        dividerMinY = CGRectGetMinY(dividerFrame);
    objj_msgSend(self._bodyView, "setFrame:", CGRectMake(0.0, dividerMinY, width, CGRectGetHeight(bounds) - dividerMinY));
    var leftOffset = 8;
    if (self._closeButton)
        leftOffset += 19.0;
    if (self._minimizeButton)
        leftOffset += 19.0;
    objj_msgSend(self._titleField, "setFrame:", CGRectMake(leftOffset, 0, width - leftOffset * 2.0, objj_msgSend(self, "valueForThemeAttribute:", "title-bar-height")));
    var contentFrame = objj_msgSend(self._bodyView, "frame");
    objj_msgSend(objj_msgSend(theWindow, "contentView"), "setFrame:", CGRectInset(contentFrame, 1.0, 1.0));
}
,["void"]), new objj_method(sel_getUid("_updateCloseButton"), function $_CPStandardWindowView___updateCloseButton(self, _cmd)
{
    objj_msgSend(self._closeButton, "setFrameSize:", objj_msgSend(self, "valueForThemeAttribute:", "close-image-size"));
    objj_msgSend(self._closeButton, "setFrameOrigin:", objj_msgSend(self, "valueForThemeAttribute:", "close-image-origin"));
    if (self._isDocumentEdited)
    {
        objj_msgSend(self._closeButton, "setImage:", objj_msgSend(self, "currentValueForThemeAttribute:", "unsaved-image-button"));
        objj_msgSend(self._closeButton, "setAlternateImage:", objj_msgSend(self, "valueForThemeAttribute:", "unsaved-image-highlighted-button"));
    }
    else
    {
        objj_msgSend(self._closeButton, "setImage:", objj_msgSend(self, "currentValueForThemeAttribute:", "close-image-button"));
        objj_msgSend(self._closeButton, "setAlternateImage:", objj_msgSend(self, "currentValueForThemeAttribute:", "close-image-highlighted-button"));
    }
}
,["void"]), new objj_method(sel_getUid("setDocumentEdited:"), function $_CPStandardWindowView__setDocumentEdited_(self, _cmd, isEdited)
{
    self._isDocumentEdited = isEdited;
    objj_msgSend(self, "_updateCloseButton");
}
,["void","BOOL"]), new objj_method(sel_getUid("couldBeMoveEvent:"), function $_CPStandardWindowView__couldBeMoveEvent_(self, _cmd, anEvent)
{
    if (!objj_msgSend(self._headView, "isHidden"))
        if (CGRectContainsPoint(objj_msgSend(self._headView, "frame"), objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil)))
            return YES;
    return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "couldBeMoveEvent:", anEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("_enableSheet:inWindow:"), function $_CPStandardWindowView___enableSheet_inWindow_(self, _cmd, enable, parentWindow)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "_enableSheet:inWindow:", enable, parentWindow);
    self._isSheet = enable;
    objj_msgSend(self._headView, "setSheet:", enable);
    if (self._toolbarView && objj_msgSend(self, "showsToolbar"))
    {
        objj_msgSend(self._headView, "setHidden:", NO);
        objj_msgSend(self._dividerView, "setHidden:", NO);
    }
    else
    {
        objj_msgSend(self._headView, "setHidden:", enable);
        objj_msgSend(self._dividerView, "setHidden:", enable);
    }
    objj_msgSend(self._closeButton, "setHidden:", enable);
    objj_msgSend(self._minimizeButton, "setHidden:", enable);
    objj_msgSend(self._titleField, "setHidden:", enable);
    objj_msgSend(objj_msgSend(self, "window"), "setMovable:", !enable);
    if (enable)
    {
        objj_msgSend(self._bodyView, "setBackgroundColor:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "body-color", _CPDocModalWindowView));
        var shadowFrame = objj_msgSend(self._sheetShadowView, "frame");
        objj_msgSend(self._sheetShadowView, "setFrameOrigin:", CGPointMake(shadowFrame.origin.x, shadowFrame.origin.y + 1));
    }
    else
        objj_msgSend(self._bodyView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "body-color"));
    var theWindow = objj_msgSend(self, "window"),
        frame = objj_msgSend(theWindow, "frame"),
        dividerHeight = objj_msgSend(self._dividerView, "frame").size.height,
        dy = objj_msgSend(self, "toolbarMaxY") + dividerHeight;
    if (self._toolbarView && objj_msgSend(self, "showsToolbar"))
        dy = objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "gradient-height", _CPStandardWindowView);
    if (enable)
        dy = -dy;
    var newHeight = CGRectGetHeight(frame) + dy,
        newWidth = CGRectGetWidth(frame);
    frame.size.height += dy;
    objj_msgSend(self, "setFrameSize:", CGSizeMake(newWidth, newHeight));
    objj_msgSend(self, "tile");
    objj_msgSend(theWindow, "setFrame:display:animate:", frame, NO, NO);
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL","CPWindow"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPStandardWindowView__layoutSubviews(self, _cmd)
{
    var bounds = objj_msgSend(self, "bounds");
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "layoutSubviews");
    objj_msgSend(self, "_updateCloseButton");
    objj_msgSend(self._minimizeButton, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "minimize-image-button"));
    objj_msgSend(self._minimizeButton, "setAlternateImage:", objj_msgSend(self, "valueForThemeAttribute:", "minimize-image-highlighted-button"));
    objj_msgSend(self._dividerView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "divider-color"));
    objj_msgSend(self._bodyView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "body-color"));
    objj_msgSend(self._headView, "setNeedsLayout");
}
,["void"]), new objj_method(sel_getUid("_minimumResizeSize"), function $_CPStandardWindowView___minimumResizeSize(self, _cmd)
{
    var size = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPStandardWindowView").super_class }, "_minimumResizeSize"),
        closeSize = objj_msgSend(self, "valueForThemeAttribute:", "close-image-size"),
        closeOrigin = objj_msgSend(self, "valueForThemeAttribute:", "close-image-origin");
    size.width = closeSize.width + closeOrigin.x * 2;
    size.height += _CPStandardWindowViewDividerViewHeight;
    return size;
}
,["CGSize"]), new objj_method(sel_getUid("bodyOffset"), function $_CPStandardWindowView__bodyOffset(self, _cmd)
{
    return objj_msgSend(self._bodyView, "frame").origin.y;
}
,["int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPStandardWindowView__defaultThemeClass(self, _cmd)
{
    return "standard-window-view";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPStandardWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPNull, "null"), "gradient-height", objj_msgSend(CPNull, "null"), "solid-color", objj_msgSend(CPNull, "null"), "bezel-head-color", objj_msgSend(CPNull, "null"), "bezel-head-sheet-color", objj_msgSend(CPColor, "blackColor"), "divider-color", objj_msgSend(CPColor, "whiteColor"), "body-color", 32, "title-bar-height", objj_msgSend(CPNull, "null"), "minimize-image-highlighted-button", objj_msgSend(CPNull, "null"), "minimize-image-button", objj_msgSend(CPNull, "null"), "close-image-button", objj_msgSend(CPNull, "null"), "close-image-highlighted-button", objj_msgSend(CPNull, "null"), "unsaved-image-button", objj_msgSend(CPNull, "null"), "unsaved-image-highlighted-button");
}
,["id"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPStandardWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("_CPStandardWindowView").super_class }, "contentRectForFrameRect:", aFrameRect);
    contentRect.origin.x += 1;
    contentRect.size.width -= 2;
    contentRect.size.height -= 1;
    contentRect.origin.y += _CPStandardWindowViewDividerViewHeight;
    contentRect.size.height -= _CPStandardWindowViewDividerViewHeight;
    return contentRect;
}
,["CGRect","CGRect"])]);
}p;24;_CPTitleableWindowView.jt;5267;@STATIC;1.0;i;13;CPTextField.ji;15;_CPWindowView.jt;5210;objj_executeFile("CPTextField.j", YES);objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPTitleableWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_titleField")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPTitleableWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTitleableWindowView").super_class }, "initWithFrame:styleMask:", aFrame, aStyleMask);
    if (self)
    {
        self._titleField = objj_msgSend(objj_msgSend(CPTextField, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._titleField, "setHitTests:", NO);
        objj_msgSend(self._titleField, "setStringValue:", "Untitled");
        objj_msgSend(self._titleField, "sizeToFit");
        objj_msgSend(self._titleField, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self._titleField, "setStringValue:", "");
        objj_msgSend(self._titleField, "setFrame:", CGRectMake(20.0, 3.0, CGRectGetWidth(objj_msgSend(self, "bounds")) - 40.0, CGRectGetHeight(objj_msgSend(self._titleField, "frame"))));
        objj_msgSend(self, "addSubview:", self._titleField);
        objj_msgSend(self, "setNeedsLayout");
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("setTitle:"), function $_CPTitleableWindowView__setTitle_(self, _cmd, aTitle)
{
    objj_msgSend(self._titleField, "setStringValue:", aTitle);
}
,["void","CPString"]), new objj_method(sel_getUid("tile"), function $_CPTitleableWindowView__tile(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTitleableWindowView").super_class }, "tile");
    var theWindow = objj_msgSend(self, "window"),
        bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds);
    objj_msgSend(self._titleField, "setFrame:", CGRectMake(20.0, 0, width - 40.0, objj_msgSend(objj_msgSend(self, "class"), "titleBarHeight")));
}
,["void"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPTitleableWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTitleableWindowView").super_class }, "layoutSubviews");
    objj_msgSend(self, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "bezel-color"));
    objj_msgSend(self._titleField, "setTextColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-text-color"));
    objj_msgSend(self._titleField, "setFont:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-font"));
    objj_msgSend(self._titleField, "setAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-alignment"));
    objj_msgSend(self._titleField, "setVerticalAlignment:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-vertical-alignment"));
    objj_msgSend(self._titleField, "setLineBreakMode:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-line-break-mode"));
    objj_msgSend(self._titleField, "setTextShadowColor:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-text-shadow-color"));
    objj_msgSend(self._titleField, "setTextShadowOffset:", objj_msgSend(self, "currentValueForThemeAttribute:", "title-text-shadow-offset"));
}
,["void"]), new objj_method(sel_getUid("_minimumResizeSize"), function $_CPTitleableWindowView___minimumResizeSize(self, _cmd)
{
    var size = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPTitleableWindowView").super_class }, "_minimumResizeSize");
    size.height += objj_msgSend(objj_msgSend(self, "class"), "titleBarHeight");
    return size;
}
,["CGSize"]), new objj_method(sel_getUid("bodyOffset"), function $_CPTitleableWindowView__bodyOffset(self, _cmd)
{
    return objj_msgSend(self, "contentRectForFrameRect:", objj_msgSend(self, "frame")).origin.y;
}
,["int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("titleBarHeight"), function $_CPTitleableWindowView__titleBarHeight(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "title-bar-height", objj_msgSend(self, "class"));
}
,["int"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPTitleableWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("_CPTitleableWindowView").super_class }, "contentRectForFrameRect:", aFrameRect),
        titleBarHeight = objj_msgSend(self, "titleBarHeight");
    contentRect.origin.y += titleBarHeight;
    contentRect.size.height -= titleBarHeight;
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPTitleableWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    var frameRect = CGRectMakeCopy(aContentRect),
        titleBarHeight = objj_msgSend(self, "titleBarHeight");
    frameRect.origin.y -= titleBarHeight;
    frameRect.size.height += titleBarHeight;
    return frameRect;
}
,["CGRect","CGRect"])]);
}p;22;_CPToolTipWindowView.jt;3727;@STATIC;1.0;i;15;_CPWindowView.jt;3688;objj_executeFile("_CPWindowView.j", YES);{var the_class = objj_allocateClassPair(_CPWindowView, "_CPToolTipWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_mouseDownPressed"), new objj_ivar("_gravity")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("isMouseDownPressed"), function $_CPToolTipWindowView__isMouseDownPressed(self, _cmd)
{
    return self._mouseDownPressed;
}
,["BOOL"]), new objj_method(sel_getUid("setMouseDownPressed:"), function $_CPToolTipWindowView__setMouseDownPressed_(self, _cmd, newValue)
{
    self._mouseDownPressed = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("gravity"), function $_CPToolTipWindowView__gravity(self, _cmd)
{
    return self._gravity;
}
,["unsigned"]), new objj_method(sel_getUid("setGravity:"), function $_CPToolTipWindowView__setGravity_(self, _cmd, newValue)
{
    self._gravity = newValue;
}
,["void","unsigned"]), new objj_method(sel_getUid("drawRect:"), function $_CPToolTipWindowView__drawRect_(self, _cmd, aRect)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPToolTipWindowView").super_class }, "drawRect:", aRect);
    var context = objj_msgSend(objj_msgSend(CPGraphicsContext, "currentContext"), "graphicsPort"),
        radius = objj_msgSend(self, "currentValueForThemeAttribute:", "border-radius"),
        strokeWidth = objj_msgSend(self, "currentValueForThemeAttribute:", "stroke-width"),
        strokeColor = objj_msgSend(self, "currentValueForThemeAttribute:", "stroke-color"),
        bgColor = objj_msgSend(self, "currentValueForThemeAttribute:", "background-color");
    CGContextSetStrokeColor(context, strokeColor);
    CGContextSetFillColor(context, bgColor);
    CGContextSetLineWidth(context, strokeWidth);
    aRect.origin.x += strokeWidth;
    aRect.origin.y += strokeWidth;
    aRect.size.width -= strokeWidth * 2;
    aRect.size.height -= strokeWidth * 2;
    var path = CGPathWithRoundedRectangleInRect(aRect, radius, radius, YES, YES, YES, YES);
    CGContextAddPath(context, path);
    CGContextStrokePath(context);
    CGContextAddPath(context, path);
    CGContextFillPath(context);
}
,["void","CGRect"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("defaultThemeClass"), function $_CPToolTipWindowView__defaultThemeClass(self, _cmd)
{
    return "tooltip";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPToolTipWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", objj_msgSend(CPColor, "colorWithHexString:", "E3E3E3"), "stroke-color", objj_msgSend(CPColor, "colorWithHexString:", "FFFFCA"), "background-color", 2.0, "border-radius", 1.0, "stroke-width", objj_msgSend(CPColor, "blackColor"), "color");
}
,["id"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPToolTipWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("_CPToolTipWindowView").super_class }, "contentRectForFrameRect:", aFrameRect);
    contentRect.origin.x += 3;
    contentRect.origin.y += 3;
    contentRect.size.width -= 6;
    contentRect.size.height -= 6;
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPToolTipWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    var aFrameRect = CGRectMakeCopy(aContentRect);
    aFrameRect.origin.x -= 3;
    aFrameRect.origin.y -= 3;
    aFrameRect.size.width += 6;
    aFrameRect.size.height += 6;
    return aFrameRect;
}
,["CGRect","CGRect"])]);
}p;15;_CPWindowView.jt;34141;@STATIC;1.0;i;13;CPImageView.ji;8;CPView.ji;20;CPWindow_Constants.jt;34066;objj_executeFile("CPImageView.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);var _CPWindowViewCornerResizeRectWidth = 10,
    _CPWindowViewMinContentHeight = 2,
    _CPWindowViewResizeRegionNone = -1,
    _CPWindowViewResizeRegionTopLeft = 0,
    _CPWindowViewResizeRegionTop = 1,
    _CPWindowViewResizeRegionTopRight = 2,
    _CPWindowViewResizeRegionRight = 3,
    _CPWindowViewResizeRegionBottomRight = 4,
    _CPWindowViewResizeRegionBottom = 5,
    _CPWindowViewResizeRegionBottomLeft = 6,
    _CPWindowViewResizeRegionLeft = 7;
_CPWindowViewResizeSlop = 3;
{var the_class = objj_allocateClassPair(CPView, "_CPWindowView"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_styleMask"), new objj_ivar("_resizeIndicator"), new objj_ivar("_resizeIndicatorOffset"), new objj_ivar("_toolbarView"), new objj_ivar("_toolbarOffset"), new objj_ivar("_cachedFrame"), new objj_ivar("_resizeRegion"), new objj_ivar("_mouseDraggedPoint"), new objj_ivar("_cachedScreenFrame"), new objj_ivar("_sheetShadowView")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    var contentRect = objj_msgSend(objj_msgSend(self, "class"), "contentRectForFrameRect:", aFrameRect),
        theToolbar = objj_msgSend(objj_msgSend(self, "window"), "toolbar");
    if (objj_msgSend(theToolbar, "isVisible"))
    {
        var toolbarHeight = CGRectGetHeight(objj_msgSend(objj_msgSend(theToolbar, "_toolbarView"), "frame"));
        contentRect.origin.y += toolbarHeight;
        contentRect.size.height -= toolbarHeight;
    }
    return contentRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    var frameRect = objj_msgSend(objj_msgSend(self, "class"), "frameRectForContentRect:", aContentRect),
        theToolbar = objj_msgSend(objj_msgSend(self, "window"), "toolbar");
    if (objj_msgSend(theToolbar, "isVisible"))
    {
        var toolbarHeight = CGRectGetHeight(objj_msgSend(objj_msgSend(theToolbar, "_toolbarView"), "frame"));
        frameRect.origin.y -= toolbarHeight;
        frameRect.size.height += toolbarHeight;
    }
    return frameRect;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("initWithFrame:styleMask:"), function $_CPWindowView__initWithFrame_styleMask_(self, _cmd, aFrame, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowView").super_class }, "initWithFrame:", aFrame);
    if (self)
    {
        self._styleMask = aStyleMask;
        self._resizeIndicatorOffset = CGSizeMakeZero();
        self._toolbarOffset = CGSizeMakeZero();
    }
    return self;
}
,["id","CGRect","unsigned"]), new objj_method(sel_getUid("setDocumentEdited:"), function $_CPWindowView__setDocumentEdited_(self, _cmd, isEdited)
{
}
,["void","BOOL"]), new objj_method(sel_getUid("setTitle:"), function $_CPWindowView__setTitle_(self, _cmd, aTitle)
{
}
,["void","CPString"]), new objj_method(sel_getUid("hitTest:"), function $_CPWindowView__hitTest_(self, _cmd, locationInWindow)
{
    var region = objj_msgSend(self, "resizeRegionForPoint:", objj_msgSend(self._window, "convertBaseToGlobal:", locationInWindow));
    if (region !== _CPWindowViewResizeRegionNone)
        return self;
    else
        return objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowView").super_class }, "hitTest:", locationInWindow);
}
,["CPView","CGPoint"]), new objj_method(sel_getUid("acceptsFirstMouse:"), function $_CPWindowView__acceptsFirstMouse_(self, _cmd, anEvent)
{
    return YES;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("mouseDown:"), function $_CPWindowView__mouseDown_(self, _cmd, anEvent)
{
    var theWindow = objj_msgSend(self, "window"),
        couldResize = self._styleMask & CPResizableWindowMask && !objj_msgSend(theWindow, "isFullPlatformWindow");
    couldResize = couldResize && (CPWindowResizeStyle === CPWindowResizeStyleModern || CPWindowResizeStyle === CPWindowResizeStyleLegacy && self._resizeIndicator);
    if (couldResize)
    {
        var theWindow = objj_msgSend(self, "window"),
            windowFrame = objj_msgSend(theWindow, "frame"),
            shouldResize = NO;
        if (CPWindowResizeStyle === CPWindowResizeStyleModern)
        {
            var globalPoint = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(anEvent, "locationInWindow"));
            self._resizeRegion = objj_msgSend(self, "resizeRegionForPoint:", globalPoint);
            shouldResize = self._resizeRegion !== _CPWindowViewResizeRegionNone;
        }
        else
        {
            var resizeFrame = objj_msgSend(self._resizeIndicator, "frame");
            resizeFrame.size.width = CGRectGetWidth(windowFrame) - CGRectGetMinX(resizeFrame);
            resizeFrame.size.height = CGRectGetHeight(windowFrame) - CGRectGetMinY(resizeFrame);
            var localPoint = objj_msgSend(self, "convertPoint:fromView:", objj_msgSend(anEvent, "locationInWindow"), nil);
            shouldResize = CGRectContainsPoint(resizeFrame, localPoint);
            self._resizeRegion = shouldResize ? _CPWindowViewResizeRegionBottomRight : _CPWindowViewResizeRegionNone;
        }
        if (shouldResize)
            return objj_msgSend(self, "trackResizeWithEvent:", anEvent);
    }
    if (objj_msgSend(self, "couldBeMoveEvent:", anEvent))
        objj_msgSend(self, "trackMoveWithEvent:", anEvent);
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowView").super_class }, "mouseDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("couldBeMoveEvent:"), function $_CPWindowView__couldBeMoveEvent_(self, _cmd, anEvent)
{
    var theWindow = objj_msgSend(self, "window");
    return objj_msgSend(theWindow, "isMovable") && objj_msgSend(theWindow, "isMovableByWindowBackground");
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("resizeRegionForPoint:"), function $_CPWindowView__resizeRegionForPoint_(self, _cmd, aPoint)
{
    var wind = objj_msgSend(self, "window"),
        frame = objj_msgSend(wind, "frame"),
        rect,
        minSize = objj_msgSend(wind, "minSize"),
        maxSize = objj_msgSend(wind, "maxSize"),
        isFixedWidth = minSize.width === maxSize.width,
        isFixedHeight = minSize.height === maxSize.height,
        isSheet = wind._isSheet;
    if (isFixedWidth)
    {
        rect = CGRectMake(frame.origin.x - _CPWindowViewResizeSlop, frame.origin.y - _CPWindowViewResizeSlop, frame.size.width + _CPWindowViewResizeSlop * 2, _CPWindowViewResizeSlop * 2);
        if (CGRectContainsPoint(rect, aPoint))
            return isSheet ? _CPWindowViewResizeRegionNone : _CPWindowViewResizeRegionTop;
        rect.origin.y = CGRectGetMaxY(frame) - _CPWindowViewResizeSlop;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionBottom;
    }
    else if (isFixedHeight)
    {
        rect = CGRectMake(frame.origin.x - _CPWindowViewResizeSlop, frame.origin.y - _CPWindowViewResizeSlop, _CPWindowViewResizeSlop * 2, frame.size.height + _CPWindowViewResizeSlop * 2);
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionLeft;
        rect.origin.x = CGRectGetMaxX(frame) - _CPWindowViewResizeSlop;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionRight;
    }
    else
    {
        rect = CGRectMake(frame.origin.x - _CPWindowViewResizeSlop, frame.origin.y - _CPWindowViewResizeSlop, _CPWindowViewCornerResizeRectWidth + _CPWindowViewResizeSlop, _CPWindowViewCornerResizeRectWidth + _CPWindowViewResizeSlop);
        if (CGRectContainsPoint(rect, aPoint))
            return isSheet ? _CPWindowViewResizeRegionNone : _CPWindowViewResizeRegionTopLeft;
        rect.origin.x = CGRectGetMaxX(frame) - _CPWindowViewCornerResizeRectWidth;
        if (CGRectContainsPoint(rect, aPoint))
            return isSheet ? _CPWindowViewResizeRegionNone : _CPWindowViewResizeRegionTopRight;
        rect.origin.y = CGRectGetMaxY(frame) - _CPWindowViewCornerResizeRectWidth;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionBottomRight;
        rect.origin.x = frame.origin.x - _CPWindowViewResizeSlop;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionBottomLeft;
        rect = CGRectMake(rect.origin.x, frame.origin.y + _CPWindowViewCornerResizeRectWidth, _CPWindowViewResizeSlop * 2, CGRectGetHeight(frame) - _CPWindowViewCornerResizeRectWidth * 2);
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionLeft;
        rect.origin.x = CGRectGetMaxX(frame) - _CPWindowViewResizeSlop;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionRight;
        rect = CGRectMake(frame.origin.x + _CPWindowViewCornerResizeRectWidth, frame.origin.y - _CPWindowViewResizeSlop, CGRectGetWidth(frame) - _CPWindowViewCornerResizeRectWidth * 2, _CPWindowViewResizeSlop * 2);
        if (CGRectContainsPoint(rect, aPoint))
            return isSheet ? _CPWindowViewResizeRegionNone : _CPWindowViewResizeRegionTop;
        rect.origin.y = CGRectGetMaxY(frame) - _CPWindowViewResizeSlop;
        if (CGRectContainsPoint(rect, aPoint))
            return _CPWindowViewResizeRegionBottom;
    }
    return _CPWindowViewResizeRegionNone;
}
,["int","CGPoint"]), new objj_method(sel_getUid("setCursorForLocation:resizing:"), function $_CPWindowView__setCursorForLocation_resizing_(self, _cmd, aPoint, isResizing)
{
    var theWindow = objj_msgSend(self, "window");
    if (objj_msgSend(theWindow, "isFullPlatformWindow") || !(self._styleMask & CPResizableWindowMask) || CPWindowResizeStyle !== CPWindowResizeStyleModern)
        return;
    var globalPoint = objj_msgSend(theWindow, "convertBaseToGlobal:", aPoint),
        resizeRegion = isResizing ? self._resizeRegion : objj_msgSend(self, "resizeRegionForPoint:", globalPoint),
        minSize = nil,
        maxSize = nil,
        frameSize;
    if (resizeRegion !== _CPWindowViewResizeRegionNone)
    {
        minSize = objj_msgSend(theWindow, "minSize");
        maxSize = objj_msgSend(theWindow, "maxSize");
        frameSize = objj_msgSend(theWindow, "frame").size;
    }
    switch(resizeRegion) {
    case _CPWindowViewResizeRegionTopLeft:
        if (minSize && CGSizeEqualToSize(frameSize, minSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthwestCursor"), "set");
        else if (maxSize && CGSizeEqualToSize(frameSize, maxSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeSoutheastCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthwestSoutheastCursor"), "set");
        break;
    case _CPWindowViewResizeRegionTop:
        if (minSize && frameSize.height === minSize.height)
            objj_msgSend(objj_msgSend(CPCursor, "resizeUpCursor"), "set");
        else if (maxSize && frameSize.height === maxSize.height)
            objj_msgSend(objj_msgSend(CPCursor, "resizeDownCursor"), "set");
        else if (objj_msgSend(CPMenu, "menuBarVisible") && CGRectGetMinY(objj_msgSend(theWindow, "frame")) <= objj_msgSend(CPMenu, "menuBarHeight"))
            objj_msgSend(objj_msgSend(CPCursor, "resizeDownCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthSouthCursor"), "set");
        break;
    case _CPWindowViewResizeRegionTopRight:
        if (minSize && CGSizeEqualToSize(frameSize, minSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeNortheastCursor"), "set");
        else if (maxSize && CGSizeEqualToSize(frameSize, maxSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeSouthwestCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNortheastSouthwestCursor"), "set");
        break;
    case _CPWindowViewResizeRegionRight:
        if (minSize && frameSize.width === minSize.width)
            objj_msgSend(objj_msgSend(CPCursor, "resizeRightCursor"), "set");
        else if (maxSize && frameSize.width === maxSize.width)
            objj_msgSend(objj_msgSend(CPCursor, "resizeLeftCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeEastWestCursor"), "set");
        break;
    case _CPWindowViewResizeRegionBottomRight:
        if (minSize && CGSizeEqualToSize(frameSize, minSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeSoutheastCursor"), "set");
        else if (maxSize && CGSizeEqualToSize(frameSize, maxSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthwestCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthwestSoutheastCursor"), "set");
        break;
    case _CPWindowViewResizeRegionBottom:
        if (minSize && frameSize.height === minSize.height)
            objj_msgSend(objj_msgSend(CPCursor, "resizeDownCursor"), "set");
        else if (maxSize && frameSize.height === maxSize.height)
            objj_msgSend(objj_msgSend(CPCursor, "resizeUpCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNorthSouthCursor"), "set");
        break;
    case _CPWindowViewResizeRegionBottomLeft:
        if (minSize && CGSizeEqualToSize(frameSize, minSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeSouthwestCursor"), "set");
        else if (maxSize && CGSizeEqualToSize(frameSize, maxSize))
            objj_msgSend(objj_msgSend(CPCursor, "resizeNortheastCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeNortheastSouthwestCursor"), "set");
        break;
    case _CPWindowViewResizeRegionLeft:
        if (minSize && frameSize.width === minSize.width)
            objj_msgSend(objj_msgSend(CPCursor, "resizeLeftCursor"), "set");
        else if (maxSize && frameSize.width === maxSize.width)
            objj_msgSend(objj_msgSend(CPCursor, "resizeRightCursor"), "set");
        else
            objj_msgSend(objj_msgSend(CPCursor, "resizeEastWestCursor"), "set");
        break;
default:
        objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
    }
}
,["void","CGPoint","BOOL"]), new objj_method(sel_getUid("trackResizeWithEvent:"), function $_CPWindowView__trackResizeWithEvent_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type");
    if (type === CPLeftMouseUp)
    {
        self._cachedScreenFrame = nil;
        return;
    }
    var location = objj_msgSend(anEvent, "locationInWindow"),
        theWindow = objj_msgSend(self, "window"),
        globalLocation = objj_msgSend(theWindow, "convertBaseToGlobal:", location),
        frame = objj_msgSend(theWindow, "frame");
    if (type === CPLeftMouseDown)
    {
        self._mouseDraggedPoint = CGPointMake(globalLocation.x, globalLocation.y);
        self._cachedFrame = CGRectMakeCopy(frame);
        self._cachedScreenFrame = objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "visibleFrame");
    }
    else if (type === CPLeftMouseDragged)
    {
        var deltaX = globalLocation.x - self._mouseDraggedPoint.x,
            deltaY = globalLocation.y - self._mouseDraggedPoint.y,
            startX = CGRectGetMinX(self._cachedFrame),
            startY = CGRectGetMinY(self._cachedFrame),
            startWidth = CGRectGetWidth(self._cachedFrame),
            startHeight = CGRectGetHeight(self._cachedFrame),
            newX,
            newY,
            newWidth,
            newHeight,
            resizeMinSize = objj_msgSend(self, "_minimumResizeSize"),
            minSize = objj_msgSend(theWindow, "minSize"),
            maxSize = objj_msgSend(theWindow, "maxSize");
        minSize = CGSizeMake(MAX(minSize.width, resizeMinSize.width), MAX(minSize.height, resizeMinSize.height));
        if (theWindow._isSheet)
            deltaX *= 2;
        switch(self._resizeRegion) {
        case _CPWindowViewResizeRegionTopLeft:
        case _CPWindowViewResizeRegionLeft:
        case _CPWindowViewResizeRegionBottomLeft:
            if (deltaX > 0)
                deltaX = MIN(startWidth - minSize.width, deltaX);
            else if (deltaX < 0)
                deltaX = -MIN(maxSize.width - startWidth, ABS(deltaX));
            if (theWindow._isSheet)
                deltaX = FLOOR(deltaX / 2);
            newX = startX + deltaX;
            var pinnedX = MAX(newX, CGRectGetMinX(self._cachedScreenFrame));
            if (pinnedX !== newX)
            {
                deltaX += pinnedX - newX;
                newX = pinnedX;
            }
            if (theWindow._isSheet)
                deltaX *= 2;
            newWidth = startWidth - deltaX;
            break;
        case _CPWindowViewResizeRegionTopRight:
        case _CPWindowViewResizeRegionRight:
        case _CPWindowViewResizeRegionBottomRight:
            if (deltaX > 0)
                deltaX = MIN(maxSize.width - startWidth, deltaX);
            else if (deltaX < 0)
                deltaX = -MIN(startWidth - minSize.width, ABS(deltaX));
            if (theWindow._isSheet)
                deltaX = FLOOR(deltaX / 2);
            var newMaxX = startX + startWidth + deltaX,
                pinnedX = MIN(newMaxX, CGRectGetMaxX(self._cachedScreenFrame));
            if (pinnedX !== newMaxX)
                deltaX += pinnedX - newMaxX;
            if (theWindow._isSheet)
            {
                newWidth = startWidth + deltaX * 2;
                newX = startX - FLOOR((newWidth - startWidth) / 2);
            }
            else
            {
                newWidth = startWidth + deltaX;
                newX = startX;
            }
            break;
default:
            newX = startX;
            newWidth = startWidth;
        }
        switch(self._resizeRegion) {
        case _CPWindowViewResizeRegionTopLeft:
        case _CPWindowViewResizeRegionTop:
        case _CPWindowViewResizeRegionTopRight:
            if (deltaY > 0)
                deltaY = MIN(startHeight - minSize.height, deltaY);
            else if (deltaY < 0)
                deltaY = -MIN(maxSize.height - startHeight, ABS(deltaY));
            newY = startY + deltaY;
            var pinnedY = MAX(newY, CGRectGetMinY(self._cachedScreenFrame));
            if (pinnedY !== newY)
            {
                deltaY += pinnedY - newY;
                newY = pinnedY;
            }
            newHeight = startHeight - deltaY;
            break;
        case _CPWindowViewResizeRegionBottomLeft:
        case _CPWindowViewResizeRegionBottom:
        case _CPWindowViewResizeRegionBottomRight:
            if (deltaY > 0)
                deltaY = MIN(maxSize.height - startHeight, deltaY);
            else if (deltaY < 0)
                deltaY = -MIN(startHeight - minSize.height, ABS(deltaY));
            newY = startY;
            var newMaxY = startY + startHeight + deltaY,
                pinnedY = MIN(newMaxY, CGRectGetMaxY(self._cachedScreenFrame));
            if (pinnedY !== newMaxY)
                deltaY += pinnedY - newMaxY;
            newHeight = startHeight + deltaY;
            break;
default:
            newY = startY;
            newHeight = startHeight;
        }
        frame = CGRectMake(newX, newY, newWidth, newHeight);
        var constrainedFrame = objj_msgSend(theWindow, "_constrainOriginOfFrame:", frame),
            dx = constrainedFrame.origin.x - frame.origin.x,
            dy = constrainedFrame.origin.y - frame.origin.y;
        switch(self._resizeRegion) {
        case _CPWindowViewResizeRegionBottomLeft:
        case _CPWindowViewResizeRegionLeft:
        case _CPWindowViewResizeRegionTopLeft:
        case _CPWindowViewResizeRegionTop:
        case _CPWindowViewResizeRegionTopRight:
            frame.origin = constrainedFrame.origin;
            frame.size.width -= dx;
            frame.size.height -= dy;
        }
        switch(self._resizeRegion) {
        case _CPWindowViewResizeRegionTopRight:
        case _CPWindowViewResizeRegionRight:
        case _CPWindowViewResizeRegionBottomRight:
        case _CPWindowViewResizeRegionBottom:
            frame.size.width += dx;
            frame.size.height += dy;
        }
        objj_msgSend(theWindow, "_setFrame:display:animate:constrainWidth:constrainHeight:", frame, YES, NO, NO, NO);
        objj_msgSend(self, "setCursorForLocation:resizing:", location, YES);
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackResizeWithEvent:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("trackMoveWithEvent:"), function $_CPWindowView__trackMoveWithEvent_(self, _cmd, anEvent)
{
    var theWindow = objj_msgSend(self, "window");
    if (!objj_msgSend(theWindow, "isMovable"))
        return;
    var type = objj_msgSend(anEvent, "type");
    if (type === CPLeftMouseUp)
    {
        return;
    }
    else if (type === CPLeftMouseDown)
    {
        self._mouseDraggedPoint = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(anEvent, "locationInWindow"));
        self._cachedFrame = CGRectMakeCopy(objj_msgSend(theWindow, "frame"));
    }
    else if (type === CPLeftMouseDragged)
    {
        var theWindow = objj_msgSend(self, "window"),
            location = objj_msgSend(theWindow, "convertBaseToGlobal:", objj_msgSend(anEvent, "locationInWindow")),
            deltaX = location.x - self._mouseDraggedPoint.x,
            deltaY = location.y - self._mouseDraggedPoint.y,
            origin = CGPointMake(self._cachedFrame.origin.x + deltaX, self._cachedFrame.origin.y + deltaY);
        objj_msgSend(theWindow, "setFrameOrigin:", origin);
    }
    objj_msgSend(CPApp, "setTarget:selector:forNextEventMatchingMask:untilDate:inMode:dequeue:", self, sel_getUid("trackMoveWithEvent:"), CPLeftMouseDraggedMask | CPLeftMouseUpMask, nil, nil, YES);
}
,["void","CPEvent"]), new objj_method(sel_getUid("setFrameSize:"), function $_CPWindowView__setFrameSize_(self, _cmd, newSize)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowView").super_class }, "setFrameSize:", newSize);
    var theWindow = objj_msgSend(self, "window"),
        sheet = objj_msgSend(theWindow, "attachedSheet");
    if (sheet)
    {
        objj_msgSend(theWindow, "_setAttachedSheetFrameOrigin");
        objj_msgSend(sheet._windowView, "_adjustShadowViewSize");
    }
    else if (theWindow && theWindow._isSheet)
        objj_msgSend(self, "_adjustShadowViewSize");
}
,["void","CGSize"]), new objj_method(sel_getUid("setShowsResizeIndicator:"), function $_CPWindowView__setShowsResizeIndicator_(self, _cmd, shouldShowResizeIndicator)
{
    if (shouldShowResizeIndicator && CPWindowResizeStyle === CPWindowResizeStyleLegacy)
    {
        self._resizeIndicator = objj_msgSend(objj_msgSend(CPImageView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._resizeIndicator, "setAutoresizingMask:", CPViewMinXMargin | CPViewMinYMargin);
        objj_msgSend(self, "addSubview:", self._resizeIndicator);
    }
    else
    {
        objj_msgSend(self._resizeIndicator, "removeFromSuperview");
        self._resizeIndicator = nil;
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL"]), new objj_method(sel_getUid("showsResizeIndicator"), function $_CPWindowView__showsResizeIndicator(self, _cmd)
{
    return self._resizeIndicator !== nil;
}
,["BOOL"]), new objj_method(sel_getUid("setResizeIndicatorOffset:"), function $_CPWindowView__setResizeIndicatorOffset_(self, _cmd, anOffset)
{
    if (CGSizeEqualToSize(self._resizeIndicatorOffset, anOffset))
        return;
    self._resizeIndicatorOffset = anOffset;
    if (!self._resizeIndicator)
        return;
    var size = objj_msgSend(self._resizeIndicator, "frame").size,
        boundsSize = objj_msgSend(self, "frame").size;
    objj_msgSend(self._resizeIndicator, "setFrameOrigin:", CGPointMake(boundsSize.width - size.width - anOffset.width, boundsSize.height - size.height - anOffset.height));
}
,["void","CGSize"]), new objj_method(sel_getUid("resizeIndicatorOffset"), function $_CPWindowView__resizeIndicatorOffset(self, _cmd)
{
    return self._resizeIndicatorOffset;
}
,["CGSize"]), new objj_method(sel_getUid("windowDidChangeDocumentEdited"), function $_CPWindowView__windowDidChangeDocumentEdited(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("windowDidChangeDocumentSaving"), function $_CPWindowView__windowDidChangeDocumentSaving(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("showsToolbar"), function $_CPWindowView__showsToolbar(self, _cmd)
{
    var styleMaskWindow = objj_msgSend(objj_msgSend(self, "window"), "styleMask");
    return styleMaskWindow & CPBorderlessWindowMask || styleMaskWindow & CPTitledWindowMask || styleMaskWindow & CPHUDBackgroundWindowMask || styleMaskWindow & CPBorderlessBridgeWindowMask;
}
,["BOOL"]), new objj_method(sel_getUid("toolbarOffset"), function $_CPWindowView__toolbarOffset(self, _cmd)
{
    return self._toolbarOffset;
}
,["CGSize"]), new objj_method(sel_getUid("toolbarLabelColor"), function $_CPWindowView__toolbarLabelColor(self, _cmd)
{
    return objj_msgSend(CPColor, "blackColor");
}
,["CPColor"]), new objj_method(sel_getUid("toolbarMaxY"), function $_CPWindowView__toolbarMaxY(self, _cmd)
{
    if (!self._toolbarView || objj_msgSend(self._toolbarView, "isHidden"))
        return objj_msgSend(self, "toolbarOffset").height;
    return CGRectGetMaxY(objj_msgSend(self._toolbarView, "frame"));
}
,["float"]), new objj_method(sel_getUid("toolbarView"), function $_CPWindowView__toolbarView(self, _cmd)
{
    return self._toolbarView;
}
,["_CPToolbarView"]), new objj_method(sel_getUid("tile"), function $_CPWindowView__tile(self, _cmd)
{
    var theWindow = objj_msgSend(self, "window"),
        bounds = objj_msgSend(self, "bounds"),
        width = CGRectGetWidth(bounds);
    if (objj_msgSend(objj_msgSend(theWindow, "toolbar"), "isVisible"))
    {
        var toolbarView = objj_msgSend(self, "toolbarView"),
            toolbarOffset = objj_msgSend(self, "toolbarOffset");
        objj_msgSend(toolbarView, "setFrame:", CGRectMake(toolbarOffset.width, toolbarOffset.height, width, CGRectGetHeight(objj_msgSend(toolbarView, "frame"))));
    }
    if (objj_msgSend(self, "showsResizeIndicator"))
    {
        var size = objj_msgSend(self._resizeIndicator, "frame").size,
            boundsSize = objj_msgSend(self, "bounds").size;
        objj_msgSend(self._resizeIndicator, "setFrameOrigin:", CGPointMake(boundsSize.width - size.width - self._resizeIndicatorOffset.width, boundsSize.height - size.height - self._resizeIndicatorOffset.height));
    }
}
,["void"]), new objj_method(sel_getUid("noteToolbarChanged"), function $_CPWindowView__noteToolbarChanged(self, _cmd)
{
    var theWindow = objj_msgSend(self, "window"),
        toolbar = objj_msgSend(theWindow, "toolbar"),
        toolbarView = objj_msgSend(toolbar, "_toolbarView");
    if (self._toolbarView !== toolbarView)
    {
        objj_msgSend(self._toolbarView, "removeFromSuperview");
        if (toolbarView)
        {
            objj_msgSend(toolbarView, "removeFromSuperview");
            objj_msgSend(toolbarView, "FIXME_setIsHUD:", self._styleMask & CPHUDBackgroundWindowMask);
            objj_msgSend(self, "addSubview:", toolbarView);
        }
        self._toolbarView = toolbarView;
    }
    objj_msgSend(toolbarView, "setHidden:", !objj_msgSend(self, "showsToolbar") || !objj_msgSend(toolbar, "isVisible"));
    if (theWindow)
    {
        var contentRect = objj_msgSend(self, "convertRect:toView:", objj_msgSend(objj_msgSend(theWindow, "contentView"), "frame"), nil);
        contentRect.origin = objj_msgSend(theWindow, "convertBaseToGlobal:", contentRect.origin);
        objj_msgSend(self, "setAutoresizesSubviews:", NO);
        objj_msgSend(theWindow, "setFrame:", objj_msgSend(theWindow, "frameRectForContentRect:", contentRect));
        objj_msgSend(self, "setAutoresizesSubviews:", YES);
    }
    objj_msgSend(self, "tile");
}
,["void"]), new objj_method(sel_getUid("noteKeyWindowStateChanged"), function $_CPWindowView__noteKeyWindowStateChanged(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "isKeyWindow"))
        objj_msgSend(self, "setThemeState:", CPThemeStateKeyWindow);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateKeyWindow);
}
,["void"]), new objj_method(sel_getUid("noteMainWindowStateChanged"), function $_CPWindowView__noteMainWindowStateChanged(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(self, "window"), "isMainWindow"))
        objj_msgSend(self, "setThemeState:", CPThemeStateMainWindow);
    else
        objj_msgSend(self, "unsetThemeState:", CPThemeStateMainWindow);
}
,["void"]), new objj_method(sel_getUid("didAddSubview:"), function $_CPWindowView__didAddSubview_(self, _cmd, aView)
{
    if (!self._resizeIndicator || aView === self._resizeIndicator)
        return;
    objj_msgSend(self, "addSubview:", self._resizeIndicator);
}
,["void","CPView"]), new objj_method(sel_getUid("_enableSheet:inWindow:"), function $_CPWindowView___enableSheet_inWindow_(self, _cmd, enable, parentWindow)
{
    if (enable)
    {
        var myWidth = objj_msgSend(self, "bounds").size.width,
            shadowWidth = objj_msgSend(self, "_shadowViewWidthForParentWindow:", parentWindow),
            shadowHeight = objj_msgSend(self, "currentValueForThemeAttribute:", "shadow-height");
        self._sheetShadowView = objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMake(FLOOR((myWidth - shadowWidth) / 2), 0, shadowWidth, shadowHeight));
        objj_msgSend(self._sheetShadowView, "setAutoresizingMask:", CPViewWidthSizable);
        objj_msgSend(self, "addSubview:", self._sheetShadowView);
    }
    else
    {
        objj_msgSend(self._sheetShadowView, "removeFromSuperview");
        self._sheetShadowView = nil;
    }
    objj_msgSend(self, "setNeedsLayout");
}
,["void","BOOL","CPWindow"]), new objj_method(sel_getUid("_shadowViewWidthForParentWindow:"), function $_CPWindowView___shadowViewWidthForParentWindow_(self, _cmd, parentWindow)
{
    var myWidth = objj_msgSend(self, "bounds").size.width,
        parentWidth = objj_msgSend(objj_msgSend(parentWindow, "contentView"), "bounds").size.width;
    return MIN(myWidth, parentWidth);
}
,["CGRect","CPWindow"]), new objj_method(sel_getUid("layoutSubviews"), function $_CPWindowView__layoutSubviews(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowView").super_class }, "layoutSubviews");
    objj_msgSend(self._sheetShadowView, "setBackgroundColor:", objj_msgSend(self, "valueForThemeAttribute:", "attached-sheet-shadow-color"));
    if (self._resizeIndicator)
    {
        var size = objj_msgSend(self, "valueForThemeAttribute:", "size-indicator"),
            boundsSize = objj_msgSend(self, "frame").size;
        objj_msgSend(self._resizeIndicator, "setFrame:", CGRectMake(boundsSize.width - size.width - self._resizeIndicatorOffset.width, boundsSize.height - size.height - self._resizeIndicatorOffset.height, size.width, size.height));
        objj_msgSend(self._resizeIndicator, "setImage:", objj_msgSend(self, "valueForThemeAttribute:", "resize-indicator"));
    }
}
,["void"]), new objj_method(sel_getUid("_adjustShadowViewSize"), function $_CPWindowView___adjustShadowViewSize(self, _cmd)
{
    if (!self._sheetShadowView)
        return;
    var myWidth = objj_msgSend(self, "frame").size.width,
        shadowFrame = objj_msgSend(self._sheetShadowView, "frame"),
        shadowWidth = objj_msgSend(self, "_shadowViewWidthForParentWindow:", self._window._parentView);
    shadowFrame.origin.x = FLOOR((myWidth - shadowWidth) / 2);
    shadowFrame.size.width = shadowWidth;
    objj_msgSend(self._sheetShadowView, "setFrame:", shadowFrame);
}
,["void"]), new objj_method(sel_getUid("_minimumResizeSize"), function $_CPWindowView___minimumResizeSize(self, _cmd)
{
    return CGSizeMake(4, _CPWindowViewMinContentHeight);
}
,["CGSize"]), new objj_method(sel_getUid("bodyOffset"), function $_CPWindowView__bodyOffset(self, _cmd)
{
    return objj_msgSend(self, "frame").origin.y;
}
,["int"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("contentRectForFrameRect:"), function $_CPWindowView__contentRectForFrameRect_(self, _cmd, aFrameRect)
{
    return CGRectMakeCopy(aFrameRect);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $_CPWindowView__frameRectForContentRect_(self, _cmd, aContentRect)
{
    return CGRectMakeCopy(aContentRect);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("defaultThemeClass"), function $_CPWindowView__defaultThemeClass(self, _cmd)
{
    return "window";
}
,["CPString"]), new objj_method(sel_getUid("themeAttributes"), function $_CPWindowView__themeAttributes(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", 25, "title-bar-height", CGInsetMakeZero(), "shadow-inset", 5, "shadow-distance", objj_msgSend(CPColor, "clearColor"), "window-shadow-color", CGSizeMakeZero(), "size-indicator", objj_msgSend(CPNull, "null"), "resize-indicator", objj_msgSend(CPColor, "blackColor"), "attached-sheet-shadow-color", 8, "shadow-height", objj_msgSend(CPNull, "null"), "close-image-origin", objj_msgSend(CPNull, "null"), "close-image-size", objj_msgSend(CPNull, "null"), "close-image", objj_msgSend(CPNull, "null"), "close-active-image", objj_msgSend(CPNull, "null"), "bezel-color", objj_msgSend(CPColor, "blackColor"), "title-text-color", objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize), "title-font", objj_msgSend(CPNull, "null"), "title-text-shadow-color", CGSizeMakeZero(), "title-text-shadow-offset", CPCenterTextAlignment, "title-alignment", CPLineBreakByTruncatingTail, "title-line-break-mode", CPTopVerticalTextAlignment, "title-vertical-alignment");
}
,["id"])]);
}p;10;CPWindow.jt;106997;@STATIC;1.0;I;25;Foundation/CPCountedSet.jI;33;Foundation/CPNotificationCenter.jI;26;Foundation/CPUndoManager.ji;12;CGGeometry.ji;13;CPAnimation.ji;10;CPCursor.ji;14;CPDragServer.ji;9;CPEvent.ji;18;CPPlatformWindow.ji;22;CPPlatformWindow+DOM.ji;13;CPResponder.ji;10;CPScreen.ji;8;CPText.ji;8;CPView.ji;20;CPWindow_Constants.ji;31;_CPBorderlessBridgeWindowView.ji;25;_CPBorderlessWindowView.ji;23;_CPDocModalWindowView.ji;18;_CPHUDWindowView.ji;20;_CPModalWindowView.ji;22;_CPPopoverWindowView.ji;21;_CPShadowWindowView.ji;23;_CPStandardWindowView.ji;22;_CPToolTipWindowView.jt;106413;objj_executeFile("Foundation/CPCountedSet.j", NO);objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("Foundation/CPUndoManager.j", NO);objj_executeFile("CGGeometry.j", YES);objj_executeFile("CPAnimation.j", YES);objj_executeFile("CPCursor.j", YES);objj_executeFile("CPDragServer.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPPlatformWindow.j", YES);objj_executeFile("CPPlatformWindow+DOM.j", YES);objj_executeFile("CPResponder.j", YES);objj_executeFile("CPScreen.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPView.j", YES);objj_executeFile("CPWindow_Constants.j", YES);objj_executeFile("_CPBorderlessBridgeWindowView.j", YES);objj_executeFile("_CPBorderlessWindowView.j", YES);objj_executeFile("_CPDocModalWindowView.j", YES);objj_executeFile("_CPHUDWindowView.j", YES);objj_executeFile("_CPModalWindowView.j", YES);objj_executeFile("_CPPopoverWindowView.j", YES);objj_executeFile("_CPShadowWindowView.j", YES);objj_executeFile("_CPStandardWindowView.j", YES);objj_executeFile("_CPToolTipWindowView.j", YES);var CPWindowSaveImage = nil,
    CPWindowResizeTime = 0.2,
    CPWindowResizeStyleGlobalChangeNotification = "CPWindowResizeStyleGlobalChangeNotification",
    CPWindowMinVisibleHorizontalMargin = 40,
    CPWindowMinVisibleVerticalMargin = 2;
var CPWindowActionMessageKeys = [CPLeftArrowFunctionKey, CPRightArrowFunctionKey, CPUpArrowFunctionKey, CPDownArrowFunctionKey, CPPageUpFunctionKey, CPPageDownFunctionKey, CPHomeFunctionKey, CPEndFunctionKey, CPEscapeFunctionKey];
{var the_class = objj_allocateClassPair(CPResponder, "CPWindow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_platformWindow"), new objj_ivar("_windowNumber"), new objj_ivar("_styleMask"), new objj_ivar("_frame"), new objj_ivar("_level"), new objj_ivar("_isVisible"), new objj_ivar("_hasBeenOrderedIn"), new objj_ivar("_isMiniaturized"), new objj_ivar("_isAnimating"), new objj_ivar("_hasShadow"), new objj_ivar("_isMovableByWindowBackground"), new objj_ivar("_isMovable"), new objj_ivar("_constrainsToUsableScreen"), new objj_ivar("_shadowStyle"), new objj_ivar("_showsResizeIndicator"), new objj_ivar("_positioningMask"), new objj_ivar("_positioningScreenRect"), new objj_ivar("_isDocumentEdited"), new objj_ivar("_isDocumentSaving"), new objj_ivar("_shadowView"), new objj_ivar("_windowView"), new objj_ivar("_contentView"), new objj_ivar("_toolbarView"), new objj_ivar("_mouseEnteredStack"), new objj_ivar("_leftMouseDownView"), new objj_ivar("_rightMouseDownView"), new objj_ivar("_toolbar"), new objj_ivar("_firstResponder"), new objj_ivar("_initialFirstResponder"), new objj_ivar("_hasBecomeKeyWindow"), new objj_ivar("_delegate"), new objj_ivar("_title"), new objj_ivar("_acceptsMouseMovedEvents"), new objj_ivar("_ignoresMouseEvents"), new objj_ivar("_windowController"), new objj_ivar("_minSize"), new objj_ivar("_maxSize"), new objj_ivar("_undoManager"), new objj_ivar("_representedURL"), new objj_ivar("_registeredDraggedTypes"), new objj_ivar("_registeredDraggedTypesArray"), new objj_ivar("_inclusiveRegisteredDraggedTypes"), new objj_ivar("_defaultButton"), new objj_ivar("_defaultButtonEnabled"), new objj_ivar("_autorecalculatesKeyViewLoop"), new objj_ivar("_keyViewLoopIsDirty"), new objj_ivar("_sharesChromeWithPlatformWindow"), new objj_ivar("_DOMElement"), new objj_ivar("_autoresizingMask"), new objj_ivar("_delegateRespondsToWindowWillReturnUndoManagerSelector"), new objj_ivar("_isFullPlatformWindow"), new objj_ivar("_fullPlatformWindowSession"), new objj_ivar("_parentWindow"), new objj_ivar("_childWindows"), new objj_ivar("_childOrdering"), new objj_ivar("_sheetContext"), new objj_ivar("_parentView"), new objj_ivar("_isSheet"), new objj_ivar("_frameAnimation")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("_hasBeenOrderedIn"), function $CPWindow___hasBeenOrderedIn(self, _cmd)
{
    return self._hasBeenOrderedIn;
}
,["BOOL"]), new objj_method(sel_getUid("_setHasBeenOrderedIn:"), function $CPWindow___setHasBeenOrderedIn_(self, _cmd, newValue)
{
    self._hasBeenOrderedIn = newValue;
}
,["void","BOOL"]), new objj_method(sel_getUid("_childOrdering"), function $CPWindow___childOrdering(self, _cmd)
{
    return self._childOrdering;
}
,["CPWindowOrderingMode"]), new objj_method(sel_getUid("_setChildOrdering:"), function $CPWindow___setChildOrdering_(self, _cmd, newValue)
{
    self._childOrdering = newValue;
}
,["void","CPWindowOrderingMode"]), new objj_method(sel_getUid("init"), function $CPWindow__init(self, _cmd)
{
    return objj_msgSend(self, "initWithContentRect:styleMask:", CGRectMakeZero(), CPTitledWindowMask);
}
,["id"]), new objj_method(sel_getUid("initWithContentRect:styleMask:"), function $CPWindow__initWithContentRect_styleMask_(self, _cmd, aContentRect, aStyleMask)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWindow").super_class }, "init");
    if (self)
    {
        var windowViewClass = objj_msgSend(objj_msgSend(self, "class"), "_windowViewClassForStyleMask:", aStyleMask);
        self._frame = objj_msgSend(windowViewClass, "frameRectForContentRect:", aContentRect);
        self._constrainsToUsableScreen = YES;
        objj_msgSend(self, "_setSharesChromeWithPlatformWindow:", !objj_msgSend(CPPlatform, "isBrowser"));
        if (objj_msgSend(CPPlatform, "isBrowser"))
            objj_msgSend(self, "setPlatformWindow:", objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"));
        else
        {
            if (aStyleMask & CPBorderlessBridgeWindowMask && aContentRect.size.width === 0 && aContentRect.size.height === 0)
            {
                var visibleFrame = objj_msgSend(objj_msgSend(objj_msgSend(CPScreen, "alloc"), "init"), "visibleFrame");
                self._frame.size.height = MIN(768.0, visibleFrame.size.height);
                self._frame.size.width = MIN(1024.0, visibleFrame.size.width);
                self._frame.origin.x = (visibleFrame.size.width - self._frame.size.width) / 2;
                self._frame.origin.y = (visibleFrame.size.height - self._frame.size.height) / 2;
            }
            objj_msgSend(self, "setPlatformWindow:", objj_msgSend(objj_msgSend(CPPlatformWindow, "alloc"), "initWithContentRect:", self._frame));
            objj_msgSend(self, "platformWindow")._only = self;
        }
        self._isFullPlatformWindow = NO;
        self._registeredDraggedTypes = objj_msgSend(CPSet, "set");
        self._registeredDraggedTypesArray = [];
        self._acceptsMouseMovedEvents = YES;
        self._isMovable = YES;
        self._hasBeenOrderedIn = NO;
        self._parentWindow = nil;
        self._childWindows = [];
        self._childOrdering = CPWindowOut;
        self._isSheet = NO;
        self._sheetContext = nil;
        self._parentView = nil;
        self._windowNumber = objj_msgSend(CPApp._windows, "count");
        CPApp._windows[self._windowNumber] = self;
        self._styleMask = aStyleMask;
        objj_msgSend(self, "setLevel:", CPNormalWindowLevel);
        self._windowView = objj_msgSend(objj_msgSend(windowViewClass, "alloc"), "initWithFrame:styleMask:", CGRectMake(0.0, 0.0, CGRectGetWidth(self._frame), CGRectGetHeight(self._frame)), aStyleMask);
        objj_msgSend(self._windowView, "_setWindow:", self);
        objj_msgSend(self._windowView, "setNextResponder:", self);
        self._minSize = objj_msgSend(self, "_calculateMinSizeForProposedSize:", CGSizeMake(0.0, 0.0));
        self._maxSize = CGSizeMake(1000000.0, 1000000.0);
        objj_msgSend(self, "setMovableByWindowBackground:", aStyleMask & CPHUDBackgroundWindowMask);
        objj_msgSend(self, "setContentView:", objj_msgSend(objj_msgSend(CPView, "alloc"), "initWithFrame:", CGRectMakeZero()));
        self._firstResponder = self;
        self._DOMElement = document.createElement("div");
        self._DOMElement.style.position = "absolute";
        self._DOMElement.style.visibility = "visible";
        self._DOMElement.style.zIndex = 0;
        if (!objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
        {
            if (NULL)
                var ____p = CGPointApplyAffineTransform(CGPointMake(CGRectGetMinX(self._frame), CGRectGetMinY(self._frame)), NULL);
            else
                var ____p = CGPointMake(CGRectGetMinX(self._frame), CGRectGetMinY(self._frame));
            self._DOMElement.style.left = ROUND(____p.x) + "px";
            self._DOMElement.style.top = ROUND(____p.y) + "px";
        }
        self._DOMElement.style.width = MAX(0.0, ROUND(1)) + "px";
        self._DOMElement.style.height = MAX(0.0, ROUND(1)) + "px";
        self._DOMElement.appendChild(self._windowView._DOMElement);
        objj_msgSend(self, "setNextResponder:", CPApp);
        objj_msgSend(self, "setHasShadow:", aStyleMask !== CPBorderlessWindowMask);
        if (aStyleMask & CPBorderlessBridgeWindowMask)
            objj_msgSend(self, "setFullPlatformWindow:", YES);
        self._autorecalculatesKeyViewLoop = NO;
        self._defaultButtonEnabled = YES;
        self._keyViewLoopIsDirty = NO;
        self._hasBecomeKeyWindow = NO;
        objj_msgSend(self, "setShowsResizeIndicator:", self._styleMask & CPResizableWindowMask);
        objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "addObserver:selector:name:object:", self, sel_getUid("_didReceiveResizeStyleChange:"), CPWindowResizeStyleGlobalChangeNotification, nil);
    }
    return self;
}
,["id","CGRect","unsigned int"]), new objj_method(sel_getUid("platformWindow"), function $CPWindow__platformWindow(self, _cmd)
{
    return self._platformWindow;
}
,["CPPlatformWindow"]), new objj_method(sel_getUid("setPlatformWindow:"), function $CPWindow__setPlatformWindow_(self, _cmd, aPlatformWindow)
{
    var wasVisible = objj_msgSend(self, "isVisible");
    if (wasVisible)
        objj_msgSend(self, "close");
    self._platformWindow = aPlatformWindow;
    objj_msgSend(self._platformWindow, "_setTitle:window:", self._title, self);
    if (wasVisible)
        objj_msgSend(self, "orderFront:", self);
}
,["void","CPPlatformWindow"]), new objj_method(sel_getUid("awakeFromCib"), function $CPWindow__awakeFromCib(self, _cmd)
{
    if (self._positioningScreenRect)
    {
        var actualScreenRect = objj_msgSend(CPPlatform, "isBrowser") ? objj_msgSend(self._platformWindow, "contentBounds") : objj_msgSend(objj_msgSend(self, "screen"), "visibleFrame"),
            frame = objj_msgSend(self, "frame"),
            origin = frame.origin;
        if (actualScreenRect)
        {
            if (self._positioningMask & CPWindowPositionFlexibleLeft && self._positioningMask & CPWindowPositionFlexibleRight)
            {
                origin.x *= actualScreenRect.size.width / self._positioningScreenRect.size.width;
            }
            else if (self._positioningMask & CPWindowPositionFlexibleLeft)
            {
                origin.x += actualScreenRect.size.width - self._positioningScreenRect.size.width;
            }
            else if (self._positioningMask & CPWindowPositionFlexibleRight)
            {
            }
            if (self._positioningMask & CPWindowPositionFlexibleTop && self._positioningMask & CPWindowPositionFlexibleBottom)
            {
                origin.y *= actualScreenRect.size.height / self._positioningScreenRect.size.height;
            }
            else if (self._positioningMask & CPWindowPositionFlexibleTop)
            {
                origin.y += actualScreenRect.size.height - self._positioningScreenRect.size.height;
            }
            else if (self._positioningMask & CPWindowPositionFlexibleBottom)
            {
            }
            objj_msgSend(self, "setFrameOrigin:", origin);
        }
    }
    if (objj_msgSend(self, "_hasKeyViewLoop:", objj_msgSend(self._contentView, "subviews")))
    {
        var views = objj_msgSend(self, "_viewsSortedByPosition"),
            count = objj_msgSend(views, "count");
        for (var i = 1; i < count; ++i)
        {
            var view = views[i];
            if (objj_msgSend(view, "nextKeyView"))
            {
                objj_msgSend(self._contentView, "setNextKeyView:", view);
                break;
            }
        }
    }
    else
    {
        objj_msgSend(self, "_doRecalculateKeyViewLoop");
    }
}
,["void"]), new objj_method(sel_getUid("_setWindowView:"), function $CPWindow___setWindowView_(self, _cmd, aWindowView)
{
    if (self._windowView === aWindowView)
        return;
    var oldWindowView = self._windowView;
    self._windowView = aWindowView;
    if (oldWindowView)
    {
        objj_msgSend(oldWindowView, "_setWindow:", nil);
        objj_msgSend(oldWindowView, "noteToolbarChanged");
        self._DOMElement.removeChild(oldWindowView._DOMElement);
    }
    if (self._windowView)
    {
        self._DOMElement.appendChild(self._windowView._DOMElement);
        var contentRect = objj_msgSend(self._contentView, "convertRect:toView:", objj_msgSend(self._contentView, "bounds"), nil);
        contentRect.origin = objj_msgSend(self, "convertBaseToGlobal:", contentRect.origin);
        objj_msgSend(self._windowView, "_setWindow:", self);
        objj_msgSend(self._windowView, "setNextResponder:", self);
        objj_msgSend(self._windowView, "addSubview:", self._contentView);
        objj_msgSend(self._windowView, "setTitle:", self._title);
        objj_msgSend(self._windowView, "noteToolbarChanged");
        objj_msgSend(self._windowView, "setShowsResizeIndicator:", objj_msgSend(self, "showsResizeIndicator"));
        objj_msgSend(self, "setFrame:", objj_msgSend(self, "frameRectForContentRect:", contentRect));
    }
}
,["void","CPView"]), new objj_method(sel_getUid("setFullPlatformWindow:"), function $CPWindow__setFullPlatformWindow_(self, _cmd, shouldBeFullPlatformWindow)
{
    if (!objj_msgSend(self._platformWindow, "supportsFullPlatformWindows"))
        return;
    shouldBeFullPlatformWindow = !!shouldBeFullPlatformWindow;
    if (self._isFullPlatformWindow === shouldBeFullPlatformWindow)
        return;
    self._isFullPlatformWindow = shouldBeFullPlatformWindow;
    if (self._isFullPlatformWindow)
    {
        self._fullPlatformWindowSession = _CPWindowFullPlatformWindowSessionMake(self._windowView, objj_msgSend(self, "contentRectForFrameRect:", objj_msgSend(self, "frame")), objj_msgSend(self, "hasShadow"), objj_msgSend(self, "level"));
        var fullPlatformWindowViewClass = objj_msgSend(objj_msgSend(self, "class"), "_windowViewClassForFullPlatformWindowStyleMask:", self._styleMask),
            windowView = objj_msgSend(objj_msgSend(fullPlatformWindowViewClass, "alloc"), "initWithFrame:styleMask:", CGRectMakeZero(), self._styleMask);
        objj_msgSend(self, "_setWindowView:", windowView);
        objj_msgSend(self, "setLevel:", CPBackgroundWindowLevel);
        objj_msgSend(self, "setHasShadow:", NO);
        objj_msgSend(self, "setAutoresizingMask:", CPWindowWidthSizable | CPWindowHeightSizable);
        objj_msgSend(self, "setFrame:", objj_msgSend(self._platformWindow, "visibleFrame"));
    }
    else
    {
        var windowView = self._fullPlatformWindowSession.windowView;
        objj_msgSend(self, "_setWindowView:", windowView);
        objj_msgSend(self, "setLevel:", self._fullPlatformWindowSession.level);
        objj_msgSend(self, "setHasShadow:", self._fullPlatformWindowSession.hasShadow);
        objj_msgSend(self, "setAutoresizingMask:", CPWindowNotSizable);
        objj_msgSend(self, "setFrame:", objj_msgSend(windowView, "frameRectForContentRect:", self._fullPlatformWindowSession.contentRect));
    }
}
,["void","BOOL"]), new objj_method(sel_getUid("isFullPlatformWindow"), function $CPWindow__isFullPlatformWindow(self, _cmd)
{
    return self._isFullPlatformWindow;
}
,["BOOL"]), new objj_method(sel_getUid("styleMask"), function $CPWindow__styleMask(self, _cmd)
{
    return self._styleMask;
}
,["unsigned"]), new objj_method(sel_getUid("contentRectForFrameRect:"), function $CPWindow__contentRectForFrameRect_(self, _cmd, aFrame)
{
    return objj_msgSend(self._windowView, "contentRectForFrameRect:", aFrame);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frameRectForContentRect:"), function $CPWindow__frameRectForContentRect_(self, _cmd, aContentRect)
{
    return objj_msgSend(self._windowView, "frameRectForContentRect:", aContentRect);
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("frame"), function $CPWindow__frame(self, _cmd)
{
    return CGRectMakeCopy(self._frame);
}
,["CGRect"]), new objj_method(sel_getUid("setFrame:display:animate:"), function $CPWindow__setFrame_display_animate_(self, _cmd, aFrame, shouldDisplay, shouldAnimate)
{
    objj_msgSend(self, "_setFrame:display:animate:constrainWidth:constrainHeight:", aFrame, shouldDisplay, shouldAnimate, NO, YES);
}
,["void","CGRect","BOOL","BOOL"]), new objj_method(sel_getUid("_setFrame:display:animate:constrainWidth:constrainHeight:"), function $CPWindow___setFrame_display_animate_constrainWidth_constrainHeight_(self, _cmd, aFrame, shouldDisplay, shouldAnimate, shouldConstrainWidth, shouldConstrainHeight)
{
    var frame = CGRectMakeCopy(aFrame),
        value = frame.origin.x,
        delta = value - FLOOR(value);
    if (delta)
        frame.origin.x = value > 0.879 ? CEIL(value) : FLOOR(value);
    value = frame.origin.y;
    delta = value - FLOOR(value);
    if (delta)
        frame.origin.y = value > 0.879 ? CEIL(value) : FLOOR(value);
    value = frame.size.width;
    delta = value - FLOOR(value);
    if (delta)
        frame.size.width = value > 0.15 ? CEIL(value) : FLOOR(value);
    value = frame.size.height;
    delta = value - FLOOR(value);
    if (delta)
        frame.size.height = value > 0.15 ? CEIL(value) : FLOOR(value);
    frame = objj_msgSend(self, "_constrainFrame:toUsableScreenWidth:andHeight:", frame, shouldConstrainWidth, shouldConstrainHeight);
    if (shouldAnimate)
    {
        objj_msgSend(self._frameAnimation, "stopAnimation");
        self._frameAnimation = objj_msgSend(objj_msgSend(_CPWindowFrameAnimation, "alloc"), "initWithWindow:targetFrame:", self, frame);
        objj_msgSend(self._frameAnimation, "startAnimation");
    }
    else
    {
        var origin = self._frame.origin,
            newOrigin = frame.origin,
            originMoved = !CGPointEqualToPoint(origin, newOrigin);
        if (originMoved)
        {
            delta = CGPointMake(newOrigin.x - origin.x, newOrigin.y - origin.y);
            origin.x = newOrigin.x;
            origin.y = newOrigin.y;
            if (!objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
            {
                if (NULL)
                    var ____p = CGPointApplyAffineTransform(CGPointMake(origin.x, origin.y), NULL);
                else
                    var ____p = CGPointMake(origin.x, origin.y);
                self._DOMElement.style.left = ROUND(____p.x) + "px";
                self._DOMElement.style.top = ROUND(____p.y) + "px";
            }
            if (objj_msgSend(self, "attachedSheet"))
                objj_msgSend(self, "_setAttachedSheetFrameOrigin");
            objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidMoveNotification, self);
        }
        var size = self._frame.size,
            newSize = frame.size;
        if (!CGSizeEqualToSize(size, newSize))
        {
            size.width = newSize.width;
            size.height = newSize.height;
            objj_msgSend(self._windowView, "setFrameSize:", size);
            if (self._hasShadow)
                objj_msgSend(self._shadowView, "setNeedsLayout");
            if (!self._isAnimating)
                objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidResizeNotification, self);
        }
        if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
            objj_msgSend(self._platformWindow, "setContentRect:", self._frame);
        if (originMoved)
            objj_msgSend(self, "_moveChildWindows:", delta);
    }
}
,["void","CGRect","BOOL","BOOL","BOOL","BOOL"]), new objj_method(sel_getUid("_constrainFrame:toUsableScreenWidth:andHeight:"), function $CPWindow___constrainFrame_toUsableScreenWidth_andHeight_(self, _cmd, aFrame, constrainWidth, constrainHeight)
{
    var frame = CGRectMakeCopy(aFrame);
    if (!self._constrainsToUsableScreen || !self._isVisible)
        return frame;
    var usableRect = objj_msgSend(self._platformWindow, "usableContentFrame");
    if (constrainWidth)
    {
        frame.origin.x = MAX(frame.origin.x, usableRect.origin.x);
        var maxX = MIN(CGRectGetMaxX(frame), CGRectGetMaxX(usableRect));
        frame.origin.x = maxX - frame.size.width;
        var usableWidth = CGRectGetWidth(usableRect);
        if (CGRectGetWidth(frame) > usableWidth)
        {
            frame.origin.x = CGRectGetMinX(usableRect);
            frame.size.width = MAX(usableWidth, self._minSize.width);
        }
    }
    if (constrainHeight)
    {
        frame.origin.y = MAX(frame.origin.y, usableRect.origin.y);
        var maxY = MIN(CGRectGetMaxY(frame), CGRectGetMaxY(usableRect));
        frame.origin.y = maxY - frame.size.height;
        var usableHeight = CGRectGetHeight(usableRect);
        if (CGRectGetHeight(frame) > usableHeight)
        {
            frame.origin.y = CGRectGetMinY(usableRect);
            frame.size.height = MAX(usableHeight, self._minSize.height);
        }
    }
    return frame;
}
,["CGRect","CGRect","BOOL","BOOL"]), new objj_method(sel_getUid("_constrainOriginOfFrame:"), function $CPWindow___constrainOriginOfFrame_(self, _cmd, aFrame)
{
    var frame = CGRectMakeCopy(aFrame);
    if (!self._constrainsToUsableScreen || !self._isVisible)
        return frame;
    var usableRect = objj_msgSend(self._platformWindow, "usableContentFrame"),
        minimumSize = objj_msgSend(self._windowView, "_minimumResizeSize");
    frame.origin.x = MAX(frame.origin.x, CGRectGetMinX(usableRect) + minimumSize.width - CGRectGetWidth(frame));
    frame.origin.x = MIN(frame.origin.x, CGRectGetMaxX(usableRect) - minimumSize.width);
    frame.origin.y = MAX(frame.origin.y, CGRectGetMinY(usableRect));
    frame.origin.y = MIN(frame.origin.y, CGRectGetMaxY(usableRect) - CGRectGetMinY(objj_msgSend(self._contentView, "frame")) - CPWindowMinVisibleVerticalMargin);
    return frame;
}
,["CGRect","CGRect"]), new objj_method(sel_getUid("_moveChildWindows:"), function $CPWindow___moveChildWindows_(self, _cmd, delta)
{
    objj_msgSend(self._childWindows, "enumerateObjectsUsingBlock:", function(childWindow)
    {
        var origin = objj_msgSend(childWindow, "frame").origin;
        objj_msgSend(childWindow, "setFrameOrigin:", CGPointMake(origin.x + delta.x, origin.y + delta.y));
    });
}
,["void","CGPoint"]), new objj_method(sel_getUid("setFrame:display:"), function $CPWindow__setFrame_display_(self, _cmd, aFrame, shouldDisplay)
{
    objj_msgSend(self, "setFrame:display:animate:", aFrame, shouldDisplay, NO);
}
,["void","CGRect","BOOL"]), new objj_method(sel_getUid("setFrame:"), function $CPWindow__setFrame_(self, _cmd, aFrame)
{
    objj_msgSend(self, "setFrame:display:animate:", aFrame, YES, NO);
}
,["void","CGRect"]), new objj_method(sel_getUid("setFrameOrigin:"), function $CPWindow__setFrameOrigin_(self, _cmd, anOrigin)
{
    var frame = objj_msgSend(self, "_constrainOriginOfFrame:", CGRectMake(anOrigin.x, anOrigin.y, self._frame.size.width, self._frame.size.height));
    objj_msgSend(self, "_setFrame:display:animate:constrainWidth:constrainHeight:", frame, YES, NO, NO, NO);
}
,["void","CGPoint"]), new objj_method(sel_getUid("setFrameSize:"), function $CPWindow__setFrameSize_(self, _cmd, aSize)
{
    objj_msgSend(self, "setFrame:display:animate:", CGRectMake(CGRectGetMinX(self._frame), CGRectGetMinY(self._frame), aSize.width, aSize.height), YES, NO);
}
,["void","CGSize"]), new objj_method(sel_getUid("orderFront:"), function $CPWindow__orderFront_(self, _cmd, aSender)
{
    objj_msgSend(self, "orderWindow:relativeTo:", CPWindowAbove, 0);
}
,["void","id"]), new objj_method(sel_getUid("_orderFront"), function $CPWindow___orderFront(self, _cmd)
{
    if (self._isSheet)
        objj_msgSend(self._parentView, "orderFront:", self);
    if (!self._isVisible)
        objj_msgSend(self, "_setFrame:display:animate:constrainWidth:constrainHeight:", self._frame, YES, NO, YES, YES);
    objj_msgSend(self._platformWindow, "orderFront:", self);
    objj_msgSend(self._platformWindow, "order:window:relativeTo:", CPWindowAbove, self, nil);
    if (!CPApp._keyWindow)
        objj_msgSend(self, "makeKeyWindow");
    if (objj_msgSend(self, "isKeyWindow") && (self._firstResponder === self || !self._firstResponder))
        objj_msgSend(self, "makeFirstResponder:", self._initialFirstResponder);
    if (!CPApp._mainWindow)
        objj_msgSend(self, "makeMainWindow");
}
,["void"]), new objj_method(sel_getUid("_parentDidOrderInChild"), function $CPWindow___parentDidOrderInChild(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("orderBack:"), function $CPWindow__orderBack_(self, _cmd, aSender)
{
    objj_msgSend(self, "orderWindow:relativeTo:", CPWindowBelow, 0);
}
,["void","id"]), new objj_method(sel_getUid("_orderBack"), function $CPWindow___orderBack(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("orderOut:"), function $CPWindow__orderOut_(self, _cmd, aSender)
{
    objj_msgSend(self, "orderWindow:relativeTo:", CPWindowOut, 0);
}
,["void","id"]), new objj_method(sel_getUid("_orderOutRecursively:"), function $CPWindow___orderOutRecursively_(self, _cmd, recursive)
{
    if (!self._isVisible)
        return;
    if (objj_msgSend(self, "isSheet"))
    {
        objj_msgSend(self._parentView, "_detachSheetWindow");
        return;
    }
    if (recursive)
        objj_msgSend(self._childWindows, "makeObjectsPerformSelector:withObject:", sel_getUid("_orderOutRecursively:"), recursive);
    if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
        objj_msgSend(self._platformWindow, "orderOut:", self);
    objj_msgSend(self._platformWindow, "order:window:relativeTo:", CPWindowOut, self, nil);
    objj_msgSend(self, "_updateMainAndKeyWindows");
}
,["void","BOOL"]), new objj_method(sel_getUid("orderWindow:relativeTo:"), function $CPWindow__orderWindow_relativeTo_(self, _cmd, orderingMode, otherWindowNumber)
{
    if (orderingMode === CPWindowOut)
    {
        objj_msgSend(self._parentWindow, "removeChildWindow:", self);
        objj_msgSend(self, "_orderOutRecursively:", !self._parentWindow);
    }
    else if (orderingMode === CPWindowAbove && otherWindowNumber === 0)
        objj_msgSend(self, "_orderFront");
    else if (orderingMode === CPWindowBelow && otherWindowNumber === 0)
        objj_msgSend(self, "_orderBack");
    else
        objj_msgSend(self._platformWindow, "order:window:relativeTo:", orderingMode, self, CPApp._windows[otherWindowNumber]);
}
,["void","CPWindowOrderingMode","int"]), new objj_method(sel_getUid("setLevel:"), function $CPWindow__setLevel_(self, _cmd, aLevel)
{
    if (aLevel === self._level)
        return;
    objj_msgSend(self._platformWindow, "moveWindow:fromLevel:toLevel:", self, self._level, aLevel);
    self._level = aLevel;
    objj_msgSend(self._childWindows, "makeObjectsPerformSelector:withObject:", sel_getUid("setLevel:"), self._level);
    if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
        objj_msgSend(self._platformWindow, "setLevel:", aLevel);
}
,["void","int"]), new objj_method(sel_getUid("level"), function $CPWindow__level(self, _cmd)
{
    return self._level;
}
,["int"]), new objj_method(sel_getUid("isVisible"), function $CPWindow__isVisible(self, _cmd)
{
    return self._isVisible;
}
,["BOOL"]), new objj_method(sel_getUid("_didReceiveResizeStyleChange:"), function $CPWindow___didReceiveResizeStyleChange_(self, _cmd, aNotification)
{
    objj_msgSend(self._windowView, "setShowsResizeIndicator:", self._styleMask & CPResizableWindowMask);
}
,["void","CPNotification"]), new objj_method(sel_getUid("showsResizeIndicator"), function $CPWindow__showsResizeIndicator(self, _cmd)
{
    return self._showsResizeIndicator;
}
,["BOOL"]), new objj_method(sel_getUid("setShowsResizeIndicator:"), function $CPWindow__setShowsResizeIndicator_(self, _cmd, shouldShowResizeIndicator)
{
    shouldShowResizeIndicator = !!shouldShowResizeIndicator;
    if (self._showsResizeIndicator === shouldShowResizeIndicator)
        return;
    self._showsResizeIndicator = shouldShowResizeIndicator;
    objj_msgSend(self._windowView, "setShowsResizeIndicator:", objj_msgSend(self, "showsResizeIndicator"));
}
,["void","BOOL"]), new objj_method(sel_getUid("resizeIndicatorOffset"), function $CPWindow__resizeIndicatorOffset(self, _cmd)
{
    return objj_msgSend(self._windowView, "resizeIndicatorOffset");
}
,["CGSize"]), new objj_method(sel_getUid("setResizeIndicatorOffset:"), function $CPWindow__setResizeIndicatorOffset_(self, _cmd, anOffset)
{
    objj_msgSend(self._windowView, "setResizeIndicatorOffset:", anOffset);
}
,["void","CGSize"]), new objj_method(sel_getUid("setContentView:"), function $CPWindow__setContentView_(self, _cmd, aView)
{
    if (self._contentView)
        objj_msgSend(self._contentView, "removeFromSuperview");
    var bounds = CGRectMake(0.0, 0.0, CGRectGetWidth(self._frame), CGRectGetHeight(self._frame));
    self._contentView = aView;
    objj_msgSend(self._contentView, "setFrame:", objj_msgSend(self, "contentRectForFrameRect:", bounds));
    objj_msgSend(self._contentView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
    objj_msgSend(self._windowView, "addSubview:", self._contentView);
    if (self._initialFirstResponder && self._initialFirstResponder !== self)
        self._initialFirstResponder = self;
}
,["void","CPView"]), new objj_method(sel_getUid("contentView"), function $CPWindow__contentView(self, _cmd)
{
    return self._contentView;
}
,["CPView"]), new objj_method(sel_getUid("setAlphaValue:"), function $CPWindow__setAlphaValue_(self, _cmd, aValue)
{
    objj_msgSend(self._windowView, "setAlphaValue:", aValue);
}
,["void","float"]), new objj_method(sel_getUid("alphaValue"), function $CPWindow__alphaValue(self, _cmd)
{
    return objj_msgSend(self._windowView, "alphaValue");
}
,["float"]), new objj_method(sel_getUid("setBackgroundColor:"), function $CPWindow__setBackgroundColor_(self, _cmd, aColor)
{
    objj_msgSend(self._windowView, "setBackgroundColor:", aColor);
}
,["void","CPColor"]), new objj_method(sel_getUid("backgroundColor"), function $CPWindow__backgroundColor(self, _cmd)
{
    return objj_msgSend(self._windowView, "backgroundColor");
}
,["CPColor"]), new objj_method(sel_getUid("setMinSize:"), function $CPWindow__setMinSize_(self, _cmd, aSize)
{
    if (CGSizeEqualToSize(self._minSize, aSize))
        return;
    self._minSize = objj_msgSend(self, "_calculateMinSizeForProposedSize:", aSize);
    var size = CGSizeMakeCopy(objj_msgSend(self, "frame").size),
        needsFrameChange = NO;
    if (size.width < self._minSize.width)
    {
        size.width = self._minSize.width;
        needsFrameChange = YES;
    }
    if (size.height < self._minSize.height)
    {
        size.height = self._minSize.height;
        needsFrameChange = YES;
    }
    if (needsFrameChange)
        objj_msgSend(self, "setFrameSize:", size);
}
,["void","CGSize"]), new objj_method(sel_getUid("minSize"), function $CPWindow__minSize(self, _cmd)
{
    return self._minSize;
}
,["CGSize"]), new objj_method(sel_getUid("_calculateMinSizeForProposedSize:"), function $CPWindow___calculateMinSizeForProposedSize_(self, _cmd, proposedSize)
{
    var contentFrame = objj_msgSend(self, "contentRectForFrameRect:", self._frame),
        minHeight = CGRectGetHeight(self._frame) - CGRectGetHeight(contentFrame);
    return CGSizeMake(MAX(proposedSize.width, 0), MAX(proposedSize.height, minHeight));
}
,["CGSize","CGSize"]), new objj_method(sel_getUid("setMaxSize:"), function $CPWindow__setMaxSize_(self, _cmd, aSize)
{
    if (CGSizeEqualToSize(self._maxSize, aSize))
        return;
    self._maxSize = CGSizeMakeCopy(aSize);
    var size = CGSizeMakeCopy(objj_msgSend(self, "frame").size),
        needsFrameChange = NO;
    if (size.width > self._maxSize.width)
    {
        size.width = self._maxSize.width;
        needsFrameChange = YES;
    }
    if (size.height > self._maxSize.height)
    {
        size.height = self._maxSize.height;
        needsFrameChange = YES;
    }
    if (needsFrameChange)
        objj_msgSend(self, "setFrameSize:", size);
}
,["void","CGSize"]), new objj_method(sel_getUid("maxSize"), function $CPWindow__maxSize(self, _cmd)
{
    return self._maxSize;
}
,["CGSize"]), new objj_method(sel_getUid("hasShadow"), function $CPWindow__hasShadow(self, _cmd)
{
    return self._hasShadow;
}
,["BOOL"]), new objj_method(sel_getUid("_updateShadow"), function $CPWindow___updateShadow(self, _cmd)
{
    if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
    {
        if (self._shadowView)
        {
            self._DOMElement.removeChild(self._shadowView._DOMElement);
            self._shadowView = nil;
        }
        objj_msgSend(self._platformWindow, "setHasShadow:", self._hasShadow);
        return;
    }
    if (self._hasShadow && !self._shadowView)
    {
        self._shadowView = objj_msgSend(objj_msgSend(_CPShadowWindowView, "alloc"), "initWithFrame:", CGRectMakeZero());
        objj_msgSend(self._shadowView, "setWindowView:", self._windowView);
        objj_msgSend(self._shadowView, "setAutoresizingMask:", CPViewWidthSizable | CPViewHeightSizable);
        objj_msgSend(self._shadowView, "setNeedsLayout");
        self._DOMElement.insertBefore(self._shadowView._DOMElement, self._windowView._DOMElement);
    }
    else if (!self._hasShadow && self._shadowView)
    {
        self._DOMElement.removeChild(self._shadowView._DOMElement);
        self._shadowView = nil;
    }
}
,["void"]), new objj_method(sel_getUid("setHasShadow:"), function $CPWindow__setHasShadow_(self, _cmd, shouldHaveShadow)
{
    if (self._hasShadow === shouldHaveShadow)
        return;
    self._hasShadow = shouldHaveShadow;
    objj_msgSend(self, "_updateShadow");
}
,["void","BOOL"]), new objj_method(sel_getUid("setShadowStyle:"), function $CPWindow__setShadowStyle_(self, _cmd, aStyle)
{
    self._shadowStyle = aStyle;
    objj_msgSend(objj_msgSend(self, "platformWindow"), "setShadowStyle:", self._shadowStyle);
}
,["void","unsigned"]), new objj_method(sel_getUid("setDelegate:"), function $CPWindow__setDelegate_(self, _cmd, aDelegate)
{
    var defaultCenter = objj_msgSend(CPNotificationCenter, "defaultCenter");
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidResignKeyNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidBecomeKeyNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidBecomeMainNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidResignMainNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidMoveNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidResizeNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowWillBeginSheetNotification, self);
    objj_msgSend(defaultCenter, "removeObserver:name:object:", self._delegate, CPWindowDidEndSheetNotification, self);
    self._delegate = aDelegate;
    self._delegateRespondsToWindowWillReturnUndoManagerSelector = objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowWillReturnUndoManager:"));
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidResignKey:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidResignKey:"), CPWindowDidResignKeyNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidBecomeKey:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidBecomeKey:"), CPWindowDidBecomeKeyNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidBecomeMain:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidBecomeMain:"), CPWindowDidBecomeMainNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidResignMain:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidResignMain:"), CPWindowDidResignMainNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidMove:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidMove:"), CPWindowDidMoveNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidResize:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidResize:"), CPWindowDidResizeNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowWillBeginSheet:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowWillBeginSheet:"), CPWindowWillBeginSheetNotification, self);
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowDidEndSheet:")))
        objj_msgSend(defaultCenter, "addObserver:selector:name:object:", self._delegate, sel_getUid("windowDidEndSheet:"), CPWindowDidEndSheetNotification, self);
}
,["void","id"]), new objj_method(sel_getUid("delegate"), function $CPWindow__delegate(self, _cmd)
{
    return self._delegate;
}
,["id"]), new objj_method(sel_getUid("setWindowController:"), function $CPWindow__setWindowController_(self, _cmd, aWindowController)
{
    self._windowController = aWindowController;
}
,["void","CPWindowController"]), new objj_method(sel_getUid("windowController"), function $CPWindow__windowController(self, _cmd)
{
    return self._windowController;
}
,["CPWindowController"]), new objj_method(sel_getUid("doCommandBySelector:"), function $CPWindow__doCommandBySelector_(self, _cmd, aSelector)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", aSelector))
        objj_msgSend(self._delegate, "performSelector:", aSelector);
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWindow").super_class }, "doCommandBySelector:", aSelector);
}
,["void","SEL"]), new objj_method(sel_getUid("acceptsFirstResponder"), function $CPWindow__acceptsFirstResponder(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("initialFirstResponder"), function $CPWindow__initialFirstResponder(self, _cmd)
{
    return self._initialFirstResponder;
}
,["CPView"]), new objj_method(sel_getUid("setInitialFirstResponder:"), function $CPWindow__setInitialFirstResponder_(self, _cmd, aView)
{
    self._initialFirstResponder = aView;
}
,["void","CPView"]), new objj_method(sel_getUid("_setupFirstResponder"), function $CPWindow___setupFirstResponder(self, _cmd)
{
    if (!self._hasBecomeKeyWindow)
    {
        if (self._firstResponder === self)
        {
            if (self._initialFirstResponder)
                objj_msgSend(self, "makeFirstResponder:", self._initialFirstResponder);
            else
            {
                var view = objj_msgSend(self._contentView, "nextValidKeyView");
                if (view)
                    objj_msgSend(self, "makeFirstResponder:", view);
            }
            return;
        }
    }
    if (self._firstResponder)
        objj_msgSend(self, "makeFirstResponder:", self._firstResponder);
}
,["void"]), new objj_method(sel_getUid("makeFirstResponder:"), function $CPWindow__makeFirstResponder_(self, _cmd, aResponder)
{
    if (self._firstResponder === aResponder)
        return YES;
    if (!objj_msgSend(self._firstResponder, "resignFirstResponder"))
        return NO;
    if (!aResponder || !objj_msgSend(aResponder, "acceptsFirstResponder") || !objj_msgSend(aResponder, "becomeFirstResponder"))
    {
        self._firstResponder = self;
        return NO;
    }
    self._firstResponder = aResponder;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", _CPWindowDidChangeFirstResponderNotification, self);
    return YES;
}
,["BOOL","CPResponder"]), new objj_method(sel_getUid("firstResponder"), function $CPWindow__firstResponder(self, _cmd)
{
    return self._firstResponder;
}
,["CPResponder"]), new objj_method(sel_getUid("acceptsMouseMovedEvents"), function $CPWindow__acceptsMouseMovedEvents(self, _cmd)
{
    return self._acceptsMouseMovedEvents;
}
,["BOOL"]), new objj_method(sel_getUid("setAcceptsMouseMovedEvents:"), function $CPWindow__setAcceptsMouseMovedEvents_(self, _cmd, shouldAcceptMouseMovedEvents)
{
    self._acceptsMouseMovedEvents = shouldAcceptMouseMovedEvents;
}
,["void","BOOL"]), new objj_method(sel_getUid("ignoresMouseEvents"), function $CPWindow__ignoresMouseEvents(self, _cmd)
{
    return self._ignoresMouseEvents;
}
,["BOOL"]), new objj_method(sel_getUid("setIgnoresMouseEvents:"), function $CPWindow__setIgnoresMouseEvents_(self, _cmd, shouldIgnoreMouseEvents)
{
    self._ignoresMouseEvents = shouldIgnoreMouseEvents;
}
,["void","BOOL"]), new objj_method(sel_getUid("_mouseExitedResizeRect"), function $CPWindow___mouseExitedResizeRect(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPCursor, "arrowCursor"), "set");
}
,["void"]), new objj_method(sel_getUid("title"), function $CPWindow__title(self, _cmd)
{
    return self._title;
}
,["CPString"]), new objj_method(sel_getUid("setTitle:"), function $CPWindow__setTitle_(self, _cmd, aTitle)
{
    self._title = aTitle;
    objj_msgSend(self._windowView, "setTitle:", aTitle);
    objj_msgSend(self._platformWindow, "_setTitle:window:", self._title, self);
}
,["void","CPString"]), new objj_method(sel_getUid("setTitleWithRepresentedFilename:"), function $CPWindow__setTitleWithRepresentedFilename_(self, _cmd, aFilePath)
{
    objj_msgSend(self, "setRepresentedFilename:", aFilePath);
    objj_msgSend(self, "setTitle:", objj_msgSend(aFilePath, "lastPathComponent"));
}
,["void","CPString"]), new objj_method(sel_getUid("setRepresentedFilename:"), function $CPWindow__setRepresentedFilename_(self, _cmd, aFilePath)
{
    objj_msgSend(self, "setRepresentedURL:", objj_msgSend(CPURL, "URLWithString:", aFilePath));
}
,["void","CPString"]), new objj_method(sel_getUid("representedFilename"), function $CPWindow__representedFilename(self, _cmd)
{
    return objj_msgSend(self._representedURL, "absoluteString");
}
,["CPString"]), new objj_method(sel_getUid("setRepresentedURL:"), function $CPWindow__setRepresentedURL_(self, _cmd, aURL)
{
    self._representedURL = aURL;
}
,["void","CPURL"]), new objj_method(sel_getUid("representedURL"), function $CPWindow__representedURL(self, _cmd)
{
    return self._representedURL;
}
,["CPURL"]), new objj_method(sel_getUid("screen"), function $CPWindow__screen(self, _cmd)
{
    return objj_msgSend(objj_msgSend(CPScreen, "alloc"), "init");
}
,["CPScreen"]), new objj_method(sel_getUid("setMovableByWindowBackground:"), function $CPWindow__setMovableByWindowBackground_(self, _cmd, shouldBeMovableByWindowBackground)
{
    self._isMovableByWindowBackground = shouldBeMovableByWindowBackground;
}
,["void","BOOL"]), new objj_method(sel_getUid("isMovableByWindowBackground"), function $CPWindow__isMovableByWindowBackground(self, _cmd)
{
    return self._isMovableByWindowBackground;
}
,["BOOL"]), new objj_method(sel_getUid("setMovable:"), function $CPWindow__setMovable_(self, _cmd, shouldBeMovable)
{
    self._isMovable = shouldBeMovable;
}
,["void","BOOL"]), new objj_method(sel_getUid("isMovable"), function $CPWindow__isMovable(self, _cmd)
{
    return self._isMovable;
}
,["void"]), new objj_method(sel_getUid("center"), function $CPWindow__center(self, _cmd)
{
    if (self._isFullPlatformWindow)
        return;
    var size = objj_msgSend(self, "frame").size,
        containerSize = objj_msgSend(CPPlatform, "isBrowser") ? objj_msgSend(self._platformWindow, "contentBounds").size : objj_msgSend(objj_msgSend(self, "screen"), "visibleFrame").size;
    var origin = CGPointMake((containerSize.width - size.width) / 2.0, (containerSize.height - size.height) / 2.0);
    if (origin.x < 0.0)
        origin.x = 0.0;
    if (origin.y < 0.0)
        origin.y = 0.0;
    objj_msgSend(self, "setFrameOrigin:", origin);
}
,["void"]), new objj_method(sel_getUid("sendEvent:"), function $CPWindow__sendEvent_(self, _cmd, anEvent)
{
    var type = objj_msgSend(anEvent, "type"),
        sheet = objj_msgSend(self, "attachedSheet");
    if (sheet)
    {
        switch(type) {
        case CPLeftMouseDown:
            objj_msgSend(self._windowView, "mouseDown:", anEvent);
            objj_msgSend(sheet, "makeKeyAndOrderFront:", self);
            return;
        case CPMouseMoved:
            break;
default:
            return;
        }
    }
    var point = objj_msgSend(anEvent, "locationInWindow");
    switch(type) {
    case CPFlagsChanged:
        return objj_msgSend(objj_msgSend(self, "firstResponder"), "flagsChanged:", anEvent);
    case CPKeyUp:
        return objj_msgSend(objj_msgSend(self, "firstResponder"), "keyUp:", anEvent);
    case CPKeyDown:
        if (objj_msgSend(anEvent, "charactersIgnoringModifiers") === CPTabCharacter)
        {
            if (objj_msgSend(anEvent, "modifierFlags") & CPShiftKeyMask)
                objj_msgSend(self, "selectPreviousKeyView:", self);
            else
                objj_msgSend(self, "selectNextKeyView:", self);
            objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
            return;
        }
        else if (objj_msgSend(anEvent, "charactersIgnoringModifiers") === CPBackTabCharacter)
        {
            var didTabBack = objj_msgSend(self, "selectPreviousKeyView:", self);
            if (didTabBack)
            {
                objj_msgSend(objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow"), "_propagateCurrentDOMEvent:", NO);
            }
            return didTabBack;
        }
        objj_msgSend(objj_msgSend(self, "firstResponder"), "keyDown:", anEvent);
        if (!objj_msgSend(self, "disableKeyEquivalentForDefaultButton"))
        {
            var defaultButton = objj_msgSend(self, "defaultButton"),
                keyEquivalent = objj_msgSend(defaultButton, "keyEquivalent"),
                modifierMask = objj_msgSend(defaultButton, "keyEquivalentModifierMask");
            if (objj_msgSend(anEvent, "_triggersKeyEquivalent:withModifierMask:", keyEquivalent, modifierMask))
                objj_msgSend(objj_msgSend(self, "defaultButton"), "performClick:", self);
        }
        return;
    case CPScrollWheel:
        return objj_msgSend(objj_msgSend(self._windowView, "hitTest:", point), "scrollWheel:", anEvent);
    case CPLeftMouseUp:
    case CPRightMouseUp:
        var hitTestedView = self._leftMouseDownView,
            selector = type == CPRightMouseUp ? sel_getUid("rightMouseUp:") : sel_getUid("mouseUp:");
        if (!hitTestedView)
            hitTestedView = objj_msgSend(self._windowView, "hitTest:", point);
        objj_msgSend(hitTestedView, "performSelector:withObject:", selector, anEvent);
        self._leftMouseDownView = nil;
        return;
    case CPLeftMouseDown:
    case CPRightMouseDown:
        self._leftMouseDownView = objj_msgSend(self._windowView, "hitTest:", point);
        if (self._leftMouseDownView !== self._firstResponder && objj_msgSend(self._leftMouseDownView, "acceptsFirstResponder"))
            objj_msgSend(self, "makeFirstResponder:", self._leftMouseDownView);
        objj_msgSend(CPApp, "activateIgnoringOtherApps:", YES);
        var theWindow = objj_msgSend(anEvent, "window"),
            selector = type == CPRightMouseDown ? sel_getUid("rightMouseDown:") : sel_getUid("mouseDown:");
        if (objj_msgSend(theWindow, "isKeyWindow") || objj_msgSend(theWindow, "becomesKeyOnlyIfNeeded") && !objj_msgSend(self._leftMouseDownView, "needsPanelToBecomeKey"))
            return objj_msgSend(self._leftMouseDownView, "performSelector:withObject:", selector, anEvent);
        else
        {
            objj_msgSend(self, "makeKeyAndOrderFront:", self);
            if (objj_msgSend(self._leftMouseDownView, "acceptsFirstMouse:", anEvent))
                return objj_msgSend(self._leftMouseDownView, "performSelector:withObject:", selector, anEvent);
        }
        break;
    case CPLeftMouseDragged:
    case CPRightMouseDragged:
        if (!self._leftMouseDownView)
            return objj_msgSend(objj_msgSend(self._windowView, "hitTest:", point), "mouseDragged:", anEvent);
        var selector;
        if (type == CPRightMouseDragged)
        {
            selector = sel_getUid("rightMouseDragged:");
            if (!objj_msgSend(self._leftMouseDownView, "respondsToSelector:", selector))
                selector = nil;
        }
        if (!selector)
            selector = sel_getUid("mouseDragged:");
        return objj_msgSend(self._leftMouseDownView, "performSelector:withObject:", selector, anEvent);
    case CPMouseMoved:
        objj_msgSend(self._windowView, "setCursorForLocation:resizing:", point, NO);
        if (!self._acceptsMouseMovedEvents || sheet)
            return;
        if (!self._mouseEnteredStack)
            self._mouseEnteredStack = [];
        var hitTestView = objj_msgSend(self._windowView, "hitTest:", point);
        if (objj_msgSend(self._mouseEnteredStack, "count") && objj_msgSend(self._mouseEnteredStack, "lastObject") === hitTestView)
            return objj_msgSend(hitTestView, "mouseMoved:", anEvent);
        var view = hitTestView,
            mouseEnteredStack = [];
        while (view)
        {
            mouseEnteredStack.unshift(view);
            view = objj_msgSend(view, "superview");
        }
        var deviation = MIN(self._mouseEnteredStack.length, mouseEnteredStack.length);
        while (deviation--)
            if (self._mouseEnteredStack[deviation] === mouseEnteredStack[deviation])
                break;
        var index = deviation + 1,
            count = self._mouseEnteredStack.length;
        if (index < count)
        {
            var event = objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", CPMouseExited, point, objj_msgSend(anEvent, "modifierFlags"), objj_msgSend(anEvent, "timestamp"), self._windowNumber, nil, -1, 1, 0);
            for (; index < count; ++index)
                objj_msgSend(self._mouseEnteredStack[index], "mouseExited:", event);
        }
        index = deviation + 1;
        count = mouseEnteredStack.length;
        if (index < count)
        {
            var event = objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", CPMouseEntered, point, objj_msgSend(anEvent, "modifierFlags"), objj_msgSend(anEvent, "timestamp"), self._windowNumber, nil, -1, 1, 0);
            for (; index < count; ++index)
                objj_msgSend(mouseEnteredStack[index], "mouseEntered:", event);
        }
        self._mouseEnteredStack = mouseEnteredStack;
        objj_msgSend(hitTestView, "mouseMoved:", anEvent);
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("windowNumber"), function $CPWindow__windowNumber(self, _cmd)
{
    return self._windowNumber;
}
,["int"]), new objj_method(sel_getUid("becomeKeyWindow"), function $CPWindow__becomeKeyWindow(self, _cmd)
{
    CPApp._keyWindow = self;
    if (self._firstResponder !== self && objj_msgSend(self._firstResponder, "respondsToSelector:", sel_getUid("becomeKeyWindow")))
        objj_msgSend(self._firstResponder, "becomeKeyWindow");
    if (!self._hasBecomeKeyWindow)
    {
        if (!objj_msgSend(self, "_hasKeyViewLoop:", objj_msgSend(self._contentView, "subviews")))
            objj_msgSend(self, "recalculateKeyViewLoop");
    }
    objj_msgSend(self, "_setupFirstResponder");
    self._hasBecomeKeyWindow = YES;
    objj_msgSend(self._windowView, "noteKeyWindowStateChanged");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidBecomeKeyNotification, self);
}
,["void"]), new objj_method(sel_getUid("canBecomeKeyWindow"), function $CPWindow__canBecomeKeyWindow(self, _cmd)
{
    return self._styleMask & CPTitledWindowMask || objj_msgSend(self, "isFullPlatformWindow") || self._isSheet;
}
,["BOOL"]), new objj_method(sel_getUid("isKeyWindow"), function $CPWindow__isKeyWindow(self, _cmd)
{
    return objj_msgSend(CPApp, "keyWindow") == self;
}
,["BOOL"]), new objj_method(sel_getUid("makeKeyAndOrderFront:"), function $CPWindow__makeKeyAndOrderFront_(self, _cmd, aSender)
{
    objj_msgSend(self, "orderFront:", self);
    objj_msgSend(self, "makeKeyWindow");
    objj_msgSend(self, "makeMainWindow");
}
,["void","id"]), new objj_method(sel_getUid("makeKeyWindow"), function $CPWindow__makeKeyWindow(self, _cmd)
{
    if (objj_msgSend(CPApp, "keyWindow") === self || !objj_msgSend(self, "canBecomeKeyWindow"))
        return;
    objj_msgSend(objj_msgSend(CPApp, "keyWindow"), "resignKeyWindow");
    objj_msgSend(self, "becomeKeyWindow");
}
,["void"]), new objj_method(sel_getUid("resignKeyWindow"), function $CPWindow__resignKeyWindow(self, _cmd)
{
    if (self._firstResponder !== self && objj_msgSend(self._firstResponder, "respondsToSelector:", sel_getUid("resignKeyWindow")))
        objj_msgSend(self._firstResponder, "resignKeyWindow");
    if (CPApp._keyWindow === self)
        CPApp._keyWindow = nil;
    objj_msgSend(self._windowView, "noteKeyWindowStateChanged");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidResignKeyNotification, self);
}
,["void"]), new objj_method(sel_getUid("dragImage:at:offset:event:pasteboard:source:slideBack:"), function $CPWindow__dragImage_at_offset_event_pasteboard_source_slideBack_(self, _cmd, anImage, imageLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack)
{
    objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "dragImage:fromWindow:at:offset:event:pasteboard:source:slideBack:", anImage, self, objj_msgSend(self, "convertBaseToGlobal:", imageLocation), mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack);
}
,["void","CPImage","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("_noteRegisteredDraggedTypes:"), function $CPWindow___noteRegisteredDraggedTypes_(self, _cmd, pasteboardTypes)
{
    if (!pasteboardTypes)
        return;
    if (!self._inclusiveRegisteredDraggedTypes)
        self._inclusiveRegisteredDraggedTypes = objj_msgSend(CPCountedSet, "set");
    objj_msgSend(self._inclusiveRegisteredDraggedTypes, "unionSet:", pasteboardTypes);
}
,["void","CPSet"]), new objj_method(sel_getUid("_noteUnregisteredDraggedTypes:"), function $CPWindow___noteUnregisteredDraggedTypes_(self, _cmd, pasteboardTypes)
{
    if (!pasteboardTypes)
        return;
    objj_msgSend(self._inclusiveRegisteredDraggedTypes, "minusSet:", pasteboardTypes);
    if (objj_msgSend(self._inclusiveRegisteredDraggedTypes, "count") === 0)
        self._inclusiveRegisteredDraggedTypes = nil;
}
,["void","CPSet"]), new objj_method(sel_getUid("dragView:at:offset:event:pasteboard:source:slideBack:"), function $CPWindow__dragView_at_offset_event_pasteboard_source_slideBack_(self, _cmd, aView, viewLocation, mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack)
{
    objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "dragView:fromWindow:at:offset:event:pasteboard:source:slideBack:", aView, self, objj_msgSend(self, "convertBaseToGlobal:", viewLocation), mouseOffset, anEvent, aPasteboard, aSourceObject, slideBack);
}
,["void","CPView","CGPoint","CGSize","CPEvent","CPPasteboard","id","BOOL"]), new objj_method(sel_getUid("registerForDraggedTypes:"), function $CPWindow__registerForDraggedTypes_(self, _cmd, pasteboardTypes)
{
    if (!pasteboardTypes)
        return;
    objj_msgSend(self, "_noteUnregisteredDraggedTypes:", self._registeredDraggedTypes);
    objj_msgSend(self._registeredDraggedTypes, "addObjectsFromArray:", pasteboardTypes);
    objj_msgSend(self, "_noteRegisteredDraggedTypes:", self._registeredDraggedTypes);
    self._registeredDraggedTypesArray = nil;
}
,["void","CPArray"]), new objj_method(sel_getUid("registeredDraggedTypes"), function $CPWindow__registeredDraggedTypes(self, _cmd)
{
    if (!self._registeredDraggedTypesArray)
        self._registeredDraggedTypesArray = objj_msgSend(self._registeredDraggedTypes, "allObjects");
    return self._registeredDraggedTypesArray;
}
,["CPArray"]), new objj_method(sel_getUid("unregisterDraggedTypes"), function $CPWindow__unregisterDraggedTypes(self, _cmd)
{
    objj_msgSend(self, "_noteUnregisteredDraggedTypes:", self._registeredDraggedTypes);
    self._registeredDraggedTypes = objj_msgSend(CPSet, "set");
    self._registeredDraggedTypesArray = [];
}
,["void"]), new objj_method(sel_getUid("setDocumentEdited:"), function $CPWindow__setDocumentEdited_(self, _cmd, isDocumentEdited)
{
    if (self._isDocumentEdited == isDocumentEdited)
        return;
    self._isDocumentEdited = isDocumentEdited;
    objj_msgSend(CPMenu, "_setMenuBarIconImageAlphaValue:", self._isDocumentEdited ? 0.5 : 1.0);
    objj_msgSend(self._windowView, "setDocumentEdited:", isDocumentEdited);
}
,["void","BOOL"]), new objj_method(sel_getUid("isDocumentEdited"), function $CPWindow__isDocumentEdited(self, _cmd)
{
    return self._isDocumentEdited;
}
,["BOOL"]), new objj_method(sel_getUid("setDocumentSaving:"), function $CPWindow__setDocumentSaving_(self, _cmd, isDocumentSaving)
{
    if (self._isDocumentSaving == isDocumentSaving)
        return;
    self._isDocumentSaving = isDocumentSaving;
    objj_msgSend(self, "_synchronizeSaveMenuWithDocumentSaving");
    objj_msgSend(self._windowView, "windowDidChangeDocumentSaving");
}
,["void","BOOL"]), new objj_method(sel_getUid("isDocumentSaving"), function $CPWindow__isDocumentSaving(self, _cmd)
{
    return self._isDocumentSaving;
}
,["BOOL"]), new objj_method(sel_getUid("_synchronizeSaveMenuWithDocumentSaving"), function $CPWindow___synchronizeSaveMenuWithDocumentSaving(self, _cmd)
{
    if (!objj_msgSend(self, "isMainWindow"))
        return;
    var mainMenu = objj_msgSend(CPApp, "mainMenu"),
        index = objj_msgSend(mainMenu, "indexOfItemWithTitle:", self._isDocumentSaving ? "Save" : "Saving...");
    if (index == CPNotFound)
        return;
    var item = objj_msgSend(mainMenu, "itemAtIndex:", index);
    if (self._isDocumentSaving)
    {
        CPWindowSaveImage = objj_msgSend(item, "image");
        objj_msgSend(item, "setTitle:", "Saving...");
        objj_msgSend(item, "setImage:", objj_msgSend(objj_msgSend(CPTheme, "defaultTheme"), "valueForAttributeWithName:forClass:", "spinning-regular-gif", CPProgressIndicator));
        objj_msgSend(item, "setEnabled:", NO);
    }
    else
    {
        objj_msgSend(item, "setTitle:", "Save");
        objj_msgSend(item, "setImage:", CPWindowSaveImage);
        objj_msgSend(item, "setEnabled:", YES);
    }
}
,["void"]), new objj_method(sel_getUid("performMiniaturize:"), function $CPWindow__performMiniaturize_(self, _cmd, aSender)
{
    objj_msgSend(self, "miniaturize:", aSender);
}
,["void","id"]), new objj_method(sel_getUid("miniaturize:"), function $CPWindow__miniaturize_(self, _cmd, sender)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowWillMiniaturizeNotification, self);
    objj_msgSend(objj_msgSend(self, "platformWindow"), "miniaturize:", sender);
    objj_msgSend(self, "_updateMainAndKeyWindows");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidMiniaturizeNotification, self);
    self._isMiniaturized = YES;
}
,["void","id"]), new objj_method(sel_getUid("deminiaturize:"), function $CPWindow__deminiaturize_(self, _cmd, sender)
{
    objj_msgSend(objj_msgSend(self, "platformWindow"), "deminiaturize:", sender);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidDeminiaturizeNotification, self);
    self._isMiniaturized = NO;
}
,["void","id"]), new objj_method(sel_getUid("isMiniaturized"), function $CPWindow__isMiniaturized(self, _cmd)
{
    return self._isMiniaturized;
}
,["void"]), new objj_method(sel_getUid("performClose:"), function $CPWindow__performClose_(self, _cmd, aSender)
{
    if (!(self._styleMask & CPClosableWindowMask))
        return;
    if (objj_msgSend(self, "isFullPlatformWindow"))
    {
        var event = objj_msgSend(CPApp, "currentEvent");
        if (objj_msgSend(event, "type") === CPKeyDown && objj_msgSend(event, "characters") === "w" && objj_msgSend(event, "modifierFlags") & CPPlatformActionKeyMask)
        {
            objj_msgSend(objj_msgSend(self, "platformWindow"), "_propagateCurrentDOMEvent:", YES);
            return;
        }
    }
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowShouldClose:")))
    {
        if (!objj_msgSend(self._delegate, "windowShouldClose:", self))
            return;
    }
    else if (objj_msgSend(self, "respondsToSelector:", sel_getUid("windowShouldClose:")))
    {
        if (!objj_msgSend(self, "windowShouldClose:", self))
            return;
    }
    var documents = objj_msgSend(self._windowController, "documents");
    if (objj_msgSend(documents, "count"))
    {
        var index = objj_msgSend(documents, "indexOfObject:", objj_msgSend(self._windowController, "document"));
        objj_msgSend(documents[index], "shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:", self._windowController, self, sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"), {documents: objj_msgSend(documents, "copy"), visited: 0, index: index});
    }
    else
        objj_msgSend(self, "close");
}
,["void","id"]), new objj_method(sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"), function $CPWindow___windowControllerContainingDocument_shouldClose_contextInfo_(self, _cmd, document, shouldClose, context)
{
    if (shouldClose)
    {
        var windowController = objj_msgSend(self, "windowController"),
            documents = context.documents,
            count = objj_msgSend(documents, "count"),
            visited = ++context.visited,
            index = ++context.index % count;
        objj_msgSend(document, "removeWindowController:", windowController);
        if (visited < count)
        {
            objj_msgSend(windowController, "setDocument:", documents[index]);
            objj_msgSend(documents[index], "shouldCloseWindowController:delegate:shouldCloseSelector:contextInfo:", self._windowController, self, sel_getUid("_windowControllerContainingDocument:shouldClose:contextInfo:"), context);
        }
        else
            objj_msgSend(self, "close");
    }
}
,["void","CPDocument","BOOL","Object"]), new objj_method(sel_getUid("close"), function $CPWindow__close(self, _cmd)
{
    if (objj_msgSend(self._delegate, "respondsToSelector:", sel_getUid("windowWillClose:")))
        objj_msgSend(self._delegate, "windowWillClose:", self);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowWillCloseNotification, self);
    objj_msgSend(self._parentWindow, "removeChildWindow:", self);
    objj_msgSend(self, "_orderOutRecursively:", NO);
    objj_msgSend(self, "_detachFromChildrenClosing:", !self._parentWindow);
}
,["void"]), new objj_method(sel_getUid("_detachFromChildrenClosing:"), function $CPWindow___detachFromChildrenClosing_(self, _cmd, shouldCloseChildren)
{
    objj_msgSend(self._childWindows, "enumerateObjectsUsingBlock:", function(child)
    {
        objj_msgSend(child, "setParentWindow:", nil);
    });
    if (shouldCloseChildren)
    {
        objj_msgSend(self._childWindows, "enumerateObjectsUsingBlock:", function(child)
        {
            objj_msgSend(child, "_orderOutRecursively:", NO);
            objj_msgSend(child, "_detachFromChildrenClosing:", !objj_msgSend(child, "parentWindow"));
        });
    }
    self._childWindows = [];
}
,["void","BOOL"]), new objj_method(sel_getUid("isMainWindow"), function $CPWindow__isMainWindow(self, _cmd)
{
    return objj_msgSend(CPApp, "mainWindow") === self;
}
,["BOOL"]), new objj_method(sel_getUid("canBecomeMainWindow"), function $CPWindow__canBecomeMainWindow(self, _cmd)
{
    return objj_msgSend(self, "isVisible") && (self._styleMask & CPTitledWindowMask || self._isFullPlatformWindow);
}
,["BOOL"]), new objj_method(sel_getUid("makeMainWindow"), function $CPWindow__makeMainWindow(self, _cmd)
{
    if (self._isSheet)
    {
        objj_msgSend(self._parentView, "makeMainWindow");
        return;
    }
    if (objj_msgSend(CPApp, "mainWindow") === self || !objj_msgSend(self, "canBecomeMainWindow"))
        return;
    objj_msgSend(objj_msgSend(CPApp, "mainWindow"), "resignMainWindow");
    objj_msgSend(self, "becomeMainWindow");
}
,["void"]), new objj_method(sel_getUid("becomeMainWindow"), function $CPWindow__becomeMainWindow(self, _cmd)
{
    CPApp._mainWindow = self;
    objj_msgSend(self, "_synchronizeSaveMenuWithDocumentSaving");
    objj_msgSend(self._windowView, "noteMainWindowStateChanged");
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidBecomeMainNotification, self);
}
,["void"]), new objj_method(sel_getUid("resignMainWindow"), function $CPWindow__resignMainWindow(self, _cmd)
{
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidResignMainNotification, self);
    if (CPApp._mainWindow === self)
        CPApp._mainWindow = nil;
    objj_msgSend(self._windowView, "noteMainWindowStateChanged");
}
,["void"]), new objj_method(sel_getUid("_updateMainAndKeyWindows"), function $CPWindow___updateMainAndKeyWindows(self, _cmd)
{
    var allWindows = objj_msgSend(CPApp, "orderedWindows"),
        windowCount = objj_msgSend(allWindows, "count");
    if (objj_msgSend(self, "isKeyWindow"))
    {
        var keyWindow = objj_msgSend(CPApp, "keyWindow");
        objj_msgSend(self, "resignKeyWindow");
        if (keyWindow && keyWindow !== self && objj_msgSend(keyWindow, "canBecomeKeyWindow"))
            objj_msgSend(keyWindow, "makeKeyWindow");
        else
        {
            var mainMenu = objj_msgSend(CPApp, "mainMenu"),
                menuBarClass = objj_getClass("_CPMenuBarWindow"),
                menuWindow;
            for (var i = 0; i < windowCount; i++)
            {
                var currentWindow = allWindows[i];
                if (objj_msgSend(currentWindow, "isKindOfClass:", menuBarClass))
                    menuWindow = currentWindow;
                if (currentWindow === self || currentWindow === menuWindow)
                    continue;
                if (objj_msgSend(currentWindow, "isVisible") && objj_msgSend(currentWindow, "canBecomeKeyWindow"))
                {
                    objj_msgSend(currentWindow, "makeKeyWindow");
                    break;
                }
            }
            if (!objj_msgSend(CPApp, "keyWindow"))
                objj_msgSend(menuWindow, "makeKeyWindow");
        }
    }
    if (objj_msgSend(self, "isMainWindow"))
    {
        var mainWindow = objj_msgSend(CPApp, "mainWindow");
        objj_msgSend(self, "resignMainWindow");
        if (mainWindow && mainWindow !== self && objj_msgSend(mainWindow, "canBecomeMainWindow"))
            objj_msgSend(mainWindow, "makeMainWindow");
        else
        {
            var mainMenu = objj_msgSend(CPApp, "mainMenu"),
                menuBarClass = objj_getClass("_CPMenuBarWindow"),
                menuWindow;
            for (var i = 0; i < windowCount; i++)
            {
                var currentWindow = allWindows[i];
                if (objj_msgSend(currentWindow, "isKindOfClass:", menuBarClass))
                    menuWindow = currentWindow;
                if (currentWindow === self || currentWindow === menuWindow)
                    continue;
                if (objj_msgSend(currentWindow, "isVisible") && objj_msgSend(currentWindow, "canBecomeMainWindow"))
                {
                    objj_msgSend(currentWindow, "makeMainWindow");
                    break;
                }
            }
        }
    }
}
,["void"]), new objj_method(sel_getUid("toolbar"), function $CPWindow__toolbar(self, _cmd)
{
    return self._toolbar;
}
,["CPToolbar"]), new objj_method(sel_getUid("setToolbar:"), function $CPWindow__setToolbar_(self, _cmd, aToolbar)
{
    if (self._toolbar === aToolbar)
        return;
    objj_msgSend(objj_msgSend(aToolbar, "_window"), "setToolbar:", nil);
    objj_msgSend(self._toolbar, "_setWindow:", nil);
    self._toolbar = aToolbar;
    objj_msgSend(self._toolbar, "_setWindow:", self);
    objj_msgSend(self, "_noteToolbarChanged");
}
,["void","CPToolbar"]), new objj_method(sel_getUid("toggleToolbarShown:"), function $CPWindow__toggleToolbarShown_(self, _cmd, aSender)
{
    var toolbar = objj_msgSend(self, "toolbar");
    objj_msgSend(toolbar, "setVisible:", !objj_msgSend(toolbar, "isVisible"));
}
,["void","id"]), new objj_method(sel_getUid("_noteToolbarChanged"), function $CPWindow___noteToolbarChanged(self, _cmd)
{
    var frame = CGRectMakeCopy(objj_msgSend(self, "frame")),
        newFrame;
    objj_msgSend(self._windowView, "noteToolbarChanged");
    if (self._isFullPlatformWindow)
        newFrame = objj_msgSend(self._platformWindow, "visibleFrame");
    else
    {
        newFrame = CGRectMakeCopy(objj_msgSend(self, "frame"));
        newFrame.origin = frame.origin;
    }
    objj_msgSend(self, "setFrame:", newFrame);
}
,["void"]), new objj_method(sel_getUid("childWindows"), function $CPWindow__childWindows(self, _cmd)
{
    return self._childWindows;
}
,["CPArray"]), new objj_method(sel_getUid("addChildWindow:ordered:"), function $CPWindow__addChildWindow_ordered_(self, _cmd, childWindow, orderingMode)
{
    if (objj_msgSend(self._childWindows, "indexOfObject:", childWindow) >= 0)
        return;
    if (orderingMode === CPWindowAbove || orderingMode === CPWindowBelow)
        objj_msgSend(self._childWindows, "addObject:", childWindow);
    else
        objj_msgSend(CPException, "raise:reason:", CPInvalidArgumentException, _cmd + " unrecognized ordering mode " + orderingMode);
    objj_msgSend(childWindow, "setParentWindow:", self);
    objj_msgSend(childWindow, "_setChildOrdering:", orderingMode);
    objj_msgSend(childWindow, "setLevel:", objj_msgSend(self, "level"));
    if (objj_msgSend(self, "isVisible") && !objj_msgSend(childWindow, "isVisible"))
        objj_msgSend(childWindow, "orderWindow:relativeTo:", orderingMode, self._windowNumber);
}
,["void","CPWindow","CPWindowOrderingMode"]), new objj_method(sel_getUid("removeChildWindow:"), function $CPWindow__removeChildWindow_(self, _cmd, childWindow)
{
    var index = objj_msgSend(self._childWindows, "indexOfObject:", childWindow);
    if (index === CPNotFound)
        return;
    objj_msgSend(self._childWindows, "removeObjectAtIndex:", index);
    objj_msgSend(childWindow, "setParentWindow:", nil);
}
,["void","CPWindow"]), new objj_method(sel_getUid("parentWindow"), function $CPWindow__parentWindow(self, _cmd)
{
    return self._parentWindow;
}
,["CPWindow"]), new objj_method(sel_getUid("_hasAncestorWindow:"), function $CPWindow___hasAncestorWindow_(self, _cmd, anAncestor)
{
    if (!self._parentWindow || !anAncestor)
        return NO;
    if (anAncestor === self._parentWindow)
        return YES;
    return objj_msgSend(self._parentWindow, "_hasAncestorWindow:", anAncestor);
}
,["BOOL","CPWindow"]), new objj_method(sel_getUid("setParentWindow:"), function $CPWindow__setParentWindow_(self, _cmd, parentWindow)
{
    self._parentWindow = parentWindow;
}
,["CPWindow","CPWindow"]), new objj_method(sel_getUid("_setFrame:delegate:duration:curve:"), function $CPWindow___setFrame_delegate_duration_curve_(self, _cmd, aFrame, delegate, duration, curve)
{
    objj_msgSend(self._frameAnimation, "stopAnimation");
    self._frameAnimation = objj_msgSend(objj_msgSend(_CPWindowFrameAnimation, "alloc"), "initWithWindow:targetFrame:", self, aFrame);
    objj_msgSend(self._frameAnimation, "setDelegate:", delegate);
    objj_msgSend(self._frameAnimation, "setAnimationCurve:", curve);
    objj_msgSend(self._frameAnimation, "setDuration:", duration);
    objj_msgSend(self._frameAnimation, "startAnimation");
}
,["void","CGRect","id","int","CPAnimationCurve"]), new objj_method(sel_getUid("animationResizeTime:"), function $CPWindow__animationResizeTime_(self, _cmd, newWindowFrame)
{
    return CPWindowResizeTime;
}
,["CPTimeInterval","CGRect"]), new objj_method(sel_getUid("_setAttachedSheetFrameOrigin"), function $CPWindow___setAttachedSheetFrameOrigin(self, _cmd)
{
    var attachedSheet = objj_msgSend(self, "attachedSheet"),
        contentRect = objj_msgSend(self._contentView, "frame"),
        sheetFrame = CGRectMakeCopy(objj_msgSend(attachedSheet, "frame"));
    sheetFrame.origin.y = CGRectGetMinY(self._frame) + CGRectGetMinY(contentRect);
    sheetFrame.origin.x = CGRectGetMinX(self._frame) + FLOOR((CGRectGetWidth(self._frame) - CGRectGetWidth(sheetFrame)) / 2.0);
    objj_msgSend(attachedSheet, "setFrame:display:animate:", sheetFrame, YES, NO);
}
,["void"]), new objj_method(sel_getUid("_attachSheet:modalDelegate:didEndSelector:contextInfo:"), function $CPWindow___attachSheet_modalDelegate_didEndSelector_contextInfo_(self, _cmd, aSheet, aModalDelegate, didEndSelector, contextInfo)
{
    if (self._sheetContext)
    {
        objj_msgSend(CPException, "raise:reason:", CPInternalInconsistencyException, "The target window of beginSheet: already has a sheet, did you forget orderOut: ?");
        return;
    }
    self._sheetContext = {"sheet": aSheet, "modalDelegate": aModalDelegate, "endSelector": didEndSelector, "contextInfo": contextInfo, "returnCode": -1, "opened": NO, "isAttached": YES, "savedConstrains": aSheet._constrainsToUsableScreen};
    aSheet._constrainsToUsableScreen = NO;
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("_sheetShouldAnimateIn:"), nil, NO);
}
,["void","CPWindow","id","SEL","id"]), new objj_method(sel_getUid("_endSheet"), function $CPWindow___endSheet(self, _cmd)
{
    var delegate = self._sheetContext["modalDelegate"],
        endSelector = self._sheetContext["endSelector"];
    if (delegate && endSelector)
    {
        if (self._sheetContext["isAttached"])
            objj_msgSend(delegate, endSelector, self._sheetContext["sheet"], self._sheetContext["returnCode"], self._sheetContext["contextInfo"]);
        else
            self._sheetContext["deferDidEndSelector"] = YES;
    }
}
,["void"]), new objj_method(sel_getUid("_detachSheetWindow"), function $CPWindow___detachSheetWindow(self, _cmd)
{
    self._sheetContext["isAttached"] = NO;
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("_sheetShouldAnimateOut:"), nil, NO);
}
,["void"]), new objj_method(sel_getUid("_cleanupSheetWindow"), function $CPWindow___cleanupSheetWindow(self, _cmd)
{
    var sheet = self._sheetContext["sheet"],
        deferDidEnd = self._sheetContext["deferDidEndSelector"];
    if (sheet._isModal)
        objj_msgSend(CPApp, "stopModal");
    objj_msgSend(self, "_removeClipForSheet:", sheet);
    sheet._isSheet = NO;
    objj_msgSend(sheet._windowView, "_enableSheet:inWindow:", NO, self);
    sheet._constrainsToUsableScreen = self._sheetContext["savedConstrains"];
    objj_msgSend(sheet, "orderOut:", self);
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowDidEndSheetNotification, self);
    if (deferDidEnd)
    {
        var delegate = self._sheetContext["modalDelegate"],
            selector = self._sheetContext["endSelector"],
            returnCode = self._sheetContext["returnCode"],
            contextInfo = self._sheetContext["contextInfo"];
        self._sheetContext = nil;
        sheet._parentView = nil;
        objj_msgSend(delegate, selector, sheet, returnCode, contextInfo);
    }
    else
    {
        self._sheetContext = nil;
        sheet._parentView = nil;
    }
}
,["void"]), new objj_method(sel_getUid("animationDidEnd:"), function $CPWindow__animationDidEnd_(self, _cmd, anim)
{
    var sheet = self._sheetContext["sheet"];
    if (anim._window != sheet)
        return;
    objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.0, self, sel_getUid("_sheetAnimationDidEnd:"), nil, NO);
}
,["void","id"]), new objj_method(sel_getUid("_sheetShouldAnimateIn:"), function $CPWindow___sheetShouldAnimateIn_(self, _cmd, timer)
{
    if (self._sheetContext["isOpening"] || self._sheetContext["isClosing"])
        return;
    var sheet = self._sheetContext["sheet"];
    sheet._isSheet = YES;
    sheet._parentView = self;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowWillBeginSheetNotification, self);
    sheet._isModal = NO;
    if (objj_msgSend(CPApp, "modalWindow") === self)
    {
        objj_msgSend(CPApp, "runModalForWindow:", sheet);
        sheet._isModal = YES;
    }
    var sheetFrame = objj_msgSend(sheet, "frame"),
        sheetShadowFrame = sheet._hasShadow ? objj_msgSend(sheet._shadowView, "frame") : sheetFrame,
        frame = objj_msgSend(self, "frame"),
        originX = frame.origin.x + FLOOR((frame.size.width - sheetFrame.size.width) / 2),
        startFrame = CGRectMake(originX, -sheetShadowFrame.size.height, sheetFrame.size.width, sheetFrame.size.height),
        endY = -1 + objj_msgSend(self._windowView, "bodyOffset") - objj_msgSend(objj_msgSend(self, "contentView"), "frame").origin.y,
        endFrame = CGRectMake(originX, endY, sheetFrame.size.width, sheetFrame.size.height);
    if (self._toolbar && objj_msgSend(self._windowView, "showsToolbar") && objj_msgSend(self, "isFullPlatformWindow"))
    {
        endY += objj_msgSend(objj_msgSend(self._toolbar, "_toolbarView"), "frameSize").height;
        endFrame = CGRectMake(originX, endY, sheetFrame.size.width, sheetFrame.size.height);
    }
    objj_msgSend(sheet, "setFrameOrigin:", CGPointMake(0, -13000));
    objj_msgSend(sheet, "orderFront:", self);
    objj_msgSend(self, "_clipSheet:", sheet);
    objj_msgSend(sheet, "setFrame:display:animate:", startFrame, YES, NO);
    self._sheetContext["opened"] = YES;
    self._sheetContext["shouldClose"] = NO;
    self._sheetContext["isOpening"] = YES;
    objj_msgSend(sheet, "_setFrame:delegate:duration:curve:", endFrame, self, objj_msgSend(self, "animationResizeTime:", endFrame), CPAnimationEaseOut);
}
,["void","CPTimer"]), new objj_method(sel_getUid("_sheetShouldAnimateOut:"), function $CPWindow___sheetShouldAnimateOut_(self, _cmd, timer)
{
    if (self._sheetContext["isOpening"])
    {
        self._sheetContext["shouldClose"] = YES;
        return;
    }
    if (self._sheetContext["isClosing"])
        return;
    self._sheetContext["opened"] = NO;
    self._sheetContext["isClosing"] = YES;
    if (objj_msgSend(self, "isVisible"))
    {
        var sheet = self._sheetContext["sheet"],
            sheetFrame = objj_msgSend(sheet, "frame"),
            fullHeight = sheet._hasShadow ? objj_msgSend(sheet._shadowView, "frame").size.height : sheetFrame.size.height,
            endFrame = CGRectMakeCopy(sheetFrame),
            contentOrigin = objj_msgSend(self, "convertBaseToGlobal:", objj_msgSend(objj_msgSend(self, "contentView"), "frame").origin);
        sheet._constrainsToUsableScreen = NO;
        objj_msgSend(sheet, "setFrameOrigin:", CGPointMake(sheetFrame.origin.x, sheetFrame.origin.y - contentOrigin.y));
        objj_msgSend(self, "_clipSheet:", sheet);
        endFrame.origin.y = -fullHeight;
        objj_msgSend(sheet, "_setFrame:delegate:duration:curve:", endFrame, self, objj_msgSend(self, "animationResizeTime:", endFrame), CPAnimationEaseIn);
    }
    else
    {
        objj_msgSend(self, "_sheetAnimationDidEnd:", nil);
    }
}
,["void","CPTimer"]), new objj_method(sel_getUid("_sheetAnimationDidEnd:"), function $CPWindow___sheetAnimationDidEnd_(self, _cmd, timer)
{
    var sheet = self._sheetContext["sheet"];
    self._sheetContext["isOpening"] = NO;
    self._sheetContext["isClosing"] = NO;
    if (self._sheetContext["opened"] === YES)
    {
        var sheetFrame = objj_msgSend(sheet, "frame"),
            sheetOrigin = CGPointMakeCopy(sheetFrame.origin);
        objj_msgSend(self, "_removeClipForSheet:", sheet);
        objj_msgSend(sheet, "setFrameOrigin:", CGPointMake(sheetOrigin.x, objj_msgSend(sheet, "frame").origin.y + sheetOrigin.y));
        if (self._sheetContext["shouldClose"] === YES)
            objj_msgSend(self, "_detachSheetWindow");
        else
            objj_msgSend(sheet, "makeKeyWindow");
    }
    else
    {
        objj_msgSend(self, "_cleanupSheetWindow");
    }
}
,["void","CPTimer"]), new objj_method(sel_getUid("_clipSheet:"), function $CPWindow___clipSheet_(self, _cmd, aSheet)
{
    var clipRect = objj_msgSend(self._platformWindow, "contentBounds");
    clipRect.origin.y = objj_msgSend(self, "frame").origin.y + objj_msgSend(objj_msgSend(self, "contentView"), "frame").origin.y;
    objj_msgSend(objj_msgSend(self._platformWindow, "layerAtLevel:create:", self._level, NO), "clipWindow:toRect:", aSheet, clipRect);
}
,["void","CPWindow"]), new objj_method(sel_getUid("_removeClipForSheet:"), function $CPWindow___removeClipForSheet_(self, _cmd, aSheet)
{
    objj_msgSend(objj_msgSend(self._platformWindow, "layerAtLevel:create:", self._level, NO), "removeClipForWindow:", aSheet);
}
,["void","CPWindow"]), new objj_method(sel_getUid("attachedSheet"), function $CPWindow__attachedSheet(self, _cmd)
{
    if (self._sheetContext === nil)
        return nil;
    return self._sheetContext["sheet"];
}
,["CPWindow"]), new objj_method(sel_getUid("isSheet"), function $CPWindow__isSheet(self, _cmd)
{
    return self._isSheet;
}
,["BOOL"]), new objj_method(sel_getUid("becomesKeyOnlyIfNeeded"), function $CPWindow__becomesKeyOnlyIfNeeded(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("worksWhenModal"), function $CPWindow__worksWhenModal(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("performKeyEquivalent:"), function $CPWindow__performKeyEquivalent_(self, _cmd, anEvent)
{
    return objj_msgSend(self._contentView, "performKeyEquivalent:", anEvent);
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("keyDown:"), function $CPWindow__keyDown_(self, _cmd, anEvent)
{
    if (objj_msgSend(anEvent, "_couldBeKeyEquivalent") && objj_msgSend(self, "performKeyEquivalent:", anEvent))
        return;
    if (!objj_msgSend(self, "_processKeyboardUIKey:", anEvent))
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWindow").super_class }, "keyDown:", anEvent);
}
,["void","CPEvent"]), new objj_method(sel_getUid("_processKeyboardUIKey:"), function $CPWindow___processKeyboardUIKey_(self, _cmd, anEvent)
{
    var character = objj_msgSend(anEvent, "charactersIgnoringModifiers");
    if (!objj_msgSend(CPWindowActionMessageKeys, "containsObject:", character))
        return NO;
    var selectors = objj_msgSend(CPKeyBinding, "selectorsForKey:modifierFlags:", character, 0);
    if (objj_msgSend(selectors, "count") <= 0)
        return NO;
    if (character !== CPEscapeFunctionKey)
    {
        var selector = objj_msgSend(selectors, "objectAtIndex:", 0);
        return objj_msgSend(objj_msgSend(self, "firstResponder"), "tryToPerform:with:", selector, self);
    }
    else
    {
        objj_msgSend(objj_msgSend(self, "firstResponder"), "doCommandBySelector:", sel_getUid("complete:"));
    }
    return NO;
}
,["BOOL","CPEvent"]), new objj_method(sel_getUid("_dirtyKeyViewLoop"), function $CPWindow___dirtyKeyViewLoop(self, _cmd)
{
    if (self._autorecalculatesKeyViewLoop)
        self._keyViewLoopIsDirty = YES;
}
,["void"]), new objj_method(sel_getUid("_hasKeyViewLoop:"), function $CPWindow___hasKeyViewLoop_(self, _cmd, theViews)
{
    var i,
        count = objj_msgSend(theViews, "count");
    for (i = 0; i < count; ++i)
    {
        var view = theViews[i];
        if (objj_msgSend(view, "nextKeyView") || objj_msgSend(view, "previousKeyView"))
            return YES;
    }
    for (i = 0; i < count; ++i)
    {
        var subviews = objj_msgSend(theViews[i], "subviews");
        if (objj_msgSend(subviews, "count") && objj_msgSend(self, "_hasKeyViewLoop:", subviews))
            return YES;
    }
    return NO;
}
,["BOOL","CPArray"]), new objj_method(sel_getUid("recalculateKeyViewLoop"), function $CPWindow__recalculateKeyViewLoop(self, _cmd)
{
    objj_msgSend(self, "_doRecalculateKeyViewLoop");
}
,["void"]), new objj_method(sel_getUid("_viewsSortedByPosition"), function $CPWindow___viewsSortedByPosition(self, _cmd)
{
    var views = objj_msgSend(CPArray, "arrayWithObject:", self._contentView);
    views = views.concat(objj_msgSend(self, "_subviewsSortedByPosition:", objj_msgSend(self._contentView, "subviews")));
    return views;
}
,["CPArray"]), new objj_method(sel_getUid("_subviewsSortedByPosition:"), function $CPWindow___subviewsSortedByPosition_(self, _cmd, theSubviews)
{
    theSubviews = objj_msgSend(theSubviews, "copy");
    objj_msgSend(theSubviews, "sortUsingFunction:context:", keyViewComparator, nil);
    var sortedViews = [];
    for (var i = 0, count = objj_msgSend(theSubviews, "count"); i < count; ++i)
    {
        var view = theSubviews[i],
            subviews = objj_msgSend(view, "subviews");
        sortedViews.push(view);
        if (objj_msgSend(subviews, "count"))
            sortedViews = sortedViews.concat(objj_msgSend(self, "_subviewsSortedByPosition:", subviews));
    }
    return sortedViews;
}
,["CPArray","CPArray"]), new objj_method(sel_getUid("_doRecalculateKeyViewLoop"), function $CPWindow___doRecalculateKeyViewLoop(self, _cmd)
{
    var views = objj_msgSend(self, "_viewsSortedByPosition");
    for (var index = 0, count = objj_msgSend(views, "count"); index < count; ++index)
        objj_msgSend(views[index], "setNextKeyView:", views[(index + 1) % count]);
    self._keyViewLoopIsDirty = NO;
}
,["void"]), new objj_method(sel_getUid("setAutorecalculatesKeyViewLoop:"), function $CPWindow__setAutorecalculatesKeyViewLoop_(self, _cmd, shouldRecalculate)
{
    if (self._autorecalculatesKeyViewLoop === shouldRecalculate)
        return;
    self._autorecalculatesKeyViewLoop = shouldRecalculate;
}
,["void","BOOL"]), new objj_method(sel_getUid("autorecalculatesKeyViewLoop"), function $CPWindow__autorecalculatesKeyViewLoop(self, _cmd)
{
    return self._autorecalculatesKeyViewLoop;
}
,["BOOL"]), new objj_method(sel_getUid("selectNextKeyView:"), function $CPWindow__selectNextKeyView_(self, _cmd, sender)
{
    if (self._keyViewLoopIsDirty)
        objj_msgSend(self, "_doRecalculateKeyViewLoop");
    var nextValidKeyView = nil;
    if (objj_msgSend(self._firstResponder, "isKindOfClass:", objj_msgSend(CPView, "class")))
        nextValidKeyView = objj_msgSend(self._firstResponder, "nextValidKeyView");
    if (!nextValidKeyView)
    {
        if (objj_msgSend(self._initialFirstResponder, "acceptsFirstResponder"))
            nextValidKeyView = self._initialFirstResponder;
        else
            nextValidKeyView = objj_msgSend(self._initialFirstResponder, "nextValidKeyView");
    }
    if (nextValidKeyView)
        objj_msgSend(self, "makeFirstResponder:", nextValidKeyView);
}
,["void","id"]), new objj_method(sel_getUid("selectPreviousKeyView:"), function $CPWindow__selectPreviousKeyView_(self, _cmd, sender)
{
    if (self._keyViewLoopIsDirty)
        objj_msgSend(self, "_doRecalculateKeyViewLoop");
    var previousValidKeyView = nil;
    if (objj_msgSend(self._firstResponder, "isKindOfClass:", objj_msgSend(CPView, "class")))
        previousValidKeyView = objj_msgSend(self._firstResponder, "previousValidKeyView");
    if (!previousValidKeyView)
    {
        if (objj_msgSend(self._initialFirstResponder, "acceptsFirstResponder"))
            previousValidKeyView = self._initialFirstResponder;
        else
            previousValidKeyView = objj_msgSend(self._initialFirstResponder, "previousValidKeyView");
    }
    if (previousValidKeyView)
        objj_msgSend(self, "makeFirstResponder:", previousValidKeyView);
}
,["void","id"]), new objj_method(sel_getUid("selectKeyViewFollowingView:"), function $CPWindow__selectKeyViewFollowingView_(self, _cmd, aView)
{
    if (self._keyViewLoopIsDirty)
        objj_msgSend(self, "_doRecalculateKeyViewLoop");
    var nextValidKeyView = objj_msgSend(aView, "nextValidKeyView");
    if (objj_msgSend(nextValidKeyView, "isKindOfClass:", objj_msgSend(CPView, "class")))
        objj_msgSend(self, "makeFirstResponder:", nextValidKeyView);
}
,["void","CPView"]), new objj_method(sel_getUid("selectKeyViewPrecedingView:"), function $CPWindow__selectKeyViewPrecedingView_(self, _cmd, aView)
{
    if (self._keyViewLoopIsDirty)
        objj_msgSend(self, "_doRecalculateKeyViewLoop");
    var previousValidKeyView = objj_msgSend(aView, "previousValidKeyView");
    if (objj_msgSend(previousValidKeyView, "isKindOfClass:", objj_msgSend(CPView, "class")))
        objj_msgSend(self, "makeFirstResponder:", previousValidKeyView);
}
,["void","CPView"]), new objj_method(sel_getUid("setDefaultButtonCell:"), function $CPWindow__setDefaultButtonCell_(self, _cmd, aButton)
{
    objj_msgSend(self, "setDefaultButton:", aButton);
}
,["void","CPButton"]), new objj_method(sel_getUid("defaultButtonCell"), function $CPWindow__defaultButtonCell(self, _cmd)
{
    return objj_msgSend(self, "defaultButton");
}
,["CPButton"]), new objj_method(sel_getUid("setDefaultButton:"), function $CPWindow__setDefaultButton_(self, _cmd, aButton)
{
    if (self._defaultButton === aButton)
        return;
    if (objj_msgSend(self._defaultButton, "keyEquivalent") === CPCarriageReturnCharacter)
        objj_msgSend(self._defaultButton, "setKeyEquivalent:", nil);
    self._defaultButton = aButton;
    if (objj_msgSend(self._defaultButton, "keyEquivalent") !== CPCarriageReturnCharacter)
        objj_msgSend(self._defaultButton, "setKeyEquivalent:", CPCarriageReturnCharacter);
}
,["void","CPButton"]), new objj_method(sel_getUid("defaultButton"), function $CPWindow__defaultButton(self, _cmd)
{
    return self._defaultButton;
}
,["CPButton"]), new objj_method(sel_getUid("enableKeyEquivalentForDefaultButton"), function $CPWindow__enableKeyEquivalentForDefaultButton(self, _cmd)
{
    self._defaultButtonEnabled = YES;
}
,["void"]), new objj_method(sel_getUid("enableKeyEquivalentForDefaultButtonCell"), function $CPWindow__enableKeyEquivalentForDefaultButtonCell(self, _cmd)
{
    objj_msgSend(self, "enableKeyEquivalentForDefaultButton");
}
,["void"]), new objj_method(sel_getUid("disableKeyEquivalentForDefaultButton"), function $CPWindow__disableKeyEquivalentForDefaultButton(self, _cmd)
{
    self._defaultButtonEnabled = NO;
}
,["void"]), new objj_method(sel_getUid("disableKeyEquivalentForDefaultButtonCell"), function $CPWindow__disableKeyEquivalentForDefaultButtonCell(self, _cmd)
{
    objj_msgSend(self, "disableKeyEquivalentForDefaultButton");
}
,["void"]), new objj_method(sel_getUid("setValue:forKey:"), function $CPWindow__setValue_forKey_(self, _cmd, aValue, aKey)
{
    if (aKey === CPDisplayPatternTitleBinding)
        objj_msgSend(self, "setTitle:", aValue || "");
    else
        objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPWindow").super_class }, "setValue:forKey:", aValue, aKey);
}
,["void","id","CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("_binderClassForBinding:"), function $CPWindow___binderClassForBinding_(self, _cmd, aBinding)
{
    if (objj_msgSend(aBinding, "hasPrefix:", CPDisplayPatternTitleBinding))
        return objj_msgSend(CPTitleWithPatternBinding, "class");
    return objj_msgSendSuper({ receiver:self, super_class:objj_getMetaClass("CPWindow").super_class }, "_binderClassForBinding:", aBinding);
}
,["Class","CPString"]), new objj_method(sel_getUid("_windowViewClassForStyleMask:"), function $CPWindow___windowViewClassForStyleMask_(self, _cmd, aStyleMask)
{
    if (aStyleMask & CPHUDBackgroundWindowMask)
        return _CPHUDWindowView;
    else if (aStyleMask === CPBorderlessWindowMask)
        return _CPBorderlessWindowView;
    else if (aStyleMask & CPDocModalWindowMask)
        return _CPDocModalWindowView;
    else if (aStyleMask & _CPModalWindowMask)
        return _CPModalWindowView;
    return _CPStandardWindowView;
}
,["Class","unsigned"]), new objj_method(sel_getUid("_windowViewClassForFullPlatformWindowStyleMask:"), function $CPWindow___windowViewClassForFullPlatformWindowStyleMask_(self, _cmd, aStyleMask)
{
    return _CPBorderlessBridgeWindowView;
}
,["Class","unsigned"]), new objj_method(sel_getUid("frameRectForContentRect:styleMask:"), function $CPWindow__frameRectForContentRect_styleMask_(self, _cmd, aContentRect, aStyleMask)
{
    return objj_msgSend(objj_msgSend(objj_msgSend(self, "class"), "_windowViewClassForStyleMask:", aStyleMask), "frameRectForContentRect:", aContentRect);
}
,["CGRect","CGRect","unsigned"]), new objj_method(sel_getUid("setGlobalResizeStyle:"), function $CPWindow__setGlobalResizeStyle_(self, _cmd, aStyle)
{
    if (CPWindowResizeStyle === aStyle)
        return;
    CPWindowResizeStyle = aStyle;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPWindowResizeStyleGlobalChangeNotification, nil);
}
,["void","int"]), new objj_method(sel_getUid("setConstrainWindowsToUsableScreen:"), function $CPWindow__setConstrainWindowsToUsableScreen_(self, _cmd, shouldConstrain)
{
    CPWindowConstrainToScreen = shouldConstrain;
}
,["void","BOOL"]), new objj_method(sel_getUid("constrainWindowsToUsableScreen"), function $CPWindow__constrainWindowsToUsableScreen(self, _cmd)
{
    return CPWindowConstrainToScreen;
}
,["BOOL"]), new objj_method(sel_getUid("globalResizeStyle"), function $CPWindow__globalResizeStyle(self, _cmd)
{
    return CPWindowResizeStyle;
}
,["int"])]);
}var keyViewComparator = function(lhs, rhs, context)
{
    var lhsBounds = objj_msgSend(lhs, "convertRect:toView:", objj_msgSend(lhs, "bounds"), nil),
        rhsBounds = objj_msgSend(rhs, "convertRect:toView:", objj_msgSend(rhs, "bounds"), nil),
        lhsY = CGRectGetMinY(lhsBounds),
        rhsY = CGRectGetMinY(rhsBounds),
        lhsX = CGRectGetMinX(lhsBounds),
        rhsX = CGRectGetMinX(rhsBounds),
        intersectsVertically = MIN(CGRectGetMaxY(lhsBounds), CGRectGetMaxY(rhsBounds)) - MAX(lhsY, rhsY);
    if (intersectsVertically > 0)
    {
        if (lhsX < rhsX)
            return CPOrderedAscending;
        if (lhsX === rhsX)
            return CPOrderedSame;
        return CPOrderedDescending;
    }
    if (lhsY < rhsY)
        return CPOrderedAscending;
    if (lhsY === rhsY)
        return CPOrderedSame;
    return CPOrderedDescending;
};
{
var the_class = objj_getClass("CPWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("resizeWithOldPlatformWindowSize:"), function $CPWindow__resizeWithOldPlatformWindowSize_(self, _cmd, aSize)
{
    if (objj_msgSend(self, "isFullPlatformWindow"))
        return objj_msgSend(self, "setFrame:", objj_msgSend(self._platformWindow, "visibleFrame"));
    if (self._constrainsToUsableScreen && !CPWindowConstrainToScreen || self._autoresizingMask === CPWindowNotSizable)
        return;
    var frame = objj_msgSend(self._platformWindow, "contentBounds"),
        newFrame = CGRectMakeCopy(self._frame),
        dX = (CGRectGetWidth(frame) - aSize.width) / ((self._autoresizingMask & CPWindowMinXMargin ? 1 : 0) + (self._autoresizingMask & CPWindowWidthSizable ? 1 : 0) + (self._autoresizingMask & CPWindowMaxXMargin ? 1 : 0)),
        dY = (CGRectGetHeight(frame) - aSize.height) / ((self._autoresizingMask & CPWindowMinYMargin ? 1 : 0) + (self._autoresizingMask & CPWindowHeightSizable ? 1 : 0) + (self._autoresizingMask & CPWindowMaxYMargin ? 1 : 0));
    if (self._autoresizingMask & CPWindowMinXMargin)
        newFrame.origin.x += dX;
    if (self._autoresizingMask & CPWindowWidthSizable)
        newFrame.size.width += dX;
    if (self._autoresizingMask & CPWindowMinYMargin)
        newFrame.origin.y += dY;
    if (self._autoresizingMask & CPWindowHeightSizable)
        newFrame.size.height += dY;
    objj_msgSend(self, "_setFrame:display:animate:constrainWidth:constrainHeight:", newFrame, YES, NO, YES, YES);
}
,["void","CGSize"]), new objj_method(sel_getUid("setAutoresizingMask:"), function $CPWindow__setAutoresizingMask_(self, _cmd, anAutoresizingMask)
{
    self._autoresizingMask = anAutoresizingMask;
}
,["void","unsigned"]), new objj_method(sel_getUid("autoresizingMask"), function $CPWindow__autoresizingMask(self, _cmd)
{
    return self._autoresizingMask;
}
,["unsigned"]), new objj_method(sel_getUid("convertBaseToGlobal:"), function $CPWindow__convertBaseToGlobal_(self, _cmd, aPoint)
{
    return objj_msgSend(CPPlatform, "isBrowser") ? objj_msgSend(self, "convertBaseToPlatformWindow:", aPoint) : objj_msgSend(self, "convertBaseToScreen:", aPoint);
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertGlobalToBase:"), function $CPWindow__convertGlobalToBase_(self, _cmd, aPoint)
{
    return objj_msgSend(CPPlatform, "isBrowser") ? objj_msgSend(self, "convertPlatformWindowToBase:", aPoint) : objj_msgSend(self, "convertScreenToBase:", aPoint);
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertBaseToPlatformWindow:"), function $CPWindow__convertBaseToPlatformWindow_(self, _cmd, aPoint)
{
    if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
        return CGPointMakeCopy(aPoint);
    var origin = objj_msgSend(self, "frame").origin;
    return CGPointMake(aPoint.x + origin.x, aPoint.y + origin.y);
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertPlatformWindowToBase:"), function $CPWindow__convertPlatformWindowToBase_(self, _cmd, aPoint)
{
    if (objj_msgSend(self, "_sharesChromeWithPlatformWindow"))
        return CGPointMakeCopy(aPoint);
    var origin = objj_msgSend(self, "frame").origin;
    return CGPointMake(aPoint.x - origin.x, aPoint.y - origin.y);
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertScreenToBase:"), function $CPWindow__convertScreenToBase_(self, _cmd, aPoint)
{
    return objj_msgSend(self, "convertPlatformWindowToBase:", objj_msgSend(self._platformWindow, "convertScreenToBase:", aPoint));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertBaseToScreen:"), function $CPWindow__convertBaseToScreen_(self, _cmd, aPoint)
{
    return objj_msgSend(self._platformWindow, "convertBaseToScreen:", objj_msgSend(self, "convertBaseToPlatformWindow:", aPoint));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("_setSharesChromeWithPlatformWindow:"), function $CPWindow___setSharesChromeWithPlatformWindow_(self, _cmd, shouldShareFrameWithPlatformWindow)
{
    if (shouldShareFrameWithPlatformWindow && objj_msgSend(CPPlatform, "isBrowser"))
        return;
    self._sharesChromeWithPlatformWindow = shouldShareFrameWithPlatformWindow;
    objj_msgSend(self, "_updateShadow");
}
,["void","BOOL"]), new objj_method(sel_getUid("_sharesChromeWithPlatformWindow"), function $CPWindow___sharesChromeWithPlatformWindow(self, _cmd)
{
    return self._sharesChromeWithPlatformWindow;
}
,["BOOL"]), new objj_method(sel_getUid("undoManager"), function $CPWindow__undoManager(self, _cmd)
{
    if (self._undoManager)
        return self._undoManager;
    var documentUndoManager = objj_msgSend(objj_msgSend(self._windowController, "document"), "undoManager");
    if (documentUndoManager)
        return documentUndoManager;
    if (self._delegateRespondsToWindowWillReturnUndoManagerSelector)
        return objj_msgSend(self._delegate, "windowWillReturnUndoManager:", self);
    if (!self._undoManager)
        self._undoManager = objj_msgSend(objj_msgSend(CPUndoManager, "alloc"), "init");
    return self._undoManager;
}
,["CPUndoManager"]), new objj_method(sel_getUid("undo:"), function $CPWindow__undo_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(self, "undoManager"), "undo");
}
,["void","id"]), new objj_method(sel_getUid("redo:"), function $CPWindow__redo_(self, _cmd, aSender)
{
    objj_msgSend(objj_msgSend(self, "undoManager"), "redo");
}
,["void","id"]), new objj_method(sel_getUid("containsPoint:"), function $CPWindow__containsPoint_(self, _cmd, aPoint)
{
    return CGRectContainsPoint(self._frame, aPoint);
}
,["BOOL","CGPoint"]), new objj_method(sel_getUid("_isValidMousePoint:"), function $CPWindow___isValidMousePoint_(self, _cmd, aPoint)
{
    var mouseFrame = !self._isFullPlatformWindow && self._styleMask & CPResizableWindowMask && CPWindowResizeStyle === CPWindowResizeStyleModern ? CGRectInset(self._frame, -_CPWindowViewResizeSlop, -_CPWindowViewResizeSlop) : self._frame;
    return CGRectContainsPoint(mouseFrame, aPoint);
}
,["BOOL","CGPoint"])]);
}{
var the_class = objj_getClass("CPWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("setFullBridge:"), function $CPWindow__setFullBridge_(self, _cmd, shouldBeFullBridge)
{
    _CPReportLenientDeprecation(objj_msgSend(self, "class"), _cmd, sel_getUid("setFullPlatformWindow:"));
    objj_msgSend(self, "setFullPlatformWindow:", shouldBeFullBridge);
}
,["void","BOOL"]), new objj_method(sel_getUid("isFullBridge"), function $CPWindow__isFullBridge(self, _cmd)
{
    return objj_msgSend(self, "isFullPlatformWindow");
}
,["BOOL"]), new objj_method(sel_getUid("convertBaseToBridge:"), function $CPWindow__convertBaseToBridge_(self, _cmd, aPoint)
{
    return objj_msgSend(self, "convertBaseToPlatformWindow:", aPoint);
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertBridgeToBase:"), function $CPWindow__convertBridgeToBase_(self, _cmd, aPoint)
{
    return objj_msgSend(self, "convertPlatformWindowToBase:", aPoint);
}
,["CGPoint","CGPoint"])]);
}var interpolate = function(fromValue, toValue, progress)
{
    return fromValue + (toValue - fromValue) * progress;
};
{var the_class = objj_allocateClassPair(CPAnimation, "_CPWindowFrameAnimation"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_window"), new objj_ivar("_startFrame"), new objj_ivar("_targetFrame")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithWindow:targetFrame:"), function $_CPWindowFrameAnimation__initWithWindow_targetFrame_(self, _cmd, aWindow, aTargetFrame)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowFrameAnimation").super_class }, "initWithDuration:animationCurve:", objj_msgSend(aWindow, "animationResizeTime:", aTargetFrame), CPAnimationLinear);
    if (self)
    {
        self._window = aWindow;
        self._targetFrame = CGRectMakeCopy(aTargetFrame);
        self._startFrame = CGRectMakeCopy(objj_msgSend(self._window, "frame"));
    }
    return self;
}
,["id","CPWindow","CGRect"]), new objj_method(sel_getUid("startAnimation"), function $_CPWindowFrameAnimation__startAnimation(self, _cmd)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowFrameAnimation").super_class }, "startAnimation");
    self._window._isAnimating = YES;
}
,["void"]), new objj_method(sel_getUid("setCurrentProgress:"), function $_CPWindowFrameAnimation__setCurrentProgress_(self, _cmd, aProgress)
{
    objj_msgSendSuper({ receiver:self, super_class:objj_getClass("_CPWindowFrameAnimation").super_class }, "setCurrentProgress:", aProgress);
    var value = objj_msgSend(self, "currentValue");
    if (value == 1.0)
        self._window._isAnimating = NO;
    var newFrame = CGRectMake(interpolate(CGRectGetMinX(self._startFrame), CGRectGetMinX(self._targetFrame), value), interpolate(CGRectGetMinY(self._startFrame), CGRectGetMinY(self._targetFrame), value), interpolate(CGRectGetWidth(self._startFrame), CGRectGetWidth(self._targetFrame), value), interpolate(CGRectGetHeight(self._startFrame), CGRectGetHeight(self._targetFrame), value));
    objj_msgSend(self._window, "setFrame:display:animate:", newFrame, YES, NO);
}
,["void","float"])]);
}{
var the_class = objj_getClass("CPWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_dragHitTest:pasteboard:"), function $CPWindow___dragHitTest_pasteboard_(self, _cmd, aPoint, aPasteboard)
{
    if (!self._inclusiveRegisteredDraggedTypes)
        return nil;
    var adjustedPoint = objj_msgSend(self, "convertPlatformWindowToBase:", aPoint),
        hitView = objj_msgSend(self._windowView, "hitTest:", adjustedPoint);
    while (hitView && !objj_msgSend(aPasteboard, "availableTypeFromArray:", objj_msgSend(hitView, "registeredDraggedTypes")))
        hitView = objj_msgSend(hitView, "superview");
    if (hitView)
        return hitView;
    if (objj_msgSend(aPasteboard, "availableTypeFromArray:", objj_msgSend(self, "registeredDraggedTypes")))
        return self;
    return nil;
}
,["id","CGPoint","CPPasteboard"])]);
}_CPWindowFullPlatformWindowSessionMake = function(aWindowView, aContentRect, hasShadow, aLevel)
{
    return {windowView: aWindowView, contentRect: aContentRect, hasShadow: hasShadow, level: aLevel};
}
p;20;CPWindow_Constants.jt;2338;@STATIC;1.0;t;2319;CPBorderlessWindowMask = 0;
CPTitledWindowMask = 1 << 0;
CPClosableWindowMask = 1 << 1;
CPMiniaturizableWindowMask = 1 << 2;
CPResizableWindowMask = 1 << 3;
CPTexturedBackgroundWindowMask = 1 << 8;
CPBorderlessBridgeWindowMask = 1 << 20;
CPHUDBackgroundWindowMask = 1 << 21;
_CPModalWindowMask = 1 << 22;
CPWindowNotSizable = 0;
CPWindowMinXMargin = 1;
CPWindowWidthSizable = 2;
CPWindowMaxXMargin = 4;
CPWindowMinYMargin = 8;
CPWindowHeightSizable = 16;
CPWindowMaxYMargin = 32;
CPBackgroundWindowLevel = -1;
CPNormalWindowLevel = 0;
CPFloatingWindowLevel = 3;
CPSubmenuWindowLevel = 3;
CPTornOffMenuWindowLevel = 3;
CPMainMenuWindowLevel = 24;
CPStatusWindowLevel = 25;
CPModalPanelWindowLevel = 8;
CPPopUpMenuWindowLevel = 101;
CPDraggingWindowLevel = 500;
CPScreenSaverWindowLevel = 1000;
CPWindowAbove = 1;
CPWindowBelow = -1;
CPWindowOut = 0;
CPWindowWillCloseNotification = "CPWindowWillCloseNotification";
CPWindowDidBecomeMainNotification = "CPWindowDidBecomeMainNotification";
CPWindowDidResignMainNotification = "CPWindowDidResignMainNotification";
CPWindowDidBecomeKeyNotification = "CPWindowDidBecomeKeyNotification";
CPWindowDidResignKeyNotification = "CPWindowDidResignKeyNotification";
CPWindowDidResizeNotification = "CPWindowDidResizeNotification";
CPWindowDidMoveNotification = "CPWindowDidMoveNotification";
CPWindowWillBeginSheetNotification = "CPWindowWillBeginSheetNotification";
CPWindowDidEndSheetNotification = "CPWindowDidEndSheetNotification";
CPWindowDidMiniaturizeNotification = "CPWindowDidMiniaturizeNotification";
CPWindowWillMiniaturizeNotification = "CPWindowWillMiniaturizeNotification";
CPWindowDidDeminiaturizeNotification = "CPWindowDidDeminiaturizeNotification";
_CPWindowDidChangeFirstResponderNotification = "_CPWindowDidChangeFirstResponderNotification";
CPWindowShadowStyleStandard = 0;
CPWindowShadowStyleMenu = 1;
CPWindowShadowStylePanel = 2;
CPWindowResizeStyleModern = 0;
CPWindowResizeStyleLegacy = 1;
CPWindowResizeStyle = CPWindowResizeStyleModern;
CPWindowPositionFlexibleRight = 1 << 19;
CPWindowPositionFlexibleLeft = 1 << 20;
CPWindowPositionFlexibleBottom = 1 << 21;
CPWindowPositionFlexibleTop = 1 << 22;
CPStandardWindowShadowStyle = 0;
CPMenuWindowShadowStyle = 1;
CPPanelWindowShadowStyle = 2;
CPCustomWindowShadowStyle = 3;
CPWindowConstrainToScreen = YES;
p;12;CPPlatform.jt;5578;@STATIC;1.0;I;21;Foundation/CPObject.jt;5533;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPBasePlatform"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("bootstrap"), function $CPBasePlatform__bootstrap(self, _cmd)
{
    objj_msgSend(CPPlatformString, "bootstrap");
    objj_msgSend(CPPlatformWindow, "setPrimaryPlatformWindow:", objj_msgSend(objj_msgSend(CPPlatformWindow, "alloc"), "_init"));
}
,["void"]), new objj_method(sel_getUid("isBrowser"), function $CPBasePlatform__isBrowser(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("supportsDragAndDrop"), function $CPBasePlatform__supportsDragAndDrop(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("supportsNativeMainMenu"), function $CPBasePlatform__supportsNativeMainMenu(self, _cmd)
{
    return NO;
}
,["BOOL"]), new objj_method(sel_getUid("terminateApplication"), function $CPBasePlatform__terminateApplication(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("activateIgnoringOtherApps:"), function $CPBasePlatform__activateIgnoringOtherApps_(self, _cmd, shouldIgnoreOtherApps)
{
}
,["void","BOOL"]), new objj_method(sel_getUid("deactivate"), function $CPBasePlatform__deactivate(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("hideOtherApplications:"), function $CPBasePlatform__hideOtherApplications_(self, _cmd, aSender)
{
}
,["void","id"]), new objj_method(sel_getUid("hide:"), function $CPBasePlatform__hide_(self, _cmd, aSender)
{
}
,["void","id"])]);
}if (typeof window["CPPlatformEnableHTMLDragAndDrop"] === "undefined")
    CPPlatformEnableHTMLDragAndDrop = NO;
CPPlatformDidClearBodyElementNotification = "CPPlatformDidClearBodyElementNotification";
CPPlatformWillClearBodyElementNotification = "CPPlatformWillClearBodyElementNotification";
var screenNeedsInitialization = NO,
    mainBodyElement = nil,
    elementRemovalTest = new RegExp("\\bcpdontremove\\b", "g");
{var the_class = objj_allocateClassPair(CPBasePlatform, "CPPlatform"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPPlatform__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPPlatform, "class"))
        return;
    screenNeedsInitialization = objj_msgSend(CPPlatform, "isBrowser");
    if (document.documentElement)
        document.documentElement.style.overflow = "hidden";
    if (objj_msgSend(CPPlatform, "isBrowser"))
        window.onunload = function()
        {
            objj_msgSend(CPApp, "terminate:", nil);
        };
}
,["void"]), new objj_method(sel_getUid("isBrowser"), function $CPPlatform__isBrowser(self, _cmd)
{
    return typeof window.cpIsDesktop === "undefined";
}
,["BOOL"]), new objj_method(sel_getUid("supportsDragAndDrop"), function $CPPlatform__supportsDragAndDrop(self, _cmd)
{
    return CPFeatureIsCompatible(CPHTMLDragAndDropFeature) && (CPPlatformEnableHTMLDragAndDrop || !objj_msgSend(self, "isBrowser"));
}
,["BOOL"]), new objj_method(sel_getUid("supportsNativeMainMenu"), function $CPPlatform__supportsNativeMainMenu(self, _cmd)
{
    return typeof window["cpSetMainMenu"] === "function";
}
,["BOOL"]), new objj_method(sel_getUid("terminateApplication"), function $CPPlatform__terminateApplication(self, _cmd)
{
    if (typeof window["cpTerminate"] === "function")
        window.cpTerminate();
}
,["void"]), new objj_method(sel_getUid("activateIgnoringOtherApps:"), function $CPPlatform__activateIgnoringOtherApps_(self, _cmd, shouldIgnoreOtherApps)
{
    if (typeof window["cpActivateIgnoringOtherApps"] === "function")
        window.cpActivateIgnoringOtherApps(!!shouldIgnoreOtherApps);
}
,["void","BOOL"]), new objj_method(sel_getUid("deactivate"), function $CPPlatform__deactivate(self, _cmd)
{
    if (typeof window["cpDeactivate"] === "function")
        window.cpDeactivate();
}
,["void"]), new objj_method(sel_getUid("hideOtherApplications:"), function $CPPlatform__hideOtherApplications_(self, _cmd, aSender)
{
    if (typeof window["cpHideOtherApplications"] === "function")
        window.cpHideOtherApplications();
}
,["void","id"]), new objj_method(sel_getUid("hide:"), function $CPPlatform__hide_(self, _cmd, aSender)
{
    if (typeof window["cpHide"] === "function")
        window.cpHide();
}
,["void","id"]), new objj_method(sel_getUid("mainBodyElement"), function $CPPlatform__mainBodyElement(self, _cmd)
{
    if (!mainBodyElement)
        mainBodyElement = document.getElementById("cappuccino-body") || document.body;
    return mainBodyElement;
}
,["DOMElement"]), new objj_method(sel_getUid("initializeScreenIfNecessary"), function $CPPlatform__initializeScreenIfNecessary(self, _cmd)
{
    if (!screenNeedsInitialization)
        return;
    screenNeedsInitialization = NO;
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPPlatformWillClearBodyElementNotification, self);
    var bodyElement = objj_msgSend(self, "mainBodyElement");
    var children = bodyElement.childNodes,
        length = children.length;
    while (length--)
    {
        var element = children[length];
        if (!element.className || element.className.match(elementRemovalTest) === null)
            bodyElement.removeChild(element);
    }
    bodyElement.style.overflow = "hidden";
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:", CPPlatformDidClearBodyElementNotification, self);
}
,["void"])]);
}p;18;CPPlatformString.jt;5682;@STATIC;1.0;I;21;Foundation/CPObject.jt;5637;objj_executeFile("Foundation/CPObject.j", NO);{var the_class = objj_allocateClassPair(CPObject, "CPBasePlatformString"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("bootstrap"), function $CPBasePlatformString__bootstrap(self, _cmd)
{
}
,["void"]), new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"), function $CPBasePlatformString__sizeOfString_withFont_forWidth_(self, _cmd, aString, aFont, aWidth)
{
    return CGSizeMakeZero();
}
,["CGSize","CPString","CPFont","float"])]);
}var DOMFixedWidthSpanElement = nil,
    DOMFlexibleWidthSpanElement = nil,
    DOMMetricsDivElement = nil,
    DOMMetricsImgElement = nil,
    DefaultFont = nil;
{var the_class = objj_allocateClassPair(CPBasePlatformString, "CPPlatformString"),
meta_class = the_class.isa;objj_registerClassPair(the_class);
class_addMethods(meta_class, [new objj_method(sel_getUid("initialize"), function $CPPlatformString__initialize(self, _cmd)
{
    if (self !== objj_msgSend(CPPlatformString, "class"))
        return;
    DefaultFont = objj_msgSend(CPFont, "systemFontOfSize:", CPFontCurrentSystemSize);
}
,["void"]), new objj_method(sel_getUid("bootstrap"), function $CPPlatformString__bootstrap(self, _cmd)
{
    objj_msgSend(self, "createDOMElements");
}
,["void"]), new objj_method(sel_getUid("createDOMElements"), function $CPPlatformString__createDOMElements(self, _cmd)
{
    var style,
        bodyElement = objj_msgSend(CPPlatform, "mainBodyElement");
    DOMFlexibleWidthSpanElement = document.createElement("span");
    DOMFlexibleWidthSpanElement.className = "cpdontremove";
    style = DOMFlexibleWidthSpanElement.style;
    style.position = "absolute";
    style.left = "-100000px";
    style.zIndex = -10000;
    style.visibility = "visible";
    style.padding = "0px";
    style.margin = "0px";
    style.whiteSpace = "pre";
    DOMFixedWidthSpanElement = document.createElement("span");
    DOMFixedWidthSpanElement.className = "cpdontremove";
    style = DOMFixedWidthSpanElement.style;
    style.display = "block";
    style.position = "absolute";
    style.left = "-100000px";
    style.zIndex = -10000;
    style.visibility = "visible";
    style.padding = "0px";
    style.margin = "0px";
    style.width = "1px";
    style.wordWrap = "break-word";
    try    {
        style.whiteSpace = "pre";
        style.whiteSpace = "-o-pre-wrap";
        style.whiteSpace = "-pre-wrap";
        style.whiteSpace = "-moz-pre-wrap";
        style.whiteSpace = "pre-wrap";
    }
    catch(e)     {
        style.whiteSpace = "pre";
    }    bodyElement.appendChild(DOMFlexibleWidthSpanElement);
    bodyElement.appendChild(DOMFixedWidthSpanElement);
}
,["void"]), new objj_method(sel_getUid("createDOMMetricsElements"), function $CPPlatformString__createDOMMetricsElements(self, _cmd)
{
    var style,
        bodyElement = objj_msgSend(CPPlatform, "mainBodyElement");
    DOMMetricsDivElement = document.createElement("div");
    DOMMetricsDivElement.className = "cpdontremove";
    style = DOMMetricsDivElement.style;
    style.position = "absolute";
    style.left = "-100000px";
    style.zIndex = -10000;
    style.width = "100000px";
    style.whiteSpace = "nowrap";
    style.lineHeight = "1em";
    style.padding = "0px";
    style.margin = "0px";
    DOMMetricsDivElement.innerHTML = "x";
    bodyElement.appendChild(DOMMetricsDivElement);
    var imgPath = objj_msgSend(objj_msgSend(CPBundle, "bundleForClass:", objj_msgSend(CPView, "class")), "pathForResource:", "empty.png");
    DOMMetricsImgElement = document.createElement("img");
    DOMMetricsImgElement.className = "cpdontremove";
    DOMMetricsImgElement.setAttribute("src", imgPath);
    DOMMetricsImgElement.setAttribute("width", "1");
    DOMMetricsImgElement.setAttribute("height", "1");
    DOMMetricsImgElement.setAttribute("alt", "");
    style = DOMMetricsImgElement.style;
    style.zIndex = -10000;
    style.visibility = "visible";
    style.padding = "0px";
    style.margin = "0px";
    style.border = "none";
    style.verticalAlign = "baseline";
    DOMMetricsDivElement.appendChild(DOMMetricsImgElement);
}
,["void"]), new objj_method(sel_getUid("sizeOfString:withFont:forWidth:"), function $CPPlatformString__sizeOfString_withFont_forWidth_(self, _cmd, aString, aFont, aWidth)
{
    if (!DOMFixedWidthSpanElement)
        objj_msgSend(self, "createDOMElements");
    var span;
    if (!aWidth)
        span = DOMFlexibleWidthSpanElement;
    else
    {
        span = DOMFixedWidthSpanElement;
        span.style.width = ROUND(aWidth) + "px";
    }
    span.style.font = objj_msgSend(aFont || DefaultFont, "cssString");
    if (CPFeatureIsCompatible(CPJavaScriptInnerTextFeature))
        span.innerText = aString;
    else if (CPFeatureIsCompatible(CPJavaScriptTextContentFeature))
        span.textContent = aString;
    return CGSizeMake(span.clientWidth, span.clientHeight);
}
,["CGSize","CPString","CPFont","float"]), new objj_method(sel_getUid("metricsOfFont:"), function $CPPlatformString__metricsOfFont_(self, _cmd, aFont)
{
    if (!DOMMetricsDivElement)
        objj_msgSend(self, "createDOMMetricsElements");
    DOMMetricsDivElement.style.font = objj_msgSend(aFont || DefaultFont, "cssString");
    var lineHeight = DOMMetricsDivElement.offsetHeight,
        baseline = DOMMetricsImgElement.offsetTop + DOMMetricsImgElement.offsetHeight,
        descender = baseline - lineHeight;
    return objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", baseline, "ascender", descender, "descender", lineHeight, "lineHeight");
}
,["CPDictionary","CPFont"])]);
}p;18;CPPlatformWindow.jt;7820;@STATIC;1.0;I;25;Foundation/CPDictionary.jI;21;Foundation/CPObject.ji;14;CPKeyBinding.ji;12;CPPlatform.jt;7709;objj_executeFile("Foundation/CPDictionary.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CPKeyBinding.j", YES);objj_executeFile("CPPlatform.j", YES);var PrimaryPlatformWindow = NULL;
{var the_class = objj_allocateClassPair(CPObject, "CPPlatformWindow"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_contentRect"), new objj_ivar("_level"), new objj_ivar("_hasShadow"), new objj_ivar("_shadowStyle"), new objj_ivar("_title"), new objj_ivar("_DOMWindow"), new objj_ivar("_DOMBodyElement"), new objj_ivar("_DOMFocusElement"), new objj_ivar("_DOMEventGuard"), new objj_ivar("_DOMScrollingElement"), new objj_ivar("_hideDOMScrollingElementTimeout"), new objj_ivar("_windowLevels"), new objj_ivar("_windowLayers"), new objj_ivar("_mouseIsDown"), new objj_ivar("_mouseDownIsRightClick"), new objj_ivar("_lastMouseEventLocation"), new objj_ivar("_mouseDownWindow"), new objj_ivar("_lastMouseUp"), new objj_ivar("_lastMouseDown"), new objj_ivar("_charCodes"), new objj_ivar("_keyCode"), new objj_ivar("_lastKey"), new objj_ivar("_capsLockActive"), new objj_ivar("_DOMEventMode"), new objj_ivar("_platformPasteboard"), new objj_ivar("_overriddenEventType")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithContentRect:"), function $CPPlatformWindow__initWithContentRect_(self, _cmd, aRect)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPlatformWindow").super_class }, "init");
    if (self)
    {
        self._contentRect = CGRectMakeCopy(aRect);
        self._windowLevels = [];
        self._windowLayers = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._charCodes = {};
    }
    return self;
}
,["id","CGRect"]), new objj_method(sel_getUid("init"), function $CPPlatformWindow__init(self, _cmd)
{
    return objj_msgSend(self, "initWithContentRect:", CGRectMake(0.0, 0.0, 400.0, 500.0));
}
,["id"]), new objj_method(sel_getUid("contentRect"), function $CPPlatformWindow__contentRect(self, _cmd)
{
    return CGRectMakeCopy(self._contentRect);
}
,["CGRect"]), new objj_method(sel_getUid("contentBounds"), function $CPPlatformWindow__contentBounds(self, _cmd)
{
    var contentBounds = objj_msgSend(self, "contentRect");
    contentBounds.origin = CGPointMakeZero();
    return contentBounds;
}
,["CGRect"]), new objj_method(sel_getUid("visibleFrame"), function $CPPlatformWindow__visibleFrame(self, _cmd)
{
    var frame = objj_msgSend(self, "contentBounds");
    frame.origin = CGPointMakeZero();
    if (objj_msgSend(CPMenu, "menuBarVisible") && objj_msgSend(CPPlatformWindow, "primaryPlatformWindow") === self)
    {
        var menuBarHeight = objj_msgSend(objj_msgSend(CPApp, "mainMenu"), "menuBarHeight");
        frame.origin.y += menuBarHeight;
        frame.size.height -= menuBarHeight;
    }
    return frame;
}
,["CGRect"]), new objj_method(sel_getUid("usableContentFrame"), function $CPPlatformWindow__usableContentFrame(self, _cmd)
{
    return objj_msgSend(self, "visibleFrame");
}
,["CGRect"]), new objj_method(sel_getUid("setContentRect:"), function $CPPlatformWindow__setContentRect_(self, _cmd, aRect)
{
    if (!aRect || CGRectEqualToRect(self._contentRect, aRect))
        return;
    self._contentRect = CGRectMakeCopy(aRect);
    objj_msgSend(self, "updateNativeContentRect");
}
,["void","CGRect"]), new objj_method(sel_getUid("updateFromNativeContentRect"), function $CPPlatformWindow__updateFromNativeContentRect(self, _cmd)
{
    objj_msgSend(self, "setContentRect:", objj_msgSend(self, "nativeContentRect"));
}
,["void"]), new objj_method(sel_getUid("convertBaseToScreen:"), function $CPPlatformWindow__convertBaseToScreen_(self, _cmd, aPoint)
{
    var contentRect = objj_msgSend(self, "contentRect");
    return CGPointMake(aPoint.x + CGRectGetMinX(contentRect), aPoint.y + CGRectGetMinY(contentRect));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("convertScreenToBase:"), function $CPPlatformWindow__convertScreenToBase_(self, _cmd, aPoint)
{
    var contentRect = objj_msgSend(self, "contentRect");
    return CGPointMake(aPoint.x - CGRectGetMinX(contentRect), aPoint.y - CGRectGetMinY(contentRect));
}
,["CGPoint","CGPoint"]), new objj_method(sel_getUid("isVisible"), function $CPPlatformWindow__isVisible(self, _cmd)
{
    return self._DOMWindow !== NULL;
}
,["BOOL"]), new objj_method(sel_getUid("deminiaturize:"), function $CPPlatformWindow__deminiaturize_(self, _cmd, sender)
{
    if (self._DOMWindow && typeof self._DOMWindow["cpDeminiaturize"] === "function")
        self._DOMWindow.cpDeminiaturize();
}
,["void","id"]), new objj_method(sel_getUid("miniaturize:"), function $CPPlatformWindow__miniaturize_(self, _cmd, sender)
{
    if (self._DOMWindow && typeof self._DOMWindow["cpMiniaturize"] === "function")
        self._DOMWindow.cpMiniaturize();
}
,["void","id"]), new objj_method(sel_getUid("moveWindow:fromLevel:toLevel:"), function $CPPlatformWindow__moveWindow_fromLevel_toLevel_(self, _cmd, aWindow, fromLevel, toLevel)
{
    if (!aWindow._isVisible)
        return;
    var fromLayer = objj_msgSend(self, "layerAtLevel:create:", fromLevel, NO),
        toLayer = objj_msgSend(self, "layerAtLevel:create:", toLevel, YES);
    objj_msgSend(fromLayer, "removeWindow:", aWindow);
    objj_msgSend(toLayer, "insertWindow:atIndex:", aWindow, CPNotFound);
}
,["void","CPWindow","int","int"]), new objj_method(sel_getUid("setLevel:"), function $CPPlatformWindow__setLevel_(self, _cmd, aLevel)
{
    self._level = aLevel;
    if (self._DOMWindow && self._DOMWindow.cpSetLevel)
        self._DOMWindow.cpSetLevel(aLevel);
}
,["void","CPInteger"]), new objj_method(sel_getUid("setHasShadow:"), function $CPPlatformWindow__setHasShadow_(self, _cmd, shouldHaveShadow)
{
    self._hasShadow = shouldHaveShadow;
    if (self._DOMWindow && self._DOMWindow.cpSetHasShadow)
        self._DOMWindow.cpSetHasShadow(shouldHaveShadow);
}
,["void","BOOL"]), new objj_method(sel_getUid("setShadowStyle:"), function $CPPlatformWindow__setShadowStyle_(self, _cmd, aStyle)
{
    self._shadowStyle = aStyle;
    if (self._DOMWindow && self._DOMWindow.cpSetShadowStyle)
        self._shadowStyle.cpSetShadowStyle(aStyle);
}
,["void","int"]), new objj_method(sel_getUid("supportsFullPlatformWindows"), function $CPPlatformWindow__supportsFullPlatformWindows(self, _cmd)
{
    return objj_msgSend(CPPlatform, "isBrowser");
}
,["BOOL"]), new objj_method(sel_getUid("_setTitle:window:"), function $CPPlatformWindow___setTitle_window_(self, _cmd, aTitle, aWindow)
{
    self._title = aTitle;
    if (self._DOMWindow && self._DOMWindow.document && objj_msgSend(aWindow, "isFullPlatformWindow"))
    {
        self._DOMWindow.document.title = self._title;
    }
}
,["void","CPString","CPWindow"]), new objj_method(sel_getUid("title"), function $CPPlatformWindow__title(self, _cmd)
{
    return self._title;
}
,["CPString"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("visiblePlatformWindows"), function $CPPlatformWindow__visiblePlatformWindows(self, _cmd)
{
    return objj_msgSend(CPSet, "set");
}
,["CPSet"]), new objj_method(sel_getUid("supportsMultipleInstances"), function $CPPlatformWindow__supportsMultipleInstances(self, _cmd)
{
    return !CPBrowserIsEngine(CPInternetExplorerBrowserEngine);
}
,["BOOL"]), new objj_method(sel_getUid("primaryPlatformWindow"), function $CPPlatformWindow__primaryPlatformWindow(self, _cmd)
{
    return PrimaryPlatformWindow;
}
,["CPPlatformWindow"]), new objj_method(sel_getUid("setPrimaryPlatformWindow:"), function $CPPlatformWindow__setPrimaryPlatformWindow_(self, _cmd, aPlatformWindow)
{
    PrimaryPlatformWindow = aPlatformWindow;
}
,["void","CPPlatformWindow"])]);
}p;18;CPDOMWindowLayer.jt;4477;@STATIC;1.0;I;20;Foundation/CPArray.jI;21;Foundation/CPObject.ji;12;CGGeometry.jt;4390;objj_executeFile("Foundation/CPArray.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("CGGeometry.j", YES);{var the_class = objj_allocateClassPair(CPObject, "CPDOMWindowLayer"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_level"), new objj_ivar("_windows"), new objj_ivar("_DOMElement")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("initWithLevel:"), function $CPDOMWindowLayer__initWithLevel_(self, _cmd, aLevel)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPDOMWindowLayer").super_class }, "init");
    if (self)
    {
        self._level = aLevel;
        self._windows = [];
        self._DOMElement = document.createElement("div");
        self._DOMElement.style.position = "absolute";
        self._DOMElement.style.top = "0px";
        self._DOMElement.style.left = "0px";
        self._DOMElement.style.width = "1px";
        self._DOMElement.style.height = "1px";
    }
    return self;
}
,["id","int"]), new objj_method(sel_getUid("level"), function $CPDOMWindowLayer__level(self, _cmd)
{
    return self._level;
}
,["int"]), new objj_method(sel_getUid("removeWindow:"), function $CPDOMWindowLayer__removeWindow_(self, _cmd, aWindow)
{
    if (!aWindow._isVisible)
        return;
    var index = aWindow._index,
        count = self._windows.length - 1;
    self._DOMElement.removeChild(aWindow._DOMElement);
    objj_msgSend(self._windows, "removeObjectAtIndex:", aWindow._index);
    for (; index < count; ++index)
    {
        self._windows[index]._index = index;
        self._windows[index]._DOMElement.style.zIndex = index;
    }
    aWindow._isVisible = NO;
}
,["void","CPWindow"]), new objj_method(sel_getUid("insertWindow:atIndex:"), function $CPDOMWindowLayer__insertWindow_atIndex_(self, _cmd, aWindow, anIndex)
{
    var count = objj_msgSend(self._windows, "count"),
        zIndex = anIndex === CPNotFound ? count : anIndex,
        isVisible = aWindow._isVisible;
    if (isVisible)
    {
        zIndex = MIN(zIndex, aWindow._index);
        if (aWindow._index < anIndex)
            --anIndex;
        objj_msgSend(self._windows, "removeObjectAtIndex:", aWindow._index);
    }
    else
        ++count;
    if (anIndex === CPNotFound || anIndex >= count)
        objj_msgSend(self._windows, "addObject:", aWindow);
    else
        objj_msgSend(self._windows, "insertObject:atIndex:", aWindow, anIndex);
    for (; zIndex < count; ++zIndex)
    {
        self._windows[zIndex]._index = zIndex;
        self._windows[zIndex]._DOMElement.style.zIndex = zIndex;
    }
    if (aWindow._DOMElement.parentNode !== self._DOMElement)
    {
        self._DOMElement.appendChild(aWindow._DOMElement);
        aWindow._isVisible = YES;
        if (objj_msgSend(aWindow, "isFullPlatformWindow"))
            objj_msgSend(aWindow, "setFrame:", objj_msgSend(aWindow._platformWindow, "usableContentFrame"));
    }
}
,["void","CPWindow","unsigned"]), new objj_method(sel_getUid("orderedWindows"), function $CPDOMWindowLayer__orderedWindows(self, _cmd)
{
    return self._windows;
}
,["CPArray"]), new objj_method(sel_getUid("clipWindow:toRect:"), function $CPDOMWindowLayer__clipWindow_toRect_(self, _cmd, aWindow, clipRect)
{
    var windowElement = aWindow._DOMElement,
        clip = document.createElement("div"),
        style = clip.style;
    style = clip.style;
    style.className = "cpwindowclip";
    style.position = "absolute";
    style.overflow = "hidden";
    style.left = clipRect.origin.x + "px";
    style.top = clipRect.origin.y + "px";
    style.width = clipRect.size.width + "px";
    style.height = clipRect.size.height + "px";
    var parent = windowElement.parentNode;
    parent.insertBefore(clip, windowElement);
    parent.removeChild(windowElement);
    clip.appendChild(windowElement);
}
,["void","CPWindow","CGRect"]), new objj_method(sel_getUid("removeClipForWindow:"), function $CPDOMWindowLayer__removeClipForWindow_(self, _cmd, aWindow)
{
    var windowElement = aWindow._DOMElement,
        clip = windowElement.parentNode,
        parent = clip.parentNode;
    clip.removeChild(windowElement);
    objj_msgSend(aWindow, "setFrameOrigin:", CGPointMake(objj_msgSend(aWindow, "frame").origin.x, clip.offsetTop));
    parent.insertBefore(windowElement, clip);
    parent.removeChild(clip);
}
,["void","CPWindow"])]);
}p;22;CPPlatformPasteboard.jt;18123;@STATIC;1.0;I;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.ji;17;CPCompatibility.ji;9;CPEvent.ji;14;CPPasteboard.ji;12;CPPlatform.ji;26;CPPlatformWindow+DOMKeys.jt;17948;objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPRunLoop.j", NO);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPPlatform.j", YES);objj_executeFile("CPPlatformWindow+DOMKeys.j", YES);var hasEditableTarget = function(aDOMEvent)
{
    var target = aDOMEvent.target || aDOMEvent.srcElement;
    if (!target)
        return NO;
    if (target.contentEditable == "true")
        return YES;
    var nodeName = target.nodeName.toUpperCase();
    return nodeName === "INPUT" || nodeName == "TEXTAREA";
};
{var the_class = objj_allocateClassPair(CPObject, "CPPlatformPasteboard"),
meta_class = the_class.isa;class_addIvars(the_class, [new objj_ivar("_DOMWindow"), new objj_ivar("_DOMPasteboardElement"), new objj_ivar("supportsNativeCopyAndPaste"), new objj_ivar("hasBugWhichPreventsNonEditablePaste"), new objj_ivar("hasBugWhichPreventsNonEditablePasteRedirect"), new objj_ivar("_lastKeyDownEvent"), new objj_ivar("currentEventIsNativePasteEvent"), new objj_ivar("currentEventIsNativeCopyOrCutEvent"), new objj_ivar("currentEventShouldBeSuppressed"), new objj_ivar("currentEventShouldDefinitelyBubble"), new objj_ivar("currentEventShouldDefinitelyNotBubble"), new objj_ivar("_ignoreNativeCopyOrCutEvent"), new objj_ivar("_ignoreNativePastePreparation")]);objj_registerClassPair(the_class);
class_addMethods(the_class, [new objj_method(sel_getUid("init"), function $CPPlatformPasteboard__init(self, _cmd)
{
    if (self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPlatformPasteboard").super_class }, "init"))
    {
        self.supportsNativeCopyAndPaste = CPFeatureIsCompatible(CPJavaScriptClipboardEventsFeature);
        self.hasBugWhichPreventsNonEditablePaste = CPPlatformHasBug(CPJavaScriptPasteRequiresEditableTarget);
        self.hasBugWhichPreventsNonEditablePasteRedirect = CPPlatformHasBug(CPJavaScriptPasteCantRefocus);
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("setDOMWindow:"), function $CPPlatformPasteboard__setDOMWindow_(self, _cmd, aDOMWindow)
{
    if (self._DOMWindow === aDOMWindow)
        return;
    if (self._DOMWindow)
        objj_msgSend(self, "destroyDOMElements");
    self._DOMWindow = aDOMWindow;
    if (self._DOMWindow)
        objj_msgSend(self, "createDOMElements");
}
,["void","DOMWindow"]), new objj_method(sel_getUid("createDOMElements"), function $CPPlatformPasteboard__createDOMElements(self, _cmd)
{
    var theDocument = self._DOMWindow.document,
        _DOMBodyElement = theDocument.getElementById("cappuccino-body") || theDocument.body;
    self._DOMPasteboardElement = theDocument.createElement("textarea");
    self._DOMPasteboardElement.style.position = "absolute";
    self._DOMPasteboardElement.style.top = "-10000px";
    self._DOMPasteboardElement.style.zIndex = "999";
    self._DOMPasteboardElement.className = "cpdontremove";
    _DOMBodyElement.appendChild(self._DOMPasteboardElement);
    self._DOMPasteboardElement.blur();
    var copyEventCallback = function(anEvent)
    {
        return objj_msgSend(self, "beforeCopyEvent:", anEvent);
    },
        nativeBeforeClipboardEventCallback = function(anEvent)
    {
        return objj_msgSend(self, "nativeBeforeClipboardEvent:", anEvent);
    },
        nativeCopyOrCutEventCallback = function(anEvent)
    {
        return objj_msgSend(self, "nativeCopyOrCutEvent:", anEvent);
    },
        pasteEventCallback = function(anEvent)
    {
        return objj_msgSend(self, "beforePasteEvent:", anEvent);
    },
        nativePasteEventCallback = function(anEvent)
    {
        return objj_msgSend(self, "nativePasteEvent:", anEvent);
    };
    if (theDocument.addEventListener)
    {
        if (self.supportsNativeCopyAndPaste)
        {
            self._DOMWindow.addEventListener("beforecopy", nativeBeforeClipboardEventCallback, NO);
            self._DOMWindow.addEventListener("beforecut", nativeBeforeClipboardEventCallback, NO);
            self._DOMWindow.addEventListener("beforepaste", nativeBeforeClipboardEventCallback, NO);
            self._DOMWindow.addEventListener("copy", nativeCopyOrCutEventCallback, NO);
            self._DOMWindow.addEventListener("cut", nativeCopyOrCutEventCallback, NO);
            self._DOMWindow.addEventListener("paste", nativePasteEventCallback, NO);
        }
        else
        {
            theDocument.addEventListener("beforepaste", pasteEventCallback, NO);
            theDocument.addEventListener("beforecopy", copyEventCallback, NO);
            theDocument.addEventListener("beforecut", copyEventCallback, NO);
        }
        self._DOMWindow.addEventListener("unload", function()
        {
            if (self.supportsNativeCopyAndPaste)
            {
                self._DOMWindow.removeEventListener("beforecopy", nativeBeforeClipboardEventCallback, NO);
                self._DOMWindow.removeEventListener("beforecut", nativeBeforeClipboardEventCallback, NO);
                self._DOMWindow.removeEventListener("beforepaste", nativeBeforeClipboardEventCallback, NO);
                self._DOMWindow.removeEventListener("copy", nativeCopyOrCutEventCallback, NO);
                self._DOMWindow.removeEventListener("cut", nativeCopyOrCutEventCallback, NO);
                self._DOMWindow.removeEventListener("paste", nativePasteEventCallback, NO);
            }
            else
            {
                theDocument.removeEventListener("beforepaste", pasteEventCallback, NO);
                theDocument.removeEventListener("beforecopy", copyEventCallback, NO);
                theDocument.removeEventListener("beforecut", copyEventCallback, NO);
            }
        }, NO);
    }
    else
    {
    }
}
,["void"]), new objj_method(sel_getUid("destroyDOMElements"), function $CPPlatformPasteboard__destroyDOMElements(self, _cmd)
{
    var theDocument = self._DOMWindow.document,
        _DOMBodyElement = theDocument.getElementById("cappuccino-body") || theDocument.body;
    _DOMBodyElement.removeChild(self._DOMPasteboardElement);
    self._DOMPasteboardElement = nil;
}
,["void"]), new objj_method(sel_getUid("windowMaySendKeyEvent:"), function $CPPlatformPasteboard__windowMaySendKeyEvent_(self, _cmd, anEvent)
{
    self.currentEventIsNativePasteEvent = NO;
    self.currentEventIsNativeCopyOrCutEvent = NO;
    self.currentEventShouldBeSuppressed = NO;
    self.currentEventShouldDefinitelyNotBubble = NO;
    self.currentEventShouldDefinitelyBubble = NO;
    if (!anEvent)
        return;
    if (objj_msgSend(anEvent, "type") !== CPKeyDown)
    {
        self._ignoreNativePastePreparation = NO;
        self._ignoreNativeCopyOrCutEvent = NO;
        return;
    }
    var modifierFlags = objj_msgSend(anEvent, "modifierFlags");
    if (!(modifierFlags & (CPControlKeyMask | CPCommandKeyMask)))
        return;
    self._lastKeyDownEvent = anEvent;
    var aDOMEvent = anEvent._DOMEvent,
        characters = objj_msgSend(anEvent, "characters"),
        mayRequireDOMPasteboardElement = objj_msgSend(self, "_mayRequireDOMPasteboardElementHack:flags:", aDOMEvent, modifierFlags);
    if (characters === "v" && mayRequireDOMPasteboardElement)
    {
        if (self.supportsNativeCopyAndPaste && self.hasBugWhichPreventsNonEditablePaste && self.hasBugWhichPreventsNonEditablePasteRedirect && !hasEditableTarget(aDOMEvent))
        {
            self.currentEventIsNativePasteEvent = NO;
            self.currentEventShouldDefinitelyBubble = YES;
        }
        else if (!(self.supportsNativeCopyAndPaste || self.hasBugWhichPreventsNonEditablePaste) && !self._ignoreNativePastePreparation)
        {
            self._DOMPasteboardElement.focus();
            self._DOMPasteboardElement.select();
            self._DOMPasteboardElement.value = "";
            self._DOMWindow.setNativeTimeout(function()
            {
                objj_msgSend(self, "_checkDOMPasteboardElement");
            }, 0);
            self.currentEventIsNativePasteEvent = YES;
        }
        else if (self.supportsNativeCopyAndPaste)
            self.currentEventIsNativePasteEvent = YES;
        if (self.currentEventIsNativePasteEvent)
        {
            self.currentEventShouldDefinitelyBubble = YES;
            self.currentEventShouldBeSuppressed = YES;
        }
    }
    else if ((characters == "c" || characters == "x") && mayRequireDOMPasteboardElement)
    {
        self.currentEventIsNativeCopyOrCutEvent = YES;
        if (self.supportsNativeCopyAndPaste || self._ignoreNativeCopyOrCutEvent)
            self.currentEventShouldBeSuppressed = YES;
    }
    if (!self.currentEventShouldBeSuppressed)
    {
        if (characters === "v")
            anEvent._suppressCappuccinoPaste = YES;
        else if (characters === "x")
            anEvent._suppressCappuccinoCut = YES;
    }
}
,["void","CPEvent"]), new objj_method(sel_getUid("windowShouldSuppressKeyEvent"), function $CPPlatformPasteboard__windowShouldSuppressKeyEvent(self, _cmd)
{
    return self.currentEventShouldBeSuppressed;
}
,["BOOL"]), new objj_method(sel_getUid("windowDidSendKeyEvent:"), function $CPPlatformPasteboard__windowDidSendKeyEvent_(self, _cmd, anEvent)
{
    if (!self.supportsNativeCopyAndPaste && self.currentEventIsNativeCopyOrCutEvent)
        objj_msgSend(self, "_primeDOMPasteboardElement");
}
,["void","CPEvent"]), new objj_method(sel_getUid("windowShouldStopPropagation"), function $CPPlatformPasteboard__windowShouldStopPropagation(self, _cmd)
{
    return self.currentEventShouldDefinitelyNotBubble;
}
,["BOOL"]), new objj_method(sel_getUid("windowShouldNotStopPropagation"), function $CPPlatformPasteboard__windowShouldNotStopPropagation(self, _cmd)
{
    return self.currentEventShouldDefinitelyBubble;
}
,["BOOL"]), new objj_method(sel_getUid("_fakeClipboardEvent:type:"), function $CPPlatformPasteboard___fakeClipboardEvent_type_(self, _cmd, aDOMEvent, aType)
{
    var keyCode = aType === "x" ? CPKeyCodes.X : aType === "c" ? CPKeyCodes.C : CPKeyCodes.V,
        characters = aType,
        timestamp = objj_msgSend(CPEvent, "currentTimestamp"),
        windowNumber = objj_msgSend(objj_msgSend(CPApp, "keyWindow"), "windowNumber"),
        modifierFlags = CPPlatformActionKeyMask,
        location = objj_msgSend(self._lastKeyDownEvent, "locationInWindow"),
        anEvent = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPKeyDown, location, modifierFlags, timestamp, windowNumber, nil, characters, characters, NO, keyCode);
    anEvent._data1 = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "initWithObjectsAndKeys:", YES, "simulated");
    anEvent._DOMEvent = aDOMEvent;
    return anEvent;
}
,["CPEvent","DOMEvent","CPString"]), new objj_method(sel_getUid("beforeCopyEvent:"), function $CPPlatformPasteboard__beforeCopyEvent_(self, _cmd, aDOMEvent)
{
    if (objj_msgSend(self, "_mayRequireDOMPasteboardElementHack:flags:", aDOMEvent, CPPlatformActionKeyMask) && !self._ignoreNativeCopyOrCutEvent)
    {
        var anEvent = objj_msgSend(self, "_fakeClipboardEvent:type:", aDOMEvent, aDOMEvent.type === "beforecut" ? "x" : "c");
        objj_msgSend(CPApp, "sendEvent:", anEvent);
        objj_msgSend(self, "_primeDOMPasteboardElement");
        self._ignoreNativeCopyOrCutEvent = YES;
    }
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void","DOMEvent"]), new objj_method(sel_getUid("beforePasteEvent:"), function $CPPlatformPasteboard__beforePasteEvent_(self, _cmd, aDOMEvent)
{
    if (objj_msgSend(self, "_mayRequireDOMPasteboardElementHack:flags:", aDOMEvent, CPPlatformActionKeyMask))
    {
        self._DOMPasteboardElement.focus();
        self._DOMPasteboardElement.select();
        self._DOMPasteboardElement.value = "";
        self._ignoreNativePastePreparation = YES;
    }
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["boolean","DOMEvent"]), new objj_method(sel_getUid("_mayRequireDOMPasteboardElementHack:flags:"), function $CPPlatformPasteboard___mayRequireDOMPasteboardElementHack_flags_(self, _cmd, aDOMEvent, modifierFlags)
{
    return !hasEditableTarget(aDOMEvent) && modifierFlags & CPPlatformActionKeyMask;
}
,["void","DOMEvent","unsigned"]), new objj_method(sel_getUid("_primeDOMPasteboardElement"), function $CPPlatformPasteboard___primeDOMPasteboardElement(self, _cmd)
{
    var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard"),
        types = objj_msgSend(pasteboard, "types");
    if (types.length)
    {
        if (objj_msgSend(types, "indexOfObjectIdenticalTo:", CPStringPboardType) !== CPNotFound)
            self._DOMPasteboardElement.value = objj_msgSend(pasteboard, "stringForType:", CPStringPboardType);
        else
            self._DOMPasteboardElement.value = objj_msgSend(pasteboard, "_generateStateUID");
        self._DOMPasteboardElement.focus();
        self._DOMPasteboardElement.select();
        window.setNativeTimeout(function()
        {
            objj_msgSend(self, "_clearDOMPasteboardElement");
        }, 0);
    }
}
,["void"]), new objj_method(sel_getUid("_checkDOMPasteboardElement"), function $CPPlatformPasteboard___checkDOMPasteboardElement(self, _cmd)
{
    if (self.supportsNativeCopyAndPaste)
    {
        objj_msgSend(self, "_clearDOMPasteboardElement");
        return;
    }
    var value = self._DOMPasteboardElement.value;
    if (objj_msgSend(value, "length"))
    {
        var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard");
        if (objj_msgSend(pasteboard, "_stateUID") != value)
        {
            objj_msgSend(pasteboard, "declareTypes:owner:", [CPStringPboardType], self);
            objj_msgSend(pasteboard, "setString:forType:", value, CPStringPboardType);
        }
    }
    objj_msgSend(self, "_clearDOMPasteboardElement");
    objj_msgSend(CPApp, "sendEvent:", objj_msgSend(self, "_fakeClipboardEvent:type:", nil, "v"));
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void"]), new objj_method(sel_getUid("_clearDOMPasteboardElement"), function $CPPlatformPasteboard___clearDOMPasteboardElement(self, _cmd)
{
    self._DOMPasteboardElement.value = "";
    self._DOMPasteboardElement.blur();
}
,["void"]), new objj_method(sel_getUid("nativeBeforeClipboardEvent:"), function $CPPlatformPasteboard__nativeBeforeClipboardEvent_(self, _cmd, aDOMEvent)
{
    if (hasEditableTarget(aDOMEvent))
        return true;
    var returnValue = YES;
    switch(aDOMEvent.type) {
    case "beforecopy":
        returnValue = !objj_msgSend(CPApp, "targetForAction:", sel_getUid("copy:"));
        break;
    case "beforecut":
        returnValue = !objj_msgSend(CPApp, "targetForAction:", sel_getUid("cut:"));
        break;
    case "beforepaste":
        returnValue = !objj_msgSend(CPApp, "targetForAction:", sel_getUid("paste:"));
        break;
    }
    if (!returnValue)
        _CPDOMEventStop(aDOMEvent, self);
    return returnValue;
}
,["boolean","DOMEvent"]), new objj_method(sel_getUid("nativePasteEvent:"), function $CPPlatformPasteboard__nativePasteEvent_(self, _cmd, aDOMEvent)
{
    if (!self.supportsNativeCopyAndPaste)
        return;
    var value;
    if (aDOMEvent.clipboardData && aDOMEvent.clipboardData.setData)
        value = aDOMEvent.clipboardData.getData('text/plain');
    else
        value = self._DOMWindow.clipboardData.getData("Text");
    if (objj_msgSend(value, "length"))
    {
        var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard");
        if (objj_msgSend(pasteboard, "_stateUID") != value)
        {
            objj_msgSend(pasteboard, "declareTypes:owner:", [CPStringPboardType], self);
            objj_msgSend(pasteboard, "setString:forType:", value, CPStringPboardType);
        }
    }
    var anEvent = objj_msgSend(self, "_fakeClipboardEvent:type:", aDOMEvent, "v"),
        platformWindow = objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow");
    anEvent._suppressCappuccinoPaste = YES;
    objj_msgSend(platformWindow, "_propagateCurrentDOMEvent:", NO);
    objj_msgSend(CPApp, "sendEvent:", anEvent);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    if (!objj_msgSend(platformWindow, "_willPropagateCurrentDOMEvent"))
        _CPDOMEventStop(aDOMEvent, self);
    return false;
}
,["boolean","DOMEvent"]), new objj_method(sel_getUid("nativeCopyOrCutEvent:"), function $CPPlatformPasteboard__nativeCopyOrCutEvent_(self, _cmd, aDOMEvent)
{
    if (!self.supportsNativeCopyAndPaste)
        return;
    var anEvent = objj_msgSend(self, "_fakeClipboardEvent:type:", aDOMEvent, aDOMEvent.type.indexOf("cut") != CPNotFound ? "x" : "c"),
        platformWindow = objj_msgSend(objj_msgSend(anEvent, "window"), "platformWindow");
    anEvent._suppressCappuccinoCut = YES;
    objj_msgSend(platformWindow, "_propagateCurrentDOMEvent:", NO);
    objj_msgSend(CPApp, "sendEvent:", anEvent);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    if (!objj_msgSend(platformWindow, "_willPropagateCurrentDOMEvent"))
    {
        _CPDOMEventStop(aDOMEvent, self);
        var pasteboard = objj_msgSend(CPPasteboard, "generalPasteboard");
        if (objj_msgSend(objj_msgSend(pasteboard, "types"), "containsObject:", CPStringPboardType))
        {
            var stringValue = objj_msgSend(pasteboard, "stringForType:", CPStringPboardType);
            if (aDOMEvent.clipboardData && aDOMEvent.clipboardData.setData)
                aDOMEvent.clipboardData.setData('text/plain', stringValue);
            else
                self._DOMWindow.clipboardData.setData('Text', stringValue);
        }
    }
    return !objj_msgSend(platformWindow, "_willPropagateCurrentDOMEvent");
}
,["boolean","DOMEvent"])]);
}p;22;CPPlatformWindow+DOM.jt;55359;@STATIC;1.0;I;33;Foundation/CPNotificationCenter.jI;21;Foundation/CPObject.jI;22;Foundation/CPRunLoop.jI;18;Foundation/CPSet.jI;20;Foundation/CPTimer.ji;25;CPApplication_Constants.ji;17;CPCompatibility.ji;10;CPCursor.ji;18;CPDOMWindowLayer.ji;24;CPDragServer_Constants.ji;9;CPEvent.ji;14;CPPasteboard.ji;12;CPPlatform.ji;22;CPPlatformPasteboard.ji;26;CPPlatformWindow+DOMKeys.ji;18;CPPlatformWindow.ji;8;CPText.ji;20;CPWindow_Constants.jt;54914;objj_executeFile("Foundation/CPNotificationCenter.j", NO);objj_executeFile("Foundation/CPObject.j", NO);objj_executeFile("Foundation/CPRunLoop.j", NO);objj_executeFile("Foundation/CPSet.j", NO);objj_executeFile("Foundation/CPTimer.j", NO);objj_executeFile("CPApplication_Constants.j", YES);objj_executeFile("CPCompatibility.j", YES);objj_executeFile("CPCursor.j", YES);objj_executeFile("CPDOMWindowLayer.j", YES);objj_executeFile("CPDragServer_Constants.j", YES);objj_executeFile("CPEvent.j", YES);objj_executeFile("CPPasteboard.j", YES);objj_executeFile("CPPlatform.j", YES);objj_executeFile("CPPlatformPasteboard.j", YES);objj_executeFile("CPPlatformWindow+DOMKeys.j", YES);objj_executeFile("CPPlatformWindow.j", YES);objj_executeFile("CPText.j", YES);objj_executeFile("CPWindow_Constants.j", YES);var PlatformWindows = objj_msgSend(CPSet, "set");
var CPDOMEventGetClickCount,
    StopDOMEventPropagation,
    StopContextMenuDOMEventPropagation;
var KeyCodesToPrevent = {},
    CharacterKeysToPrevent = {},
    KeyCodesToAllow = {},
    MozKeyCodeToKeyCodeMap = {61: 187, 59: 186},
    KeyCodesToUnicodeMap = {};
KeyCodesToPrevent[CPKeyCodes.A] = YES;
KeyCodesToAllow[CPKeyCodes.F1] = YES;
KeyCodesToAllow[CPKeyCodes.F2] = YES;
KeyCodesToAllow[CPKeyCodes.F3] = YES;
KeyCodesToAllow[CPKeyCodes.F4] = YES;
KeyCodesToAllow[CPKeyCodes.F5] = YES;
KeyCodesToAllow[CPKeyCodes.F6] = YES;
KeyCodesToAllow[CPKeyCodes.F7] = YES;
KeyCodesToAllow[CPKeyCodes.F8] = YES;
KeyCodesToAllow[CPKeyCodes.F9] = YES;
KeyCodesToAllow[CPKeyCodes.F10] = YES;
KeyCodesToAllow[CPKeyCodes.F11] = YES;
KeyCodesToAllow[CPKeyCodes.F12] = YES;
KeyCodesToUnicodeMap[CPKeyCodes.BACKSPACE] = CPDeleteCharacter;
KeyCodesToUnicodeMap[CPKeyCodes.DELETE] = CPDeleteFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.TAB] = CPTabCharacter;
KeyCodesToUnicodeMap[CPKeyCodes.ENTER] = CPCarriageReturnCharacter;
KeyCodesToUnicodeMap[CPKeyCodes.ESC] = CPEscapeFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.PAGE_UP] = CPPageUpFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.PAGE_DOWN] = CPPageDownFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.LEFT] = CPLeftArrowFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.UP] = CPUpArrowFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.RIGHT] = CPRightArrowFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.DOWN] = CPDownArrowFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.HOME] = CPHomeFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.END] = CPEndFunctionKey;
KeyCodesToUnicodeMap[CPKeyCodes.SEMICOLON] = ";";
KeyCodesToUnicodeMap[CPKeyCodes.DASH] = "-";
KeyCodesToUnicodeMap[CPKeyCodes.EQUALS] = "=";
KeyCodesToUnicodeMap[CPKeyCodes.COMMA] = ",";
KeyCodesToUnicodeMap[CPKeyCodes.PERIOD] = ".";
KeyCodesToUnicodeMap[CPKeyCodes.SLASH] = "/";
KeyCodesToUnicodeMap[CPKeyCodes.APOSTROPHE] = "`";
KeyCodesToUnicodeMap[CPKeyCodes.SINGLE_QUOTE] = "'";
KeyCodesToUnicodeMap[CPKeyCodes.OPEN_SQUARE_BRACKET] = "[";
KeyCodesToUnicodeMap[CPKeyCodes.BACKSLASH] = "\\";
KeyCodesToUnicodeMap[CPKeyCodes.CLOSE_SQUARE_BRACKET] = "]";
var ModifierKeyCodes = [CPKeyCodes.META, CPKeyCodes.WEBKIT_RIGHT_META, CPKeyCodes.MAC_FF_META, CPKeyCodes.CTRL, CPKeyCodes.ALT, CPKeyCodes.SHIFT],
    supportsNativeDragAndDrop = objj_msgSend(CPPlatform, "supportsDragAndDrop");
var resizeTimer = nil;
{
var the_class = objj_getClass("CPPlatformWindow")
if(!the_class) throw new SyntaxError("*** Could not find definition for class \"CPPlatformWindow\"");
var meta_class = the_class.isa;class_addMethods(the_class, [new objj_method(sel_getUid("_init"), function $CPPlatformWindow___init(self, _cmd)
{
    self = objj_msgSendSuper({ receiver:self, super_class:objj_getClass("CPPlatformWindow").super_class }, "init");
    if (self)
    {
        self._DOMWindow = window;
        self._contentRect = CGRectMakeZero();
        self._windowLevels = [];
        self._windowLayers = objj_msgSend(objj_msgSend(CPDictionary, "alloc"), "init");
        self._platformPasteboard = objj_msgSend(CPPlatformPasteboard, "new");
        objj_msgSend(self, "registerDOMWindow");
        objj_msgSend(self, "updateFromNativeContentRect");
        self._charCodes = {};
    }
    return self;
}
,["id"]), new objj_method(sel_getUid("nativeContentRect"), function $CPPlatformWindow__nativeContentRect(self, _cmd)
{
    if (!self._DOMWindow)
        return objj_msgSend(self, "contentRect");
    if (self._DOMWindow.cpFrame)
        return self._DOMWindow.cpFrame();
    var contentRect = CGRectMakeZero();
    if (window.screenTop)
        contentRect.origin = CGPointMake(self._DOMWindow.screenLeft, self._DOMWindow.screenTop);
    else if (window.screenX)
        contentRect.origin = CGPointMake(self._DOMWindow.screenX, self._DOMWindow.screenY);
    if (self._DOMWindow.innerWidth)
        contentRect.size = CGSizeMake(self._DOMWindow.innerWidth, self._DOMWindow.innerHeight);
    else if (document.documentElement && document.documentElement.clientWidth)
        contentRect.size = CGSizeMake(self._DOMWindow.document.documentElement.clientWidth, self._DOMWindow.document.documentElement.clientHeight);
    else
        contentRect.size = CGSizeMake(self._DOMWindow.document.body.clientWidth, self._DOMWindow.document.body.clientHeight);
    return contentRect;
}
,["CGRect"]), new objj_method(sel_getUid("updateNativeContentRect"), function $CPPlatformWindow__updateNativeContentRect(self, _cmd)
{
    if (!self._DOMWindow)
        return;
    if (typeof self._DOMWindow["cpSetFrame"] === "function")
        return self._DOMWindow.cpSetFrame(objj_msgSend(self, "contentRect"));
    var origin = objj_msgSend(self, "contentRect").origin,
        nativeOrigin = objj_msgSend(self, "nativeContentRect").origin;
    if (origin.x !== nativeOrigin.x || origin.y !== nativeOrigin.y)
    {
        self._DOMWindow.moveBy(origin.x - nativeOrigin.x, origin.y - nativeOrigin.y);
    }
    var size = objj_msgSend(self, "contentRect").size,
        nativeSize = objj_msgSend(self, "nativeContentRect").size;
    if (size.width !== nativeSize.width || size.height !== nativeSize.height)
    {
        self._DOMWindow.resizeBy(size.width - nativeSize.width, size.height - nativeSize.height);
    }
}
,["void"]), new objj_method(sel_getUid("orderBack:"), function $CPPlatformWindow__orderBack_(self, _cmd, aWindow)
{
    if (self._DOMWindow)
        self._DOMWindow.blur();
}
,["void","CPWindow"]), new objj_method(sel_getUid("createDOMElements"), function $CPPlatformWindow__createDOMElements(self, _cmd)
{
    var theDocument = self._DOMWindow.document;
    self._DOMFocusElement = theDocument.createElement("input");
    self._DOMFocusElement.style.position = "absolute";
    self._DOMFocusElement.style.zIndex = "-1000";
    self._DOMFocusElement.style.opacity = "0";
    self._DOMFocusElement.style.filter = "alpha(opacity=0)";
    self._DOMFocusElement.className = "cpdontremove";
    self._DOMBodyElement.appendChild(self._DOMFocusElement);
    self._DOMEventGuard = theDocument.createElement("div");
    self._DOMEventGuard.style.position = "absolute";
    self._DOMEventGuard.style.top = "0px";
    self._DOMEventGuard.style.left = "0px";
    self._DOMEventGuard.style.width = "100%";
    self._DOMEventGuard.style.height = "100%";
    self._DOMEventGuard.style.zIndex = "999";
    self._DOMEventGuard.style.display = "none";
    self._DOMEventGuard.className = "cpdontremove";
    self._DOMBodyElement.appendChild(self._DOMEventGuard);
    self._DOMScrollingElement = theDocument.createElement("div");
    self._DOMScrollingElement.style.position = "absolute";
    self._DOMScrollingElement.style.visibility = "hidden";
    self._DOMScrollingElement.style.zIndex = "999";
    self._DOMScrollingElement.style.height = "60px";
    self._DOMScrollingElement.style.width = "60px";
    self._DOMScrollingElement.style.overflow = "scroll";
    self._DOMScrollingElement.style.opacity = "0";
    self._DOMScrollingElement.style.filter = "alpha(opacity=0)";
    self._DOMScrollingElement.className = "cpdontremove";
    self._DOMBodyElement.appendChild(self._DOMScrollingElement);
    var _DOMInnerScrollingElement = theDocument.createElement("div");
    _DOMInnerScrollingElement.style.width = "400px";
    _DOMInnerScrollingElement.style.height = "400px";
    self._DOMScrollingElement.appendChild(_DOMInnerScrollingElement);
    self._DOMScrollingElement.scrollTop = 150;
    self._DOMScrollingElement.scrollLeft = 150;
}
,["void"]), new objj_method(sel_getUid("registerDOMWindow"), function $CPPlatformWindow__registerDOMWindow(self, _cmd)
{
    var theDocument = self._DOMWindow.document;
    self._DOMBodyElement = theDocument.getElementById("cappuccino-body") || theDocument.body;
    if (supportsNativeDragAndDrop)
        self._DOMBodyElement.style["-khtml-user-select"] = "none";
    self._DOMBodyElement.webkitTouchCallout = "none";
    objj_msgSend(self, "createDOMElements");
    objj_msgSend(self, "_addLayers");
    objj_msgSend(self._platformPasteboard, "setDOMWindow:", self._DOMWindow);
    var theClass = objj_msgSend(self, "class"),
        dragEventImplementation = class_getMethodImplementation(theClass, sel_getUid("dragEvent:")),
        dragEventCallback = function(anEvent)
    {
        dragEventImplementation(self, nil, anEvent);
    },
        resizeEventSelector = sel_getUid("resizeEvent:"),
        resizeEventImplementation = class_getMethodImplementation(theClass, resizeEventSelector),
        resizeEventCallback = function(anEvent)
    {
        resizeEventImplementation(self, nil, anEvent);
    },
        keyEventSelector = sel_getUid("keyEvent:"),
        keyEventImplementation = class_getMethodImplementation(theClass, keyEventSelector),
        keyEventCallback = function(anEvent)
    {
        return keyEventImplementation(self, nil, anEvent);
    },
        mouseEventSelector = sel_getUid("mouseEvent:"),
        mouseEventImplementation = class_getMethodImplementation(theClass, mouseEventSelector),
        mouseEventCallback = function(anEvent)
    {
        mouseEventImplementation(self, nil, anEvent);
    },
        contextMenuEventSelector = sel_getUid("contextMenuEvent:"),
        contextMenuEventImplementation = class_getMethodImplementation(theClass, contextMenuEventSelector),
        contextMenuEventCallback = function(anEvent)
    {
        return contextMenuEventImplementation(self, nil, anEvent);
    },
        scrollEventSelector = sel_getUid("scrollEvent:"),
        scrollEventImplementation = class_getMethodImplementation(theClass, scrollEventSelector),
        scrollEventCallback = function(anEvent)
    {
        scrollEventImplementation(self, nil, anEvent);
    },
        touchEventSelector = sel_getUid("touchEvent:"),
        touchEventImplementation = class_getMethodImplementation(theClass, touchEventSelector),
        touchEventCallback = function(anEvent)
    {
        touchEventImplementation(self, nil, anEvent);
    };
    if (theDocument.addEventListener)
    {
        if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
        {
            theDocument.addEventListener("dragstart", dragEventCallback, NO);
            theDocument.addEventListener("drag", dragEventCallback, NO);
            theDocument.addEventListener("dragend", dragEventCallback, NO);
            theDocument.addEventListener("dragover", dragEventCallback, NO);
            theDocument.addEventListener("dragleave", dragEventCallback, NO);
            theDocument.addEventListener("drop", dragEventCallback, NO);
        }
        theDocument.addEventListener("mouseup", mouseEventCallback, NO);
        theDocument.addEventListener("mousedown", mouseEventCallback, NO);
        theDocument.addEventListener("mousemove", mouseEventCallback, NO);
        theDocument.addEventListener("contextmenu", contextMenuEventCallback, NO);
        theDocument.addEventListener("keyup", keyEventCallback, NO);
        theDocument.addEventListener("keydown", keyEventCallback, NO);
        theDocument.addEventListener("keypress", keyEventCallback, NO);
        theDocument.addEventListener("touchstart", touchEventCallback, NO);
        theDocument.addEventListener("touchend", touchEventCallback, NO);
        theDocument.addEventListener("touchmove", touchEventCallback, NO);
        theDocument.addEventListener("touchcancel", touchEventCallback, NO);
        self._DOMWindow.addEventListener("DOMMouseScroll", scrollEventCallback, NO);
        self._DOMWindow.addEventListener("wheel", scrollEventCallback, NO);
        self._DOMWindow.addEventListener("mousewheel", scrollEventCallback, NO);
        self._DOMWindow.addEventListener("resize", resizeEventCallback, NO);
        self._DOMWindow.addEventListener("unload", function()
        {
            objj_msgSend(self, "updateFromNativeContentRect");
            objj_msgSend(self, "_removeLayers");
            theDocument.removeEventListener("mouseup", mouseEventCallback, NO);
            theDocument.removeEventListener("mousedown", mouseEventCallback, NO);
            theDocument.removeEventListener("mousemove", mouseEventCallback, NO);
            theDocument.removeEventListener("contextmenu", contextMenuEventCallback, NO);
            theDocument.removeEventListener("keyup", keyEventCallback, NO);
            theDocument.removeEventListener("keydown", keyEventCallback, NO);
            theDocument.removeEventListener("keypress", keyEventCallback, NO);
            theDocument.removeEventListener("touchstart", touchEventCallback, NO);
            theDocument.removeEventListener("touchend", touchEventCallback, NO);
            theDocument.removeEventListener("touchmove", touchEventCallback, NO);
            self._DOMWindow.removeEventListener("resize", resizeEventCallback, NO);
            self._DOMWindow.removeEventListener("DOMMouseScroll", scrollEventCallback, NO);
            self._DOMWindow.removeEventListener("wheel", scrollEventCallback, NO);
            self._DOMWindow.removeEventListener("mousewheel", scrollEventCallback, NO);
            objj_msgSend(PlatformWindows, "removeObject:", self);
            objj_msgSend(self._platformPasteboard, "setDOMWindow:", nil);
            self._DOMWindow = nil;
        }, NO);
    }
    else
    {
        theDocument.attachEvent("onmouseup", mouseEventCallback);
        theDocument.attachEvent("onmousedown", mouseEventCallback);
        theDocument.attachEvent("onmousemove", mouseEventCallback);
        theDocument.attachEvent("ondblclick", mouseEventCallback);
        theDocument.attachEvent("oncontextmenu", contextMenuEventCallback);
        theDocument.attachEvent("onkeyup", keyEventCallback);
        theDocument.attachEvent("onkeydown", keyEventCallback);
        theDocument.attachEvent("onkeypress", keyEventCallback);
        self._DOMWindow.attachEvent("onresize", resizeEventCallback);
        self._DOMWindow.onmousewheel = scrollEventCallback;
        theDocument.onmousewheel = scrollEventCallback;
        self._DOMBodyElement.ondrag = function()
        {
            return NO;
        };
        self._DOMBodyElement.onselectstart = function()
        {
            return self._DOMWindow.event.srcElement === self._platformPasteboard._DOMPasteboardElement;
        };
        self._DOMWindow.attachEvent("onunload", function()
        {
            objj_msgSend(self, "updateFromNativeContentRect");
            objj_msgSend(self, "_removeLayers");
            theDocument.detachEvent("onmouseup", mouseEventCallback);
            theDocument.detachEvent("onmousedown", mouseEventCallback);
            theDocument.detachEvent("onmousemove", mouseEventCallback);
            theDocument.detachEvent("ondblclick", mouseEventCallback);
            theDocument.detachEvent("oncontextmenu", contextMenuEventCallback);
            theDocument.detachEvent("onkeyup", keyEventCallback);
            theDocument.detachEvent("onkeydown", keyEventCallback);
            theDocument.detachEvent("onkeypress", keyEventCallback);
            self._DOMWindow.detachEvent("onresize", resizeEventCallback);
            self._DOMWindow.onmousewheel = NULL;
            theDocument.onmousewheel = NULL;
            self._DOMBodyElement.ondrag = NULL;
            self._DOMBodyElement.onselectstart = NULL;
            objj_msgSend(PlatformWindows, "removeObject:", self);
            objj_msgSend(self._platformPasteboard, "setDOMWindow:", nil);
            self._DOMWindow = nil;
        }, NO);
    }
}
,["void"]), new objj_method(sel_getUid("orderFront:"), function $CPPlatformWindow__orderFront_(self, _cmd, aWindow)
{
    if (objj_msgSend(aWindow, "parentWindow"))
        return;
    if (self._DOMWindow)
        return self._DOMWindow.focus();
    self._DOMWindow = window.open("about:blank", "_blank", "menubar=no,location=no,resizable=yes,scrollbars=no,status=no,left=" + CGRectGetMinX(self._contentRect) + ",top=" + CGRectGetMinY(self._contentRect) + ",width=" + CGRectGetWidth(self._contentRect) + ",height=" + CGRectGetHeight(self._contentRect));
    objj_msgSend(PlatformWindows, "addObject:", self);
    self._DOMWindow.document.write('<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></head><body style="background-color:transparent;"></body></html>');
    self._DOMWindow.document.close();
    if (self != objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"))
        self._DOMWindow.document.title = self._title;
    if (!objj_msgSend(CPPlatform, "isBrowser"))
    {
        self._DOMWindow.cpWindowNumber = objj_msgSend(self._only, "windowNumber");
        self._DOMWindow.cpSetFrame(self._contentRect);
        self._DOMWindow.cpSetLevel(self._level);
        self._DOMWindow.cpSetHasShadow(self._hasShadow);
        self._DOMWindow.cpSetShadowStyle(self._shadowStyle);
    }
    objj_msgSend(self, "registerDOMWindow");
    self._DOMBodyElement.style.cursor = objj_msgSend(objj_msgSend(CPCursor, "currentCursor"), "_cssString");
}
,["void","CPWindow"]), new objj_method(sel_getUid("orderOut:"), function $CPPlatformWindow__orderOut_(self, _cmd, aWindow)
{
    if (!self._DOMWindow)
        return;
    self._DOMWindow.close();
}
,["void","CPWindow"]), new objj_method(sel_getUid("dragEvent:"), function $CPPlatformWindow__dragEvent_(self, _cmd, aDOMEvent)
{
    var type = aDOMEvent.type,
        dragServer = objj_msgSend(CPDragServer, "sharedDragServer"),
        location = CGPointMake(aDOMEvent.clientX, aDOMEvent.clientY),
        pasteboard = objj_msgSend(_CPDOMDataTransferPasteboard, "DOMDataTransferPasteboard");
    objj_msgSend(pasteboard, "_setDataTransfer:", aDOMEvent.dataTransfer);
    if (aDOMEvent.type === "dragstart")
    {
        objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
        objj_msgSend(pasteboard, "_setPasteboard:", objj_msgSend(dragServer, "draggingPasteboard"));
        var draggedWindow = objj_msgSend(dragServer, "draggedWindow"),
            draggedWindowFrame = objj_msgSend(draggedWindow, "frame"),
            DOMDragElement = draggedWindow._DOMElement;
        DOMDragElement.style.left = -CGRectGetWidth(draggedWindowFrame) + "px";
        DOMDragElement.style.top = -CGRectGetHeight(draggedWindowFrame) + "px";
        var parentNode = DOMDragElement.parentNode;
        if (parentNode)
            parentNode.removeChild(DOMDragElement);
        self._DOMBodyElement.appendChild(DOMDragElement);
        var draggingOffset = objj_msgSend(dragServer, "draggingOffset");
        aDOMEvent.dataTransfer.setDragImage(DOMDragElement, draggingOffset.width, draggingOffset.height);
        aDOMEvent.dataTransfer.effectAllowed = "all";
        objj_msgSend(dragServer, "draggingStartedInPlatformWindow:globalLocation:", self, objj_msgSend(CPPlatform, "isBrowser") ? location : CGPointMake(aDOMEvent.screenX, aDOMEvent.screenY));
    }
    else if (type === "drag")
    {
        var y = aDOMEvent.screenY;
        if (CPFeatureIsCompatible(CPHTML5DragAndDropSourceYOffBy1))
            y -= 1;
        objj_msgSend(dragServer, "draggingSourceUpdatedWithGlobalLocation:", objj_msgSend(CPPlatform, "isBrowser") ? location : CGPointMake(aDOMEvent.screenX, y));
    }
    else if (type === "dragover" || type === "dragleave")
    {
        if (aDOMEvent.preventDefault)
            aDOMEvent.preventDefault();
        var dropEffect = "none",
            dragOperation = objj_msgSend(dragServer, "draggingUpdatedInPlatformWindow:location:", self, location);
        if (dragOperation === CPDragOperationMove || dragOperation === CPDragOperationGeneric || dragOperation === CPDragOperationPrivate)
            dropEffect = "move";
        else if (dragOperation === CPDragOperationCopy)
            dropEffect = "copy";
        else if (dragOperation === CPDragOperationLink)
            dropEffect = "link";
        aDOMEvent.dataTransfer.dropEffect = dropEffect;
    }
    else if (type === "dragend")
    {
        var dropEffect = aDOMEvent.dataTransfer.dropEffect;
        if (dropEffect === "move")
            dragOperation = CPDragOperationMove;
        else if (dropEffect === "copy")
            dragOperation = CPDragOperationCopy;
        else if (dropEffect === "link")
            dragOperation = CPDragOperationLink;
        else
            dragOperation = CPDragOperationNone;
        objj_msgSend(dragServer, "draggingEndedInPlatformWindow:globalLocation:operation:", self, objj_msgSend(CPPlatform, "isBrowser") ? location : CGPointMake(aDOMEvent.screenX, aDOMEvent.screenY), dragOperation);
    }
    else
    {
        objj_msgSend(dragServer, "performDragOperationInPlatformWindow:", self);
        if (aDOMEvent.preventDefault)
            aDOMEvent.preventDefault();
        if (aDOMEvent.stopPropagation)
            aDOMEvent.stopPropagation();
    }
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void","DOMEvent"]), new objj_method(sel_getUid("keyEvent:"), function $CPPlatformWindow__keyEvent_(self, _cmd, aDOMEvent)
{
    var event,
        location = self._lastMouseEventLocation || CGPointMakeZero(),
        timestamp = objj_msgSend(CPEvent, "currentTimestamp"),
        sourceElement = aDOMEvent.target || aDOMEvent.srcElement,
        windowNumber = objj_msgSend(objj_msgSend(CPApp, "keyWindow"), "windowNumber"),
        modifierFlags = (aDOMEvent.shiftKey ? CPShiftKeyMask : 0) | (aDOMEvent.ctrlKey ? CPControlKeyMask : 0) | (aDOMEvent.altKey ? CPAlternateKeyMask : 0) | (aDOMEvent.metaKey ? CPCommandKeyMask : 0);
    StopDOMEventPropagation = YES;
    if (!(CharacterKeysToPrevent[(String.fromCharCode(aDOMEvent.keyCode || aDOMEvent.charCode)).toLowerCase()] || KeyCodesToPrevent[aDOMEvent.keyCode]))
    {
        if (modifierFlags & (CPControlKeyMask | CPCommandKeyMask) || KeyCodesToAllow[aDOMEvent.keyCode])
            StopDOMEventPropagation = NO;
    }
    var overrideCharacters = nil,
        charactersIgnoringModifiers = "";
    switch(aDOMEvent.type) {
    case "keydown":
        if (aDOMEvent.keyCode in MozKeyCodeToKeyCodeMap)
            self._keyCode = MozKeyCodeToKeyCodeMap[aDOMEvent.keyCode];
        else
            self._keyCode = aDOMEvent.keyCode;
        var characters;
        if (aDOMEvent.which === 0 || aDOMEvent.charCode === 0 || aDOMEvent.which === undefined && aDOMEvent.charCode === undefined)
            characters = KeyCodesToUnicodeMap[self._keyCode];
        if (!characters)
            characters = (String.fromCharCode(self._keyCode)).toLowerCase();
        overrideCharacters = modifierFlags & CPShiftKeyMask || self._capsLockActive ? characters.toUpperCase() : characters;
        if (self._keyCode === CPKeyCodes.CAPS_LOCK)
            self._capsLockActive = YES;
        if (objj_msgSend(ModifierKeyCodes, "containsObject:", self._keyCode))
        {
            event = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPFlagsChanged, location, modifierFlags, timestamp, windowNumber, nil, nil, nil, NO, self._keyCode);
            break;
        }
        else if (modifierFlags & (CPControlKeyMask | CPCommandKeyMask))
        {
        }
        else if (CPKeyCodes.firesKeyPressEvent(self._keyCode, self._lastKey, aDOMEvent.shiftKey, aDOMEvent.ctrlKey, aDOMEvent.altKey))
        {
            StopDOMEventPropagation = NO;
            break;
        }
        else
        {
        }
    case "keypress":
        if (aDOMEvent.type === "keypress" && modifierFlags & (CPControlKeyMask | CPCommandKeyMask))
            break;
        var keyCode = self._keyCode,
            charCode = aDOMEvent.keyCode || aDOMEvent.charCode,
            isARepeat = self._charCodes[keyCode] != nil;
        self._lastKey = keyCode;
        self._charCodes[keyCode] = charCode;
        var characters = overrideCharacters;
        if (!characters && (aDOMEvent.which === 0 || aDOMEvent.charCode === 0))
            characters = KeyCodesToUnicodeMap[charCode];
        if (!characters)
            characters = String.fromCharCode(charCode);
        charactersIgnoringModifiers = characters.toLowerCase();
        if (!overrideCharacters && modifierFlags & CPCommandKeyMask && (modifierFlags & CPShiftKeyMask || self._capsLockActive))
            characters = characters.toUpperCase();
        event = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPKeyDown, location, modifierFlags, timestamp, windowNumber, nil, characters, charactersIgnoringModifiers, isARepeat, charCode);
        break;
    case "keyup":
        var keyCode = aDOMEvent.keyCode,
            charCode = self._charCodes[keyCode];
        self._keyCode = -1;
        self._lastKey = -1;
        self._charCodes[keyCode] = nil;
        if (keyCode === CPKeyCodes.CAPS_LOCK)
            self._capsLockActive = NO;
        if (objj_msgSend(ModifierKeyCodes, "containsObject:", keyCode))
        {
            event = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPFlagsChanged, location, modifierFlags, timestamp, windowNumber, nil, nil, nil, NO, self._keyCode);
            break;
        }
        var characters = KeyCodesToUnicodeMap[charCode] || String.fromCharCode(charCode);
        charactersIgnoringModifiers = characters.toLowerCase();
        if (!(modifierFlags & CPShiftKeyMask) && modifierFlags & CPCommandKeyMask && !self._capsLockActive)
            characters = charactersIgnoringModifiers;
        event = objj_msgSend(CPEvent, "keyEventWithType:location:modifierFlags:timestamp:windowNumber:context:characters:charactersIgnoringModifiers:isARepeat:keyCode:", CPKeyUp, location, modifierFlags, timestamp, windowNumber, nil, characters, charactersIgnoringModifiers, NO, keyCode);
        break;
    }
    if (event)
        event._DOMEvent = aDOMEvent;
    objj_msgSend(self._platformPasteboard, "windowMaySendKeyEvent:", event);
    if (event && !objj_msgSend(self._platformPasteboard, "windowShouldSuppressKeyEvent"))
    {
        objj_msgSend(CPApp, "sendEvent:", event);
        objj_msgSend(self._platformPasteboard, "windowDidSendKeyEvent:", event);
    }
    var didStop = NO;
    if (objj_msgSend(self._platformPasteboard, "windowShouldStopPropagation") || StopDOMEventPropagation && !objj_msgSend(self._platformPasteboard, "windowShouldNotStopPropagation"))
    {
        didStop = YES;
        _CPDOMEventStop(aDOMEvent, self);
    }
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    return !didStop;
}
,["void","DOMEvent"]), new objj_method(sel_getUid("scrollEvent:"), function $CPPlatformWindow__scrollEvent_(self, _cmd, aDOMEvent)
{
    if (self._hideDOMScrollingElementTimeout)
    {
        clearTimeout(self._hideDOMScrollingElementTimeout);
        self._hideDOMScrollingElementTimeout = nil;
    }
    if (!aDOMEvent)
        aDOMEvent = window.event;
    var location = nil;
    if (CPFeatureIsCompatible(CPJavaScriptMouseWheelValues_8_15))
    {
        var x = aDOMEvent._offsetX || 0.0,
            y = aDOMEvent._offsetY || 0.0,
            element = aDOMEvent.target;
        while (element.nodeType !== 1)
            element = element.parentNode;
        if (element.offsetParent)
        {
            do
            {
                x += element.offsetLeft;
                y += element.offsetTop;
            }
            while (element = element.offsetParent);
        }
        location = CGPointMake(x + (aDOMEvent.clientX - 8) / 15, y + (aDOMEvent.clientY - 8) / 15);
    }
    else if (aDOMEvent._overrideLocation)
        location = aDOMEvent._overrideLocation;
    else
        location = CGPointMake(aDOMEvent.clientX, aDOMEvent.clientY);
    var deltaX = 0.0,
        deltaY = 0.0,
        windowNumber = 0,
        timestamp = objj_msgSend(CPEvent, "currentTimestamp"),
        modifierFlags = (aDOMEvent.shiftKey ? CPShiftKeyMask : 0) | (aDOMEvent.ctrlKey ? CPControlKeyMask : 0) | (aDOMEvent.altKey ? CPAlternateKeyMask : 0) | (aDOMEvent.metaKey ? CPCommandKeyMask : 0);
    self._DOMScrollingElement.style.visibility = "visible";
    self._DOMScrollingElement.style.top = location.y - 15 + "px";
    self._DOMScrollingElement.style.left = location.x - 15 + "px";
    StopDOMEventPropagation = NO;
    var theWindow = objj_msgSend(self, "hitTest:", location);
    if (!theWindow)
        return;
    var windowNumber = objj_msgSend(theWindow, "windowNumber");
    location = objj_msgSend(theWindow, "convertBridgeToBase:", location);
    var event = objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", CPScrollWheel, location, modifierFlags, timestamp, windowNumber, nil, -1, 1, 0);
    event._DOMEvent = aDOMEvent;
    setTimeout(function()
    {
        var deltaX = self._DOMScrollingElement.scrollLeft - 150,
            deltaY = self._DOMScrollingElement.scrollTop - 150 || (aDOMEvent.deltaY === undefined ? 0 : aDOMEvent.deltaY * 5);
        if (deltaX || deltaY)
        {
            event._deltaX = deltaX;
            event._deltaY = deltaY;
            objj_msgSend(CPApp, "sendEvent:", event);
        }
        self._DOMScrollingElement.scrollLeft = 150;
        self._DOMScrollingElement.scrollTop = 150;
    }, 0);
    self._hideDOMScrollingElementTimeout = setTimeout(function()
    {
        self._DOMScrollingElement.style.visibility = "hidden";
    }, 300);
}
,["void","DOMEvent"]), new objj_method(sel_getUid("resizeEvent:"), function $CPPlatformWindow__resizeEvent_(self, _cmd, aDOMEvent)
{
    objj_msgSend(resizeTimer, "invalidate");
    resizeTimer = objj_msgSend(CPTimer, "scheduledTimerWithTimeInterval:target:selector:userInfo:repeats:", 0.2, self, sel_getUid("_actualResizeEvent"), nil, NO);
}
,["void","DOMEvent"]), new objj_method(sel_getUid("_actualResizeEvent"), function $CPPlatformWindow___actualResizeEvent(self, _cmd)
{
    resizeTimer = nil;
    if (objj_msgSend(CPPlatform, "isBrowser"))
        objj_msgSend(CPApp._activeMenu, "cancelTracking");
    var oldSize = objj_msgSend(self, "contentRect").size;
    objj_msgSend(self, "updateFromNativeContentRect");
    var levels = self._windowLevels,
        layers = self._windowLayers,
        levelCount = levels.length;
    while (levelCount--)
    {
        var windows = objj_msgSend(layers, "objectForKey:", levels[levelCount])._windows,
            windowCount = windows.length;
        while (windowCount--)
            objj_msgSend(windows[windowCount], "resizeWithOldPlatformWindowSize:", oldSize);
    }
    objj_msgSend(objj_msgSend(CPNotificationCenter, "defaultCenter"), "postNotificationName:object:userInfo:", CPApplicationDidChangeScreenParametersNotification, CPApp, nil);
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
}
,["void"]), new objj_method(sel_getUid("touchEvent:"), function $CPPlatformWindow__touchEvent_(self, _cmd, aDOMEvent)
{
    if (aDOMEvent.touches && (aDOMEvent.touches.length == 1 || aDOMEvent.touches.length == 0 && aDOMEvent.changedTouches.length == 1))
    {
        var newEvent = {};
        switch(aDOMEvent.type) {
        case CPDOMEventTouchStart:
            newEvent.type = CPDOMEventMouseDown;
            break;
        case CPDOMEventTouchEnd:
            newEvent.type = CPDOMEventMouseUp;
            break;
        case CPDOMEventTouchMove:
            newEvent.type = CPDOMEventMouseMoved;
            break;
        case CPDOMEventTouchCancel:
            newEvent.type = CPDOMEventMouseUp;
            break;
        }
        var touch = aDOMEvent.touches.length ? aDOMEvent.touches[0] : aDOMEvent.changedTouches[0];
        newEvent.clientX = touch.clientX;
        newEvent.clientY = touch.clientY;
        newEvent.timestamp = objj_msgSend(CPEvent, "currentTimestamp");
        newEvent.target = aDOMEvent.target;
        newEvent.shiftKey = newEvent.ctrlKey = newEvent.altKey = newEvent.metaKey = false;
        newEvent.preventDefault = function()
        {
            if (aDOMEvent.preventDefault)
                aDOMEvent.preventDefault();
        };
        newEvent.stopPropagation = function()
        {
            if (aDOMEvent.stopPropagation)
                aDOMEvent.stopPropagation();
        };
        objj_msgSend(self, "mouseEvent:", newEvent);
        return;
    }
    else
    {
        if (aDOMEvent.preventDefault)
            aDOMEvent.preventDefault();
        if (aDOMEvent.stopPropagation)
            aDOMEvent.stopPropagation();
    }
}
,["void","DOMEvent"]), new objj_method(sel_getUid("mouseEvent:"), function $CPPlatformWindow__mouseEvent_(self, _cmd, aDOMEvent)
{
    var type = self._overriddenEventType || aDOMEvent.type;
    if (type === "dblclick")
    {
        self._overriddenEventType = CPDOMEventMouseDown;
        objj_msgSend(self, "mouseEvent:", aDOMEvent);
        self._overriddenEventType = CPDOMEventMouseUp;
        objj_msgSend(self, "mouseEvent:", aDOMEvent);
        self._overriddenEventType = nil;
        return;
    }
    var event,
        location = CGPointMake(aDOMEvent.clientX, aDOMEvent.clientY),
        timestamp = objj_msgSend(CPEvent, "currentTimestamp"),
        sourceElement = aDOMEvent.target || aDOMEvent.srcElement,
        windowNumber = 0,
        modifierFlags = (aDOMEvent.shiftKey ? CPShiftKeyMask : 0) | (aDOMEvent.ctrlKey ? CPControlKeyMask : 0) | (aDOMEvent.altKey ? CPAlternateKeyMask : 0) | (aDOMEvent.metaKey ? CPCommandKeyMask : 0);
    StopDOMEventPropagation = YES;
    if (self._mouseDownWindow)
        windowNumber = objj_msgSend(self._mouseDownWindow, "windowNumber");
    else
    {
        var theWindow = objj_msgSend(self, "_mouseHitTest:", location);
        if (aDOMEvent.type === CPDOMEventMouseDown && theWindow)
            self._mouseDownWindow = theWindow;
        windowNumber = objj_msgSend(theWindow, "windowNumber");
    }
    if (windowNumber)
        location = objj_msgSend(CPApp._windows[windowNumber], "convertPlatformWindowToBase:", location);
    if (type === "mouseup")
    {
        if (self._mouseIsDown)
        {
            event = _CPEventFromNativeMouseEvent(aDOMEvent, self._mouseDownIsRightClick ? CPRightMouseUp : CPLeftMouseUp, location, modifierFlags, timestamp, windowNumber, nil, -1, CPDOMEventGetClickCount(self._lastMouseUp, timestamp, location), 0, nil);
            self._mouseIsDown = NO;
            self._lastMouseUp = event;
            self._mouseDownWindow = nil;
            self._mouseDownIsRightClick = NO;
        }
        if (self._DOMEventMode)
        {
            self._DOMEventMode = NO;
            return;
        }
    }
    else if (type === "mousedown")
    {
        objj_msgSend(_CPToolTip, "invalidateCurrentToolTipIfNeeded");
        var button = aDOMEvent.button;
        self._mouseDownIsRightClick = button == 2 || CPBrowserIsOperatingSystem(CPMacOperatingSystem) && button == 0 && modifierFlags & CPControlKeyMask;
        if (sourceElement.tagName === "INPUT" && sourceElement != self._DOMFocusElement)
        {
            if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
            {
                self._DOMBodyElement.setAttribute("draggable", "false");
                self._DOMBodyElement.style["-khtml-user-drag"] = "none";
            }
            self._DOMEventMode = YES;
            self._mouseIsDown = YES;
            objj_msgSend(CPApp, "sendEvent:", objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", self._mouseDownIsRightClick ? CPRightMouseDown : CPLeftMouseDown, location, modifierFlags, timestamp, windowNumber, nil, -1, CPDOMEventGetClickCount(self._lastMouseDown, timestamp, location), 0));
            objj_msgSend(CPApp, "sendEvent:", objj_msgSend(CPEvent, "mouseEventWithType:location:modifierFlags:timestamp:windowNumber:context:eventNumber:clickCount:pressure:", self._mouseDownIsRightClick ? CPRightMouseUp : CPLeftMouseUp, location, modifierFlags, timestamp, windowNumber, nil, -1, CPDOMEventGetClickCount(self._lastMouseDown, timestamp, location), 0));
            return;
        }
        else if (objj_msgSend(CPPlatform, "supportsDragAndDrop"))
        {
            self._DOMBodyElement.setAttribute("draggable", "true");
            self._DOMBodyElement.style["-khtml-user-drag"] = "element";
        }
        StopContextMenuDOMEventPropagation = YES;
        event = _CPEventFromNativeMouseEvent(aDOMEvent, self._mouseDownIsRightClick ? CPRightMouseDown : CPLeftMouseDown, location, modifierFlags, timestamp, windowNumber, nil, -1, CPDOMEventGetClickCount(self._lastMouseDown, timestamp, location), 0, nil);
        self._mouseIsDown = YES;
        self._lastMouseDown = event;
    }
    else
    {
        if (self._DOMEventMode)
            return;
        event = _CPEventFromNativeMouseEvent(aDOMEvent, self._mouseIsDown ? self._mouseDownIsRightClick ? CPRightMouseDragged : CPLeftMouseDragged : CPMouseMoved, location, modifierFlags, timestamp, windowNumber, nil, -1, 1, 0, self._lastMouseEventLocation || location);
    }
    var isDragging = objj_msgSend(objj_msgSend(CPDragServer, "sharedDragServer"), "isDragging");
    if (event && (!isDragging || !supportsNativeDragAndDrop))
    {
        event._DOMEvent = aDOMEvent;
        objj_msgSend(CPApp, "sendEvent:", event);
    }
    var didStop = NO;
    if (StopDOMEventPropagation && (!supportsNativeDragAndDrop || type !== "mousedown" && !isDragging))
    {
        didStop = YES;
        _CPDOMEventStop(aDOMEvent, self);
    }
    var hasTrackingEventListener = NO;
    for (var i = 0; i < CPApp._eventListeners.length; i++)
    {
        var listener = CPApp._eventListeners[i];
        if (listener._callback !== _CPRunModalLoop && listener._mask & CPLeftMouseDraggedMask)
        {
            hasTrackingEventListener = YES;
            break;
        }
    }
    self._lastMouseEventLocation = location;
    self._DOMEventGuard.style.display = hasTrackingEventListener ? "" : "none";
    objj_msgSend(objj_msgSend(CPRunLoop, "currentRunLoop"), "limitDateForMode:", CPDefaultRunLoopMode);
    return !didStop;
}
,["void","DOMEvent"]), new objj_method(sel_getUid("contextMenuEvent:"), function $CPPlatformWindow__contextMenuEvent_(self, _cmd, aDOMEvent)
{
    if (StopContextMenuDOMEventPropagation)
        _CPDOMEventStop(aDOMEvent, self);
    return !StopContextMenuDOMEventPropagation;
}
,["void","DOMEvent"]), new objj_method(sel_getUid("orderedWindowsAtLevel:"), function $CPPlatformWindow__orderedWindowsAtLevel_(self, _cmd, aLevel)
{
    var layer = objj_msgSend(self, "layerAtLevel:create:", aLevel, NO);
    if (!layer)
        return [];
    return objj_msgSend(layer, "orderedWindows");
}
,["CPArray","int"]), new objj_method(sel_getUid("layerAtLevel:create:"), function $CPPlatformWindow__layerAtLevel_create_(self, _cmd, aLevel, aFlag)
{
    var layer = objj_msgSend(self._windowLayers, "objectForKey:", aLevel);
    if (!layer && aFlag)
    {
        layer = objj_msgSend(objj_msgSend(CPDOMWindowLayer, "alloc"), "initWithLevel:", aLevel);
        objj_msgSend(self._windowLayers, "setObject:forKey:", layer, aLevel);
        var low = 0,
            high = self._windowLevels.length - 1,
            middle;
        while (low <= high)
        {
            middle = FLOOR((low + high) / 2);
            if (self._windowLevels[middle] > aLevel)
                high = middle - 1;
            else
                low = middle + 1;
        }
        var insertionIndex = 0;
        if (middle !== undefined)
            insertionIndex = self._windowLevels[middle] > aLevel ? middle : middle + 1;
        objj_msgSend(self._windowLevels, "insertObject:atIndex:", aLevel, insertionIndex);
        layer._DOMElement.style.zIndex = aLevel;
        self._DOMBodyElement.appendChild(layer._DOMElement);
    }
    return layer;
}
,["CPDOMWindowLayer","int","BOOL"]), new objj_method(sel_getUid("order:window:relativeTo:"), function $CPPlatformWindow__order_window_relativeTo_(self, _cmd, orderingMode, aWindow, otherWindow)
{
    objj_msgSend(CPPlatform, "initializeScreenIfNecessary");
    var layer = objj_msgSend(self, "layerAtLevel:create:", objj_msgSend(aWindow, "level"), orderingMode !== CPWindowOut);
    if (orderingMode === CPWindowOut)
        return objj_msgSend(layer, "removeWindow:", aWindow);
    if (!objj_msgSend(aWindow, "isVisible") && otherWindow && objj_msgSend(aWindow, "parentWindow") === otherWindow)
    {
        var children = objj_msgSend(otherWindow, "childWindows"),
            lastChild = objj_msgSend(children, "lastObject");
        if (lastChild === aWindow)
        {
            if (objj_msgSend(children, "count") > 1)
                otherWindow = objj_msgSend(children, "objectAtIndex:", objj_msgSend(children, "count") - 2);
        }
        else if (lastChild)
            otherWindow = lastChild;
        var furthestParent = objj_msgSend(self, "_furthestParentOf:", otherWindow);
        if (orderingMode === CPWindowAbove && furthestParent._index > otherWindow._index || orderingMode === CPWindowBelow && furthestParent._index < otherWindow._index)
            otherWindow = furthestParent;
    }
    else if (orderingMode === CPWindowAbove && !otherWindow)
        aWindow = objj_msgSend(self, "_furthestParentOf:", aWindow);
    var insertionIndex = CPNotFound;
    if (otherWindow)
        insertionIndex = orderingMode === CPWindowAbove ? otherWindow._index + 1 : otherWindow._index;
    objj_msgSend(layer, "insertWindow:atIndex:", aWindow, insertionIndex);
    if (objj_msgSend(objj_msgSend(aWindow, "childWindows"), "count"))
        objj_msgSend(self, "_orderChildWindowsOf:furthestParent:layer:", aWindow, objj_msgSend(self, "_furthestParentOf:", aWindow), layer);
    objj_msgSend(aWindow, "_setHasBeenOrderedIn:", YES);
}
,["void","CPWindowOrderingMode","CPWindow","CPWindow"]), new objj_method(sel_getUid("_furthestParentOf:"), function $CPPlatformWindow___furthestParentOf_(self, _cmd, aWindow)
{
    var parent;
    while (parent = objj_msgSend(aWindow, "parentWindow"))
        aWindow = parent;
    return aWindow;
}
,["CPWindow","CPWindow"]), new objj_method(sel_getUid("_orderChildWindowsOf:furthestParent:layer:"), function $CPPlatformWindow___orderChildWindowsOf_furthestParent_layer_(self, _cmd, aWindow, furthestParent, aLayer)
{
    var children = objj_msgSend(aWindow, "childWindows"),
        count = objj_msgSend(children, "count"),
        parent = aWindow,
        parentLevel = objj_msgSend(parent, "level");
    for (var i = 0; i < count; ++i)
    {
        var child = children[i],
            childWasVisible = objj_msgSend(child, "isVisible");
        if (!childWasVisible && !objj_msgSend(child, "_hasBeenOrderedIn"))
            continue;
        if (objj_msgSend(child, "level") !== parentLevel)
            continue;
        var ordering = objj_msgSend(child, "_childOrdering");
        if (ordering === CPWindowAbove && furthestParent._index > parent._index || ordering === CPWindowBelow && furthestParent._index < parent._index)
            parent = furthestParent;
        var index = ordering === CPWindowAbove ? parent._index + 1 : parent._index;
        objj_msgSend(aLayer, "insertWindow:atIndex:", child, index);
        if (!childWasVisible)
            objj_msgSend(child, "_parentDidOrderInChild");
        if (objj_msgSend(objj_msgSend(child, "childWindows"), "count"))
            objj_msgSend(self, "_orderChildWindowsOf:furthestParent:layer:", child, furthestParent, aLayer);
        parent = child;
    }
}
,["void","CPWindow","CPWindow","CPDOMWindowLayer"]), new objj_method(sel_getUid("_removeLayers"), function $CPPlatformWindow___removeLayers(self, _cmd)
{
    var levels = self._windowLevels,
        layers = self._windowLayers,
        levelCount = levels.length;
    while (levelCount--)
    {
        var layer = objj_msgSend(layers, "objectForKey:", levels[levelCount]);
        self._DOMBodyElement.removeChild(layer._DOMElement);
    }
}
,["void"]), new objj_method(sel_getUid("_addLayers"), function $CPPlatformWindow___addLayers(self, _cmd)
{
    var levels = self._windowLevels,
        layers = self._windowLayers,
        levelCount = levels.length;
    while (levelCount--)
    {
        var layer = objj_msgSend(layers, "objectForKey:", levels[levelCount]);
        self._DOMBodyElement.appendChild(layer._DOMElement);
    }
}
,["void"]), new objj_method(sel_getUid("_dragHitTest:pasteboard:"), function $CPPlatformWindow___dragHitTest_pasteboard_(self, _cmd, aPoint, aPasteboard)
{
    var levels = self._windowLevels,
        layers = self._windowLayers,
        levelCount = levels.length;
    while (levelCount--)
    {
        if (levels[levelCount] >= CPDraggingWindowLevel)
            continue;
        var windows = objj_msgSend(layers, "objectForKey:", levels[levelCount])._windows,
            windowCount = windows.length;
        while (windowCount--)
        {
            var theWindow = windows[windowCount];
            if (objj_msgSend(theWindow, "_sharesChromeWithPlatformWindow"))
                return objj_msgSend(theWindow, "_dragHitTest:pasteboard:", aPoint, aPasteboard);
            if (objj_msgSend(theWindow, "containsPoint:", aPoint))
                return objj_msgSend(theWindow, "_dragHitTest:pasteboard:", aPoint, aPasteboard);
        }
    }
    return nil;
}
,["id","CGPoint","CPPasteboard"]), new objj_method(sel_getUid("_propagateCurrentDOMEvent:"), function $CPPlatformWindow___propagateCurrentDOMEvent_(self, _cmd, aFlag)
{
    StopDOMEventPropagation = !aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("_willPropagateCurrentDOMEvent"), function $CPPlatformWindow___willPropagateCurrentDOMEvent(self, _cmd)
{
    return !StopDOMEventPropagation;
}
,["BOOL"]), new objj_method(sel_getUid("_propagateContextMenuDOMEvent:"), function $CPPlatformWindow___propagateContextMenuDOMEvent_(self, _cmd, aFlag)
{
    if (aFlag && CPBrowserIsEngine(CPGeckoBrowserEngine))
        StopDOMEventPropagation = !aFlag;
    StopContextMenuDOMEventPropagation = !aFlag;
}
,["void","BOOL"]), new objj_method(sel_getUid("_willPropagateContextMenuDOMEvent"), function $CPPlatformWindow___willPropagateContextMenuDOMEvent(self, _cmd)
{
    return StopContextMenuDOMEventPropagation;
}
,["BOOL"]), new objj_method(sel_getUid("_mouseHitTest:"), function $CPPlatformWindow___mouseHitTest_(self, _cmd, location)
{
    return objj_msgSend(self, "_hitTest:withTest:", location, sel_getUid("_isValidMousePoint:"));
}
,["CPWindow","CGPoint"]), new objj_method(sel_getUid("hitTest:"), function $CPPlatformWindow__hitTest_(self, _cmd, location)
{
    return objj_msgSend(self, "_hitTest:withTest:", location, sel_getUid("containsPoint:"));
}
,["CPWindow","CGPoint"]), new objj_method(sel_getUid("_hitTest:withTest:"), function $CPPlatformWindow___hitTest_withTest_(self, _cmd, location, aTest)
{
    if (self._only)
        return self._only;
    var levels = self._windowLevels,
        layers = self._windowLayers,
        levelCount = levels.length,
        theWindow = nil;
    while (levelCount-- && !theWindow)
    {
        var windows = objj_msgSend(layers, "objectForKey:", levels[levelCount])._windows,
            windowCount = windows.length;
        while (windowCount-- && !theWindow)
        {
            var candidateWindow = windows[windowCount];
            if (!candidateWindow._ignoresMouseEvents && objj_msgSend(candidateWindow, "performSelector:withObject:", aTest, location))
                theWindow = candidateWindow;
        }
    }
    return theWindow;
}
,["CPWindow","CGPoint","SEL"]), new objj_method(sel_getUid("_selectedText"), function $CPPlatformWindow___selectedText(self, _cmd)
{
    if (self._DOMWindow.getSelection)
        return "" + self._DOMWindow.getSelection();
    else if (self._DOMWindow.document.getSelection)
        return "" + self._DOMWindow.document.getSelection();
    else if (self._DOMWindow.selection)
        return "" + (self._DOMWindow.selection.createRange()).text;
    else
        return nil;
}
,["CPString"]), new objj_method(sel_getUid("setSelectedRange:inElement:"), function $CPPlatformWindow__setSelectedRange_inElement_(self, _cmd, aRange, anElement)
{
    if (self._DOMWindow.getSelection())
    {
        var domRange = self._DOMWindow.document.createRange();
        domRange.setStart(anElement.childNodes[0], aRange.location);
        domRange.setEnd(anElement.childNodes[0], CPMaxRange(aRange));
        (self._DOMWindow.getSelection()).removeAllRanges();
        (self._DOMWindow.getSelection()).addRange(domRange);
    }
    else if (self._DOMWindow.document.selection)
    {
        var domRange = self._DOMWindow.document.body.createTextRange();
        domRange.moveToElementText(anElement);
        domRange.collapse(true);
        domRange.moveStart('character', aRange.location);
        domRange.moveEnd('character', aRange.length);
        domRange.select();
    }
}
,["void","CPRange","DOMElement"])]);
class_addMethods(meta_class, [new objj_method(sel_getUid("visiblePlatformWindows"), function $CPPlatformWindow__visiblePlatformWindows(self, _cmd)
{
    if (objj_msgSend(objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"), "isVisible"))
    {
        var set = objj_msgSend(CPSet, "setWithSet:", PlatformWindows);
        objj_msgSend(set, "addObject:", objj_msgSend(CPPlatformWindow, "primaryPlatformWindow"));
        return set;
    }
    else
        return PlatformWindows;
}
,["CPSet"]), new objj_method(sel_getUid("preventCharacterKeysFromPropagating:"), function $CPPlatformWindow__preventCharacterKeysFromPropagating_(self, _cmd, characters)
{
    for (var i = characters.length; i > 0; i--)
        CharacterKeysToPrevent["" + characters[i - 1].toLowerCase()] = YES;
}
,["void","CPArray"]), new objj_method(sel_getUid("preventCharacterKeyFromPropagating:"), function $CPPlatformWindow__preventCharacterKeyFromPropagating_(self, _cmd, character)
{
    CharacterKeysToPrevent[character.toLowerCase()] = YES;
}
,["void","CPString"]), new objj_method(sel_getUid("clearCharacterKeysToPreventFromPropagating"), function $CPPlatformWindow__clearCharacterKeysToPreventFromPropagating(self, _cmd)
{
    CharacterKeysToPrevent = {};
}
,["void"]), new objj_method(sel_getUid("preventKeyCodesFromPropagating:"), function $CPPlatformWindow__preventKeyCodesFromPropagating_(self, _cmd, keyCodes)
{
    for (var i = keyCodes.length; i > 0; i--)
        KeyCodesToPrevent[keyCodes[i - 1]] = YES;
}
,["void","CPArray"]), new objj_method(sel_getUid("preventKeyCodeFromPropagating:"), function $CPPlatformWindow__preventKeyCodeFromPropagating_(self, _cmd, keyCode)
{
    KeyCodesToPrevent[keyCode] = YES;
}
,["void","CPString"]), new objj_method(sel_getUid("clearKeyCodesToPreventFromPropagating"), function $CPPlatformWindow__clearKeyCodesToPreventFromPropagating(self, _cmd)
{
    KeyCodesToPrevent = {};
}
,["void"])]);
}var CPEventClass = objj_msgSend(CPEvent, "class");
var _CPEventFromNativeMouseEvent = function(aNativeEvent, anEventType, aPoint, modifierFlags, aTimestamp, aWindowNumber, aGraphicsContext, anEventNumber, aClickCount, aPressure, aMouseDragStart)
{
    aNativeEvent.isa = CPEventClass;
    aNativeEvent._type = anEventType;
    aNativeEvent._location = aPoint;
    aNativeEvent._modifierFlags = modifierFlags;
    aNativeEvent._timestamp = aTimestamp;
    aNativeEvent._windowNumber = aWindowNumber;
    aNativeEvent._window = nil;
    aNativeEvent._context = aGraphicsContext;
    aNativeEvent._eventNumber = anEventNumber;
    aNativeEvent._clickCount = aClickCount;
    aNativeEvent._pressure = aPressure;
    if (anEventType == CPLeftMouseDragged || anEventType == CPRightMouseDragged || anEventType == CPMouseMoved)
    {
        aNativeEvent._deltaX = aPoint.x - aMouseDragStart.x;
        aNativeEvent._deltaY = aPoint.y - aMouseDragStart.y;
    }
    else
    {
        aNativeEvent._deltaX = 0;
        aNativeEvent._deltaY = 0;
    }
    return aNativeEvent;
};
var CLICK_SPACE_DELTA = 5.0,
    CLICK_TIME_DELTA = typeof document != "undefined" && document.addEventListener ? 0.55 : 1.0;
var CPDOMEventGetClickCount = function(aComparisonEvent, aTimestamp, aLocation)
{
    if (!aComparisonEvent)
        return 1;
    var comparisonLocation = objj_msgSend(aComparisonEvent, "locationInWindow");
    return aTimestamp - objj_msgSend(aComparisonEvent, "timestamp") < CLICK_TIME_DELTA && ABS(comparisonLocation.x - aLocation.x) < CLICK_SPACE_DELTA && ABS(comparisonLocation.y - aLocation.y) < CLICK_SPACE_DELTA ? objj_msgSend(aComparisonEvent, "clickCount") + 1 : 1;
};
_CPDOMEventStop = function(aDOMEvent, aPlatformWindow)
{
    aDOMEvent.cancelBubble = true;
    aDOMEvent.returnValue = false;
    if (aDOMEvent.preventDefault)
        aDOMEvent.preventDefault();
    if (aDOMEvent.stopPropagation)
        aDOMEvent.stopPropagation();
};
CPWindowObjectList = function()
{
    var platformWindows = objj_msgSend(CPPlatformWindow, "visiblePlatformWindows"),
        platformWindowEnumerator = objj_msgSend(platformWindows, "objectEnumerator"),
        platformWindow = nil,
        windowObjects = [];
    while ((platformWindow = objj_msgSend(platformWindowEnumerator, "nextObject")) !== nil)
    {
        var levels = platformWindow._windowLevels,
            layers = platformWindow._windowLayers,
            levelCount = levels.length;
        while (levelCount--)
        {
            var windows = objj_msgSend(layers, "objectForKey:", levels[levelCount])._windows,
                windowCount = windows.length;
            while (windowCount--)
                windowObjects.push(windows[windowCount]);
        }
    }
    return windowObjects;
}
CPWindowList = function()
{
    var windowObjectList = CPWindowObjectList(),
        windowList = [];
    for (var i = 0, count = objj_msgSend(windowObjectList, "count"); i < count; i++)
        windowList.push(objj_msgSend(windowObjectList[i], "windowNumber"));
    return windowList;
}
p;26;CPPlatformWindow+DOMKeys.jt;2998;@STATIC;1.0;t;2979;CPKeyCodes = {BACKSPACE: 8, TAB: 9, NUM_CENTER: 12, ENTER: 13, SHIFT: 16, CTRL: 17, ALT: 18, PAUSE: 19, CAPS_LOCK: 20, ESC: 27, SPACE: 32, PAGE_UP: 33, PAGE_DOWN: 34, END: 35, HOME: 36, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, PRINT_SCREEN: 44, INSERT: 45, DELETE: 46, ZERO: 48, ONE: 49, TWO: 50, THREE: 51, FOUR: 52, FIVE: 53, SIX: 54, SEVEN: 55, EIGHT: 56, NINE: 57, QUESTION_MARK: 63, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, META: 91, WEBKIT_RIGHT_META: 93, CONTEXT_MENU: 93, NUM_ZERO: 96, NUM_ONE: 97, NUM_TWO: 98, NUM_THREE: 99, NUM_FOUR: 100, NUM_FIVE: 101, NUM_SIX: 102, NUM_SEVEN: 103, NUM_EIGHT: 104, NUM_NINE: 105, NUM_MULTIPLY: 106, NUM_PLUS: 107, NUM_MINUS: 109, NUM_PERIOD: 110, NUM_DIVISION: 111, F1: 112, F2: 113, F3: 114, F4: 115, F5: 116, F6: 117, F7: 118, F8: 119, F9: 120, F10: 121, F11: 122, F12: 123, NUMLOCK: 144, SEMICOLON: 186, DASH: 189, EQUALS: 187, COMMA: 188, PERIOD: 190, SLASH: 191, APOSTROPHE: 192, SINGLE_QUOTE: 222, OPEN_SQUARE_BRACKET: 219, BACKSLASH: 220, CLOSE_SQUARE_BRACKET: 221, WIN_KEY: 224, MAC_FF_META: 224, WIN_IME: 229};
CPKeyCodes.firesKeyPressEvent = function(keyCode, opt_heldKeyCode, opt_shiftKey, opt_ctrlKey, opt_altKey)
{
    if (!CPFeatureIsCompatible(CPJavaScriptRemedialKeySupport))
        return true;
    if (CPBrowserIsOperatingSystem(CPMacOperatingSystem) && opt_altKey)
        return CPKeyCodes.isCharacterKey(keyCode);
    if (opt_altKey && !opt_ctrlKey)
        return false;
    if (CPBrowserIsEngine(CPInternetExplorerBrowserEngine) && !opt_shiftKey && (opt_ctrlKey || opt_altKey))
        return false;
    if (CPBrowserIsEngine(CPInternetExplorerBrowserEngine) && opt_ctrlKey && opt_heldKeyCode == keyCode)
        return false;
    switch(keyCode) {
    case CPKeyCodes.ENTER:
        return true;
    case CPKeyCodes.ESC:
        return !CPBrowserIsEngine(CPWebKitBrowserEngine);
    }
    return CPKeyCodes.isCharacterKey(keyCode);
};
CPKeyCodes.isCharacterKey = function(keyCode)
{
    if (keyCode >= CPKeyCodes.ZERO && keyCode <= CPKeyCodes.NINE)
        return true;
    if (keyCode >= CPKeyCodes.NUM_ZERO && keyCode <= CPKeyCodes.NUM_MULTIPLY)
        return true;
    if (keyCode >= CPKeyCodes.A && keyCode <= CPKeyCodes.Z)
        return true;
    switch(keyCode) {
    case CPKeyCodes.SPACE:
    case CPKeyCodes.QUESTION_MARK:
    case CPKeyCodes.NUM_PLUS:
    case CPKeyCodes.NUM_MINUS:
    case CPKeyCodes.NUM_PERIOD:
    case CPKeyCodes.NUM_DIVISION:
    case CPKeyCodes.SEMICOLON:
    case CPKeyCodes.DASH:
    case CPKeyCodes.EQUALS:
    case CPKeyCodes.COMMA:
    case CPKeyCodes.PERIOD:
    case CPKeyCodes.SLASH:
    case CPKeyCodes.APOSTROPHE:
    case CPKeyCodes.SINGLE_QUOTE:
    case CPKeyCodes.OPEN_SQUARE_BRACKET:
    case CPKeyCodes.BACKSLASH:
    case CPKeyCodes.CLOSE_SQUARE_BRACKET:
        return true;
default:
        return false;
    }
};
e;